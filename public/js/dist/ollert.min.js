!function($){$.extend({tablesorter:new function(){function benchmark(a,b){log(a+","+((new Date).getTime()-b.getTime())+"ms")}function log(a){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(a):alert(a)}function buildParserCache(a,b){if(a.config.debug)var c="";if(0!=a.tBodies.length){var d=a.tBodies[0].rows;if(d[0])for(var e=[],f=d[0].cells,g=f.length,h=0;h<g;h++){var i=!1;$.metadata&&$(b[h]).metadata()&&$(b[h]).metadata().sorter?i=getParserById($(b[h]).metadata().sorter):a.config.headers[h]&&a.config.headers[h].sorter&&(i=getParserById(a.config.headers[h].sorter)),i||(i=detectParserForColumn(a,d,-1,h)),a.config.debug&&(c+="column:"+h+" parser:"+i.id+"\n"),e.push(i)}return a.config.debug&&log(c),e}}function detectParserForColumn(a,b,c,d){for(var e=parsers.length,f=!1,g=!1,h=!0;""==g&&h;)c++,b[c]?(f=getNodeFromRowAndCellIndex(b,c,d),g=trimAndGetNodeText(a.config,f),a.config.debug&&log("Checking if value was empty on row:"+c)):h=!1;for(var i=1;i<e;i++)if(parsers[i].is(g,a,f))return parsers[i];return parsers[0]}function getNodeFromRowAndCellIndex(a,b,c){return a[b].cells[c]}function trimAndGetNodeText(a,b){return $.trim(getElementText(a,b))}function getParserById(a){for(var b=parsers.length,c=0;c<b;c++)if(parsers[c].id.toLowerCase()==a.toLowerCase())return parsers[c];return!1}function buildCache(a){if(a.config.debug)var b=new Date;for(var c=a.tBodies[0]&&a.tBodies[0].rows.length||0,d=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,e=a.config.parsers,f={row:[],normalized:[]},g=0;g<c;++g){var h=$(a.tBodies[0].rows[g]),i=[];if(h.hasClass(a.config.cssChildRow))f.row[f.row.length-1]=f.row[f.row.length-1].add(h);else{f.row.push(h);for(var j=0;j<d;++j)i.push(e[j].format(getElementText(a.config,h[0].cells[j]),a,h[0].cells[j]));i.push(f.normalized.length),f.normalized.push(i),i=null}}return a.config.debug&&benchmark("Building cache for "+c+" rows:",b),f}function getElementText(a,b){if(!b)return"";var c=$(b),d=c.attr("data-sort-value");if(void 0!==d)return d;var e="";return a.supportsTextContent||(a.supportsTextContent=b.textContent||!1),e="simple"==a.textExtraction?a.supportsTextContent?b.textContent:b.childNodes[0]&&b.childNodes[0].hasChildNodes()?b.childNodes[0].innerHTML:b.innerHTML:"function"==typeof a.textExtraction?a.textExtraction(b):$(b).text()}function appendToTable(a,b){if(a.config.debug)var c=new Date;for(var d=b,e=d.row,f=d.normalized,g=f.length,h=f[0].length-1,i=$(a.tBodies[0]),j=[],k=0;k<g;k++){var l=f[k][h];if(j.push(e[l]),!a.config.appender)for(var m=e[l].length,n=0;n<m;n++)i[0].appendChild(e[l][n])}a.config.appender&&a.config.appender(a,j),j=null,a.config.debug&&benchmark("Rebuilt table:",c),applyWidget(a),setTimeout(function(){$(a).trigger("sortEnd")},0)}function buildHeaders(a){if(a.config.debug)var b=new Date;var c=(!!$.metadata,computeTableHeaderCellIndexes(a)),d=$(a.config.selectorHeaders,a).each(function(b){if(this.column=c[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(a.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(a,b))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(a,b)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(a,b)),!this.sortDisabled){var d=$(this).addClass(a.config.cssHeader);a.config.onRenderHeader&&a.config.onRenderHeader.apply(d)}a.config.headerList[b]=this});return a.config.debug&&(benchmark("Built headers:",b),log(d)),d}function computeTableHeaderCellIndexes(a){for(var b=[],c={},d=a.getElementsByTagName("THEAD")[0],e=d.getElementsByTagName("TR"),f=0;f<e.length;f++)for(var g=e[f].cells,h=0;h<g.length;h++){var i,j=g[h],k=j.parentNode.rowIndex,l=k+"-"+j.cellIndex,m=j.rowSpan||1,n=j.colSpan||1;"undefined"==typeof b[k]&&(b[k]=[]);for(var o=0;o<b[k].length+1;o++)if("undefined"==typeof b[k][o]){i=o;break}c[l]=i;for(var o=k;o<k+m;o++){"undefined"==typeof b[o]&&(b[o]=[]);for(var p=b[o],q=i;q<i+n;q++)p[q]="x"}}return c}function checkCellColSpan(a,b,c){for(var d=[],e=a.tHead.rows,f=e[c].cells,g=0;g<f.length;g++){var h=f[g];h.colSpan>1?d=d.concat(checkCellColSpan(a,headerArr,c++)):(1==a.tHead.length||h.rowSpan>1||!e[c+1])&&d.push(h)}return d}function checkHeaderMetadata(a){return!(!$.metadata||$(a).metadata().sorter!==!1)}function checkHeaderOptions(a,b){return!(!a.config.headers[b]||a.config.headers[b].sorter!==!1)}function checkHeaderOptionsSortingLocked(a,b){return!(!a.config.headers[b]||!a.config.headers[b].lockedOrder)&&a.config.headers[b].lockedOrder}function applyWidget(a){for(var b=a.config.widgets,c=b.length,d=0;d<c;d++)getWidgetById(b[d]).format(a)}function getWidgetById(a){for(var b=widgets.length,c=0;c<b;c++)if(widgets[c].id.toLowerCase()==a.toLowerCase())return widgets[c]}function formatSortingOrder(a){return"Number"!=typeof a?"desc"==a.toLowerCase()?1:0:1==a?1:0}function isValueInArray(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d][0]==a)return!0;return!1}function setHeadersCss(a,b,c,d){b.removeClass(d[0]).removeClass(d[1]);var e=[];b.each(function(a){this.sortDisabled||(e[this.column]=$(this))});for(var f=c.length,g=0;g<f;g++)e[c[g][0]].addClass(d[c[g][1]])}function fixColumnWidth(a,b){var c=a.config;if(c.widthFixed){var d=$("<colgroup>");$("tr:first td",a.tBodies[0]).each(function(){d.append($("<col>").css("width",$(this).width()))}),$(a).prepend(d)}}function updateHeaderSortCount(a,b){for(var c=a.config,d=b.length,e=0;e<d;e++){var f=b[e],g=c.headerList[f[0]];g.count=f[1],g.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(a,b,c){var d="a["+c+"]",e="b["+c+"]";return"text"==a&&"asc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+e+") ? -1 : 1 )));":"text"==a&&"desc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+d+") ? -1 : 1 )));":"numeric"==a&&"asc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+e+"));":"numeric"==a&&"desc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+d+"));":void 0}function makeSortText(a){return"((a["+a+"] < b["+a+"]) ? -1 : ((a["+a+"] > b["+a+"]) ? 1 : 0));"}function makeSortTextDesc(a){return"((b["+a+"] < a["+a+"]) ? -1 : ((b["+a+"] > a["+a+"]) ? 1 : 0));"}function makeSortNumeric(a){return"a["+a+"]-b["+a+"];"}function makeSortNumericDesc(a){return"b["+a+"]-a["+a+"];"}function sortText(a,b){return table.config.sortLocaleCompare?a.localeCompare(b):a<b?-1:a>b?1:0}function sortTextDesc(a,b){return table.config.sortLocaleCompare?b.localeCompare(a):b<a?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(a,b){return a[b].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark;var sortWrapper;this.construct=function(a){return this.each(function(){if(this.tHead&&this.tBodies){var b,c,d,e;this.config={},e=$.extend(this.config,$.tablesorter.defaults,a),b=$(this),$.data(this,"tablesorter",e),c=buildHeaders(this),this.config.parsers=buildParserCache(this,c),d=buildCache(this);var f=[e.cssDesc,e.cssAsc];fixColumnWidth(this),c.click(function(a){var g=b[0].tBodies[0]&&b[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&g>0){b.trigger("sortStart");var h=($(this),this.column);if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),a[e.sortMultiSortKey])if(isValueInArray(h,e.sortList))for(var i=0;i<e.sortList.length;i++){var j=e.sortList[i],k=e.headerList[j[0]];j[0]==h&&(k.count=j[1],k.count++,j[1]=k.count%2)}else e.sortList.push([h,this.order]);else{if(e.sortList=[],null!=e.sortForce)for(var l=e.sortForce,i=0;i<l.length;i++)l[i][0]!=h&&e.sortList.push(l[i]);e.sortList.push([h,this.order])}return setTimeout(function(){setHeadersCss(b[0],c,e.sortList,f),appendToTable(b[0],multisort(b[0],e.sortList,d))},1),!1}}).mousedown(function(){if(e.cancelSelection)return this.onselectstart=function(){return!1},!1}),b.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=buildParserCache(a,c),d=buildCache(a)},1)}).bind("updateCell",function(a,b){var c=this.config,e=[b.parentNode.rowIndex-1,b.cellIndex];d.normalized[e[0]][e[1]]=c.parsers[e[1]].format(getElementText(c,b),b)}).bind("sorton",function(a,b){$(this).trigger("sortStart"),e.sortList=b;var g=e.sortList;updateHeaderSortCount(this,g),setHeadersCss(this,c,g,f),appendToTable(this,multisort(this,g,d))}).bind("appendCache",function(){appendToTable(this,d)}).bind("applyWidgetId",function(a,b){getWidgetById(b).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(e.sortList=$(this).metadata().sortlist),e.sortList.length>0&&b.trigger("sorton",[e.sortList]),applyWidget(this)}})},this.addParser=function(a){for(var b=parsers.length,c=!0,d=0;d<b;d++)parsers[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&parsers.push(a)},this.addWidget=function(a){widgets.push(a)},this.formatFloat=function(a){var b=parseFloat(a);return isNaN(b)?0:b},this.formatInt=function(a){var b=parseInt(a);return isNaN(b)?0:b},this.isDigit=function(a,b){return/^[-+]?\d*$/.test($.trim(a.replace(/[,.']/g,"")))},this.clearTableBody=function(a){if($.browser.msie)for(;a.tBodies[0].firstChild;)a.tBodies[0].removeChild(a.tBodies[0].firstChild);else a.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(a){return!0},format:function(a){return $.trim(a.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(a,b){var c=b.config;return $.tablesorter.isDigit(a,c)},format:function(a){return $.tablesorter.formatFloat(a)},type:"numeric"}),ts.addParser({id:"currency",is:function(a){return/^[£$€?.]/.test(a)},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){for(var b=a.split("."),c="",d=b.length,e=0;e<d;e++){var f=b[e];c+=2==f.length?"0"+f:f}return $.tablesorter.formatFloat(c)},type:"numeric"}),ts.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return $.tablesorter.formatFloat(""!=a?new Date(a.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(a){return/\%$/.test($.trim(a))},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return $.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,b){var c=b.config;return a=a.replace(/\-/g,"/"),"us"==c.dateFormat&&(a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")),"pt"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"uk"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"dd/mm/yy"!=c.dateFormat&&"dd-mm-yy"!=c.dateFormat||(a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return $.tablesorter.formatFloat(new Date("2000/01/01 "+a).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(a){return!1},format:function(a,b,c){var d=b.config,e=d.parserMetadataName?d.parserMetadataName:"sortValue";return $(c).metadata()[e]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(a){if(a.config.debug)var b=new Date;var c,d,e=-1;$("tr:visible",a.tBodies[0]).each(function(b){c=$(this),c.hasClass(a.config.cssChildRow)||e++,d=e%2==0,c.removeClass(a.config.widgetZebra.css[d?0:1]).addClass(a.config.widgetZebra.css[d?1:0])}),a.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",b)}})}(jQuery);var CalendarController=function(){var a=function(a,c){b(a,c)},b=function(a,b){CalendarFullChartBuilder.build(a,b)};return{init:a}}(),optionsBuild,CalendarFullChartBuilder=function(){var a=function(a){var b,c="[";for(console.log(a),b=new Date(a[0].due),c=c+'{"title": "'+a[0].name.replace(/\"/g,"'")+'","start": "'+b+'","description": "'+a[0].boardName.replace(/\"/g,"'").split(" |")[0]+'"}',i=1;i<a.length;i++)b=new Date(a[i].due),c=c+',{"title": "'+a[i].name.replace(/\"/g,"'")+'","start": "'+b+'","description": "'+a[i].boardName.replace(/\"/g,"'").split(" |")[0]+'"}';c+="]",optionsBuild=c,$("#calendar-container").fullCalendar({events:jQuery.parseJSON(c),firstDay:1,lang:"es",eventRender:function(a,b){$(b).popover({html:!0,title:"<b>"+a.description+"</b>",content:a.title,trigger:"hover",container:"body",placement:"auto",delay:{show:100,hide:100}})}}),$("#calendar-container").height("100%"),$(".analysis-block-md").height("100%")},b=function(b,c){var d=$("#calendar-container");d.height(d.height()-10),$.ajax({url:"/api/v1/calendarFull/"+b,data:{token:c},success:function(b){$("#calendar-spinner").hide(),optionsBuild=b,a(jQuery.parseJSON(b))},error:function(a){$("#calendar-spinner").hide(),d.text(a.responseText)}})};return{build:b,optionsBuild:optionsBuild}}();$.extend($.validator.messages,{required:"Este campo es obligatorio.",remote:"Por favor, rellena este campo.",email:"Por favor, escribe una dirección de correo válida.",url:"Por favor, escribe una URL válida.",date:"Por favor, escribe una fecha válida.",dateISO:"Por favor, escribe una fecha (ISO) válida.",number:"Por favor, escribe un número válido.",digits:"Por favor, escribe sólo dígitos.",creditcard:"Por favor, escribe un número de tarjeta válido.",equalTo:"Por favor, escribe el mismo valor de nuevo.",extension:"Por favor, escribe un valor con una extensión aceptada.",maxlength:$.validator.format("Por favor, no escribas más de {0} caracteres."),minlength:$.validator.format("Por favor, no escribas menos de {0} caracteres."),rangelength:$.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),range:$.validator.format("Por favor, escribe un valor entre {0} y {1}."),max:$.validator.format("Por favor, escribe un valor menor o igual a {0}."),min:$.validator.format("Por favor, escribe un valor mayor o igual a {0}."),nifES:"Por favor, escribe un NIF válido.",nieES:"Por favor, escribe un NIE válido.",cifES:"Por favor, escribe un CIF válido."});var FlashMessage=function(){function a(a){c("alert-danger",a)}function b(a){c("alert-success",a)}function c(a,b){$("#flash").remove(),$("#mainContent").prepend("<div id='flash' class='row alert "+a+"''><div class='container'>"+b+"</div></div>")}return{error:a,success:b}}();!function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;b=function(){function a(){}return function(b){return a.prototype=b,new a}}(),k=function(a){var b,c,d,e,f,g,h;for(c=0,d=a.length,b=void 0,e=!1,g=!1;!e&&c!==d;)b=a[c]=a[c].trimLeft(),b&&(e=!0),c++;for(c=d-1;d&&!g&&c!==-1;)b=a[c]=a[c].trimRight(),b&&(g=!0),c--;for(f=/\s+$/g,h=!0,c=0;c!==d;)"\u2028"!=a[c]&&(b=a[c].replace(/\s+/g," "),h&&(b=b.trimLeft()),b&&(h=f.test(b)),a[c]=b),c++;return a},l=function(a,b,c,d){return this.pdf=a,this.x=b,this.y=c,this.settings=d,this.watchFunctions=[],this.init(),this},m=function(a){var b,c,e;for(b=void 0,e=a.split(","),c=e.shift();!b&&c;)b=d[c.trim().toLowerCase()],c=e.shift();return b},n=function(a){a="auto"===a?"0px":a,a.indexOf("em")>-1&&!isNaN(Number(a.replace("em","")))&&(a=18.719*Number(a.replace("em",""))+"px"),a.indexOf("pt")>-1&&!isNaN(Number(a.replace("pt","")))&&(a=1.333*Number(a.replace("pt",""))+"px");var b,c,d;return c=void 0,b=16,(d=o[a])?d:(d={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:a}],d!==c?o[a]=d/b:(d=parseFloat(a))?o[a]=d/b:(d=a.match(/([\d\.]+)(px)/),3===d.length?o[a]=parseFloat(d[1])/b:o[a]=1))},j=function(a){var b,c,d;return d=function(a){var b;return b=function(a){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style}(a),function(a){return a=a.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()}),b[a]}}(a),b={},c=void 0,b["font-family"]=m(d("font-family"))||"times",b["font-style"]=e[d("font-style")]||"normal",b["text-align"]=f[d("text-align")]||"left",c=g[d("font-weight")]||"normal","bold"===c&&("normal"===b["font-style"]?b["font-style"]=c:b["font-style"]=c+b["font-style"]),b["font-size"]=n(d("font-size"))||1,b["line-height"]=n(d("line-height"))||1,b.display="inline"===d("display")?"inline":"block",c="block"===b.display,b["margin-top"]=c&&n(d("margin-top"))||0,b["margin-bottom"]=c&&n(d("margin-bottom"))||0,b["padding-top"]=c&&n(d("padding-top"))||0,b["padding-bottom"]=c&&n(d("padding-bottom"))||0,b["margin-left"]=c&&n(d("margin-left"))||0,b["margin-right"]=c&&n(d("margin-right"))||0,b["padding-left"]=c&&n(d("padding-left"))||0,b["padding-right"]=c&&n(d("padding-right"))||0,b["page-break-before"]=d("page-break-before")||"auto",b["float"]=h[d("cssFloat")]||"none",b.clear=i[d("clear")]||"none",b.color=d("color"),b},p=function(a,b,c){var d,e,f,g,h;if(f=!1,e=void 0,g=void 0,h=void 0,d=c["#"+a.id])if("function"==typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&e!==g;)f=d[e](a,b),e++;if(d=c[a.nodeName],!f&&d)if("function"==typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&e!==g;)f=d[e](a,b),e++;return f},u=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=[],d=[],e=0,l=a.rows[0].cells.length,j=a.clientWidth;e<l;)k=a.rows[0].cells[e],d[e]={name:k.textContent.toLowerCase().replace(/\s+/g,""),prompt:k.textContent.replace(/\r?\n/g,""),width:k.clientWidth/j*b.pdf.internal.pageSize.width},e++;for(e=1;e<a.rows.length;){for(h=a.rows[e],g={},f=0;f<h.cells.length;)g[d[f].name]=h.cells[f].textContent.replace(/\r?\n/g,""),f++;c.push(g),e++}return i={rows:c,headers:d}};var v={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},w=1;c=function(a,d,e){var f,g,h,i,k,l,m,n,o;for(g=a.childNodes,f=void 0,h=j(a),k="block"===h.display,k&&(d.setBlockBoundary(),d.setBlockStyle(h)),m=19.049976/25.4,i=0,l=g.length;i<l;){if(f=g[i],"object"==typeof f){if(d.executeWatchFunctions(f),1===f.nodeType&&"HEADER"===f.nodeName){var r=f,s=d.pdf.margins_doc.top;d.pdf.internal.events.subscribe("addPage",function(a){d.y=s,c(r,d,e),d.pdf.margins_doc.top=d.y+10,d.y+=10},!1)}if(8===f.nodeType&&"#comment"===f.nodeName)~f.textContent.indexOf("ADD_PAGE")&&(d.pdf.addPage(),d.y=d.pdf.margins_doc.top);else if(1!==f.nodeType||v[f.nodeName])if(3===f.nodeType){var t=f.nodeValue;if(f.nodeValue&&"LI"===f.parentNode.nodeName)if("OL"===f.parentNode.parentNode.nodeName)t=w++ +". "+t;else{var x=h["font-size"],y=(3-.75*x)*d.pdf.internal.scaleFactor,z=.75*x*d.pdf.internal.scaleFactor,A=1.74*x/d.pdf.internal.scaleFactor;o=function(a,b){this.pdf.circle(a+y,b+z,A,"FD")}}16&f.ownerDocument.body.compareDocumentPosition(f)&&d.addText(t,h)}else"string"==typeof f&&d.addText(f,h);else{var B;if("IMG"===f.nodeName){var C=f.getAttribute("src");B=q[d.pdf.sHashCode(C)||C]}if(B){d.pdf.internal.pageSize.height-d.pdf.margins_doc.bottom<d.y+f.height&&d.y>d.pdf.margins_doc.top&&(d.pdf.addPage(),d.y=d.pdf.margins_doc.top,d.executeWatchFunctions(f));var D=j(f),E=d.x,F=12/d.pdf.internal.scaleFactor,G=(D["margin-left"]+D["padding-left"])*F,H=(D["margin-right"]+D["padding-right"])*F,I=(D["margin-top"]+D["padding-top"])*F,J=(D["margin-bottom"]+D["padding-bottom"])*F;E+=void 0!==D["float"]&&"right"===D["float"]?d.settings.width-f.width-H:G,d.pdf.addImage(B,E,d.y+I,f.width,f.height),B=void 0,"right"===D["float"]||"left"===D["float"]?(d.watchFunctions.push(function(a,b,c,e){return d.y>=b?(d.x+=a,d.settings.width+=c,!0):!!(e&&1===e.nodeType&&!v[e.nodeName]&&d.x+e.width>d.pdf.margins_doc.left+d.pdf.margins_doc.width)&&(d.x+=a,d.y=b,d.settings.width+=c,!0)}.bind(this,"left"===D["float"]?-f.width-G-H:0,d.y+f.height+I+J,f.width)),d.watchFunctions.push(function(a,b,c){return!(d.y<a&&b===d.pdf.internal.getNumberOfPages())||1===c.nodeType&&"both"===j(c).clear&&(d.y=a,!0)}.bind(this,d.y+f.height,d.pdf.internal.getNumberOfPages())),d.settings.width-=f.width+G+H,"left"===D["float"]&&(d.x+=f.width+G+H)):d.y+=f.height+I+J}else if("TABLE"===f.nodeName)n=u(f,d),d.y+=10,d.pdf.table(d.x,d.y,n.rows,n.headers,{autoSize:!1,printHeaders:e.printHeaders,margins:d.pdf.margins_doc,css:j(f)}),d.y=d.pdf.lastCellPos.y+d.pdf.lastCellPos.h+20;else if("OL"===f.nodeName||"UL"===f.nodeName)w=1,p(f,d,e)||c(f,d,e),d.y+=10;else if("LI"===f.nodeName){var K=d.x;d.x+=20/d.pdf.internal.scaleFactor,d.y+=3,p(f,d,e)||c(f,d,e),d.x=K}else"BR"===f.nodeName?(d.y+=h["font-size"]*d.pdf.internal.scaleFactor,d.addText("\u2028",b(h))):p(f,d,e)||c(f,d,e)}}i++}if(e.outY=d.y,k)return d.setBlockBoundary(o)},q={},r=function(a,b,c,d){function e(){b.pdf.internal.events.publish("imagesLoaded"),d(g)}function f(a,c,d){if(a){var f=new Image;g=++j,f.crossOrigin="",f.onerror=f.onload=function(){if(f.complete&&(0===f.src.indexOf("data:image/")&&(f.width=c||f.width||0,f.height=d||f.height||0),f.width+f.height)){var g=b.pdf.sHashCode(a)||a;q[g]=q[g]||f}--j||e()},f.src=a}}for(var g,h=a.getElementsByTagName("img"),i=h.length,j=0;i--;)f(h[i].getAttribute("src"),h[i].width,h[i].height);return j||e()},s=function(a,b,d){var e=a.getElementsByTagName("footer");if(e.length>0){e=e[0];var f=b.pdf.internal.write,g=b.y;b.pdf.internal.write=function(){},c(e,b,d);var h=Math.ceil(b.y-g)+5;b.y=g,b.pdf.internal.write=f,b.pdf.margins_doc.bottom+=h;for(var i=function(a){var f=void 0!==a?a.pageNumber:1,g=b.y;b.y=b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom,b.pdf.margins_doc.bottom-=h;for(var i=e.getElementsByTagName("span"),j=0;j<i.length;++j)(" "+i[j].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(i[j].innerHTML=f),(" "+i[j].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(i[j].innerHTML="###jsPDFVarTotalPages###");c(e,b,d),b.pdf.margins_doc.bottom+=h,b.y=g},j=e.getElementsByTagName("span"),k=0;k<j.length;++k)(" "+j[k].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&b.pdf.internal.events.subscribe("htmlRenderingFinished",b.pdf.putTotalPages.bind(b.pdf,"###jsPDFVarTotalPages###"),!0);b.pdf.internal.events.subscribe("addPage",i,!1),i(),v.FOOTER=1}},t=function(a,b,d,e,f,g){if(!b)return!1;"string"==typeof b||b.parentNode||(b=""+b.innerHTML),"string"==typeof b&&(b=function(a){var b,c,d,e;return d="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),e="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",c=document.createElement("div"),c.style.cssText=e,c.innerHTML='<iframe style="height:1px;width:1px" name="'+d+'" />',document.body.appendChild(c),b=window.frames[d],b.document.open(),b.document.writeln(a),b.document.close(),b.document.body}(b.replace(/<\/?script[^>]*?>/gi,"")));var h,i=new l(a,d,e,f);return r.call(this,b,i,f.elementHandlers,function(a){s(b,i,f.elementHandlers),c(b,i,f.elementHandlers),i.pdf.internal.events.publish("htmlRenderingFinished"),h=i.dispose(),"function"==typeof g?g(h):a&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),h||{x:i.x,y:i.y}},l.prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},l.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},l.prototype.executeWatchFunctions=function(a){var b=!1,c=[];if(this.watchFunctions.length>0){for(var d=0;d<this.watchFunctions.length;++d)this.watchFunctions[d](a)===!0?b=!0:c.push(this.watchFunctions[d]);this.watchFunctions=c}return b},l.prototype.splitFragmentsIntoLines=function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(e=12,n=this.pdf.internal.scaleFactor,h={},f=void 0,m=void 0,g=void 0,i=void 0,r=void 0,l=void 0,k=void 0,j=void 0,o=[],p=[o],d=0,q=this.settings.width;a.length;)if(i=a.shift(),r=c.shift(),i)if(f=r["font-family"],m=r["font-style"],g=h[f+m],g||(g=this.pdf.internal.getFont(f,m).metadata.Unicode,h[f+m]=g),l={widths:g.widths,kerning:g.kerning,fontSize:r["font-size"]*e,textIndent:d},k=this.pdf.getStringUnitWidth(i,l)*l.fontSize/n,"\u2028"==i)o=[],p.push(o);else if(d+k>q){for(j=this.pdf.splitTextToSize(i,q,l),o.push([j.shift(),r]);j.length;)o=[[j.shift(),r]],p.push(o);d=this.pdf.getStringUnitWidth(o[0][0],l)*l.fontSize/n}else o.push([i,r]),d+=k;if(void 0!==r["text-align"]&&("center"===r["text-align"]||"right"===r["text-align"]||"justify"===r["text-align"]))for(var s=0;s<p.length;++s){var t=this.pdf.getStringUnitWidth(p[s][0][0],l)*l.fontSize/n;s>0&&(p[s][0][1]=b(p[s][0][1]));var u=q-t;if("right"===r["text-align"])p[s][0][1]["margin-left"]=u;else if("center"===r["text-align"])p[s][0][1]["margin-left"]=u/2;else if("justify"===r["text-align"]){var v=p[s][0][0].split(" ").length-1;p[s][0][1]["word-spacing"]=u/v,s===p.length-1&&(p[s][0][1]["word-spacing"]=0)}}return p},l.prototype.RenderTextFragment=function(a,b){var c,d,e;e=0,c=12,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),b.color,"Td"),e=Math.max(e,b["line-height"],b["font-size"]),this.pdf.internal.write(0,(-1*c*e).toFixed(2),"Td")),d=this.pdf.internal.getFont(b["font-family"],b["font-style"]);var f=this.getPdfColor(b.color);f!==this.lastTextColor&&(this.pdf.internal.write(f),this.lastTextColor=f),void 0!==b["word-spacing"]&&b["word-spacing"]>0&&this.pdf.internal.write(b["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+d.id,(c*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj"),void 0!==b["word-spacing"]&&this.pdf.internal.write(0,"Tw")},l.prototype.getPdfColor=function(a){var b,c,d,e,f=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/,g=f.exec(a);if(null!=g?(c=parseInt(g[1]),d=parseInt(g[2]),e=parseInt(g[3])):("#"!=a.charAt(0)&&(a=CssColors.colorNameToHex(a),a||(a="#000000")),c=a.substring(1,3),c=parseInt(c,16),d=a.substring(3,5),d=parseInt(d,16),e=a.substring(5,7),e=parseInt(e,16)),"string"==typeof c&&/^#[0-9A-Fa-f]{6}$/.test(c)){var h=parseInt(c.substr(1),16);c=h>>16&255,d=h>>8&255,e=255&h}var i=this.f3;return b=0===c&&0===d&&0===e||"undefined"==typeof d?i(c/255)+" g":[i(c/255),i(d/255),i(e/255),"rg"].join(" ")},l.prototype.f3=function(a){return a.toFixed(3)},l.prototype.renderParagraph=function(a){var b,c,d,e,f,g,h,i,j,l,m,n,o,p,q;if(e=k(this.paragraph.text),p=this.paragraph.style,b=this.paragraph.blockstyle,o=this.paragraph.priorblockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:b},e.join("").trim()){i=this.splitFragmentsIntoLines(e,p),h=void 0,j=void 0,c=12,d=c/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,n=(Math.max((b["margin-top"]||0)-this.priorMarginBottom,0)+(b["padding-top"]||0))*d,m=((b["margin-bottom"]||0)+(b["padding-bottom"]||0))*d,this.priorMarginBottom=b["margin-bottom"]||0,"always"===b["page-break-before"]&&(this.pdf.addPage(),this.y=0,n=((b["margin-top"]||0)+(b["padding-top"]||0))*d),l=this.pdf.internal.write,f=void 0,g=void 0,this.y+=n,l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var r=0;i.length;){for(h=i.shift(),j=0,f=0,g=h.length;f!==g;)h[f][0].trim()&&(j=Math.max(j,h[f][1]["line-height"],h[f][1]["font-size"]),q=7*h[f][1]["font-size"]),f++;var s=0,t=0;void 0!==h[0][1]["margin-left"]&&h[0][1]["margin-left"]>0&&(t=this.pdf.internal.getCoordinateString(h[0][1]["margin-left"]),s=t-r,r=t);var u=Math.max(b["margin-left"]||0,0)*d;for(l(s+u,(-1*c*j).toFixed(2),"Td"),f=0,g=h.length;f!==g;)h[f][0]&&this.RenderTextFragment(h[f][0],h[f][1]),f++;if(this.y+=j*d,this.executeWatchFunctions(h[0][1])&&i.length>0){var v=[],w=[];i.forEach(function(a){for(var b=0,c=a.length;b!==c;)a[b][0]&&(v.push(a[b][0]+" "),w.push(a[b][1])),++b}),i=this.splitFragmentsIntoLines(k(v),w),l("ET","Q"),l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return a&&"function"==typeof a&&a.call(this,this.x-9,this.y-q/2),l("ET","Q"),this.y+=m}},l.prototype.setBlockBoundary=function(a){return this.renderParagraph(a)},l.prototype.setBlockStyle=function(a){return this.paragraph.blockstyle=a},l.prototype.addText=function(a,b){return this.paragraph.text.push(a),this.paragraph.style.push(b)},d={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},g={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},e={normal:"normal",italic:"italic",oblique:"italic"},f={left:"left",right:"right",center:"center",justify:"justify"},h={none:"none",right:"right",left:"left"},i={none:"none",both:"both"},o={normal:1},a.fromHTML=function(a,b,c,d,e,f){"use strict";return this.margins_doc=f||{top:0,bottom:0},d||(d={}),d.elementHandlers||(d.elementHandlers={}),t(this,a,isNaN(b)?4:b,isNaN(c)?4:c,d,e)}}(jsPDF.API),function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function c(a){return W(a,Ya)}function d(b){var c,d={views:b.views||{}};return a.each(b,function(b,e){"views"!=b&&(a.isPlainObject(e)&&!/(time|duration|interval)$/i.test(b)&&a.inArray(b,Ya)==-1?(c=null,a.each(e,function(a,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(a)?(d.views[a]||(d.views[a]={}),d.views[a][b]=e):(c||(c={}),c[a]=e)}),c&&(d[b]=c)):d[b]=e)}),d}function e(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function f(a){a.css({"margin-left":"","margin-right":"","border-left-width":"",
"border-right-width":""})}function g(){a("body").addClass("fc-not-allowed")}function h(){a("body").removeClass("fc-not-allowed")}function i(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],k=0;j(b),b.each(function(c,d){var j=c===b.length-1?f:e,l=a(d).outerHeight(!0);l<j?(g.push(d),h.push(l),i.push(a(d).height())):k+=l}),d&&(c-=k,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);j<d&&a(c).height(l)})}function j(a){a.height("")}function k(b){var c=0;return b.find("> span").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function l(a,b){var c,d=a.add(b);return d.css({position:"relative",left:-1}),c=a.outerHeight()-b.outerHeight(),d.css({position:"",left:""}),c}function m(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function n(a,b){var c=a.offset(),d=c.left-(b?b.left:0),e=c.top-(b?b.top:0);return{left:d,right:d+a.outerWidth(),top:e,bottom:e+a.outerHeight()}}function o(a,b){var c=a.offset(),d=q(a),e=c.left+t(a,"border-left-width")+d.left-(b?b.left:0),f=c.top+t(a,"border-top-width")+d.top-(b?b.top:0);return{left:e,right:e+a[0].clientWidth,top:f,bottom:f+a[0].clientHeight}}function p(a,b){var c=a.offset(),d=c.left+t(a,"border-left-width")+t(a,"padding-left")-(b?b.left:0),e=c.top+t(a,"border-top-width")+t(a,"padding-top")-(b?b.top:0);return{left:d,right:d+a.width(),top:e,bottom:e+a.height()}}function q(a){var b=a.innerWidth()-a[0].clientWidth,c={left:0,right:0,top:0,bottom:a.innerHeight()-a[0].clientHeight};return r()&&"rtl"==a.css("direction")?c.left=b:c.right=b,c}function r(){return null===Za&&(Za=s()),Za}function s(){var b=a("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),c=b.children(),d=c.offset().left>b.offset().left;return b.remove(),d}function t(a,b){return parseFloat(a.css(b))||0}function u(a){return 1==a.which&&!a.ctrlKey}function v(a){if(void 0!==a.pageX)return a.pageX;var b=a.originalEvent.touches;return b?b[0].pageX:void 0}function w(a){if(void 0!==a.pageY)return a.pageY;var b=a.originalEvent.touches;return b?b[0].pageY:void 0}function x(a){return/^touch/.test(a.type)}function y(a){a.addClass("fc-unselectable").on("selectstart",z)}function z(a){a.preventDefault()}function A(a){return!!window.addEventListener&&(window.addEventListener("scroll",a,!0),!0)}function B(a){return!!window.removeEventListener&&(window.removeEventListener("scroll",a,!0),!0)}function C(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom&&c}function D(a,b){return{left:Math.min(Math.max(a.left,b.left),b.right),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function E(a){return{left:(a.left+a.right)/2,top:(a.top+a.bottom)/2}}function F(a,b){return{left:a.left-b.left,top:a.top-b.top}}function G(b){var c,d,e=[],f=[];for("string"==typeof b?f=b.split(/\s*,\s*/):"function"==typeof b?f=[b]:a.isArray(b)&&(f=b),c=0;c<f.length;c++)d=f[c],"string"==typeof d?e.push("-"==d.charAt(0)?{field:d.substring(1),order:-1}:{field:d,order:1}):"function"==typeof d&&e.push({func:d});return e}function H(a,b,c){var d,e;for(d=0;d<c.length;d++)if(e=I(a,b,c[d]))return e;return 0}function I(a,b,c){return c.func?c.func(a,b):J(a[c.field],b[c.field])*(c.order||1)}function J(b,c){return b||c?null==c?-1:null==b?1:"string"===a.type(b)||"string"===a.type(c)?String(b).localeCompare(String(c)):b-c:0}function K(a,b){var c,d,e,f,g=a.start,h=a.end,i=b.start,j=b.end;if(h>i&&g<j)return g>=i?(c=g.clone(),e=!0):(c=i.clone(),e=!1),h<=j?(d=h.clone(),f=!0):(d=j.clone(),f=!1),{start:c,end:d,isStart:e,isEnd:f}}function L(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function M(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days")})}function N(a,c,d){return b.duration(Math.round(a.diff(c,d,!0)),d)}function O(a,b){var c,d,e;for(c=0;c<_a.length&&(d=_a[c],e=P(d,a,b),!(e>=1&&ha(e)));c++);return d}function P(a,c,d){return null!=d?d.diff(c,a,!0):b.isDuration(c)?c.as(a):c.end.diff(c.start,a,!0)}function Q(a,b,c){var d;return T(c)?(b-a)/c:(d=c.asMonths(),Math.abs(d)>=1&&ha(d)?b.diff(a,"months",!0)/d:b.diff(a,"days",!0)/c.asDays())}function R(a,b){var c,d;return T(a)||T(b)?a/b:(c=a.asMonths(),d=b.asMonths(),Math.abs(c)>=1&&ha(c)&&Math.abs(d)>=1&&ha(d)?c/d:a.asDays()/b.asDays())}function S(a,c){var d;return T(a)?b.duration(a*c):(d=a.asMonths(),Math.abs(d)>=1&&ha(d)?b.duration({months:d*c}):b.duration({days:a.asDays()*c}))}function T(a){return Boolean(a.hours()||a.minutes()||a.seconds()||a.milliseconds())}function U(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function V(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function W(a,b){var c,d,e,f,g,h,i={};if(b)for(c=0;c<b.length;c++){for(d=b[c],e=[],f=a.length-1;f>=0;f--)if(g=a[f][d],"object"==typeof g)e.unshift(g);else if(void 0!==g){i[d]=g;break}e.length&&(i[d]=W(e))}for(c=a.length-1;c>=0;c--){h=a[c];for(d in h)d in i||(i[d]=h[d])}return i}function X(a){var b=function(){};return b.prototype=a,new b}function Y(a,b){for(var c in a)$(a,c)&&(b[c]=a[c])}function Z(a,b){var c,d,e=["constructor","toString","valueOf"];for(c=0;c<e.length;c++)d=e[c],a[d]!==Object.prototype[d]&&(b[d]=a[d])}function $(a,b){return db.call(a,b)}function _(b){return/undefined|null|boolean|number|string/.test(a.type(b))}function aa(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function ba(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function ca(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function da(a){return a.replace(/&.*?;/g,"")}function ea(b){var c=[];return a.each(b,function(a,b){null!=b&&c.push(a+":"+b)}),c.join(";")}function fa(a){return a.charAt(0).toUpperCase()+a.slice(1)}function ga(a,b){return a-b}function ha(a){return a%1===0}function ia(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function ja(a,b,c){var d,e,f,g,h,i=function(){var j=+new Date-g;j<b?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=+new Date;var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}}function ka(b,c){return b&&b.then&&"resolved"!==b.state()?c?b.then(c):void 0:a.when(c())}function la(c,d,e){var f,g,h,i,j=c[0],k=1==c.length&&"string"==typeof j;return b.isMoment(j)?(i=b.apply(null,c),na(j,i)):U(j)||void 0===j?i=b.apply(null,c):(f=!1,g=!1,k?eb.test(j)?(j+="-01",c=[j],f=!0,g=!0):(h=fb.exec(j))&&(f=!h[5],g=!0):a.isArray(j)&&(g=!0),i=d||f?b.utc.apply(b,c):b.apply(null,c),f?(i._ambigTime=!0,i._ambigZone=!0):e&&(g?i._ambigZone=!0:k&&(i.utcOffset?i.utcOffset(j):i.zone(j)))),i._fullCalendar=!0,i}function ma(a,c){var d,e,f=!1,g=!1,h=a.length,i=[];for(d=0;d<h;d++)e=a[d],b.isMoment(e)||(e=Wa.moment.parseZone(e)),f=f||e._ambigTime,g=g||e._ambigZone,i.push(e);for(d=0;d<h;d++)e=i[d],c||!f||e._ambigTime?g&&!e._ambigZone&&(i[d]=e.clone().stripZone()):i[d]=e.clone().stripTime();return i}function na(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function oa(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function pa(a,b){return hb.format.call(a,b)}function qa(a,b){return ra(a,wa(b))}function ra(a,b){var c,d="";for(c=0;c<b.length;c++)d+=sa(a,b[c]);return d}function sa(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?ib[c]?ib[c](a):pa(a,c):b.maybe&&(d=ra(a,b.maybe),d.match(/[1-9]/))?d:""}function ta(a,b,c,d,e){var f;return a=Wa.moment.parseZone(a),b=Wa.moment.parseZone(b),f=(a.localeData||a.lang).call(a),c=f.longDateFormat(c)||c,d=d||" - ",ua(a,b,wa(c),d,e)}function ua(a,b,c,d,e){var f,g,h,i,j=a.clone().stripZone(),k=b.clone().stripZone(),l="",m="",n="",o="",p="";for(g=0;g<c.length&&(f=va(a,b,j,k,c[g]),f!==!1);g++)l+=f;for(h=c.length-1;h>g&&(f=va(a,b,j,k,c[h]),f!==!1);h--)m=f+m;for(i=g;i<=h;i++)n+=sa(a,c[i]),o+=sa(b,c[i]);return(n||o)&&(p=e?o+d+n:n+d+o),l+p+m}function va(a,b,c,d,e){var f,g;return"string"==typeof e?e:!!((f=e.token)&&(g=jb[f.charAt(0)],g&&c.isSame(d,g)))&&pa(a,f)}function wa(a){return a in kb?kb[a]:kb[a]=xa(a)}function xa(a){for(var b,c=[],d=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;b=d.exec(a);)b[1]?c.push(b[1]):b[2]?c.push({maybe:xa(b[2])}):b[3]?c.push({token:b[3]}):b[5]&&c.push(b[5]);return c}function ya(){}function za(a,b){var c;return $(b,"constructor")&&(c=b.constructor),"function"!=typeof c&&(c=b.constructor=function(){a.apply(this,arguments)}),c.prototype=X(a.prototype),Y(b,c.prototype),Z(b,c.prototype),Y(a,c),c}function Aa(a,b){Y(b,a.prototype)}function Ba(a,b){return!a&&!b||!(!a||!b)&&(a.component===b.component&&Ca(a,b)&&Ca(b,a))}function Ca(a,b){for(var c in a)if(!/^(component|left|right|top|bottom)$/.test(c)&&a[c]!==b[c])return!1;return!0}function Da(a){var b=Fa(a);return"background"===b||"inverse-background"===b}function Ea(a){return"inverse-background"===Fa(a)}function Fa(a){return ba((a.source||{}).rendering,a.rendering)}function Ga(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],(d[c._id]||(d[c._id]=[])).push(c);return d}function Ha(a,b){return a.start-b.start}function Ia(c){var d,e,f,g,h=Wa.dataAttrPrefix;return h&&(h+="-"),d=c.data(h+"event")||null,d&&(d="object"==typeof d?a.extend({},d):{},e=d.start,null==e&&(e=d.time),f=d.duration,g=d.stick,delete d.start,delete d.time,delete d.duration,delete d.stick),null==e&&(e=c.data(h+"start")),null==e&&(e=c.data(h+"time")),null==f&&(f=c.data(h+"duration")),null==g&&(g=c.data(h+"stick")),e=null!=e?b.duration(e):null,f=null!=f?b.duration(f):null,g=Boolean(g),{eventProps:d,startTime:e,duration:f,stick:g}}function Ja(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function Ka(a,b){return a.leftCol-b.leftCol}function La(a){var b,c,d,e=[];for(b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&Oa(c,e[d]).length;d++);c.level=d,(e[d]||(e[d]=[])).push(c)}return e}function Ma(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)Oa(e,a[f],e.forwardSegs)}function Na(a){var b,c,d=a.forwardSegs,e=0;if(void 0===a.forwardPressure){for(b=0;b<d.length;b++)c=d[b],Na(c),e=Math.max(e,1+c.forwardPressure);a.forwardPressure=e}}function Oa(a,b,c){c=c||[];for(var d=0;d<b.length;d++)Pa(a,b[d])&&c.push(b[d]);return c}function Pa(a,b){return a.bottom>b.top&&a.top<b.bottom}function Qa(c,d){function e(){T?h()&&(k(),i()):f()}function f(){U=O.theme?"ui":"fc",c.addClass("fc"),O.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr"),O.theme?c.addClass("ui-widget"):c.addClass("fc-unthemed"),T=a("<div class='fc-view-container'/>").prependTo(c),R=N.header=new Ta(N,O),S=R.render(),S&&c.prepend(S),i(O.defaultView),O.handleWindowResize&&(Y=ja(m,O.windowResizeDelay),a(window).resize(Y))}function g(){V&&V.removeElement(),R.removeElement(),T.remove(),c.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),Y&&a(window).unbind("resize",Y)}function h(){return c.is(":visible")}function i(b){da++,V&&b&&V.type!==b&&(R.deactivateButton(V.type),H(),V.removeElement(),V=N.view=null),!V&&b&&(V=N.view=ca[b]||(ca[b]=N.instantiateView(b)),V.setElement(a("<div class='fc-view fc-"+b+"-view' />").appendTo(T)),R.activateButton(b)),V&&(Z=V.massageCurrentDate(Z),V.displaying&&Z.isWithin(V.intervalStart,V.intervalEnd)||h()&&(V.display(Z),I(),u(),v(),q())),I(),da--}function j(a){if(h())return a&&l(),da++,V.updateSize(!0),da--,!0}function k(){h()&&l()}function l(){W="number"==typeof O.contentHeight?O.contentHeight:"number"==typeof O.height?O.height-(S?S.outerHeight(!0):0):Math.round(T.width()/Math.max(O.aspectRatio,.5))}function m(a){!da&&a.target===window&&V.start&&j(!0)&&V.trigger("windowResize",ba)}function n(){r()}function o(a){aa(N.getEventSourcesByMatchArray(a))}function p(){h()&&(H(),V.displayEvents(ea),I())}function q(){!O.lazyFetching||$(V.start,V.end)?r():p()}function r(){_(V.start,V.end)}function s(a){ea=a,p()}function t(){p()}function u(){R.updateTitle(V.title)}function v(){var a=N.getNow();a.isWithin(V.intervalStart,V.intervalEnd)?R.disableButton("today"):R.enableButton("today")}function w(a,b){V.select(N.buildSelectSpan.apply(N,arguments))}function x(){V&&V.unselect()}function y(){Z=V.computePrevDate(Z),i()}function z(){Z=V.computeNextDate(Z),i()}function A(){Z.add(-1,"years"),i()}function B(){Z.add(1,"years"),i()}function C(){Z=N.getNow(),i()}function D(a){Z=N.moment(a).stripZone(),i()}function E(a){Z.add(b.duration(a)),i()}function F(a,b){var c;b=b||"day",c=N.getViewSpec(b)||N.getUnitViewSpec(b),Z=a.clone(),i(c?c.type:null)}function G(){return N.applyTimezone(Z)}function H(){T.css({width:"100%",height:T.height(),overflow:"hidden"})}function I(){T.css({width:"",height:"",overflow:""})}function J(){return N}function K(){return V}function L(a,b){return void 0===b?O[a]:void("height"!=a&&"contentHeight"!=a&&"aspectRatio"!=a||(O[a]=b,j(!0)))}function M(a,b){var c=Array.prototype.slice.call(arguments,2);if(b=b||ba,this.triggerWith(a,b,c),O[a])return O[a].apply(b,c)}var N=this;N.initOptions(d||{});var O=this.options;N.render=e,N.destroy=g,N.refetchEvents=n,N.refetchEventSources=o,N.reportEvents=s,N.reportEventChange=t,N.rerenderEvents=p,N.changeView=i,N.select=w,N.unselect=x,N.prev=y,N.next=z,N.prevYear=A,N.nextYear=B,N.today=C,N.gotoDate=D,N.incrementDate=E,N.zoomTo=F,N.getDate=G,N.getCalendar=J,N.getView=K,N.option=L,N.trigger=M;var P=X(Sa(O.lang));if(O.monthNames&&(P._months=O.monthNames),O.monthNamesShort&&(P._monthsShort=O.monthNamesShort),O.dayNames&&(P._weekdays=O.dayNames),O.dayNamesShort&&(P._weekdaysShort=O.dayNamesShort),null!=O.firstDay){var Q=X(P._week);Q.dow=O.firstDay,P._week=Q}P._fullCalendar_weekCalc=function(a){return"function"==typeof a?a:"local"===a?a:"iso"===a||"ISO"===a?"ISO":void 0}(O.weekNumberCalculation),N.defaultAllDayEventDuration=b.duration(O.defaultAllDayEventDuration),N.defaultTimedEventDuration=b.duration(O.defaultTimedEventDuration),N.moment=function(){var a;return"local"===O.timezone?(a=Wa.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===O.timezone?Wa.moment.utc.apply(null,arguments):Wa.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=P:a._lang=P,a},N.getIsAmbigTimezone=function(){return"local"!==O.timezone&&"UTC"!==O.timezone},N.applyTimezone=function(a){if(!a.hasTime())return a.clone();var b,c=N.moment(a.toArray()),d=a.time()-c.time();return d&&(b=c.clone().add(d),a.time()-b.time()===0&&(c=b)),c},N.getNow=function(){var a=O.now;return"function"==typeof a&&(a=a()),N.moment(a).stripZone()},N.getEventEnd=function(a){return a.end?a.end.clone():N.getDefaultEventEnd(a.allDay,a.start)},N.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(N.defaultAllDayEventDuration):c.add(N.defaultTimedEventDuration),N.getIsAmbigTimezone()&&c.stripZone(),c},N.humanizeDuration=function(a){return(a.locale||a.lang).call(a,O.lang).humanize()},Ua.call(N,O);var R,S,T,U,V,W,Y,Z,$=N.isFetchNeeded,_=N.fetchEvents,aa=N.fetchEventSources,ba=c[0],ca={},da=0,ea=[];Z=null!=O.defaultDate?N.moment(O.defaultDate).stripZone():N.getNow(),N.getSuggestedViewHeight=function(){return void 0===W&&k(),W},N.isHeightAuto=function(){return"auto"===O.contentHeight||"auto"===O.height},N.freezeContentHeight=H,N.unfreezeContentHeight=I,N.initialize()}function Ra(b){a.each(Db,function(a,c){null==b[a]&&(b[a]=c(b))})}function Sa(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function Ta(b,c){function d(){var b=c.header;if(n=c.theme?"ui":"fc",b)return o=a("<div class='fc-toolbar'/>").append(f("left")).append(f("right")).append(f("center")).append('<div class="fc-clear"/>')}function e(){o.remove(),o=a()}function f(d){var e=a('<div class="fc-'+d+'"/>'),f=c.header[d];return f&&a.each(f.split(" "),function(d){var f,g=a(),h=!0;a.each(this.split(","),function(d,e){var f,i,j,k,l,m,o,q,r,s;"title"==e?(g=g.add(a("<h2>&nbsp;</h2>")),h=!1):((f=(b.options.customButtons||{})[e])?(j=function(a){f.click&&f.click.call(s[0],a)},k="",l=f.text):(i=b.getViewSpec(e))?(j=function(){b.changeView(e)},p.push(e),k=i.buttonTextOverride,l=i.buttonTextDefault):b[e]&&(j=function(){b[e]()},k=(b.overrides.buttonText||{})[e],l=c.buttonText[e]),j&&(m=f?f.themeIcon:c.themeButtonIcons[e],o=f?f.icon:c.buttonIcons[e],q=k?ca(k):m&&c.theme?"<span class='ui-icon ui-icon-"+m+"'></span>":o&&!c.theme?"<span class='fc-icon fc-icon-"+o+"'></span>":ca(l),r=["fc-"+e+"-button",n+"-button",n+"-state-default"],s=a('<button type="button" class="'+r.join(" ")+'">'+q+"</button>").click(function(a){s.hasClass(n+"-state-disabled")||(j(a),(s.hasClass(n+"-state-active")||s.hasClass(n+"-state-disabled"))&&s.removeClass(n+"-state-hover"))}).mousedown(function(){s.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){s.removeClass(n+"-state-down")}).hover(function(){s.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){s.removeClass(n+"-state-hover").removeClass(n+"-state-down")}),g=g.add(s)))}),h&&g.first().addClass(n+"-corner-left").end().last().addClass(n+"-corner-right").end(),g.length>1?(f=a("<div/>"),h&&f.addClass("fc-button-group"),f.append(g),e.append(f)):e.append(g)}),e}function g(a){o.find("h2").text(a)}function h(a){o.find(".fc-"+a+"-button").addClass(n+"-state-active")}function i(a){o.find(".fc-"+a+"-button").removeClass(n+"-state-active")}function j(a){o.find(".fc-"+a+"-button").prop("disabled",!0).addClass(n+"-state-disabled")}function k(a){o.find(".fc-"+a+"-button").prop("disabled",!1).removeClass(n+"-state-disabled")}function l(){return p}var m=this;m.render=d,m.removeElement=e,m.updateTitle=g,m.activateButton=h,m.deactivateButton=i,m.disableButton=j,m.enableButton=k,m.getViewsWithButtons=l;var n,o=a(),p=[]}function Ua(c){function d(a,b){return!W||a<W||b>X}function e(a,b){W=a,X=b,f($,"reset")}function f(a,b){var c,d;for("reset"===b?da=[]:"add"!==b&&(da=v(da,a)),c=0;c<a.length;c++)d=a[c],"pending"!==d._status&&ca++,d._fetchId=(d._fetchId||0)+1,d._status="pending";for(c=0;c<a.length;c++)d=a[c],g(d,d._fetchId)}function g(b,c){j(b,function(d){var e,f,g,h=a.isArray(b.events);if(c===b._fetchId&&"rejected"!==b._status){if(b._status="resolved",d)for(e=0;e<d.length;e++)f=d[e],g=h?f:C(f,b),g&&da.push.apply(da,G(g));i()}})}function h(a){var b="pending"===a._status;a._status="rejected",b&&i()}function i(){ca--,ca||Y(da)}function j(b,d){var e,f,g=Wa.sourceFetchers;for(e=0;e<g.length;e++){if(f=g[e].call(U,b,W.clone(),X.clone(),c.timezone,d),f===!0)return;if("object"==typeof f)return void j(f,d)}var h=b.events;if(h)a.isFunction(h)?(U.pushLoading(),h.call(U,W.clone(),X.clone(),c.timezone,function(a){d(a),U.popLoading()})):a.isArray(h)?d(h):d();else{var i=b.url;if(i){var k,l=b.success,m=b.error,n=b.complete;k=a.isFunction(b.data)?b.data():b.data;var o=a.extend({},k||{}),p=ba(b.startParam,c.startParam),q=ba(b.endParam,c.endParam),r=ba(b.timezoneParam,c.timezoneParam);p&&(o[p]=W.format()),q&&(o[q]=X.format()),c.timezone&&"local"!=c.timezone&&(o[r]=c.timezone),U.pushLoading(),a.ajax(a.extend({},Eb,b,{data:o,success:function(b){b=b||[];var c=aa(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){aa(m,this,arguments),d()},complete:function(){aa(n,this,arguments),U.popLoading()}}))}else d()}}function k(a){var b=l(a);b&&($.push(b),f([b],"add"))}function l(b){var c,d,e=Wa.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?c={events:b}:"string"==typeof b?c={url:b}:"object"==typeof b&&(c=a.extend({},b)),c){for(c.className?"string"==typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[],a.isArray(c.events)&&(c.origArray=c.events,c.events=a.map(c.events,function(a){return C(a,c)})),d=0;d<e.length;d++)e[d].call(U,c);return c}}function m(a){o(s(a))}function n(a){null==a?o($,!0):o(r(a))}function o(b,c){var d;for(d=0;d<b.length;d++)h(b[d]);c?($=[],da=[]):($=a.grep($,function(a){for(d=0;d<b.length;d++)if(a===b[d])return!1;return!0}),da=v(da,b)),Y(da)}function p(){return $.slice(1)}function q(b){return a.grep($,function(a){return a.id&&a.id===b})[0]}function r(b){b?a.isArray(b)||(b=[b]):b=[];var c,d=[];for(c=0;c<b.length;c++)d.push.apply(d,s(b[c]));return d}function s(b){var c,d;for(c=0;c<$.length;c++)if(d=$[c],d===b)return[d];return d=q(b),d?[d]:a.grep($,function(a){return t(b,a)})}function t(a,b){return a&&b&&u(a)==u(b)}function u(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function v(b,c){return a.grep(b,function(a){for(var b=0;b<c.length;b++)if(a.source===c[b])return!1;return!0})}function w(a){a.start=U.moment(a.start),a.end?a.end=U.moment(a.end):a.end=null,H(a,x(a)),Y(da)}function x(b){var c={};return a.each(b,function(a,b){y(a)&&void 0!==b&&_(b)&&(c[a]=b)}),c}function y(a){return!/^_|^(id|allDay|start|end)$/.test(a)}function z(a,b){var c,d,e,f=C(a);if(f){for(c=G(f),d=0;d<c.length;d++)e=c[d],e.source||(b&&(Z.events.push(e),e.source=Z),da.push(e));return Y(da),c}return[]}function A(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),da=a.grep(da,b,!0),d=0;d<$.length;d++)a.isArray($[d].events)&&($[d].events=a.grep($[d].events,b,!0));Y(da)}function B(b){return a.isFunction(b)?a.grep(da,b):null!=b?(b+="",a.grep(da,function(a){return a._id==b})):da}function C(d,e){var f,g,h,i={};if(c.eventDataTransform&&(d=c.eventDataTransform(d)),e&&e.eventDataTransform&&(d=e.eventDataTransform(d)),a.extend(i,d),e&&(i.source=e),i._id=d._id||(void 0===d.id?"_fc"+Fb++:d.id+""),d.className?"string"==typeof d.className?i.className=d.className.split(/\s+/):i.className=d.className:i.className=[],f=d.start||d.date,g=d.end,V(f)&&(f=b.duration(f)),V(g)&&(g=b.duration(g)),d.dow||b.isDuration(f)||b.isDuration(g))i.start=f?b.duration(f):null,i.end=g?b.duration(g):null,i._recurring=!0;else{if(f&&(f=U.moment(f),!f.isValid()))return!1;g&&(g=U.moment(g),g.isValid()||(g=null)),h=d.allDay,void 0===h&&(h=ba(e?e.allDayDefault:void 0,c.allDayDefault)),D(f,g,h,i)}return U.normalizeEvent(i),i}function D(a,b,c,d){d.start=a,d.end=b,d.allDay=c,E(d),Va(d)}function E(a){F(a),a.end&&!a.end.isAfter(a.start)&&(a.end=null),a.end||(c.forceEventDuration?a.end=U.getDefaultEventEnd(a.allDay,a.start):a.end=null)}function F(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime())),a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=U.applyTimezone(a.start.time(0))),a.end&&!a.end.hasTime()&&(a.end=U.applyTimezone(a.end.time(0))))}function G(b,c,d){var e,f,g,h,i,j,k,l,m,n=[];if(c=c||W,d=d||X,b)if(b._recurring){if(f=b.dow)for(e={},g=0;g<f.length;g++)e[f[g]]=!0;for(h=c.clone().stripTime();h.isBefore(d);)e&&!e[h.day()]||(i=b.start,j=b.end,k=h.clone(),l=null,i&&(k=k.time(i)),j&&(l=h.clone().time(j)),m=a.extend({},b),D(k,l,!i&&!j,m),n.push(m)),h.add(1,"days")}else n.push(b);return n}function H(b,c,d){function e(a,b){return d?N(a,b,d):c.allDay?M(a,b):L(a,b)}var f,g,h,i,j,k,l={};return c=c||{},c.start||(c.start=b.start.clone()),void 0===c.end&&(c.end=b.end?b.end.clone():null),null==c.allDay&&(c.allDay=b.allDay),E(c),f={start:b._start.clone(),end:b._end?b._end.clone():U.getDefaultEventEnd(b._allDay,b._start),allDay:c.allDay},E(f),g=null!==b._end&&null===c.end,h=e(c.start,f.start),c.end?(i=e(c.end,f.end),j=i.subtract(h)):j=null,a.each(c,function(a,b){y(a)&&void 0!==b&&(l[a]=b)}),k=I(B(b._id),g,c.allDay,h,j,l),{dateDelta:h,durationDelta:j,undo:k}}function I(b,c,d,e,f,g){var h=U.getIsAmbigTimezone(),i=[];return e&&!e.valueOf()&&(e=null),f&&!f.valueOf()&&(f=null),a.each(b,function(b,j){var k,l;k={start:j.start.clone(),end:j.end?j.end.clone():null,allDay:j.allDay},a.each(g,function(a){k[a]=j[a]}),l={start:j._start,end:j._end,allDay:d},E(l),c?l.end=null:f&&!l.end&&(l.end=U.getDefaultEventEnd(l.allDay,l.start)),e&&(l.start.add(e),l.end&&l.end.add(e)),f&&l.end.add(f),h&&!l.allDay&&(e||f)&&(l.start.stripZone(),l.end&&l.end.stripZone()),a.extend(j,g,l),Va(j),i.push(function(){a.extend(j,k),Va(j)})}),function(){for(var a=0;a<i.length;a++)i[a]()}}function J(b){var d,e=c.businessHours,f={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},g=U.getView();return e&&(d=a.extend({},f,"object"==typeof e?e:{})),d?(b&&(d.start=null,d.end=null),G(C(d),g.start,g.end)):[]}function K(a,b){var d=b.source||{},e=ba(b.constraint,d.constraint,c.eventConstraint),f=ba(b.overlap,d.overlap,c.eventOverlap);return Q(a,e,f,b)}function O(b,c,d){var e,f;return d&&(e=a.extend({},d,c),f=G(C(e))[0]),f?K(b,f):P(b)}function P(a){return Q(a,c.selectConstraint,c.selectOverlap)}function Q(a,b,c,d){var e,f,g,h,i,j;if(null!=b){for(e=R(b),f=!1,h=0;h<e.length;h++)if(S(e[h],a)){f=!0;break}if(!f)return!1}for(g=U.getPeerEvents(a,d),h=0;h<g.length;h++)if(i=g[h],T(i,a)){if(c===!1)return!1;if("function"==typeof c&&!c(i,d))return!1;if(d){if(j=ba(i.overlap,(i.source||{}).overlap),j===!1)return!1;if("function"==typeof j&&!j(d,i))return!1}}return!0}function R(a){return"businessHours"===a?J():"object"==typeof a?G(C(a)):B(a)}function S(a,b){var c=a.start.clone().stripZone(),d=U.getEventEnd(a).stripZone();return b.start>=c&&b.end<=d}function T(a,b){var c=a.start.clone().stripZone(),d=U.getEventEnd(a).stripZone();return b.start<d&&b.end>c}var U=this;U.isFetchNeeded=d,U.fetchEvents=e,U.fetchEventSources=f,U.getEventSources=p,U.getEventSourceById=q,U.getEventSourcesByMatchArray=r,U.getEventSourcesByMatch=s,U.addEventSource=k,U.removeEventSource=m,U.removeEventSources=n,U.updateEvent=w,U.renderEvent=z,U.removeEvents=A,U.clientEvents=B,U.mutateEvent=H,U.normalizeEventDates=E,U.normalizeEventTimes=F;var W,X,Y=U.reportEvents,Z={events:[]},$=[Z],ca=0,da=[];a.each((c.events?[c.events]:[]).concat(c.eventSources||[]),function(a,b){var c=l(b);c&&$.push(c)}),U.getBusinessHoursEvents=J,U.isEventSpanAllowed=K,U.isExternalSpanAllowed=O,U.isSelectionSpanAllowed=P,U.getEventCache=function(){return da}}function Va(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}var Wa=a.fullCalendar={version:"2.8.0",internalApiVersion:4},Xa=Wa.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var g,h=a(f),i=h.data("fullCalendar");"string"==typeof b?i&&a.isFunction(i[b])&&(g=i[b].apply(i,c),e||(d=g),"destroy"===b&&h.removeData("fullCalendar")):i||(i=new zb(h,b),h.data("fullCalendar",i),i.render())}),d};var Ya=["header","buttonText","buttonIcons","themeButtonIcons"];Wa.intersectRanges=K,Wa.applyAll=aa,Wa.debounce=ja,Wa.isInt=ha,Wa.htmlEscape=ca,Wa.cssToStr=ea,Wa.proxy=ia,Wa.capitaliseFirstLetter=fa,Wa.getOuterRect=n,Wa.getClientRect=o,Wa.getContentRect=p,Wa.getScrollbarWidths=q;var Za=null;Wa.preventDefault=z,Wa.intersectRects=C,Wa.parseFieldSpecs=G,Wa.compareByFieldSpecs=H,Wa.compareByFieldSpec=I,Wa.flexibleCompare=J,Wa.computeIntervalUnit=O,Wa.divideRangeByDuration=Q,Wa.divideDurationByDuration=R,Wa.multiplyDuration=S,Wa.durationHasTime=T;var $a=["sun","mon","tue","wed","thu","fri","sat"],_a=["year","month","week","day","hour","minute","second","millisecond"];Wa.log=function(){var a=window.console;if(a&&a.log)return a.log.apply(a,arguments)},Wa.warn=function(){var a=window.console;return a&&a.warn?a.warn.apply(a,arguments):Wa.log.apply(Wa,arguments)};var ab,bb,cb,db={}.hasOwnProperty,eb=/^\s*\d{4}-\d\d$/,fb=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,gb=b.fn,hb=a.extend({},gb);Wa.moment=function(){return la(arguments)},Wa.moment.utc=function(){var a=la(arguments,!0);return a.hasTime()&&a.utc(),a},Wa.moment.parseZone=function(){return la(arguments,!0,!0)},gb.clone=function(){var a=hb.clone.apply(this,arguments);return na(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},gb.week=gb.weeks=function(a){var b=(this._locale||this._lang)._fullCalendar_weekCalc;return null==a&&"function"==typeof b?b(this):"ISO"===b?hb.isoWeek.apply(this,arguments):hb.week.apply(this,arguments)},gb.time=function(a){if(!this._fullCalendar)return hb.time.apply(this,arguments);if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},gb.stripTime=function(){var a;return this._ambigTime||(a=this.toArray(),this.utc(),bb(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},gb.hasTime=function(){return!this._ambigTime},gb.stripZone=function(){var a,b;return this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),bb(this,a),this._ambigTime=b||!1,this._ambigZone=!0),this},gb.hasZone=function(){return!this._ambigZone},gb.local=function(){var a=this.toArray(),b=this._ambigZone;return hb.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,b&&cb(this,a),this},gb.utc=function(){return hb.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},a.each(["zone","utcOffset"],function(a,b){hb[b]&&(gb[b]=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),hb[b].apply(this,arguments)})}),gb.format=function(){return this._fullCalendar&&arguments[0]?qa(this,arguments[0]):this._ambigTime?pa(this,"YYYY-MM-DD"):this._ambigZone?pa(this,"YYYY-MM-DD[T]HH:mm:ss"):hb.format.apply(this,arguments)},gb.toISOString=function(){return this._ambigTime?pa(this,"YYYY-MM-DD"):this._ambigZone?pa(this,"YYYY-MM-DD[T]HH:mm:ss"):hb.toISOString.apply(this,arguments)},gb.isWithin=function(a,b){var c=ma([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},gb.isSame=function(a,b){var c;return this._fullCalendar?b?(c=ma([this,a],!0),hb.isSame.call(c[0],c[1],b)):(a=Wa.moment.parseZone(a),hb.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):hb.isSame.apply(this,arguments)},a.each(["isBefore","isAfter"],function(a,b){gb[b]=function(a,c){var d;return this._fullCalendar?(d=ma([this,a]),hb[b].call(d[0],d[1],c)):hb[b].apply(this,arguments)}}),ab="_d"in b()&&"updateOffset"in b,bb=ab?function(a,c){a._d.setTime(Date.UTC.apply(Date,c)),b.updateOffset(a,!1)}:oa,cb=ab?function(a,c){a._d.setTime(+new Date(c[0]||0,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0)),b.updateOffset(a,!1)}:oa;var ib={t:function(a){return pa(a,"a").charAt(0)},T:function(a){return pa(a,"A").charAt(0)}};Wa.formatRange=ta;var jb={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},kb={};Wa.Class=ya,ya.extend=function(){var a,b,c=arguments.length;for(a=0;a<c;a++)b=arguments[a],a<c-1&&Aa(this,b);return za(this,b||{})},ya.mixin=function(a){Aa(this,a)};var lb=Wa.EmitterMixin={on:function(b,c){var d=function(a,b){return c.apply(b.context||this,b.args||[])};return c.guid||(c.guid=a.guid++),d.guid=c.guid,a(this).on(b,d),this},off:function(b,c){return a(this).off(b,c),this},trigger:function(b){var c=Array.prototype.slice.call(arguments,1);return a(this).triggerHandler(b,{args:c}),this},triggerWith:function(b,c,d){return a(this).triggerHandler(b,{context:c,args:d}),this}},mb=Wa.ListenerMixin=function(){var b=0,c={listenerId:null,listenTo:function(b,c,d){if("object"==typeof c)for(var e in c)c.hasOwnProperty(e)&&this.listenTo(b,e,c[e]);else"string"==typeof c&&b.on(c+"."+this.getListenerNamespace(),a.proxy(d,this))},stopListeningTo:function(a,b){a.off((b||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){
return null==this.listenerId&&(this.listenerId=b++),"_listener"+this.listenerId}};return c}(),nb={isIgnoringMouse:!1,delayUnignoreMouse:null,initMouseIgnoring:function(a){this.delayUnignoreMouse=ja(ia(this,"unignoreMouse"),a||1e3)},tempIgnoreMouse:function(){this.isIgnoringMouse=!0,this.delayUnignoreMouse()},unignoreMouse:function(){this.isIgnoringMouse=!1}},ob=ya.extend(mb,{isHidden:!0,options:null,el:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&this.listenTo(a(document),"mousedown",this.documentMousedown)},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(a(document),"mousedown")},position:function(){var b,c,d,e,f,g=this.options,h=this.el.offsetParent().offset(),i=this.el.outerWidth(),j=this.el.outerHeight(),k=a(window),l=m(this.el);e=g.top||0,f=void 0!==g.left?g.left:void 0!==g.right?g.right-i:0,l.is(window)||l.is(document)?(l=k,b=0,c=0):(d=l.offset(),b=d.top,c=d.left),b+=k.scrollTop(),c+=k.scrollLeft(),g.viewportConstrain!==!1&&(e=Math.min(e,b+l.outerHeight()-j-this.margin),e=Math.max(e,b+this.margin),f=Math.min(f,c+l.outerWidth()-i-this.margin),f=Math.max(f,c+this.margin)),this.el.css({top:e-h.top,left:f-h.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),pb=Wa.CoordCache=ya.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(b){this.els=a(b.els),this.isHorizontal=b.isHorizontal,this.isVertical=b.isVertical,this.forcedOffsetParentEl=b.offsetParent?a(b.offsetParent):null},build:function(){var a=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=a.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var a=m(this.els.eq(0));if(!a.is(document))return o(a)},buildElHorizontals:function(){var b=[],c=[];this.els.each(function(d,e){var f=a(e),g=f.offset().left,h=f.outerWidth();b.push(g),c.push(g+h)}),this.lefts=b,this.rights=c},buildElVerticals:function(){var b=[],c=[];this.els.each(function(d,e){var f=a(e),g=f.offset().top,h=f.outerHeight();b.push(g),c.push(g+h)}),this.tops=b,this.bottoms=c},getHorizontalIndex:function(a){this.ensureBuilt();var b,c=this.boundingRect,d=this.lefts,e=this.rights,f=d.length;if(!c||a>=c.left&&a<c.right)for(b=0;b<f;b++)if(a>=d[b]&&a<e[b])return b},getVerticalIndex:function(a){this.ensureBuilt();var b,c=this.boundingRect,d=this.tops,e=this.bottoms,f=d.length;if(!c||a>=c.top&&a<c.bottom)for(b=0;b<f;b++)if(a>=d[b]&&a<e[b])return b},getLeftOffset:function(a){return this.ensureBuilt(),this.lefts[a]},getLeftPosition:function(a){return this.ensureBuilt(),this.lefts[a]-this.origin.left},getRightOffset:function(a){return this.ensureBuilt(),this.rights[a]},getRightPosition:function(a){return this.ensureBuilt(),this.rights[a]-this.origin.left},getWidth:function(a){return this.ensureBuilt(),this.rights[a]-this.lefts[a]},getTopOffset:function(a){return this.ensureBuilt(),this.tops[a]},getTopPosition:function(a){return this.ensureBuilt(),this.tops[a]-this.origin.top},getBottomOffset:function(a){return this.ensureBuilt(),this.bottoms[a]},getBottomPosition:function(a){return this.ensureBuilt(),this.bottoms[a]-this.origin.top},getHeight:function(a){return this.ensureBuilt(),this.bottoms[a]-this.tops[a]}}),qb=Wa.DragListener=ya.extend(mb,nb,{options:null,subjectEl:null,subjectHref:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,handleTouchScrollProxy:null,constructor:function(a){this.options=a||{},this.handleTouchScrollProxy=ia(this,"handleTouchScroll"),this.initMouseIgnoring(500)},startInteraction:function(b,c){var d=x(b);if("mousedown"===b.type){if(this.isIgnoringMouse)return;if(!u(b))return;b.preventDefault()}this.isInteracting||(c=c||{},this.delay=ba(c.delay,this.options.delay,0),this.minDistance=ba(c.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,this.isInteracting=!0,this.isTouch=d,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=v(b),this.originY=w(b),this.scrollEl=m(a(b.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(b),this.startDelay(b),this.minDistance||this.handleDistanceSurpassed(b))},handleInteractionStart:function(a){this.trigger("interactionStart",a)},endInteraction:function(a,b){this.isInteracting&&(this.endDrag(a),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(a,b),this.isTouch&&this.tempIgnoreMouse())},handleInteractionEnd:function(a,b){this.trigger("interactionEnd",a,b||!1)},bindHandlers:function(){var b=this,c=1;this.isTouch?(this.listenTo(a(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(a){c?c--:b.endInteraction(a,!0)}}),!A(this.handleTouchScrollProxy)&&this.scrollEl&&this.listenTo(this.scrollEl,"scroll",this.handleTouchScroll)):this.listenTo(a(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(a(document),{selectstart:z,contextmenu:z})},unbindHandlers:function(){this.stopListeningTo(a(document)),B(this.handleTouchScrollProxy),this.scrollEl&&this.stopListeningTo(this.scrollEl,"scroll")},startDrag:function(a,b){this.startInteraction(a,b),this.isDragging||(this.isDragging=!0,this.handleDragStart(a))},handleDragStart:function(a){this.trigger("dragStart",a),this.initHrefHack()},handleMove:function(a){var b,c=v(a)-this.originX,d=w(a)-this.originY,e=this.minDistance;this.isDistanceSurpassed||(b=c*c+d*d,b>=e*e&&this.handleDistanceSurpassed(a)),this.isDragging&&this.handleDrag(c,d,a)},handleDrag:function(a,b,c){this.trigger("drag",a,b,c),this.updateAutoScroll(c)},endDrag:function(a){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(a))},handleDragEnd:function(a){this.trigger("dragEnd",a),this.destroyHrefHack()},startDelay:function(a){var b=this;this.delay?this.delayTimeoutId=setTimeout(function(){b.handleDelayEnd(a)},this.delay):this.handleDelayEnd(a)},handleDelayEnd:function(a){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(a)},handleDistanceSurpassed:function(a){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(a)},handleTouchMove:function(a){this.isDragging&&a.preventDefault(),this.handleMove(a)},handleMouseMove:function(a){this.handleMove(a)},handleTouchScroll:function(a){this.isDragging||this.endInteraction(a,!0)},initHrefHack:function(){var a=this.subjectEl;(this.subjectHref=a?a.attr("href"):null)&&a.removeAttr("href")},destroyHrefHack:function(){var a=this.subjectEl,b=this.subjectHref;setTimeout(function(){b&&a.attr("href",b)},0)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+a]&&this["_"+a].apply(this,Array.prototype.slice.call(arguments,1))}});qb.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var a=this.scrollEl;this.isAutoScroll=this.options.scroll&&a&&!a.is(window)&&!a.is(document),this.isAutoScroll&&this.listenTo(a,"scroll",ja(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=n(this.scrollEl))},updateAutoScroll:function(a){var b,c,d,e,f=this.scrollSensitivity,g=this.scrollBounds,h=0,i=0;g&&(b=(f-(w(a)-g.top))/f,c=(f-(g.bottom-w(a)))/f,d=(f-(v(a)-g.left))/f,e=(f-(g.right-v(a)))/f,b>=0&&b<=1?h=b*this.scrollSpeed*-1:c>=0&&c<=1&&(h=c*this.scrollSpeed),d>=0&&d<=1?i=d*this.scrollSpeed*-1:e>=0&&e<=1&&(i=e*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(ia(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var rb=qb.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(a,b){qb.call(this,b),this.component=a},handleInteractionStart:function(a){var b,c,d,e=this.subjectEl;this.computeCoords(),a?(c={left:v(a),top:w(a)},d=c,e&&(b=n(e),d=D(d,b)),this.origHit=this.queryHit(d.left,d.top),e&&this.options.subjectCenter&&(this.origHit&&(b=C(this.origHit,b)||b),d=E(b)),this.coordAdjust=F(d,c)):(this.origHit=null,this.coordAdjust=null),qb.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},handleDragStart:function(a){var b;qb.prototype.handleDragStart.apply(this,arguments),b=this.queryHit(v(a),w(a)),b&&this.handleHitOver(b)},handleDrag:function(a,b,c){var d;qb.prototype.handleDrag.apply(this,arguments),d=this.queryHit(v(c),w(c)),Ba(d,this.hit)||(this.hit&&this.handleHitOut(),d&&this.handleHitOver(d))},handleDragEnd:function(){this.handleHitDone(),qb.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(a){var b=Ba(a,this.origHit);this.hit=a,this.trigger("hitOver",this.hit,b,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){qb.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},handleScrollEnd:function(){qb.prototype.handleScrollEnd.apply(this,arguments),this.computeCoords()},queryHit:function(a,b){return this.coordAdjust&&(a+=this.coordAdjust.left,b+=this.coordAdjust.top),this.component.queryHit(a,b)}}),sb=ya.extend(mb,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()},start:function(b){this.isFollowing||(this.isFollowing=!0,this.y0=w(b),this.x0=v(b),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),x(b)?this.listenTo(a(document),"touchmove",this.handleMove):this.listenTo(a(document),"mousemove",this.handleMove))},stop:function(b,c){function d(){this.isAnimating=!1,e.removeElement(),this.top0=this.left0=null,c&&c()}var e=this,f=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(a(document)),b&&f&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:f,complete:d})):d())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}),a.addClass("fc-unselectable"),a.appendTo(this.parentEl)),a},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(a){this.topDelta=w(a)-this.y0,this.leftDelta=v(a)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),tb=Wa.Grid=ya.extend(mb,nb,{view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(a){this.view=a,this.isRTL=a.opt("isRTL"),this.elsByFill={},this.dayDragListener=this.buildDayDragListener(),this.initMouseIgnoring()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){this.start=a.start.clone(),this.end=a.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var a,b,c=this.view;this.eventTimeFormat=c.opt("eventTimeFormat")||c.opt("timeFormat")||this.computeEventTimeFormat(),a=c.opt("displayEventTime"),null==a&&(a=this.computeDisplayEventTime()),b=c.opt("displayEventEnd"),null==b&&(b=this.computeDisplayEventEnd()),this.displayEventTime=a,this.displayEventEnd=b},spanToSegs:function(a){},diffDates:function(a,b){return this.largeUnit?N(a,b,this.largeUnit):L(a,b)},prepareHits:function(){},releaseHits:function(){},queryHit:function(a,b){},getHitSpan:function(a){},getHitEl:function(a){},setElement:function(a){this.el=a,y(a),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(b,c){var d=this;this.el.on(b,function(b){if(!a(b.target).is(".fc-event-container *, .fc-more")&&!a(b.target).closest(".fc-popover").length)return c.call(d,b)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(a(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(a(document))},dayMousedown:function(a){this.isIgnoringMouse||this.dayDragListener.startInteraction(a,{})},dayTouchStart:function(a){var b=this.view;(b.isSelected||b.selectedEvent)&&this.tempIgnoreMouse(),this.dayDragListener.startInteraction(a,{delay:this.view.opt("longPressDelay")})},buildDayDragListener:function(){var a,b,c=this,d=this.view,e=d.opt("selectable"),f=new rb(this,{scroll:d.opt("dragScroll"),interactionStart:function(){a=f.origHit},dragStart:function(){d.unselect()},hitOver:function(d,f,h){h&&(f||(a=null),e&&(b=c.computeSelection(c.getHitSpan(h),c.getHitSpan(d)),b?c.renderSelection(b):b===!1&&g()))},hitOut:function(){a=null,b=null,c.unrenderSelection(),h()},interactionEnd:function(e,f){f||(a&&!c.isIgnoringMouse&&d.triggerDayClick(c.getHitSpan(a),c.getHitEl(a),e),b&&d.reportSelection(b,e),h())}});return f},clearDragListeners:function(){this.dayDragListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);return this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?X(b.event):{};return c.start=a.start.clone(),c.end=a.end?a.end.clone():null,c.allDay=null,this.view.calendar.normalizeEventDates(c),c.className=(c.className||[]).concat("fc-helper"),b||(c.editable=!1),c},renderHelper:function(a,b){},unrenderHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(a,b){var c=this.computeSelectionSpan(a,b);return!(c&&!this.view.calendar.isSelectionSpanAllowed(c))&&c},computeSelectionSpan:function(a,b){var c=[a.start,a.end,b.start,b.end];return c.sort(ga),{start:c[0].clone(),end:c[3].clone()}},renderHighlight:function(a){this.renderFill("highlight",this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(a){},unrenderNowIndicator:function(){},renderFill:function(a,b){},unrenderFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var d,e=this,f=this[b+"SegEl"],g="",h=[];if(c.length){for(d=0;d<c.length;d++)g+=this.fillSegHtml(b,c[d]);a(g).each(function(b,d){var g=c[b],i=a(d);f&&(i=f.call(e,g,i)),i&&(i=a(i),i.is(e.fillSegTag)&&(g.el=i,h.push(g)))})}return h},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],e=c?c.call(this,b):[],f=ea(d?d.call(this,b):{});return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow(),d=["fc-"+$a[a.day()]];return 1==b.intervalDuration.as("months")&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future"),d}});tb.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var b,c=[],d=[];for(b=0;b<a.length;b++)(Da(a[b])?c:d).push(a[b]);this.segs=[].concat(this.renderBgEvents(c),this.renderFgEvents(d))},renderBgEvents:function(a){var b=this.eventsToSegs(a);return this.renderBgSegs(b)||b},renderFgEvents:function(a){var b=this.eventsToSegs(a);return this.renderFgSegs(b)||b},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},unrenderFgSegs:function(){},renderFgSegEls:function(b,c){var d,e=this.view,f="",g=[];if(b.length){for(d=0;d<b.length;d++)f+=this.fgSegHtml(b[d],c);a(f).each(function(c,d){var f=b[c],h=e.resolveEventEl(f.event,a(d));h&&(h.data("fc-seg",f),f.el=h,g.push(f))})}return g},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegCss:function(a){return{"background-color":this.getSegSkinCss(a)["background-color"]}},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){this.bindSegHandler("touchstart",this.handleSegTouchStart),this.bindSegHandler("touchend",this.handleSegTouchEnd),this.bindSegHandler("mouseenter",this.handleSegMouseover),this.bindSegHandler("mouseleave",this.handleSegMouseout),this.bindSegHandler("mousedown",this.handleSegMousedown),this.bindSegHandler("click",this.handleSegClick)},bindSegHandler:function(b,c){var d=this;this.el.on(b,".fc-event-container > *",function(b){var e=a(this).data("fc-seg");if(e&&!d.isDraggingSeg&&!d.isResizingSeg)return c.call(d,e,b)})},handleSegClick:function(a,b){return this.view.trigger("eventClick",a.el[0],a.event,b)},handleSegMouseover:function(a,b){this.isIgnoringMouse||this.mousedOverSeg||(this.mousedOverSeg=a,a.el.addClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseover",a.el[0],a.event,b))},handleSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,a.el.removeClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseout",a.el[0],a.event,b))},handleSegMousedown:function(a,b){var c=this.startSegResize(a,b,{distance:5});!c&&this.view.isEventDraggable(a.event)&&this.buildSegDragListener(a).startInteraction(b,{distance:5})},handleSegTouchStart:function(a,b){var c,d=this.view,e=a.event,f=d.isEventSelected(e),g=d.isEventDraggable(e),h=d.isEventResizable(e),i=!1;f&&h&&(i=this.startSegResize(a,b)),i||!g&&!h||(c=g?this.buildSegDragListener(a):this.buildSegSelectListener(a),c.startInteraction(b,{delay:f?0:this.view.opt("longPressDelay")})),this.tempIgnoreMouse()},handleSegTouchEnd:function(a,b){this.tempIgnoreMouse()},startSegResize:function(b,c,d){return!!a(c.target).is(".fc-resizer")&&(this.buildSegResizeListener(b,a(c.target).is(".fc-start-resizer")).startInteraction(c,d),!0)},buildSegDragListener:function(a){var b,c,d,e=this,f=this.view,i=f.calendar,j=a.el,k=a.event;if(this.segDragListener)return this.segDragListener;var l=this.segDragListener=new rb(f,{scroll:f.opt("dragScroll"),subjectEl:j,subjectCenter:!0,interactionStart:function(d){b=!1,c=new sb(a.el,{additionalClass:"fc-dragging",parentEl:f.el,opacity:l.isTouch?null:f.opt("dragOpacity"),revertDuration:f.opt("dragRevertDuration"),zIndex:2}),c.hide(),c.start(d)},dragStart:function(c){l.isTouch&&!f.isEventSelected(k)&&f.selectEvent(k),b=!0,e.handleSegMouseout(a,c),e.segDragStart(a,c),f.hideEvent(k)},hitOver:function(b,h,j){var m;a.hit&&(j=a.hit),d=e.computeEventDrop(j.component.getHitSpan(j),b.component.getHitSpan(b),k),d&&!i.isEventSpanAllowed(e.eventToSpan(d),k)&&(g(),d=null),d&&(m=f.renderDrag(d,a))?(m.addClass("fc-dragging"),l.isTouch||e.applyDragOpacity(m),c.hide()):c.show(),h&&(d=null)},hitOut:function(){f.unrenderDrag(),c.show(),d=null},hitDone:function(){h()},interactionEnd:function(g){c.stop(!d,function(){b&&(f.unrenderDrag(),f.showEvent(k),e.segDragStop(a,g)),d&&f.reportEventDrop(k,d,this.largeUnit,j,g)}),e.segDragListener=null}});return l},buildSegSelectListener:function(a){var b=this,c=this.view,d=a.event;if(this.segDragListener)return this.segDragListener;var e=this.segDragListener=new qb({dragStart:function(a){e.isTouch&&!c.isEventSelected(d)&&c.selectEvent(d)},interactionEnd:function(a){b.segDragListener=null}});return e},segDragStart:function(a,b){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",a.el[0],a.event,b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var d,e,f=this.view.calendar,g=a.start,h=b.start;return g.hasTime()===h.hasTime()?(d=this.diffDates(h,g),c.allDay&&T(d)?(e={start:c.start.clone(),end:f.getEventEnd(c),allDay:!1},f.normalizeEventTimes(e)):e={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay},e.start.add(d),e.end&&e.end.add(d)):e={start:h.clone(),end:null,allDay:!h.hasTime()},e},applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");null!=b&&a.each(function(a,c){c.style.opacity=b})},externalDragStart:function(b,c){var d,e,f=this.view;f.opt("droppable")&&(d=a((c?c.item:null)||b.target),e=f.opt("dropAccept"),(a.isFunction(e)?e.call(d[0],d):d.is(e))&&(this.isDraggingExternal||this.listenToExternalDrag(d,b,c)))},listenToExternalDrag:function(a,b,c){var d,e=this,f=this.view.calendar,i=Ia(a),j=e.externalDragListener=new rb(this,{interactionStart:function(){e.isDraggingExternal=!0},hitOver:function(a){d=e.computeExternalDrop(a.component.getHitSpan(a),i),d&&!f.isExternalSpanAllowed(e.eventToSpan(d),d,i.eventProps)&&(g(),d=null),d&&e.renderDrag(d)},hitOut:function(){d=null},hitDone:function(){h(),e.unrenderDrag()},interactionEnd:function(b){d&&e.view.reportExternalDrop(i,d,a,b,c),e.isDraggingExternal=!1,e.externalDragListener=null}});j.startDrag(b)},computeExternalDrop:function(a,b){var c=this.view.calendar,d={start:c.applyTimezone(a.start),end:null};return b.startTime&&!d.start.hasTime()&&d.start.time(b.startTime),b.duration&&(d.end=d.start.clone().add(b.duration)),d},renderDrag:function(a,b){},unrenderDrag:function(){},buildSegResizeListener:function(a,b){var c,d,e=this,f=this.view,i=f.calendar,j=a.el,k=a.event,l=i.getEventEnd(k),m=this.segResizeListener=new rb(this,{scroll:f.opt("dragScroll"),subjectEl:j,interactionStart:function(){c=!1},dragStart:function(b){c=!0,e.handleSegMouseout(a,b),e.segResizeStart(a,b)},hitOver:function(c,h,j){var m=e.getHitSpan(j),n=e.getHitSpan(c);d=b?e.computeEventStartResize(m,n,k):e.computeEventEndResize(m,n,k),d&&(i.isEventSpanAllowed(e.eventToSpan(d),k)?d.start.isSame(k.start)&&d.end.isSame(l)&&(d=null):(g(),d=null)),d&&(f.hideEvent(k),e.renderEventResize(d,a))},hitOut:function(){d=null},hitDone:function(){e.unrenderEventResize(),f.showEvent(k),h()},interactionEnd:function(b){c&&e.segResizeStop(a,b),d&&f.reportEventResize(k,d,this.largeUnit,j,b),e.segResizeListener=null}});return m},segResizeStart:function(a,b){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var e,f,g=this.view.calendar,h=this.diffDates(c[a],b[a]);return e={start:d.start.clone(),end:g.getEventEnd(d),allDay:d.allDay},e.allDay&&T(h)&&(e.allDay=!1,g.normalizeEventTimes(e)),e[a].add(h),e.start.isBefore(e.end)||(f=this.minResizeDuration||(d.allDay?g.defaultAllDayEventDuration:g.defaultTimedEventDuration),"start"==a?e.start=e.end.clone().subtract(f):e.end=e.start.clone().add(f)),e},renderEventResize:function(a,b){},unrenderEventResize:function(){},getEventTimeText:function(a,b,c){return null==b&&(b=this.eventTimeFormat),null==c&&(c=this.displayEventEnd),this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=this.view,e=a.event,f=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(e.className,e.source?e.source.className:[]);return b&&f.push("fc-draggable"),c&&f.push("fc-resizable"),d.isEventSelected(e)&&f.push("fc-selected"),f},getSegSkinCss:function(a){var b=a.event,c=this.view,d=b.source||{},e=b.color,f=d.color,g=c.opt("eventColor");return{"background-color":b.backgroundColor||e||d.backgroundColor||f||c.opt("eventBackgroundColor")||g,"border-color":b.borderColor||e||d.borderColor||f||c.opt("eventBorderColor")||g,color:b.textColor||d.textColor||c.opt("eventTextColor")}},eventToSegs:function(a){return this.eventsToSegs([a])},eventToSpan:function(a){return this.eventToSpans(a)[0]},eventToSpans:function(a){var b=this.eventToRange(a);return this.eventRangeToSpans(b,a)},eventsToSegs:function(b,c){var d=this,e=Ga(b),f=[];return a.each(e,function(a,b){var e,g=[];for(e=0;e<b.length;e++)g.push(d.eventToRange(b[e]));if(Ea(b[0]))for(g=d.invertRanges(g),e=0;e<g.length;e++)f.push.apply(f,d.eventRangeToSegs(g[e],b[0],c));else for(e=0;e<g.length;e++)f.push.apply(f,d.eventRangeToSegs(g[e],b[e],c))}),f},eventToRange:function(a){return{start:a.start.clone().stripZone(),end:(a.end?a.end.clone():this.view.calendar.getDefaultEventEnd(null!=a.allDay?a.allDay:!a.start.hasTime(),a.start)).stripZone()}},eventRangeToSegs:function(a,b,c){var d,e=this.eventRangeToSpans(a,b),f=[];for(d=0;d<e.length;d++)f.push.apply(f,this.eventSpanToSegs(e[d],b,c));return f},eventRangeToSpans:function(b,c){return[a.extend({},b)]},eventSpanToSegs:function(a,b,c){var d,e,f=c?c(a):this.spanToSegs(a);for(d=0;d<f.length;d++)e=f[d],e.event=b,e.eventStartMS=+a.start,e.eventDurationMS=a.end-a.start;return f},invertRanges:function(a){var b,c,d=this.view,e=d.start.clone(),f=d.end.clone(),g=[],h=e;for(a.sort(Ha),b=0;b<a.length;b++)c=a[b],c.start>h&&g.push({start:h,end:c.start}),h=c.end;return h<f&&g.push({start:h,end:f}),g},sortEventSegs:function(a){a.sort(ia(this,"compareEventSegs"))},compareEventSegs:function(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||H(a.event,b.event,this.view.eventOrderSpecs)}}),Wa.isBgEvent=Da,Wa.dataAttrPrefix="";var ub=Wa.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var a,b,c,d=this.view,e=this.start.clone(),f=-1,g=[],h=[];e.isBefore(this.end);)d.isHiddenDay(e)?g.push(f+.5):(f++,g.push(f),h.push(e.clone())),e.add(1,"days");if(this.breakOnWeeks){for(b=h[0].day(),a=1;a<h.length&&h[a].day()!=b;a++);c=Math.ceil(h.length/a)}else c=1,a=h.length;this.dayDates=h,this.dayIndices=g,this.daysPerRow=a,this.rowCnt=c,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(a,b){return this.dayDates[this.getCellDayIndex(a,b)].clone()},getCellRange:function(a,b){var c=this.getCellDate(a,b),d=c.clone().add(1,"days");return{start:c,end:d}},getCellDayIndex:function(a,b){return a*this.daysPerRow+this.getColDayIndex(b)},getColDayIndex:function(a){return this.isRTL?this.colCnt-1-a:a},getDateDayIndex:function(a){var b=this.dayIndices,c=a.diff(this.start,"days");return c<0?b[0]-1:c>=b.length?b[b.length-1]+1:b[c]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(a){var b,c,d,e,f,g=this.daysPerRow,h=this.view.computeDayRange(a),i=this.getDateDayIndex(h.start),j=this.getDateDayIndex(h.end.clone().subtract(1,"days")),k=[];for(b=0;b<this.rowCnt;b++)c=b*g,d=c+g-1,e=Math.max(i,c),f=Math.min(j,d),e=Math.ceil(e),f=Math.floor(f),e<=f&&k.push({row:b,firstRowDayIndex:e-c,lastRowDayIndex:f-c,isStart:e===i,isEnd:f===j});return k},sliceRangeByDay:function(a){var b,c,d,e,f,g,h=this.daysPerRow,i=this.view.computeDayRange(a),j=this.getDateDayIndex(i.start),k=this.getDateDayIndex(i.end.clone().subtract(1,"days")),l=[];for(b=0;b<this.rowCnt;b++)for(c=b*h,d=c+h-1,e=c;e<=d;e++)f=Math.max(j,e),g=Math.min(k,e),f=Math.ceil(f),g=Math.floor(g),f<=g&&l.push({row:b,firstRowDayIndex:f-c,lastRowDayIndex:g-c,isStart:f===j,isEnd:g===k});return l},renderHeadHtml:function(){var a=this.view;return'<div class="fc-row '+a.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var a,b,c=[];for(a=0;a<this.colCnt;a++)b=this.getCellDate(0,a),c.push(this.renderHeadDateCellHtml(b));return c.join("")},renderHeadDateCellHtml:function(a,b,c){var d=this.view;return'<th class="fc-day-header '+d.widgetHeaderClass+" fc-"+$a[a.day()]+'"'+(1==this.rowCnt?' data-date="'+a.format("YYYY-MM-DD")+'"':"")+(b>1?' colspan="'+b+'"':"")+(c?" "+c:"")+">"+ca(a.format(this.colHeadFormat))+"</th>";
},renderBgTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(a))+this.renderBgCellsHtml(a)+(this.isRTL?this.renderBgIntroHtml(a):"")+"</tr>"},renderBgIntroHtml:function(a){return this.renderIntroHtml()},renderBgCellsHtml:function(a){var b,c,d=[];for(b=0;b<this.colCnt;b++)c=this.getCellDate(a,b),d.push(this.renderBgCellHtml(c));return d.join("")},renderBgCellHtml:function(a,b){var c=this.view,d=this.getDayClasses(a);return d.unshift("fc-day",c.widgetContentClass),'<td class="'+d.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"'+(b?" "+b:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(a){var b=this.renderIntroHtml();b&&(this.isRTL?a.append(b):a.prepend(b))}},vb=Wa.DayGrid=tb.extend(ub,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(a){var b,c,d=this.view,e=this.rowCnt,f=this.colCnt,g="";for(b=0;b<e;b++)g+=this.renderDayRowHtml(b,a);for(this.el.html(g),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new pb({els:this.rowEls,isVertical:!0}),this.colCoordCache=new pb({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),b=0;b<e;b++)for(c=0;c<f;c++)d.trigger("dayRender",null,this.getCellDate(b,c),this.getCellEl(b,c))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(!0),b=this.eventsToSegs(a);this.renderFill("businessHours",b,"bgevent")},renderDayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(a)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(a))+this.renderNumberCellsHtml(a)+(this.isRTL?this.renderNumberIntroHtml(a):"")+"</tr>"},renderNumberIntroHtml:function(a){return this.renderIntroHtml()},renderNumberCellsHtml:function(a){var b,c,d=[];for(b=0;b<this.colCnt;b++)c=this.getCellDate(a,b),d.push(this.renderNumberCellHtml(c));return d.join("")},renderNumberCellHtml:function(a){var b;return this.view.dayNumbersVisible?(b=this.getDayClasses(a),b.unshift("fc-day-number"),'<td class="'+b.join(" ")+'" data-date="'+a.format()+'">'+a.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(a){var b,c,d=this.sliceRangeByRow(a);for(b=0;b<d.length;b++)c=d[b],this.isRTL?(c.leftCol=this.daysPerRow-1-c.lastRowDayIndex,c.rightCol=this.daysPerRow-1-c.firstRowDayIndex):(c.leftCol=c.firstRowDayIndex,c.rightCol=c.lastRowDayIndex);return d},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(a,b){var c=this.colCoordCache.getHorizontalIndex(a),d=this.rowCoordCache.getVerticalIndex(b);if(null!=d&&null!=c)return this.getCellHit(d,c)},getHitSpan:function(a){return this.getCellRange(a.row,a.col)},getHitEl:function(a){return this.getCellEl(a.row,a.col)},getCellHit:function(a,b){return{row:a,col:b,component:this,left:this.colCoordCache.getLeftOffset(b),right:this.colCoordCache.getRightOffset(b),top:this.rowCoordCache.getTopOffset(a),bottom:this.rowCoordCache.getBottomOffset(a)}},getCellEl:function(a,b){return this.cellEls.eq(a*this.colCnt+b)},renderDrag:function(a,b){if(this.renderHighlight(this.eventToSpan(a)),b&&!b.el.closest(this.el).length)return this.renderEventLocationHelper(a,b)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(a,b){return this.renderHighlight(this.eventToSpan(a)),this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(b,c){var d,e=[],f=this.eventToSegs(b);return f=this.renderFgSegEls(f),d=this.renderSegRows(f),this.rowEls.each(function(b,f){var g,h=a(f),i=a('<div class="fc-helper-skeleton"><table/></div>');g=c&&c.row===b?c.el.position().top:h.find(".fc-content-skeleton tbody").position().top,i.css("top",g).find("table").append(d[b].tbodyEl),h.append(i),e.push(i[0])}),this.helperEls=a(e)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c,d){var e,f,g,h=[];for(c=this.renderFillSegEls(b,c),e=0;e<c.length;e++)f=c[e],g=this.renderFillRow(b,f,d),this.rowEls.eq(f.row).append(g),h.push(g[0]);return this.elsByFill[b]=a(h),c},renderFillRow:function(b,c,d){var e,f,g=this.colCnt,h=c.leftCol,i=c.rightCol+1;return d=d||b.toLowerCase(),e=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),f=e.find("tr"),h>0&&f.append('<td colspan="'+h+'"/>'),f.append(c.el.attr("colspan",i-h)),i<g&&f.append('<td colspan="'+(g-i)+'"/>'),this.bookendCells(f),e}});vb.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),tb.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return tb.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return tb.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},unrenderFgSegs:function(){for(var a,b=this.rowStructs||[];a=b.pop();)a.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b,c,d=[];for(b=this.groupSegRows(a),c=0;c<b.length;c++)d.push(this.renderSegRow(c,b[c]));return d},fgSegHtml:function(a,b){var c,d,e=this.view,f=a.event,g=e.isEventDraggable(f),h=!b&&f.allDay&&a.isStart&&e.isEventResizableFromStart(f),i=!b&&f.allDay&&a.isEnd&&e.isEventResizableFromEnd(f),j=this.getSegClasses(a,g,h||i),k=ea(this.getSegSkinCss(a)),l="";return j.unshift("fc-day-grid-event","fc-h-event"),a.isStart&&(c=this.getEventTimeText(f),c&&(l='<span class="fc-time">'+ca(c)+"</span>")),d='<span class="fc-title">'+(ca(f.title||"")||"&nbsp;")+"</span>",'<a class="'+j.join(" ")+'"'+(f.url?' href="'+ca(f.url)+'"':"")+(k?' style="'+k+'"':"")+'><div class="fc-content">'+(this.isRTL?d+" "+l:l+" "+d)+"</div>"+(h?'<div class="fc-resizer fc-start-resizer" />':"")+(i?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(b,c){function d(b){for(;g<b;)k=(r[e-1]||[])[g],k?k.attr("rowspan",parseInt(k.attr("rowspan")||1,10)+1):(k=a("<td/>"),h.append(k)),q[e][g]=k,r[e][g]=k,g++}var e,f,g,h,i,j,k,l=this.colCnt,m=this.buildSegLevels(c),n=Math.max(1,m.length),o=a("<tbody/>"),p=[],q=[],r=[];for(e=0;e<n;e++){if(f=m[e],g=0,h=a("<tr/>"),p.push([]),q.push([]),r.push([]),f)for(i=0;i<f.length;i++){for(j=f[i],d(j.leftCol),k=a('<td class="fc-event-container"/>').append(j.el),j.leftCol!=j.rightCol?k.attr("colspan",j.rightCol-j.leftCol+1):r[e][g]=k;g<=j.rightCol;)q[e][g]=k,p[e][g]=j,g++;h.append(k)}d(l),this.bookendCells(h),o.append(h)}return{row:b,tbodyEl:o,cellMatrix:q,segMatrix:p,segLevels:m,segs:c}},buildSegLevels:function(a){var b,c,d,e=[];for(this.sortEventSegs(a),b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&Ja(c,e[d]);d++);c.level=d,(e[d]||(e[d]=[])).push(c)}for(d=0;d<e.length;d++)e[d].sort(Ka);return e},groupSegRows:function(a){var b,c=[];for(b=0;b<this.rowCnt;b++)c.push([]);for(b=0;b<a.length;b++)c[a[b].row].push(a[b]);return c}}),vb.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b,c,d=this.rowStructs||[];for(b=0;b<d.length;b++)this.unlimitRow(b),c=!!a&&("number"==typeof a?a:this.computeRowLevelLimit(b)),c!==!1&&this.limitRow(b,c)},computeRowLevelLimit:function(b){function c(b,c){f=Math.max(f,a(c).outerHeight())}var d,e,f,g=this.rowEls.eq(b),h=g.height(),i=this.rowStructs[b].tbodyEl.children();for(d=0;d<i.length;d++)if(e=i.eq(d).removeClass("fc-limited"),f=0,e.find("> td > :first-child").each(c),e.position().top+f>h)return d;return!1},limitRow:function(b,c){function d(d){for(;w<d;)j=t.getCellSegs(b,w,c),j.length&&(m=f[c-1][w],s=t.renderMoreLink(b,w,j),r=a("<div/>").append(s),m.append(r),v.push(r[0])),w++}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u=this.rowStructs[b],v=[],w=0;if(c&&c<u.segLevels.length){for(e=u.segLevels[c-1],f=u.cellMatrix,g=u.tbodyEl.children().slice(c).addClass("fc-limited").get(),h=0;h<e.length;h++){for(i=e[h],d(i.leftCol),l=[],k=0;w<=i.rightCol;)j=this.getCellSegs(b,w,c),l.push(j),k+=j.length,w++;if(k){for(m=f[c-1][i.leftCol],n=m.attr("rowspan")||1,o=[],p=0;p<l.length;p++)q=a('<td class="fc-more-cell"/>').attr("rowspan",n),j=l[p],s=this.renderMoreLink(b,i.leftCol+p,[i].concat(j)),r=a("<div/>").append(s),q.append(r),o.push(q[0]),v.push(q[0]);m.addClass("fc-limited").after(a(o)),g.push(m[0])}}d(this.colCnt),u.moreEls=a(v),u.limitedEls=a(g)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c,d){var e=this,f=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(g){var h=f.opt("eventLimitClick"),i=e.getCellDate(b,c),j=a(this),k=e.getCellEl(b,c),l=e.getCellSegs(b,c),m=e.resliceDaySegs(l,i),n=e.resliceDaySegs(d,i);"function"==typeof h&&(h=f.trigger("eventLimitClick",null,{date:i,dayEl:k,moreEl:j,segs:m,hiddenSegs:n},g)),"popover"===h?e.showSegPopover(b,c,j,m):"string"==typeof h&&f.calendar.zoomTo(i,h)})},showSegPopover:function(a,b,c,d){var e,f,g=this,h=this.view,i=c.parent();e=1==this.rowCnt?h.el:this.rowEls.eq(a),f={className:"fc-more-popover",content:this.renderSegPopoverContent(a,b,d),parentEl:this.el,top:e.offset().top,autoHide:!0,viewportConstrain:h.opt("popoverViewportConstrain"),hide:function(){g.segPopover.removeElement(),g.segPopover=null,g.popoverSegs=null}},this.isRTL?f.right=i.offset().left+i.outerWidth()+1:f.left=i.offset().left-1,this.segPopover=new ob(f),this.segPopover.show()},renderSegPopoverContent:function(b,c,d){var e,f=this.view,g=f.opt("theme"),h=this.getCellDate(b,c).format(f.opt("dayPopoverFormat")),i=a('<div class="fc-header '+f.widgetHeaderClass+'"><span class="fc-close '+(g?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+ca(h)+'</span><div class="fc-clear"/></div><div class="fc-body '+f.widgetContentClass+'"><div class="fc-event-container"></div></div>'),j=i.find(".fc-event-container");for(d=this.renderFgSegEls(d,!0),this.popoverSegs=d,e=0;e<d.length;e++)this.prepareHits(),d[e].hit=this.getCellHit(b,c),this.releaseHits(),j.append(d[e].el);return i},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone(),f=e.clone().add(1,"days"),g={start:e,end:f};return b=this.eventsToSegs(d,function(a){var b=K(a,g);return b?[b]:[]}),this.sortEventSegs(b),b},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"==typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b,c){for(var d,e=this.rowStructs[a].segMatrix,f=c||0,g=[];f<e.length;)d=e[f][b],d&&g.push(d),f++;return g}});var wb=Wa.TimeGrid=tb.extend(ub,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){tb.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new pb({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new pb({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var a,c,d,e=this.view,f=this.isRTL,g="",h=b.duration(+this.minTime);h<this.maxTime;)a=this.start.clone().time(h),c=ha(R(h,this.labelInterval)),d='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(c?"<span>"+ca(a.format(this.labelFormat))+"</span>":"")+"</td>",g+='<tr data-time="'+a.format("HH:mm:ss")+'"'+(c?"":' class="fc-minor"')+">"+(f?"":d)+'<td class="'+e.widgetContentClass+'"/>'+(f?d:"")+"</tr>",h.add(this.slotDuration);return g},processOptions:function(){var c,d=this.view,e=d.opt("slotDuration"),f=d.opt("snapDuration");e=b.duration(e),f=f?b.duration(f):e,this.slotDuration=e,this.snapDuration=f,this.snapsPerSlot=e/f,this.minResizeDuration=f,this.minTime=b.duration(d.opt("minTime")),this.maxTime=b.duration(d.opt("maxTime")),c=d.opt("slotLabelFormat"),a.isArray(c)&&(c=c[c.length-1]),this.labelFormat=c||d.opt("axisFormat")||d.opt("smallTimeFormat"),c=d.opt("slotLabelInterval"),this.labelInterval=c?b.duration(c):this.computeLabelInterval(e)},computeLabelInterval:function(a){var c,d,e;for(c=Nb.length-1;c>=0;c--)if(d=b.duration(Nb[c]),e=R(d,a),ha(e)&&e>1)return d;return b.duration(a)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(a,b){var c=this.snapsPerSlot,d=this.colCoordCache,e=this.slatCoordCache,f=d.getHorizontalIndex(a),g=e.getVerticalIndex(b);if(null!=f&&null!=g){var h=e.getTopOffset(g),i=e.getHeight(g),j=(b-h)/i,k=Math.floor(j*c),l=g*c+k,m=h+k/c*i,n=h+(k+1)/c*i;return{col:f,snap:l,component:this,left:d.getLeftOffset(f),right:d.getRightOffset(f),top:m,bottom:n}}},getHitSpan:function(a){var b,c=this.getCellDate(0,a.col),d=this.computeSnapTime(a.snap);return c.time(d),b=c.clone().add(this.snapDuration),{start:c,end:b}},getHitEl:function(a){return this.colEls.eq(a.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(a){return b.duration(this.minTime+this.snapDuration*a)},spanToSegs:function(a){var b,c=this.sliceRangeByTimes(a);for(b=0;b<c.length;b++)this.isRTL?c[b].col=this.daysPerRow-1-c[b].dayIndex:c[b].col=c[b].dayIndex;return c},sliceRangeByTimes:function(a){var b,c,d,e,f=[];for(c=0;c<this.daysPerRow;c++)d=this.dayDates[c].clone(),e={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)},b=K(a,e),b&&(b.dayIndex=c,f.push(b));return f},updateSize:function(a){this.slatCoordCache.build(),a&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a-c.clone().stripTime()))},computeTimeTop:function(a){var b,c,d=this.slatEls.length,e=(a-this.minTime)/this.slotDuration;return e=Math.max(0,e),e=Math.min(d,e),b=Math.floor(e),b=Math.min(b,d-1),c=e-b,this.slatCoordCache.getTopPosition(b)+this.slatCoordCache.getHeight(b)*c},renderDrag:function(a,b){return b?this.renderEventLocationHelper(a,b):void this.renderHighlight(this.eventToSpan(a))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(a,b){return this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(a,b){return this.renderHelperSegs(this.eventToSegs(a),b)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(),b=this.eventsToSegs(a);this.renderBusinessSegs(b)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(b){var c,d=this.spanToSegs({start:b,end:b}),e=this.computeDateTop(b,b),f=[];for(c=0;c<d.length;c++)f.push(a('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",e).appendTo(this.colContainerEls.eq(d[c].col))[0]);d.length>0&&f.push(a('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",e).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=a(f)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderEventLocationHelper(a):this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(a){this.renderHighlightSegs(this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});wb.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var b,c,d="";for(b=0;b<this.colCnt;b++)d+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';c=a('<div class="fc-content-skeleton"><table><tr>'+d+"</tr></table></div>"),this.colContainerEls=c.find(".fc-content-col"),this.helperContainerEls=c.find(".fc-helper-container"),this.fgContainerEls=c.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=c.find(".fc-bgevent-container"),this.highlightContainerEls=c.find(".fc-highlight-container"),this.businessContainerEls=c.find(".fc-business-container"),this.bookendCells(c.find("tr")),this.el.append(c)},renderFgSegs:function(a){return a=this.renderFgSegsIntoContainers(a,this.fgContainerEls),this.fgSegs=a,a},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(b,c){var d,e,f,g=[];for(b=this.renderFgSegsIntoContainers(b,this.helperContainerEls),d=0;d<b.length;d++)e=b[d],c&&c.col===e.col&&(f=c.el,e.el.css({left:f.css("left"),right:f.css("right"),"margin-left":f.css("margin-left"),"margin-right":f.css("margin-right")})),g.push(e.el[0]);return this.helperSegs=b,a(g)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(a){return a=this.renderFillSegEls("bgEvent",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.bgContainerEls),this.bgSegs=a,a},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(a){a=this.renderFillSegEls("highlight",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.highlightContainerEls),this.highlightSegs=a},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(a){a=this.renderFillSegEls("businessHours",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.businessContainerEls),this.businessSegs=a},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(a){var b,c=[];for(b=0;b<this.colCnt;b++)c.push([]);for(b=0;b<a.length;b++)c[a[b].col].push(a[b]);return c},attachSegsByCol:function(a,b){var c,d,e;for(c=0;c<this.colCnt;c++)for(d=a[c],e=0;e<d.length;e++)b.eq(c).append(d[e].el)},unrenderNamedSegs:function(a){var b,c=this[a];if(c){for(b=0;b<c.length;b++)c[b].el.remove();this[a]=null}},renderFgSegsIntoContainers:function(a,b){var c,d;for(a=this.renderFgSegEls(a),c=this.groupSegsByCol(a),d=0;d<this.colCnt;d++)this.updateFgSegCoords(c[d]);return this.attachSegsByCol(c,b),a},fgSegHtml:function(a,b){var c,d,e,f=this.view,g=a.event,h=f.isEventDraggable(g),i=!b&&a.isStart&&f.isEventResizableFromStart(g),j=!b&&a.isEnd&&f.isEventResizableFromEnd(g),k=this.getSegClasses(a,h,i||j),l=ea(this.getSegSkinCss(a));return k.unshift("fc-time-grid-event","fc-v-event"),f.isMultiDayEvent(g)?(a.isStart||a.isEnd)&&(c=this.getEventTimeText(a),d=this.getEventTimeText(a,"LT"),e=this.getEventTimeText(a,null,!1)):(c=this.getEventTimeText(g),d=this.getEventTimeText(g,"LT"),e=this.getEventTimeText(g,null,!1)),'<a class="'+k.join(" ")+'"'+(g.url?' href="'+ca(g.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(c?'<div class="fc-time" data-start="'+ca(e)+'" data-full="'+ca(d)+'"><span>'+ca(c)+"</span></div>":"")+(g.title?'<div class="fc-title">'+ca(g.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(j?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(a){this.computeSegVerticals(a),this.assignSegVerticals(a)},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},assignSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.el.css(this.generateSegVerticalCss(c))},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},updateFgSegCoords:function(a){this.computeSegVerticals(a),this.computeFgSegHorizontals(a),this.assignSegVerticals(a),this.assignFgSegHorizontals(a)},computeFgSegHorizontals:function(a){var b,c,d;if(this.sortEventSegs(a),b=La(a),Ma(b),c=b[0]){for(d=0;d<c.length;d++)Na(c[d]);for(d=0;d<c.length;d++)this.computeFgSegForwardBack(c[d],0,0)}},computeFgSegForwardBack:function(a,b,c){var d,e=a.forwardSegs;if(void 0===a.forwardCoord)for(e.length?(this.sortForwardSegs(e),this.computeFgSegForwardBack(e[0],b+1,c),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),d=0;d<e.length;d++)this.computeFgSegForwardBack(e[d],0,a.forwardCoord)},sortForwardSegs:function(a){a.sort(ia(this,"compareForwardSegs"))},compareForwardSegs:function(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||this.compareEventSegs(a,b)},assignFgSegHorizontals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.el.css(this.generateFgSegHorizontalCss(c)),c.bottom-c.top<30&&c.el.addClass("fc-short")},generateFgSegHorizontalCss:function(a){var b,c,d=this.view.opt("slotEventOverlap"),e=a.backwardCoord,f=a.forwardCoord,g=this.generateSegVerticalCss(a);return d&&(f=Math.min(1,e+2*(f-e))),this.isRTL?(b=1-f,c=e):(b=e,c=1-f),g.zIndex=a.level+1,g.left=100*b+"%",g.right=100*c+"%",d&&a.forwardPressure&&(g[this.isRTL?"marginLeft":"marginRight"]=20),g}});var xb=Wa.View=ya.extend(lb,mb,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(a,c,d,e){this.calendar=a,this.type=this.name=c,this.options=d,this.intervalDuration=e||b.duration(1,"day"),this.nextDayThreshold=b.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=G(this.opt("eventOrder")),this.initialize()},initialize:function(){},opt:function(a){return this.options[a]},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(b){a.extend(this,b),this.updateTitle()},computeRange:function(a){var b,c,d=O(this.intervalDuration),e=a.clone().startOf(d),f=e.clone().add(this.intervalDuration);return/year|month|week|day/.test(d)?(e.stripTime(),f.stripTime()):(e.hasTime()||(e=this.calendar.time(0)),f.hasTime()||(f=this.calendar.time(0))),b=e.clone(),b=this.skipHiddenDays(b),c=f.clone(),c=this.skipHiddenDays(c,-1,!0),{intervalUnit:d,intervalStart:e,intervalEnd:f,start:b,end:c}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day")),a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;return d.hasTime()||(d=d.clone().subtract(1)),ta(a.start,d,b,c,this.opt("isRTL"))},setElement:function(a){this.el=a,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(a){var b=this,c=null;return this.displaying&&(c=this.queryScroll()),this.calendar.freezeContentHeight(),ka(this.clear(),function(){return b.displaying=ka(b.displayView(a),function(){b.forceScroll(b.computeInitialScroll(c)),b.calendar.unfreezeContentHeight(),b.triggerRender()})})},clear:function(){var b=this,c=this.displaying;return c?ka(c,function(){return b.displaying=null,b.clearEvents(),b.clearView()}):a.when()},displayView:function(a){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),a&&this.setDate(a),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(a(document),"mousedown",this.handleDocumentMousedown),this.listenTo(a(document),"touchstart",this.processUnselect)},unbindGlobalHandlers:function(){this.stopListeningTo(a(document))},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var a,c,d,e=this;this.opt("nowIndicator")&&(a=this.getNowIndicatorUnit(),a&&(c=ia(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,d=this.initialNowDate.clone().startOf(a).add(1,a)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null,c(),d=+b.duration(1,a),d=Math.max(100,d),e.nowIndicatorIntervalID=setInterval(c,d)},d)))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(a){},unrenderNowIndicator:function(){},updateSize:function(a){var b;a&&(b=this.queryScroll()),this.updateHeight(a),this.updateWidth(a),this.updateNowIndicator(),a&&this.setScroll(b)},updateWidth:function(a){},updateHeight:function(a){var b=this.calendar;this.setHeight(b.getSuggestedViewHeight(),b.isHeightAuto())},setHeight:function(a,b){},computeInitialScroll:function(a){return 0},queryScroll:function(){},setScroll:function(a){},forceScroll:function(a){var b=this;this.setScroll(a),setTimeout(function(){b.setScroll(a)},0)},displayEvents:function(a){var b=this.queryScroll();this.clearEvents(),this.renderEvents(a),this.isEventsRendered=!0,this.setScroll(b),this.triggerEventRender()},clearEvents:function(){var a;this.isEventsRendered&&(a=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(a),this.isEventsRendered=!1)},renderEvents:function(a){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var c,d=this.getEventSegs();for(c=0;c<d.length;c++)b&&d[c].event._id!==b._id||d[c].el&&a.call(this,d[c])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return ba(a.startEditable,b.startEditable,this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventDrop(a,g.dateDelta,h,d,e),f.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(b,c,d,e,f){var g,h,i=b.eventProps;i&&(g=a.extend({},i,c),h=this.calendar.renderEvent(g,b.stick)[0]),this.triggerExternalDrop(h,c,d,e,f)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e),a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},unrenderDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return ba(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventResize(a,g.durationDelta,h,d,e),f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b),this.renderSelection(a),this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0,this.triggerSelect(a,b)},triggerSelect:function(a,b){this.trigger("select",null,this.calendar.applyTimezone(a.start),this.calendar.applyTimezone(a.end),b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,a))},unrenderSelection:function(){},selectEvent:function(a){this.selectedEvent&&this.selectedEvent===a||(this.unselectEvent(),this.renderedEventSegEach(function(a){a.el.addClass("fc-selected")},a),this.selectedEvent=a)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(a){a.el.removeClass("fc-selected")},this.selectedEvent),
this.selectedEvent=null)},isEventSelected:function(a){return this.selectedEvent&&this.selectedEvent._id===a._id},handleDocumentMousedown:function(a){u(a)&&this.processUnselect(a)},processUnselect:function(a){this.processRangeUnselect(a),this.processEventUnselect(a)},processRangeUnselect:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))},processEventUnselect:function(b){this.selectedEvent&&(a(b.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(a,b,c){this.trigger("dayClick",b,this.calendar.applyTimezone(a.start),c)},initHiddenDays:function(){var b,c=this.opt("hiddenDays")||[],d=[],e=0;for(this.opt("weekends")===!1&&c.push(0,6),b=0;b<7;b++)(d[b]=a.inArray(b,c)!==-1)||e++;if(!e)throw"invalid hiddenDays";this.isHiddenDayHash=d},isHiddenDay:function(a){return b.isMoment(a)&&(a=a.day()),this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){var d=a.clone();for(b=b||1;this.isHiddenDayHash[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d},computeDayRange:function(a){var b,c=a.start.clone().stripTime(),d=a.end,e=null;return d&&(e=d.clone().stripTime(),b=+d.time(),b&&b>=this.nextDayThreshold&&e.add(1,"days")),(!d||e<=c)&&(e=c.clone().add(1,"days")),{start:c,end:e}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}}),yb=Wa.Scroller=ya.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(a){a=a||{},this.overflowX=a.overflowX||a.overflow||"auto",this.overflowY=a.overflowY||a.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=a('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(a){var b=this.overflowX,c=this.overflowY;a=a||this.getScrollbarWidths(),"auto"===b&&(b=a.top||a.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===c&&(c=a.left||a.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":b,"overflow-y":c})},setHeight:function(a){this.scrollEl.height(a)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(a){this.scrollEl.scrollTop(a)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return q(this.scrollEl)}}),zb=Wa.Calendar=ya.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Qa,initialize:function(){},initOptions:function(a){var b,e,f,g;a=d(a),b=a.lang,e=Ab[b],e||(b=zb.defaults.lang,e=Ab[b]||{}),f=ba(a.isRTL,e.isRTL,zb.defaults.isRTL),g=f?zb.rtlDefaults:{},this.dirDefaults=g,this.langDefaults=e,this.overrides=a,this.options=c([zb.defaults,g,e,a]),Ra(this.options),this.viewSpecCache={}},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},getUnitViewSpec:function(b){var c,d,e;if(a.inArray(b,_a)!=-1)for(c=this.header.getViewsWithButtons(),a.each(Wa.views,function(a){c.push(a)}),d=0;d<c.length;d++)if(e=this.getViewSpec(c[d]),e&&e.singleUnit==b)return e},buildViewSpec:function(a){for(var d,e,f,g,h=this.overrides.views||{},i=[],j=[],k=[],l=a;l;)d=Xa[l],e=h[l],l=null,"function"==typeof d&&(d={"class":d}),d&&(i.unshift(d),j.unshift(d.defaults||{}),f=f||d.duration,l=l||d.type),e&&(k.unshift(e),f=f||e.duration,l=l||e.type);return d=W(i),d.type=a,!!d["class"]&&(f&&(f=b.duration(f),f.valueOf()&&(d.duration=f,g=O(f),1===f.as(g)&&(d.singleUnit=g,k.unshift(h[g]||{})))),d.defaults=c(j),d.overrides=c(k),this.buildViewSpecOptions(d),this.buildViewSpecButtonText(d,a),d)},buildViewSpecOptions:function(a){a.options=c([zb.defaults,a.defaults,this.dirDefaults,this.langDefaults,this.overrides,a.overrides]),Ra(a.options)},buildViewSpecButtonText:function(a,b){function c(c){var d=c.buttonText||{};return d[b]||(a.singleUnit?d[a.singleUnit]:null)}a.buttonTextOverride=c(this.overrides)||a.overrides.buttonText,a.buttonTextDefault=c(this.langDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(zb.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b["class"](this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(a,b){var c,d=this.moment(a).stripZone();return c=b?this.moment(b).stripZone():d.hasTime()?d.clone().add(this.defaultTimedEventDuration):d.clone().add(this.defaultAllDayEventDuration),{start:d,end:c}}});zb.mixin(lb),zb.defaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200,longPressDelay:1e3},zb.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},zb.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Ab=Wa.langs={};Wa.datepickerLang=function(b,c,d){var e=Ab[b]||(Ab[b]={});e.isRTL=d.isRTL,e.weekNumberTitle=d.weekHeader,a.each(Bb,function(a,b){e[a]=b(d)}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},Wa.lang=function(b,d){var e,f;e=Ab[b]||(Ab[b]={}),d&&(e=Ab[b]=c([e,d])),f=Sa(b),a.each(Cb,function(a,b){null==e[a]&&(e[a]=b(f,e))}),zb.defaults.lang=b};var Bb={buttonText:function(a){return{prev:da(a.prevText),next:da(a.nextText),today:da(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},Cb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),b.isRTL?c+=" ddd":c="ddd "+c,c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},Db={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};Wa.lang("en",zb.englishDefaults),Wa.sourceNormalizers=[],Wa.sourceFetchers=[];var Eb={dataType:"json",cache:!1},Fb=1;zb.prototype.normalizeEvent=function(a){},zb.prototype.getPeerEvents=function(a,b){var c,d,e=this.getEventCache(),f=[];for(c=0;c<e.length;c++)d=e[c],b&&b._id===d._id||f.push(d);return f};var Gb=Wa.BasicView=xb.extend({scroller:null,dayGridClass:vb,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new yb({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){var a=this.dayGridClass.extend(Hb);return new a(this)},setRange:function(a){xb.prototype.setRange.call(this,a),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(a)},computeRange:function(a){var b=xb.prototype.computeRange.call(this,a);return/year|month/.test(b.intervalUnit)&&(b.start.startOf("week"),b.start=this.skipHiddenDays(b.start),b.end.weekday()&&(b.end.add(1,"week").startOf("week"),b.end=this.skipHiddenDays(b.end,-1,!0))),b},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var b=this.scroller.el.addClass("fc-day-grid-container"),c=a('<div class="fc-day-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b),this.dayGrid.setElement(c),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=k(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c,d,g=this.opt("eventLimit");this.scroller.clear(),f(this.headRowEl),this.dayGrid.removeSegPopover(),g&&"number"==typeof g&&this.dayGrid.limitRows(g),c=this.computeScrollerHeight(a),this.setGridHeight(c,b),g&&"number"!=typeof g&&this.dayGrid.limitRows(g),b||(this.scroller.setHeight(c),d=this.scroller.getScrollbarWidths(),(d.left||d.right)&&(e(this.headRowEl,d),c=this.computeScrollerHeight(a),this.scroller.setHeight(c)),this.scroller.lockOverflow(d))},computeScrollerHeight:function(a){return a-l(this.el,this.scroller.el)},setGridHeight:function(a,b){b?j(this.dayGrid.rowEls):i(this.dayGrid.rowEls,a,!0)},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(a){this.scroller.setScrollTop(a)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(a,b){return this.dayGrid.queryHit(a,b)},getHitSpan:function(a){return this.dayGrid.getHitSpan(a)},getHitEl:function(a){return this.dayGrid.getHitEl(a)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Hb={renderHeadIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<th class="fc-week-number '+a.widgetHeaderClass+'" '+a.weekNumberStyleAttr()+"><span>"+ca(a.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(a){var b=this.view;return b.weekNumbersVisible?'<td class="fc-week-number" '+b.weekNumberStyleAttr()+"><span>"+this.getCellDate(a,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<td class="fc-week-number '+a.widgetContentClass+'" '+a.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<td class="fc-week-number" '+a.weekNumberStyleAttr()+"></td>":""}},Ib=Wa.MonthView=Gb.extend({computeRange:function(a){var b,c=Gb.prototype.computeRange.call(this,a);return this.isFixedWeeks()&&(b=Math.ceil(c.end.diff(c.start,"weeks",!0)),c.end.add(6-b,"weeks")),c},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),i(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});Xa.basic={"class":Gb},Xa.basicDay={type:"basic",duration:{days:1}},Xa.basicWeek={type:"basic",duration:{weeks:1}},Xa.month={"class":Ib,duration:{months:1},defaults:{fixedWeekCount:!0}};var Jb=Wa.AgendaView=xb.extend({scroller:null,timeGridClass:wb,timeGrid:null,dayGridClass:vb,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new yb({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){var a=this.timeGridClass.extend(Kb);return new a(this)},instantiateDayGrid:function(){var a=this.dayGridClass.extend(Lb);return new a(this)},setRange:function(a){xb.prototype.setRange.call(this,a),this.timeGrid.setRange(a),this.dayGrid&&this.dayGrid.setRange(a)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var b=this.scroller.el.addClass("fc-time-grid-container"),c=a('<div class="fc-time-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b),this.timeGrid.setElement(c),this.timeGrid.renderDates(),this.bottomRuleEl=a('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(a){this.timeGrid.renderNowIndicator(a)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(a){this.timeGrid.updateSize(a),xb.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=k(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d,g;this.bottomRuleEl.hide(),this.scroller.clear(),f(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=Mb),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),this.scroller.setHeight(d),g=this.scroller.getScrollbarWidths(),(g.left||g.right)&&(e(this.noScrollRowEls,g),d=this.computeScrollerHeight(a),this.scroller.setHeight(d)),this.scroller.lockOverflow(g),this.timeGrid.getTotalSlatHeight()<d&&this.bottomRuleEl.show())},computeScrollerHeight:function(a){return a-l(this.el,this.scroller.el)},computeInitialScroll:function(){var a=b.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);return c=Math.ceil(c),c&&c++,c},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(a){this.scroller.setScrollTop(a)},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(a,b){var c=this.timeGrid.queryHit(a,b);return!c&&this.dayGrid&&(c=this.dayGrid.queryHit(a,b)),c},getHitSpan:function(a){return a.component.getHitSpan(a)},getHitEl:function(a){return a.component.getHitEl(a)},renderEvents:function(a){var b,c,d=[],e=[],f=[];for(c=0;c<a.length;c++)a[c].allDay?d.push(a[c]):e.push(a[c]);b=this.timeGrid.renderEvents(e),this.dayGrid&&(f=this.dayGrid.renderEvents(d)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return a.start.hasTime()?this.timeGrid.renderDrag(a,b):this.dayGrid?this.dayGrid.renderDrag(a,b):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Kb={renderHeadIntroHtml:function(){var a,b=this.view;return b.opt("weekNumbers")?(a=this.start.format(b.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+b.widgetHeaderClass+'" '+b.axisStyleAttr()+"><span>"+ca(a)+"</span></th>"):'<th class="fc-axis '+b.widgetHeaderClass+'" '+b.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var a=this.view;return'<td class="fc-axis" '+a.axisStyleAttr()+"></td>"}},Lb={renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"><span>"+(a.opt("allDayHtml")||ca(a.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){var a=this.view;return'<td class="fc-axis" '+a.axisStyleAttr()+"></td>"}},Mb=5,Nb=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Xa.agenda={"class":Jb,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Xa.agendaDay={type:"agenda",duration:{days:1}},Xa.agendaWeek={type:"agenda",duration:{weeks:1}},Wa}),!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function c(a){return W(a,Ya)}function d(b){var c,d={views:b.views||{}};return a.each(b,function(b,e){"views"!=b&&(a.isPlainObject(e)&&!/(time|duration|interval)$/i.test(b)&&-1==a.inArray(b,Ya)?(c=null,a.each(e,function(a,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(a)?(d.views[a]||(d.views[a]={}),d.views[a][b]=e):(c||(c={}),c[a]=e)}),c&&(d[b]=c)):d[b]=e)}),d}function e(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function f(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function g(){a("body").addClass("fc-not-allowed")}function h(){a("body").removeClass("fc-not-allowed")}function i(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],k=0;j(b),b.each(function(c,d){var j=c===b.length-1?f:e,l=a(d).outerHeight(!0);j>l?(g.push(d),h.push(l),i.push(a(d).height())):k+=l}),d&&(c-=k,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);d>j&&a(c).height(l)})}function j(a){a.height("")}function k(b){var c=0;return b.find("> span").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function l(a,b){var c,d=a.add(b);return d.css({position:"relative",left:-1}),c=a.outerHeight()-b.outerHeight(),d.css({position:"",left:""}),c}function m(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function n(a,b){var c=a.offset(),d=c.left-(b?b.left:0),e=c.top-(b?b.top:0);return{left:d,right:d+a.outerWidth(),top:e,bottom:e+a.outerHeight()}}function o(a,b){var c=a.offset(),d=q(a),e=c.left+t(a,"border-left-width")+d.left-(b?b.left:0),f=c.top+t(a,"border-top-width")+d.top-(b?b.top:0);return{left:e,right:e+a[0].clientWidth,top:f,bottom:f+a[0].clientHeight}}function p(a,b){var c=a.offset(),d=c.left+t(a,"border-left-width")+t(a,"padding-left")-(b?b.left:0),e=c.top+t(a,"border-top-width")+t(a,"padding-top")-(b?b.top:0);return{left:d,right:d+a.width(),top:e,bottom:e+a.height()}}function q(a){var b=a.innerWidth()-a[0].clientWidth,c={left:0,right:0,top:0,bottom:a.innerHeight()-a[0].clientHeight};return r()&&"rtl"==a.css("direction")?c.left=b:c.right=b,c}function r(){return null===Za&&(Za=s()),Za}function s(){var b=a("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),c=b.children(),d=c.offset().left>b.offset().left;return b.remove(),d}function t(a,b){return parseFloat(a.css(b))||0}function u(a){return 1==a.which&&!a.ctrlKey}function v(a){if(void 0!==a.pageX)return a.pageX;var b=a.originalEvent.touches;return b?b[0].pageX:void 0}function w(a){if(void 0!==a.pageY)return a.pageY;var b=a.originalEvent.touches;return b?b[0].pageY:void 0}function x(a){return/^touch/.test(a.type)}function y(a){a.addClass("fc-unselectable").on("selectstart",z)}function z(a){a.preventDefault()}function A(a){return!!window.addEventListener&&(window.addEventListener("scroll",a,!0),!0)}function B(a){return!!window.removeEventListener&&(window.removeEventListener("scroll",a,!0),!0)}function C(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom&&c}function D(a,b){return{left:Math.min(Math.max(a.left,b.left),b.right),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function E(a){return{left:(a.left+a.right)/2,top:(a.top+a.bottom)/2}}function F(a,b){return{left:a.left-b.left,top:a.top-b.top}}function G(b){var c,d,e=[],f=[];for("string"==typeof b?f=b.split(/\s*,\s*/):"function"==typeof b?f=[b]:a.isArray(b)&&(f=b),c=0;c<f.length;c++)d=f[c],"string"==typeof d?e.push("-"==d.charAt(0)?{field:d.substring(1),order:-1}:{field:d,order:1}):"function"==typeof d&&e.push({func:d});return e}function H(a,b,c){var d,e;for(d=0;d<c.length;d++)if(e=I(a,b,c[d]))return e;return 0}function I(a,b,c){return c.func?c.func(a,b):J(a[c.field],b[c.field])*(c.order||1)}function J(b,c){return b||c?null==c?-1:null==b?1:"string"===a.type(b)||"string"===a.type(c)?String(b).localeCompare(String(c)):b-c:0}function K(a,b){var c,d,e,f,g=a.start,h=a.end,i=b.start,j=b.end;return h>i&&j>g?(g>=i?(c=g.clone(),e=!0):(c=i.clone(),e=!1),j>=h?(d=h.clone(),f=!0):(d=j.clone(),f=!1),{start:c,end:d,isStart:e,isEnd:f}):void 0}function L(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function M(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days")})}function N(a,c,d){return b.duration(Math.round(a.diff(c,d,!0)),d)}function O(a,b){var c,d,e;for(c=0;c<_a.length&&(d=_a[c],e=P(d,a,b),!(e>=1&&ha(e)));c++);return d}function P(a,c,d){return null!=d?d.diff(c,a,!0):b.isDuration(c)?c.as(a):c.end.diff(c.start,a,!0)}function Q(a,b,c){var d;return T(c)?(b-a)/c:(d=c.asMonths(),Math.abs(d)>=1&&ha(d)?b.diff(a,"months",!0)/d:b.diff(a,"days",!0)/c.asDays())}function R(a,b){var c,d;return T(a)||T(b)?a/b:(c=a.asMonths(),d=b.asMonths(),Math.abs(c)>=1&&ha(c)&&Math.abs(d)>=1&&ha(d)?c/d:a.asDays()/b.asDays())}function S(a,c){var d;return T(a)?b.duration(a*c):(d=a.asMonths(),Math.abs(d)>=1&&ha(d)?b.duration({months:d*c}):b.duration({days:a.asDays()*c}))}function T(a){return Boolean(a.hours()||a.minutes()||a.seconds()||a.milliseconds())}function U(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function V(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function W(a,b){var c,d,e,f,g,h,i={};if(b)for(c=0;c<b.length;c++){for(d=b[c],e=[],f=a.length-1;f>=0;f--)if(g=a[f][d],"object"==typeof g)e.unshift(g);else if(void 0!==g){i[d]=g;break}e.length&&(i[d]=W(e))}for(c=a.length-1;c>=0;c--){h=a[c];for(d in h)d in i||(i[d]=h[d])}return i}function X(a){var b=function(){};return b.prototype=a,new b}function Y(a,b){for(var c in a)$(a,c)&&(b[c]=a[c])}function Z(a,b){var c,d,e=["constructor","toString","valueOf"];for(c=0;c<e.length;c++)d=e[c],a[d]!==Object.prototype[d]&&(b[d]=a[d])}function $(a,b){return db.call(a,b)}function _(b){return/undefined|null|boolean|number|string/.test(a.type(b))}function aa(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function ba(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function ca(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function da(a){return a.replace(/&.*?;/g,"")}function ea(b){var c=[];return a.each(b,function(a,b){null!=b&&c.push(a+":"+b)}),c.join(";")}function fa(a){return a.charAt(0).toUpperCase()+a.slice(1)}function ga(a,b){return a-b}function ha(a){return a%1===0}function ia(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function ja(a,b,c){var d,e,f,g,h,i=function(){var j=+new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=+new Date;var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}}function ka(b,c){return b&&b.then&&"resolved"!==b.state()?c?b.then(c):void 0:a.when(c())}function la(c,d,e){var f,g,h,i,j=c[0],k=1==c.length&&"string"==typeof j;return b.isMoment(j)?(i=b.apply(null,c),na(j,i)):U(j)||void 0===j?i=b.apply(null,c):(f=!1,g=!1,k?eb.test(j)?(j+="-01",c=[j],f=!0,g=!0):(h=fb.exec(j))&&(f=!h[5],g=!0):a.isArray(j)&&(g=!0),i=d||f?b.utc.apply(b,c):b.apply(null,c),f?(i._ambigTime=!0,i._ambigZone=!0):e&&(g?i._ambigZone=!0:k&&(i.utcOffset?i.utcOffset(j):i.zone(j)))),i._fullCalendar=!0,i}function ma(a,c){var d,e,f=!1,g=!1,h=a.length,i=[];for(d=0;h>d;d++)e=a[d],b.isMoment(e)||(e=Wa.moment.parseZone(e)),f=f||e._ambigTime,g=g||e._ambigZone,i.push(e);for(d=0;h>d;d++)e=i[d],c||!f||e._ambigTime?g&&!e._ambigZone&&(i[d]=e.clone().stripZone()):i[d]=e.clone().stripTime();return i}function na(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function oa(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function pa(a,b){return hb.format.call(a,b)}function qa(a,b){return ra(a,wa(b))}function ra(a,b){var c,d="";for(c=0;c<b.length;c++)d+=sa(a,b[c]);return d}function sa(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?ib[c]?ib[c](a):pa(a,c):b.maybe&&(d=ra(a,b.maybe),d.match(/[1-9]/))?d:""}function ta(a,b,c,d,e){var f;return a=Wa.moment.parseZone(a),b=Wa.moment.parseZone(b),f=(a.localeData||a.lang).call(a),c=f.longDateFormat(c)||c,d=d||" - ",ua(a,b,wa(c),d,e)}function ua(a,b,c,d,e){var f,g,h,i,j=a.clone().stripZone(),k=b.clone().stripZone(),l="",m="",n="",o="",p="";for(g=0;g<c.length&&(f=va(a,b,j,k,c[g]),f!==!1);g++)l+=f;for(h=c.length-1;h>g&&(f=va(a,b,j,k,c[h]),f!==!1);h--)m=f+m;for(i=g;h>=i;i++)n+=sa(a,c[i]),o+=sa(b,c[i]);return(n||o)&&(p=e?o+d+n:n+d+o),l+p+m}function va(a,b,c,d,e){var f,g;return"string"==typeof e?e:!!((f=e.token)&&(g=jb[f.charAt(0)],g&&c.isSame(d,g)))&&pa(a,f)}function wa(a){return a in kb?kb[a]:kb[a]=xa(a)}function xa(a){for(var b,c=[],d=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;b=d.exec(a);)b[1]?c.push(b[1]):b[2]?c.push({maybe:xa(b[2])}):b[3]?c.push({token:b[3]}):b[5]&&c.push(b[5]);return c}function ya(){}function za(a,b){var c;return $(b,"constructor")&&(c=b.constructor),"function"!=typeof c&&(c=b.constructor=function(){a.apply(this,arguments)}),c.prototype=X(a.prototype),Y(b,c.prototype),Z(b,c.prototype),Y(a,c),c}function Aa(a,b){Y(b,a.prototype)}function Ba(a,b){return!a&&!b||!(!a||!b)&&(a.component===b.component&&Ca(a,b)&&Ca(b,a))}function Ca(a,b){for(var c in a)if(!/^(component|left|right|top|bottom)$/.test(c)&&a[c]!==b[c])return!1;return!0}function Da(a){var b=Fa(a);return"background"===b||"inverse-background"===b}function Ea(a){return"inverse-background"===Fa(a)}function Fa(a){return ba((a.source||{}).rendering,a.rendering)}function Ga(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],(d[c._id]||(d[c._id]=[])).push(c);return d}function Ha(a,b){return a.start-b.start}function Ia(c){var d,e,f,g,h=Wa.dataAttrPrefix;return h&&(h+="-"),d=c.data(h+"event")||null,d&&(d="object"==typeof d?a.extend({},d):{},e=d.start,null==e&&(e=d.time),f=d.duration,g=d.stick,delete d.start,delete d.time,delete d.duration,delete d.stick),null==e&&(e=c.data(h+"start")),null==e&&(e=c.data(h+"time")),null==f&&(f=c.data(h+"duration")),null==g&&(g=c.data(h+"stick")),e=null!=e?b.duration(e):null,f=null!=f?b.duration(f):null,g=Boolean(g),{eventProps:d,startTime:e,duration:f,stick:g}}function Ja(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function Ka(a,b){return a.leftCol-b.leftCol}function La(a){var b,c,d,e=[];for(b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&Oa(c,e[d]).length;d++);c.level=d,(e[d]||(e[d]=[])).push(c)}return e}function Ma(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)Oa(e,a[f],e.forwardSegs)}function Na(a){var b,c,d=a.forwardSegs,e=0;if(void 0===a.forwardPressure){for(b=0;b<d.length;b++)c=d[b],Na(c),e=Math.max(e,1+c.forwardPressure);a.forwardPressure=e}}function Oa(a,b,c){c=c||[];for(var d=0;d<b.length;d++)Pa(a,b[d])&&c.push(b[d]);return c}function Pa(a,b){return a.bottom>b.top&&a.top<b.bottom}function Qa(c,d){function e(){T?h()&&(k(),i()):f()}function f(){U=O.theme?"ui":"fc",c.addClass("fc"),O.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr"),O.theme?c.addClass("ui-widget"):c.addClass("fc-unthemed"),T=a("<div class='fc-view-container'/>").prependTo(c),R=N.header=new Ta(N,O),S=R.render(),S&&c.prepend(S),i(O.defaultView),O.handleWindowResize&&(Y=ja(m,O.windowResizeDelay),a(window).resize(Y))}function g(){V&&V.removeElement(),R.removeElement(),T.remove(),c.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),Y&&a(window).unbind("resize",Y)}function h(){return c.is(":visible")}function i(b){da++,V&&b&&V.type!==b&&(R.deactivateButton(V.type),H(),V.removeElement(),V=N.view=null),!V&&b&&(V=N.view=ca[b]||(ca[b]=N.instantiateView(b)),V.setElement(a("<div class='fc-view fc-"+b+"-view' />").appendTo(T)),
R.activateButton(b)),V&&(Z=V.massageCurrentDate(Z),V.displaying&&Z.isWithin(V.intervalStart,V.intervalEnd)||h()&&(V.display(Z),I(),u(),v(),q())),I(),da--}function j(a){return h()?(a&&l(),da++,V.updateSize(!0),da--,!0):void 0}function k(){h()&&l()}function l(){W="number"==typeof O.contentHeight?O.contentHeight:"number"==typeof O.height?O.height-(S?S.outerHeight(!0):0):Math.round(T.width()/Math.max(O.aspectRatio,.5))}function m(a){!da&&a.target===window&&V.start&&j(!0)&&V.trigger("windowResize",ba)}function n(){r()}function o(a){aa(N.getEventSourcesByMatchArray(a))}function p(){h()&&(H(),V.displayEvents(ea),I())}function q(){!O.lazyFetching||$(V.start,V.end)?r():p()}function r(){_(V.start,V.end)}function s(a){ea=a,p()}function t(){p()}function u(){R.updateTitle(V.title)}function v(){var a=N.getNow();a.isWithin(V.intervalStart,V.intervalEnd)?R.disableButton("today"):R.enableButton("today")}function w(a,b){V.select(N.buildSelectSpan.apply(N,arguments))}function x(){V&&V.unselect()}function y(){Z=V.computePrevDate(Z),i()}function z(){Z=V.computeNextDate(Z),i()}function A(){Z.add(-1,"years"),i()}function B(){Z.add(1,"years"),i()}function C(){Z=N.getNow(),i()}function D(a){Z=N.moment(a).stripZone(),i()}function E(a){Z.add(b.duration(a)),i()}function F(a,b){var c;b=b||"day",c=N.getViewSpec(b)||N.getUnitViewSpec(b),Z=a.clone(),i(c?c.type:null)}function G(){return N.applyTimezone(Z)}function H(){T.css({width:"100%",height:T.height(),overflow:"hidden"})}function I(){T.css({width:"",height:"",overflow:""})}function J(){return N}function K(){return V}function L(a,b){return void 0===b?O[a]:void("height"!=a&&"contentHeight"!=a&&"aspectRatio"!=a||(O[a]=b,j(!0)))}function M(a,b){var c=Array.prototype.slice.call(arguments,2);return b=b||ba,this.triggerWith(a,b,c),O[a]?O[a].apply(b,c):void 0}var N=this;N.initOptions(d||{});var O=this.options;N.render=e,N.destroy=g,N.refetchEvents=n,N.refetchEventSources=o,N.reportEvents=s,N.reportEventChange=t,N.rerenderEvents=p,N.changeView=i,N.select=w,N.unselect=x,N.prev=y,N.next=z,N.prevYear=A,N.nextYear=B,N.today=C,N.gotoDate=D,N.incrementDate=E,N.zoomTo=F,N.getDate=G,N.getCalendar=J,N.getView=K,N.option=L,N.trigger=M;var P=X(Sa(O.lang));if(O.monthNames&&(P._months=O.monthNames),O.monthNamesShort&&(P._monthsShort=O.monthNamesShort),O.dayNames&&(P._weekdays=O.dayNames),O.dayNamesShort&&(P._weekdaysShort=O.dayNamesShort),null!=O.firstDay){var Q=X(P._week);Q.dow=O.firstDay,P._week=Q}P._fullCalendar_weekCalc=function(a){return"function"==typeof a?a:"local"===a?a:"iso"===a||"ISO"===a?"ISO":void 0}(O.weekNumberCalculation),N.defaultAllDayEventDuration=b.duration(O.defaultAllDayEventDuration),N.defaultTimedEventDuration=b.duration(O.defaultTimedEventDuration),N.moment=function(){var a;return"local"===O.timezone?(a=Wa.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===O.timezone?Wa.moment.utc.apply(null,arguments):Wa.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=P:a._lang=P,a},N.getIsAmbigTimezone=function(){return"local"!==O.timezone&&"UTC"!==O.timezone},N.applyTimezone=function(a){if(!a.hasTime())return a.clone();var b,c=N.moment(a.toArray()),d=a.time()-c.time();return d&&(b=c.clone().add(d),a.time()-b.time()===0&&(c=b)),c},N.getNow=function(){var a=O.now;return"function"==typeof a&&(a=a()),N.moment(a).stripZone()},N.getEventEnd=function(a){return a.end?a.end.clone():N.getDefaultEventEnd(a.allDay,a.start)},N.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(N.defaultAllDayEventDuration):c.add(N.defaultTimedEventDuration),N.getIsAmbigTimezone()&&c.stripZone(),c},N.humanizeDuration=function(a){return(a.locale||a.lang).call(a,O.lang).humanize()},Ua.call(N,O);var R,S,T,U,V,W,Y,Z,$=N.isFetchNeeded,_=N.fetchEvents,aa=N.fetchEventSources,ba=c[0],ca={},da=0,ea=[];Z=null!=O.defaultDate?N.moment(O.defaultDate).stripZone():N.getNow(),N.getSuggestedViewHeight=function(){return void 0===W&&k(),W},N.isHeightAuto=function(){return"auto"===O.contentHeight||"auto"===O.height},N.freezeContentHeight=H,N.unfreezeContentHeight=I,N.initialize()}function Ra(b){a.each(Db,function(a,c){null==b[a]&&(b[a]=c(b))})}function Sa(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function Ta(b,c){function d(){var b=c.header;return n=c.theme?"ui":"fc",b?o=a("<div class='fc-toolbar'/>").append(f("left")).append(f("right")).append(f("center")).append('<div class="fc-clear"/>'):void 0}function e(){o.remove(),o=a()}function f(d){var e=a('<div class="fc-'+d+'"/>'),f=c.header[d];return f&&a.each(f.split(" "),function(d){var f,g=a(),h=!0;a.each(this.split(","),function(d,e){var f,i,j,k,l,m,o,q,r,s;"title"==e?(g=g.add(a("<h2>&nbsp;</h2>")),h=!1):((f=(b.options.customButtons||{})[e])?(j=function(a){f.click&&f.click.call(s[0],a)},k="",l=f.text):(i=b.getViewSpec(e))?(j=function(){b.changeView(e)},p.push(e),k=i.buttonTextOverride,l=i.buttonTextDefault):b[e]&&(j=function(){b[e]()},k=(b.overrides.buttonText||{})[e],l=c.buttonText[e]),j&&(m=f?f.themeIcon:c.themeButtonIcons[e],o=f?f.icon:c.buttonIcons[e],q=k?ca(k):m&&c.theme?"<span class='ui-icon ui-icon-"+m+"'></span>":o&&!c.theme?"<span class='fc-icon fc-icon-"+o+"'></span>":ca(l),r=["fc-"+e+"-button",n+"-button",n+"-state-default"],s=a('<button type="button" class="'+r.join(" ")+'">'+q+"</button>").click(function(a){s.hasClass(n+"-state-disabled")||(j(a),(s.hasClass(n+"-state-active")||s.hasClass(n+"-state-disabled"))&&s.removeClass(n+"-state-hover"))}).mousedown(function(){s.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){s.removeClass(n+"-state-down")}).hover(function(){s.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){s.removeClass(n+"-state-hover").removeClass(n+"-state-down")}),g=g.add(s)))}),h&&g.first().addClass(n+"-corner-left").end().last().addClass(n+"-corner-right").end(),g.length>1?(f=a("<div/>"),h&&f.addClass("fc-button-group"),f.append(g),e.append(f)):e.append(g)}),e}function g(a){o.find("h2").text(a)}function h(a){o.find(".fc-"+a+"-button").addClass(n+"-state-active")}function i(a){o.find(".fc-"+a+"-button").removeClass(n+"-state-active")}function j(a){o.find(".fc-"+a+"-button").prop("disabled",!0).addClass(n+"-state-disabled")}function k(a){o.find(".fc-"+a+"-button").prop("disabled",!1).removeClass(n+"-state-disabled")}function l(){return p}var m=this;m.render=d,m.removeElement=e,m.updateTitle=g,m.activateButton=h,m.deactivateButton=i,m.disableButton=j,m.enableButton=k,m.getViewsWithButtons=l;var n,o=a(),p=[]}function Ua(c){function d(a,b){return!W||W>a||b>X}function e(a,b){W=a,X=b,f($,"reset")}function f(a,b){var c,d;for("reset"===b?da=[]:"add"!==b&&(da=v(da,a)),c=0;c<a.length;c++)d=a[c],"pending"!==d._status&&ca++,d._fetchId=(d._fetchId||0)+1,d._status="pending";for(c=0;c<a.length;c++)d=a[c],g(d,d._fetchId)}function g(b,c){j(b,function(d){var e,f,g,h=a.isArray(b.events);if(c===b._fetchId&&"rejected"!==b._status){if(b._status="resolved",d)for(e=0;e<d.length;e++)f=d[e],g=h?f:C(f,b),g&&da.push.apply(da,G(g));i()}})}function h(a){var b="pending"===a._status;a._status="rejected",b&&i()}function i(){ca--,ca||Y(da)}function j(b,d){var e,f,g=Wa.sourceFetchers;for(e=0;e<g.length;e++){if(f=g[e].call(U,b,W.clone(),X.clone(),c.timezone,d),f===!0)return;if("object"==typeof f)return void j(f,d)}var h=b.events;if(h)a.isFunction(h)?(U.pushLoading(),h.call(U,W.clone(),X.clone(),c.timezone,function(a){d(a),U.popLoading()})):a.isArray(h)?d(h):d();else{var i=b.url;if(i){var k,l=b.success,m=b.error,n=b.complete;k=a.isFunction(b.data)?b.data():b.data;var o=a.extend({},k||{}),p=ba(b.startParam,c.startParam),q=ba(b.endParam,c.endParam),r=ba(b.timezoneParam,c.timezoneParam);p&&(o[p]=W.format()),q&&(o[q]=X.format()),c.timezone&&"local"!=c.timezone&&(o[r]=c.timezone),U.pushLoading(),a.ajax(a.extend({},Eb,b,{data:o,success:function(b){b=b||[];var c=aa(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){aa(m,this,arguments),d()},complete:function(){aa(n,this,arguments),U.popLoading()}}))}else d()}}function k(a){var b=l(a);b&&($.push(b),f([b],"add"))}function l(b){var c,d,e=Wa.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?c={events:b}:"string"==typeof b?c={url:b}:"object"==typeof b&&(c=a.extend({},b)),c){for(c.className?"string"==typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[],a.isArray(c.events)&&(c.origArray=c.events,c.events=a.map(c.events,function(a){return C(a,c)})),d=0;d<e.length;d++)e[d].call(U,c);return c}}function m(a){o(s(a))}function n(a){null==a?o($,!0):o(r(a))}function o(b,c){var d;for(d=0;d<b.length;d++)h(b[d]);c?($=[],da=[]):($=a.grep($,function(a){for(d=0;d<b.length;d++)if(a===b[d])return!1;return!0}),da=v(da,b)),Y(da)}function p(){return $.slice(1)}function q(b){return a.grep($,function(a){return a.id&&a.id===b})[0]}function r(b){b?a.isArray(b)||(b=[b]):b=[];var c,d=[];for(c=0;c<b.length;c++)d.push.apply(d,s(b[c]));return d}function s(b){var c,d;for(c=0;c<$.length;c++)if(d=$[c],d===b)return[d];return d=q(b),d?[d]:a.grep($,function(a){return t(b,a)})}function t(a,b){return a&&b&&u(a)==u(b)}function u(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function v(b,c){return a.grep(b,function(a){for(var b=0;b<c.length;b++)if(a.source===c[b])return!1;return!0})}function w(a){a.start=U.moment(a.start),a.end?a.end=U.moment(a.end):a.end=null,H(a,x(a)),Y(da)}function x(b){var c={};return a.each(b,function(a,b){y(a)&&void 0!==b&&_(b)&&(c[a]=b)}),c}function y(a){return!/^_|^(id|allDay|start|end)$/.test(a)}function z(a,b){var c,d,e,f=C(a);if(f){for(c=G(f),d=0;d<c.length;d++)e=c[d],e.source||(b&&(Z.events.push(e),e.source=Z),da.push(e));return Y(da),c}return[]}function A(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),da=a.grep(da,b,!0),d=0;d<$.length;d++)a.isArray($[d].events)&&($[d].events=a.grep($[d].events,b,!0));Y(da)}function B(b){return a.isFunction(b)?a.grep(da,b):null!=b?(b+="",a.grep(da,function(a){return a._id==b})):da}function C(d,e){var f,g,h,i={};if(c.eventDataTransform&&(d=c.eventDataTransform(d)),e&&e.eventDataTransform&&(d=e.eventDataTransform(d)),a.extend(i,d),e&&(i.source=e),i._id=d._id||(void 0===d.id?"_fc"+Fb++:d.id+""),d.className?"string"==typeof d.className?i.className=d.className.split(/\s+/):i.className=d.className:i.className=[],f=d.start||d.date,g=d.end,V(f)&&(f=b.duration(f)),V(g)&&(g=b.duration(g)),d.dow||b.isDuration(f)||b.isDuration(g))i.start=f?b.duration(f):null,i.end=g?b.duration(g):null,i._recurring=!0;else{if(f&&(f=U.moment(f),!f.isValid()))return!1;g&&(g=U.moment(g),g.isValid()||(g=null)),h=d.allDay,void 0===h&&(h=ba(e?e.allDayDefault:void 0,c.allDayDefault)),D(f,g,h,i)}return U.normalizeEvent(i),i}function D(a,b,c,d){d.start=a,d.end=b,d.allDay=c,E(d),Va(d)}function E(a){F(a),a.end&&!a.end.isAfter(a.start)&&(a.end=null),a.end||(c.forceEventDuration?a.end=U.getDefaultEventEnd(a.allDay,a.start):a.end=null)}function F(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime())),a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=U.applyTimezone(a.start.time(0))),a.end&&!a.end.hasTime()&&(a.end=U.applyTimezone(a.end.time(0))))}function G(b,c,d){var e,f,g,h,i,j,k,l,m,n=[];if(c=c||W,d=d||X,b)if(b._recurring){if(f=b.dow)for(e={},g=0;g<f.length;g++)e[f[g]]=!0;for(h=c.clone().stripTime();h.isBefore(d);)e&&!e[h.day()]||(i=b.start,j=b.end,k=h.clone(),l=null,i&&(k=k.time(i)),j&&(l=h.clone().time(j)),m=a.extend({},b),D(k,l,!i&&!j,m),n.push(m)),h.add(1,"days")}else n.push(b);return n}function H(b,c,d){function e(a,b){return d?N(a,b,d):c.allDay?M(a,b):L(a,b)}var f,g,h,i,j,k,l={};return c=c||{},c.start||(c.start=b.start.clone()),void 0===c.end&&(c.end=b.end?b.end.clone():null),null==c.allDay&&(c.allDay=b.allDay),E(c),f={start:b._start.clone(),end:b._end?b._end.clone():U.getDefaultEventEnd(b._allDay,b._start),allDay:c.allDay},E(f),g=null!==b._end&&null===c.end,h=e(c.start,f.start),c.end?(i=e(c.end,f.end),j=i.subtract(h)):j=null,a.each(c,function(a,b){y(a)&&void 0!==b&&(l[a]=b)}),k=I(B(b._id),g,c.allDay,h,j,l),{dateDelta:h,durationDelta:j,undo:k}}function I(b,c,d,e,f,g){var h=U.getIsAmbigTimezone(),i=[];return e&&!e.valueOf()&&(e=null),f&&!f.valueOf()&&(f=null),a.each(b,function(b,j){var k,l;k={start:j.start.clone(),end:j.end?j.end.clone():null,allDay:j.allDay},a.each(g,function(a){k[a]=j[a]}),l={start:j._start,end:j._end,allDay:d},E(l),c?l.end=null:f&&!l.end&&(l.end=U.getDefaultEventEnd(l.allDay,l.start)),e&&(l.start.add(e),l.end&&l.end.add(e)),f&&l.end.add(f),h&&!l.allDay&&(e||f)&&(l.start.stripZone(),l.end&&l.end.stripZone()),a.extend(j,g,l),Va(j),i.push(function(){a.extend(j,k),Va(j)})}),function(){for(var a=0;a<i.length;a++)i[a]()}}function J(b){var d,e=c.businessHours,f={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},g=U.getView();return e&&(d=a.extend({},f,"object"==typeof e?e:{})),d?(b&&(d.start=null,d.end=null),G(C(d),g.start,g.end)):[]}function K(a,b){var d=b.source||{},e=ba(b.constraint,d.constraint,c.eventConstraint),f=ba(b.overlap,d.overlap,c.eventOverlap);return Q(a,e,f,b)}function O(b,c,d){var e,f;return d&&(e=a.extend({},d,c),f=G(C(e))[0]),f?K(b,f):P(b)}function P(a){return Q(a,c.selectConstraint,c.selectOverlap)}function Q(a,b,c,d){var e,f,g,h,i,j;if(null!=b){for(e=R(b),f=!1,h=0;h<e.length;h++)if(S(e[h],a)){f=!0;break}if(!f)return!1}for(g=U.getPeerEvents(a,d),h=0;h<g.length;h++)if(i=g[h],T(i,a)){if(c===!1)return!1;if("function"==typeof c&&!c(i,d))return!1;if(d){if(j=ba(i.overlap,(i.source||{}).overlap),j===!1)return!1;if("function"==typeof j&&!j(d,i))return!1}}return!0}function R(a){return"businessHours"===a?J():"object"==typeof a?G(C(a)):B(a)}function S(a,b){var c=a.start.clone().stripZone(),d=U.getEventEnd(a).stripZone();return b.start>=c&&b.end<=d}function T(a,b){var c=a.start.clone().stripZone(),d=U.getEventEnd(a).stripZone();return b.start<d&&b.end>c}var U=this;U.isFetchNeeded=d,U.fetchEvents=e,U.fetchEventSources=f,U.getEventSources=p,U.getEventSourceById=q,U.getEventSourcesByMatchArray=r,U.getEventSourcesByMatch=s,U.addEventSource=k,U.removeEventSource=m,U.removeEventSources=n,U.updateEvent=w,U.renderEvent=z,U.removeEvents=A,U.clientEvents=B,U.mutateEvent=H,U.normalizeEventDates=E,U.normalizeEventTimes=F;var W,X,Y=U.reportEvents,Z={events:[]},$=[Z],ca=0,da=[];a.each((c.events?[c.events]:[]).concat(c.eventSources||[]),function(a,b){var c=l(b);c&&$.push(c)}),U.getBusinessHoursEvents=J,U.isEventSpanAllowed=K,U.isExternalSpanAllowed=O,U.isSelectionSpanAllowed=P,U.getEventCache=function(){return da}}function Va(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}var Wa=a.fullCalendar={version:"2.8.0",internalApiVersion:4},Xa=Wa.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var g,h=a(f),i=h.data("fullCalendar");"string"==typeof b?i&&a.isFunction(i[b])&&(g=i[b].apply(i,c),e||(d=g),"destroy"===b&&h.removeData("fullCalendar")):i||(i=new zb(h,b),h.data("fullCalendar",i),i.render())}),d};var Ya=["header","buttonText","buttonIcons","themeButtonIcons"];Wa.intersectRanges=K,Wa.applyAll=aa,Wa.debounce=ja,Wa.isInt=ha,Wa.htmlEscape=ca,Wa.cssToStr=ea,Wa.proxy=ia,Wa.capitaliseFirstLetter=fa,Wa.getOuterRect=n,Wa.getClientRect=o,Wa.getContentRect=p,Wa.getScrollbarWidths=q;var Za=null;Wa.preventDefault=z,Wa.intersectRects=C,Wa.parseFieldSpecs=G,Wa.compareByFieldSpecs=H,Wa.compareByFieldSpec=I,Wa.flexibleCompare=J,Wa.computeIntervalUnit=O,Wa.divideRangeByDuration=Q,Wa.divideDurationByDuration=R,Wa.multiplyDuration=S,Wa.durationHasTime=T;var $a=["sun","mon","tue","wed","thu","fri","sat"],_a=["year","month","week","day","hour","minute","second","millisecond"];Wa.log=function(){var a=window.console;return a&&a.log?a.log.apply(a,arguments):void 0},Wa.warn=function(){var a=window.console;return a&&a.warn?a.warn.apply(a,arguments):Wa.log.apply(Wa,arguments)};var ab,bb,cb,db={}.hasOwnProperty,eb=/^\s*\d{4}-\d\d$/,fb=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,gb=b.fn,hb=a.extend({},gb);Wa.moment=function(){return la(arguments)},Wa.moment.utc=function(){var a=la(arguments,!0);return a.hasTime()&&a.utc(),a},Wa.moment.parseZone=function(){return la(arguments,!0,!0)},gb.clone=function(){var a=hb.clone.apply(this,arguments);return na(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},gb.week=gb.weeks=function(a){var b=(this._locale||this._lang)._fullCalendar_weekCalc;return null==a&&"function"==typeof b?b(this):"ISO"===b?hb.isoWeek.apply(this,arguments):hb.week.apply(this,arguments)},gb.time=function(a){if(!this._fullCalendar)return hb.time.apply(this,arguments);if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},gb.stripTime=function(){var a;return this._ambigTime||(a=this.toArray(),this.utc(),bb(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},gb.hasTime=function(){return!this._ambigTime},gb.stripZone=function(){var a,b;return this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),bb(this,a),this._ambigTime=b||!1,this._ambigZone=!0),this},gb.hasZone=function(){return!this._ambigZone},gb.local=function(){var a=this.toArray(),b=this._ambigZone;return hb.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,b&&cb(this,a),this},gb.utc=function(){return hb.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},a.each(["zone","utcOffset"],function(a,b){hb[b]&&(gb[b]=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),hb[b].apply(this,arguments)})}),gb.format=function(){return this._fullCalendar&&arguments[0]?qa(this,arguments[0]):this._ambigTime?pa(this,"YYYY-MM-DD"):this._ambigZone?pa(this,"YYYY-MM-DD[T]HH:mm:ss"):hb.format.apply(this,arguments)},gb.toISOString=function(){return this._ambigTime?pa(this,"YYYY-MM-DD"):this._ambigZone?pa(this,"YYYY-MM-DD[T]HH:mm:ss"):hb.toISOString.apply(this,arguments)},gb.isWithin=function(a,b){var c=ma([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},gb.isSame=function(a,b){var c;return this._fullCalendar?b?(c=ma([this,a],!0),hb.isSame.call(c[0],c[1],b)):(a=Wa.moment.parseZone(a),hb.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):hb.isSame.apply(this,arguments)},a.each(["isBefore","isAfter"],function(a,b){gb[b]=function(a,c){var d;return this._fullCalendar?(d=ma([this,a]),hb[b].call(d[0],d[1],c)):hb[b].apply(this,arguments)}}),ab="_d"in b()&&"updateOffset"in b,bb=ab?function(a,c){a._d.setTime(Date.UTC.apply(Date,c)),b.updateOffset(a,!1)}:oa,cb=ab?function(a,c){a._d.setTime(+new Date(c[0]||0,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0)),b.updateOffset(a,!1)}:oa;var ib={t:function(a){return pa(a,"a").charAt(0)},T:function(a){return pa(a,"A").charAt(0)}};Wa.formatRange=ta;var jb={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},kb={};Wa.Class=ya,ya.extend=function(){var a,b,c=arguments.length;for(a=0;c>a;a++)b=arguments[a],c-1>a&&Aa(this,b);return za(this,b||{})},ya.mixin=function(a){Aa(this,a)};var lb=Wa.EmitterMixin={on:function(b,c){var d=function(a,b){return c.apply(b.context||this,b.args||[])};return c.guid||(c.guid=a.guid++),d.guid=c.guid,a(this).on(b,d),this},off:function(b,c){return a(this).off(b,c),this},trigger:function(b){var c=Array.prototype.slice.call(arguments,1);return a(this).triggerHandler(b,{args:c}),this},triggerWith:function(b,c,d){return a(this).triggerHandler(b,{context:c,args:d}),this}},mb=Wa.ListenerMixin=function(){var b=0,c={listenerId:null,listenTo:function(b,c,d){if("object"==typeof c)for(var e in c)c.hasOwnProperty(e)&&this.listenTo(b,e,c[e]);else"string"==typeof c&&b.on(c+"."+this.getListenerNamespace(),a.proxy(d,this))},stopListeningTo:function(a,b){a.off((b||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=b++),"_listener"+this.listenerId}};return c}(),nb={isIgnoringMouse:!1,delayUnignoreMouse:null,initMouseIgnoring:function(a){this.delayUnignoreMouse=ja(ia(this,"unignoreMouse"),a||1e3)},tempIgnoreMouse:function(){this.isIgnoringMouse=!0,this.delayUnignoreMouse()},unignoreMouse:function(){this.isIgnoringMouse=!1}},ob=ya.extend(mb,{isHidden:!0,options:null,el:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&this.listenTo(a(document),"mousedown",this.documentMousedown)},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(a(document),"mousedown")},position:function(){var b,c,d,e,f,g=this.options,h=this.el.offsetParent().offset(),i=this.el.outerWidth(),j=this.el.outerHeight(),k=a(window),l=m(this.el);e=g.top||0,f=void 0!==g.left?g.left:void 0!==g.right?g.right-i:0,l.is(window)||l.is(document)?(l=k,b=0,c=0):(d=l.offset(),b=d.top,c=d.left),b+=k.scrollTop(),c+=k.scrollLeft(),g.viewportConstrain!==!1&&(e=Math.min(e,b+l.outerHeight()-j-this.margin),e=Math.max(e,b+this.margin),f=Math.min(f,c+l.outerWidth()-i-this.margin),f=Math.max(f,c+this.margin)),this.el.css({top:e-h.top,left:f-h.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),pb=Wa.CoordCache=ya.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(b){this.els=a(b.els),this.isHorizontal=b.isHorizontal,this.isVertical=b.isVertical,this.forcedOffsetParentEl=b.offsetParent?a(b.offsetParent):null},build:function(){var a=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=a.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var a=m(this.els.eq(0));return a.is(document)?void 0:o(a)},buildElHorizontals:function(){var b=[],c=[];this.els.each(function(d,e){var f=a(e),g=f.offset().left,h=f.outerWidth();b.push(g),c.push(g+h)}),this.lefts=b,this.rights=c},buildElVerticals:function(){var b=[],c=[];this.els.each(function(d,e){var f=a(e),g=f.offset().top,h=f.outerHeight();b.push(g),c.push(g+h)}),this.tops=b,this.bottoms=c},getHorizontalIndex:function(a){this.ensureBuilt();var b,c=this.boundingRect,d=this.lefts,e=this.rights,f=d.length;if(!c||a>=c.left&&a<c.right)for(b=0;f>b;b++)if(a>=d[b]&&a<e[b])return b},getVerticalIndex:function(a){this.ensureBuilt();var b,c=this.boundingRect,d=this.tops,e=this.bottoms,f=d.length;if(!c||a>=c.top&&a<c.bottom)for(b=0;f>b;b++)if(a>=d[b]&&a<e[b])return b},getLeftOffset:function(a){return this.ensureBuilt(),this.lefts[a]},getLeftPosition:function(a){return this.ensureBuilt(),this.lefts[a]-this.origin.left},getRightOffset:function(a){return this.ensureBuilt(),this.rights[a]},getRightPosition:function(a){return this.ensureBuilt(),this.rights[a]-this.origin.left},getWidth:function(a){return this.ensureBuilt(),this.rights[a]-this.lefts[a]},getTopOffset:function(a){return this.ensureBuilt(),this.tops[a]},getTopPosition:function(a){return this.ensureBuilt(),this.tops[a]-this.origin.top},getBottomOffset:function(a){return this.ensureBuilt(),this.bottoms[a]},getBottomPosition:function(a){return this.ensureBuilt(),this.bottoms[a]-this.origin.top},getHeight:function(a){return this.ensureBuilt(),this.bottoms[a]-this.tops[a]}}),qb=Wa.DragListener=ya.extend(mb,nb,{options:null,subjectEl:null,subjectHref:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,handleTouchScrollProxy:null,constructor:function(a){this.options=a||{},this.handleTouchScrollProxy=ia(this,"handleTouchScroll"),this.initMouseIgnoring(500)},startInteraction:function(b,c){var d=x(b);if("mousedown"===b.type){if(this.isIgnoringMouse)return;if(!u(b))return;b.preventDefault()}this.isInteracting||(c=c||{},this.delay=ba(c.delay,this.options.delay,0),this.minDistance=ba(c.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,this.isInteracting=!0,this.isTouch=d,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=v(b),this.originY=w(b),this.scrollEl=m(a(b.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(b),this.startDelay(b),this.minDistance||this.handleDistanceSurpassed(b))},handleInteractionStart:function(a){this.trigger("interactionStart",a)},endInteraction:function(a,b){this.isInteracting&&(this.endDrag(a),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(a,b),this.isTouch&&this.tempIgnoreMouse())},handleInteractionEnd:function(a,b){this.trigger("interactionEnd",a,b||!1)},bindHandlers:function(){var b=this,c=1;this.isTouch?(this.listenTo(a(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(a){c?c--:b.endInteraction(a,!0)}}),!A(this.handleTouchScrollProxy)&&this.scrollEl&&this.listenTo(this.scrollEl,"scroll",this.handleTouchScroll)):this.listenTo(a(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(a(document),{selectstart:z,contextmenu:z})},unbindHandlers:function(){this.stopListeningTo(a(document)),B(this.handleTouchScrollProxy),this.scrollEl&&this.stopListeningTo(this.scrollEl,"scroll")},startDrag:function(a,b){this.startInteraction(a,b),this.isDragging||(this.isDragging=!0,this.handleDragStart(a))},handleDragStart:function(a){this.trigger("dragStart",a),this.initHrefHack()},handleMove:function(a){var b,c=v(a)-this.originX,d=w(a)-this.originY,e=this.minDistance;this.isDistanceSurpassed||(b=c*c+d*d,b>=e*e&&this.handleDistanceSurpassed(a)),this.isDragging&&this.handleDrag(c,d,a)},handleDrag:function(a,b,c){this.trigger("drag",a,b,c),this.updateAutoScroll(c)},endDrag:function(a){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(a))},handleDragEnd:function(a){this.trigger("dragEnd",a),this.destroyHrefHack()},startDelay:function(a){var b=this;this.delay?this.delayTimeoutId=setTimeout(function(){b.handleDelayEnd(a)},this.delay):this.handleDelayEnd(a)},handleDelayEnd:function(a){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(a)},handleDistanceSurpassed:function(a){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(a)},handleTouchMove:function(a){this.isDragging&&a.preventDefault(),this.handleMove(a)},handleMouseMove:function(a){this.handleMove(a)},handleTouchScroll:function(a){this.isDragging||this.endInteraction(a,!0)},initHrefHack:function(){var a=this.subjectEl;(this.subjectHref=a?a.attr("href"):null)&&a.removeAttr("href")},destroyHrefHack:function(){var a=this.subjectEl,b=this.subjectHref;setTimeout(function(){b&&a.attr("href",b)},0)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+a]&&this["_"+a].apply(this,Array.prototype.slice.call(arguments,1))}});qb.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var a=this.scrollEl;this.isAutoScroll=this.options.scroll&&a&&!a.is(window)&&!a.is(document),this.isAutoScroll&&this.listenTo(a,"scroll",ja(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=n(this.scrollEl))},updateAutoScroll:function(a){var b,c,d,e,f=this.scrollSensitivity,g=this.scrollBounds,h=0,i=0;g&&(b=(f-(w(a)-g.top))/f,c=(f-(g.bottom-w(a)))/f,d=(f-(v(a)-g.left))/f,e=(f-(g.right-v(a)))/f,b>=0&&1>=b?h=b*this.scrollSpeed*-1:c>=0&&1>=c&&(h=c*this.scrollSpeed),d>=0&&1>=d?i=d*this.scrollSpeed*-1:e>=0&&1>=e&&(i=e*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(ia(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var rb=qb.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(a,b){qb.call(this,b),this.component=a},handleInteractionStart:function(a){var b,c,d,e=this.subjectEl;this.computeCoords(),a?(c={left:v(a),top:w(a)},d=c,e&&(b=n(e),d=D(d,b)),this.origHit=this.queryHit(d.left,d.top),e&&this.options.subjectCenter&&(this.origHit&&(b=C(this.origHit,b)||b),d=E(b)),this.coordAdjust=F(d,c)):(this.origHit=null,this.coordAdjust=null),qb.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},handleDragStart:function(a){var b;qb.prototype.handleDragStart.apply(this,arguments),b=this.queryHit(v(a),w(a)),b&&this.handleHitOver(b)},handleDrag:function(a,b,c){var d;qb.prototype.handleDrag.apply(this,arguments),d=this.queryHit(v(c),w(c)),Ba(d,this.hit)||(this.hit&&this.handleHitOut(),d&&this.handleHitOver(d))},handleDragEnd:function(){this.handleHitDone(),qb.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(a){var b=Ba(a,this.origHit);this.hit=a,this.trigger("hitOver",this.hit,b,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){qb.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},handleScrollEnd:function(){qb.prototype.handleScrollEnd.apply(this,arguments),this.computeCoords()},queryHit:function(a,b){return this.coordAdjust&&(a+=this.coordAdjust.left,b+=this.coordAdjust.top),this.component.queryHit(a,b)}}),sb=ya.extend(mb,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,
constructor:function(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()},start:function(b){this.isFollowing||(this.isFollowing=!0,this.y0=w(b),this.x0=v(b),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),x(b)?this.listenTo(a(document),"touchmove",this.handleMove):this.listenTo(a(document),"mousemove",this.handleMove))},stop:function(b,c){function d(){this.isAnimating=!1,e.removeElement(),this.top0=this.left0=null,c&&c()}var e=this,f=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(a(document)),b&&f&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:f,complete:d})):d())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}),a.addClass("fc-unselectable"),a.appendTo(this.parentEl)),a},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(a){this.topDelta=w(a)-this.y0,this.leftDelta=v(a)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),tb=Wa.Grid=ya.extend(mb,nb,{view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(a){this.view=a,this.isRTL=a.opt("isRTL"),this.elsByFill={},this.dayDragListener=this.buildDayDragListener(),this.initMouseIgnoring()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){this.start=a.start.clone(),this.end=a.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var a,b,c=this.view;this.eventTimeFormat=c.opt("eventTimeFormat")||c.opt("timeFormat")||this.computeEventTimeFormat(),a=c.opt("displayEventTime"),null==a&&(a=this.computeDisplayEventTime()),b=c.opt("displayEventEnd"),null==b&&(b=this.computeDisplayEventEnd()),this.displayEventTime=a,this.displayEventEnd=b},spanToSegs:function(a){},diffDates:function(a,b){return this.largeUnit?N(a,b,this.largeUnit):L(a,b)},prepareHits:function(){},releaseHits:function(){},queryHit:function(a,b){},getHitSpan:function(a){},getHitEl:function(a){},setElement:function(a){this.el=a,y(a),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(b,c){var d=this;this.el.on(b,function(b){return a(b.target).is(".fc-event-container *, .fc-more")||a(b.target).closest(".fc-popover").length?void 0:c.call(d,b)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(a(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(a(document))},dayMousedown:function(a){this.isIgnoringMouse||this.dayDragListener.startInteraction(a,{})},dayTouchStart:function(a){var b=this.view;(b.isSelected||b.selectedEvent)&&this.tempIgnoreMouse(),this.dayDragListener.startInteraction(a,{delay:this.view.opt("longPressDelay")})},buildDayDragListener:function(){var a,b,c=this,d=this.view,e=d.opt("selectable"),f=new rb(this,{scroll:d.opt("dragScroll"),interactionStart:function(){a=f.origHit},dragStart:function(){d.unselect()},hitOver:function(d,f,h){h&&(f||(a=null),e&&(b=c.computeSelection(c.getHitSpan(h),c.getHitSpan(d)),b?c.renderSelection(b):b===!1&&g()))},hitOut:function(){a=null,b=null,c.unrenderSelection(),h()},interactionEnd:function(e,f){f||(a&&!c.isIgnoringMouse&&d.triggerDayClick(c.getHitSpan(a),c.getHitEl(a),e),b&&d.reportSelection(b,e),h())}});return f},clearDragListeners:function(){this.dayDragListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);return this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?X(b.event):{};return c.start=a.start.clone(),c.end=a.end?a.end.clone():null,c.allDay=null,this.view.calendar.normalizeEventDates(c),c.className=(c.className||[]).concat("fc-helper"),b||(c.editable=!1),c},renderHelper:function(a,b){},unrenderHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(a,b){var c=this.computeSelectionSpan(a,b);return!(c&&!this.view.calendar.isSelectionSpanAllowed(c))&&c},computeSelectionSpan:function(a,b){var c=[a.start,a.end,b.start,b.end];return c.sort(ga),{start:c[0].clone(),end:c[3].clone()}},renderHighlight:function(a){this.renderFill("highlight",this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(a){},unrenderNowIndicator:function(){},renderFill:function(a,b){},unrenderFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var d,e=this,f=this[b+"SegEl"],g="",h=[];if(c.length){for(d=0;d<c.length;d++)g+=this.fillSegHtml(b,c[d]);a(g).each(function(b,d){var g=c[b],i=a(d);f&&(i=f.call(e,g,i)),i&&(i=a(i),i.is(e.fillSegTag)&&(g.el=i,h.push(g)))})}return h},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],e=c?c.call(this,b):[],f=ea(d?d.call(this,b):{});return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow(),d=["fc-"+$a[a.day()]];return 1==b.intervalDuration.as("months")&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):c>a?d.push("fc-past"):d.push("fc-future"),d}});tb.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var b,c=[],d=[];for(b=0;b<a.length;b++)(Da(a[b])?c:d).push(a[b]);this.segs=[].concat(this.renderBgEvents(c),this.renderFgEvents(d))},renderBgEvents:function(a){var b=this.eventsToSegs(a);return this.renderBgSegs(b)||b},renderFgEvents:function(a){var b=this.eventsToSegs(a);return this.renderFgSegs(b)||b},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},unrenderFgSegs:function(){},renderFgSegEls:function(b,c){var d,e=this.view,f="",g=[];if(b.length){for(d=0;d<b.length;d++)f+=this.fgSegHtml(b[d],c);a(f).each(function(c,d){var f=b[c],h=e.resolveEventEl(f.event,a(d));h&&(h.data("fc-seg",f),f.el=h,g.push(f))})}return g},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegCss:function(a){return{"background-color":this.getSegSkinCss(a)["background-color"]}},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){this.bindSegHandler("touchstart",this.handleSegTouchStart),this.bindSegHandler("touchend",this.handleSegTouchEnd),this.bindSegHandler("mouseenter",this.handleSegMouseover),this.bindSegHandler("mouseleave",this.handleSegMouseout),this.bindSegHandler("mousedown",this.handleSegMousedown),this.bindSegHandler("click",this.handleSegClick)},bindSegHandler:function(b,c){var d=this;this.el.on(b,".fc-event-container > *",function(b){var e=a(this).data("fc-seg");return!e||d.isDraggingSeg||d.isResizingSeg?void 0:c.call(d,e,b)})},handleSegClick:function(a,b){return this.view.trigger("eventClick",a.el[0],a.event,b)},handleSegMouseover:function(a,b){this.isIgnoringMouse||this.mousedOverSeg||(this.mousedOverSeg=a,a.el.addClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseover",a.el[0],a.event,b))},handleSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,a.el.removeClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseout",a.el[0],a.event,b))},handleSegMousedown:function(a,b){var c=this.startSegResize(a,b,{distance:5});!c&&this.view.isEventDraggable(a.event)&&this.buildSegDragListener(a).startInteraction(b,{distance:5})},handleSegTouchStart:function(a,b){var c,d=this.view,e=a.event,f=d.isEventSelected(e),g=d.isEventDraggable(e),h=d.isEventResizable(e),i=!1;f&&h&&(i=this.startSegResize(a,b)),i||!g&&!h||(c=g?this.buildSegDragListener(a):this.buildSegSelectListener(a),c.startInteraction(b,{delay:f?0:this.view.opt("longPressDelay")})),this.tempIgnoreMouse()},handleSegTouchEnd:function(a,b){this.tempIgnoreMouse()},startSegResize:function(b,c,d){return!!a(c.target).is(".fc-resizer")&&(this.buildSegResizeListener(b,a(c.target).is(".fc-start-resizer")).startInteraction(c,d),!0)},buildSegDragListener:function(a){var b,c,d,e=this,f=this.view,i=f.calendar,j=a.el,k=a.event;if(this.segDragListener)return this.segDragListener;var l=this.segDragListener=new rb(f,{scroll:f.opt("dragScroll"),subjectEl:j,subjectCenter:!0,interactionStart:function(d){b=!1,c=new sb(a.el,{additionalClass:"fc-dragging",parentEl:f.el,opacity:l.isTouch?null:f.opt("dragOpacity"),revertDuration:f.opt("dragRevertDuration"),zIndex:2}),c.hide(),c.start(d)},dragStart:function(c){l.isTouch&&!f.isEventSelected(k)&&f.selectEvent(k),b=!0,e.handleSegMouseout(a,c),e.segDragStart(a,c),f.hideEvent(k)},hitOver:function(b,h,j){var m;a.hit&&(j=a.hit),d=e.computeEventDrop(j.component.getHitSpan(j),b.component.getHitSpan(b),k),d&&!i.isEventSpanAllowed(e.eventToSpan(d),k)&&(g(),d=null),d&&(m=f.renderDrag(d,a))?(m.addClass("fc-dragging"),l.isTouch||e.applyDragOpacity(m),c.hide()):c.show(),h&&(d=null)},hitOut:function(){f.unrenderDrag(),c.show(),d=null},hitDone:function(){h()},interactionEnd:function(g){c.stop(!d,function(){b&&(f.unrenderDrag(),f.showEvent(k),e.segDragStop(a,g)),d&&f.reportEventDrop(k,d,this.largeUnit,j,g)}),e.segDragListener=null}});return l},buildSegSelectListener:function(a){var b=this,c=this.view,d=a.event;if(this.segDragListener)return this.segDragListener;var e=this.segDragListener=new qb({dragStart:function(a){e.isTouch&&!c.isEventSelected(d)&&c.selectEvent(d)},interactionEnd:function(a){b.segDragListener=null}});return e},segDragStart:function(a,b){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",a.el[0],a.event,b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var d,e,f=this.view.calendar,g=a.start,h=b.start;return g.hasTime()===h.hasTime()?(d=this.diffDates(h,g),c.allDay&&T(d)?(e={start:c.start.clone(),end:f.getEventEnd(c),allDay:!1},f.normalizeEventTimes(e)):e={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay},e.start.add(d),e.end&&e.end.add(d)):e={start:h.clone(),end:null,allDay:!h.hasTime()},e},applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");null!=b&&a.each(function(a,c){c.style.opacity=b})},externalDragStart:function(b,c){var d,e,f=this.view;f.opt("droppable")&&(d=a((c?c.item:null)||b.target),e=f.opt("dropAccept"),(a.isFunction(e)?e.call(d[0],d):d.is(e))&&(this.isDraggingExternal||this.listenToExternalDrag(d,b,c)))},listenToExternalDrag:function(a,b,c){var d,e=this,f=this.view.calendar,i=Ia(a),j=e.externalDragListener=new rb(this,{interactionStart:function(){e.isDraggingExternal=!0},hitOver:function(a){d=e.computeExternalDrop(a.component.getHitSpan(a),i),d&&!f.isExternalSpanAllowed(e.eventToSpan(d),d,i.eventProps)&&(g(),d=null),d&&e.renderDrag(d)},hitOut:function(){d=null},hitDone:function(){h(),e.unrenderDrag()},interactionEnd:function(b){d&&e.view.reportExternalDrop(i,d,a,b,c),e.isDraggingExternal=!1,e.externalDragListener=null}});j.startDrag(b)},computeExternalDrop:function(a,b){var c=this.view.calendar,d={start:c.applyTimezone(a.start),end:null};return b.startTime&&!d.start.hasTime()&&d.start.time(b.startTime),b.duration&&(d.end=d.start.clone().add(b.duration)),d},renderDrag:function(a,b){},unrenderDrag:function(){},buildSegResizeListener:function(a,b){var c,d,e=this,f=this.view,i=f.calendar,j=a.el,k=a.event,l=i.getEventEnd(k),m=this.segResizeListener=new rb(this,{scroll:f.opt("dragScroll"),subjectEl:j,interactionStart:function(){c=!1},dragStart:function(b){c=!0,e.handleSegMouseout(a,b),e.segResizeStart(a,b)},hitOver:function(c,h,j){var m=e.getHitSpan(j),n=e.getHitSpan(c);d=b?e.computeEventStartResize(m,n,k):e.computeEventEndResize(m,n,k),d&&(i.isEventSpanAllowed(e.eventToSpan(d),k)?d.start.isSame(k.start)&&d.end.isSame(l)&&(d=null):(g(),d=null)),d&&(f.hideEvent(k),e.renderEventResize(d,a))},hitOut:function(){d=null},hitDone:function(){e.unrenderEventResize(),f.showEvent(k),h()},interactionEnd:function(b){c&&e.segResizeStop(a,b),d&&f.reportEventResize(k,d,this.largeUnit,j,b),e.segResizeListener=null}});return m},segResizeStart:function(a,b){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var e,f,g=this.view.calendar,h=this.diffDates(c[a],b[a]);return e={start:d.start.clone(),end:g.getEventEnd(d),allDay:d.allDay},e.allDay&&T(h)&&(e.allDay=!1,g.normalizeEventTimes(e)),e[a].add(h),e.start.isBefore(e.end)||(f=this.minResizeDuration||(d.allDay?g.defaultAllDayEventDuration:g.defaultTimedEventDuration),"start"==a?e.start=e.end.clone().subtract(f):e.end=e.start.clone().add(f)),e},renderEventResize:function(a,b){},unrenderEventResize:function(){},getEventTimeText:function(a,b,c){return null==b&&(b=this.eventTimeFormat),null==c&&(c=this.displayEventEnd),this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=this.view,e=a.event,f=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(e.className,e.source?e.source.className:[]);return b&&f.push("fc-draggable"),c&&f.push("fc-resizable"),d.isEventSelected(e)&&f.push("fc-selected"),f},getSegSkinCss:function(a){var b=a.event,c=this.view,d=b.source||{},e=b.color,f=d.color,g=c.opt("eventColor");return{"background-color":b.backgroundColor||e||d.backgroundColor||f||c.opt("eventBackgroundColor")||g,"border-color":b.borderColor||e||d.borderColor||f||c.opt("eventBorderColor")||g,color:b.textColor||d.textColor||c.opt("eventTextColor")}},eventToSegs:function(a){return this.eventsToSegs([a])},eventToSpan:function(a){return this.eventToSpans(a)[0]},eventToSpans:function(a){var b=this.eventToRange(a);return this.eventRangeToSpans(b,a)},eventsToSegs:function(b,c){var d=this,e=Ga(b),f=[];return a.each(e,function(a,b){var e,g=[];for(e=0;e<b.length;e++)g.push(d.eventToRange(b[e]));if(Ea(b[0]))for(g=d.invertRanges(g),e=0;e<g.length;e++)f.push.apply(f,d.eventRangeToSegs(g[e],b[0],c));else for(e=0;e<g.length;e++)f.push.apply(f,d.eventRangeToSegs(g[e],b[e],c))}),f},eventToRange:function(a){return{start:a.start.clone().stripZone(),end:(a.end?a.end.clone():this.view.calendar.getDefaultEventEnd(null!=a.allDay?a.allDay:!a.start.hasTime(),a.start)).stripZone()}},eventRangeToSegs:function(a,b,c){var d,e=this.eventRangeToSpans(a,b),f=[];for(d=0;d<e.length;d++)f.push.apply(f,this.eventSpanToSegs(e[d],b,c));return f},eventRangeToSpans:function(b,c){return[a.extend({},b)]},eventSpanToSegs:function(a,b,c){var d,e,f=c?c(a):this.spanToSegs(a);for(d=0;d<f.length;d++)e=f[d],e.event=b,e.eventStartMS=+a.start,e.eventDurationMS=a.end-a.start;return f},invertRanges:function(a){var b,c,d=this.view,e=d.start.clone(),f=d.end.clone(),g=[],h=e;for(a.sort(Ha),b=0;b<a.length;b++)c=a[b],c.start>h&&g.push({start:h,end:c.start}),h=c.end;return f>h&&g.push({start:h,end:f}),g},sortEventSegs:function(a){a.sort(ia(this,"compareEventSegs"))},compareEventSegs:function(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||H(a.event,b.event,this.view.eventOrderSpecs)}}),Wa.isBgEvent=Da,Wa.dataAttrPrefix="";var ub=Wa.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var a,b,c,d=this.view,e=this.start.clone(),f=-1,g=[],h=[];e.isBefore(this.end);)d.isHiddenDay(e)?g.push(f+.5):(f++,g.push(f),h.push(e.clone())),e.add(1,"days");if(this.breakOnWeeks){for(b=h[0].day(),a=1;a<h.length&&h[a].day()!=b;a++);c=Math.ceil(h.length/a)}else c=1,a=h.length;this.dayDates=h,this.dayIndices=g,this.daysPerRow=a,this.rowCnt=c,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(a,b){return this.dayDates[this.getCellDayIndex(a,b)].clone()},getCellRange:function(a,b){var c=this.getCellDate(a,b),d=c.clone().add(1,"days");return{start:c,end:d}},getCellDayIndex:function(a,b){return a*this.daysPerRow+this.getColDayIndex(b)},getColDayIndex:function(a){return this.isRTL?this.colCnt-1-a:a},getDateDayIndex:function(a){var b=this.dayIndices,c=a.diff(this.start,"days");return 0>c?b[0]-1:c>=b.length?b[b.length-1]+1:b[c]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(a){var b,c,d,e,f,g=this.daysPerRow,h=this.view.computeDayRange(a),i=this.getDateDayIndex(h.start),j=this.getDateDayIndex(h.end.clone().subtract(1,"days")),k=[];for(b=0;b<this.rowCnt;b++)c=b*g,d=c+g-1,e=Math.max(i,c),f=Math.min(j,d),e=Math.ceil(e),f=Math.floor(f),f>=e&&k.push({row:b,firstRowDayIndex:e-c,lastRowDayIndex:f-c,isStart:e===i,isEnd:f===j});return k},sliceRangeByDay:function(a){var b,c,d,e,f,g,h=this.daysPerRow,i=this.view.computeDayRange(a),j=this.getDateDayIndex(i.start),k=this.getDateDayIndex(i.end.clone().subtract(1,"days")),l=[];for(b=0;b<this.rowCnt;b++)for(c=b*h,d=c+h-1,e=c;d>=e;e++)f=Math.max(j,e),g=Math.min(k,e),f=Math.ceil(f),g=Math.floor(g),g>=f&&l.push({row:b,firstRowDayIndex:f-c,lastRowDayIndex:g-c,isStart:f===j,isEnd:g===k});return l},renderHeadHtml:function(){var a=this.view;return'<div class="fc-row '+a.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var a,b,c=[];for(a=0;a<this.colCnt;a++)b=this.getCellDate(0,a),c.push(this.renderHeadDateCellHtml(b));return c.join("")},renderHeadDateCellHtml:function(a,b,c){var d=this.view;return'<th class="fc-day-header '+d.widgetHeaderClass+" fc-"+$a[a.day()]+'"'+(1==this.rowCnt?' data-date="'+a.format("YYYY-MM-DD")+'"':"")+(b>1?' colspan="'+b+'"':"")+(c?" "+c:"")+">"+ca(a.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(a))+this.renderBgCellsHtml(a)+(this.isRTL?this.renderBgIntroHtml(a):"")+"</tr>"},renderBgIntroHtml:function(a){return this.renderIntroHtml()},renderBgCellsHtml:function(a){var b,c,d=[];for(b=0;b<this.colCnt;b++)c=this.getCellDate(a,b),d.push(this.renderBgCellHtml(c));return d.join("")},renderBgCellHtml:function(a,b){var c=this.view,d=this.getDayClasses(a);return d.unshift("fc-day",c.widgetContentClass),'<td class="'+d.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"'+(b?" "+b:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(a){var b=this.renderIntroHtml();b&&(this.isRTL?a.append(b):a.prepend(b))}},vb=Wa.DayGrid=tb.extend(ub,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(a){var b,c,d=this.view,e=this.rowCnt,f=this.colCnt,g="";for(b=0;e>b;b++)g+=this.renderDayRowHtml(b,a);for(this.el.html(g),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new pb({els:this.rowEls,isVertical:!0}),this.colCoordCache=new pb({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),b=0;e>b;b++)for(c=0;f>c;c++)d.trigger("dayRender",null,this.getCellDate(b,c),this.getCellEl(b,c))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(!0),b=this.eventsToSegs(a);this.renderFill("businessHours",b,"bgevent")},renderDayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(a)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(a))+this.renderNumberCellsHtml(a)+(this.isRTL?this.renderNumberIntroHtml(a):"")+"</tr>"},renderNumberIntroHtml:function(a){return this.renderIntroHtml()},renderNumberCellsHtml:function(a){var b,c,d=[];for(b=0;b<this.colCnt;b++)c=this.getCellDate(a,b),d.push(this.renderNumberCellHtml(c));return d.join("")},renderNumberCellHtml:function(a){var b;return this.view.dayNumbersVisible?(b=this.getDayClasses(a),b.unshift("fc-day-number"),'<td class="'+b.join(" ")+'" data-date="'+a.format()+'">'+a.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(a){var b,c,d=this.sliceRangeByRow(a);for(b=0;b<d.length;b++)c=d[b],this.isRTL?(c.leftCol=this.daysPerRow-1-c.lastRowDayIndex,c.rightCol=this.daysPerRow-1-c.firstRowDayIndex):(c.leftCol=c.firstRowDayIndex,c.rightCol=c.lastRowDayIndex);return d},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(a,b){var c=this.colCoordCache.getHorizontalIndex(a),d=this.rowCoordCache.getVerticalIndex(b);return null!=d&&null!=c?this.getCellHit(d,c):void 0},getHitSpan:function(a){return this.getCellRange(a.row,a.col)},getHitEl:function(a){return this.getCellEl(a.row,a.col)},getCellHit:function(a,b){return{row:a,col:b,component:this,left:this.colCoordCache.getLeftOffset(b),right:this.colCoordCache.getRightOffset(b),top:this.rowCoordCache.getTopOffset(a),bottom:this.rowCoordCache.getBottomOffset(a)}},getCellEl:function(a,b){return this.cellEls.eq(a*this.colCnt+b)},renderDrag:function(a,b){return this.renderHighlight(this.eventToSpan(a)),b&&!b.el.closest(this.el).length?this.renderEventLocationHelper(a,b):void 0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(a,b){return this.renderHighlight(this.eventToSpan(a)),this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(b,c){var d,e=[],f=this.eventToSegs(b);return f=this.renderFgSegEls(f),d=this.renderSegRows(f),this.rowEls.each(function(b,f){var g,h=a(f),i=a('<div class="fc-helper-skeleton"><table/></div>');g=c&&c.row===b?c.el.position().top:h.find(".fc-content-skeleton tbody").position().top,i.css("top",g).find("table").append(d[b].tbodyEl),h.append(i),e.push(i[0])}),this.helperEls=a(e)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c,d){var e,f,g,h=[];for(c=this.renderFillSegEls(b,c),e=0;e<c.length;e++)f=c[e],g=this.renderFillRow(b,f,d),this.rowEls.eq(f.row).append(g),h.push(g[0]);return this.elsByFill[b]=a(h),c},renderFillRow:function(b,c,d){var e,f,g=this.colCnt,h=c.leftCol,i=c.rightCol+1;return d=d||b.toLowerCase(),e=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),f=e.find("tr"),h>0&&f.append('<td colspan="'+h+'"/>'),f.append(c.el.attr("colspan",i-h)),g>i&&f.append('<td colspan="'+(g-i)+'"/>'),this.bookendCells(f),e}});vb.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),tb.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return tb.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return tb.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},unrenderFgSegs:function(){for(var a,b=this.rowStructs||[];a=b.pop();)a.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b,c,d=[];for(b=this.groupSegRows(a),c=0;c<b.length;c++)d.push(this.renderSegRow(c,b[c]));return d},fgSegHtml:function(a,b){var c,d,e=this.view,f=a.event,g=e.isEventDraggable(f),h=!b&&f.allDay&&a.isStart&&e.isEventResizableFromStart(f),i=!b&&f.allDay&&a.isEnd&&e.isEventResizableFromEnd(f),j=this.getSegClasses(a,g,h||i),k=ea(this.getSegSkinCss(a)),l="";return j.unshift("fc-day-grid-event","fc-h-event"),a.isStart&&(c=this.getEventTimeText(f),c&&(l='<span class="fc-time">'+ca(c)+"</span>")),d='<span class="fc-title">'+(ca(f.title||"")||"&nbsp;")+"</span>",'<a class="'+j.join(" ")+'"'+(f.url?' href="'+ca(f.url)+'"':"")+(k?' style="'+k+'"':"")+'><div class="fc-content">'+(this.isRTL?d+" "+l:l+" "+d)+"</div>"+(h?'<div class="fc-resizer fc-start-resizer" />':"")+(i?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(b,c){function d(b){for(;b>g;)k=(r[e-1]||[])[g],k?k.attr("rowspan",parseInt(k.attr("rowspan")||1,10)+1):(k=a("<td/>"),h.append(k)),q[e][g]=k,r[e][g]=k,g++}var e,f,g,h,i,j,k,l=this.colCnt,m=this.buildSegLevels(c),n=Math.max(1,m.length),o=a("<tbody/>"),p=[],q=[],r=[];for(e=0;n>e;e++){if(f=m[e],g=0,h=a("<tr/>"),p.push([]),q.push([]),r.push([]),f)for(i=0;i<f.length;i++){for(j=f[i],d(j.leftCol),k=a('<td class="fc-event-container"/>').append(j.el),j.leftCol!=j.rightCol?k.attr("colspan",j.rightCol-j.leftCol+1):r[e][g]=k;g<=j.rightCol;)q[e][g]=k,p[e][g]=j,g++;h.append(k)}d(l),this.bookendCells(h),o.append(h)}return{row:b,tbodyEl:o,cellMatrix:q,segMatrix:p,segLevels:m,segs:c}},buildSegLevels:function(a){var b,c,d,e=[];for(this.sortEventSegs(a),b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&Ja(c,e[d]);d++);c.level=d,(e[d]||(e[d]=[])).push(c)}for(d=0;d<e.length;d++)e[d].sort(Ka);return e},groupSegRows:function(a){var b,c=[];for(b=0;b<this.rowCnt;b++)c.push([]);for(b=0;b<a.length;b++)c[a[b].row].push(a[b]);return c}}),vb.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b,c,d=this.rowStructs||[];for(b=0;b<d.length;b++)this.unlimitRow(b),c=!!a&&("number"==typeof a?a:this.computeRowLevelLimit(b)),c!==!1&&this.limitRow(b,c)},computeRowLevelLimit:function(b){function c(b,c){f=Math.max(f,a(c).outerHeight())}var d,e,f,g=this.rowEls.eq(b),h=g.height(),i=this.rowStructs[b].tbodyEl.children();for(d=0;d<i.length;d++)if(e=i.eq(d).removeClass("fc-limited"),f=0,e.find("> td > :first-child").each(c),e.position().top+f>h)return d;return!1},limitRow:function(b,c){function d(d){for(;d>w;)j=t.getCellSegs(b,w,c),j.length&&(m=f[c-1][w],s=t.renderMoreLink(b,w,j),r=a("<div/>").append(s),m.append(r),v.push(r[0])),w++}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u=this.rowStructs[b],v=[],w=0;if(c&&c<u.segLevels.length){for(e=u.segLevels[c-1],f=u.cellMatrix,g=u.tbodyEl.children().slice(c).addClass("fc-limited").get(),h=0;h<e.length;h++){for(i=e[h],d(i.leftCol),l=[],k=0;w<=i.rightCol;)j=this.getCellSegs(b,w,c),l.push(j),k+=j.length,w++;if(k){for(m=f[c-1][i.leftCol],n=m.attr("rowspan")||1,o=[],p=0;p<l.length;p++)q=a('<td class="fc-more-cell"/>').attr("rowspan",n),j=l[p],s=this.renderMoreLink(b,i.leftCol+p,[i].concat(j)),r=a("<div/>").append(s),q.append(r),o.push(q[0]),v.push(q[0]);m.addClass("fc-limited").after(a(o)),g.push(m[0])}}d(this.colCnt),u.moreEls=a(v),u.limitedEls=a(g)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c,d){var e=this,f=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(g){var h=f.opt("eventLimitClick"),i=e.getCellDate(b,c),j=a(this),k=e.getCellEl(b,c),l=e.getCellSegs(b,c),m=e.resliceDaySegs(l,i),n=e.resliceDaySegs(d,i);"function"==typeof h&&(h=f.trigger("eventLimitClick",null,{date:i,dayEl:k,moreEl:j,segs:m,hiddenSegs:n},g)),"popover"===h?e.showSegPopover(b,c,j,m):"string"==typeof h&&f.calendar.zoomTo(i,h)})},showSegPopover:function(a,b,c,d){var e,f,g=this,h=this.view,i=c.parent();e=1==this.rowCnt?h.el:this.rowEls.eq(a),f={className:"fc-more-popover",content:this.renderSegPopoverContent(a,b,d),parentEl:this.el,top:e.offset().top,autoHide:!0,viewportConstrain:h.opt("popoverViewportConstrain"),hide:function(){g.segPopover.removeElement(),g.segPopover=null,g.popoverSegs=null}},this.isRTL?f.right=i.offset().left+i.outerWidth()+1:f.left=i.offset().left-1,this.segPopover=new ob(f),this.segPopover.show()},renderSegPopoverContent:function(b,c,d){var e,f=this.view,g=f.opt("theme"),h=this.getCellDate(b,c).format(f.opt("dayPopoverFormat")),i=a('<div class="fc-header '+f.widgetHeaderClass+'"><span class="fc-close '+(g?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+ca(h)+'</span><div class="fc-clear"/></div><div class="fc-body '+f.widgetContentClass+'"><div class="fc-event-container"></div></div>'),j=i.find(".fc-event-container");for(d=this.renderFgSegEls(d,!0),this.popoverSegs=d,e=0;e<d.length;e++)this.prepareHits(),d[e].hit=this.getCellHit(b,c),this.releaseHits(),j.append(d[e].el);return i},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone(),f=e.clone().add(1,"days"),g={start:e,end:f};return b=this.eventsToSegs(d,function(a){var b=K(a,g);return b?[b]:[]}),this.sortEventSegs(b),b},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"==typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b,c){for(var d,e=this.rowStructs[a].segMatrix,f=c||0,g=[];f<e.length;)d=e[f][b],d&&g.push(d),f++;return g}});var wb=Wa.TimeGrid=tb.extend(ub,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,
maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){tb.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new pb({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new pb({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var a,c,d,e=this.view,f=this.isRTL,g="",h=b.duration(+this.minTime);h<this.maxTime;)a=this.start.clone().time(h),c=ha(R(h,this.labelInterval)),d='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(c?"<span>"+ca(a.format(this.labelFormat))+"</span>":"")+"</td>",g+='<tr data-time="'+a.format("HH:mm:ss")+'"'+(c?"":' class="fc-minor"')+">"+(f?"":d)+'<td class="'+e.widgetContentClass+'"/>'+(f?d:"")+"</tr>",h.add(this.slotDuration);return g},processOptions:function(){var c,d=this.view,e=d.opt("slotDuration"),f=d.opt("snapDuration");e=b.duration(e),f=f?b.duration(f):e,this.slotDuration=e,this.snapDuration=f,this.snapsPerSlot=e/f,this.minResizeDuration=f,this.minTime=b.duration(d.opt("minTime")),this.maxTime=b.duration(d.opt("maxTime")),c=d.opt("slotLabelFormat"),a.isArray(c)&&(c=c[c.length-1]),this.labelFormat=c||d.opt("axisFormat")||d.opt("smallTimeFormat"),c=d.opt("slotLabelInterval"),this.labelInterval=c?b.duration(c):this.computeLabelInterval(e)},computeLabelInterval:function(a){var c,d,e;for(c=Nb.length-1;c>=0;c--)if(d=b.duration(Nb[c]),e=R(d,a),ha(e)&&e>1)return d;return b.duration(a)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(a,b){var c=this.snapsPerSlot,d=this.colCoordCache,e=this.slatCoordCache,f=d.getHorizontalIndex(a),g=e.getVerticalIndex(b);if(null!=f&&null!=g){var h=e.getTopOffset(g),i=e.getHeight(g),j=(b-h)/i,k=Math.floor(j*c),l=g*c+k,m=h+k/c*i,n=h+(k+1)/c*i;return{col:f,snap:l,component:this,left:d.getLeftOffset(f),right:d.getRightOffset(f),top:m,bottom:n}}},getHitSpan:function(a){var b,c=this.getCellDate(0,a.col),d=this.computeSnapTime(a.snap);return c.time(d),b=c.clone().add(this.snapDuration),{start:c,end:b}},getHitEl:function(a){return this.colEls.eq(a.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(a){return b.duration(this.minTime+this.snapDuration*a)},spanToSegs:function(a){var b,c=this.sliceRangeByTimes(a);for(b=0;b<c.length;b++)this.isRTL?c[b].col=this.daysPerRow-1-c[b].dayIndex:c[b].col=c[b].dayIndex;return c},sliceRangeByTimes:function(a){var b,c,d,e,f=[];for(c=0;c<this.daysPerRow;c++)d=this.dayDates[c].clone(),e={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)},b=K(a,e),b&&(b.dayIndex=c,f.push(b));return f},updateSize:function(a){this.slatCoordCache.build(),a&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a-c.clone().stripTime()))},computeTimeTop:function(a){var b,c,d=this.slatEls.length,e=(a-this.minTime)/this.slotDuration;return e=Math.max(0,e),e=Math.min(d,e),b=Math.floor(e),b=Math.min(b,d-1),c=e-b,this.slatCoordCache.getTopPosition(b)+this.slatCoordCache.getHeight(b)*c},renderDrag:function(a,b){return b?this.renderEventLocationHelper(a,b):void this.renderHighlight(this.eventToSpan(a))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(a,b){return this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(a,b){return this.renderHelperSegs(this.eventToSegs(a),b)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(),b=this.eventsToSegs(a);this.renderBusinessSegs(b)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(b){var c,d=this.spanToSegs({start:b,end:b}),e=this.computeDateTop(b,b),f=[];for(c=0;c<d.length;c++)f.push(a('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",e).appendTo(this.colContainerEls.eq(d[c].col))[0]);d.length>0&&f.push(a('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",e).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=a(f)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderEventLocationHelper(a):this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(a){this.renderHighlightSegs(this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});wb.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var b,c,d="";for(b=0;b<this.colCnt;b++)d+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';c=a('<div class="fc-content-skeleton"><table><tr>'+d+"</tr></table></div>"),this.colContainerEls=c.find(".fc-content-col"),this.helperContainerEls=c.find(".fc-helper-container"),this.fgContainerEls=c.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=c.find(".fc-bgevent-container"),this.highlightContainerEls=c.find(".fc-highlight-container"),this.businessContainerEls=c.find(".fc-business-container"),this.bookendCells(c.find("tr")),this.el.append(c)},renderFgSegs:function(a){return a=this.renderFgSegsIntoContainers(a,this.fgContainerEls),this.fgSegs=a,a},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(b,c){var d,e,f,g=[];for(b=this.renderFgSegsIntoContainers(b,this.helperContainerEls),d=0;d<b.length;d++)e=b[d],c&&c.col===e.col&&(f=c.el,e.el.css({left:f.css("left"),right:f.css("right"),"margin-left":f.css("margin-left"),"margin-right":f.css("margin-right")})),g.push(e.el[0]);return this.helperSegs=b,a(g)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(a){return a=this.renderFillSegEls("bgEvent",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.bgContainerEls),this.bgSegs=a,a},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(a){a=this.renderFillSegEls("highlight",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.highlightContainerEls),this.highlightSegs=a},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(a){a=this.renderFillSegEls("businessHours",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.businessContainerEls),this.businessSegs=a},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(a){var b,c=[];for(b=0;b<this.colCnt;b++)c.push([]);for(b=0;b<a.length;b++)c[a[b].col].push(a[b]);return c},attachSegsByCol:function(a,b){var c,d,e;for(c=0;c<this.colCnt;c++)for(d=a[c],e=0;e<d.length;e++)b.eq(c).append(d[e].el)},unrenderNamedSegs:function(a){var b,c=this[a];if(c){for(b=0;b<c.length;b++)c[b].el.remove();this[a]=null}},renderFgSegsIntoContainers:function(a,b){var c,d;for(a=this.renderFgSegEls(a),c=this.groupSegsByCol(a),d=0;d<this.colCnt;d++)this.updateFgSegCoords(c[d]);return this.attachSegsByCol(c,b),a},fgSegHtml:function(a,b){var c,d,e,f=this.view,g=a.event,h=f.isEventDraggable(g),i=!b&&a.isStart&&f.isEventResizableFromStart(g),j=!b&&a.isEnd&&f.isEventResizableFromEnd(g),k=this.getSegClasses(a,h,i||j),l=ea(this.getSegSkinCss(a));return k.unshift("fc-time-grid-event","fc-v-event"),f.isMultiDayEvent(g)?(a.isStart||a.isEnd)&&(c=this.getEventTimeText(a),d=this.getEventTimeText(a,"LT"),e=this.getEventTimeText(a,null,!1)):(c=this.getEventTimeText(g),d=this.getEventTimeText(g,"LT"),e=this.getEventTimeText(g,null,!1)),'<a class="'+k.join(" ")+'"'+(g.url?' href="'+ca(g.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(c?'<div class="fc-time" data-start="'+ca(e)+'" data-full="'+ca(d)+'"><span>'+ca(c)+"</span></div>":"")+(g.title?'<div class="fc-title">'+ca(g.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(j?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(a){this.computeSegVerticals(a),this.assignSegVerticals(a)},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},assignSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.el.css(this.generateSegVerticalCss(c))},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},updateFgSegCoords:function(a){this.computeSegVerticals(a),this.computeFgSegHorizontals(a),this.assignSegVerticals(a),this.assignFgSegHorizontals(a)},computeFgSegHorizontals:function(a){var b,c,d;if(this.sortEventSegs(a),b=La(a),Ma(b),c=b[0]){for(d=0;d<c.length;d++)Na(c[d]);for(d=0;d<c.length;d++)this.computeFgSegForwardBack(c[d],0,0)}},computeFgSegForwardBack:function(a,b,c){var d,e=a.forwardSegs;if(void 0===a.forwardCoord)for(e.length?(this.sortForwardSegs(e),this.computeFgSegForwardBack(e[0],b+1,c),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),d=0;d<e.length;d++)this.computeFgSegForwardBack(e[d],0,a.forwardCoord)},sortForwardSegs:function(a){a.sort(ia(this,"compareForwardSegs"))},compareForwardSegs:function(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||this.compareEventSegs(a,b)},assignFgSegHorizontals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.el.css(this.generateFgSegHorizontalCss(c)),c.bottom-c.top<30&&c.el.addClass("fc-short")},generateFgSegHorizontalCss:function(a){var b,c,d=this.view.opt("slotEventOverlap"),e=a.backwardCoord,f=a.forwardCoord,g=this.generateSegVerticalCss(a);return d&&(f=Math.min(1,e+2*(f-e))),this.isRTL?(b=1-f,c=e):(b=e,c=1-f),g.zIndex=a.level+1,g.left=100*b+"%",g.right=100*c+"%",d&&a.forwardPressure&&(g[this.isRTL?"marginLeft":"marginRight"]=20),g}});var xb=Wa.View=ya.extend(lb,mb,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(a,c,d,e){this.calendar=a,this.type=this.name=c,this.options=d,this.intervalDuration=e||b.duration(1,"day"),this.nextDayThreshold=b.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=G(this.opt("eventOrder")),this.initialize()},initialize:function(){},opt:function(a){return this.options[a]},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(b){a.extend(this,b),this.updateTitle()},computeRange:function(a){var b,c,d=O(this.intervalDuration),e=a.clone().startOf(d),f=e.clone().add(this.intervalDuration);return/year|month|week|day/.test(d)?(e.stripTime(),f.stripTime()):(e.hasTime()||(e=this.calendar.time(0)),f.hasTime()||(f=this.calendar.time(0))),b=e.clone(),b=this.skipHiddenDays(b),c=f.clone(),c=this.skipHiddenDays(c,-1,!0),{intervalUnit:d,intervalStart:e,intervalEnd:f,start:b,end:c}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day")),a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;return d.hasTime()||(d=d.clone().subtract(1)),ta(a.start,d,b,c,this.opt("isRTL"))},setElement:function(a){this.el=a,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(a){var b=this,c=null;return this.displaying&&(c=this.queryScroll()),this.calendar.freezeContentHeight(),ka(this.clear(),function(){return b.displaying=ka(b.displayView(a),function(){b.forceScroll(b.computeInitialScroll(c)),b.calendar.unfreezeContentHeight(),b.triggerRender()})})},clear:function(){var b=this,c=this.displaying;return c?ka(c,function(){return b.displaying=null,b.clearEvents(),b.clearView()}):a.when()},displayView:function(a){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),a&&this.setDate(a),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(a(document),"mousedown",this.handleDocumentMousedown),this.listenTo(a(document),"touchstart",this.processUnselect)},unbindGlobalHandlers:function(){this.stopListeningTo(a(document))},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var a,c,d,e=this;this.opt("nowIndicator")&&(a=this.getNowIndicatorUnit(),a&&(c=ia(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,d=this.initialNowDate.clone().startOf(a).add(1,a)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null,c(),d=+b.duration(1,a),d=Math.max(100,d),e.nowIndicatorIntervalID=setInterval(c,d)},d)))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(a){},unrenderNowIndicator:function(){},updateSize:function(a){var b;a&&(b=this.queryScroll()),this.updateHeight(a),this.updateWidth(a),this.updateNowIndicator(),a&&this.setScroll(b)},updateWidth:function(a){},updateHeight:function(a){var b=this.calendar;this.setHeight(b.getSuggestedViewHeight(),b.isHeightAuto())},setHeight:function(a,b){},computeInitialScroll:function(a){return 0},queryScroll:function(){},setScroll:function(a){},forceScroll:function(a){var b=this;this.setScroll(a),setTimeout(function(){b.setScroll(a)},0)},displayEvents:function(a){var b=this.queryScroll();this.clearEvents(),this.renderEvents(a),this.isEventsRendered=!0,this.setScroll(b),this.triggerEventRender()},clearEvents:function(){var a;this.isEventsRendered&&(a=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(a),this.isEventsRendered=!1)},renderEvents:function(a){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var c,d=this.getEventSegs();for(c=0;c<d.length;c++)b&&d[c].event._id!==b._id||d[c].el&&a.call(this,d[c])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return ba(a.startEditable,b.startEditable,this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventDrop(a,g.dateDelta,h,d,e),f.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(b,c,d,e,f){var g,h,i=b.eventProps;i&&(g=a.extend({},i,c),h=this.calendar.renderEvent(g,b.stick)[0]),this.triggerExternalDrop(h,c,d,e,f)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e),a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},unrenderDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return ba(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventResize(a,g.durationDelta,h,d,e),f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b),this.renderSelection(a),this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0,this.triggerSelect(a,b)},triggerSelect:function(a,b){this.trigger("select",null,this.calendar.applyTimezone(a.start),this.calendar.applyTimezone(a.end),b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,a))},unrenderSelection:function(){},selectEvent:function(a){this.selectedEvent&&this.selectedEvent===a||(this.unselectEvent(),this.renderedEventSegEach(function(a){a.el.addClass("fc-selected")},a),this.selectedEvent=a)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(a){a.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(a){return this.selectedEvent&&this.selectedEvent._id===a._id},handleDocumentMousedown:function(a){u(a)&&this.processUnselect(a)},processUnselect:function(a){this.processRangeUnselect(a),this.processEventUnselect(a)},processRangeUnselect:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))},processEventUnselect:function(b){this.selectedEvent&&(a(b.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(a,b,c){this.trigger("dayClick",b,this.calendar.applyTimezone(a.start),c)},initHiddenDays:function(){var b,c=this.opt("hiddenDays")||[],d=[],e=0;for(this.opt("weekends")===!1&&c.push(0,6),b=0;7>b;b++)(d[b]=-1!==a.inArray(b,c))||e++;if(!e)throw"invalid hiddenDays";this.isHiddenDayHash=d},isHiddenDay:function(a){return b.isMoment(a)&&(a=a.day()),this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){var d=a.clone();for(b=b||1;this.isHiddenDayHash[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d},computeDayRange:function(a){var b,c=a.start.clone().stripTime(),d=a.end,e=null;return d&&(e=d.clone().stripTime(),b=+d.time(),b&&b>=this.nextDayThreshold&&e.add(1,"days")),(!d||c>=e)&&(e=c.clone().add(1,"days")),{start:c,end:e}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}}),yb=Wa.Scroller=ya.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(a){a=a||{},this.overflowX=a.overflowX||a.overflow||"auto",this.overflowY=a.overflowY||a.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=a('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(a){var b=this.overflowX,c=this.overflowY;a=a||this.getScrollbarWidths(),"auto"===b&&(b=a.top||a.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===c&&(c=a.left||a.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":b,"overflow-y":c})},setHeight:function(a){this.scrollEl.height(a)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(a){this.scrollEl.scrollTop(a)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return q(this.scrollEl)}}),zb=Wa.Calendar=ya.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Qa,initialize:function(){},initOptions:function(a){var b,e,f,g;a=d(a),b=a.lang,e=Ab[b],e||(b=zb.defaults.lang,e=Ab[b]||{}),f=ba(a.isRTL,e.isRTL,zb.defaults.isRTL),g=f?zb.rtlDefaults:{},this.dirDefaults=g,this.langDefaults=e,this.overrides=a,this.options=c([zb.defaults,g,e,a]),Ra(this.options),this.viewSpecCache={}},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},getUnitViewSpec:function(b){var c,d,e;if(-1!=a.inArray(b,_a))for(c=this.header.getViewsWithButtons(),a.each(Wa.views,function(a){c.push(a)}),d=0;d<c.length;d++)if(e=this.getViewSpec(c[d]),e&&e.singleUnit==b)return e},buildViewSpec:function(a){for(var d,e,f,g,h=this.overrides.views||{},i=[],j=[],k=[],l=a;l;)d=Xa[l],e=h[l],l=null,"function"==typeof d&&(d={"class":d}),d&&(i.unshift(d),j.unshift(d.defaults||{}),f=f||d.duration,l=l||d.type),e&&(k.unshift(e),f=f||e.duration,l=l||e.type);return d=W(i),d.type=a,!!d["class"]&&(f&&(f=b.duration(f),f.valueOf()&&(d.duration=f,g=O(f),1===f.as(g)&&(d.singleUnit=g,k.unshift(h[g]||{})))),d.defaults=c(j),d.overrides=c(k),this.buildViewSpecOptions(d),this.buildViewSpecButtonText(d,a),d)},buildViewSpecOptions:function(a){a.options=c([zb.defaults,a.defaults,this.dirDefaults,this.langDefaults,this.overrides,a.overrides]),Ra(a.options)},buildViewSpecButtonText:function(a,b){function c(c){var d=c.buttonText||{};return d[b]||(a.singleUnit?d[a.singleUnit]:null)}a.buttonTextOverride=c(this.overrides)||a.overrides.buttonText,a.buttonTextDefault=c(this.langDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(zb.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b["class"](this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(a,b){var c,d=this.moment(a).stripZone();return c=b?this.moment(b).stripZone():d.hasTime()?d.clone().add(this.defaultTimedEventDuration):d.clone().add(this.defaultAllDayEventDuration),{start:d,end:c}}});zb.mixin(lb),zb.defaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200,longPressDelay:1e3},zb.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},zb.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Ab=Wa.langs={};Wa.datepickerLang=function(b,c,d){var e=Ab[b]||(Ab[b]={});e.isRTL=d.isRTL,e.weekNumberTitle=d.weekHeader,a.each(Bb,function(a,b){e[a]=b(d)}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},Wa.lang=function(b,d){var e,f;e=Ab[b]||(Ab[b]={}),d&&(e=Ab[b]=c([e,d])),f=Sa(b),a.each(Cb,function(a,b){null==e[a]&&(e[a]=b(f,e))}),zb.defaults.lang=b};var Bb={buttonText:function(a){return{prev:da(a.prevText),next:da(a.nextText),today:da(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},Cb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),b.isRTL?c+=" ddd":c="ddd "+c,c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},Db={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};Wa.lang("en",zb.englishDefaults),Wa.sourceNormalizers=[],Wa.sourceFetchers=[];var Eb={dataType:"json",cache:!1},Fb=1;zb.prototype.normalizeEvent=function(a){},zb.prototype.getPeerEvents=function(a,b){var c,d,e=this.getEventCache(),f=[];for(c=0;c<e.length;c++)d=e[c],b&&b._id===d._id||f.push(d);return f};var Gb=Wa.BasicView=xb.extend({scroller:null,dayGridClass:vb,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new yb({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){var a=this.dayGridClass.extend(Hb);return new a(this)},setRange:function(a){xb.prototype.setRange.call(this,a),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(a)},computeRange:function(a){var b=xb.prototype.computeRange.call(this,a);return/year|month/.test(b.intervalUnit)&&(b.start.startOf("week"),b.start=this.skipHiddenDays(b.start),b.end.weekday()&&(b.end.add(1,"week").startOf("week"),b.end=this.skipHiddenDays(b.end,-1,!0))),b},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var b=this.scroller.el.addClass("fc-day-grid-container"),c=a('<div class="fc-day-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b),this.dayGrid.setElement(c),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=k(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c,d,g=this.opt("eventLimit");this.scroller.clear(),f(this.headRowEl),this.dayGrid.removeSegPopover(),g&&"number"==typeof g&&this.dayGrid.limitRows(g),c=this.computeScrollerHeight(a),this.setGridHeight(c,b),g&&"number"!=typeof g&&this.dayGrid.limitRows(g),b||(this.scroller.setHeight(c),d=this.scroller.getScrollbarWidths(),(d.left||d.right)&&(e(this.headRowEl,d),c=this.computeScrollerHeight(a),this.scroller.setHeight(c)),this.scroller.lockOverflow(d))},computeScrollerHeight:function(a){return a-l(this.el,this.scroller.el)},setGridHeight:function(a,b){b?j(this.dayGrid.rowEls):i(this.dayGrid.rowEls,a,!0)},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(a){this.scroller.setScrollTop(a)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits();
},queryHit:function(a,b){return this.dayGrid.queryHit(a,b)},getHitSpan:function(a){return this.dayGrid.getHitSpan(a)},getHitEl:function(a){return this.dayGrid.getHitEl(a)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Hb={renderHeadIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<th class="fc-week-number '+a.widgetHeaderClass+'" '+a.weekNumberStyleAttr()+"><span>"+ca(a.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(a){var b=this.view;return b.weekNumbersVisible?'<td class="fc-week-number" '+b.weekNumberStyleAttr()+"><span>"+this.getCellDate(a,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<td class="fc-week-number '+a.widgetContentClass+'" '+a.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var a=this.view;return a.weekNumbersVisible?'<td class="fc-week-number" '+a.weekNumberStyleAttr()+"></td>":""}},Ib=Wa.MonthView=Gb.extend({computeRange:function(a){var b,c=Gb.prototype.computeRange.call(this,a);return this.isFixedWeeks()&&(b=Math.ceil(c.end.diff(c.start,"weeks",!0)),c.end.add(6-b,"weeks")),c},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),i(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});Xa.basic={"class":Gb},Xa.basicDay={type:"basic",duration:{days:1}},Xa.basicWeek={type:"basic",duration:{weeks:1}},Xa.month={"class":Ib,duration:{months:1},defaults:{fixedWeekCount:!0}};var Jb=Wa.AgendaView=xb.extend({scroller:null,timeGridClass:wb,timeGrid:null,dayGridClass:vb,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new yb({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){var a=this.timeGridClass.extend(Kb);return new a(this)},instantiateDayGrid:function(){var a=this.dayGridClass.extend(Lb);return new a(this)},setRange:function(a){xb.prototype.setRange.call(this,a),this.timeGrid.setRange(a),this.dayGrid&&this.dayGrid.setRange(a)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var b=this.scroller.el.addClass("fc-time-grid-container"),c=a('<div class="fc-time-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b),this.timeGrid.setElement(c),this.timeGrid.renderDates(),this.bottomRuleEl=a('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(a){this.timeGrid.renderNowIndicator(a)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(a){this.timeGrid.updateSize(a),xb.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=k(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d,g;this.bottomRuleEl.hide(),this.scroller.clear(),f(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=Mb),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),this.scroller.setHeight(d),g=this.scroller.getScrollbarWidths(),(g.left||g.right)&&(e(this.noScrollRowEls,g),d=this.computeScrollerHeight(a),this.scroller.setHeight(d)),this.scroller.lockOverflow(g),this.timeGrid.getTotalSlatHeight()<d&&this.bottomRuleEl.show())},computeScrollerHeight:function(a){return a-l(this.el,this.scroller.el)},computeInitialScroll:function(){var a=b.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);return c=Math.ceil(c),c&&c++,c},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(a){this.scroller.setScrollTop(a)},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(a,b){var c=this.timeGrid.queryHit(a,b);return!c&&this.dayGrid&&(c=this.dayGrid.queryHit(a,b)),c},getHitSpan:function(a){return a.component.getHitSpan(a)},getHitEl:function(a){return a.component.getHitEl(a)},renderEvents:function(a){var b,c,d=[],e=[],f=[];for(c=0;c<a.length;c++)a[c].allDay?d.push(a[c]):e.push(a[c]);b=this.timeGrid.renderEvents(e),this.dayGrid&&(f=this.dayGrid.renderEvents(d)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return a.start.hasTime()?this.timeGrid.renderDrag(a,b):this.dayGrid?this.dayGrid.renderDrag(a,b):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Kb={renderHeadIntroHtml:function(){var a,b=this.view;return b.opt("weekNumbers")?(a=this.start.format(b.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+b.widgetHeaderClass+'" '+b.axisStyleAttr()+"><span>"+ca(a)+"</span></th>"):'<th class="fc-axis '+b.widgetHeaderClass+'" '+b.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var a=this.view;return'<td class="fc-axis" '+a.axisStyleAttr()+"></td>"}},Lb={renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"><span>"+(a.opt("allDayHtml")||ca(a.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){var a=this.view;return'<td class="fc-axis" '+a.axisStyleAttr()+"></td>"}},Mb=5,Nb=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Xa.agenda={"class":Jb,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Xa.agendaDay={type:"agenda",duration:{days:1}},Xa.agendaWeek={type:"agenda",duration:{weeks:1}},Wa}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(b,g,h,i,j){function k(c,d){var f=d||[{message:c}];(b.googleCalendarError||a.noop).apply(j,f),(j.options.googleCalendarError||a.noop).apply(j,f),e.warn.apply(null,[c].concat(d||[]))}var l,m,n=d+"/"+encodeURIComponent(b.googleCalendarId)+"/events?callback=?",o=b.googleCalendarApiKey||j.options.googleCalendarApiKey,p=b.success;return o?(g.hasZone()||(g=g.clone().utc().add(-1,"day")),h.hasZone()||(h=h.clone().utc().add(1,"day")),i&&"local"!=i&&(m=i.replace(" ","_")),l=a.extend({},b.data||{},{key:o,timeMin:g.format(),timeMax:h.format(),timeZone:m,singleEvents:!0,maxResults:9999}),a.extend({},b,{googleCalendarId:null,url:n,data:l,startParam:!1,endParam:!1,timezoneParam:!1,success:function(b){var d,e,g=[];if(b.error)k("Google Calendar API: "+b.error.message,b.error.errors);else if(b.items&&(a.each(b.items,function(a,b){var d=b.htmlLink||null;m&&null!==d&&(d=c(d,"ctz="+m)),g.push({id:b.id,title:b.summary,start:b.start.dateTime||b.start.date,end:b.end.dateTime||b.end.date,url:d,location:b.location,description:b.description})}),d=[g].concat(Array.prototype.slice.call(arguments,1)),e=f(p,this,d),a.isArray(e)))return e;return g}})):(k("Specify a googleCalendarApiKey. See http://fullcalendar.io/docs/google_calendar/"),{})}function c(a,b){return a.replace(/(\?.*?)?(#|$)/,function(a,c,d){return(c?c+"&":"?")+b+d})}var d="https://www.googleapis.com/calendar/v3/calendars",e=a.fullCalendar,f=e.applyAll;e.sourceNormalizers.push(function(a){var b,c=a.googleCalendarId,d=a.url;!c&&d&&(/^[^\/]+@([^\/\.]+\.)*(google|googlemail|gmail)\.com$/.test(d)?c=d:((b=/^https:\/\/www.googleapis.com\/calendar\/v3\/calendars\/([^\/]*)/.exec(d))||(b=/^https?:\/\/www.google.com\/calendar\/feeds\/([^\/]*)/.exec(d)))&&(c=decodeURIComponent(b[1])),c&&(a.googleCalendarId=c)),c&&(null==a.editable&&(a.editable=!1),a.url=c)}),e.sourceFetchers.push(function(a,c,d,e){if(a.googleCalendarId)return b(a,c,d,e,this)})}),function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),function(a,b,c){"use strict";function d(a,b,c){var d,e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(d=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c||0,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}function e(a){return parseInt(a,10)}function f(a,b,e,f){if(a=(a||"").split(","),a=a[f||0]||a[0]||"auto",a=l.Util.trimText(a).split(" "),"backgroundSize"!==e||a[0]&&!a[0].match(/cover|contain|auto/)){if(a[0]=a[0].indexOf("%")===-1?d(b,e+"X",a[0]):a[0],a[1]===c){if("backgroundSize"===e)return a[1]="auto",a;a[1]=a[0]}a[1]=a[1].indexOf("%")===-1?d(b,e+"Y",a[1]):a[1]}else;return a}function g(a,b,c,d,e,f){var g,h,i,j,k=l.Util.getCSS(b,a,e);if(1===k.length&&(j=k[0],k=[],k[0]=j,k[1]=j),k[0].toString().indexOf("%")!==-1)i=parseFloat(k[0])/100,h=c.width*i,"backgroundSize"!==a&&(h-=(f||d).width*i);else if("backgroundSize"===a)if("auto"===k[0])h=d.width;else if(/contain|cover/.test(k[0])){var m=l.Util.resizeBounds(d.width,d.height,c.width,c.height,k[0]);h=m.width,g=m.height}else h=parseInt(k[0],10);else h=parseInt(k[0],10);return"auto"===k[1]?g=h/d.width*d.height:k[1].toString().indexOf("%")!==-1?(i=parseFloat(k[1])/100,g=c.height*i,"backgroundSize"!==a&&(g-=(f||d).height*i)):g=parseInt(k[1],10),[h,g]}function h(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){return c.push({type:"variable",name:a,arguments:b}),b}}}function i(a){return{zindex:a,children:[]}}var j,k,l={};l.Util={},l.Util.log=function(b){l.logging&&a.console&&a.console.log&&a.console.log(b)},l.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),l.Util.asFloat=function(a){return parseFloat(a)},function(){var a=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,b=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;l.Util.parseTextShadows=function(c){if(!c||"none"===c)return[];for(var d=c.match(a),e=[],f=0;d&&f<d.length;f++){var g=d[f].match(b);e.push({color:g[0],offsetX:g[1]?g[1].replace("px",""):0,offsetY:g[2]?g[2].replace("px",""):0,blur:g[3]?g[3].replace("px",""):0})}return e}}(),l.Util.parseBackgroundImage=function(a){var b,c,d,e,f,g,h,i,j=" \r\n\t",k=[],l=0,m=0,n=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&i.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),k.push({prefix:d,method:b.toLowerCase(),value:f,args:i})),i=[],b=d=c=f=""};n();for(var o=0,p=a.length;o<p;o++)if(g=a[o],!(0===l&&j.indexOf(g)>-1)){switch(g){case'"':h?h===g&&(h=null):h=g;break;case"(":if(h)break;if(0===l){l=1,f+=g;continue}m++;break;case")":if(h)break;if(1===l){if(0===m){l=0,f+=g,n();continue}m--}break;case",":if(h)break;if(0===l){n();continue}if(1===l&&0===m&&!b.match(/^url$/i)){i.push(c),c="",f+=g;continue}}f+=g,0===l?b+=g:c+=g}return n(),k},l.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect&&(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=a.offsetWidth,c.height=a.offsetHeight),c},l.Util.OffsetBounds=function(a){var b=a.offsetParent?l.Util.OffsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}},l.Util.getCSS=function(a,c,d){j!==a&&(k=b.defaultView.getComputedStyle(a,null));var g=k[c];if(/^background(Size|Position)$/.test(c))return f(g,a,c,d);if(/border(Top|Bottom)(Left|Right)Radius/.test(c)){var h=g.split(" ");return h.length<=1&&(h[1]=h[0]),h.map(e)}return g},l.Util.resizeBounds=function(a,b,c,d,e){var f,g,h=c/d,i=a/b;return e&&"auto"!==e?h<i^"contain"===e?(g=d,f=d*i):(f=c,g=c/i):(f=c,g=d),{width:f,height:g}},l.Util.BackgroundPosition=function(a,b,c,d,e){var f=g("backgroundPosition",a,b,c,d,e);return{left:f[0],top:f[1]}},l.Util.BackgroundSize=function(a,b,c,d){var e=g("backgroundSize",a,b,c,d);return{width:e[0],height:e[1]}},l.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},l.Util.Children=function(a){var b;try{b=a.nodeName&&"IFRAME"===a.nodeName.toUpperCase()?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var d=a.length,e=0;if("number"==typeof b.length)for(var f=b.length;e<f;e++)a[d++]=b[e];else for(;b[e]!==c;)a[d++]=b[e++];return a.length=d,a}(b,a),b}(a.childNodes)}catch(d){l.Util.log("html2canvas.Util.Children failed with exception: "+d.message),b=[]}return b},l.Util.isTransparent=function(a){return"transparent"===a||"rgba(0, 0, 0, 0)"===a||a===c},l.Util.Font=function(){var a={};return function(b,d,e){if(a[b+"-"+d]!==c)return a[b+"-"+d];var f,g,h,i=e.createElement("div"),j=e.createElement("img"),k=e.createElement("span"),l="Hidden Text";return i.style.visibility="hidden",i.style.fontFamily=b,i.style.fontSize=d,i.style.margin=0,i.style.padding=0,e.body.appendChild(i),j.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",j.width=1,j.height=1,j.style.margin=0,j.style.padding=0,j.style.verticalAlign="baseline",k.style.fontFamily=b,k.style.fontSize=d,k.style.margin=0,k.style.padding=0,k.appendChild(e.createTextNode(l)),i.appendChild(k),i.appendChild(j),f=j.offsetTop-k.offsetTop+1,i.removeChild(k),i.appendChild(e.createTextNode(l)),i.style.lineHeight="normal",j.style.verticalAlign="super",g=j.offsetTop-i.offsetTop+1,h={baseline:f,lineWidth:1,middle:g},a[b+"-"+d]=h,e.body.removeChild(i),h}}(),function(){function a(a){return function(b){try{a.addColorStop(b.stop,b.color)}catch(d){c.log(["failed to add color stop: ",d,"; tried to add: ",b])}}}var c=l.Util,d={};l.Generate=d;var e=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];d.parseGradient=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p=e.length;for(d=0;d<p&&!(f=a.match(e[d]));d+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(c={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,d=0;d<i;d+=1)switch(h[d]){case"top":c.y0=0,c.y1=b.height;break;case"right":c.x0=b.width,c.x1=0;break;case"bottom":c.y0=b.height,c.y1=0;break;case"left":c.x0=0,c.x1=b.width}if(null===c.x0&&null===c.x1&&(c.x0=c.x1=b.width/2),null===c.y0&&null===c.y1&&(c.y0=c.y1=b.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),d=0;d<i;d+=1)k=h[d].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=d*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(c={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=h[3]*b.width/100,c.y1=h[4]*b.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,d=0;d<i;d+=1)k=h[d].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),c.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(c={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=b.width-c.x0,c.y1=b.height-c.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),d=0;d<i;d+=1)k=h[d].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=d*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(c={type:"circle",x0:0,y0:0,x1:b.width,y1:b.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.cx=h[1]*b.width/100,c.cy=h[2]*b.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z\-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.max(l,m,n,o);break;case"closest-corner":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.min(l,m,n,o);break;case"farthest-side":"circle"===h[0]?c.rx=c.ry=Math.max(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.max(c.cx,c.x1-c.cx),c.ry=Math.max(c.cy,c.y1-c.cy));break;case"closest-side":case"contain":"circle"===h[0]?c.rx=c.ry=Math.min(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.min(c.cx,c.x1-c.cx),c.ry=Math.min(c.cy,c.y1-c.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),d=0;d<i;d+=1)k=h[d].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=d*j,c.colorStops.push({color:k[1],stop:g})}return c},d.Gradient=function(c,d){if(0!==d.width&&0!==d.height){var e,f,g=b.createElement("canvas"),h=g.getContext("2d");if(g.width=d.width,g.height=d.height,e=l.Generate.parseGradient(c,d))switch(e.type){case"linear":f=h.createLinearGradient(e.x0,e.y0,e.x1,e.y1),e.colorStops.forEach(a(f)),h.fillStyle=f,h.fillRect(0,0,d.width,d.height);break;case"circle":f=h.createRadialGradient(e.cx,e.cy,0,e.cx,e.cy,e.rx),e.colorStops.forEach(a(f)),h.fillStyle=f,h.fillRect(0,0,d.width,d.height);break;case"ellipse":var i=b.createElement("canvas"),j=i.getContext("2d"),k=Math.max(e.rx,e.ry),m=2*k;i.width=i.height=m,f=j.createRadialGradient(e.rx,e.ry,0,e.rx,e.ry,k),e.colorStops.forEach(a(f)),j.fillStyle=f,j.fillRect(0,0,m,m),h.fillStyle=e.colorStops[e.colorStops.length-1].color,h.fillRect(0,0,g.width,g.height),h.drawImage(i,e.cx-e.rx,e.cy-e.ry,2*e.rx,2*e.ry)}return g}},d.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},d.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(a<=0||a>=4e3)return a;for(b=0;b<f;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),l.Parse=function(d,e){function f(){return Math.max(Math.max(ka.body.scrollWidth,ka.documentElement.scrollWidth),Math.max(ka.body.offsetWidth,ka.documentElement.offsetWidth),Math.max(ka.body.clientWidth,ka.documentElement.clientWidth))}function g(){return Math.max(Math.max(ka.body.scrollHeight,ka.documentElement.scrollHeight),Math.max(ka.body.offsetHeight,ka.documentElement.offsetHeight),Math.max(ka.body.clientHeight,ka.documentElement.clientHeight))}function j(a,b){var c=parseInt(pa(a,b),10);return isNaN(c)?0:c}function k(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),ja+=1)}function m(a,b,c){if(a.length>0)return b+c.toUpperCase()}function n(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,m);case"uppercase":return a.toUpperCase();default:return a}}function o(a){return/^(normal|none|0px)$/.test(a)}function p(a,b,c,d){null!==a&&la.trimText(a).length>0&&(d.fillText(a,b,c),ja+=1)}function q(a,b,c,d){var e=!1,f=pa(b,"fontWeight"),g=pa(b,"fontFamily"),h=pa(b,"fontSize"),i=la.parseTextShadows(pa(b,"textShadow"));switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}if(a.setVariable("fillStyle",d),a.setVariable("font",[pa(b,"fontStyle"),pa(b,"fontVariant"),f,h,g].join(" ")),a.setVariable("textAlign",e?"right":"left"),i.length&&(a.setVariable("shadowColor",i[0].color),a.setVariable("shadowOffsetX",i[0].offsetX),a.setVariable("shadowOffsetY",i[0].offsetY),a.setVariable("shadowBlur",i[0].blur)),"none"!==c)return la.Font(g,h,ka)}function r(a,b,c,d,e){switch(b){case"underline":k(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":k(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":k(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function s(a,b,c,d,e){var f;if(ma.rangeBounds&&!e)"none"===c&&0===la.trimText(b).length||(f=t(b,a.node,a.textOffset)),a.textOffset+=b.length;else if(a.node&&"string"==typeof a.node.nodeValue){var g=d?a.node.splitText(b.length):null;f=u(a.node,e),a.node=g}return f}function t(a,b,c){var d=ka.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function u(a,b){var c=a.parentNode,d=ka.createElement("wrapper"),e=a.cloneNode(!0);d.appendChild(a.cloneNode(!0)),c.replaceChild(d,a);var f=b?la.OffsetBounds(d):la.Bounds(d);return c.replaceChild(e,d),f}function v(a,b,c){var d,f,g=c.ctx,h=pa(a,"color"),i=pa(a,"textDecoration"),j=pa(a,"textAlign"),k={node:b,textOffset:0};la.trimText(b.nodeValue).length>0&&(b.nodeValue=n(b.nodeValue,pa(a,"textTransform")),j=j.replace(["-webkit-auto"],["auto"]),f=!e.letterRendering&&/^(left|right|justify|auto)$/.test(j)&&o(pa(a,"letterSpacing"))?b.nodeValue.split(/(\b| )/):b.nodeValue.split(""),d=q(g,a,i,h),e.chinese&&f.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),f.splice.apply(f,a))}),f.forEach(function(a,b){var e=s(k,a,i,b<f.length-1,c.transform.matrix);e&&(p(a,e.left,e.bottom,g),r(g,i,e,d,h))}))}function w(a,b){var c,d,e=ka.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(ka.createTextNode(b)),a.insertBefore(e,a.firstChild),d=la.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function x(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function y(a,b){var c,d=x(a);switch(b){case"decimal":c=d;break;case"decimal-leading-zero":c=1===d.toString().length?d="0"+d.toString():d.toString();break;case"upper-roman":c=l.Generate.ListRoman(d);break;case"lower-roman":c=l.Generate.ListRoman(d).toLowerCase();break;case"lower-alpha":c=l.Generate.ListAlpha(d).toLowerCase();break;case"upper-alpha":c=l.Generate.ListAlpha(d)}return c+". "}function z(a,b,c){var d,e,f,g=b.ctx,h=pa(a,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){if(e=y(a,h),f=w(a,e),q(g,a,"none",pa(a,"color")),"inside"!==pa(a,"listStylePosition"))return;g.setVariable("textAlign","left"),d=c.left,p(e,d,f.bottom,g)}}function A(a){var b=d[a];return!(!b||b.succeeded!==!0)&&b.img}function B(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function C(a,b,c){var d,e="static"!==b.cssPosition,f=e?pa(a,"zIndex"):"auto",g=pa(a,"opacity"),h="none"!==pa(a,"cssFloat");b.zIndex=d=i(f),d.isPositioned=e,d.isFloated=h,d.opacity=g,d.ownStacking="auto"!==f||g<1,c&&c.zIndex.children.push(b)}function D(a,b,c,d,e){var f=j(b,"paddingLeft"),g=j(b,"paddingTop"),h=j(b,"paddingRight"),i=j(b,"paddingBottom");P(a,c,0,0,c.width,c.height,d.left+f+e[3].width,d.top+g+e[0].width,d.width-(e[1].width+e[3].width+f+h),d.height-(e[0].width+e[2].width+g+i))}function E(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:j(a,"border"+b+"Width"),color:pa(a,"border"+b+"Color")}})}function F(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return pa(a,"border"+b+"Radius")})}function G(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[G(a,g,j,l),G(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function H(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function I(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function J(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:sa(d,e,h,i).topLeft.subdivide(.5),topLeftInner:sa(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:sa(d+p,e,j,k).topRight.subdivide(.5),topRightInner:sa(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:sa(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:sa(d+Math.min(r,f+c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),Math.max(0,m-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:sa(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:sa(d+c[3].width,e+s,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function K(a,b,c,d,e){var f=pa(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":H(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),H(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),H(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),H(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:H(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),H(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),H(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),H(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function L(a,b,c){var d,e,f,g,h,i,j=b.left,k=b.top,l=b.width,m=b.height,n=F(a),o=J(b,n,c),p={clip:K(a,o,c,n,b),borders:[]};for(d=0;d<4;d++)if(c[d].width>0){switch(e=j,f=k,g=l,h=m-c[2].width,d){case 0:h=c[0].width,i=I({c1:[e,f],c2:[e+g,f],c3:[e+g-c[1].width,f+h],c4:[e+c[3].width,f+h]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:e=j+l-c[1].width,g=c[1].width,i=I({c1:[e+g,f],c2:[e+g,f+h+c[2].width],c3:[e,f+h],c4:[e,f+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:f=f+m-c[2].width,h=c[2].width,i=I({c1:[e+g,f+h],c2:[e,f+h],c3:[e+c[3].width,f],c4:[e+g-c[3].width,f]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:g=c[3].width,i=I({c1:[e,f+h+c[2].width],c2:[e,f],c3:[e+g,f+c[0].width],c4:[e+g,f+h]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:i,color:c[d].color})}return p}function M(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function N(a,b,c){"transparent"!==c&&(a.setVariable("fillStyle",c),M(a,b),a.fill(),ja+=1)}function O(a,b,c){var d,e,f=ka.createElement("valuewrap"),g=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];g.forEach(function(b){
try{f.style[b]=pa(a,b)}catch(c){la.log("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}),f.style.borderColor="black",f.style.borderStyle="solid",f.style.display="block",f.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(f.style.lineHeight=pa(a,"height")),f.style.top=b.top+"px",f.style.left=b.left+"px",d="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value,d||(d=a.placeholder),e=ka.createTextNode(d),f.appendChild(e),oa.appendChild(f),v(a,e,c),oa.removeChild(f)}function P(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),ja+=1}function Q(c,d){var e=a.getComputedStyle(c,d);if(e&&e.content&&"none"!==e.content&&"-moz-alt-content"!==e.content&&"none"!==e.display){var f=e.content+"",g=f.substr(0,1);g===f.substr(f.length-1)&&g.match(/'|"/)&&(f=f.substr(1,f.length-2));var h="url"===f.substr(0,3),i=b.createElement(h?"img":"span");return i.className=qa+"-before "+qa+"-after",Object.keys(e).filter(R).forEach(function(a){try{i.style[a]=e[a]}catch(b){la.log(["Tried to assign readonly property ",a,"Error:",b])}}),h?i.src=la.parseBackgroundImage(f)[0].args[0]:i.innerHTML=f,i}}function R(b){return isNaN(a.parseInt(b,10))}function S(a,b){var c=Q(a,":before"),d=Q(a,":after");(c||d)&&(c&&(a.className+=" "+qa+"-before",a.parentNode.insertBefore(c,a),fa(c,b,!0),a.parentNode.removeChild(c),a.className=a.className.replace(qa+"-before","").trim()),d&&(a.className+=" "+qa+"-after",a.appendChild(d),fa(d,b,!0),a.removeChild(d),a.className=a.className.replace(qa+"-after","").trim()))}function T(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function U(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),M(a,i),a.save(),a.clip(),T(a,b,c,d),a.restore()}function V(a,b,c){k(a,b.left,b.top,b.width,b.height,c)}function W(a,b,c,d,e){var f=la.BackgroundSize(a,b,d,e),g=la.BackgroundPosition(a,b,d,e,f),h=pa(a,"backgroundRepeat").split(",").map(la.trimText);switch(d=Y(d,f),h=h[e]||h[0]){case"repeat-x":U(c,d,g,b,b.left,b.top+g.top,99999,d.height);break;case"repeat-y":U(c,d,g,b,b.left+g.left,b.top,d.width,99999);break;case"no-repeat":U(c,d,g,b,b.left+g.left,b.top+g.top,d.width,d.height);break;default:T(c,d,g,{top:b.top,left:b.left,width:d.width,height:d.height})}}function X(a,b,c){for(var d,e=pa(a,"backgroundImage"),f=la.parseBackgroundImage(e),g=f.length;g--;)if(e=f[g],e.args&&0!==e.args.length){var h="url"===e.method?e.args[0]:e.value;d=A(h),d?W(a,b,c,d,g):la.log("html2canvas: Error loading background:",e)}}function Y(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=ka.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),P(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function Z(a,b,c){return a.setVariable("globalAlpha",pa(b,"opacity")*(c?c.opacity:1))}function $(a){return a.replace("px","")}function _(a,b){var c=pa(a,"transform")||pa(a,"-webkit-transform")||pa(a,"-moz-transform")||pa(a,"-ms-transform")||pa(a,"-o-transform"),d=pa(a,"transform-origin")||pa(a,"-webkit-transform-origin")||pa(a,"-moz-transform-origin")||pa(a,"-ms-transform-origin")||pa(a,"-o-transform-origin")||"0px 0px";d=d.split(" ").map($).map(la.asFloat);var e;if(c&&"none"!==c){var f=c.match(ta);if(f)switch(f[1]){case"matrix":e=f[2].split(",").map(la.trimText).map(la.asFloat)}}return{origin:d,matrix:e}}function aa(a,b,c,d){var i=h(b?c.width:f(),b?c.height:g()),j={ctx:i,opacity:Z(i,a,b),cssPosition:pa(a,"position"),borders:E(a),transform:d,clip:b&&b.clip?la.Extend({},b.clip):null};return C(a,j,b),e.useOverflow===!0&&/(hidden|scroll|auto)/.test(pa(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(j.clip=j.clip?B(j.clip,c):c),j}function ba(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=B(d,c)),d}function ca(a,b){var c=b.matrix?la.OffsetBounds(a):la.Bounds(a);return b.origin[0]+=c.left,b.origin[1]+=c.top,c}function da(a,b,c,d){var e,f=_(a,b),g=ca(a,f),h=aa(a,b,g,f),i=h.borders,j=h.ctx,k=ba(i,g,h.clip),l=L(a,g,i),m=na.test(a.nodeName)?"#efefef":pa(a,"backgroundColor");switch(M(j,l.clip),j.save(),j.clip(),k.height>0&&k.width>0&&!d?(V(j,g,m),X(a,k,j)):d&&(h.backgroundColor=m),j.restore(),l.borders.forEach(function(a){N(j,a.args,a.color)}),c||S(a,h),a.nodeName){case"IMG":(e=A(a.getAttribute("src")))?D(j,a,e,g,i):la.log("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder||"").length>0&&O(a,g,h);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&O(a,g,h);break;case"SELECT":(a.options||a.placeholder||"").length>0&&O(a,g,h);break;case"LI":z(a,h,k);break;case"CANVAS":D(j,a,a,g,i)}return h}function ea(a){return"none"!==pa(a,"display")&&"hidden"!==pa(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function fa(a,b,c){ea(a)&&(b=da(a,b,c,!1)||b,na.test(a.nodeName)||ga(a,b,c))}function ga(a,b,c){la.Children(a).forEach(function(d){d.nodeType===d.ELEMENT_NODE?fa(d,b,c):d.nodeType===d.TEXT_NODE&&v(a,d,b)})}function ha(){var a=pa(b.documentElement,"backgroundColor"),c=la.isTransparent(a)&&ia===b.body,d=da(ia,null,!1,c);return ga(ia,d),c&&(a=d.backgroundColor),oa.removeChild(ra),{backgroundColor:a,stack:d}}a.scroll(0,0);var ia=e.elements===c?b.body:e.elements[0],ja=0,ka=ia.ownerDocument,la=l.Util,ma=la.Support(e,ka),na=new RegExp("("+e.ignoreElements+")"),oa=ka.body,pa=la.getCSS,qa="___html2canvas___pseudoelement",ra=ka.createElement("style");ra.innerHTML="."+qa+'-before:before { content: "" !important; display: none !important; }.'+qa+'-after:after { content: "" !important; display: none !important; }',oa.appendChild(ra),d=d||{};var sa=function(a){return function(b,c,d,e){var f=d*a,g=e*a,h=b+d,i=c+e;return{topLeft:G({x:b,y:i},{x:b,y:i-g},{x:h-f,y:c},{x:h,y:c}),topRight:G({x:b,y:c},{x:b+f,y:c},{x:h,y:i-g},{x:h,y:i}),bottomRight:G({x:h,y:c},{x:h,y:c+g},{x:b+f,y:i},{x:b,y:i}),bottomLeft:G({x:h,y:i},{x:h-f,y:i},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3)),ta=/(matrix)\((.+)\)/;return ha()},l.Preload=function(d){function e(a){A.href=a,A.href=A.href;var b=A.protocol+A.host;return b===p}function f(){u.log("html2canvas: start: images: "+t.numLoaded+" / "+t.numTotal+" (failed: "+t.numFailed+")"),!t.firstRun&&t.numLoaded>=t.numTotal&&(u.log("Finished loading images: # "+t.numTotal+" (failed: "+t.numFailed+")"),"function"==typeof d.complete&&d.complete(t))}function g(b,e,g){var h,i,j=d.proxy;A.href=b,b=A.href,h="html2canvas_"+v++,g.callbackname=h,j+=j.indexOf("?")>-1?"&":"?",j+="url="+encodeURIComponent(b)+"&callback="+h,i=x.createElement("script"),a[h]=function(b){"error:"===b.substring(0,6)?(g.succeeded=!1,t.numLoaded++,t.numFailed++,f()):(o(e,g),e.src=b),a[h]=c;try{delete a[h]}catch(d){}i.parentNode.removeChild(i),i=null,delete g.script,delete g.callbackname},i.setAttribute("type","text/javascript"),i.setAttribute("src",j),g.script=i,a.document.body.appendChild(i)}function h(b,c){var d=a.getComputedStyle(b,c),e=d.content;"url"===e.substr(0,3)&&q.loadImage(l.Util.parseBackgroundImage(e)[0].args[0]),m(d.backgroundImage,b)}function i(a){h(a,":before"),h(a,":after")}function j(a,b){var d=l.Generate.Gradient(a,b);d!==c&&(t[a]={img:d,succeeded:!0},t.numTotal++,t.numLoaded++,f())}function k(a){return a&&a.method&&a.args&&a.args.length>0}function m(a,b){var d;l.Util.parseBackgroundImage(a).filter(k).forEach(function(a){"url"===a.method?q.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(d===c&&(d=l.Util.Bounds(b)),j(a.value,d))})}function n(a){var b=!1;try{u.Children(a).forEach(n)}catch(d){}try{b=a.nodeType}catch(e){b=!1,u.log("html2canvas: failed to access some element's nodeType - Exception: "+e.message)}if(1===b||b===c){i(a);try{m(u.getCSS(a,"backgroundImage"),a)}catch(d){u.log("html2canvas: failed to get background-image - Exception: "+d.message)}m(a)}}function o(b,e){b.onload=function(){e.timer!==c&&a.clearTimeout(e.timer),t.numLoaded++,e.succeeded=!0,b.onerror=b.onload=null,f()},b.onerror=function(){if("anonymous"===b.crossOrigin&&(a.clearTimeout(e.timer),d.proxy)){var c=b.src;return b=new Image,e.img=b,b.src=c,void g(b.src,b,e)}t.numLoaded++,t.numFailed++,e.succeeded=!1,b.onerror=b.onload=null,f()}}var p,q,r,s,t={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},u=l.Util,v=0,w=d.elements[0]||b.body,x=w.ownerDocument,y=w.getElementsByTagName("img"),z=y.length,A=x.createElement("a"),B=function(a){return a.crossOrigin!==c}(new Image);for(A.href=a.location.href,p=A.protocol+A.host,q={loadImage:function(a){var b,f;a&&t[a]===c&&(b=new Image,a.match(/data:image\/.*;base64,/i)?(b.src=a.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),f=t[a]={img:b},t.numTotal++,o(b,f)):e(a)||d.allowTaint===!0?(f=t[a]={img:b},t.numTotal++,o(b,f),b.src=a):B&&!d.allowTaint&&d.useCORS?(b.crossOrigin="anonymous",f=t[a]={img:b},t.numTotal++,o(b,f),b.src=a):d.proxy&&(f=t[a]={img:b},t.numTotal++,g(a,b,f)))},cleanupDOM:function(e){var g,h;if(!t.cleanupDone){e&&"string"==typeof e?u.log("html2canvas: Cleanup because: "+e):u.log("html2canvas: Cleanup after timeout: "+d.timeout+" ms.");for(h in t)if(t.hasOwnProperty(h)&&(g=t[h],"object"==typeof g&&g.callbackname&&g.succeeded===c)){a[g.callbackname]=c;try{delete a[g.callbackname]}catch(i){}g.script&&g.script.parentNode&&(g.script.setAttribute("src","about:blank"),g.script.parentNode.removeChild(g.script)),t.numLoaded++,t.numFailed++,u.log("html2canvas: Cleaned up failed img: '"+h+"' Steps: "+t.numLoaded+" / "+t.numTotal)}a.stop!==c?a.stop():b.execCommand!==c&&b.execCommand("Stop",!1),b.close!==c&&b.close(),t.cleanupDone=!0,e&&"string"==typeof e||f()}},renderingDone:function(){s&&a.clearTimeout(s)}},d.timeout>0&&(s=a.setTimeout(q.cleanupDOM,d.timeout)),u.log("html2canvas: Preload starts: finding background-images"),t.firstRun=!0,n(w),u.log("html2canvas: Preload: Finding images"),r=0;r<z;r+=1)q.loadImage(y[r].getAttribute("src"));return t.firstRun=!1,u.log("html2canvas: Preload: Done."),t.numTotal===t.numLoaded&&f(),q},l.Renderer=function(a,d){function e(a){function b(a){Object.keys(a).sort().forEach(function(c){var d=[],f=[],g=[],h=[];a[c].forEach(function(a){a.node.zIndex.isPositioned||a.node.zIndex.opacity<1?g.push(a):a.node.zIndex.isFloated?f.push(a):d.push(a)}),function i(a){a.forEach(function(a){h.push(a),a.children&&i(a.children)})}(d.concat(f,g)),h.forEach(function(a){a.context?b(a.context):e.push(a.node)})})}var d,e=[];return d=function(a){function b(a,d,e){var f="auto"===d.zIndex.zindex?0:Number(d.zIndex.zindex),g=a,h=d.zIndex.isPositioned,i=d.zIndex.isFloated,j={node:d},k=e;d.zIndex.ownStacking?(g=j.context={"!":[{node:d,children:[]}]},k=c):(h||i)&&(k=j.children=[]),0===f&&e?e.push(j):(a[f]||(a[f]=[]),a[f].push(j)),d.zIndex.children.forEach(function(a){b(g,a,k)})}var d={};return b(d,a),d}(a),b(d),e}function f(a){var b;if("string"==typeof d.renderer&&l.Renderer[a]!==c)b=l.Renderer[a](d);else{if("function"!=typeof a)throw new Error("Unknown renderer");b=a(d)}if("function"!=typeof b)throw new Error("Invalid renderer defined");return b}return f(d.renderer)(a,d,b,e(a.stack),l)},l.Util.Support=function(a,b){function d(){var a=new Image,d=b.createElement("canvas"),e=d.getContext!==c&&d.getContext("2d");if(e===!1)return!1;d.width=d.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{e.drawImage(a,0,0),d.toDataURL()}catch(f){return!1}return l.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function e(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,123===e&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:e(),svgRendering:a.svgRendering&&d()}},a.html2canvas=function(b,c){b=b.length?b:[b];var d,e,f={logging:!1,elements:b,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return f=l.Util.Extend(c,f),l.logging=f.logging,f.complete=function(a){"function"==typeof f.onpreloaded&&f.onpreloaded(a)===!1||(d=l.Parse(a,f),"function"==typeof f.onparsed&&f.onparsed(d)===!1||(e=l.Renderer(d,f),"function"==typeof f.onrendered&&f.onrendered(e)))},a.setTimeout(function(){l.Preload(f)},0),{render:function(a,b){return l.Renderer(a,l.Util.Extend(b,f))},parse:function(a,b){return l.Parse(a,l.Util.Extend(b,f))},preload:function(a){return l.Preload(l.Util.Extend(a,f))},log:l.Util.log}},a.html2canvas.log=l.Util.log,a.html2canvas.Renderer={Canvas:c},l.Renderer.Canvas=function(a){function d(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function e(a){if(h.indexOf(a.arguments[0].src)===-1){j.drawImage(a.arguments[0],0,0);try{j.getImageData(0,0,1,1)}catch(b){return i=g.createElement("canvas"),j=i.getContext("2d"),!1}h.push(a.arguments[0].src)}return!0}function f(b,c){switch(c.type){case"variable":b[c.name]=c.arguments;break;case"function":switch(c.name){case"createPattern":if(c.arguments[0].width>0&&c.arguments[0].height>0)try{b.fillStyle=b.createPattern(c.arguments[0],"repeat")}catch(f){k.log("html2canvas: Renderer: Error creating pattern",f.message)}break;case"drawShape":d(b,c.arguments);break;case"drawImage":c.arguments[8]>0&&c.arguments[7]>0&&(!a.taintTest||a.taintTest&&e(c))&&b.drawImage.apply(b,c.arguments);break;default:b[c.name].apply(b,c.arguments)}}}a=a||{};var g=b,h=[],i=b.createElement("canvas"),j=i.getContext("2d"),k=l.Util,m=a.canvas||g.createElement("canvas");return function(a,b,d,e,g){var h,i,j,l=m.getContext("2d"),n=a.stack;return m.width=m.style.width=b.width||n.ctx.width,m.height=m.style.height=b.height||n.ctx.height,j=l.fillStyle,l.fillStyle=k.isTransparent(n.backgroundColor)&&b.background!==c?b.background:a.backgroundColor,l.fillRect(0,0,m.width,m.height),l.fillStyle=j,e.forEach(function(a){l.textBaseline="bottom",l.save(),a.transform.matrix&&(l.translate(a.transform.origin[0],a.transform.origin[1]),l.transform.apply(l,a.transform.matrix),l.translate(-a.transform.origin[0],-a.transform.origin[1])),a.clip&&(l.beginPath(),l.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),l.clip()),a.ctx.storage&&a.ctx.storage.forEach(function(a){f(l,a)}),l.restore()}),k.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===b.elements.length&&"object"==typeof b.elements[0]&&"BODY"!==b.elements[0].nodeName?(i=g.Util.Bounds(b.elements[0]),h=d.createElement("canvas"),h.width=Math.ceil(i.width),h.height=Math.ceil(i.height),l=h.getContext("2d"),l.drawImage(m,i.left,i.top,i.width,i.height,0,0,i.width,i.height),m=null,h):m}}}(window,document),!function(a,b,c,d){function e(a,b){var c=Math.max(0,a[0]-b[0],b[0]-a[1]),d=Math.max(0,a[2]-b[1],b[1]-a[3]);return c+d}function f(b,c,d,e){var f=b.length,g=e?"offset":"position";for(d=d||0;f--;){var h=b[f].el?b[f].el:a(b[f]),i=h[g]();i.left+=parseInt(h.css("margin-left"),10),i.top+=parseInt(h.css("margin-top"),10),c[f]=[i.left-d,i.left+h.outerWidth()+d,i.top-d,i.top+h.outerHeight()+d]}}function g(a,b){var c=b.offset();return{left:a.left-c.left,top:a.top-c.top}}function h(a,b,c){b=[b.left,b.top],c=c&&[c.left,c.top];for(var d,f=a.length,g=[];f--;)d=a[f],g[f]=[f,e(d,b),c&&e(d,c)];return g=g.sort(function(a,b){return b[1]-a[1]||b[2]-a[2]||b[0]-a[0]})}function i(b){this.options=a.extend({},l,b),this.containers=[],this.options.rootGroup||(this.scrollProxy=a.proxy(this.scroll,this),this.dragProxy=a.proxy(this.drag,this),this.dropProxy=a.proxy(this.drop,this),this.placeholder=a(this.options.placeholder),b.isValidTarget||(this.options.isValidTarget=d))}function j(b,c){this.el=b,this.options=a.extend({},k,c),this.group=i.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var d=this.rootGroup.options.itemPath;this.target=d?this.el.find(d):this.el,this.target.on(p.start,this.handle,a.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var k={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},l={afterMove:function(a,b,c){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(a,b){return!0},onCancel:function(a,b,c,d){},onDrag:function(a,b,c,d){a.css(b)},onDragStart:function(b,c,d,e){b.css({height:b.outerHeight(),width:b.outerWidth()}),b.addClass(c.group.options.draggedClass),a("body").addClass(c.group.options.bodyClass)},onDrop:function(b,c,d,e){b.removeClass(c.group.options.draggedClass).removeAttr("style"),a("body").removeClass(c.group.options.bodyClass)},onMousedown:function(a,b,c){if(!c.target.nodeName.match(/^(input|select|textarea)$/i))return c.preventDefault(),!0},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:!0,serialize:function(b,c,d){var e=a.extend({},b.data());return d?[c]:(c[0]&&(e.children=c),delete e.subContainers,delete e.sortable,e)},tolerance:0},m={},n=0,o={left:0,top:0,bottom:0,right:0},p={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},q="subContainers";i.get=function(a){return m[a.group]||(a.group===d&&(a.group=n++),m[a.group]=new i(a)),m[a.group]},i.prototype={dragInit:function(b,c){this.$document=a(c.el[0].ownerDocument);var d=a(b.target).closest(this.options.itemSelector);if(d.length){if(this.item=d,this.itemContainer=c,this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,l.onMousedown,b))return;this.setPointer(b),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0}},drag:function(a){if(!this.dragging){if(!this.distanceMet(a)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,l.onDragStart,a),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(a),this.options.onDrag(this.item,g(this.pointer,this.item.offsetParent()),l.onDrag,a);var b=this.getPointer(a),c=this.sameResultBox,e=this.options.tolerance;(!c||c.top-e>b.top||c.bottom+e<b.top||c.left-e>b.left||c.right+e<b.left)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=d))},drop:function(a){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,l.onCancel,a),this.options.onDrop(this.item,this.getContainer(this.item),l.onDrop,a),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=d,this.dragging=!1)},searchValidTarget:function(a,b){a||(a=this.relativePointer||this.pointer,b=this.lastRelativePointer||this.lastPointer);for(var c=h(this.getContainerDimensions(),a,b),e=c.length;e--;){var f=c[e][0],i=c[e][1];if(!i||this.options.pullPlaceholder){var j=this.containers[f];if(!j.disabled){if(!this.$getOffsetParent()){var k=j.getItemOffsetParent();a=g(a,k),b=g(b,k)}if(j.searchValidTarget(a,b))return!0}}}this.sameResultBox&&(this.sameResultBox=d)},movePlaceholder:function(a,b,c,d){var e=this.lastAppendedItem;!d&&e&&e[0]===b[0]||(b[c](this.placeholder),this.lastAppendedItem=b,this.sameResultBox=d,this.options.afterMove(this.placeholder,a,b))},getContainerDimensions:function(){return this.containerDimensions||f(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data(c)},$getOffsetParent:function(){if(this.offsetParent===d){var a=this.containers.length-1,b=this.containers[a].getItemOffsetParent();if(!this.options.rootGroup)for(;a--;)if(b[0]!=this.containers[a].getItemOffsetParent()[0]){b=!1;break}this.offsetParent=b}return this.offsetParent},setPointer:function(a){var b=this.getPointer(a);if(this.$getOffsetParent()){var c=g(b,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=c}this.lastPointer=this.pointer,this.pointer=b},distanceMet:function(a){var b=this.getPointer(a);return Math.max(Math.abs(this.pointer.left-b.left),Math.abs(this.pointer.top-b.top))>=this.options.distance},getPointer:function(a){var b=a.originalEvent||a.originalEvent.touches&&a.originalEvent.touches[0];return{left:a.pageX||b.pageX,top:a.pageY||b.pageY}},setupDelayTimer:function(){var a=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){a.delayMet=!0},this.options.delay))},scroll:function(a){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(b){var c=this,d=["drag","drop","scroll"];a.each(d,function(a,d){c.$document[b](p[d],c[d+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=d},clearDimensions:function(){this.traverse(function(a){a._clearDimensions()})},traverse:function(a){a(this);for(var b=this.containers.length;b--;)this.containers[b].traverse(a)},_clearDimensions:function(){this.containerDimensions=d},_destroy:function(){m[this.options.group]=d}},j.prototype={dragInit:function(a){var b=this.rootGroup;!this.disabled&&!b.dragInitDone&&this.options.drag&&this.isValidDrag(a)&&b.dragInit(a,this)},isValidDrag:function(a){return 1==a.which||"touchstart"==a.type&&1==a.originalEvent.touches.length},searchValidTarget:function(a,b){var c=h(this.getItemDimensions(),a,b),d=c.length,e=this.rootGroup,f=!e.options.isValidTarget||e.options.isValidTarget(e.item,this);if(!d&&f)return e.movePlaceholder(this,this.target,"append"),!0;for(;d--;){var g=c[d][0],i=c[d][1];if(!i&&this.hasChildGroup(g)){var j=this.getContainerGroup(g).searchValidTarget(a,b);if(j)return!0}else if(f)return this.movePlaceholder(g,a),!0}},movePlaceholder:function(b,c){var d=a(this.items[b]),e=this.itemDimensions[b],f="after",g=d.outerWidth(),h=d.outerHeight(),i=d.offset(),j={left:i.left,right:i.left+g,top:i.top,bottom:i.top+h};if(this.options.vertical){var k=(e[2]+e[3])/2,l=c.top<=k;l?(f="before",j.bottom-=h/2):j.top+=h/2}else{var m=(e[0]+e[1])/2,n=c.left<=m;n?(f="before",j.right-=g/2):j.left+=g/2}this.hasChildGroup(b)&&(j=o),this.rootGroup.movePlaceholder(this,d,f,j)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),f(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var a,b=this.el;return a="relative"===b.css("position")||"absolute"===b.css("position")||"fixed"===b.css("position")?b:b.offsetParent()},hasChildGroup:function(a){return this.options.nested&&this.getContainerGroup(a)},getContainerGroup:function(b){var e=a.data(this.items[b],q);if(e===d){var f=this.$getChildren(this.items[b],"container");if(e=!1,f[0]){var g=a.extend({},this.options,{rootGroup:this.rootGroup,group:n++});e=f[c](g).data(c).group}a.data(this.items[b],q,e)}return e},$getChildren:function(b,c){var d=this.rootGroup.options,e=d[c+"Path"],f=d[c+"Selector"];return b=a(b),e&&(b=b.find(e)),b.children(f)},_serialize:function(b,c){var d=this,e=c?"item":"container",f=this.$getChildren(b,e).not(this.options.exclude).map(function(){return d._serialize(a(this),!c)}).get();return this.rootGroup.options.serialize(b,f,c)},traverse:function(b){a.each(this.items||[],function(c){var d=a.data(this,q);d&&d.traverse(b)}),b(this)},_clearDimensions:function(){this.itemDimensions=d},_destroy:function(){var b=this;this.target.off(p.start,this.handle),this.el.removeData(c),this.options.drop&&(this.group.containers=a.grep(this.group.containers,function(a){return a!=b})),a.each(this.items||[],function(){a.removeData(this,q)})}};var r={enable:function(){this.traverse(function(a){a.disabled=!1})},disable:function(){this.traverse(function(a){a.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(a){a._clearDimensions()})},destroy:function(){this.traverse(function(a){a._destroy()})}};a.extend(j.prototype,r),a.fn[c]=function(b){var e=Array.prototype.slice.call(arguments,1);return this.map(function(){var f=a(this),g=f.data(c);return g&&r[b]?r[b].apply(g,e)||this:(g||b!==d&&"object"!=typeof b||f.data(c,new j(f,b)),this)})}}(jQuery,window,"sortable");var jsPDF=function(a){"use strict";function b(b){var c={};this.subscribe=function(a,b,d){if("function"!=typeof b)return!1;c.hasOwnProperty(a)||(c[a]={});var e=Math.random().toString(35);return c[a][e]=[b,!!d],e},this.unsubscribe=function(a){for(var b in c)if(c[b][a])return delete c[b][a],!0;return!1},this.publish=function(d){if(c.hasOwnProperty(d)){var e=Array.prototype.slice.call(arguments,1),f=[];for(var g in c[d]){var h=c[d][g];try{h[0].apply(b,e)}catch(i){a.console&&console.error("jsPDF PubSub Error",i.message,i)}h[1]&&f.push(g)}f.length&&f.forEach(this.unsubscribe)}}}function c(f,g,h,i){var j={};"object"==typeof f&&(j=f,f=j.orientation,g=j.unit||g,h=j.format||h,i=j.compress||j.compressPdf||i),g=g||"mm",h=h||"a4",f=(""+(f||"P")).toLowerCase();var k,l,m,n,o,p,q,r,s,t=((""+h).toLowerCase(),!!i&&"function"==typeof Uint8Array),u=j.textColor||"0 g",v=j.drawColor||"0 G",w=j.fontSize||16,x=j.lineHeight||1.15,y=j.lineWidth||.200025,z=2,A=!1,B=[],C={},D={},E=0,F=[],G=[],H=[],I=[],J=[],K=0,L=0,M=0,N={title:"",subject:"",author:"",keywords:"",creator:""},O={},P=new b(O),Q=function(a){return a.toFixed(2)},R=function(a){return a.toFixed(3)},S=function(a){return("0"+parseInt(a)).slice(-2)},T=function(a){A?F[n].push(a):(M+=a.length+1,I.push(a))},U=function(){return z++,B[z]=M,T(z+" 0 obj"),z},V=function(){var a=2*F.length+1;a+=J.length;var b={objId:a,content:""};return J.push(b),b},W=function(){return z++,B[z]=function(){return M},z},X=function(a){B[a]=M},Y=function(a){T("stream"),T(a),T("endstream")},Z=function(){var b,d,e,f,g,h,i,j,k,m=[];for(i=a.adler32cs||c.adler32cs,t&&"undefined"==typeof i&&(t=!1),b=1;b<=E;b++){if(m.push(U()),j=(o=H[b].width)*l,k=(p=H[b].height)*l,T("<</Type /Page"),T("/Parent 1 0 R"),T("/Resources 2 0 R"),T("/MediaBox [0 0 "+Q(j)+" "+Q(k)+"]"),P.publish("putPage",{pageNumber:b,page:F[b]}),T("/Contents "+(z+1)+" 0 R"),T(">>"),T("endobj"),d=F[b].join("\n"),U(),t){for(e=[],f=d.length;f--;)e[f]=d.charCodeAt(f);h=i.from(d),g=new Deflater(6),g.append(new Uint8Array(e)),d=g.flush(),e=new Uint8Array(d.length+6),e.set(new Uint8Array([120,156])),e.set(d,2),e.set(new Uint8Array([255&h,h>>8&255,h>>16&255,h>>24&255]),d.length+2),d=String.fromCharCode.apply(null,e),T("<</Length "+d.length+" /Filter [/FlateDecode]>>")}else T("<</Length "+d.length+">>");Y(d),T("endobj")}B[1]=M,T("1 0 obj"),T("<</Type /Pages");var n="/Kids [";for(f=0;f<E;f++)n+=m[f]+" 0 R ";T(n+"]"),T("/Count "+E),T(">>"),T("endobj"),P.publish("postPutPages")},$=function(a){a.objectNumber=U(),T("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"==typeof a.encoding&&T("/Encoding/"+a.encoding),T("/Subtype/Type1>>"),T("endobj")},_=function(){for(var a in C)C.hasOwnProperty(a)&&$(C[a])},aa=function(){P.publish("putXobjectDict")},ba=function(){T("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),T("/Font <<");for(var a in C)C.hasOwnProperty(a)&&T("/"+a+" "+C[a].objectNumber+" 0 R");T(">>"),T("/XObject <<"),aa(),T(">>")},ca=function(){_(),P.publish("putResources"),B[2]=M,T("2 0 obj"),T("<<"),ba(),T(">>"),T("endobj"),P.publish("postPutResources")},da=function(){P.publish("putAdditionalObjects");for(var a=0;a<J.length;a++){var b=J[a];B[b.objId]=M,T(b.objId+" 0 obj"),T(b.content),T("endobj")}z+=J.length,P.publish("postPutAdditionalObjects")},ea=function(a,b,c){D.hasOwnProperty(b)||(D[b]={}),D[b][c]=a},fa=function(a,b,c,d){var e="F"+(Object.keys(C).length+1).toString(10),f=C[e]={id:e,PostScriptName:a,fontName:b,fontStyle:c,encoding:d,metadata:{}};return ea(e,b,c),P.publish("addFont",f),e},ga=function(){for(var a="helvetica",b="times",c="courier",d="normal",e="bold",f="italic",g="bolditalic",h="StandardEncoding",i="zapfdingbats",j=[["Helvetica",a,d],["Helvetica-Bold",a,e],["Helvetica-Oblique",a,f],["Helvetica-BoldOblique",a,g],["Courier",c,d],["Courier-Bold",c,e],["Courier-Oblique",c,f],["Courier-BoldOblique",c,g],["Times-Roman",b,d],["Times-Bold",b,e],["Times-Italic",b,f],["Times-BoldItalic",b,g],["ZapfDingbats",i]],k=0,l=j.length;k<l;k++){var m=fa(j[k][0],j[k][1],j[k][2],h),n=j[k][0].split("-");ea(m,n[0],n[1]||"")}P.publish("addFonts",{fonts:C,dictionary:D})},ha=function(b){return b.foo=function(){try{return b.apply(this,arguments)}catch(c){var d=c.stack||"";~d.indexOf(" at ")&&(d=d.split(" at ")[1]);var e="Error in function "+d.split("\n")[0].split("<")[0]+": "+c.message;if(!a.console)throw new Error(e);a.console.error(e,c),a.alert&&alert(e)}},b.foo.bar=b,b.foo},ia=function(a,b){var c,d,e,f,g,h,i,j,l;if(b=b||{},e=b.sourceEncoding||"Unicode",g=b.outputEncoding,(b.autoencode||g)&&C[k].metadata&&C[k].metadata[e]&&C[k].metadata[e].encoding&&(f=C[k].metadata[e].encoding,!g&&C[k].encoding&&(g=C[k].encoding),!g&&f.codePages&&(g=f.codePages[0]),"string"==typeof g&&(g=f[g]),g)){for(i=!1,h=[],c=0,d=a.length;c<d;c++)j=g[a.charCodeAt(c)],j?h.push(String.fromCharCode(j)):h.push(a[c]),h[c].charCodeAt(0)>>8&&(i=!0);a=h.join("")}for(c=a.length;void 0===i&&0!==c;)a.charCodeAt(c-1)>>8&&(i=!0),c--;if(!i)return a;for(h=b.noBOM?[]:[254,255],c=0,d=a.length;c<d;c++){if(j=a.charCodeAt(c),l=j>>8,l>>8)throw new Error("Character at position "+c+" of string '"+a+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");h.push(l),h.push(j-(l<<8))}return String.fromCharCode.apply(void 0,h)},ja=function(a,b){return ia(a,b).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ka=function(){T("/Producer (jsPDF "+c.version+")");for(var a in N)N.hasOwnProperty(a)&&N[a]&&T("/"+a.substr(0,1).toUpperCase()+a.substr(1)+" ("+ja(N[a])+")");var b=new Date,d=b.getTimezoneOffset(),e=d<0?"+":"-",f=Math.floor(Math.abs(d/60)),g=Math.abs(d%60),h=[e,S(f),"'",S(g),"'"].join("");T(["/CreationDate (D:",b.getFullYear(),S(b.getMonth()+1),S(b.getDate()),S(b.getHours()),S(b.getMinutes()),S(b.getSeconds()),h,")"].join(""))},la=function(){switch(T("/Type /Catalog"),T("/Pages 1 0 R"),r||(r="fullwidth"),r){case"fullwidth":T("/OpenAction [3 0 R /FitH null]");break;case"fullheight":T("/OpenAction [3 0 R /FitV null]");break;case"fullpage":T("/OpenAction [3 0 R /Fit]");break;case"original":T("/OpenAction [3 0 R /XYZ null null 1]");break;default:var a=""+r;"%"===a.substr(a.length-1)&&(r=parseInt(r)/100),"number"==typeof r&&T("/OpenAction [3 0 R /XYZ null null "+Q(r)+"]")}switch(s||(s="continuous"),s){case"continuous":T("/PageLayout /OneColumn");break;case"single":T("/PageLayout /SinglePage");break;case"two":case"twoleft":T("/PageLayout /TwoColumnLeft");break;case"tworight":T("/PageLayout /TwoColumnRight")}q&&T("/PageMode /"+q),P.publish("putCatalog")},ma=function(){T("/Size "+(z+1)),T("/Root "+z+" 0 R"),T("/Info "+(z-1)+" 0 R")},na=function(a,b){var c="string"==typeof b&&b.toLowerCase();if("string"==typeof a){var d=a.toLowerCase();e.hasOwnProperty(d)&&(a=e[d][0]/l,b=e[d][1]/l)}if(Array.isArray(a)&&(b=a[1],a=a[0]),c){switch(c.substr(0,1)){case"l":b>a&&(c="s");break;case"p":a>b&&(c="s")}"s"===c&&(m=a,a=b,b=m)}A=!0,F[++E]=[],H[E]={width:Number(a)||o,height:Number(b)||p},G[E]={},qa(E)},oa=function(){na.apply(this,arguments),T(Q(y*l)+" w"),T(v),0!==K&&T(K+" J"),0!==L&&T(L+" j"),P.publish("addPage",{pageNumber:E})},pa=function(a){a>0&&a<=E&&(F.splice(a,1),H.splice(a,1),E--,
n>E&&(n=E),this.setPage(n))},qa=function(a){a>0&&a<=E&&(n=a,o=H[a].width,p=H[a].height)},ra=function(a,b){var c;switch(a=void 0!==a?a:C[k].fontName,b=void 0!==b?b:C[k].fontStyle,void 0!==a&&(a=a.toLowerCase()),a){case"sans-serif":case"verdana":case"arial":case"helvetica":a="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":a="courier";break;case"serif":case"cursive":case"fantasy":default:a="times"}try{c=D[a][b]}catch(d){}return c||(c=D.times[b],null==c&&(c=D.times.normal)),c},sa=function(){A=!1,z=2,M=0,I=[],B=[],J=[],P.publish("buildDocument"),T("%PDF-"+d),Z(),da(),ca(),U(),T("<<"),ka(),T(">>"),T("endobj"),U(),T("<<"),la(),T(">>"),T("endobj");var a,b=M,c="0000000000";for(T("xref"),T("0 "+(z+1)),T(c+" 65535 f "),a=1;a<=z;a++){var e=B[a];T("function"==typeof e?(c+B[a]()).slice(-10)+" 00000 n ":(c+B[a]).slice(-10)+" 00000 n ")}return T("trailer"),T("<<"),ma(),T(">>"),T("startxref"),T(""+b),T("%%EOF"),A=!0,I.join("\n")},ta=function(a){var b="S";return"F"===a?b="f":"FD"===a||"DF"===a?b="B":"f"!==a&&"f*"!==a&&"B"!==a&&"B*"!==a||(b=a),b},ua=function(){for(var a=sa(),b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c);b--;)d[b]=a.charCodeAt(b);return c},va=function(){return new Blob([ua()],{type:"application/pdf"})},wa=ha(function(b,c){var d="dataur"===(""+b).substr(0,6)?"data:application/pdf;base64,"+btoa(sa()):0;switch(b){case void 0:return sa();case"save":if(navigator.getUserMedia&&(void 0===a.URL||void 0===a.URL.createObjectURL))return O.output("dataurlnewwindow");saveAs(va(),c),"function"==typeof saveAs.unload&&a.setTimeout&&setTimeout(saveAs.unload,911);break;case"arraybuffer":return ua();case"blob":return va();case"bloburi":case"bloburl":return a.URL&&a.URL.createObjectURL(va())||void 0;case"datauristring":case"dataurlstring":return d;case"dataurlnewwindow":var e=a.open(d);if(e||"undefined"==typeof safari)return e;case"datauri":case"dataurl":return a.document.location.href=d;default:throw new Error('Output type "'+b+'" is not supported.')}});switch(g){case"pt":l=1;break;case"mm":l=72/25.4000508;break;case"cm":l=72/2.54000508;break;case"in":l=72;break;case"px":l=96/72;break;case"pc":l=12;break;case"em":l=12;break;case"ex":l=6;break;default:throw"Invalid unit: "+g}O.internal={pdfEscape:ja,getStyle:ta,getFont:function(){return C[ra.apply(O,arguments)]},getFontSize:function(){return w},getLineHeight:function(){return w*x},write:function(a){T(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return Q(a*l)},getVerticalCoordinateString:function(a){return Q((p-a)*l)},collections:{},newObject:U,newAdditionalObject:V,newObjectDeferred:W,newObjectDeferredBegin:X,putStream:Y,events:P,scaleFactor:l,pageSize:{get width(){return o},get height(){return p}},output:function(a,b){return wa(a,b)},getNumberOfPages:function(){return F.length-1},pages:F,out:T,f2:Q,getPageInfo:function(a){var b=2*(a-1)+3;return{objId:b,pageNumber:a,pageContext:G[a]}},getCurrentPageInfo:function(){var a=2*(n-1)+3;return{objId:a,pageNumber:n,pageContext:G[n]}},getPDFVersion:function(){return d}},O.addPage=function(){return oa.apply(this,arguments),this},O.setPage=function(){return qa.apply(this,arguments),this},O.insertPage=function(a){return this.addPage(),this.movePage(n,a),this},O.movePage=function(a,b){if(a>b){for(var c=F[a],d=H[a],e=G[a],f=a;f>b;f--)F[f]=F[f-1],H[f]=H[f-1],G[f]=G[f-1];F[b]=c,H[b]=d,G[b]=e,this.setPage(b)}else if(a<b){for(var c=F[a],d=H[a],e=G[a],f=a;f<b;f++)F[f]=F[f+1],H[f]=H[f+1],G[f]=G[f+1];F[b]=c,H[b]=d,G[b]=e,this.setPage(b)}return this},O.deletePage=function(){return pa.apply(this,arguments),this},O.setDisplayMode=function(a,b,c){r=a,s=b,q=c;var d=[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"];if(d.indexOf(c)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+c+'" is not recognized.');return this},O.text=function(a,b,c,d,e,f){function g(a){return a=a.split("\t").join(Array(j.TabLen||9).join(" ")),ja(a,d)}"number"==typeof a&&(m=c,c=b,b=a,a=m),"string"==typeof a&&(a=a.match(/[\n\r]/)?a.split(/\r\n|\r|\n/g):[a]),"string"==typeof e&&(f=e,e=null),"string"==typeof d&&(f=d,d=null),"number"==typeof d&&(e=d,d=null);var h,i="",n="Td";if(e){e*=Math.PI/180;var o=Math.cos(e),q=Math.sin(e);i=[Q(o),Q(q),Q(q*-1),Q(o),""].join(" "),n="Tm"}d=d||{},"noBOM"in d||(d.noBOM=!0),"autoencode"in d||(d.autoencode=!0);var r="",s=this.internal.getCurrentPageInfo().pageContext;if(!0===d.stroke?s.lastTextWasStroke!==!0&&(r="1 Tr\n",s.lastTextWasStroke=!0):(s.lastTextWasStroke&&(r="0 Tr\n"),s.lastTextWasStroke=!1),"undefined"==typeof this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof a)a=g(a);else{if("[object Array]"!==Object.prototype.toString.call(a))throw new Error('Type of text must be string or Array. "'+a+'" is not recognized.');for(var t=a.concat(),v=[],y=t.length;y--;)v.push(g(t.shift()));var z=Math.ceil((p-c-this._runningPageHeight)*l/(w*x));if(0<=z&&z<v.length+1,f){var A,B,C,D=w*x,E=a.map(function(a){return this.getStringUnitWidth(a)*w/l},this);if(C=Math.max.apply(Math,E),"center"===f)A=b-C/2,b-=E[0]/2;else{if("right"!==f)throw new Error('Unrecognized alignment option, use "center" or "right".');A=b-C,b-=E[0]}B=b,a=v[0];for(var F=1,y=v.length;F<y;F++){var G=C-E[F];"center"===f&&(G/=2),a+=") Tj\n"+(A-B+G)+" -"+D+" Td ("+v[F],B=A+G}}else a=v.join(") Tj\nT* (")}var H;return h||(H=Q((p-c)*l)),T("BT\n/"+k+" "+w+" Tf\n"+w*x+" TL\n"+r+u+"\n"+i+Q(b*l)+" "+H+" "+n+"\n("+a+") Tj\nET"),h&&this.text(h,b,c),this},O.lstext=function(a,b,c,d){console.warn("jsPDF.lstext is deprecated");for(var e=0,f=a.length;e<f;e++,b+=d)this.text(a[e],b,c);return this},O.line=function(a,b,c,d){return this.lines([[c-a,d-b]],a,b)},O.clip=function(){T("W"),T("S")},O.clip_fixed=function(a){T("evenodd"===a?"W*":"W"),T("n")},O.lines=function(a,b,c,d,e,f){var g,h,i,j,k,n,o,q,r,s,t;for("number"==typeof a&&(m=c,c=b,b=a,a=m),d=d||[1,1],T(R(b*l)+" "+R((p-c)*l)+" m "),g=d[0],h=d[1],j=a.length,s=b,t=c,i=0;i<j;i++)k=a[i],2===k.length?(s=k[0]*g+s,t=k[1]*h+t,T(R(s*l)+" "+R((p-t)*l)+" l")):(n=k[0]*g+s,o=k[1]*h+t,q=k[2]*g+s,r=k[3]*h+t,s=k[4]*g+s,t=k[5]*h+t,T(R(n*l)+" "+R((p-o)*l)+" "+R(q*l)+" "+R((p-r)*l)+" "+R(s*l)+" "+R((p-t)*l)+" c"));return f&&T(" h"),null!==e&&T(ta(e)),this},O.rect=function(a,b,c,d,e){ta(e);return T([Q(a*l),Q((p-b)*l),Q(c*l),Q(-d*l),"re"].join(" ")),null!==e&&T(ta(e)),this},O.triangle=function(a,b,c,d,e,f,g){return this.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g,!0),this},O.roundedRect=function(a,b,c,d,e,f,g){var h=4/3*(Math.SQRT2-1);return this.lines([[c-2*e,0],[e*h,0,e,f-f*h,e,f],[0,d-2*f],[0,f*h,-(e*h),f,-e,f],[-c+2*e,0],[-(e*h),0,-e,-(f*h),-e,-f],[0,-d+2*f],[0,-(f*h),e*h,-f,e,-f]],a+e,b,[1,1],g),this},O.ellipse=function(a,b,c,d,e){var f=4/3*(Math.SQRT2-1)*c,g=4/3*(Math.SQRT2-1)*d;return T([Q((a+c)*l),Q((p-b)*l),"m",Q((a+c)*l),Q((p-(b-g))*l),Q((a+f)*l),Q((p-(b-d))*l),Q(a*l),Q((p-(b-d))*l),"c"].join(" ")),T([Q((a-f)*l),Q((p-(b-d))*l),Q((a-c)*l),Q((p-(b-g))*l),Q((a-c)*l),Q((p-b)*l),"c"].join(" ")),T([Q((a-c)*l),Q((p-(b+g))*l),Q((a-f)*l),Q((p-(b+d))*l),Q(a*l),Q((p-(b+d))*l),"c"].join(" ")),T([Q((a+f)*l),Q((p-(b+d))*l),Q((a+c)*l),Q((p-(b+g))*l),Q((a+c)*l),Q((p-b)*l),"c"].join(" ")),null!==e&&T(ta(e)),this},O.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)},O.setProperties=function(a){for(var b in N)N.hasOwnProperty(b)&&a[b]&&(N[b]=a[b]);return this},O.setFontSize=function(a){return w=a,this},O.setFont=function(a,b){return k=ra(a,b),this},O.setFontStyle=O.setFontType=function(a){return k=ra(void 0,a),this},O.getFontList=function(){var a,b,c,d={};for(a in D)if(D.hasOwnProperty(a)){d[a]=c=[];for(b in D[a])D[a].hasOwnProperty(b)&&c.push(b)}return d},O.addFont=function(a,b,c){fa(a,b,c,"StandardEncoding")},O.setLineWidth=function(a){return T((a*l).toFixed(2)+" w"),this},O.setDrawColor=function(a,b,c,d){var e;return e=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" G":Q(a/255)+" G":void 0===d?"string"==typeof a?[a,b,c,"RG"].join(" "):[Q(a/255),Q(b/255),Q(c/255),"RG"].join(" "):"string"==typeof a?[a,b,c,d,"K"].join(" "):[Q(a),Q(b),Q(c),Q(d),"K"].join(" "),T(e),this},O.setFillColor=function(a,b,c,d){var e;return void 0===b||void 0===d&&a===b===c?e="string"==typeof a?a+" g":Q(a/255)+" g":void 0===d||"object"==typeof d?(e="string"==typeof a?[a,b,c,"rg"].join(" "):[Q(a/255),Q(b/255),Q(c/255),"rg"].join(" "),d&&0===d.a&&(e=["255","255","255","rg"].join(" "))):e="string"==typeof a?[a,b,c,d,"k"].join(" "):[Q(a),Q(b),Q(c),Q(d),"k"].join(" "),T(e),this},O.setTextColor=function(a,b,c){if("string"==typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)){var d=parseInt(a.substr(1),16);a=d>>16&255,b=d>>8&255,c=255&d}return u=0===a&&0===b&&0===c||"undefined"==typeof b?R(a/255)+" g":[R(a/255),R(b/255),R(c/255),"rg"].join(" "),this},O.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},O.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw new Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return K=b,T(b+" J"),this},O.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw new Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return L=b,T(b+" j"),this},O.output=wa,O.save=function(a){O.output("save",a)};for(var xa in c.API)c.API.hasOwnProperty(xa)&&("events"===xa&&c.API.events.length?!function(a,b){var c,d,e;for(e=b.length-1;e!==-1;e--)c=b[e][0],d=b[e][1],a.subscribe.apply(a,[c].concat("function"==typeof d?[d]:d))}(P,c.API.events):O[xa]=c.API[xa]);return ga(),k="F1",oa(h,f),P.publish("initialized"),O}var d="1.3",e={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return c.API={events:[]},c.version="1.x-master","function"==typeof define&&define.amd?define("jsPDF",function(){return c}):"undefined"!=typeof module&&module.exports?module.exports=c:a.jsPDF=c,c}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){!function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}});return a}(),a.fullCalendar.datepickerLang("ar-ma","ar",{closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ar-ma",{buttonText:{month:"شهر",week:"أسبوع",day:"يوم",list:"أجندة"},allDayText:"اليوم كله",eventLimitText:"أخرى"})}(),function(){!function(){"use strict";var a={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},c={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},d=(b.defineLocale||b.lang).call(b,"ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(a){return"م"===a},meridiem:function(a,b,c){return 12>a?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(a){return a.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(a){return c[a]}).replace(/،/g,",")},postformat:function(b){return b.replace(/\d/g,function(b){return a[b]}).replace(/,/g,"،")},week:{dow:6,doy:12}});return d}(),a.fullCalendar.datepickerLang("ar-sa","ar",{closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ar-sa",{buttonText:{month:"شهر",week:"أسبوع",day:"يوم",list:"أجندة"},allDayText:"اليوم كله",eventLimitText:"أخرى"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("ar-tn","ar",{closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ar-tn",{buttonText:{month:"شهر",week:"أسبوع",day:"يوم",list:"أجندة"},allDayText:"اليوم كله",eventLimitText:"أخرى"})}(),function(){!function(){"use strict";var a={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},c={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},d=function(a){return 0===a?0:1===a?1:2===a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5},e={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},f=function(a){return function(b,c,f,g){var h=d(b),i=e[a][d(b)];return 2===h&&(i=i[c?0:1]),i.replace(/%d/i,b)}},g=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"],h=(b.defineLocale||b.lang).call(b,"ar",{months:g,monthsShort:g,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(a){return"م"===a},meridiem:function(a,b,c){return 12>a?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:f("s"),m:f("m"),mm:f("m"),h:f("h"),hh:f("h"),d:f("d"),dd:f("d"),M:f("M"),MM:f("M"),y:f("y"),yy:f("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(a){return c[a]}).replace(/،/g,",")},postformat:function(b){return b.replace(/\d/g,function(b){return a[b]}).replace(/,/g,"،")},week:{dow:6,doy:12}});return h}(),a.fullCalendar.datepickerLang("ar","ar",{closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ar",{buttonText:{month:"شهر",week:"أسبوع",day:"يوم",list:"أجندة"},allDayText:"اليوم كله",eventLimitText:"أخرى"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-ев":0===c?a+"-ен":c>10&&20>c?a+"-ти":1===b?a+"-ви":2===b?a+"-ри":7===b||8===b?a+"-ми":a+"-ти"},week:{dow:1,doy:7}});return a}(),a.fullCalendar.datepickerLang("bg","bg",{closeText:"затвори",prevText:"&#x3C;назад",nextText:"напред&#x3E;",nextBigText:"&#x3E;&#x3E;",currentText:"днес",monthNames:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthNamesShort:["Яну","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Нов","Дек"],dayNames:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"],dayNamesShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб"],dayNamesMin:["Не","По","Вт","Ср","Че","Пе","Съ"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("bg",{buttonText:{month:"Месец",week:"Седмица",day:"Ден",list:"График"},allDayText:"Цял ден",eventLimitText:function(a){return"+още "+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"è";return"w"!==b&&"W"!==b||(c="a"),a+c},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("ca","ca",{closeText:"Tanca",prevText:"Anterior",nextText:"Següent",currentText:"Avui",monthNames:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],monthNamesShort:["gen","feb","març","abr","maig","juny","jul","ag","set","oct","nov","des"],dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],dayNamesMin:["dg","dl","dt","dc","dj","dv","ds"],weekHeader:"Set",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ca",{buttonText:{month:"Mes",week:"Setmana",day:"Dia",list:"Agenda"},allDayText:"Tot el dia",eventLimitText:"més"})}(),function(){!function(){"use strict";function a(a){return a>1&&5>a&&1!==~~(a/10)}function c(b,c,d,e){var f=b+" ";switch(d){case"s":return c||e?"pár sekund":"pár sekundami";case"m":return c?"minuta":e?"minutu":"minutou";case"mm":return c||e?f+(a(b)?"minuty":"minut"):f+"minutami";case"h":return c?"hodina":e?"hodinu":"hodinou";case"hh":return c||e?f+(a(b)?"hodiny":"hodin"):f+"hodinami";case"d":return c||e?"den":"dnem";case"dd":return c||e?f+(a(b)?"dny":"dní"):f+"dny";case"M":return c||e?"měsíc":"měsícem";case"MM":return c||e?f+(a(b)?"měsíce":"měsíců"):f+"měsíci";case"y":return c||e?"rok":"rokem";case"yy":return c||e?f+(a(b)?"roky":"let"):f+"lety"}}var d="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),e="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),f=(b.defineLocale||b.lang).call(b,"cs",{months:d,monthsShort:e,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(d,e),shortMonthsParse:function(a){var b,c=[];for(b=0;12>b;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(e),longMonthsParse:function(a){var b,c=[];for(b=0;12>b;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(d),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:c,m:c,mm:c,h:c,hh:c,d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}(),a.fullCalendar.datepickerLang("cs","cs",{closeText:"Zavřít",prevText:"&#x3C;Dříve",nextText:"Později&#x3E;",currentText:"Nyní",monthNames:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthNamesShort:["led","úno","bře","dub","kvě","čer","čvc","srp","zář","říj","lis","pro"],dayNames:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],dayNamesShort:["ne","po","út","st","čt","pá","so"],dayNamesMin:["ne","po","út","st","čt","pá","so"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("cs",{buttonText:{month:"Měsíc",week:"Týden",day:"Den",list:"Agenda"},allDayText:"Celý den",eventLimitText:function(a){return"+další: "+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("da","da",{closeText:"Luk",prevText:"&#x3C;Forrige",nextText:"Næste&#x3E;",currentText:"Idag",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],dayNamesShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayNamesMin:["Sø","Ma","Ti","On","To","Fr","Lø"],weekHeader:"Uge",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("da",{buttonText:{month:"Måned",week:"Uge",day:"Dag",list:"Agenda"},allDayText:"Hele dagen",eventLimitText:"flere"})}(),function(){!function(){"use strict";function a(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}var c=(b.defineLocale||b.lang).call(b,"de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:a,mm:"%d Minuten",h:a,hh:"%d Stunden",d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return c}(),a.fullCalendar.datepickerLang("de-at","de",{closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("de-at",{buttonText:{month:"Monat",week:"Woche",day:"Tag",list:"Terminübersicht"},allDayText:"Ganztägig",eventLimitText:function(a){return"+ weitere "+a}})}(),function(){!function(){"use strict";function a(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}var c=(b.defineLocale||b.lang).call(b,"de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:a,mm:"%d Minuten",h:a,hh:"%d Stunden",d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return c}(),a.fullCalendar.datepickerLang("de","de",{closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],
dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("de",{buttonText:{month:"Monat",week:"Woche",day:"Tag",list:"Terminübersicht"},allDayText:"Ganztägig",eventLimitText:function(a){return"+ weitere "+a}})}(),function(){!function(){"use strict";function a(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}var c=(b.defineLocale||b.lang).call(b,"el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month()]:this._monthsNominativeEl[a.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(a,b,c){return a>11?c?"μμ":"ΜΜ":c?"πμ":"ΠΜ"},isPM:function(a){return"μ"===(a+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(b,c){var d=this._calendarEl[b],e=c&&c.hours();return a(d)&&(d=d.apply(c)),d.replace("{}",e%12===1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}});return c}(),a.fullCalendar.datepickerLang("el","el",{closeText:"Κλείσιμο",prevText:"Προηγούμενος",nextText:"Επόμενος",currentText:"Σήμερα",monthNames:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthNamesShort:["Ιαν","Φεβ","Μαρ","Απρ","Μαι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],dayNames:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],dayNamesShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayNamesMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα"],weekHeader:"Εβδ",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("el",{buttonText:{month:"Μήνας",week:"Εβδομάδα",day:"Ημέρα",list:"Ατζέντα"},allDayText:"Ολοήμερο",eventLimitText:"περισσότερα"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("en-au","en-AU",{closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("en-au")}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}});return a}(),a.fullCalendar.lang("en-ca")}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("en-gb","en-GB",{closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("en-gb")}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return a}(),a.fullCalendar.lang("en-ie")}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("en-nz","en-NZ",{closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("en-nz")}(),function(){!function(){"use strict";var a="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),c="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),d=(b.defineLocale||b.lang).call(b,"es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(b,d){return/-MMM-/.test(d)?c[b.month()]:a[b.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return d}(),a.fullCalendar.datepickerLang("es","es",{closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("es",{buttonText:{month:"Mes",week:"Semana",day:"Día",list:"Agenda"},allDayHtml:"Todo<br/>el día",eventLimitText:"más"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return a}(),a.fullCalendar.datepickerLang("eu","eu",{closeText:"Egina",prevText:"&#x3C;Aur",nextText:"Hur&#x3E;",currentText:"Gaur",monthNames:["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua"],monthNamesShort:["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe."],dayNames:["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],dayNamesShort:["ig.","al.","ar.","az.","og.","ol.","lr."],dayNamesMin:["ig","al","ar","az","og","ol","lr"],weekHeader:"As",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("eu",{buttonText:{month:"Hilabetea",week:"Astea",day:"Eguna",list:"Agenda"},allDayHtml:"Egun<br/>osoa",eventLimitText:"gehiago"})}(),function(){!function(){"use strict";var a={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},c={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"},d=(b.defineLocale||b.lang).call(b,"fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(a){return/بعد از ظهر/.test(a)},meridiem:function(a,b,c){return 12>a?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(a){return a.replace(/[۰-۹]/g,function(a){return c[a]}).replace(/،/g,",")},postformat:function(b){return b.replace(/\d/g,function(b){return a[b]}).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}});return d}(),a.fullCalendar.datepickerLang("fa","fa",{closeText:"بستن",prevText:"&#x3C;قبلی",nextText:"بعدی&#x3E;",currentText:"امروز",monthNames:["ژانویه","فوریه","مارس","آوریل","مه","ژوئن","ژوئیه","اوت","سپتامبر","اکتبر","نوامبر","دسامبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayNamesShort:["ی","د","س","چ","پ","ج","ش"],dayNamesMin:["ی","د","س","چ","پ","ج","ش"],weekHeader:"هف",dateFormat:"yy/mm/dd",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("fa",{buttonText:{month:"ماه",week:"هفته",day:"روز",list:"برنامه"},allDayText:"تمام روز",eventLimitText:function(a){return"بیش از "+a}})}(),function(){!function(){"use strict";function a(a,b,d,e){var f="";switch(d){case"s":return e?"muutaman sekunnin":"muutama sekunti";case"m":return e?"minuutin":"minuutti";case"mm":f=e?"minuutin":"minuuttia";break;case"h":return e?"tunnin":"tunti";case"hh":f=e?"tunnin":"tuntia";break;case"d":return e?"päivän":"päivä";case"dd":f=e?"päivän":"päivää";break;case"M":return e?"kuukauden":"kuukausi";case"MM":f=e?"kuukauden":"kuukautta";break;case"y":return e?"vuoden":"vuosi";case"yy":f=e?"vuoden":"vuotta"}return f=c(a,e)+" "+f}function c(a,b){return 10>a?b?e[a]:d[a]:a}var d="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),e=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",d[7],d[8],d[9]],f=(b.defineLocale||b.lang).call(b,"fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}(),a.fullCalendar.datepickerLang("fi","fi",{closeText:"Sulje",prevText:"&#xAB;Edellinen",nextText:"Seuraava&#xBB;",currentText:"Tänään",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],weekHeader:"Vk",dateFormat:"d.m.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("fi",{buttonText:{month:"Kuukausi",week:"Viikko",day:"Päivä",list:"Tapahtumat"},allDayText:"Koko päivä",eventLimitText:"lisää"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}});return a}(),a.fullCalendar.datepickerLang("fr-ca","fr-CA",{closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("fr-ca",{buttonText:{year:"Année",month:"Mois",week:"Semaine",day:"Jour",list:"Mon planning"},allDayHtml:"Toute la<br/>journée",eventLimitText:"en plus"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("fr-ch","fr-CH",{closeText:"Fermer",prevText:"&#x3C;Préc",nextText:"Suiv&#x3E;",currentText:"Courant",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("fr-ch",{buttonText:{year:"Année",month:"Mois",week:"Semaine",day:"Jour",list:"Mon planning"},allDayHtml:"Toute la<br/>journée",eventLimitText:"en plus"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("fr","fr",{closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("fr",{buttonText:{year:"Année",month:"Mois",week:"Semaine",day:"Jour",list:"Mon planning"},allDayHtml:"Toute la<br/>journée",eventLimitText:"en plus"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),monthsParseExact:!0,weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return"uns segundos"===a?"nuns segundos":"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:7}});return a}(),a.fullCalendar.datepickerLang("gl","gl",{closeText:"Pechar",prevText:"&#x3C;Ant",nextText:"Seg&#x3E;",currentText:"Hoxe",monthNames:["Xaneiro","Febreiro","Marzo","Abril","Maio","Xuño","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthNamesShort:["Xan","Feb","Mar","Abr","Mai","Xuñ","Xul","Ago","Set","Out","Nov","Dec"],dayNames:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mér","Xov","Ven","Sáb"],dayNamesMin:["Do","Lu","Ma","Mé","Xo","Ve","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("gl",{buttonText:{month:"Mes",week:"Semana",day:"Día",list:"Axenda"},allDayHtml:"Todo<br/>o día",eventLimitText:"máis"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(a){return 2===a?"שעתיים":a+" שעות"},d:"יום",dd:function(a){return 2===a?"יומיים":a+" ימים"},M:"חודש",MM:function(a){return 2===a?"חודשיים":a+" חודשים"},y:"שנה",yy:function(a){return 2===a?"שנתיים":a%10===0&&10!==a?a+" שנה":a+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(a){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(a)},meridiem:function(a,b,c){return 5>a?"לפנות בוקר":10>a?"בבוקר":12>a?c?'לפנה"צ':"לפני הצהריים":18>a?c?'אחה"צ':"אחרי הצהריים":"בערב"}});return a}(),a.fullCalendar.datepickerLang("he","he",{closeText:"סגור",prevText:"&#x3C;הקודם",nextText:"הבא&#x3E;",currentText:"היום",monthNames:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthNamesShort:["ינו","פבר","מרץ","אפר","מאי","יוני","יולי","אוג","ספט","אוק","נוב","דצמ"],dayNames:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],dayNamesShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayNamesMin:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("he",{defaultButtonText:{month:"חודש",week:"שבוע",day:"יום",list:"סדר יום"},weekNumberTitle:"שבוע",allDayText:"כל היום",eventLimitText:"אחר"})}(),function(){!function(){"use strict";var a={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},c={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},d=(b.defineLocale||b.lang).call(b,"hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(a){return a.replace(/[१२३४५६७८९०]/g,function(a){return c[a]})},postformat:function(b){return b.replace(/\d/g,function(b){return a[b]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(a,b){return 12===a&&(a=0),"रात"===b?4>a?a:a+12:"सुबह"===b?a:"दोपहर"===b?a>=10?a:a+12:"शाम"===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"रात":10>a?"सुबह":17>a?"दोपहर":20>a?"शाम":"रात"},week:{dow:0,doy:6}});return d}(),a.fullCalendar.datepickerLang("hi","hi",{closeText:"बंद",prevText:"पिछला",nextText:"अगला",currentText:"आज",monthNames:["जनवरी ","फरवरी","मार्च","अप्रेल","मई","जून","जूलाई","अगस्त ","सितम्बर","अक्टूबर","नवम्बर","दिसम्बर"],monthNamesShort:["जन","फर","मार्च","अप्रेल","मई","जून","जूलाई","अग","सित","अक्ट","नव","दि"],dayNames:["रविवार","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],dayNamesShort:["रवि","सोम","मंगल","बुध","गुरु","शुक्र","शनि"],dayNamesMin:["रवि","सोम","मंगल","बुध","गुरु","शुक्र","शनि"],weekHeader:"हफ्ता",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("hi",{buttonText:{month:"महीना",week:"सप्ताह",day:"दिन",list:"कार्यसूची"},allDayText:"सभी दिन",eventLimitText:function(a){return"+अधिक "+a}})}(),function(){!function(){"use strict";function a(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":
return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}var c=(b.defineLocale||b.lang).call(b,"hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:a,mm:a,h:a,hh:a,d:"dan",dd:a,M:"mjesec",MM:a,y:"godinu",yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return c}(),a.fullCalendar.datepickerLang("hr","hr",{closeText:"Zatvori",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Danas",monthNames:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthNamesShort:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Tje",dateFormat:"dd.mm.yy.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("hr",{buttonText:{month:"Mjesec",week:"Tjedan",day:"Dan",list:"Raspored"},allDayText:"Cijeli dan",eventLimitText:function(a){return"+ još "+a}})}(),function(){!function(){"use strict";function a(a,b,c,d){var e=a;switch(c){case"s":return d||b?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(d||b?" perc":" perce");case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" óra":" órája");case"hh":return e+(d||b?" óra":" órája");case"d":return"egy"+(d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hónap":" hónapja");case"MM":return e+(d||b?" hónap":" hónapja");case"y":return"egy"+(d||b?" év":" éve");case"yy":return e+(d||b?" év":" éve")}return""}function c(a){return(a?"":"[múlt] ")+"["+d[this.day()]+"] LT[-kor]"}var d="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" "),e=(b.defineLocale||b.lang).call(b,"hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1).toLowerCase()},meridiem:function(a,b,c){return 12>a?c===!0?"de":"DE":c===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return c.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return c.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return e}(),a.fullCalendar.datepickerLang("hu","hu",{closeText:"bezár",prevText:"vissza",nextText:"előre",currentText:"ma",monthNames:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],monthNamesShort:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Szep","Okt","Nov","Dec"],dayNames:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"],dayNamesShort:["Vas","Hét","Ked","Sze","Csü","Pén","Szo"],dayNamesMin:["V","H","K","Sze","Cs","P","Szo"],weekHeader:"Hét",dateFormat:"yy.mm.dd.",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""}),a.fullCalendar.lang("hu",{buttonText:{month:"Hónap",week:"Hét",day:"Nap",list:"Napló"},allDayText:"Egész nap",eventLimitText:"további"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?a>=11?a:a+12:"sore"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"siang":19>a?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});return a}(),a.fullCalendar.datepickerLang("id","id",{closeText:"Tutup",prevText:"&#x3C;mundur",nextText:"maju&#x3E;",currentText:"hari ini",monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agus","Sep","Okt","Nop","Des"],dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayNamesShort:["Min","Sen","Sel","Rab","kam","Jum","Sab"],dayNamesMin:["Mg","Sn","Sl","Rb","Km","jm","Sb"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("id",{buttonText:{month:"Bulan",week:"Minggu",day:"Hari",list:"Agenda"},allDayHtml:"Sehari<br/>penuh",eventLimitText:"lebih"})}(),function(){!function(){"use strict";function a(a){return a%100===11||a%10!==1}function c(b,c,d,e){var f=b+" ";switch(d){case"s":return c||e?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return c?"mínúta":"mínútu";case"mm":return a(b)?f+(c||e?"mínútur":"mínútum"):c?f+"mínúta":f+"mínútu";case"hh":return a(b)?f+(c||e?"klukkustundir":"klukkustundum"):f+"klukkustund";case"d":return c?"dagur":e?"dag":"degi";case"dd":return a(b)?c?f+"dagar":f+(e?"daga":"dögum"):c?f+"dagur":f+(e?"dag":"degi");case"M":return c?"mánuður":e?"mánuð":"mánuði";case"MM":return a(b)?c?f+"mánuðir":f+(e?"mánuði":"mánuðum"):c?f+"mánuður":f+(e?"mánuð":"mánuði");case"y":return c||e?"ár":"ári";case"yy":return a(b)?f+(c||e?"ár":"árum"):f+(c||e?"ár":"ári")}}var d=(b.defineLocale||b.lang).call(b,"is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:c,m:c,mm:c,h:"klukkustund",hh:c,d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return d}(),a.fullCalendar.datepickerLang("is","is",{closeText:"Loka",prevText:"&#x3C; Fyrri",nextText:"Næsti &#x3E;",currentText:"Í dag",monthNames:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Maí","Jún","Júl","Ágú","Sep","Okt","Nóv","Des"],dayNames:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"],dayNamesShort:["Sun","Mán","Þri","Mið","Fim","Fös","Lau"],dayNamesMin:["Su","Má","Þr","Mi","Fi","Fö","La"],weekHeader:"Vika",dateFormat:"dd.mm.yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("is",{buttonText:{month:"Mánuður",week:"Vika",day:"Dagur",list:"Dagskrá"},allDayHtml:"Allan<br/>daginn",eventLimitText:"meira"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("it","it",{closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("it",{buttonText:{month:"Mese",week:"Settimana",day:"Giorno",list:"Agenda"},allDayHtml:"Tutto il<br/>giorno",eventLimitText:function(a){return"+altri "+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"Ah時m分s秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah時m分",LLLL:"YYYY年M月D日Ah時m分 dddd"},meridiemParse:/午前|午後/i,isPM:function(a){return"午後"===a},meridiem:function(a,b,c){return 12>a?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}日/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";default:return a}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}});return a}(),a.fullCalendar.datepickerLang("ja","ja",{closeText:"閉じる",prevText:"&#x3C;前",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"}),a.fullCalendar.lang("ja",{buttonText:{month:"月",week:"週",day:"日",list:"予定リスト"},allDayText:"終日",eventLimitText:function(a){return"他 "+a+" 件"}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"일분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(a){return"오후"===a},meridiem:function(a,b,c){return 12>a?"오전":"오후"}});return a}(),a.fullCalendar.datepickerLang("ko","ko",{closeText:"닫기",prevText:"이전달",nextText:"다음달",currentText:"오늘",monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"년"}),a.fullCalendar.lang("ko",{buttonText:{month:"월",week:"주",day:"일",list:"일정목록"},allDayText:"종일",eventLimitText:"개"})}(),function(){!function(){"use strict";function a(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return b?e[c][0]:e[c][1]}function c(a){var b=a.substr(0,a.indexOf(" "));return e(b)?"a "+a:"an "+a}function d(a){var b=a.substr(0,a.indexOf(" "));return e(b)?"viru "+a:"virun "+a}function e(a){if(a=parseInt(a,10),isNaN(a))return!1;if(0>a)return!0;if(10>a)return a>=4&&7>=a;if(100>a){var b=a%10,c=a/10;return e(0===b?c:b)}if(1e4>a){for(;a>=10;)a/=10;return e(a)}return a/=1e3,e(a)}var f=(b.defineLocale||b.lang).call(b,"lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:c,past:d,s:"e puer Sekonnen",m:a,mm:"%d Minutten",h:a,hh:"%d Stonnen",d:a,dd:"%d Deeg",M:a,MM:"%d Méint",y:a,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}(),a.fullCalendar.datepickerLang("lb","lb",{closeText:"Fäerdeg",prevText:"Zréck",nextText:"Weider",currentText:"Haut",monthNames:["Januar","Februar","Mäerz","Abrëll","Mee","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mäe","Abr","Mee","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonndeg","Méindeg","Dënschdeg","Mëttwoch","Donneschdeg","Freideg","Samschdeg"],dayNamesShort:["Son","Méi","Dën","Mët","Don","Fre","Sam"],dayNamesMin:["So","Mé","Dë","Më","Do","Fr","Sa"],weekHeader:"W",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("lb",{buttonText:{month:"Mount",week:"Woch",day:"Dag",list:"Terminiwwersiicht"},allDayText:"Ganzen Dag",eventLimitText:"méi"})}(),function(){!function(){"use strict";function a(a,b,c,d){return b?"kelios sekundės":d?"kelių sekundžių":"kelias sekundes"}function c(a,b,c,d){return b?e(c)[0]:d?e(c)[1]:e(c)[2]}function d(a){return a%10===0||a>10&&20>a}function e(a){return g[a].split("_")}function f(a,b,f,g){var h=a+" ";return 1===a?h+c(a,b,f[0],g):b?h+(d(a)?e(f)[1]:e(f)[0]):g?h+e(f)[1]:h+(d(a)?e(f)[1]:e(f)[2])}var g={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},h=(b.defineLocale||b.lang).call(b,"lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_")},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:a,m:c,mm:f,h:c,hh:f,d:c,dd:f,M:c,MM:f,y:c,yy:f},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}});return h}(),a.fullCalendar.datepickerLang("lt","lt",{closeText:"Uždaryti",prevText:"&#x3C;Atgal",nextText:"Pirmyn&#x3E;",currentText:"Šiandien",monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthNamesShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],dayNames:["sekmadienis","pirmadienis","antradienis","trečiadienis","ketvirtadienis","penktadienis","šeštadienis"],dayNamesShort:["sek","pir","ant","tre","ket","pen","šeš"],dayNamesMin:["Se","Pr","An","Tr","Ke","Pe","Še"],weekHeader:"SAV",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""}),a.fullCalendar.lang("lt",{buttonText:{month:"Mėnuo",week:"Savaitė",day:"Diena",list:"Darbotvarkė"},allDayText:"Visą dieną",eventLimitText:"daugiau"})}(),function(){!function(){"use strict";function a(a,b,c){return c?b%10===1&&11!==b?a[2]:a[3]:b%10===1&&11!==b?a[0]:a[1]}function c(b,c,d){return b+" "+a(f[d],b,c)}function d(b,c,d){return a(f[d],b,c)}function e(a,b){return b?"dažas sekundes":"dažām sekundēm"}var f={m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")},g=(b.defineLocale||b.lang).call(b,"lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:e,m:d,mm:c,h:d,hh:c,d:d,dd:c,M:d,MM:c,y:d,yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return g}(),a.fullCalendar.datepickerLang("lv","lv",{closeText:"Aizvērt",prevText:"Iepr.",nextText:"Nāk.",currentText:"Šodien",monthNames:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec"],dayNames:["svētdiena","pirmdiena","otrdiena","trešdiena","ceturtdiena","piektdiena","sestdiena"],dayNamesShort:["svt","prm","otr","tre","ctr","pkt","sst"],dayNamesMin:["Sv","Pr","Ot","Tr","Ct","Pk","Ss"],weekHeader:"Ned.",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("lv",{buttonText:{month:"Mēnesis",week:"Nedēļa",day:"Diena",list:"Dienas kārtība"},allDayText:"Visu dienu",eventLimitText:function(a){return"+vēl "+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("nb","nb",{closeText:"Lukk",prevText:"&#xAB;Forrige",nextText:"Neste&#xBB;",currentText:"I dag",monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],monthNamesShort:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],dayNamesShort:["søn","man","tir","ons","tor","fre","lør"],dayNames:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],dayNamesMin:["sø","ma","ti","on","to","fr","lø"],weekHeader:"Uke",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("nb",{buttonText:{month:"Måned",week:"Uke",day:"Dag",list:"Agenda"},allDayText:"Hele dagen",eventLimitText:"til"})}(),function(){!function(){"use strict";var a="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),c="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),d=(b.defineLocale||b.lang).call(b,"nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(b,d){return/-MMM-/.test(d)?c[b.month()]:a[b.month()]},monthsParseExact:!0,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}});return d}(),a.fullCalendar.datepickerLang("nl","nl",{closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("nl",{buttonText:{month:"Maand",week:"Week",day:"Dag",list:"Agenda"},allDayText:"Hele dag",eventLimitText:"extra"})}(),function(){!function(){"use strict";function a(a){return 5>a%10&&a%10>1&&~~(a/10)%10!==1}function c(b,c,d){var e=b+" ";switch(d){case"m":return c?"minuta":"minutę";case"mm":return e+(a(b)?"minuty":"minut");case"h":return c?"godzina":"godzinę";case"hh":return e+(a(b)?"godziny":"godzin");case"MM":return e+(a(b)?"miesiące":"miesięcy");case"yy":return e+(a(b)?"lata":"lat")}}var d="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),e="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),f=(b.defineLocale||b.lang).call(b,"pl",{months:function(a,b){return""===b?"("+e[a.month()]+"|"+d[a.month()]+")":/D MMMM/.test(b)?e[a.month()]:d[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:c,mm:c,h:c,hh:c,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:c,y:"rok",yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}(),a.fullCalendar.datepickerLang("pl","pl",{closeText:"Zamknij",prevText:"&#x3C;Poprzedni",nextText:"Następny&#x3E;",currentText:"Dziś",monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],dayNames:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],dayNamesShort:["Nie","Pn","Wt","Śr","Czw","Pt","So"],dayNamesMin:["N","Pn","Wt","Śr","Cz","Pt","So"],weekHeader:"Tydz",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("pl",{buttonText:{month:"Miesiąc",week:"Tydzień",day:"Dzień",list:"Plan dnia"},allDayText:"Cały dzień",eventLimitText:"więcej"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"});return a}(),a.fullCalendar.datepickerLang("pt-br","pt-BR",{closeText:"Fechar",prevText:"&#x3C;Anterior",nextText:"Próximo&#x3E;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("pt-br",{buttonText:{month:"Mês",week:"Semana",day:"Dia",list:"Compromissos"},allDayText:"dia inteiro",eventLimitText:function(a){return"mais +"+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("pt","pt",{closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],
dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("pt",{buttonText:{month:"Mês",week:"Semana",day:"Dia",list:"Agenda"},allDayText:"Todo o dia",eventLimitText:"mais"})}(),function(){!function(){"use strict";function a(a,b,c){var d={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},e=" ";return(a%100>=20||a>=100&&a%100===0)&&(e=" de "),a+e+d[c]}var c=(b.defineLocale||b.lang).call(b,"ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:a,h:"o oră",hh:a,d:"o zi",dd:a,M:"o lună",MM:a,y:"un an",yy:a},week:{dow:1,doy:7}});return c}(),a.fullCalendar.datepickerLang("ro","ro",{closeText:"Închide",prevText:"&#xAB; Luna precedentă",nextText:"Luna următoare &#xBB;",currentText:"Azi",monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthNamesShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"],dayNamesShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],dayNamesMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],weekHeader:"Săpt",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ro",{buttonText:{prev:"precedentă",next:"următoare",month:"Lună",week:"Săptămână",day:"Zi",list:"Agendă"},allDayText:"Toată ziua",eventLimitText:function(a){return"+alte "+a}})}(),function(){!function(){"use strict";function a(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function c(b,c,d){var e={mm:c?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===d?c?"минута":"минуту":b+" "+a(e[d],+b)}var d=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],e=(b.defineLocale||b.lang).call(b,"ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:d,longMonthsParse:d,shortMonthsParse:d,monthsRegex:/^(сентябр[яь]|октябр[яь]|декабр[яь]|феврал[яь]|январ[яь]|апрел[яь]|августа?|ноябр[яь]|сент\.|февр\.|нояб\.|июнь|янв.|июль|дек.|авг.|апр.|марта|мар[.т]|окт.|июн[яь]|июл[яь]|ма[яй])/i,monthsShortRegex:/^(сентябр[яь]|октябр[яь]|декабр[яь]|феврал[яь]|январ[яь]|апрел[яь]|августа?|ноябр[яь]|сент\.|февр\.|нояб\.|июнь|янв.|июль|дек.|авг.|апр.|марта|мар[.т]|окт.|июн[яь]|июл[яь]|ма[яй])/i,monthsStrictRegex:/^(сентябр[яь]|октябр[яь]|декабр[яь]|феврал[яь]|январ[яь]|апрел[яь]|августа?|ноябр[яь]|марта?|июн[яь]|июл[яь]|ма[яй])/i,monthsShortStrictRegex:/^(нояб\.|февр\.|сент\.|июль|янв\.|июн[яь]|мар[.т]|авг\.|апр\.|окт\.|дек\.|ма[яй])/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:c,mm:c,h:"час",hh:c,d:"день",dd:c,M:"месяц",MM:c,y:"год",yy:c},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(a){return/^(дня|вечера)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночи":12>a?"утра":17>a?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:7}});return e}(),a.fullCalendar.datepickerLang("ru","ru",{closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("ru",{buttonText:{month:"Месяц",week:"Неделя",day:"День",list:"Повестка дня"},allDayText:"Весь день",eventLimitText:function(a){return"+ ещё "+a}})}(),function(){!function(){"use strict";function a(a){return a>1&&5>a}function c(b,c,d,e){var f=b+" ";switch(d){case"s":return c||e?"pár sekúnd":"pár sekundami";case"m":return c?"minúta":e?"minútu":"minútou";case"mm":return c||e?f+(a(b)?"minúty":"minút"):f+"minútami";case"h":return c?"hodina":e?"hodinu":"hodinou";case"hh":return c||e?f+(a(b)?"hodiny":"hodín"):f+"hodinami";case"d":return c||e?"deň":"dňom";case"dd":return c||e?f+(a(b)?"dni":"dní"):f+"dňami";case"M":return c||e?"mesiac":"mesiacom";case"MM":return c||e?f+(a(b)?"mesiace":"mesiacov"):f+"mesiacmi";case"y":return c||e?"rok":"rokom";case"yy":return c||e?f+(a(b)?"roky":"rokov"):f+"rokmi"}}var d="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),e="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_"),f=(b.defineLocale||b.lang).call(b,"sk",{months:d,monthsShort:e,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:c,m:c,mm:c,h:c,hh:c,d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}(),a.fullCalendar.datepickerLang("sk","sk",{closeText:"Zavrieť",prevText:"&#x3C;Predchádzajúci",nextText:"Nasledujúci&#x3E;",currentText:"Dnes",monthNames:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december"],monthNamesShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],dayNames:["nedeľa","pondelok","utorok","streda","štvrtok","piatok","sobota"],dayNamesShort:["Ned","Pon","Uto","Str","Štv","Pia","Sob"],dayNamesMin:["Ne","Po","Ut","St","Št","Pia","So"],weekHeader:"Ty",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("sk",{buttonText:{month:"Mesiac",week:"Týždeň",day:"Deň",list:"Rozvrh"},allDayText:"Celý deň",eventLimitText:function(a){return"+ďalšie: "+a}})}(),function(){!function(){"use strict";function a(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+=1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":5>a?b||d?"minute":"minutami":b||d?"minut":"minutami";case"h":return b?"ena ura":"eno uro";case"hh":return e+=1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":5>a?b||d?"ure":"urami":b||d?"ur":"urami";case"d":return b||d?"en dan":"enim dnem";case"dd":return e+=1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi";case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+=1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":5>a?b||d?"mesece":"meseci":b||d?"mesecev":"meseci";case"y":return b||d?"eno leto":"enim letom";case"yy":return e+=1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":5>a?b||d?"leta":"leti":b||d?"let":"leti"}}var c=(b.defineLocale||b.lang).call(b,"sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return c}(),a.fullCalendar.datepickerLang("sl","sl",{closeText:"Zapri",prevText:"&#x3C;Prejšnji",nextText:"Naslednji&#x3E;",currentText:"Trenutni",monthNames:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],dayNamesShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],dayNamesMin:["Ne","Po","To","Sr","Če","Pe","So"],weekHeader:"Teden",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("sl",{buttonText:{month:"Mesec",week:"Teden",day:"Dan",list:"Dnevni red"},allDayText:"Ves dan",eventLimitText:"več"})}(),function(){!function(){"use strict";var a={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(b,c,d){var e=a.words[d];return 1===d.length?c?e[0]:e[1]:b+" "+a.correctGrammaticalCase(b,e)}},c=(b.defineLocale||b.lang).call(b,"sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var a=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:a.translate,mm:a.translate,h:a.translate,hh:a.translate,d:"дан",dd:a.translate,M:"месец",MM:a.translate,y:"годину",yy:a.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return c}(),a.fullCalendar.datepickerLang("sr-cyrl","sr",{closeText:"Затвори",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Данас",monthNames:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthNamesShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],dayNames:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],dayNamesShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],dayNamesMin:["Не","По","Ут","Ср","Че","Пе","Су"],weekHeader:"Сед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("sr-cyrl",{buttonText:{month:"Месец",week:"Недеља",day:"Дан",list:"Планер"},allDayText:"Цео дан",eventLimitText:function(a){return"+ још "+a}})}(),function(){!function(){"use strict";var a={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(b,c,d){var e=a.words[d];return 1===d.length?c?e[0]:e[1]:b+" "+a.correctGrammaticalCase(b,e)}},c=(b.defineLocale||b.lang).call(b,"sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var a=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:a.translate,mm:a.translate,h:a.translate,hh:a.translate,d:"dan",dd:a.translate,M:"mesec",MM:a.translate,y:"godinu",yy:a.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});return c}(),a.fullCalendar.datepickerLang("sr","sr",{closeText:"Затвори",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Данас",monthNames:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthNamesShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],dayNames:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],dayNamesShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],dayNamesMin:["Не","По","Ут","Ср","Че","Пе","Су"],weekHeader:"Сед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("sr",{buttonText:{month:"Месец",week:"Недеља",day:"Дан",list:"Планер"},allDayText:"Цео дан",eventLimitText:function(a){return"+ још "+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"e":1===b?"a":2===b?"a":"e";return a+c},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("sv","sv",{closeText:"Stäng",prevText:"&#xAB;Förra",nextText:"Nästa&#xBB;",currentText:"Idag",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNamesShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayNames:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],dayNamesMin:["Sö","Må","Ti","On","To","Fr","Lö"],weekHeader:"Ve",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("sv",{buttonText:{month:"Månad",week:"Vecka",day:"Dag",list:"Program"},allDayText:"Heldag",eventLimitText:"till"})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H นาฬิกา m นาที",LTS:"H นาฬิกา m นาที s วินาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H นาฬิกา m นาที",LLLL:"วันddddที่ D MMMM YYYY เวลา H นาฬิกา m นาที"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(a){return"หลังเที่ยง"===a},meridiem:function(a,b,c){return 12>a?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}});return a}(),a.fullCalendar.datepickerLang("th","th",{closeText:"ปิด",prevText:"&#xAB;&#xA0;ย้อน",nextText:"ถัดไป&#xA0;&#xBB;",currentText:"วันนี้",monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthNamesShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],dayNames:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],dayNamesShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayNamesMin:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("th",{buttonText:{month:"เดือน",week:"สัปดาห์",day:"วัน",list:"แผนงาน"},allDayText:"ตลอดวัน",eventLimitText:"เพิ่มเติม"})}(),function(){!function(){"use strict";var a={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"},c=(b.defineLocale||b.lang).call(b,"tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(b){if(0===b)return b+"'ıncı";var c=b%10,d=b%100-c,e=b>=100?100:null;return b+(a[c]||a[d]||a[e])},week:{dow:1,doy:7}});return c}(),a.fullCalendar.datepickerLang("tr","tr",{closeText:"kapat",prevText:"&#x3C;geri",nextText:"ileri&#x3e",currentText:"bugün",monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthNamesShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],dayNames:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],dayNamesMin:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("tr",{buttonText:{next:"ileri",month:"Ay",week:"Hafta",day:"Gün",list:"Ajanda"},allDayText:"Tüm gün",eventLimitText:"daha fazla"})}(),function(){!function(){"use strict";function a(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function c(b,c,d){var e={mm:c?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:c?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===d?c?"хвилина":"хвилину":"h"===d?c?"година":"годину":b+" "+a(e[d],+b)}function d(a,b){var c={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},d=/(\[[ВвУу]\]) ?dddd/.test(b)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(b)?"genitive":"nominative";return c[d][a.day()]}function e(a){return function(){return a+"о"+(11===this.hours()?"б":"")+"] LT"}}var f=(b.defineLocale||b.lang).call(b,"uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:d,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:e("[Сьогодні "),nextDay:e("[Завтра "),lastDay:e("[Вчора "),nextWeek:e("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return e("[Минулої] dddd [").call(this);case 1:case 2:case 4:return e("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:c,mm:c,h:"годину",hh:c,d:"день",dd:c,M:"місяць",MM:c,y:"рік",yy:c},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(a){return/^(дня|вечора)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночі":12>a?"ранку":17>a?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-й";case"D":return a+"-го";default:return a}},week:{dow:1,doy:7}});return f}(),a.fullCalendar.datepickerLang("uk","uk",{closeText:"Закрити",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Сьогодні",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Тиж",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("uk",{buttonText:{month:"Місяць",week:"Тиждень",day:"День",list:"Порядок денний"},allDayText:"Увесь день",eventLimitText:function(a){return"+ще "+a+"..."}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(a){return/^ch$/i.test(a)},meridiem:function(a,b,c){return 12>a?c?"sa":"SA":c?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("vi","vi",{closeText:"Đóng",prevText:"&#x3C;Trước",nextText:"Tiếp&#x3E;",currentText:"Hôm nay",monthNames:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"],monthNamesShort:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayNames:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("vi",{buttonText:{month:"Tháng",week:"Tuần",day:"Ngày",list:"Lịch biểu"},allDayText:"Cả ngày",eventLimitText:function(a){return"+ thêm "+a}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var a,c;return a=b().startOf("week"),c=this.diff(a,"days")>=7?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var a,c;return a=b().startOf("week"),c=this.unix()<a.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});return a}(),a.fullCalendar.datepickerLang("zh-cn","zh-CN",{closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"}),a.fullCalendar.lang("zh-cn",{buttonText:{month:"月",week:"周",day:"日",list:"日程"},allDayText:"全天",eventLimitText:function(a){return"另外 "+a+" 个"}})}(),function(){!function(){"use strict";var a=(b.defineLocale||b.lang).call(b,"zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"早上"===b||"上午"===b?a:"中午"===b?a>=11?a:a+12:"下午"===b||"晚上"===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return 900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"週";default:return a}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1分鐘",mm:"%d分鐘",h:"1小時",hh:"%d小時",d:"1天",dd:"%d天",M:"1個月",MM:"%d個月",y:"1年",yy:"%d年"}});return a}(),a.fullCalendar.datepickerLang("zh-tw","zh-TW",{
closeText:"關閉",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"}),a.fullCalendar.lang("zh-tw",{buttonText:{month:"月",week:"週",day:"天",list:"待辦事項"},allDayText:"全天",eventLimitText:"更多"})}(),(b.locale||b.lang).call(b,"en"),a.fullCalendar.lang("en"),a.datepicker&&a.datepicker.setDefaults(a.datepicker.regional[""])});var LoadingIndicator=function(a){a.find(".loading-indicator").remove(),a.append("<div class='loading-indicator'/>"),this.indicator=a.find(".loading-indicator")};LoadingIndicator.prototype=function(){var a=function(a){this.indicator.html(a),this.indicator.addClass("loading-error")},b=function(a){this.indicator.html(a),this.indicator.addClass("loading-success")},c=function(a){this.indicator.append("<img src='../img/spinner.gif'/>"),this.indicator.append(a)};return{error:a,success:b,show:c}}(),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){u(a),g(this,a)}function f(a){var b=o(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._input=a,this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&ba.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"[object Date]"===Object.prototype.toString.call(a)}function m(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function n(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ja[a]||Ka[b]||b}return a}function o(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=n(c),b&&(d[b]=a[c]));return d}function p(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ba[b]=function(e,f){var g,h,i=ba.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ba().utc().set(d,a);return i.call(ba.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function r(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function s(a){return t(a)?366:365}function t(a){return 0===a%4&&0!==a%100||0===a%400}function u(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ga]<0||a._a[ga]>11?ga:a._a[ha]<1||a._a[ha]>r(a._a[fa],a._a[ga])?ha:a._a[ia]<0||a._a[ia]>23?ia:a._a[ja]<0||a._a[ja]>59?ja:a._a[ka]<0||a._a[ka]>59?ka:a._a[la]<0||a._a[la]>999?la:-1,a._pf._overflowDayOfYear&&(fa>b||b>ha)&&(b=ha),a._pf.overflow=b)}function v(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1}}function w(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function x(a){return a?a.toLowerCase().replace("_","-"):a}function y(a,b){return b.abbr=a,ma[a]||(ma[a]=new d),ma[a].set(b),ma[a]}function z(a){delete ma[a]}function A(a){var b,c,d,e,f=0,g=function(a){if(!ma[a]&&na)try{require("./lang/"+a)}catch(b){}return ma[a]};if(!a)return ba.fn._lang;if(!k(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=x(a[f]).split("-"),b=e.length,d=x(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&m(e,d,!0)>=b-1)break;b--}f++}return ba.fn._lang}function B(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function C(a){var b,c,d=a.match(ra);for(b=0,c=d.length;c>b;b++)d[b]=Oa[d[b]]?Oa[d[b]]:B(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function D(a,b){return a.isValid()?(b=E(b,a.lang()),La[b]||(La[b]=C(b)),La[b](a)):a.lang().invalidDate()}function E(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(sa.lastIndex=0;d>=0&&sa.test(a);)a=a.replace(sa,c),sa.lastIndex=0,d-=1;return a}function F(a,b){var c;switch(a){case"DDDD":return va;case"YYYY":case"GGGG":case"gggg":return wa;case"YYYYY":case"GGGGG":case"ggggg":return xa;case"S":case"SS":case"SSS":case"DDD":return ua;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return ya;case"a":case"A":return A(b._l)._meridiemParse;case"X":return Ba;case"Z":case"ZZ":return za;case"T":return Aa;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return ta;default:return c=new RegExp(N(M(a.replace("\\","")),"i"))}}function G(a){var b=(za.exec(a)||[])[0],c=(b+"").match(Ga)||["-",0,0],d=+(60*c[1])+q(c[2]);return"+"===c[0]?-d:d}function H(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ga]=q(b)-1);break;case"MMM":case"MMMM":d=A(c._l).monthsParse(b),null!=d?e[ga]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[ha]=q(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=q(b));break;case"YY":e[fa]=q(b)+(q(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":e[fa]=q(b);break;case"a":case"A":c._isPm=A(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[ia]=q(b);break;case"m":case"mm":e[ja]=q(b);break;case"s":case"ss":e[ka]=q(b);break;case"S":case"SS":case"SSS":e[la]=q(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=G(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function I(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=K(a),a._w&&null==a._a[ha]&&null==a._a[ga]&&(f=function(b){return b?b.length<3?parseInt(b,10)>68?"19"+b:"20"+b:b:null==a._a[fa]?ba().weekYear():a._a[fa]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=X(f(g.GG),g.W||1,g.E,4,1):(i=A(a._l),j=null!=g.d?T(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=X(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[fa]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[fa]?d[fa]:a._a[fa],a._dayOfYear>s(e)&&(a._pf._overflowDayOfYear=!0),c=S(e,0,a._dayOfYear),a._a[ga]=c.getUTCMonth(),a._a[ha]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[ia]+=q((a._tzm||0)/60),l[ja]+=q((a._tzm||0)%60),a._d=(a._useUTC?S:R).apply(null,l)}}function J(a){var b;a._d||(b=o(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],I(a))}function K(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function L(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=A(a._l),h=""+a._i,i=h.length,j=0;for(d=E(a._f,g).match(ra)||[],b=0;b<d.length;b++)e=d[b],c=(F(e,a).exec(h)||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Oa[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),H(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[ia]<12&&(a._a[ia]+=12),a._isPm===!1&&12===a._a[ia]&&(a._a[ia]=0),I(a),u(a)}function M(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function N(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function O(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=g({},a),v(b),b._f=a._f[e],L(b),w(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function P(a){var b,c=a._i,d=Ca.exec(c);if(d){for(b=4;b>0;b--)if(d[b]){a._f=Ea[b-1]+(d[6]||" ");break}for(b=0;4>b;b++)if(Fa[b][1].exec(c)){a._f+=Fa[b][0];break}za.exec(c)&&(a._f+=" Z"),L(a)}else a._d=new Date(c)}function Q(b){var c=b._i,d=oa.exec(c);c===a?b._d=new Date:d?b._d=new Date((+d[1])):"string"==typeof c?P(b):k(c)?(b._a=c.slice(0),I(b)):l(c)?b._d=new Date((+c)):"object"==typeof c?J(b):b._d=new Date(c)}function R(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function S(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function T(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function U(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function V(a,b,c){var d=ea(Math.abs(a)/1e3),e=ea(d/60),f=ea(e/60),g=ea(f/24),h=ea(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ea(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,U.apply({},i)}function W(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ba(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function X(a,b,c,d,e){var f,g,h=new Date(Date.UTC(a,0)).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:s(a-1)+g}}function Y(a){var b=a._i,c=a._f;return"undefined"==typeof a._pf&&v(a),null===b?ba.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=A().preparse(b)),ba.isMoment(b)?(a=g({},b),a._d=new Date((+b._d))):c?k(c)?O(a):L(a):Q(a),new e(a))}function Z(a,b){ba.fn[a]=ba.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),ba.updateOffset(this),this):this._d["get"+c+b]()}}function $(a){ba.duration.fn[a]=function(){return this._data[a]}}function _(a,b){ba.duration.fn["as"+a]=function(){return+this/b}}function aa(){"undefined"==typeof ender&&(this.moment=ba)}for(var ba,ca,da="2.3.1",ea=Math.round,fa=0,ga=1,ha=2,ia=3,ja=4,ka=5,la=6,ma={},na="undefined"!=typeof module&&module.exports,oa=/^\/?Date\((\-?\d+)/i,pa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,qa=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ra=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,sa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ta=/\d\d?/,ua=/\d{1,3}/,va=/\d{3}/,wa=/\d{1,4}/,xa=/[+\-]?\d{1,6}/,ya=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,za=/Z|[\+\-]\d\d:?\d\d/i,Aa=/T/i,Ba=/[\+\-]?\d+(\.\d{1,3})?/,Ca=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?$/,Da="YYYY-MM-DDTHH:mm:ssZ",Ea=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Fa=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ga=/([\+\-]|\d\d)/gi,Ha="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ia={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ja={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ka={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},La={},Ma="DDD w W M D d".split(" "),Na="M D H h m s w W".split(" "),Oa={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return q(this.milliseconds()/100)},SS:function(){return i(q(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(a/60),2)+":"+i(q(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Pa=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Ma.length;)ca=Ma.pop(),Oa[ca+"o"]=c(Oa[ca],ca);for(;Na.length;)ca=Na.pop(),Oa[ca+ca]=b(Oa[ca],2);for(Oa.DDDD=b(Oa.DDD,3),g(d.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=ba.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ba([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return W(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ba=function(b,c,d,e){return"boolean"==typeof d&&(e=d,d=a),Y({_i:b,_f:c,_l:d,_strict:e,_isUTC:!1})},ba.utc=function(b,c,d,e){var f;return"boolean"==typeof d&&(e=d,d=a),f=Y({_useUTC:!0,_isUTC:!0,_l:d,_i:b,_f:c,_strict:e}).utc()},ba.unix=function(a){return ba(1e3*a)},ba.duration=function(a,b){var c,d,e,g=ba.isDuration(a),h="number"==typeof a,i=g?a._input:h?{}:a,j=null;return h?b?i[b]=a:i.milliseconds=a:(j=pa.exec(a))?(c="-"===j[1]?-1:1,i={y:0,d:q(j[ha])*c,h:q(j[ia])*c,m:q(j[ja])*c,s:q(j[ka])*c,ms:q(j[la])*c}):(j=qa.exec(a))&&(c="-"===j[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},i={y:e(j[2]),M:e(j[3]),d:e(j[4]),h:e(j[5]),m:e(j[6]),s:e(j[7]),w:e(j[8])}),d=new f(i),g&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},ba.version=da,ba.defaultFormat=Da,ba.updateOffset=function(){},ba.lang=function(a,b){var c;return a?(b?y(x(a),b):null===b?(z(a),a="en"):ma[a]||A(a),c=ba.duration.fn._lang=ba.fn._lang=A(a),c._abbr):ba.fn._lang._abbr},ba.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),A(a)},ba.isMoment=function(a){return a instanceof e},ba.isDuration=function(a){return a instanceof f},ca=Pa.length-1;ca>=0;--ca)p(Pa[ca]);for(ba.normalizeUnits=function(a){return n(a)},ba.invalid=function(a){var b=ba.utc(NaN);return null!=a?g(b._pf,a):b._pf.userInvalidated=!0,b},ba.parseZone=function(a){return ba(a).parseZone()},g(ba.fn=e.prototype,{clone:function(){return ba(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date((+this)):this._d},toISOString:function(){return D(ba(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return w(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&m(this._a,(this._isUTC?ba.utc(this._a):ba(this._a)).toArray())>0)},parsingFlags:function(){return g({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=D(this,a||ba.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?ba.duration(+b,a):ba.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?ba.duration(+b,a):ba.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?ba(a).zone(this._offset||0):ba(a).local(),g=6e4*(this.zone()-f.zone());return b=n(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-ba(this).startOf("month")-(f-ba(f).startOf("month")))/d,e-=6e4*(this.zone()-ba(this).startOf("month").zone()-(f.zone()-ba(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return ba.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(ba(),a)},calendar:function(){var a=this.diff(ba().zone(this.zone()).startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){return t(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=T(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),ba.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=n(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=n(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+ba(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+ba(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+ba(a).startOf(b)},min:function(a){return a=ba.apply(null,arguments),this>a?this:a},max:function(a){return a=ba.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=G(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,ba.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ba(a).zone():0,0===(this.zone()-a)%60},daysInMonth:function(){return r(this.year(),this.month())},dayOfYear:function(a){var b=ea((ba(this).startOf("day")-ba(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=W(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=W(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=W(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=n(a),this[a]()},set:function(a,b){return a=n(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=A(b),this)}}),ca=0;ca<Ha.length;ca++)Z(Ha[ca].toLowerCase().replace(/s$/,""),Ha[ca]);Z("year","FullYear"),ba.fn.days=ba.fn.day,ba.fn.months=ba.fn.month,ba.fn.weeks=ba.fn.week,ba.fn.isoWeeks=ba.fn.isoWeek,ba.fn.toJSON=ba.fn.toISOString,g(ba.duration.fn=f.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*q(this._months/12)},humanize:function(a){var b=+this,c=V(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=ba.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ba.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=n(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=n(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:ba.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(ca in Ia)Ia.hasOwnProperty(ca)&&(_(ca,Ia[ca]),$(ca.toLowerCase()));_("Weeks",6048e5),ba.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ba.lang("en",{ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),na?(module.exports=ba,aa()):"function"==typeof define&&define.amd?define("moment",function(a,b,c){return c.config().noGlobal!==!0&&aa(),ba}):aa()}.call(this);var Ollert=function(){var a=[],b=!1,c=function(a){$(".settings-link > img").attr("src","http://www.gravatar.com/avatar/"+a+"?s=40")};return{loadAvatar:c,info:a,esAdmin:b}}();!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Plotly=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("../src/lib"),e={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var f in e){var g=f.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(g,e[f])}},{"../src/lib":632}],2:[function(a,b,c){"use strict";b.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150}}},{}],3:[function(a,b,c){"use strict";b.exports=a("../src/traces/bar")},{"../src/traces/bar":752}],4:[function(a,b,c){"use strict";b.exports=a("../src/traces/box")},{"../src/traces/box":764}],5:[function(a,b,c){"use strict";b.exports=a("../src/traces/candlestick")},{"../src/traces/candlestick":772}],6:[function(a,b,c){"use strict";b.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":777}],7:[function(a,b,c){"use strict";b.exports=a("../src/traces/contour")},{"../src/traces/contour":784}],8:[function(a,b,c){"use strict";b.exports=a("../src/core")},{"../src/core":619}],9:[function(a,b,c){"use strict";b.exports=a("../src/transforms/filter")},{"../src/transforms/filter":906}],10:[function(a,b,c){"use strict";b.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":907}],11:[function(a,b,c){"use strict";b.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":796}],12:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram")},{"../src/traces/histogram":807}],13:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":812}],14:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":816}],15:[function(a,b,c){"use strict";var d=a("./core");d.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./pie"),a("./contour"),a("./scatterternary"),a("./scatter3d"),a("./surface"),a("./mesh3d"),a("./scattergeo"),a("./choropleth"),a("./scattergl"),a("./pointcloud"),a("./scattermapbox"),a("./ohlc"),a("./candlestick")]),d.register([a("./filter"),a("./groupby")]),b.exports=d},{"./bar":3,"./box":4,"./candlestick":5,"./choropleth":6,"./contour":7,"./core":8,"./filter":9,"./groupby":10,"./heatmap":11,"./histogram":12,"./histogram2d":13,"./histogram2dcontour":14,"./mesh3d":16,"./ohlc":17,"./pie":18,"./pointcloud":19,"./scatter3d":20,"./scattergeo":21,"./scattergl":22,"./scattermapbox":23,"./scatterternary":24,"./surface":25}],16:[function(a,b,c){"use strict";b.exports=a("../src/traces/mesh3d")},{"../src/traces/mesh3d":820}],17:[function(a,b,c){"use strict";b.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":825}],18:[function(a,b,c){"use strict";b.exports=a("../src/traces/pie")},{"../src/traces/pie":833}],19:[function(a,b,c){"use strict";b.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":842}],20:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":872}],21:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":878}],22:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":883}],23:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":890}],24:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":896}],25:[function(a,b,c){"use strict";b.exports=a("../src/traces/surface")},{"../src/traces/surface":905}],26:[function(a,b,c){"use strict";function d(a,b){a=a||document.body,b=b||{};var c=[.01,1/0];"distanceLimits"in b&&(c[0]=b.distanceLimits[0],c[1]=b.distanceLimits[1]),"zoomMin"in b&&(c[0]=b.zoomMin),"zoomMax"in b&&(c[1]=b.zoomMax);var d=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:c}),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=0,k=a.clientWidth,l=a.clientHeight,m={view:d,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,tick:function(){var b=e(),c=this.delay;d.idle(b-c),d.flush(b-(100+2*c));var f=b-2*c;d.recalcMatrix(f);for(var g=!0,h=d.computedMatrix,m=0;m<16;++m)g=g&&i[m]===h[m],i[m]=h[m];var n=a.clientWidth===k&&a.clientHeight===l;return k=a.clientWidth,l=a.clientHeight,g?!n:(j=Math.exp(d.computedRadius[0]),!0)},lookAt:function(a,b,c){d.lookAt(d.lastT(),a,b,c)},rotate:function(a,b,c){d.rotate(d.lastT(),a,b,c)},pan:function(a,b,c){d.pan(d.lastT(),a,b,c)},translate:function(a,b,c){d.translate(d.lastT(),a,b,c)}};Object.defineProperties(m,{matrix:{get:function(){return d.computedMatrix},set:function(a){return d.setMatrix(d.lastT(),a),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(a){return d.setMode(a),d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(a){return d.lookAt(d.lastT(),a),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(a){return d.lookAt(d.lastT(),null,a),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(a){return d.lookAt(d.lastT(),null,null,a),d.computedUp},enumerable:!0},distance:{get:function(){return j},set:function(a){return d.setDistance(d.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(c)},set:function(a){return d.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var n=0,o=0;return g(a,function(b,c,f,g){var h=1/a.clientHeight,i=h*(c-n),k=h*(f-o),l=m.flipX?1:-1,p=m.flipY?1:-1,q=Math.PI*m.rotateSpeed,r=e();if(1&b)g.shift?d.rotate(r,0,0,-i*q):d.rotate(r,l*q*i,-p*q*k,0);else if(2&b)d.pan(r,-m.translateSpeed*i*j,m.translateSpeed*k*j,0);else if(4&b){var s=m.zoomSpeed*k/window.innerHeight*(r-d.lastT())*50;d.pan(r,0,0,j*(Math.exp(s)-1))}n=c,o=f}),h(a,function(a,b,c){var f=m.flipX?1:-1,g=m.flipY?1:-1,h=e();if(Math.abs(a)>Math.abs(b))d.rotate(h,0,0,-a*f*Math.PI*m.rotateSpeed/window.innerWidth);else{var i=m.zoomSpeed*g*b/window.innerHeight*(h-d.lastT())/100;d.pan(h,0,0,j*(Math.exp(i)-1))}},!0),m}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel")},{"3d-view":27,"mouse-change":413,"mouse-wheel":415,"right-now":459}],27:[function(a,b,c){"use strict";function d(a,b){this._controllerNames=Object.keys(a),this._controllerList=this._controllerNames.map(function(b){return a[b]}),this._mode=b,this._active=a[b],this._active||(this._mode="turntable",this._active=a.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function e(a){a=a||{};var b=a.eye||[0,0,1],c=a.center||[0,0,0],e=a.up||[0,1,0],i=a.distanceLimits||[0,1/0],j=a.mode||"turntable",k=f(),l=g(),m=h();return k.setDistanceLimits(i[0],i[1]),k.lookAt(0,b,c,e),l.setDistanceLimits(i[0],i[1]),l.lookAt(0,b,c,e),m.setDistanceLimits(i[0],i[1]),m.lookAt(0,b,c,e),new d({turntable:k,orbit:l,matrix:m},j)}b.exports=e;var f=a("turntable-camera-controller"),g=a("orbit-camera-controller"),h=a("matrix-camera-controller"),i=d.prototype,j=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];j.forEach(function(a){for(var b=a[0],c=[],d=0;d<a[1];++d)c.push("a"+d);var e="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+a[0]+"("+c.join()+")}";i[b]=Function.apply(null,c.concat(e))}),i.recalcMatrix=function(a){this._active.recalcMatrix(a)},i.getDistance=function(a){return this._active.getDistance(a)},i.getDistanceLimits=function(a){return this._active.getDistanceLimits(a)},i.lastT=function(){return this._active.lastT()},i.setMode=function(a){if(a!==this._mode){var b=this._controllerNames.indexOf(a);if(!(b<0)){var c=this._active,d=this._controllerList[b],e=Math.max(c.lastT(),d.lastT());c.recalcMatrix(e),d.setMatrix(e,c.computedMatrix),this._active=d,this._mode=a,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":411,"orbit-camera-controller":431,"turntable-camera-controller":493}],28:[function(a,b,c){"use strict";function d(a){var b=h.get(a);if(!b||!a.isBuffer(b._triangleBuffer.buffer)){var c=f(a,new Float32Array([-1,-1,-1,4,4,-1]));b=g(a,[{buffer:c,type:a.FLOAT,size:2}]),b._triangleBuffer=c,h.set(a,b)}b.bind(),a.drawArrays(a.TRIANGLES,0,3),b.unbind()}var e="undefined"==typeof WeakMap?a("weak-map"):WeakMap,f=a("gl-buffer"),g=a("gl-vao"),h=new e;b.exports=d},{"gl-buffer":128,"gl-vao":236,"weak-map":514}],29:[function(a,b,c){function d(a,b,c){b="number"==typeof b?b:1,c=c||": ";var d=a.split(/\r?\n/),f=String(d.length+b-1).length;return d.map(function(a,d){var g=d+b,h=String(g).length,i=e(g,f-h);return i+c+a}).join("\n")}var e=a("pad-left");b.exports=d},{"pad-left":432}],30:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(b+1),d=0;d<a.length;++d)c[d]=a[d];for(var d=0;d<=a.length;++d){for(var e=a.length;e<=b;++e){for(var g=new Array(b),h=0;h<b;++h)g[h]=Math.pow(e+1-d,h);c[e]=g}var i=f.apply(void 0,c);if(i)return!0}return!1}function e(a){var b=a.length;if(0===b)return[];if(1===b)return[0];for(var c=a[0].length,e=[a[0]],f=[0],g=1;g<b;++g)if(e.push(a[g]),d(e,c)){if(f.push(g),f.length===c+1)return f}else e.pop();return f}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":465}],31:[function(a,b,c){"use strict";function d(a,b){return e(b).filter(function(c){for(var d=new Array(c.length),e=0;e<c.length;++e)d[e]=b[c[e]];return f(d)*a<1})}b.exports=d;var e=a("delaunay-triangulate"),f=a("circumradius")},{circumradius:75,"delaunay-triangulate":96}],32:[function(a,b,c){function d(a,b){return f(e(a,b))}b.exports=d;var e=a("alpha-complex"),f=a("simplicial-complex-boundary")},{"alpha-complex":31,"simplicial-complex-boundary":473}],33:[function(a,b,c){"use strict";var d=function(){function a(a){return!Array.isArray(a)&&null!==a&&"object"==typeof a}function b(a,b,c){for(var d=(b-a)/Math.max(c-1,1),e=[],f=0;f<c;f++)e.push(a+f*d);return e}function c(){for(var a=[].slice.call(arguments),b=a.map(function(a){return a.length}),c=Math.min.apply(null,b),d=[],e=0;e<c;e++){d[e]=[];for(var f=0;f<a.length;++f)d[e][f]=a[f][e]}return d}function d(a,b,c){for(var d=Math.min.apply(null,[a.length,b.length,c.length]),e=[],f=0;f<d;f++)e.push([a[f],b[f],c[f]]);return e}function e(a){function b(a){for(var d=0;d<a.length;d++)Array.isArray(a[d])?b(a[d],c):c+=a[d]}var c=0;return b(a,c),c}function f(a){for(var b=[],c=0;c<a.length;++c){b[c]=[];for(var d=0;d<a[c].length;++d)b[c][d]=a[c][d]}return b}function g(a){for(var b=[],c=0;c<a.length;++c)b[c]=a[c];return b}function h(a,b){if(a.length!==b.length)return!1;for(var c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function i(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3])),!b)for(var e=0;e<3;++e)c[e]=c[e]/255;return c}function j(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3]),d[4]?c[3]=parseFloat(d[4]):c[3]=1),!b)for(var e=0;e<3;++e)c[e]=c[e]/255;return c}var k={},l=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,m=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return k.isPlainObject=a,k.linspace=b,k.zip3=d,k.sum=e,k.zip=c,k.isEqual=h,k.copy2D=f,k.copy1D=g,k.str2RgbArray=i,k.str2RgbaArray=j,k};b.exports=d()},{}],34:[function(a,b,c){function d(a,b){return n.isUndefined(b)?""+b:n.isNumber(b)&&!isFinite(b)?b.toString():n.isFunction(b)||n.isRegExp(b)?b.toString():b}function e(a,b){return n.isString(a)?a.length<b?a:a.slice(0,b):a}function f(a){return e(JSON.stringify(a.actual,d),128)+" "+a.operator+" "+e(JSON.stringify(a.expected,d),128)}function g(a,b,c,d,e){throw new q.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function h(a,b){a||g(a,!0,b,"==",q.ok)}function i(a,b){if(a===b)return!0;if(n.isBuffer(a)&&n.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return n.isDate(a)&&n.isDate(b)?a.getTime()===b.getTime():n.isRegExp(a)&&n.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:n.isObject(a)||n.isObject(b)?k(a,b):a==b}function j(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function k(a,b){if(n.isNullOrUndefined(a)||n.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(n.isPrimitive(a)||n.isPrimitive(b))return a===b;var c=j(a),d=j(b);if(c&&!d||!c&&d)return!1;if(c)return a=o.call(a),b=o.call(b),i(a,b);var e,f,g=r(a),h=r(b);if(g.length!=h.length)return!1;for(g.sort(),h.sort(),f=g.length-1;f>=0;f--)if(g[f]!=h[f])return!1;for(f=g.length-1;f>=0;f--)if(e=g[f],!i(a[e],b[e]))return!1;return!0}function l(a,b){return!(!a||!b)&&("[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b||b.call({},a)===!0)}function m(a,b,c,d){var e;n.isString(c)&&(d=c,c=null);try{b()}catch(a){e=a}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&g(e,c,"Missing expected exception"+d),!a&&l(e,c)&&g(e,c,"Got unwanted exception"+d),a&&e&&c&&!l(e,c)||!a&&e)throw e}var n=a("util/"),o=Array.prototype.slice,p=Object.prototype.hasOwnProperty,q=b.exports=h;q.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var b=a.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=b.name,h=d.indexOf("\n"+e);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},n.inherits(q.AssertionError,Error),q.fail=g,q.ok=h,q.equal=function(a,b,c){a!=b&&g(a,b,c,"==",q.equal)},q.notEqual=function(a,b,c){a==b&&g(a,b,c,"!=",q.notEqual)},q.deepEqual=function(a,b,c){i(a,b)||g(a,b,c,"deepEqual",q.deepEqual)},q.notDeepEqual=function(a,b,c){i(a,b)&&g(a,b,c,"notDeepEqual",q.notDeepEqual)},q.strictEqual=function(a,b,c){a!==b&&g(a,b,c,"===",q.strictEqual)},q.notStrictEqual=function(a,b,c){a===b&&g(a,b,c,"!==",q.notStrictEqual)},q["throws"]=function(a,b,c){m.apply(this,[!0].concat(o.call(arguments)))},q.doesNotThrow=function(a,b){m.apply(this,[!1].concat(o.call(arguments)))},q.ifError=function(a){if(a)throw a};var r=Object.keys||function(a){var b=[];for(var c in a)p.call(a,c)&&b.push(c);return b}},{"util/":504}],35:[function(a,b,c){b.exports=function(a){return atob(a)}},{}],36:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0;c<a.length;++c)b+=a[c];return b}function e(a,b){for(var c=b.length,e=new Array(c+1),g=0;g<c;++g){for(var h=new Array(c+1),i=0;i<=c;++i)h[i]=a[i][g];e[g]=h}e[c]=new Array(c+1);for(var g=0;g<=c;++g)e[c][g]=1;for(var j=new Array(c+1),g=0;g<c;++g)j[g]=b[g];j[c]=1;var k=f(e,j),l=d(k[c+1]);0===l&&(l=1);for(var m=new Array(c+1),g=0;g<=c;++g)m[g]=d(k[g])/l;return m}b.exports=e;var f=a("robust-linear-solve")},{"robust-linear-solve":464}],37:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":47}],38:[function(a,b,c){"use strict";function d(a,b){return a[0].mul(b[1]).cmp(b[0].mul(a[1]))}b.exports=d},{}],39:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]),a[1].mul(b[0]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":47}],40:[function(a,b,c){"use strict";function d(a,b){if(e(a))return b?j(a,d(b)):[a[0].clone(),a[1].clone()];var c,k,l=0;if(f(a))c=a.clone();else if("string"==typeof a)c=h(a);else{if(0===a)return[g(0),g(1)];if(a===Math.floor(a))c=g(a);else{for(;a!==Math.floor(a);)a*=Math.pow(2,256),l-=256;c=g(a)}}if(e(b))c.mul(b[1]),k=b[0].clone();else if(f(b))k=b.clone();else if("string"==typeof b)k=h(b);else if(b)if(b===Math.floor(b))k=g(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),l+=256;k=g(b)}else k=g(1);return l>0?c=c.shln(l):l<0&&(k=k.shln(-l)),i(c,k)}var e=a("./is-rat"),f=a("./lib/is-bn"),g=a("./lib/num-to-bn"),h=a("./lib/str-to-bn"),i=a("./lib/rationalize"),j=a("./div");b.exports=d},{"./div":39,"./is-rat":41,"./lib/is-bn":45,"./lib/num-to-bn":46,"./lib/rationalize":47,"./lib/str-to-bn":48}],41:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)&&2===a.length&&e(a[0])&&e(a[1])}var e=a("./lib/is-bn");b.exports=d},{"./lib/is-bn":45}],42:[function(a,b,c){"use strict";function d(a){return a.cmp(new e(0))}var e=a("bn.js");b.exports=d},{"bn.js":55}],43:[function(a,b,c){"use strict";function d(a){var b=a.length,c=a.words,d=0;if(1===b)d=c[0];else if(2===b)d=c[0]+67108864*c[1];else for(var d=0,e=0;e<b;e++){var f=c[e];d+=f*Math.pow(67108864,e)}return a.sign?-d:d}b.exports=d},{}],44:[function(a,b,c){"use strict";function d(a){var b=f(e.lo(a));if(b<32)return b;var c=f(e.hi(a));return c>20?52:c+32}var e=a("double-bits"),f=a("bit-twiddle").countTrailingZeros;b.exports=d},{"bit-twiddle":54,"double-bits":97}],45:[function(a,b,c){"use strict";function d(a){return a&&"object"==typeof a&&Boolean(a.words)}a("bn.js"),b.exports=d},{"bn.js":55}],46:[function(a,b,c){"use strict";function d(a){var b=f.exponent(a);return b<52?new e(a):new e(a*Math.pow(2,52-b)).shln(b-52)}var e=a("bn.js"),f=a("double-bits");b.exports=d},{"bn.js":55,"double-bits":97}],47:[function(a,b,c){"use strict";function d(a,b){var c=f(a),d=f(b);if(0===c)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(a=a.neg(),b=b.neg());var g=a.gcd(b);return g.cmpn(1)?[a.div(g),b.div(g)]:[a,b]}var e=a("./num-to-bn"),f=a("./bn-sign");b.exports=d},{"./bn-sign":42,"./num-to-bn":46}],48:[function(a,b,c){"use strict";function d(a){return new e(a)}var e=a("bn.js");b.exports=d},{"bn.js":55}],49:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[0]),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":47}],50:[function(a,b,c){"use strict";function d(a){return e(a[0])*e(a[1])}var e=a("./lib/bn-sign");b.exports=d},{"./lib/bn-sign":42}],51:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":47}],52:[function(a,b,c){"use strict";function d(a){var b=a[0],c=a[1];if(0===b.cmpn(0))return 0;var d=b.divmod(c),g=d.div,h=e(g),i=d.mod;if(0===i.cmpn(0))return h;if(h){var j=f(h)+4,k=e(i.shln(j).divRound(c));return h<0&&(k=-k),h+k*Math.pow(2,-j)}var l=c.bitLength()-i.bitLength()+53,k=e(i.shln(l).divRound(c));return l<1023?k*Math.pow(2,-l):(k*=Math.pow(2,-1023),k*Math.pow(2,1023-l))}var e=a("./lib/bn-to-num"),f=a("./lib/ctz");b.exports=d},{"./lib/bn-to-num":43,"./lib/ctz":44}],53:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=["function ",a,"(a,l,h,",d.join(","),"){",f?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];return f?b.indexOf("c")<0?g.push(";if(x===y){return m}else if(x<=y){"):g.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):g.push(";if(",b,"){i=m;"),c?g.push("l=m+1}else{h=m-1}"):g.push("h=m-1}else{l=m+1}"),g.push("}"),f?g.push("return -1};"):g.push("return i};"),g.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],!1,e),d("B","x"+a+"y",b,["y"],!0,e),d("P","c(x,y)"+a+"0",b,["y","c"],!1,e),d("Q","c(x,y)"+a+"0",b,["y","c"],!0,e),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""));return f()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],54:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],55:[function(a,b,c){!function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b,c){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,"le"!==b&&"be"!==b||(c=b,b=10),void(null!==a&&this._init(a||0,b||10,c||"be")))}function f(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;f<e;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&g<=54?g-49+10:g>=17&&g<=22?g-17+10:15&g}return d}function g(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;g<f;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function h(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function i(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function n(a){m.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}"object"==typeof a?a.exports=e:b.BN=e,e.BN=e,e.wordSize=26,e.prototype._init=function(a,b,d){if("number"==typeof a)return this._initNumber(a,b,d);if("object"==typeof a)return this._initArray(a,b,d);"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&b<=36),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.sign=!0),this.strip(),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initNumber=function(a,b,d){a<0&&(this.sign=!0,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(c(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initArray=function(a,b,d){if(c("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f=0;if("be"===d)for(var e=a.length-1,g=0;e>=0;e-=3){var h=a[e]|a[e-1]<<8|a[e-2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}else if("le"===d)for(var e=0,g=0;e<a.length;e+=3){var h=a[e]|a[e+1]<<8|a[e+2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}return this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var g=f(a,c,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var g=f(a,b,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;e<=67108863;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,h=f%d,i=Math.min(f,f-h)+c,j=0,k=c;k<i;k+=d)j=g(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==h){for(var l=1,j=g(a,k,a.length,b),k=0;k<h;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;
return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var o=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?o[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&a<=36){var j=p[a],k=q[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var m=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?o[j-m.length]+m+d:m+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(a){this.strip();var b=new Array(this.byteLength());b[0]=0;var c=this.clone();if("le"!==a)for(var d=0;0!==c.cmpn(0);d++){var e=c.andln(255);c.ishrn(8),b[b.length-d-1]=e}else for(var d=0;0!==c.cmpn(0);d++){var e=c.andln(255);c.ishrn(8),b[d]=e}return b},Math.clz32?e.prototype._countBits=function(a){return 32-Math.clz32(a)}:e.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},e.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.ior=function(a){for(this.sign=this.sign||a.sign;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},e.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},e.prototype.iand=function(a){this.sign=this.sign&&a.sign;var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},e.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},e.prototype.ixor=function(a){this.sign=this.sign||a.sign;var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},e.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},e.prototype.setn=function(a,b){c("number"==typeof a&&a>=0);for(var d=a/26|0,e=a%26;this.length<=d;)this.words[this.length++]=0;return b?this.words[d]=this.words[d]|1<<e:this.words[d]=this.words[d]&~(1<<e),this.strip()},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]+f;f=b>>26,this.words[g]=67108863&b}for(;0!==f&&g<d.length;g++){var b=d.words[g]+f;f=b>>26,this.words[g]=67108863&b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);h<=g;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);i<=h;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);h<=g;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.imuln=function(a){c("number"==typeof a);for(var b=0,d=0;d<this.length;d++){var e=this.words[d]*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[d]=67108863&f}return 0!==b&&(this.words[d]=b,this.length++),this},e.prototype.muln=function(a){return this.clone().imuln(a)},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.ishln=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;g<d;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishrn=function(a,b,d){c("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=d;if(e-=g,e=Math.max(0,e),i){for(var j=0;j<g;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g){this.length-=g;for(var j=0;j<this.length;j++)this.words[j]=this.words[j+g]}else this.words[0]=0,this.length=1;for(var k=0,j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){return c("number"==typeof a),a<0?this.isubn(-a):this.sign?1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this):this._iaddn(a)},e.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),a<0)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(a,b,d){var e,f=a.length+d;if(this.words.length<f){for(var g=new Array(f),e=0;e<this.length;e++)g[e]=this.words[e];this.words=g}else e=this.length;for(this.length=Math.max(this.length,f);e<this.length;e++)this.words[e]=0;for(var h=0,e=0;e<a.length;e++){var i=this.words[e+d]+h,j=a.words[e]*b;i-=67108863&j,h=(i>>26)-(j/67108864|0),this.words[e+d]=67108863&i}for(;e<this.length-d;e++){var i=this.words[e+d]+h;h=i>>26,this.words[e+d]=67108863&i}if(0===h)return this.strip();c(h===-1),h=0;for(var e=0;e<this.length;e++){var i=-this.words[e]+h;h=i>>26,this.words[e]=67108863&i}return this.sign=!0,this.strip()},e.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),f=a,g=f.words[f.length-1],h=this._countBits(g);c=26-h,0!==c&&(f=f.shln(c),d.ishln(c),g=f.words[f.length-1]);var i,j=d.length-f.length;if("mod"!==b){i=new e(null),i.length=j+1,i.words=new Array(i.length);for(var k=0;k<i.length;k++)i.words[k]=0}var l=d.clone()._ishlnsubmul(f,1,j);l.sign||(d=l,i&&(i.words[j]=1));for(var m=j-1;m>=0;m--){var n=67108864*d.words[f.length+m]+d.words[f.length+m-1];for(n=Math.min(n/g|0,67108863),d._ishlnsubmul(f,n,m);d.sign;)n--,d.sign=!1,d._ishlnsubmul(f,1,m),0!==d.cmpn(0)&&(d.sign=!d.sign);i&&(i.words[m]=n)}return i&&i.strip(),d.strip(),"div"!==b&&0!==c&&d.ishrn(c),{div:i?i:null,mod:d}},e.prototype.divmod=function(a,b){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var d,f,g=this.neg().divmod(a,b);return"mod"!==b&&(d=g.div.neg()),"div"!==b&&(f=0===g.mod.cmpn(0)?g.mod:a.sub(g.mod)),{div:d,mod:f}}if(!this.sign&&a.sign){var d,g=this.divmod(a.neg(),b);return"mod"!==b&&(d=g.div.neg()),{div:d,mod:g.mod}}return this.sign&&a.sign?this.neg().divmod(a.neg(),b):a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div").div},e.prototype.mod=function(a){return this.divmod(a,"mod").mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.shrn(1),e=a.andln(1),f=c.cmp(d);return f<0||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(a<=67108863);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(a<=67108863);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype.egcd=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.mod(a):b.clone();for(var f=new e(1),g=new e(0),h=new e(0),i=new e(1),j=0;b.isEven()&&d.isEven();)b.ishrn(1),d.ishrn(1),++j;for(var k=d.clone(),l=b.clone();0!==b.cmpn(0);){for(;b.isEven();)b.ishrn(1),f.isEven()&&g.isEven()?(f.ishrn(1),g.ishrn(1)):(f.iadd(k).ishrn(1),g.isub(l).ishrn(1));for(;d.isEven();)d.ishrn(1),h.isEven()&&i.isEven()?(h.ishrn(1),i.ishrn(1)):(h.iadd(k).ishrn(1),i.isub(l).ishrn(1));b.cmp(d)>=0?(b.isub(d),f.isub(h),g.isub(i)):(d.isub(b),h.isub(f),i.isub(g))}return{a:h,b:i,gcd:d.ishln(j)}},e.prototype._invmp=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.mod(a):b.clone();for(var f=new e(1),g=new e(0),h=d.clone();b.cmpn(1)>0&&d.cmpn(1)>0;){for(;b.isEven();)b.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(h).ishrn(1);for(;d.isEven();)d.ishrn(1),g.isEven()?g.ishrn(1):g.iadd(h).ishrn(1);b.cmp(d)>=0?(b.isub(d),f.isub(g)):(d.isub(b),g.isub(f))}return 0===b.cmpn(1)?f:g},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);for(;;){for(;b.isEven();)b.ishrn(1);for(;c.isEven();)c.ishrn(1);var e=b.cmp(c);if(e<0){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.ishln(d)},e.prototype.invm=function(a){return this.egcd(a).a.mod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;f<d+1;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=a<0;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:d<a?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){d<e?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new m(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var r={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},h.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},h.prototype.split=function(a,b){a.ishrn(this.n,0,b)},h.prototype.imulK=function(a){return a.imul(this.k)},d(i,h),i.prototype.split=function(a,b){for(var c=4194303,d=Math.min(a.length,9),e=0;e<d;e++)b.words[e]=a.words[e];if(b.length=d,a.length<=9)return a.words[0]=0,void(a.length=1);var f=a.words[9];b.words[b.length++]=f&c;for(var e=10;e<a.length;e++){var g=a.words[e];a.words[e-10]=(g&c)<<4|f>>>22,f=g}a.words[e-10]=f>>>22,a.length-=9},i.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b,c=0,d=0;d<a.length;d++){var e=a.words[d];b=64*e,c+=977*e,b+=c/67108864|0,c&=67108863,a.words[d]=c,c=b}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},d(j,h),d(k,h),d(l,h),l.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function s(a){if(r[a])return r[a];var s;if("k256"===a)s=new i;else if("p224"===a)s=new j;else if("p192"===a)s=new k;else{if("p25519"!==a)throw new Error("Unknown prime "+a);s=new l}return r[a]=s,s},m.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},m.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},m.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.mod(this.m)._forceRed(this)},m.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},m.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},m.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},m.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},m.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},m.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.shln(b))},m.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},m.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},m.prototype.isqr=function(a){return this.imul(a,a)},m.prototype.sqr=function(a){return this.mul(a,a)},m.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).ishrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.ishrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).ishrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).ishrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(q<o);var r=this.pow(m,new e(1).ishln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},m.prototype.invm=function(a){var b=a._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},m.prototype.pow=function(a,b){var c=[];if(0===b.cmpn(0))return new e(1);for(var d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.ishrn(1);for(var f=a,g=0;g<c.length&&0===c[g];g++,f=this.sqr(f));if(++g<c.length)for(var d=this.sqr(f);g<c.length;g++,d=this.sqr(d))0!==c[g]&&(f=this.mul(f,d));return f},m.prototype.convertTo=function(a){var b=a.mod(this.m);return b===a?b.clone():b},m.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new n(a)},d(n,m),n.prototype.convertTo=function(a){return this.imod(a.shln(this.shift))},n.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},n.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).ishrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},n.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).ishrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},n.prototype.invm=function(a){var b=this.imod(a._invmp(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{}],56:[function(a,b,c){"use strict";function d(a){var b,c,d,e=a.length,f=0;for(b=0;b<e;++b)f+=a[b].length;var g=new Array(f),h=0;for(b=0;b<e;++b){var i=a[b],j=i.length;for(c=0;c<j;++c){var k=g[h++]=new Array(j-1),l=0;for(d=0;d<j;++d)d!==c&&(k[l++]=i[d]);if(1&c){var m=k[1];k[1]=k[0],k[0]=m}}}return g}b.exports=d},{}],57:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a;++c)if(!(b[c]<=b[c+a]))return!0;return!1}function e(a,b,c,e){for(var f=0,g=0,h=0,i=a.length;h<i;++h){var j=a[h];if(!d(b,j)){for(var k=0;k<2*b;++k)c[f++]=j[k];e[g++]=h}}return g}function f(a,b,c,d){var f=a.length,g=b.length;if(!(f<=0||g<=0)){var h=a[0].length>>>1;if(!(h<=0)){var i,j=l.mallocDouble(2*h*f),k=l.mallocInt32(f);if(f=e(a,h,j,k),f>0){if(1===h&&d)m.init(f),i=m.sweepComplete(h,c,0,f,j,k,0,f,j,k);else{var o=l.mallocDouble(2*h*g),p=l.mallocInt32(g);g=e(b,h,o,p),g>0&&(m.init(f+g),i=1===h?m.sweepBipartite(h,c,0,f,j,k,0,g,o,p):n(h,c,d,f,j,k,g,o,p),l.free(o),l.free(p))}l.free(j),l.free(k)}return i}}}function g(a,b){k.push([a,b])}function h(a){return k=[],f(a,a,g,!0),k}function i(a,b){return k=[],f(a,b,g,!1),k}function j(a,b,c){switch(arguments.length){case 1:return h(a);case 2:return"function"==typeof b?f(a,a,b,!0):i(a,b);case 3:return f(a,b,c,!1);default:throw new Error("box-intersect: Invalid arguments")}}b.exports=j;var k,l=a("typedarray-pool"),m=a("./lib/sweep"),n=a("./lib/intersect")},{"./lib/intersect":59,"./lib/sweep":63,"typedarray-pool":496}],58:[function(a,b,c){"use strict";function d(a,b,c){var d="bruteForce"+(a?"Red":"Blue")+(b?"Flip":"")+(c?"Full":""),e=["function ",d,"(",w.join(),"){","var ",j,"=2*",f,";"],i="for(var i="+k+","+o+"="+j+"*"+k+";i<"+l+";++i,"+o+"+="+j+"){var x0="+m+"["+g+"+"+o+"],x1="+m+"["+g+"+"+o+"+"+f+"],xi="+n+"[i];",x="for(var j="+p+","+t+"="+j+"*"+p+";j<"+q+";++j,"+t+"+="+j+"){var y0="+r+"["+g+"+"+t+"],"+(c?"y1="+r+"["+g+"+"+t+"+"+f+"],":"")+"yi="+s+"[j];";return a?e.push(i,v,":",x):e.push(x,v,":",i),c?e.push("if(y1<x0||x1<y0)continue;"):b?e.push("if(y0<=x0||x1<y0)continue;"):e.push("if(y0<x0||x1<y0)continue;"),e.push("for(var k="+g+"+1;k<"+f+";++k){var r0="+m+"[k+"+o+"],r1="+m+"[k+"+f+"+"+o+"],b0="+r+"[k+"+t+"],b1="+r+"[k+"+f+"+"+t+"];if(r1<b0||b1<r0)continue "+v+";}var "+u+"="+h+"("),b?e.push("yi,xi"):e.push("xi,yi"),e.push(");if("+u+"!==void 0)return "+u+";}}}"),{name:d,code:e.join("")}}function e(a){function b(b,c){var f=d(b,c,a);e.push(f.code),g.push("return "+f.name+"("+w.join()+");")}var c="bruteForce"+(a?"Full":"Partial"),e=[],f=w.slice();a||f.splice(3,0,i);var g=["function "+c+"("+f.join()+"){"];g.push("if("+l+"-"+k+">"+q+"-"+p+"){"),a?(b(!0,!1),g.push("}else{"),b(!1,!1)):(g.push("if("+i+"){"),b(!0,!0),g.push("}else{"),b(!0,!1),g.push("}}else{if("+i+"){"),b(!1,!0),g.push("}else{"),b(!1,!1),g.push("}")),g.push("}}return "+c);var h=e.join("")+g.join(""),j=new Function(h);return j()}var f="d",g="ax",h="vv",i="fp",j="es",k="rs",l="re",m="rb",n="ri",o="rp",p="bs",q="be",r="bb",s="bi",t="bp",u="rv",v="Q",w=[f,g,h,k,l,m,n,p,q,r,s];c.partial=e(!1),c.full=e(!0)},{}],59:[function(a,b,c){"use strict";function d(a,b){var c=8*j.log2(b+1)*(a+1)|0,d=j.nextPow2(z*c);C.length<d&&(i.free(C),C=i.mallocInt32(d));var e=j.nextPow2(A*c);D<e&&(i.free(D),D=i.mallocDouble(e))}function e(a,b,c,d,e,f,g,h,i){var j=z*a;C[j]=b,C[j+1]=c,C[j+2]=d,C[j+3]=e,C[j+4]=f,C[j+5]=g;var k=A*a;D[k]=h,D[k+1]=i}function f(a,b,c,d,e,f,g,h,i,j,k){var l=2*a,m=i*l,n=j[m+b];a:for(var o=e,p=e*l;o<f;++o,p+=l){var q=g[p+b],r=g[p+b+a];if(!(n<q||r<n||d&&n===q)){for(var s=h[o],t=b+1;t<a;++t){var q=g[p+t],r=g[p+t+a],u=j[m+t],v=j[m+t+a];if(r<u||v<q)continue a}var w;if(w=d?c(k,s):c(s,k),void 0!==w)return w}}}function g(a,b,c,d,e,f,g,h,i,j){var k=2*a,l=h*k,m=i[l+b];a:for(var n=d,o=d*k;n<e;++n,o+=k){var p=g[n];if(p!==j){var q=f[o+b],r=f[o+b+a];if(!(m<q||r<m)){for(var s=b+1;s<a;++s){var q=f[o+s],r=f[o+s+a],t=i[l+s],u=i[l+s+a];if(r<t||u<q)continue a}var v=c(p,j);if(void 0!==v)return v}}}}function h(a,b,c,h,i,j,k,p,B){d(a,h+k);var E,F=0,G=2*a;for(e(F++,0,0,h,0,k,c?16:0,-(1/0),1/0),c||e(F++,0,0,k,0,h,1,-(1/0),1/0);F>0;){F-=1;var H=F*z,I=C[H],J=C[H+1],K=C[H+2],L=C[H+3],M=C[H+4],N=C[H+5],O=F*A,P=D[O],Q=D[O+1],R=1&N,S=!!(16&N),T=i,U=j,V=p,W=B;if(R&&(T=p,U=B,V=i,W=j),!(2&N&&(K=v(a,I,J,K,T,U,Q),J>=K)||4&N&&(J=w(a,I,J,K,T,U,P),J>=K))){var X=K-J,Y=M-L;if(S){if(a*X*(X+Y)<s){if(E=n.scanComplete(a,I,b,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}}else{if(a*Math.min(X,Y)<q){if(E=l(a,I,b,R,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}if(a*X*Y<r){if(E=n.scanBipartite(a,I,b,R,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}}var Z=t(a,I,J,K,T,U,P,Q);if(J<Z)if(a*(Z-J)<q){if(E=m(a,I+1,b,J,Z,T,U,L,M,V,W),void 0!==E)return E}else if(I===a-2){if(E=R?n.sweepBipartite(a,b,L,M,V,W,J,Z,T,U):n.sweepBipartite(a,b,J,Z,T,U,L,M,V,W),void 0!==E)return E}else e(F++,I+1,J,Z,L,M,R,-(1/0),1/0),e(F++,I+1,L,M,J,Z,1^R,-(1/0),1/0);if(Z<K){var $=o(a,I,L,M,V,W),_=V[G*$+I],aa=u(a,I,$,M,V,W,_);if(aa<M&&e(F++,I,Z,K,aa,M,(4|R)+(S?16:0),_,Q),L<$&&e(F++,I,Z,K,L,$,(2|R)+(S?16:0),P,_),$+1===aa){if(E=S?g(a,I,b,Z,K,T,U,$,V,W[$]):f(a,I,b,R,Z,K,T,U,$,V,W[$]),void 0!==E)return E}else if($<aa){var ba;if(S){if(ba=x(a,I,Z,K,T,U,_),Z<ba){var ca=u(a,I,Z,ba,T,U,_);if(I===a-2){if(Z<ca&&(E=n.sweepComplete(a,b,Z,ca,T,U,$,aa,V,W),void 0!==E))return E;if(ca<ba&&(E=n.sweepBipartite(a,b,ca,ba,T,U,$,aa,V,W),void 0!==E))return E}else Z<ca&&e(F++,I+1,Z,ca,$,aa,16,-(1/0),1/0),ca<ba&&(e(F++,I+1,ca,ba,$,aa,0,-(1/0),1/0),e(F++,I+1,$,aa,ca,ba,1,-(1/0),1/0))}}else ba=R?y(a,I,Z,K,T,U,_):x(a,I,Z,K,T,U,_),Z<ba&&(I===a-2?E=R?n.sweepBipartite(a,b,$,aa,V,W,Z,ba,T,U):n.sweepBipartite(a,b,Z,ba,T,U,$,aa,V,W):(e(F++,I+1,Z,ba,$,aa,R,-(1/0),1/0),e(F++,I+1,$,aa,Z,ba,1^R,-(1/0),1/0)))}}}}}b.exports=h;var i=a("typedarray-pool"),j=a("bit-twiddle"),k=a("./brute"),l=k.partial,m=k.full,n=a("./sweep"),o=a("./median"),p=a("./partition"),q=128,r=1<<22,s=1<<22,t=p("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),u=p("lo===p0",["p0"]),v=p("lo<p0",["p0"]),w=p("hi<=p0",["p0"]),x=p("lo<=p0&&p0<=hi",["p0"]),y=p("lo<p0&&p0<=hi",["p0"]),z=6,A=2,B=1024,C=i.mallocInt32(B),D=i.mallocDouble(B)},{"./brute":58,"./median":60,"./partition":61,"./sweep":63,"bit-twiddle":54,"typedarray-pool":496}],60:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){for(var g=2*a,h=g*(c+1)+b,i=c+1;i<d;++i,h+=g)for(var j=e[h],k=i,l=g*(i-1);k>c&&e[l+b]>j;--k,l-=g){for(var m=l,n=l+g,o=0;o<g;++o,++m,++n){var p=e[m];e[m]=e[n],e[n]=p}var q=f[k];f[k]=f[k-1],f[k-1]=q}}function e(a,b,c,e,f,i){if(e<=c+1)return c;for(var j=c,k=e,l=e+c>>>1,m=2*a,n=l,o=f[m*l+b];j<k;){if(k-j<h){d(a,b,j,k,f,i),o=f[m*l+b];break}var p=k-j,q=Math.random()*p+j|0,r=f[m*q+b],s=Math.random()*p+j|0,t=f[m*s+b],u=Math.random()*p+j|0,v=f[m*u+b];r<=t?v>=t?(n=s,o=t):r>=v?(n=q,o=r):(n=u,o=v):t>=v?(n=s,o=t):v>=r?(n=q,o=r):(n=u,o=v);for(var w=m*(k-1),x=m*n,y=0;y<m;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];i[k-1]=i[n],i[n]=A,n=g(a,b,j,k-1,f,i,o);for(var w=m*(k-1),x=m*n,y=0;y<m;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];if(i[k-1]=i[n],i[n]=A,l<n){for(k=n-1;j<k&&f[m*(k-1)+b]===o;)k-=1;k+=1}else{if(!(n<l))break;for(j=n+1;j<k&&f[m*j+b]===o;)j+=1}}return g(a,b,c,l,f,i,f[m*l+b])}b.exports=e;var f=a("./partition"),g=f("lo<p0",["p0"]),h=8},{"./partition":61}],61:[function(a,b,c){"use strict";function d(a,b){var c="abcdef".split("").concat(b),d=[];return a.indexOf("lo")>=0&&d.push("lo=e[k+n]"),a.indexOf("hi")>=0&&d.push("hi=e[k+o]"),c.push(e.replace("_",d.join()).replace("$",a)),Function.apply(void 0,c)}b.exports=d;var e="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],62:[function(a,b,c){"use strict";function d(a,b){b<=4*m?e(0,b-1,a):l(0,b-1,a)}function e(a,b,c){for(var d=2*(a+1),e=a+1;e<=b;++e){for(var f=c[d++],g=c[d++],h=e,i=d-2;h-- >a;){var j=c[i-2],k=c[i-1];if(j<f)break;if(j===f&&k<g)break;c[i]=j,c[i+1]=k,i-=2}c[i]=f,c[i+1]=g}}function f(a,b,c){a*=2,b*=2;var d=c[a],e=c[a+1];c[a]=c[b],c[a+1]=c[b+1],c[b]=d,c[b+1]=e}function g(a,b,c){a*=2,b*=2,c[a]=c[b],c[a+1]=c[b+1]}function h(a,b,c,d){a*=2,b*=2,c*=2;var e=d[a],f=d[a+1];d[a]=d[b],d[a+1]=d[b+1],d[b]=d[c],d[b+1]=d[c+1],d[c]=e,d[c+1]=f}function i(a,b,c,d,e){a*=2,b*=2,e[a]=e[b],e[b]=c,e[a+1]=e[b+1],e[b+1]=d}function j(a,b,c){a*=2,b*=2;var d=c[a],e=c[b];return!(d<e)&&(d!==e||c[a+1]>c[b+1])}function k(a,b,c,d){a*=2;var e=d[a];return e<b||e===b&&d[a+1]<c}function l(a,b,c){var d=(b-a+1)/6|0,n=a+d,o=b-d,p=a+b>>1,q=p-d,r=p+d,s=n,t=q,u=p,v=r,w=o,x=a+1,y=b-1,z=0;j(s,t,c)&&(z=s,s=t,t=z),j(v,w,c)&&(z=v,v=w,w=z),j(s,u,c)&&(z=s,s=u,u=z),j(t,u,c)&&(z=t,t=u,u=z),j(s,v,c)&&(z=s,s=v,v=z),j(u,v,c)&&(z=u,u=v,v=z),j(t,w,c)&&(z=t,t=w,w=z),j(t,u,c)&&(z=t,t=u,u=z),j(v,w,c)&&(z=v,v=w,w=z);for(var A=c[2*t],B=c[2*t+1],C=c[2*v],D=c[2*v+1],E=2*s,F=2*u,G=2*w,H=2*n,I=2*p,J=2*o,K=0;K<2;++K){var L=c[E+K],M=c[F+K],N=c[G+K];c[H+K]=L,c[I+K]=M,c[J+K]=N}g(q,a,c),g(r,b,c);for(var O=x;O<=y;++O)if(k(O,A,B,c))O!==x&&f(O,x,c),++x;else if(!k(O,C,D,c))for(;;){if(k(y,C,D,c)){k(y,A,B,c)?(h(O,x,y,c),++x,--y):(f(O,y,c),--y);break}if(--y<O)break}i(a,x-1,A,B,c),i(b,y+1,C,D,c),x-2-a<=m?e(a,x-2,c):l(a,x-2,c),b-(y+2)<=m?e(y+2,b,c):l(y+2,b,c),y-x<=m?e(x,y,c):l(x,y,c)}b.exports=d;var m=32},{}],63:[function(a,b,c){"use strict";function d(a){var b=l.nextPow2(a);p.length<b&&(k.free(p),p=k.mallocInt32(b)),q.length<b&&(k.free(q),q=k.mallocInt32(b)),r.length<b&&(k.free(r),r=k.mallocInt32(b)),s.length<b&&(k.free(s),s=k.mallocInt32(b)),t.length<b&&(k.free(t),t=k.mallocInt32(b)),u.length<b&&(k.free(u),u=k.mallocInt32(b));var c=8*b;v.length<c&&(k.free(v),v=k.mallocDouble(c))}function e(a,b,c,d){
var e=b[d],f=a[c-1];a[e]=f,b[f]=e}function f(a,b,c,d){a[c]=d,b[d]=c}function g(a,b,c,d,g,h,i,j,k,l){for(var o=0,t=2*a,u=a-1,w=t-1,x=c;x<d;++x){var y=h[x],z=t*x;v[o++]=g[z+u],v[o++]=-(y+1),v[o++]=g[z+w],v[o++]=y}for(var x=i;x<j;++x){var y=l[x]+n,A=t*x;v[o++]=k[A+u],v[o++]=-y,v[o++]=k[A+w],v[o++]=y}var B=o>>>1;m(v,B);for(var C=0,D=0,x=0;x<B;++x){var E=0|v[2*x+1];if(E>=n)E=E-n|0,e(r,s,D--,E);else if(E>=0)e(p,q,C--,E);else if(E<=-n){E=-E-n|0;for(var F=0;F<C;++F){var G=b(p[F],E);if(void 0!==G)return G}f(r,s,D++,E)}else{E=-E-1|0;for(var F=0;F<D;++F){var G=b(E,r[F]);if(void 0!==G)return G}f(p,q,C++,E)}}}function h(a,b,c,d,g,h,i,j,k,l){for(var n=0,o=2*a,w=a-1,x=o-1,y=c;y<d;++y){var z=h[y]+1<<1,A=o*y;v[n++]=g[A+w],v[n++]=-z,v[n++]=g[A+x],v[n++]=z}for(var y=i;y<j;++y){var z=l[y]+1<<1,B=o*y;v[n++]=k[B+w],v[n++]=1|-z,v[n++]=k[B+x],v[n++]=1|z}var C=n>>>1;m(v,C);for(var D=0,E=0,F=0,y=0;y<C;++y){var G=0|v[2*y+1],H=1&G;if(y<C-1&&G>>1===v[2*y+3]>>1&&(H=2,y+=1),G<0){for(var I=-(G>>1)-1,J=0;J<F;++J){var K=b(t[J],I);if(void 0!==K)return K}if(0!==H)for(var J=0;J<D;++J){var K=b(p[J],I);if(void 0!==K)return K}if(1!==H)for(var J=0;J<E;++J){var K=b(r[J],I);if(void 0!==K)return K}0===H?f(p,q,D++,I):1===H?f(r,s,E++,I):2===H&&f(t,u,F++,I)}else{var I=(G>>1)-1;0===H?e(p,q,D--,I):1===H?e(r,s,E--,I):2===H&&e(t,u,F--,I)}}}function i(a,b,c,d,g,h,i,j,k,l,o,r){var s=0,t=2*a,u=b,w=b+a,x=1,y=1;d?y=n:x=n;for(var z=g;z<h;++z){var A=z+x,B=t*z;v[s++]=i[B+u],v[s++]=-A,v[s++]=i[B+w],v[s++]=A}for(var z=k;z<l;++z){var A=z+y,C=t*z;v[s++]=o[C+u],v[s++]=-A}var D=s>>>1;m(v,D);for(var E=0,z=0;z<D;++z){var F=0|v[2*z+1];if(F<0){var A=-F,G=!1;if(A>=n?(G=!d,A-=n):(G=!!d,A-=1),G)f(p,q,E++,A);else{var H=r[A],I=t*A,J=o[I+b+1],K=o[I+b+1+a];a:for(var L=0;L<E;++L){var M=p[L],N=t*M;if(!(K<i[N+b+1]||i[N+b+1+a]<J)){for(var O=b+2;O<a;++O)if(o[I+O+a]<i[N+O]||i[N+O+a]<o[I+O])continue a;var P,Q=j[M];if(P=d?c(H,Q):c(Q,H),void 0!==P)return P}}}}else e(p,q,E--,F-x)}}function j(a,b,c,d,e,f,g,h,i,j,k){for(var l=0,o=2*a,q=b,r=b+a,s=d;s<e;++s){var t=s+n,u=o*s;v[l++]=f[u+q],v[l++]=-t,v[l++]=f[u+r],v[l++]=t}for(var s=h;s<i;++s){var t=s+1,w=o*s;v[l++]=j[w+q],v[l++]=-t}var x=l>>>1;m(v,x);for(var y=0,s=0;s<x;++s){var z=0|v[2*s+1];if(z<0){var t=-z;if(t>=n)p[y++]=t-n;else{t-=1;var A=k[t],B=o*t,C=j[B+b+1],D=j[B+b+1+a];a:for(var E=0;E<y;++E){var F=p[E],G=g[F];if(G===A)break;var H=o*F;if(!(D<f[H+b+1]||f[H+b+1+a]<C)){for(var I=b+2;I<a;++I)if(j[B+I+a]<f[H+I]||f[H+I+a]<j[B+I])continue a;var J=c(G,A);if(void 0!==J)return J}}}}else{for(var t=z-n,E=y-1;E>=0;--E)if(p[E]===t){for(var I=E+1;I<y;++I)p[I-1]=p[I];break}--y}}}b.exports={init:d,sweepBipartite:g,sweepComplete:h,scanBipartite:i,scanComplete:j};var k=a("typedarray-pool"),l=a("bit-twiddle"),m=a("./sort"),n=1<<28,o=1024,p=k.mallocInt32(o),q=k.mallocInt32(o),r=k.mallocInt32(o),s=k.mallocInt32(o),t=k.mallocInt32(o),u=k.mallocInt32(o),v=k.mallocDouble(8*o)},{"./sort":62,"bit-twiddle":54,"typedarray-pool":496}],64:[function(a,b,c){(function(b){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}function e(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a,b){if(e()<b)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=g.prototype):(null===a&&(a=new g(b)),a.length=b),a}function g(a,b,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return k(this,a)}return h(this,a,b,c)}function h(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?n(a,b,c,d):"string"==typeof b?l(a,b,c):o(a,b)}function i(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function j(a,b,c,d){return i(b),b<=0?f(a,b):void 0!==c?"string"==typeof d?f(a,b).fill(c,d):f(a,b).fill(c):f(a,b)}function k(a,b){if(i(b),a=f(a,b<0?0:0|p(b)),!g.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function l(a,b,c){if("string"==typeof c&&""!==c||(c="utf8"),!g.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|r(b,c);a=f(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function m(a,b){var c=b.length<0?0:0|p(b.length);a=f(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function n(a,b,c,d){if(b.byteLength,c<0||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),g.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=g.prototype):a=m(a,b),a}function o(a,b){if(g.isBuffer(b)){var c=0|p(b.length);return a=f(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||Y(b.length)?f(a,0):m(a,b);if("Buffer"===b.type&&_(b.data))return m(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),g.alloc(+a)}function r(a,b){if(g.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b=255&b,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return 0===b&&c===a.length?Z.fromByteArray(a):Z.fromByteArray(a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(b<=aa)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function L(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return a<16?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Z.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Y(a){return a!==a}var Z=a("base64-js"),$=a("ieee754"),_=a("isarray");c.Buffer=g,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),c.kMaxLength=e(),g.poolSize=8192,g._augment=function(a){return a.__proto__=g.prototype,a},g.from=function(a,b,c){return h(null,a,b,c)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(a,b,c){return j(null,a,b,c)},g.allocUnsafe=function(a){return k(null,a)},g.allocUnsafeSlow=function(a){return k(null,a)},g.isBuffer=function(a){return!(null==a||!a._isBuffer)},g.compare=function(a,b){if(!g.isBuffer(a)||!g.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},g.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(a,b){if(!_(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},g.byteLength=r,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)t(this,b,b+1);return this},g.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},g.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},g.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):s.apply(this,arguments)},g.prototype.equals=function(a){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},g.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},g.prototype.compare=function(a,b,c,d,e){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],h=k[l];break}return f<h?-1:h<f?1:0},g.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},g.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},g.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},g.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;g.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(g.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=g.prototype;else{var e=b-a;d=new g(e,(void 0));for(var f=0;f<e;++f)d[f]=this[f+a]}return d},g.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},g.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},g.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},g.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},g.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},g.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},g.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},g.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},g.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},g.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},g.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},g.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},g.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!0,23,4)},g.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!1,23,4)},g.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!0,52,8)},g.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!1,52,8)},g.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b=0|b,c=0|c,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},g.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b=0|b,c=0|c,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},g.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,1,255,0),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},g.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):M(this,a,b,!0),b+4},g.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,1,127,-128),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},g.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):M(this,a,b,!0),b+4},g.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},g.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},g.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},g.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},g.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3||!g.TYPED_ARRAY_SUPPORT)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},g.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a=255&a);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{var h=g.isBuffer(a)?a:T(new g(a,d).toString()),i=h.length;for(f=0;f<c-b;++f)this[f+b]=h[f%i]}return this};var ba=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":65,ieee754:253,isarray:66}],65:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;b<e;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;i<k;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],66:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],67:[function(a,b,c){"use strict";function d(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function e(a,b){return a[0]-b[0]||a[1]-b[1]}function f(a){return a.map(d).sort(e)}function g(a,b,c){return b in a?a[b]:c}function h(a,b,c){Array.isArray(b)?(c=c||{},b=b||[]):(c=b||{},b=[]);var d=!!g(c,"delaunay",!0),e=!!g(c,"interior",!0),h=!!g(c,"exterior",!0),m=!!g(c,"infinity",!1);if(!e&&!h||0===a.length)return[];var n=i(a,b);if(d||e!==h||m){for(var o=j(a.length,f(b)),p=0;p<n.length;++p){var q=n[p];o.addTriangle(q[0],q[1],q[2])}return d&&k(a,o),h?e?m?l(o,0,m):o.cells():l(o,1,m):l(o,-1)}return n}var i=a("./lib/monotone"),j=a("./lib/triangulation"),k=a("./lib/delaunay"),l=a("./lib/filter");b.exports=h},{"./lib/delaunay":68,"./lib/filter":69,"./lib/monotone":70,"./lib/triangulation":71}],68:[function(a,b,c){"use strict";function d(a,b,c,d,e,g){var h=b.opposite(d,e);if(!(h<0)){if(e<d){var i=d;d=e,e=i,i=g,g=h,h=i}b.isConstraint(d,e)||f(a[d],a[e],a[g],a[h])<0&&c.push(d,e)}}function e(a,b){for(var c=[],e=a.length,g=b.stars,h=0;h<e;++h)for(var i=g[h],j=1;j<i.length;j+=2){var k=i[j];if(!(k<h||b.isConstraint(h,k))){for(var l=i[j-1],m=-1,n=1;n<i.length;n+=2)if(i[n-1]===k){m=i[n];break}m<0||f(a[h],a[k],a[l],a[m])<0&&c.push(h,k)}}for(;c.length>0;){for(var k=c.pop(),h=c.pop(),l=-1,m=-1,i=g[h],o=1;o<i.length;o+=2){var p=i[o-1],q=i[o];p===k?m=q:q===k&&(l=p)}l<0||m<0||f(a[h],a[k],a[l],a[m])>=0||(b.flip(h,k),d(a,b,c,l,h,m),d(a,b,c,h,m,l),d(a,b,c,m,k,l),d(a,b,c,k,l,m))}}var f=a("robust-in-sphere")[4];a("binary-search-bounds"),b.exports=e},{"binary-search-bounds":72,"robust-in-sphere":463}],69:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.cells=a,this.neighbor=b,this.flags=d,this.constraint=c,this.active=e,this.next=f,this.boundary=g}function e(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}function f(a,b){for(var c=a.cells(),f=c.length,g=0;g<f;++g){var h=c[g],i=h[0],j=h[1],k=h[2];j<k?j<i&&(h[0]=j,h[1]=k,h[2]=i):k<i&&(h[0]=k,h[1]=i,h[2]=j)}c.sort(e);for(var l=new Array(f),g=0;g<l.length;++g)l[g]=0;var m=[],n=[],o=new Array(3*f),p=new Array(3*f),q=null;b&&(q=[]);for(var r=new d(c,o,p,l,m,n,q),g=0;g<f;++g)for(var h=c[g],s=0;s<3;++s){var i=h[s],j=h[(s+1)%3],t=o[3*g+s]=r.locate(j,i,a.opposite(j,i)),u=p[3*g+s]=a.isConstraint(i,j);t<0&&(u?n.push(g):(m.push(g),l[g]=1),b&&q.push([j,i,-1]))}return r}function g(a,b,c){for(var d=0,e=0;e<a.length;++e)b[e]===c&&(a[d++]=a[e]);return a.length=d,a}function h(a,b,c){var d=f(a,c);if(0===b)return c?d.cells.concat(d.boundary):d.cells;for(var e=1,h=d.active,i=d.next,j=d.flags,k=d.cells,l=d.constraint,m=d.neighbor;h.length>0||i.length>0;){for(;h.length>0;){var n=h.pop();if(j[n]!==-e){j[n]=e;for(var o=(k[n],0);o<3;++o){var p=m[3*n+o];p>=0&&0===j[p]&&(l[3*n+o]?i.push(p):(h.push(p),j[p]=e))}}}var q=i;i=h,h=q,i.length=0,e=-e}var r=g(k,j,b);return c?r.concat(d.boundary):r}var i=a("binary-search-bounds");b.exports=h;var j=d.prototype;j.locate=function(){var a=[0,0,0];return function(b,c,d){var f=b,g=c,h=d;return c<d?c<b&&(f=c,g=d,h=b):d<b&&(f=d,g=b,h=c),f<0?-1:(a[0]=f,a[1]=g,a[2]=h,i.eq(this.cells,a,e))}}()},{"binary-search-bounds":72}],70:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.a=a,this.b=b,this.idx=c,this.lowerIds=d,this.upperIds=e}function e(a,b,c,d){this.a=a,this.b=b,this.type=c,this.idx=d}function f(a,b){var c=a.a[0]-b.a[0]||a.a[1]-b.a[1]||a.type-b.type;return c?c:a.type!==o&&(c=n(a.a,a.b,b.b))?c:a.idx-b.idx}function g(a,b){return n(a.a,a.b,b)}function h(a,b,c,d,e){for(var f=m.lt(b,d,g),h=m.gt(b,d,g),i=f;i<h;++i){for(var j=b[i],k=j.lowerIds,l=k.length;l>1&&n(c[k[l-2]],c[k[l-1]],d)>0;)a.push([k[l-1],k[l-2],e]),l-=1;k.length=l,k.push(e);for(var o=j.upperIds,l=o.length;l>1&&n(c[o[l-2]],c[o[l-1]],d)<0;)a.push([o[l-2],o[l-1],e]),l-=1;o.length=l,o.push(e)}}function i(a,b){var c;return(c=a.a[0]<b.a[0]?n(a.a,a.b,b.a):n(b.b,b.a,a.a))?c:(c=b.b[0]<a.b[0]?n(a.a,a.b,b.b):n(b.b,b.a,a.b),c||a.idx-b.idx)}function j(a,b,c){var e=m.le(a,c,i),f=a[e],g=f.upperIds,h=g[g.length-1];f.upperIds=[h],a.splice(e+1,0,new d(c.a,c.b,c.idx,[h],g))}function k(a,b,c){var d=c.a;c.a=c.b,c.b=d;var e=m.eq(a,c,i),f=a[e],g=a[e-1];g.upperIds=f.upperIds,a.splice(e,1)}function l(a,b){for(var c=a.length,g=b.length,i=[],l=0;l<c;++l)i.push(new e(a[l],null,o,l));for(var l=0;l<g;++l){var m=b[l],n=a[m[0]],r=a[m[1]];n[0]<r[0]?i.push(new e(n,r,q,l),new e(r,n,p,l)):n[0]>r[0]&&i.push(new e(r,n,q,l),new e(n,r,p,l))}i.sort(f);for(var s=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),t=[new d([s,1],[s,0],(-1),[],[],[],[])],u=[],l=0,v=i.length;l<v;++l){var w=i[l],x=w.type;x===o?h(u,t,a,w.a,w.idx):x===q?j(t,a,w):k(t,a,w)}return u}var m=a("binary-search-bounds"),n=a("robust-orientation")[3],o=0,p=1,q=2;b.exports=l},{"binary-search-bounds":72,"robust-orientation":465}],71:[function(a,b,c){"use strict";function d(a,b){this.stars=a,this.edges=b}function e(a,b,c){for(var d=1,e=a.length;d<e;d+=2)if(a[d-1]===b&&a[d]===c)return a[d-1]=a[e-2],a[d]=a[e-1],void(a.length=e-2)}function f(a,b){for(var c=new Array(a),e=0;e<a;++e)c[e]=[];return new d(c,b)}var g=a("binary-search-bounds");b.exports=f;var h=d.prototype;h.isConstraint=function(){function a(a,b){return a[0]-b[0]||a[1]-b[1]}var b=[0,0];return function(c,d){return b[0]=Math.min(c,d),b[1]=Math.max(c,d),g.eq(this.edges,b,a)>=0}}(),h.removeTriangle=function(a,b,c){var d=this.stars;e(d[a],b,c),e(d[b],c,a),e(d[c],a,b)},h.addTriangle=function(a,b,c){var d=this.stars;d[a].push(b,c),d[b].push(c,a),d[c].push(a,b)},h.opposite=function(a,b){for(var c=this.stars[b],d=1,e=c.length;d<e;d+=2)if(c[d]===a)return c[d-1];return-1},h.flip=function(a,b){var c=this.opposite(a,b),d=this.opposite(b,a);this.removeTriangle(a,b,c),this.removeTriangle(b,a,d),this.addTriangle(a,d,c),this.addTriangle(b,c,d)},h.edges=function(){for(var a=this.stars,b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;f+=2)b.push([e[f],e[f+1]]);return b},h.cells=function(){for(var a=this.stars,b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;f+=2){var h=e[f],i=e[f+1];c<Math.min(h,i)&&b.push([c,h,i])}return b}},{"binary-search-bounds":72}],72:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=["function ",a,"(a,l,h,",d.join(","),"){",e?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return e?b.indexOf("c")<0?f.push(";if(x===y){return m}else if(x<=y){"):f.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):f.push(";if(",b,"){i=m;"),c?f.push("l=m+1}else{h=m-1}"):f.push("h=m-1}else{l=m+1}"),f.push("}"),e?f.push("return -1};"):f.push("return i};"),f.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],e),d("P","c(x,y)"+a+"0",b,["y","c"],e),"function dispatchBsearch",c,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",c].join(""));return f()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],73:[function(a,b,c){"use strict";function d(a){for(var b=1,c=1;c<a.length;++c)for(var d=0;d<c;++d)if(a[c]<a[d])b=-b;else if(a[d]===a[c])return 0;return b}b.exports=d},{}],74:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=a.length,e=0;e<d;++e)c+=a[e]*b[e];return c}function e(a){var b=a.length;if(0===b)return[];var c=(a[0].length,g([a.length+1,a.length+1],1)),e=g([a.length+1],1);c[b][b]=0;for(var f=0;f<b;++f){for(var i=0;i<=f;++i)c[i][f]=c[f][i]=2*d(a[f],a[i]);e[f]=d(a[f],a[f])}for(var j=h(c,e),k=0,l=j[b+1],f=0;f<l.length;++f)k+=l[f];
for(var m=new Array(b),f=0;f<b;++f){for(var l=j[f],n=0,i=0;i<l.length;++i)n+=l[i];m[f]=n/k}return m}function f(a){if(0===a.length)return[];for(var b=a[0].length,c=g([b]),d=e(a),f=0;f<a.length;++f)for(var h=0;h<b;++h)c[h]+=a[f][h]*d[f];return c}var g=a("dup"),h=a("robust-linear-solve");f.barycenetric=e,b.exports=f},{dup:98,"robust-linear-solve":464}],75:[function(a,b,c){function d(a){for(var b=e(a),c=0,d=0;d<a.length;++d)for(var f=a[d],g=0;g<b.length;++g)c+=Math.pow(f[g]-b[g],2);return Math.sqrt(c/a.length)}b.exports=d;var e=a("circumcenter")},{circumcenter:74}],76:[function(a,b,c){"use strict";function d(a){var b=u(a),c=t(s(b),a);return c<0?[b,w(b,1/0)]:c>0?[w(b,-(1/0)),b]:[b,b]}function e(a,b){for(var c=new Array(b.length),d=0;d<b.length;++d){var e=b[d],f=a[e[0]],g=a[e[1]];c[d]=[Math.min(f[0],g[0]),Math.min(f[1],g[1]),Math.max(f[0],g[0]),Math.max(f[1],g[1])]}return c}function f(a){for(var b=new Array(a.length),c=0;c<a.length;++c){var d=a[c];b[c]=[d[0],d[1],d[0],d[1]]}return b}function g(a,b,c){var d=[];return q(c,function(c,e){var f=b[c],g=b[e];if(f[0]!==g[0]&&f[0]!==g[1]&&f[1]!==g[0]&&f[1]!==g[1]){var h=a[f[0]],i=a[f[1]],j=a[g[0]],k=a[g[1]];r(h,i,j,k)&&d.push([c,e])}}),d}function h(a,b,c,d){var e=[];return q(c,d,function(c,d){var f=b[c];if(f[0]!==d&&f[1]!==d){var g=a[d],h=a[f[0]],i=a[f[1]];r(h,i,g,g)&&e.push([c,d])}}),e}function i(a,b,c,d,e){function f(b){if(b>=a.length)return g[b-a.length];var c=a[b];return[s(c[0]),s(c[1])]}for(var g=[],h=0;h<c.length;++h){var i=c[h],j=i[0],k=i[1],l=b[j],m=b[k],n=x(v(a[l[0]]),v(a[l[1]]),v(a[m[0]]),v(a[m[1]]));if(n){var o=g.length+a.length;g.push(n),d.push([j,o],[k,o])}}d.sort(function(a,b){if(a[0]!==b[0])return a[0]-b[0];var c=f(a[1]),d=f(b[1]);return t(c[0],d[0])||t(c[1],d[1])});for(var h=d.length-1;h>=0;--h){var p=d[h],j=p[0],q=b[j],r=q[0],u=q[1],w=a[r],y=a[u];if((w[0]-y[0]||w[1]-y[1])<0){var z=r;r=u,u=z}q[0]=r;var A,B=q[1]=p[1];for(e&&(A=q[2]);h>0&&d[h-1][0]===j;){var p=d[--h],C=p[1];e?b.push([B,C,A]):b.push([B,C]),B=C}e?b.push([B,u,A]):b.push([B,u])}return g}function j(a,b,c){for(var e=a.length+b.length,f=new p(e),g=c,h=0;h<b.length;++h){var i=b[h],j=d(i[0]),k=d(i[1]);g.push([j[0],k[0],j[1],k[1]]),a.push([u(i[0]),u(i[1])])}q(g,function(a,b){f.link(a,b)});for(var l=0,m=!0,n=new Array(e),h=0;h<e;++h){var o=f.find(h);o===h?(n[h]=l,a[l++]=a[h]):(m=!1,n[h]=-1)}if(a.length=l,m)return null;for(var h=0;h<e;++h)n[h]<0&&(n[h]=n[f.find(h)]);return n}function k(a,b){return a[0]-b[0]||a[1]-b[1]}function l(a,b){var c=a[0]-b[0]||a[1]-b[1];return c?c:a[2]<b[2]?-1:a[2]>b[2]?1:0}function m(a,b,c){if(0!==a.length){if(b)for(var d=0;d<a.length;++d){var e=a[d],f=b[e[0]],g=b[e[1]];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}else for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}c?a.sort(l):a.sort(k);for(var h=1,d=1;d<a.length;++d){var i=a[d-1],j=a[d];(j[0]!==i[0]||j[1]!==i[1]||c&&j[2]!==i[2])&&(a[h++]=j)}a.length=h}}function n(a,b,c){var d=e(a,b),k=g(a,b,d),l=f(a),n=h(a,b,d,l),o=i(a,b,k,n,c),p=j(a,o,l);return m(b,p,c),!!p||k.length>0||n.length>0}function o(a,b,c){var d,e=!1;if(c){d=b;for(var f=new Array(b.length),g=0;g<b.length;++g){var h=b[g];f[g]=[h[0],h[1],c[g]]}b=f}for(;n(a,b,!!c);)e=!0;if(c&&e){d.length=0,c.length=0;for(var g=0;g<b.length;++g){var h=b[g];d.push([h[0],h[1]]),c.push(h[2])}}return e}b.exports=o;var p=a("union-find"),q=a("box-intersect"),r=(a("compare-cell"),a("robust-segment-intersect")),s=a("big-rat"),t=a("big-rat/cmp"),u=a("big-rat/to-float"),v=a("rat-vec"),w=a("nextafter"),x=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":77,"big-rat":40,"big-rat/cmp":38,"big-rat/to-float":52,"box-intersect":57,"compare-cell":82,nextafter:428,"rat-vec":453,"robust-segment-intersect":468,"union-find":497}],77:[function(a,b,c){"use strict";function d(a,b){return h(f(a[0],b[1]),f(a[1],b[0]))}function e(a,b,c,e){var f=j(b,a),h=j(e,c),m=d(f,h);if(0===i(m))return null;var n=j(a,c),o=d(h,n),p=g(o,m);return k(a,l(f,p))}b.exports=e;var f=a("big-rat/mul"),g=a("big-rat/div"),h=a("big-rat/sub"),i=a("big-rat/sign"),j=a("rat-vec/sub"),k=a("rat-vec/add"),l=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":39,"big-rat/mul":49,"big-rat/sign":50,"big-rat/sub":51,"big-rat/to-float":52,"rat-vec/add":452,"rat-vec/muls":454,"rat-vec/sub":455}],78:[function(a,b,c){(function(a){var c=function(){"use strict";function b(c,d,e,f){function h(c,e){if(null===c)return null;if(0==e)return c;var i,m;if("object"!=typeof c)return c;if(b.__isArray(c))i=[];else if(b.__isRegExp(c))i=new RegExp(c.source,g(c)),c.lastIndex&&(i.lastIndex=c.lastIndex);else if(b.__isDate(c))i=new Date(c.getTime());else{if(l&&a.isBuffer(c))return i=new a(c.length),c.copy(i),i;"undefined"==typeof f?(m=Object.getPrototypeOf(c),i=Object.create(m)):(i=Object.create(f),m=f)}if(d){var n=j.indexOf(c);if(n!=-1)return k[n];j.push(c),k.push(i)}for(var o in c){var p;m&&(p=Object.getOwnPropertyDescriptor(m,o)),p&&null==p.set||(i[o]=h(c[o],e-1))}return i}var i;"object"==typeof d&&(e=d.depth,f=d.prototype,i=d.filter,d=d.circular);var j=[],k=[],l="undefined"!=typeof a;return"undefined"==typeof d&&(d=!0),"undefined"==typeof e&&(e=1/0),h(c,e)}function c(a){return Object.prototype.toString.call(a)}function d(a){return"object"==typeof a&&"[object Date]"===c(a)}function e(a){return"object"==typeof a&&"[object Array]"===c(a)}function f(a){return"object"==typeof a&&"[object RegExp]"===c(a)}function g(a){var b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),b}return b.clonePrototype=function(a){if(null===a)return null;var b=function(){};return b.prototype=a,new b},b.__objToStr=c,b.__isDate=d,b.__isArray=e,b.__isRegExp=f,b.__getRegExpFlags=g,b}();"object"==typeof b&&b.exports&&(b.exports=c)}).call(this,a("buffer").Buffer)},{buffer:64}],79:[function(a,b,c){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],80:[function(a,b,c){"use strict";function d(a){var b,c,d,j,k,l,m,n,o,p,q,r,s,t=[],u=[],v=[],w=[];if(g.isPlainObject(a)||(a={}),o=a.nshades||72,n=a.format||"hex",m=a.colormap,m||(m="jet"),"string"==typeof m){if(m=m.toLowerCase(),!i[m])throw Error(m+" not a supported colorscale");l=h(i[m])}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);l=h(m)}if(l.length>o)throw new Error(m+" map requires nshades to be at least size "+l.length);for(q=Array.isArray(a.alpha)?2!==a.alpha.length?[1,1]:h(a.alpha):"number"==typeof a.alpha?[a.alpha,a.alpha]:[1,1],b=l.map(function(a){return Math.round(a.index*o)}),q[0]<0&&(q[0]=0),q[1]<0&&(q[0]=0),q[0]>1&&(q[0]=1),q[1]>1&&(q[0]=1),s=0;s<b.length;++s)r=l[s].index,c=l[s].rgb,4===c.length&&c[3]>=0&&c[3]<=1||(c[3]=q[0]+(q[1]-q[0])*r);for(s=0;s<b.length-1;++s)k=b[s+1]-b[s],d=l[s].rgb,j=l[s+1].rgb,t=t.concat(g.linspace(d[0],j[0],k)),u=u.concat(g.linspace(d[1],j[1],k)),v=v.concat(g.linspace(d[2],j[2],k)),w=w.concat(g.linspace(d[3],j[3],k));return t=t.map(Math.round),u=u.map(Math.round),v=v.map(Math.round),p=g.zip(t,u,v,w),"hex"===n&&(p=p.map(e)),"rgbaString"===n&&(p=p.map(f)),p}function e(a){for(var b,c="#",d=0;d<3;++d)b=a[d],b=b.toString(16),c+=("00"+b).substr(b.length);return c}function f(a){return"rgba("+a.join(",")+")"}var g=a("arraytools"),h=a("clone"),i=a("./colorScales");b.exports=d},{"./colorScales":79,arraytools:33,clone:78}],81:[function(a,b,c){"use strict";function d(a,b,c){var d=h(a[0],-b[0]),e=h(a[1],-b[1]),f=h(c[0],-b[0]),g=h(c[1],-b[1]),k=j(i(d,f),i(e,g));return k[k.length-1]>=0}function e(a,b,c,e){var h=f(b,c,e);if(0===h){var i=g(f(a,b,c)),j=g(f(a,b,e));if(i===j){if(0===i){var k=d(a,b,c),l=d(a,b,e);return k===l?0:k?1:-1}return 0}return 0===j?i>0?-1:d(a,b,e)?-1:1:0===i?j>0?1:d(a,b,c)?1:-1:g(j-i)}var m=f(a,b,c);if(m>0)return h>0&&f(a,b,e)>0?1:-1;if(m<0)return h>0||f(a,b,e)>0?1:-1;var n=f(a,b,e);return n>0?1:d(a,b,c)?1:-1}b.exports=e;var f=a("robust-orientation"),g=a("signum"),h=a("two-sum"),i=a("robust-product"),j=a("robust-sum")},{"robust-orientation":465,"robust-product":466,"robust-sum":470,signum:472,"two-sum":495}],82:[function(a,b,c){function d(a,b){return a-b}function e(a,b){var c=a.length,e=a.length-b.length;if(e)return e;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||f(a[0],a[1])-f(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(e=g+a[2]-(h+b[2]))return e;var i=f(a[0],a[1]),j=f(b[0],b[1]);return f(i,a[2])-f(j,b[2])||f(i+a[2],g)-f(j+b[2],h);case 4:var k=a[0],l=a[1],m=a[2],n=a[3],o=b[0],p=b[1],q=b[2],r=b[3];return k+l+m+n-(o+p+q+r)||f(k,l,m,n)-f(o,p,q,r,o)||f(k+l,k+m,k+n,l+m,l+n,m+n)-f(o+p,o+q,o+r,p+q,p+r,q+r)||f(k+l+m,k+l+n,k+m+n,l+m+n)-f(o+p+q,o+p+r,o+q+r,p+q+r);default:for(var s=a.slice().sort(d),t=b.slice().sort(d),u=0;u<c;++u)if(e=s[u]-t[u])return e;return 0}}b.exports=e;var f=Math.min},{}],83:[function(a,b,c){"use strict";function d(a,b){return e(a,b)||f(a)-f(b)}var e=a("compare-cell"),f=a("cell-orientation");b.exports=d},{"cell-orientation":73,"compare-cell":82}],84:[function(a,b,c){"use strict";function d(a){var b=a.length;if(0===b)return[];if(1===b)return[[0]];var c=a[0].length;return 0===c?[]:1===c?e(a):2===c?f(a):g(a,c)}var e=a("./lib/ch1d"),f=a("./lib/ch2d"),g=a("./lib/chnd");b.exports=d},{"./lib/ch1d":85,"./lib/ch2d":86,"./lib/chnd":87}],85:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0,d=1;d<a.length;++d)a[d][0]<a[b][0]&&(b=d),a[d][0]>a[c][0]&&(c=d);return b<c?[[b],[c]]:b>c?[[c],[b]]:[[b]]}b.exports=d},{}],86:[function(a,b,c){"use strict";function d(a){var b=e(a),c=b.length;if(c<=2)return[];for(var d=new Array(c),f=b[c-1],g=0;g<c;++g){var h=b[g];d[g]=[f,h],f=h}return d}b.exports=d;var e=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":412}],87:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),e=0;e<b.length;++e)d[e]=a[b[e]];for(var f=b.length,e=0;e<c;++e)b.indexOf(e)<0&&(d[f++]=a[e]);return d}function e(a,b){for(var c=a.length,d=b.length,e=0;e<c;++e)for(var f=a[e],g=0;g<f.length;++g){var h=f[g];if(h<d)f[g]=b[h];else{h-=d;for(var i=0;i<d;++i)h>=b[i]&&(h+=1);f[g]=h}}return a}function f(a,b){try{return g(a,!0)}catch(c){var f=h(a);if(f.length<=b)return[];var i=d(a,f),j=g(i,!0);return e(j,f)}}b.exports=f;var g=a("incremental-convex-hull"),h=a("affine-hull")},{"affine-hull":30,"incremental-convex-hull":254}],88:[function(a,b,c){b.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CPV:"verde",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bdr|\\bdr.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",COG:"^(?!.*\\bdem)(?!.*\\bdr)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CZE:"^(?=.*rep).*czech|czechia|bohemia",CSK:"czechoslovakia",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"ireland",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat).*\\bkorea|^(?=.*people).*\\bkorea|^(?=.*north).*\\bkorea|dprk",KOR:"^(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MKD:"macedonia|fyrom",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"micronesia",MDA:"moldov|b(a|e)ssarabia",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"\\bs\\w*.?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",TZA:"tanzania",THA:"thailand|\\bsiam",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",USA:"united.?states|\\bu\\.?s\\.?a\\.?\\b|\\bu\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],89:[function(a,b,c){function d(a){return a=Math.round(a),a<0?0:a>255?255:a}function e(a){return a<0?0:a>1?1:a}function f(a){return d("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function g(a){return e("%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))}function h(a,b,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}function i(a){var b=a.replace(/ /g,"").toLowerCase();if(b in j)return j[b].slice();if("#"===b[0]){if(4===b.length){var c=parseInt(b.substr(1),16);return c>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null}if(7===b.length){var c=parseInt(b.substr(1),16);return c>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null}return null}var e=b.indexOf("("),i=b.indexOf(")");if(e!==-1&&i+1===b.length){var k=b.substr(0,e),l=b.substr(e+1,i-(e+1)).split(","),m=1;switch(k){case"rgba":if(4!==l.length)return null;m=g(l.pop());case"rgb":return 3!==l.length?null:[f(l[0]),f(l[1]),f(l[2]),m];case"hsla":if(4!==l.length)return null;m=g(l.pop());case"hsl":if(3!==l.length)return null;var n=(parseFloat(l[0])%360+360)%360/360,o=g(l[1]),p=g(l[2]),q=p<=.5?p*(o+1):p+o-p*o,r=2*p-q;return[d(255*h(r,q,n+1/3)),d(255*h(r,q,n)),d(255*h(r,q,n-1/3)),m];default:return null}}return null}var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{c.parseCSSColor=i}catch(a){}},{}],90:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=6*e*e-6*e,h=3*e*e-4*e+1,i=-6*e*e+6*e,j=3*e*e-2*e;if(a.length){f||(f=new Array(a.length));for(var k=a.length-1;k>=0;--k)f[k]=g*a[k]+h*b[k]+i*c[k]+j*d[k];return f}return g*a+h*b+i*c[k]+j*d}function e(a,b,c,d,e,f){var g=e-1,h=e*e,i=g*g,j=(1+2*e)*i,k=e*i,l=h*(3-2*e),m=h*g;if(a.length){f||(f=new Array(a.length));for(var n=a.length-1;n>=0;--n)f[n]=j*a[n]+k*b[n]+l*c[n]+m*d[n];return f}return j*a+k*b+l*c+m*d}b.exports=e,b.exports.derivative=d},{}],91:[function(a,b,c){"use strict";function d(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function e(a){var b=new d;b.pre=a.pre,b.body=a.body,b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var e=0;e<c.length;++e){var g=c[e];if("array"===g||"object"==typeof g&&g.blockIndices){if(b.argTypes[e]="array",b.arrayArgs.push(e),b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0),b.shimArgs.push("array"+e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array args");
if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===g)b.scalarArgs.push(e),b.shimArgs.push("scalar"+e);else if("index"===g){if(b.indexArgs.push(e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array index");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array index");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===g){if(b.shapeArgs.push(e),e<b.pre.args.length&&b.pre.args[e].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array shape");if(e<b.post.args.length&&b.post.args[e].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof g||!g.offset)throw new Error("cwise: Unknown argument type "+c[e]);b.argTypes[e]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(e)}}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!a.printCode||!!a.debug,b.funcName=a.funcName||"cwise",b.blockSize=a.blockSize||64,f(b)}var f=a("./lib/thunk.js");b.exports=e},{"./lib/thunk.js":93}],92:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=a.length,g=b.arrayArgs.length,h=b.indexArgs.length>0,i=[],j=[],k=0,l=0;for(d=0;d<f;++d)j.push(["i",d,"=0"].join(""));for(e=0;e<g;++e)for(d=0;d<f;++d)l=k,k=a[d],0===d?j.push(["d",e,"s",d,"=t",e,"p",k].join("")):j.push(["d",e,"s",d,"=(t",e,"p",k,"-s",l,"*t",e,"p",l,")"].join(""));for(i.push("var "+j.join(",")),d=f-1;d>=0;--d)k=a[d],i.push(["for(i",d,"=0;i",d,"<s",k,";++i",d,"){"].join(""));for(i.push(c),d=0;d<f;++d){for(l=k,k=a[d],e=0;e<g;++e)i.push(["p",e,"+=d",e,"s",d].join(""));h&&(d>0&&i.push(["index[",l,"]-=s",l].join("")),i.push(["++index[",k,"]"].join(""))),i.push("}")}return i.join("\n")}function e(a,b,c,e){for(var f=b.length,g=c.arrayArgs.length,h=c.blockSize,i=c.indexArgs.length>0,j=[],k=0;k<g;++k)j.push(["var offset",k,"=p",k].join(""));for(var k=a;k<f;++k)j.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),j.push(["if(j",k,"<",h,"){"].join("")),j.push(["s",b[k],"=j",k].join("")),j.push(["j",k,"=0"].join("")),j.push(["}else{s",b[k],"=",h].join("")),j.push(["j",k,"-=",h,"}"].join("")),i&&j.push(["index[",b[k],"]=j",k].join(""));for(var k=0;k<g;++k){for(var l=["offset"+k],m=a;m<f;++m)l.push(["j",m,"*t",k,"p",b[m]].join(""));j.push(["p",k,"=(",l.join("+"),")"].join(""))}j.push(d(b,c,e));for(var k=a;k<f;++k)j.push("}");return j.join("\n")}function f(a){for(var b=0,c=a[0].length;b<c;){for(var d=1;d<a.length;++d)if(a[d][b]!==a[0][b])return b;++b}return b}function g(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(h.count<=0)){var i=new RegExp(h.name,"g"),j="",k=b.arrayArgs.indexOf(g);switch(b.argTypes[g]){case"offset":var l=b.offsetArgIndex.indexOf(g),m=b.offsetArgs[l];k=m.array,j="+q"+l;case"array":j="p"+k+j;var n="l"+g,o="a"+k;if(0===b.arrayBlockIndices[k])1===h.count?"generic"===c[k]?h.lvalue?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),f.push([o,".set(",j,",",n,")"].join(""))):d=d.replace(i,[o,".get(",j,")"].join("")):d=d.replace(i,[o,"[",j,"]"].join("")):"generic"===c[k]?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,".set(",j,",",n,")"].join(""))):(e.push(["var ",n,"=",o,"[",j,"]"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,"[",j,"]=",n].join("")));else{for(var p=[h.name],q=[j],r=0;r<Math.abs(b.arrayBlockIndices[k]);r++)p.push("\\s*\\[([^\\]]+)\\]"),q.push("$"+(r+1)+"*t"+k+"b"+r);if(i=new RegExp(p.join(""),"g"),j=q.join("+"),"generic"===c[k])throw new Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(i,[o,"[",j,"]"].join(""))}break;case"scalar":d=d.replace(i,"Y"+b.scalarArgs.indexOf(g));break;case"index":d=d.replace(i,"index");break;case"shape":d=d.replace(i,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function h(a){for(var b=new Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/);f=f?f[0]:"",0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f,d>0&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function i(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,i=new Array(a.arrayArgs.length),k=new Array(a.arrayArgs.length),l=0;l<a.arrayArgs.length;++l)k[l]=b[2*l],i[l]=b[2*l+1];for(var m=[],n=[],o=[],p=[],q=[],l=0;l<a.arrayArgs.length;++l){a.arrayBlockIndices[l]<0?(o.push(0),p.push(c),m.push(c),n.push(c+a.arrayBlockIndices[l])):(o.push(a.arrayBlockIndices[l]),p.push(a.arrayBlockIndices[l]+c),m.push(0),n.push(a.arrayBlockIndices[l]));for(var r=[],s=0;s<i[l].length;s++)o[l]<=i[l][s]&&i[l][s]<p[l]&&r.push(i[l][s]-o[l]);q.push(r)}for(var t=["SS"],u=["'use strict'"],v=[],s=0;s<c;++s)v.push(["s",s,"=SS[",s,"]"].join(""));for(var l=0;l<a.arrayArgs.length;++l){t.push("a"+l),t.push("t"+l),t.push("p"+l);for(var s=0;s<c;++s)v.push(["t",l,"p",s,"=t",l,"[",o[l]+s,"]"].join(""));for(var s=0;s<Math.abs(a.arrayBlockIndices[l]);++s)v.push(["t",l,"b",s,"=t",l,"[",m[l]+s,"]"].join(""))}for(var l=0;l<a.scalarArgs.length;++l)t.push("Y"+l);if(a.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),a.indexArgs.length>0){for(var w=new Array(c),l=0;l<c;++l)w[l]="0";v.push(["index=[",w.join(","),"]"].join(""))}for(var l=0;l<a.offsetArgs.length;++l){for(var x=a.offsetArgs[l],y=[],s=0;s<x.offset.length;++s)0!==x.offset[s]&&(1===x.offset[s]?y.push(["t",x.array,"p",s].join("")):y.push([x.offset[s],"*t",x.array,"p",s].join("")));0===y.length?v.push("q"+l+"=0"):v.push(["q",l,"=",y.join("+")].join(""))}var z=j([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));v=v.concat(z),u.push("var "+v.join(","));for(var l=0;l<a.arrayArgs.length;++l)u.push("p"+l+"|=0");a.pre.body.length>3&&u.push(g(a.pre,a,k));var A=g(a.body,a,k),B=f(q);B<c?u.push(e(B,q[0],a,A)):u.push(d(q[0],a,A)),a.post.body.length>3&&u.push(g(a.post,a,k)),a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+u.join("\n")+"\n----------");var C=[a.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,h(k)].join(""),D=new Function(["function ",C,"(",t.join(","),"){",u.join("\n"),"} return ",C].join(""));return D()}var j=a("uniq");b.exports=i},{uniq:498}],93:[function(a,b,c){"use strict";function d(a){var b=["'use strict'","var CACHED={}"],c=[],d=a.funcName+"_cwise_thunk";b.push(["return function ",d,"(",a.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],i=[],j=[],k=0;k<a.arrayArgs.length;++k){var l=a.arrayArgs[k];c.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),f.push("t"+l),f.push("r"+l),g.push("t"+l),g.push("r"+l+".join()"),h.push("array"+l+".data"),h.push("array"+l+".stride"),h.push("array"+l+".offset|0"),k>0&&(i.push("array"+a.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[k]))),j.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[k])+"]"))}a.arrayArgs.length>1&&(b.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),b.push("if (!("+j.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(var k=0;k<a.scalarArgs.length;++k)h.push("scalar"+a.scalarArgs[k]);c.push(["type=[",g.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),b.push("var "+c.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",f.join(","),"])}","return proc(",h.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");var m=new Function("compile",b.join("\n"));return m(e.bind(void 0,a))}var e=a("./compile.js");b.exports=d},{"./compile.js":92}],94:[function(a,b,c){b.exports=a("cwise-compiler")},{"cwise-compiler":91}],95:[function(a,b,c){!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function c(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function d(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function e(a){return null===a?NaN:+a}function f(a){return!isNaN(a)}function g(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function h(a){return a.length}function i(a){for(var b=1;a*b%1;)b*=10;return b}function j(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function k(){this._=Object.create(null)}function l(a){return(a+="")===ug||a[0]===vg?vg+a:a}function m(a){return(a+="")[0]===vg?a.slice(1):a}function n(a){return l(a)in this._}function o(a){return(a=l(a))in this._&&delete this._[a]}function p(){var a=[];for(var b in this._)a.push(m(b));return a}function q(){var a=0;for(var b in this._)++a;return a}function r(){for(var a in this._)return!1;return!0}function s(){this._=Object.create(null)}function t(a){return a}function u(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function v(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=wg.length;c<d;++c){var e=wg[c]+b;if(e in a)return e}}function w(){}function x(){}function y(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new k;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function z(){ig.event.preventDefault()}function A(){for(var a,b=ig.event;a=b.sourceEvent;)b=a;return b}function B(a){for(var b=new x,c=0,d=arguments.length;++c<d;)b[arguments[c]]=y(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=ig.event;e.target=a,ig.event=e,b[e.type].apply(c,d)}finally{ig.event=f}}},b}function C(a){return yg(a,Cg),a}function D(a){return"function"==typeof a?a:function(){return zg(a,this)}}function E(a){return"function"==typeof a?a:function(){return Ag(a,this)}}function F(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=ig.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function G(a){return a.trim().replace(/\s+/g," ")}function H(a){return new RegExp("(?:^|\\s+)"+ig.requote(a)+"(?:\\s+|$)","g")}function I(a){return(a+"").trim().split(/^|\s+/)}function J(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=I(a).map(K);var e=a.length;return"function"==typeof b?d:c}function K(a){var b=H(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",G(e+" "+a))):c.setAttribute("class",G(e.replace(b," ")))}}function L(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function M(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function N(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Dg&&b.documentElement.namespaceURI===Dg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=ig.ns.qualify(a)).local?c:b}function O(){var a=this.parentNode;a&&a.removeChild(this)}function P(a){return{__data__:a}}function Q(a){return function(){return Bg(this,a)}}function R(a){return arguments.length||(a=d),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function S(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function T(a){return yg(a,Fg),a}function U(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function V(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,kg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+ig.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=W;h>0&&(a=a.slice(0,h));var j=Gg.get(a);return j&&(a=j,i=X),h?b?e:d:b?w:f}function W(a,b){return function(c){var d=ig.event;ig.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{ig.event=d}}}function X(a,b){var c=W(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Y(b){var d=".dragsuppress-"+ ++Ig,e="click"+d,f=ig.select(c(b)).on("touchmove"+d,z).on("dragstart"+d,z).on("selectstart"+d,z);if(null==Hg&&(Hg=!("onselectstart"in b)&&v(b.style,"userSelect")),Hg){var g=a(b).style,h=g[Hg];g[Hg]="none"}return function(a){if(f.on(d,null),Hg&&(g[Hg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){z(),b()},!0),setTimeout(b,0)}}}function Z(a,b){b.changedTouches&&(b=b.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(Jg<0){var f=c(a);if(f.scrollX||f.scrollY){d=ig.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Jg=!(g.f||g.e),d.remove()}}return Jg?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[b.clientX-h.left-a.clientLeft,b.clientY-h.top-a.clientTop]}function $(){return ig.event.changedTouches[0].identifier}function _(a){return a>0?1:a<0?-1:0}function aa(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ba(a){return a>1?0:a<-1?Mg:Math.acos(a)}function ca(a){return a>1?Pg:a<-1?-Pg:Math.asin(a)}function da(a){return((a=Math.exp(a))-1/a)/2}function ea(a){return((a=Math.exp(a))+1/a)/2}function fa(a){return((a=Math.exp(2*a))-1)/(a+1)}function ga(a){return(a=Math.sin(a/2))*a}function ha(){}function ia(a,b,c){return this instanceof ia?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ia?new ia(a.h,a.s,a.l):wa(""+a,xa,ia):new ia(a,b,c)}function ja(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new sa(e(a+120),e(a),e(a-120))}function ka(a,b,c){return this instanceof ka?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ka?new ka(a.h,a.c,a.l):a instanceof ma?oa(a.l,a.a,a.b):oa((a=ya((a=ig.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ka(a,b,c)}function la(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ma(c,Math.cos(a*=Qg)*b,Math.sin(a)*b)}function ma(a,b,c){return this instanceof ma?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ma?new ma(a.l,a.a,a.b):a instanceof ka?la(a.h,a.c,a.l):ya((a=sa(a)).r,a.g,a.b):new ma(a,b,c)}function na(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=pa(e)*_g,d=pa(d)*ah,f=pa(f)*bh,new sa(ra(3.2404542*e-1.5371385*d-.4985314*f),ra(-.969266*e+1.8760108*d+.041556*f),ra(.0556434*e-.2040259*d+1.0572252*f))}function oa(a,b,c){return a>0?new ka(Math.atan2(c,b)*Rg,Math.sqrt(b*b+c*c),a):new ka(NaN,NaN,a)}function pa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function qa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ra(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function sa(a,b,c){return this instanceof sa?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof sa?new sa(a.r,a.g,a.b):wa(""+a,sa,ja):new sa(a,b,c)}function ta(a){return new sa(a>>16,a>>8&255,255&a)}function ua(a){return ta(a)+""}function va(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function wa(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Aa(e[0]),Aa(e[1]),Aa(e[2]))}return(f=eh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function xa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ia(d,e,i)}function ya(a,b,c){a=za(a),b=za(b),c=za(c);var d=qa((.4124564*a+.3575761*b+.1804375*c)/_g),e=qa((.2126729*a+.7151522*b+.072175*c)/ah),f=qa((.0193339*a+.119192*b+.9503041*c)/bh);return ma(116*e-16,500*(d-e),200*(e-f))}function za(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Aa(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ba(a){return"function"==typeof a?a:function(){return a}}function Ca(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Da(b,c,a,d)}}function Da(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fa(i)||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(a){return void g.error.call(f,a)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=ig.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=ig.event;ig.event=a;try{g.progress.call(f,i)}finally{ig.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(kg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},ig.rebind(f,g,"on"),null==d?f:f.get(Ea(d))}function Ea(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fa(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ga(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return gh?gh.n=f:fh=f,gh=f,hh||(ih=clearTimeout(ih),hh=1,jh(Ha)),f}function Ha(){var a=Ia(),b=Ja()-a;b>24?(isFinite(b)&&(clearTimeout(ih),ih=setTimeout(Ha,b)),hh=0):(hh=1,jh(Ha))}function Ia(){for(var a=Date.now(),b=fh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ja(){for(var a,b=fh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:fh=b.n;return gh=a,c}function Ka(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function La(a,b){var c=Math.pow(10,3*tg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ma(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:t;return function(a){var c=lh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=mh.get(n)||Na;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=ig.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Na(a){return a+""}function Oa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pa(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new oh(c-1)),1),c}function f(a,c){return b(a=new oh((+a)),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date((+g))),b(g,1);else for(;g<d;)h.push(new Date((+g))),b(g,1);return h}function h(a,b,c){try{oh=Oa;var d=new Oa;return d._=a,g(d,b,c)}finally{oh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Qa(a);return i.floor=i,i.round=Qa(d),i.ceil=Qa(e),i.offset=Qa(f),i.range=h,a}function Qa(a){return function(b,c){try{oh=Oa;var d=new Oa;return d._=b,a(d,c)._}finally{oh=Date}}}function Ra(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=qh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&oh!==Oa,g=new(f?Oa:oh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in qh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{oh=Oa;var b=new oh;return b._=a,d(b)}finally{oh=Date}}var d=b(a);return c.parse=function(a){try{oh=Oa;var b=d.parse(a);return b&&b._}finally{oh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=jb;var t=ig.map(),u=Ta(p),v=Ua(p),w=Ta(q),x=Ua(q),y=Ta(r),z=Ua(r),A=Ta(s),B=Ua(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Sa(a.getDate(),b,2)},e:function(a,b){return Sa(a.getDate(),b,2)},H:function(a,b){return Sa(a.getHours(),b,2)},I:function(a,b){return Sa(a.getHours()%12||12,b,2)},j:function(a,b){return Sa(1+nh.dayOfYear(a),b,3)},L:function(a,b){return Sa(a.getMilliseconds(),b,3)},m:function(a,b){return Sa(a.getMonth()+1,b,2)},M:function(a,b){return Sa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Sa(a.getSeconds(),b,2)},U:function(a,b){return Sa(nh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Sa(nh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Sa(a.getFullYear()%100,b,2)},Y:function(a,b){return Sa(a.getFullYear()%1e4,b,4)},Z:hb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:bb,e:bb,H:db,I:db,j:cb,L:gb,m:ab,M:eb,p:k,S:fb,U:Wa,w:Va,W:Xa,x:i,X:j,y:Za,Y:Ya,Z:$a,"%":ib};return b}function Sa(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Ta(a){return new RegExp("^(?:"+a.map(ig.requote).join("|")+")","i")}function Ua(a){for(var b=new k,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Va(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Wa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Xa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Ya(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Za(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.y=_a(+d[0]),c+d[0].length):-1}function $a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function _a(a){return a+(a>68?1900:2e3)}function ab(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function bb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function cb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function db(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function eb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function fb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function gb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function hb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=tg(b)/60|0,e=tg(b)%60;return c+Sa(d,"0",2)+Sa(e,"0",2)}function ib(a,b,c){sh.lastIndex=0;var d=sh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function jb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function kb(){}function lb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function mb(a,b){a&&wh.hasOwnProperty(a.type)&&wh[a.type](a,b)}function nb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ob(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)nb(a[c],b,1);b.polygonEnd()}function pb(){function a(a,b){a*=Qg,b=b*Qg/2+Mg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);yh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;zh.point=function(g,h){zh.point=a,d=(b=g)*Qg,e=Math.cos(h=(c=h)*Qg/2+Mg/4),f=Math.sin(h)},zh.lineEnd=function(){a(b,c)}}function qb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function sb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function tb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ub(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function vb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function wb(a){return[Math.atan2(a[1],a[0]),ca(a[2])]}function xb(a,b){return tg(a[0]-b[0])<Kg&&tg(a[1]-b[1])<Kg}function yb(a,b){a*=Qg;var c=Math.cos(b*=Qg);zb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function zb(a,b,c){++Ah,Ch+=(a-Ch)/Ah,Dh+=(b-Dh)/Ah,Eh+=(c-Eh)/Ah}function Ab(){function a(a,e){a*=Qg;var f=Math.cos(e*=Qg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Bh+=j,Fh+=j*(b+(b=g)),Gh+=j*(c+(c=h)),Hh+=j*(d+(d=i)),zb(b,c,d)}var b,c,d;Lh.point=function(e,f){e*=Qg;var g=Math.cos(f*=Qg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Lh.point=a,zb(b,c,d)}}function Bb(){Lh.point=yb}function Cb(){function a(a,b){a*=Qg;var c=Math.cos(b*=Qg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ba(n)/m,p=Math.atan2(m,n);Ih+=o*j,Jh+=o*k,Kh+=o*l,Bh+=p,Fh+=p*(d+(d=g)),Gh+=p*(e+(e=h)),Hh+=p*(f+(f=i)),zb(d,e,f)}var b,c,d,e,f;Lh.point=function(g,h){b=g,c=h,Lh.point=a,g*=Qg;var i=Math.cos(h*=Qg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),zb(d,e,f)},Lh.lineEnd=function(){a(b,c),Lh.lineEnd=Bb,Lh.point=yb}}function Db(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Eb(){return!0}function Fb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(xb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Hb(c,a,null,(!0)),j=new Hb(c,null,i,(!1));i.o=j,f.push(i),g.push(j),i=new Hb(d,a,null,(!1)),j=new Hb(d,null,i,(!0)),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Gb(f),Gb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Gb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Hb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Ib(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;
if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Jb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=ig.merge(n);var a=Pb(r,o);n.length?(v||(f.polygonStart(),v=!0),Fb(n,Lb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Kb(),u=b(t),v=!1;return s}}function Jb(a){return a.length>1}function Kb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:w,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Lb(a,b){return((a=a.x)[0]<0?a[1]-Pg-Kg:Pg-a[1])-((b=b.x)[0]<0?b[1]-Pg-Kg:Pg-b[1])}function Mb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Mg:-Mg,i=tg(f-c);tg(i-Mg)<Kg?(a.point(c,d=(d+g)/2>0?Pg:-Pg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Mg&&(tg(c-e)<Kg&&(c-=e*Kg),tg(f-h)<Kg&&(f-=h*Kg),d=Nb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Nb(a,b,c,d){var e,f,g=Math.sin(a-c);return tg(g)>Kg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ob(a,b,c,d){var e;if(null==a)e=c*Pg,d.point(-Mg,e),d.point(0,e),d.point(Mg,e),d.point(Mg,0),d.point(Mg,-e),d.point(0,-e),d.point(-Mg,-e),d.point(-Mg,0),d.point(-Mg,e);else if(tg(a[0]-b[0])>Kg){var f=a[0]<b[0]?Mg:-Mg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Pb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;yh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Mg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Mg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Mg,z=o*t;if(yh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ng:v,y^m>=c^r>=c){var A=sb(qb(l),qb(a));vb(A);var B=sb(e,A);vb(B);var C=(y^v>=0?-1:1)*ca(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Kg||f<Kg&&yh<-Kg)^1&g}function Qb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Mg:-Mg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(xb(c,n)||xb(o,n))&&(o[0]+=Kg,o[1]+=Kg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&xb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=qb(a),e=qb(b),g=[1,0,0],h=sb(d,e),i=rb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=sb(g,h),o=ub(g,l),p=ub(h,m);tb(o,p);var q=n,r=rb(o,q),s=rb(q,q),t=r*r-s*(rb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=ub(q,(-r-u)/s);if(tb(v,o),v=wb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];y<x&&(w=x,x=y,y=w);var B=y-x,C=tg(B-Mg)<Kg,D=C||B<Kg;if(!C&&A<z&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(tg(v[0]-x)<Kg?z:A):z<=v[1]&&v[1]<=A:B>Mg^(x<=v[0]&&v[0]<=y)){var E=ub(q,(-r+u)/s);return tb(E,o),[v,wb(E)]}}}function e(b,c){var d=g?a:Mg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=tg(f)>Kg,i=pc(a,6*Qg);return Ib(b,c,i,g?[0,-a]:[-Mg,a-Mg])}function Rb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Sb(a,b,c,d){function e(d,e){return tg(d[0]-a)<Kg?e>0?0:3:tg(d[0]-c)<Kg?e>0?2:1:tg(d[1]-b)<Kg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&aa(j,f,a)>0&&++b:f[1]<=d&&aa(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Nh,Math.min(Nh,a)),b=Math.max(-Nh,Math.min(Nh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Kb(),C=Rb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=ig.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Fb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Tb(a){var b=0,c=Mg/3,d=hc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Mg/180,c=a[1]*Mg/180):[b/Mg*180,c/Mg*180]},e}function Ub(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ca((f-(a*a+c*c)*e*e)/(2*e))]},c}function Vb(){function a(a,b){Ph+=e*a-d*b,d=a,e=b}var b,c,d,e;Uh.point=function(f,g){Uh.point=a,b=d=f,c=e=g},Uh.lineEnd=function(){a(b,c)}}function Wb(a,b){a<Qh&&(Qh=a),a>Sh&&(Sh=a),b<Rh&&(Rh=b),b>Th&&(Th=b)}function Xb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Yb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Yb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Yb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Zb(a,b){Ch+=a,Dh+=b,++Eh}function $b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Fh+=g*(b+a)/2,Gh+=g*(c+d)/2,Hh+=g,Zb(b=a,c=d)}var b,c;Wh.point=function(d,e){Wh.point=a,Zb(b=d,c=e)}}function _b(){Wh.point=Zb}function ac(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Fh+=g*(d+a)/2,Gh+=g*(e+b)/2,Hh+=g,g=e*a-d*b,Ih+=g*(d+a),Jh+=g*(e+b),Kh+=3*g,Zb(d=a,e=b)}var b,c,d,e;Wh.point=function(f,g){Wh.point=a,Zb(b=d=f,c=e=g)},Wh.lineEnd=function(){a(b,c)}}function bc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Ng)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:w};return h}function cc(a){function b(a){return(h?d:c)(a)}function c(b){return fc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=qb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=tg(tg(x)-1)<Kg||tg(d-m)<Kg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||tg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Qg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function dc(a){var b=cc(function(b,c){return a([b*Rg,c*Rg])});return function(a){return ic(b(a))}}function ec(a){this.stream=a}function fc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function gc(a){return hc(function(){return a})()}function hc(a){function b(a){return a=h(a[0]*Qg,a[1]*Qg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Rg,a[1]*Rg]}function d(){h=Db(g=lc(r,s,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=cc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,u=0,v=Mh,w=t,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=ic(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Mh):Qb((x=+a)*Qg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Sb(a[0][0],a[0][1],a[1][0],a[1][1]):t,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Qg,q=a[1]%360*Qg,d()):[p*Rg,q*Rg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Qg,s=a[1]%360*Qg,u=a.length>2?a[2]%360*Qg:0,d()):[r*Rg,s*Rg,u*Rg]},ig.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function ic(a){return fc(a,function(b,c){a.point(b*Qg,c*Qg)})}function jc(a,b){return[a,b]}function kc(a,b){return[a>Mg?a-Ng:a<-Mg?a+Ng:a,b]}function lc(a,b,c){return a?b||c?Db(nc(a),oc(b,c)):nc(a):b||c?oc(b,c):kc}function mc(a){return function(b,c){return b+=a,[b>Mg?b-Ng:b<-Mg?b+Ng:b,c]}}function nc(a){var b=mc(a);return b.invert=mc(-a),b}function oc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ca(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ca(k*d-h*e)]},c}function pc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=qc(c,e),f=qc(c,f),(g>0?e<f:e>f)&&(e+=g*Ng)):(e=a+g*Ng,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=wb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function qc(a,b){var c=qb(b);c[0]-=a,vb(c);var d=ba(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Kg)%(2*Math.PI)}function rc(a,b,c){var d=ig.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function sc(a,b,c){var d=ig.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function tc(a){return a.source}function uc(a){return a.target}function vc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ga(d-b)+e*g*ga(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Rg,Math.atan2(g,Math.sqrt(d*d+e*e))*Rg]}:function(){return[a*Rg,b*Rg]};return o.distance=m,o}function wc(){function a(a,e){var f=Math.sin(e*=Qg),g=Math.cos(e),h=tg((a*=Qg)-b),i=Math.cos(h);Xh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Yh.point=function(e,f){b=e*Qg,c=Math.sin(f*=Qg),d=Math.cos(f),Yh.point=a},Yh.lineEnd=function(){Yh.point=Yh.lineEnd=w}}function xc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function yc(a,b){function c(a,b){g>0?b<-Pg+Kg&&(b=-Pg+Kg):b>Pg-Kg&&(b=Pg-Kg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Mg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=_(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Pg]},c):Ac}function zc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return tg(e)<Kg?jc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-_(e)*Math.sqrt(a*a+c*c)]},c)}function Ac(a,b){return[a,Math.log(Math.tan(Mg/4+b/2))]}function Bc(a){var b,c=gc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Mg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Cc(a,b){return[Math.log(Math.tan(Mg/4+b/2)),-a]}function Dc(a){return a[0]}function Ec(a){return a[1]}function Fc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&aa(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Gc(a,b){return a[0]-b[0]||a[1]-b[1]}function Hc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ic(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Jc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Kc(){dd(this),this.edge=this.site=this.circle=null}function Lc(a){var b=ii.pop()||new Kc;return b.site=a,b}function Mc(a){Wc(a),fi.remove(a),ii.push(a),dd(a)}function Nc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Mc(a);for(var i=f;i.circle&&tg(c-i.circle.x)<Kg&&tg(d-i.circle.cy)<Kg;)f=i.P,h.unshift(i),Mc(i),i=f;h.unshift(i),Wc(i);for(var j=g;j.circle&&tg(c-j.circle.x)<Kg&&tg(d-j.circle.cy)<Kg;)g=j.N,h.push(j),Mc(j),j=g;h.push(j),Wc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],ad(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=$c(i.site,j.site,null,e),Vc(i),Vc(j)}function Oc(a){for(var b,c,d,e,f=a.x,g=a.y,h=fi._;h;)if(d=Pc(h,g)-f,d>Kg)h=h.L;else{if(e=f-Qc(h,g),!(e>Kg)){d>-Kg?(b=h.P,c=h):e>-Kg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Lc(a);if(fi.insert(b,i),b||c){if(b===c)return Wc(b),c=Lc(b.site),fi.insert(i,c),i.edge=c.edge=$c(b.site,i.site),Vc(b),void Vc(c);if(!c)return void(i.edge=$c(b.site,i.site));Wc(b),Wc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};ad(c.edge,j,o,u),i.edge=$c(j,a,null,u),c.edge=$c(a,o,null,u),Vc(b),Vc(c)}}function Pc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Qc(a,b){var c=a.N;if(c)return Pc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Rc(a){this.site=a,this.edges=[]}function Sc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ei,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(tg(d-b)>Kg||tg(e-c)>Kg)&&(h.splice(g,0,new bd(_c(f.site,k,tg(d-l)<Kg&&o-e>Kg?{x:l,y:tg(b-l)<Kg?c:o}:tg(e-o)<Kg&&m-d>Kg?{x:tg(c-o)<Kg?b:m,y:o}:tg(d-m)<Kg&&e-n>Kg?{x:m,y:tg(b-m)<Kg?c:n}:tg(e-n)<Kg&&d-l>Kg?{x:tg(c-n)<Kg?b:l,y:n}:null),f.site,null)),++i)}function Tc(a,b){return b.angle-a.angle}function Uc(){dd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Lg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ji.pop()||new Uc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=hi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}hi.insert(s,r),s||(gi=r)}}}}function Wc(a){var b=a.circle;b&&(b.P||(gi=b.N),hi.remove(b),ji.push(b),dd(b),a.circle=null)}function Xc(a){for(var b,c=di,d=Rb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Yc(b,a)||!d(b)||tg(b.a.x-b.b.x)<Kg&&tg(b.a.y-b.b.y)<Kg)&&(b.a=b.b=null,c.splice(e,1))}function Yc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Zc(a,b){this.l=a,this.r=b,this.a=this.b=null}function $c(a,b,c,d){var e=new Zc(a,b);return di.push(e),c&&ad(e,a,b,c),d&&ad(e,b,a,d),ei[a.i].edges.push(new bd(e,a,b)),ei[b.i].edges.push(new bd(e,b,a)),e}function _c(a,b,c){var d=new Zc(a,null);return d.a=b,d.b=c,di.push(d),d}function ad(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function bd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function cd(){this._=null}function dd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ed(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function fd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function gd(a){for(;a.L;)a=a.L;return a}function hd(a,b){var c,d,e,f=a.sort(id).pop();for(di=[],ei=new Array(a.length),fi=new cd,hi=new cd;;)if(e=gi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(ei[f.i]=new Rc(f),Oc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Nc(e.arc)}b&&(Xc(b),Sc(b));var g={cells:ei,edges:di};return fi=hi=di=ei=null,g}function id(a,b){return b.y-a.y||b.x-a.x}function jd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function kd(a){return a.x}function ld(a){return a.y}function md(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function nd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&nd(a,i[0],c,d,g,h),i[1]&&nd(a,i[1],g,d,e,h),i[2]&&nd(a,i[2],c,h,g,f),i[3]&&nd(a,i[3],g,h,e,f)}}function od(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function pd(a,b){a=ig.rgb(a),b=ig.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+va(Math.round(c+f*a))+va(Math.round(d+g*a))+va(Math.round(e+h*a))}}function qd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=td(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function rd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function sd(a,b){var c,d,e,f=li.lastIndex=mi.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=li.exec(a))&&(d=mi.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:rd(c,d)})),f=mi.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function td(a,b){for(var c,d=ig.interpolators.length;--d>=0&&!(c=ig.interpolators[d](a,b)););return c}function ud(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(td(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function vd(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function wd(a){return function(b){return 1-a(1-b)}}function xd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function yd(a){return a*a}function zd(a){return a*a*a}function Ad(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Bd(a){return function(b){return Math.pow(b,a)}}function Cd(a){return 1-Math.cos(a*Pg)}function Dd(a){return Math.pow(2,10*(a-1))}function Ed(a){return 1-Math.sqrt(1-a*a)}function Fd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ng*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ng/b)}}function Gd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Hd(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Id(a,b){a=ig.hcl(a),b=ig.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return la(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=ig.hsl(a),b=ig.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ja(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=ig.lab(a),b=ig.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return na(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Md(a){var b=[a.a,a.b],c=[a.c,a.d],d=Od(b),e=Nd(b,c),f=Od(Pd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Rg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Rg:0}function Nd(a,b){return a[0]*b[0]+a[1]*b[1]}function Od(a){var b=Math.sqrt(Nd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Pd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Qd(a){return a.length?a.pop()+",":""}function Rd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Sd(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Qd(c)+"rotate(",null,")")-2,x:rd(a,b)})):b&&c.push(Qd(c)+"rotate("+b+")")}function Td(a,b,c,d){a!==b?d.push({i:c.push(Qd(c)+"skewX(",null,")")-2,x:rd(a,b)}):b&&c.push(Qd(c)+"skewX("+b+")")}function Ud(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Qd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else 1===b[0]&&1===b[1]||c.push(Qd(c)+"scale("+b+")")}function Vd(a,b){var c=[],d=[];return a=ig.transform(a),b=ig.transform(b),Rd(a.translate,b.translate,c,d),Sd(a.rotate,b.rotate,c,d),Td(a.skew,b.skew,c,d),Ud(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Wd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Xd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Yd(a){for(var b=a.source,c=a.target,d=$d(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Zd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function $d(a,b){if(a===b)return a;for(var c=Zd(a),d=Zd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function _d(a){a.fixed|=2}function ae(a){a.fixed&=-7}function be(a){a.fixed|=4,a.px=a.x,a.py=a.y}function ce(a){a.fixed&=-5}function de(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(de(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function ee(a,b){return ig.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ke,a}function fe(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function ge(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function he(a){return a.children}function ie(a){return a.value}function je(a,b){return b.value-a.value}function ke(a){return ig.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function le(a){return a.x}function me(a){return a.y}function ne(a,b,c){a.y0=b,a.y=c}function oe(a){return ig.range(a.length)}function pe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function qe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function re(a){return a.reduce(se,0)}function se(a,b){return a+b[1]}function te(a,b){return ue(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ue(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ve(a){return[ig.min(a),ig.max(a)]}function we(a,b){return a.value-b.value}function xe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function ye(a,b){a._pack_next=b,b._pack_prev=a}function ze(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Ae(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Be),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Ee(d,e,f),b(f),xe(d,f),d._pack_prev=f,xe(f,e),e=d._pack_next,g=3;g<j;g++){Ee(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ze(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ze(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?ye(d,e=h):ye(d=i,e),g--):(xe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Ce)}}function Be(a){a._pack_next=a._pack_prev=a}function Ce(a){delete a._pack_next,delete a._pack_prev}function De(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)De(e[f],b,c,d)}function Ee(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Fe(a,b){return a.parent==b.parent?1:2}function Ge(a){var b=a.children;return b.length?b[0]:a.t}function He(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Ie(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Je(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ke(a,b,c){return a.a.parent===b.parent?a.a:c}function Le(a){return 1+ig.max(a,function(a){return a.y})}function Me(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ne(a){var b=a.children;return b&&b.length?Ne(b[0]):a}function Oe(a){var b,c=a.children;return c&&(b=c.length)?Oe(c[b-1]):a}function Pe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Qe(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Re(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Se(a){return a.rangeExtent?a.rangeExtent():Re(a.range())}function Te(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ue(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ve(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:xi}function We(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=ig.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Xe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?We:Te,i=d?Xd:Wd;return g=e(a,b,i,c),h=e(b,a,i,td),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ld)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return _e(a,b)},f.tickFormat=function(b,c){return af(a,b,c)},f.nice=function(b){return Ze(a,b),e()},f.copy=function(){return Xe(a,b,c,d)},e()}function Ye(a,b){return ig.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ze(a,b){return Ue(a,Ve($e(a,b)[2])),Ue(a,Ve($e(a,b)[2])),a}function $e(a,b){null==b&&(b=10);var c=Re(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function _e(a,b){return ig.range.apply(ig,$e(a,b))}function af(a,b,c){var d=$e(a,b);if(c){var e=lh.exec(c);if(e.shift(),"s"===e[8]){var f=ig.formatPrefix(Math.max(tg(d[0]),tg(d[1])));return e[7]||(e[7]="."+bf(f.scale(d[2]))),e[8]="f",c=ig.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+cf(e[8],d)),c=e.join("")}else c=",."+bf(d[2])+"f";return ig.format(c)}function bf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function cf(a,b){var c=bf(b[2]);return a in yi?Math.abs(c-bf(Math.max(tg(b[0]),tg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function df(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ue(d.map(e),c?Math:Ai);return a.domain(b),d=b.map(f),g},g.ticks=function(){
var a=Re(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return zi;arguments.length<2?c=zi:"function"!=typeof c&&(c=ig.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return g*b<b-.5&&(g*=b),g<=d?c(a):""}},g.copy=function(){return df(a.copy(),b,c,d)},Ye(g,a)}function ef(a,b,c){function d(b){return a(e(b))}var e=ff(b),f=ff(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return _e(c,a)},d.tickFormat=function(a,b){return af(c,a,b)},d.nice=function(a){return d.domain(Ze(c,a))},d.exponent=function(g){return arguments.length?(e=ff(b=g),f=ff(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return ef(a.copy(),b,c)},Ye(d,a)}function ff(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function gf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return ig.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new k;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Re(b.a[0])},c.copy=function(){return gf(a,b)},c.domain(a)}function hf(a,b){function c(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=ig.quantile(a,c/d);return g}function g(a){if(!isNaN(a=+a))return b[ig.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(e).filter(f).sort(d),c()):a},g.range=function(a){return arguments.length?(b=a,c()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return hf(a,b)},c()}function jf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return jf(a,b,c)},e()}function kf(a,b){function c(c){if(c<=c)return b[ig.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return kf(a,b)},c}function lf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return _e(a,b)},b.tickFormat=function(b,c){return af(a,b,c)},b.copy=function(){return lf(a)},b}function mf(){return 0}function nf(a){return a.innerRadius}function of(a){return a.outerRadius}function pf(a){return a.startAngle}function qf(a){return a.endAngle}function rf(a){return a&&a.padAngle}function sf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function tf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function uf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ba(c),o=Ba(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Dc,d=Ec,e=Eb,f=vf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Gi.get(a)||vf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function vf(a){return a.length>1?a.join("L"):a+"Z"}function wf(a){return a.join("L")+"Z"}function xf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function zf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Af(a,b){return a.length<4?vf(a):a[1]+Df(a.slice(1,-1),Ef(a,b))}function Bf(a,b){return a.length<3?wf(a):a[0]+Df((a.push(a[0]),a),Ef([a[a.length-2]].concat(a,[a[1]]),b))}function Cf(a,b){return a.length<3?vf(a):a[0]+Df(a,Ef(a,b))}function Df(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return vf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Ef(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Ff(a){if(a.length<3)return vf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Jf(Ji,g),",",Jf(Ji,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Kf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Gf(a){if(a.length<4)return vf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Jf(Ji,f)+","+Jf(Ji,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Kf(c,f,g);return c.join("")}function Hf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Jf(Ji,g),",",Jf(Ji,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Kf(b,g,h);return b.join("")}function If(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Ff(a)}function Jf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Kf(a,b,c){a.push("C",Jf(Hi,b),",",Jf(Hi,c),",",Jf(Ii,b),",",Jf(Ii,c),",",Jf(Ji,b),",",Jf(Ji,c))}function Lf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Mf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Lf(e,f);++b<c;)d[b]=(g+(g=Lf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Nf(a){for(var b,c,d,e,f=[],g=Mf(a),h=-1,i=a.length-1;++h<i;)b=Lf(a[h],a[h+1]),tg(b)<Kg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Of(a){return a.length<3?vf(a):a[0]+Df(a,Nf(a))}function Pf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Pg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Qf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ba(c),v=Ba(e),w=c===d?function(){return n}:Ba(d),x=e===f?function(){return o}:Ba(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Dc,d=Dc,e=0,f=Ec,g=Eb,h=vf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Gi.get(a)||vf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Rf(a){return a.radius}function Sf(a){return[a.x,a.y]}function Tf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Pg;return[c*Math.cos(d),c*Math.sin(d)]}}function Uf(){return 64}function Vf(){return"circle"}function Wf(a){var b=Math.sqrt(a/Mg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Xf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Yf(a,b,c){return yg(a,Qi),a.namespace=b,a.id=c,a}function Zf(a,b,c,d){var e=a.id,f=a.namespace;return S(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function $f(a){return null==a&&(a=""),function(){this.textContent=a}}function _f(a){return null==a?"__transition__":"__transition_"+a+"__"}function ag(a,b,c,d,e){function f(a){var b=p.delay;return j.t=b+i,b<=a?g(a-b):void(j.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(+g<d){var k=o[g];k.timer.c=null,k.timer.t=NaN,--o.count,delete o[g]}j.c=h,Ga(function(){return j.c&&h(c||1)&&(j.c=null,j.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,l=p.duration}function h(e){for(var f=e/l,g=m(f),h=n.length;h>0;)n[--h].call(a,g);if(f>=1)return p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1}var i,j,l,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,j=Ga(f,0,i),p=o[d]={tween:new k,time:i,timer:j,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function bg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function cg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function dg(a){return a.toISOString()}function eg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=ig.bisect(Zi,e);return f==Zi.length?[b.year,$e(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Zi[f-1]<Zi[f]/e?f-1:f]:[aj,$e(a,c)[2]]}return d.invert=function(b){return fg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(fg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,fg(+c+1),b).length}var f=d.domain(),g=Re(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ue(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=fg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=fg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Re(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],fg(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return eg(a.copy(),b,c)},Ye(d,a)}function fg(a){return new Date(a)}function gg(a){return JSON.parse(a.responseText)}function hg(a){var b=lg.createRange();return b.selectNode(lg.body),b.createContextualFragment(a.responseText)}var ig={version:"3.5.17"},jg=[].slice,kg=function(a){return jg.call(a)},lg=this.document;if(lg)try{kg(lg.documentElement.childNodes)[0].nodeType}catch(mg){kg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),lg)try{lg.createElement("DIV").style.setProperty("opacity",0,"")}catch(mg){var ng=this.Element.prototype,og=ng.setAttribute,pg=ng.setAttributeNS,qg=this.CSSStyleDeclaration.prototype,rg=qg.setProperty;ng.setAttribute=function(a,b){og.call(this,a,b+"")},ng.setAttributeNS=function(a,b,c){pg.call(this,a,b,c+"")},qg.setProperty=function(a,b,c){rg.call(this,a,b+"",c)}}ig.ascending=d,ig.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},ig.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},ig.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},ig.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},ig.sum=function(a,b){var c,d=0,e=a.length,g=-1;if(1===arguments.length)for(;++g<e;)f(c=+a[g])&&(d+=c);else for(;++g<e;)f(c=+b.call(a,a[g],g))&&(d+=c);return d},ig.mean=function(a,b){var c,d=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)f(c=e(a[h]))?d+=c:--i;else for(;++h<g;)f(c=e(b.call(a,a[h],h)))?d+=c:--i;if(i)return d/i},ig.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},ig.median=function(a,b){var c,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)f(c=e(a[i]))&&g.push(c);else for(;++i<h;)f(c=e(b.call(a,a[i],i)))&&g.push(c);if(g.length)return ig.quantile(g.sort(d),.5)},ig.variance=function(a,b){var c,d,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)f(c=e(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<g;)f(c=e(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));if(k>1)return i/(k-1)},ig.deviation=function(){var a=ig.variance.apply(this,arguments);return a?Math.sqrt(a):a};var sg=g(d);ig.bisectLeft=sg.left,ig.bisect=ig.bisectRight=sg.right,ig.bisector=function(a){return g(1===a.length?function(b,c){return d(a(b),c)}:a)},ig.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},ig.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},ig.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(d<0?0:d);c<d;)f[c]=[b=e,e=a[++c]];return f},ig.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=ig.min(a,h),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d},ig.zip=function(){return ig.transpose(arguments)},ig.keys=function(a){var b=[];for(var c in a)b.push(c);return b},ig.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},ig.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},ig.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var tg=Math.abs;ig.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=i(tg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},ig.map=function(a,b){var c=new k;if(a instanceof k)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var ug="__proto__",vg="\0";j(k,{has:n,get:function(a){return this._[l(a)]},set:function(a,b){return this._[l(a)]=b},remove:o,keys:p,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:m(b),value:this._[b]});return a},size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b),this._[b])}}),ig.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,l,m,n=-1,o=g.length,p=f[h++],q=new k;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),l=function(c,d){j.set(c,a(b,d,h))}):(j={},l=function(c,d){j[c]=a(b,d,h)}),q.forEach(l),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(ig.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},ig.set=function(a){var b=new s;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},j(s,{has:n,add:function(a){return this._[l(a+="")]=!0,a},remove:o,values:p,size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b))}}),ig.behavior={},ig.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=u(a,b,b[c]);return a};var wg=["webkit","ms","moz","Moz","o","O"];ig.dispatch=function(){for(var a=new x,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=y(a);return a},x.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},ig.event=null,ig.requote=function(a){return a.replace(xg,"\\$&")};var xg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,yg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},zg=function(a,b){return b.querySelector(a)},Ag=function(a,b){return b.querySelectorAll(a)},Bg=function(a,b){var c=a.matches||a[v(a,"matchesSelector")];return(Bg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(zg=function(a,b){return Sizzle(a,b)[0]||null},Ag=Sizzle,Bg=Sizzle.matchesSelector),ig.selection=function(){return ig.select(lg.documentElement)};var Cg=ig.selection.prototype=[];Cg.select=function(a){var b,c,d,e,f=[];a=D(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return C(f)},Cg.selectAll=function(a){var b,c,d=[];a=E(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=kg(a.call(c,c.__data__,h,e))),b.parentNode=c);return C(d)};var Dg="http://www.w3.org/1999/xhtml",Eg={svg:"http://www.w3.org/2000/svg",xhtml:Dg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ig.ns={prefix:Eg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Eg.hasOwnProperty(c)?{space:Eg[c],local:a}:a}},Cg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=ig.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},Cg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=I(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!H(a[e]).test(b))return!1;return!0}for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},Cg.style=function(a,b,d){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(b="");for(d in a)this.each(L(d,a[d],b));return this}if(e<2){var f=this.node();return c(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(L(a,b,d))},Cg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(M(b,a[b]));return this}return this.each(M(a,b))},Cg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Cg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Cg.append=function(a){return a=N(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Cg.insert=function(a,b){return a=N(a),b=D(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Cg.remove=function(){return this.each(O)},Cg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new k,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=P(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=P(f);for(;d<l;++d)o[d]=P(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=T([]),i=C([]),j=C([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},Cg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Cg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return C(e)},Cg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Cg.sort=function(a){a=R.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Cg.each=function(a){return S(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Cg.call=function(a){var b=kg(arguments);return a.apply(b[0]=this,b),this},Cg.empty=function(){return!this.node()},Cg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},Cg.size=function(){var a=0;return S(this,function(){++a}),a};var Fg=[];ig.selection.enter=T,ig.selection.enter.prototype=Fg,Fg.append=Cg.append,Fg.empty=Cg.empty,Fg.node=Cg.node,Fg.call=Cg.call,Fg.size=Cg.size,Fg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return C(g)},Fg.insert=function(a,b){return arguments.length<2&&(b=U(this)),Cg.insert.call(this,a,b)},ig.select=function(b){var c;return"string"==typeof b?(c=[zg(b,lg)],c.parentNode=lg.documentElement):(c=[b],c.parentNode=a(b)),C([c])},ig.selectAll=function(a){var b;return"string"==typeof a?(b=kg(Ag(a,lg)),b.parentNode=lg.documentElement):(b=kg(a),b.parentNode=null),C([b])},Cg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(V(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(V(a,b,c))};var Gg=ig.map({mouseenter:"mouseover",mouseleave:"mouseout"});lg&&Gg.forEach(function(a){"on"+a in lg&&Gg.remove(a)});var Hg,Ig=0;ig.mouse=function(a){return Z(a,A())};var Jg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ig.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=A().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return Z(a,d)},ig.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function b(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=ig.event.target.correspondingElement||ig.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=ig.select(c(l)).on(f+q,h).on(g+q,i),s=Y(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=B(a,"drag","dragstart","dragend"),e=null,f=b(w,ig.mouse,c,"mousemove","mouseup"),g=b($,ig.touch,t,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},ig.rebind(a,d,"on")},ig.touches=function(a,b){return arguments.length<2&&(b=A().touches),b?kg(b).map(function(b){var c=Z(a,b);return c.identifier=b.identifier,c}):[]};var Kg=1e-6,Lg=Kg*Kg,Mg=Math.PI,Ng=2*Mg,Og=Ng-Kg,Pg=Mg/2,Qg=Mg/180,Rg=180/Mg,Sg=Math.SQRT2,Tg=2,Ug=4;ig.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<Lg)d=Math.log(j/g)/Sg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Sg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Ug*m)/(2*g*Tg*n),p=(j*j-g*g-Ug*m)/(2*j*Tg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Sg,c=function(a){var b=a*d,c=ea(q),h=g/(Tg*n)*(c*fa(Sg*b+q)-da(q));return[e+h*k,f+h*l,g*c/ea(Sg*b+q)]}}return c.duration=1e3*d,c},ig.behavior.zoom=function(){function a(a){a.on(F,l).on(Wg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=ig.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(ig.mouse(e),m),j(g)}function d(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=ig.select(c(e)).on(G,a).on(H,d),m=b(ig.mouse(e)),n=Y(e);Pi.call(e),i(g)}function m(){function a(){var a=ig.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=ig.event.target;ig.select(b).on(u,d).on(v,h),w.push(b);for(var c=ig.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),z()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=ig.touches(o);Pi.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(ig.event.touches.length){for(var b=ig.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}ig.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+ig.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=ig.select(o),A=Y(o);c(),i(p),x.on(F,null).on(I,c)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Pi.call(this),p=b(q=r||ig.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),z(),e(Math.pow(2,.002*Vg())*y.k),f(q,p),j(a)}function o(){var a=ig.mouse(this),c=Math.log(y.k)/Math.LN2;g(this,a,b(a),ig.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},A=[960,500],C=Xg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=B(a,"zoomstart","zoom","zoomend");return Wg||(Wg="onwheel"in lg?(Vg=function(){return-ig.event.deltaY*(ig.event.deltaMode?120:1)},"wheel"):"onmousewheel"in lg?(Vg=function(){return ig.event.wheelDelta},"mousewheel"):(Vg=function(){return-ig.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Ni?ig.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=A[0],d=A[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=ig.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:null},e(+b),h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Xg:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(A=b&&[+b[0],+b[1]],a):A},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},ig.rebind(a,J,"on")};var Vg,Wg,Xg=[0,1/0];ig.color=ha,ha.prototype.toString=function(){return this.rgb()+""},ig.hsl=ia;var Yg=ia.prototype=new ha;Yg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,this.l/a)},Yg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,a*this.l)},Yg.rgb=function(){return ja(this.h,this.s,this.l)},ig.hcl=ka;var Zg=ka.prototype=new ha;Zg.brighter=function(a){return new ka(this.h,this.c,Math.min(100,this.l+$g*(arguments.length?a:1)))},Zg.darker=function(a){return new ka(this.h,this.c,Math.max(0,this.l-$g*(arguments.length?a:1)))},Zg.rgb=function(){return la(this.h,this.c,this.l).rgb()},ig.lab=ma;var $g=18,_g=.95047,ah=1,bh=1.08883,ch=ma.prototype=new ha;ch.brighter=function(a){return new ma(Math.min(100,this.l+$g*(arguments.length?a:1)),this.a,this.b)},ch.darker=function(a){return new ma(Math.max(0,this.l-$g*(arguments.length?a:1)),this.a,this.b)},ch.rgb=function(){return na(this.l,this.a,this.b);
},ig.rgb=sa;var dh=sa.prototype=new ha;dh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new sa(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new sa(e,e,e)},dh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(a*this.r,a*this.g,a*this.b)},dh.hsl=function(){return xa(this.r,this.g,this.b)},dh.toString=function(){return"#"+va(this.r)+va(this.g)+va(this.b)};var eh=ig.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eh.forEach(function(a,b){eh.set(a,ta(b))}),ig.functor=Ba,ig.xhr=Ca(t),ig.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Da(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new s,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},ig.csv=ig.dsv(",","text/csv"),ig.tsv=ig.dsv("\t","text/tab-separated-values");var fh,gh,hh,ih,jh=this[v(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};ig.timer=function(){Ga.apply(this,arguments)},ig.timer.flush=function(){Ia(),Ja()},ig.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var kh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(La);ig.formatPrefix=function(a,b){var c=0;return(a=+a)&&(a<0&&(a*=-1),b&&(a=ig.round(a,Ka(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),kh[8+c/3]};var lh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mh=ig.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=ig.round(a,Ka(a,b))).toFixed(Math.max(0,Math.min(20,Ka(a*(1+1e-15),b))))}}),nh=ig.time={},oh=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ph.setUTCDate.apply(this._,arguments)},setDay:function(){ph.setUTCDay.apply(this._,arguments)},setFullYear:function(){ph.setUTCFullYear.apply(this._,arguments)},setHours:function(){ph.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ph.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ph.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ph.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ph.setUTCSeconds.apply(this._,arguments)},setTime:function(){ph.setTime.apply(this._,arguments)}};var ph=Date.prototype;nh.year=Pa(function(a){return a=nh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),nh.years=nh.year.range,nh.years.utc=nh.year.utc.range,nh.day=Pa(function(a){var b=new oh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),nh.days=nh.day.range,nh.days.utc=nh.day.utc.range,nh.dayOfYear=function(a){var b=nh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=nh[a]=Pa(function(a){return(a=nh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});nh[a+"s"]=c.range,nh[a+"s"].utc=c.utc.range,nh[a+"OfYear"]=function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)}}),nh.week=nh.sunday,nh.weeks=nh.sunday.range,nh.weeks.utc=nh.sunday.utc.range,nh.weekOfYear=nh.sundayOfYear;var qh={"-":"",_:" ",0:"0"},rh=/^\s*\d+/,sh=/^%/;ig.locale=function(a){return{numberFormat:Ma(a),timeFormat:Ra(a)}};var th=ig.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ig.format=th.numberFormat,ig.geo={},kb.prototype={s:0,t:0,add:function(a){lb(a,this.t,uh),lb(uh.s,this.s,this),this.s?this.t+=uh.t:this.s=uh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uh=new kb;ig.geo.stream=function(a,b){a&&vh.hasOwnProperty(a.type)?vh[a.type](a,b):mb(a,b)};var vh={Feature:function(a,b){mb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)mb(c[d].geometry,b)}},wh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){nb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b,0)},Polygon:function(a,b){ob(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)mb(c[d],b)}};ig.geo.area=function(a){return xh=0,ig.geo.stream(a,zh),xh};var xh,yh=new kb,zh={sphere:function(){xh+=4*Mg},point:w,lineStart:w,lineEnd:w,polygonStart:function(){yh.reset(),zh.lineStart=pb},polygonEnd:function(){var a=2*yh;xh+=a<0?4*Mg+a:a,zh.lineStart=zh.lineEnd=zh.point=w}};ig.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=qb([b*Qg,c*Qg]);if(r){var e=sb(r,d),f=[e[1],-e[0],0],g=sb(f,e);vb(g),g=wb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Rg*j,q=tg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Rg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Rg;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=tg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;zh.point(a,c),b(a,c)}function f(){zh.lineStart()}function g(){e(p,q),zh.lineEnd(),tg(s)>Kg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,zh.polygonStart()},polygonEnd:function(){zh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,yh<0?(k=-(m=180),l=-(n=90)):s>Kg?n=90:s<-Kg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],ig.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),ig.geo.centroid=function(a){Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,ig.geo.stream(a,Lh);var b=Ih,c=Jh,d=Kh,e=b*b+c*c+d*d;return e<Lg&&(b=Fh,c=Gh,d=Hh,Bh<Kg&&(b=Ch,c=Dh,d=Eh),e=b*b+c*c+d*d,e<Lg)?[NaN,NaN]:[Math.atan2(c,b)*Rg,ca(d/Math.sqrt(e))*Rg]};var Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh={sphere:w,point:yb,lineStart:Ab,lineEnd:Bb,polygonStart:function(){Lh.lineStart=Cb},polygonEnd:function(){Lh.lineStart=Ab}},Mh=Ib(Eb,Mb,Ob,[-Mg,-Mg/2]),Nh=1e9;ig.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Sb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(ig.geo.conicEqualArea=function(){return Tb(Ub)}).raw=Ub,ig.geo.albers=function(){return ig.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ig.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=ig.geo.albers(),g=ig.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=ig.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Kg,l+.12*j+Kg],[k-.214*j-Kg,l+.234*j-Kg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Kg,l+.166*j+Kg],[k-.115*j-Kg,l+.234*j-Kg]]).stream(i).point,a},a.scale(1070)};var Oh,Ph,Qh,Rh,Sh,Th,Uh={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ph=0,Uh.lineStart=Vb},polygonEnd:function(){Uh.lineStart=Uh.lineEnd=Uh.point=w,Oh+=tg(Ph/2)}},Vh={point:Wb,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Wh={point:Zb,lineStart:$b,lineEnd:_b,polygonStart:function(){Wh.lineStart=ac},polygonEnd:function(){Wh.point=Zb,Wh.lineStart=$b,Wh.lineEnd=_b}};ig.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),ig.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Oh=0,ig.geo.stream(a,e(Uh)),Oh},a.centroid=function(a){return Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,ig.geo.stream(a,e(Wh)),Kh?[Ih/Kh,Jh/Kh]:Hh?[Fh/Hh,Gh/Hh]:Eh?[Ch/Eh,Dh/Eh]:[NaN,NaN]},a.bounds=function(a){return Sh=Th=-(Qh=Rh=1/0),ig.geo.stream(a,e(Vh)),[[Qh,Rh],[Sh,Th]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||dc(a):t,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Xb:new bc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(ig.geo.albersUsa()).context(null)},ig.geo.transform=function(a){return{stream:function(b){var c=new ec(b);for(var d in a)c[d]=a[d];return c}}},ec.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ig.geo.projection=gc,ig.geo.projectionMutator=hc,(ig.geo.equirectangular=function(){return gc(jc)}).raw=jc.invert=jc,ig.geo.rotation=function(a){function b(b){return b=a(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b}return a=lc(a[0]%360*Qg,a[1]*Qg,a.length>2?a[2]*Qg:0),b.invert=function(b){return b=a.invert(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b},b},kc.invert=jc,ig.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=lc(-a[0]*Qg,-a[1]*Qg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Rg,a[1]*=Rg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=pc((b=+d)*Qg,e*Qg),a):b},a.precision=function(d){return arguments.length?(c=pc(b*Qg,(e=+d)*Qg),a):e},a.angle(90)},ig.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Qg,e=a[1]*Qg,f=b[1]*Qg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},ig.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return ig.range(Math.ceil(f/q)*q,e,q).map(m).concat(ig.range(Math.ceil(j/r)*r,i,r).map(n)).concat(ig.range(Math.ceil(d/o)*o,c,o).filter(function(a){return tg(a%q)>Kg}).map(k)).concat(ig.range(Math.ceil(h/p)*p,g,p).filter(function(a){return tg(a%r)>Kg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=rc(h,g,90),l=sc(d,c,s),m=rc(j,i,90),n=sc(f,e,s),a):s},a.majorExtent([[-180,-90+Kg],[180,90-Kg]]).minorExtent([[-180,-80-Kg],[180,80+Kg]])},ig.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=tc,e=uc;return a.distance=function(){return ig.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},ig.geo.interpolate=function(a,b){return vc(a[0]*Qg,a[1]*Qg,b[0]*Qg,b[1]*Qg)},ig.geo.length=function(a){return Xh=0,ig.geo.stream(a,Yh),Xh};var Xh,Yh={sphere:w,point:w,lineStart:wc,lineEnd:w,polygonStart:w,polygonEnd:w},Zh=xc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(ig.geo.azimuthalEqualArea=function(){return gc(Zh)}).raw=Zh;var $h=xc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},t);(ig.geo.azimuthalEquidistant=function(){return gc($h)}).raw=$h,(ig.geo.conicConformal=function(){return Tb(yc)}).raw=yc,(ig.geo.conicEquidistant=function(){return Tb(zc)}).raw=zc;var _h=xc(function(a){return 1/a},Math.atan);(ig.geo.gnomonic=function(){return gc(_h)}).raw=_h,Ac.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Pg]},(ig.geo.mercator=function(){return Bc(Ac)}).raw=Ac;var ai=xc(function(){return 1},Math.asin);(ig.geo.orthographic=function(){return gc(ai)}).raw=ai;var bi=xc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(ig.geo.stereographic=function(){return gc(bi)}).raw=bi,Cc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Pg]},(ig.geo.transverseMercator=function(){var a=Bc(Cc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Cc,ig.geom={},ig.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ba(c),f=Ba(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Gc),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Fc(h),k=Fc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Dc,d=Ec;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},ig.geom.polygon=function(a){return yg(a,ci),a};var ci=ig.geom.polygon.prototype=[];ci.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ci.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ci.clip=function(a){for(var b,c,d,e,f,g,h=Jc(a),i=-1,j=this.length-Jc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Hc(g,k,e)?(Hc(f,k,e)||a.push(Ic(f,g,k,e)),a.push(g)):Hc(f,k,e)&&a.push(Ic(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var di,ei,fi,gi,hi,ii=[],ji=[];Rc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Tc),b.length},bd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},cd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=gd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?gd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,fd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ed(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ed(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,fd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},ig.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return hd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Kg)*Kg,y:Math.round(g(a,b)/Kg)*Kg,i:b}})}var d=Dc,e=Ec,f=d,g=e,h=ki;return a?b(a):(b.links=function(a){return hd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return hd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Tc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&jd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ba(d=a),b):d},b.y=function(a){return arguments.length?(g=Ba(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ki:a,b):h===ki?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ki?null:h&&h[1]},b)};var ki=[[-1e6,-1e6],[1e6,1e6]];ig.geom.delaunay=function(a){return ig.geom.voronoi().triangles(a)},ig.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(tg(i-c)+tg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=md()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ba(h),u=Ba(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=md();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){nd(a,z,p,q,r,s)},z.find=function(a){return od(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Dc,i=Ec;return(g=arguments.length)?(h=kd,i=ld,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},ig.interpolateRgb=pd,ig.interpolateObject=qd,ig.interpolateNumber=rd,ig.interpolateString=sd;var li=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mi=new RegExp(li.source,"g");ig.interpolate=td,ig.interpolators=[function(a,b){var c=typeof b;return("string"===c?eh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?pd:sd:b instanceof ha?pd:Array.isArray(b)?ud:"object"===c&&isNaN(b)?qd:rd)(a,b)}],ig.interpolateArray=ud;var ni=function(){return t},oi=ig.map({linear:ni,poly:Bd,quad:function(){return yd},cubic:function(){return zd},sin:function(){return Cd},exp:function(){return Dd},circle:function(){return Ed},elastic:Fd,back:Gd,bounce:function(){return Hd}}),pi=ig.map({"in":t,out:wd,"in-out":xd,"out-in":function(a){return xd(wd(a))}});ig.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=oi.get(c)||ni,d=pi.get(d)||t,vd(d(c.apply(null,jg.call(arguments,1))))},ig.interpolateHcl=Id,ig.interpolateHsl=Jd,ig.interpolateLab=Kd,ig.interpolateRound=Ld,ig.transform=function(a){var b=lg.createElementNS(ig.ns.prefix.svg,"g");return(ig.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Md(c?c.matrix:qi)})(a)},Md.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qi={a:1,b:0,c:0,d:1,e:0,f:0};ig.interpolateTransform=Vd,ig.layout={},ig.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Yd(a[c]));return b}},ig.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=ig.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(ig.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ng-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},ig.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/r<i){if(i<p){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<p){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=ig.event.x,a.py=ig.event.y,i.resume()}var c,d,e,f,g,h,i={},j=ig.dispatch("start","tick","end"),k=[1,1],l=.9,m=ri,n=si,o=-30,p=ti,q=.1,r=.64,s=[],u=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,t,v,w=s.length,x=u.length;for(d=0;d<x;++d)i=u[d],m=i.source,n=i.target,t=n.x-m.x,v=n.y-m.y,(p=t*t+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,t*=p,v*=p,n.x-=t*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=t*(r=1-r),m.y+=v*r);if((r=e*q)&&(t=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=s[d],i.x+=(t-i.x)*r,i.y+=(v-i.y)*r;if(o)for(de(b=ig.geom.quadtree(s),e,h),d=-1;++d<w;)(i=s[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=s[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(s=a,i):s},i.links=function(a){return arguments.length?(u=a,i):u},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Ga(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;i<e;++i)c[i]=[];for(i=0;i<j;++i){var f=u[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=s.length,j=u.length,l=k[0],p=k[1];for(b=0;b<e;++b)(d=s[b]).index=b,d.weight=0;for(b=0;b<j;++b)d=u[b],"number"==typeof d.source&&(d.source=s[d.source]),"number"==typeof d.target&&(d.target=s[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<e;++b)d=s[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;b<j;++b)f[b]=+m.call(this,u[b],b);else for(b=0;b<j;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<j;++b)g[b]=+n.call(this,u[b],b);else for(b=0;b<j;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;b<e;++b)h[b]=+o.call(this,s[b],b);else for(b=0;b<e;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=ig.behavior.drag().origin(t).on("dragstart.force",_d).on("drag.force",b).on("dragend.force",ae)),
arguments.length?void this.on("mouseover.force",be).on("mouseout.force",ce).call(d):d},ig.rebind(i,j,"on")};var ri=20,si=1,ti=1/0;ig.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return ge(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=je,c=he,d=ie;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(fe(b,function(a){a.children&&(a.value=0)}),ge(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},ig.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=ig.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},ee(c,d)},ig.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=ig.sum(j),p=o?(l-i*n)/o:0,q=ig.range(i),r=[];return null!=c&&q.sort(c===ui?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=ui,d=0,e=Ng,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var ui={};ig.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=ig.permute(j,l),k=ig.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=t,c=oe,d=pe,e=ne,f=le,g=me;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:vi.get(b)||oe,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:wi.get(b)||pe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var vi=ig.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(qe),f=a.map(re),g=ig.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return ig.range(a.length).reverse()},"default":oe}),wi=ig.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:pe});ig.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[ig.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ve,e=te;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ba(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ue(a,b)}:Ba(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},ig.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,ge(h,function(a){a.r=+k(a.value)}),ge(h,Ae),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;ge(h,function(a){a.r+=l}),ge(h,Ae),ge(h,function(a){a.r-=l})}return De(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=ig.layout.hierarchy().sort(we),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},ee(a,c)},ig.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(ge(m,c),m.parent.m=-m.z,fe(m,d),j)fe(l,f);else{var n=l,o=l,p=l;fe(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);fe(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Je(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=He(g),e=Ge(e),g&&e;)i=Ge(i),f=He(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Ie(Ke(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!He(f)&&(f.t=g,f.m+=l-k),e&&!Ge(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=ig.layout.hierarchy().sort(null).value(null),h=Fe,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},ee(a,g)},ig.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;ge(i,function(a){var b=a.children;b&&b.length?(a.x=Me(b),a.y=Le(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ne(i),l=Oe(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return ge(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=ig.layout.hierarchy().sort(null).value(null),c=Fe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},ee(a,b)},ig.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=ig.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Pe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Pe(b):Qe(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Qe(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Pe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},ee(f,h)},ig.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=ig.random.normal.apply(ig,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=ig.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},ig.scale={};var xi={floor:t,ceil:t};ig.scale.linear=function(){return Xe([0,1],[0,1],td,!1)};var yi={s:1,g:1,p:1,r:1,e:1};ig.scale.log=function(){return df(ig.scale.linear().domain([0,1]),10,!0,[1,10])};var zi=ig.format(".0e"),Ai={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};ig.scale.pow=function(){return ef(ig.scale.linear(),1,[0,1])},ig.scale.sqrt=function(){return ig.scale.pow().exponent(.5)},ig.scale.ordinal=function(){return gf([],{t:"range",a:[[]]})},ig.scale.category10=function(){return ig.scale.ordinal().range(Bi)},ig.scale.category20=function(){return ig.scale.ordinal().range(Ci)},ig.scale.category20b=function(){return ig.scale.ordinal().range(Di)},ig.scale.category20c=function(){return ig.scale.ordinal().range(Ei)};var Bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ua),Ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ua),Di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ua),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ua);ig.scale.quantile=function(){return hf([],[])},ig.scale.quantize=function(){return jf(0,1,[0,1])},ig.scale.threshold=function(){return kf([.5],[0,1])},ig.scale.identity=function(){return lf([0,1])},ig.svg={},ig.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Pg,l=h.apply(this,arguments)-Pg,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Og)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Fi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ca(q/j*Math.sin(r))),a&&(A=ca(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Mg?0:1;if(B&&sf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Mg?0:1;if(A&&sf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Kg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=o,I=o;if(m<Mg){var J=null==y?[w,x]:null==u?[s,t]:Ic([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=tf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=tf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^sf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=tf([s,t],[y,z],a,-I,n),T=tf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^sf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=nf,d=of,e=mf,f=Fi,g=pf,h=qf,i=rf;return a.innerRadius=function(b){return arguments.length?(c=Ba(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ba(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ba(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Fi?Fi:Ba(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ba(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ba(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Pg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Fi="auto";ig.svg.line=function(){return uf(t)};var Gi=ig.map({linear:vf,"linear-closed":wf,step:xf,"step-before":yf,"step-after":zf,basis:Ff,"basis-open":Gf,"basis-closed":Hf,bundle:If,cardinal:Cf,"cardinal-open":Af,"cardinal-closed":Bf,monotone:Of});Gi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Hi=[0,2/3,1/3,0],Ii=[0,1/3,2/3,0],Ji=[0,1/6,2/3,1/6];ig.svg.line.radial=function(){var a=uf(Pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},yf.reverse=zf,zf.reverse=yf,ig.svg.area=function(){return Qf(t)},ig.svg.area.radial=function(){var a=Qf(Pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},ig.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Pg,k=j.call(a,e,d)-Pg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Mg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=tc,g=uc,h=Rf,i=pf,j=qf;return a.radius=function(b){return arguments.length?(h=Ba(b),a):h},a.source=function(b){return arguments.length?(f=Ba(b),a):f},a.target=function(b){return arguments.length?(g=Ba(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ba(b),a):j},a},ig.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=tc,c=uc,d=Sf;return a.source=function(c){return arguments.length?(b=Ba(c),a):b},a.target=function(b){return arguments.length?(c=Ba(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},ig.svg.diagonal.radial=function(){var a=ig.svg.diagonal(),b=Sf,c=a.projection;return a.projection=function(a){return arguments.length?c(Tf(b=a)):b},a},ig.svg.symbol=function(){function a(a,d){return(Ki.get(b.call(this,a,d))||Wf)(c.call(this,a,d))}var b=Vf,c=Uf;return a.type=function(c){return arguments.length?(b=Ba(c),a):b},a.size=function(b){return arguments.length?(c=Ba(b),a):c},a};var Ki=ig.map({circle:Wf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Mi)),c=b*Mi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});ig.svg.symbolTypes=Ki.keys();var Li=Math.sqrt(3),Mi=Math.tan(30*Qg);Cg.transition=function(a){for(var b,c,d=Ni||++Ri,e=_f(a),f=[],g=Oi||{time:Date.now(),ease:Ad,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&ag(c,k,e,d,g),b.push(c)}return Yf(f,e,d)},Cg.interrupt=function(a){return this.each(null==a?Pi:Xf(_f(a)))};var Ni,Oi,Pi=Xf(_f()),Qi=[],Ri=0;Qi.call=Cg.call,Qi.empty=Cg.empty,Qi.node=Cg.node,Qi.size=Cg.size,ig.transition=function(a,b){return a&&a.transition?Ni?a.transition(b):a:ig.selection().transition(a)},ig.transition.prototype=Qi,Qi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=D(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),ag(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Yf(g,f,e)},Qi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=E(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&ag(e,o,h,g,f),b.push(e)}return Yf(i,h,g)},Qi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Yf(e,this.namespace,this.id)},Qi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):S(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Qi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Vd:td,h=ig.ns.qualify(a);return Zf(this,"attr."+a,b,h.local?f:e)},Qi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=ig.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Qi.style=function(a,b,d){function e(){this.style.removeProperty(a)}function f(b){return null==b?e:(b+="",function(){var e,f=c(this).getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=td(f,b),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return Zf(this,"style."+a,b,f)},Qi.styleTween=function(a,b,d){function e(e,f){var g=b.call(this,e,f,c(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Qi.text=function(a){return Zf(this,"text",a,$f)},Qi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Qi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=ig.ease.apply(ig,arguments)),S(this,function(d){d[c][b].ease=a}))},Qi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:S(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Qi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:S(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Qi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Oi,f=Ni;try{Ni=c,S(this,function(b,e,f){Oi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Oi=e,Ni=f}}else S(this,function(e){var f=e[d][c];(f.event||(f.event=ig.dispatch("start","end","interrupt"))).on(a,b)});return this},Qi.transition=function(){for(var a,b,c,d,e=this.id,f=++Ri,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],ag(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Yf(h,g,f)},ig.svg.axis=function(){function a(a){a.each(function(){var a,j=ig.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):t:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Kg),q=ig.transition(o.exit()).style("opacity",Kg).remove(),r=ig.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,u=Se(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),ig.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=bg,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=cg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=ig.scale.linear(),d=Si,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ti?b+"":Si,a):d},a.ticks=function(){return arguments.length?(h=kg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Si="bottom",Ti={top:1,right:1,bottom:1,left:1};ig.svg.brush=function(){function a(c){c.each(function(){var c=ig.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=c.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=c.selectAll(".resize").data(p,t);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ui[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=ig.transition(c),m=ig.transition(g);j&&(i=Se(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Se(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==ig.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),z())}function p(){32==ig.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,z())}function q(){var a=ig.mouse(v),c=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(ig.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(y),c=!0),C&&r(a,k,1)&&(e(y),c=!0),c&&(b(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Se(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),ig.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=ig.select(ig.event.target),x=i.of(v,arguments),y=ig.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=Y(v),F=ig.mouse(v),G=ig.select(c(v)).on("keydown.brush",f).on("keyup.brush",p);if(ig.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else ig.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),ig.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=B(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Vi[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Ni?ig.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=ud(l,b.x),d=ud(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Vi[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Vi[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},ig.rebind(a,i,"on")};var Ui={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wi=nh.format=th.timeFormat,Xi=Wi.utc,Yi=Xi("%Y-%m-%dT%H:%M:%S.%LZ");Wi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dg:Yi,dg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},dg.toString=Yi.toString,nh.second=Pa(function(a){return new oh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),nh.seconds=nh.second.range,nh.seconds.utc=nh.second.utc.range,nh.minute=Pa(function(a){return new oh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),nh.minutes=nh.minute.range,nh.minutes.utc=nh.minute.utc.range,nh.hour=Pa(function(a){var b=a.getTimezoneOffset()/60;return new oh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),nh.hours=nh.hour.range,nh.hours.utc=nh.hour.utc.range,nh.month=Pa(function(a){return a=nh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),nh.months=nh.month.range,nh.months.utc=nh.month.utc.range;var Zi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$i=[[nh.second,1],[nh.second,5],[nh.second,15],[nh.second,30],[nh.minute,1],[nh.minute,5],[nh.minute,15],[nh.minute,30],[nh.hour,1],[nh.hour,3],[nh.hour,6],[nh.hour,12],[nh.day,1],[nh.day,2],[nh.week,1],[nh.month,1],[nh.month,3],[nh.year,1]],_i=Wi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Eb]]),aj={range:function(a,b,c){return ig.range(Math.ceil(a/c)*c,+b,c).map(fg)},floor:t,ceil:t};$i.year=nh.year,nh.scale=function(){return eg(ig.scale.linear(),$i,_i)};var bj=$i.map(function(a){return[a[0].utc,a[1]]}),cj=Xi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Eb]]);bj.year=nh.year.utc,nh.scale.utc=function(){return eg(ig.scale.linear(),bj,cj)},ig.text=Ca(function(a){return a.responseText}),ig.json=function(a,b){return Da(a,"application/json",gg,b)},
ig.html=function(a,b){return Da(a,"text/html",hg,b)},ig.xml=Ca(function(a){return a.responseXML}),"function"==typeof mg&&mg.amd?(this.d3=ig,mg(ig)):"object"==typeof b&&b.exports?b.exports=ig:this.d3=ig}()},{}],96:[function(a,b,c){"use strict";function d(a,b){this.point=a,this.index=b}function e(a,b){for(var c=a.point,d=b.point,e=c.length,f=0;f<e;++f){var g=d[f]-c[f];if(g)return g}return 0}function f(a,b,c){if(1===a)return c?[[-1,0]]:[];var d=b.map(function(a,b){return[a[0],b]});d.sort(function(a,b){return a[0]-b[0]});for(var e=new Array(a-1),f=1;f<a;++f){var g=d[f-1],h=d[f];e[f-1]=[g[1],h[1]]}return c&&e.push([-1,e[0][1]],[e[a-1][1],-1]),e}function g(a,b){var c=a.length;if(0===c)return[];var g=a[0].length;if(g<1)return[];if(1===g)return f(c,a,b);for(var j=new Array(c),k=1,l=0;l<c;++l){for(var m=a[l],n=new Array(g+1),o=0,p=0;p<g;++p){var q=m[p];n[p]=q,o+=q*q}n[g]=o,j[l]=new d(n,l),k=Math.max(o,k)}i(j,e),c=j.length;for(var r=new Array(c+g+1),s=new Array(c+g+1),t=(g+1)*(g+1)*k,u=new Array(g+1),l=0;l<=g;++l)u[l]=0;u[g]=t,r[0]=u.slice(),s[0]=-1;for(var l=0;l<=g;++l){var n=u.slice();n[l]=1,r[l+1]=n,s[l+1]=-1}for(var l=0;l<c;++l){var v=j[l];r[l+g+1]=v.point,s[l+g+1]=v.index}var w=h(r,!1);if(w=b?w.filter(function(a){for(var b=0,c=0;c<=g;++c){var d=s[a[c]];if(d<0&&++b>=2)return!1;a[c]=d}return!0}):w.filter(function(a){for(var b=0;b<=g;++b){var c=s[a[b]];if(c<0)return!1;a[b]=c}return!0}),1&g)for(var l=0;l<w.length;++l){var v=w[l],n=v[0];v[0]=v[1],v[1]=n}return w}var h=a("incremental-convex-hull"),i=a("uniq");b.exports=g},{"incremental-convex-hull":254,uniq:498}],97:[function(a,b,c){(function(a){function c(a,b){return n[0]=a,n[1]=b,m[0]}function d(a){return m[0]=a,n[0]}function e(a){return m[0]=a,n[1]}function f(a,b){return n[1]=a,n[0]=b,m[0]}function g(a){return m[0]=a,n[1]}function h(a){return m[0]=a,n[0]}function i(a,b){return o.writeUInt32LE(a,0,!0),o.writeUInt32LE(b,4,!0),o.readDoubleLE(0,!0)}function j(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(0,!0)}function k(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(4,!0)}var l=!1;if("undefined"!=typeof Float64Array){var m=new Float64Array(1),n=new Uint32Array(m.buffer);m[0]=1,l=!0,1072693248===n[1]?(b.exports=function(a){return m[0]=a,[n[0],n[1]]},b.exports.pack=c,b.exports.lo=d,b.exports.hi=e):1072693248===n[0]?(b.exports=function(a){return m[0]=a,[n[1],n[0]]},b.exports.pack=f,b.exports.lo=g,b.exports.hi=h):l=!1}if(!l){var o=new a(8);b.exports=function(a){return o.writeDoubleLE(a,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},b.exports.pack=i,b.exports.lo=j,b.exports.hi=k}b.exports.sign=function(a){return b.exports.hi(a)>>>31},b.exports.exponent=function(a){var c=b.exports.hi(a);return(c<<1>>>21)-1023},b.exports.fraction=function(a){var c=b.exports.lo(a),d=b.exports.hi(a),e=1048575&d;return 2146435072&d&&(e+=1<<20),[c,e]},b.exports.denormalized=function(a){var c=b.exports.hi(a);return!(2146435072&c)}}).call(this,a("buffer").Buffer)},{buffer:64}],98:[function(a,b,c){"use strict";function d(a,b,c){var e=0|a[c];if(e<=0)return[];var f,g=new Array(e);if(c===a.length-1)for(f=0;f<e;++f)g[f]=b;else for(f=0;f<e;++f)g[f]=d(a,b,c+1);return g}function e(a,b){var c,d;for(c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function f(a,b){switch("undefined"==typeof b&&(b=0),typeof a){case"number":if(a>0)return e(0|a,b);break;case"object":if("number"==typeof a.length)return d(a,b,0)}return[]}b.exports=f},{}],99:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(h<=e&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(f<l?e:g,f,k,l,f<l?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(i<m||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i)),d=d.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],100:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if("number"!=typeof b){b=0;for(var d=0;d<c;++d){var f=a[d];b=Math.max(b,f[0],f[1])}b=(0|b)+1}b=0|b;for(var g=new Array(b),d=0;d<b;++d)g[d]=[];for(var d=0;d<c;++d){var f=a[d];g[f[0]].push(f[1]),g[f[1]].push(f[0])}for(var h=0;h<b;++h)e(g[h],function(a,b){return a-b});return g}b.exports=d;var e=a("uniq")},{uniq:498}],101:[function(b,c,d){(function(e,f){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ES6Promise=e()}(this,function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){X=a}function g(a){Y=a}function h(){return function(){return e.nextTick(m)}}function i(){return function(){W(m)}}function j(){var a=0,b=new _(m),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function k(){var a=new MessageChannel;return a.port1.onmessage=m,function(){return a.port2.postMessage(0)}}function l(){var a=setTimeout;return function(){return a(m,1)}}function m(){for(var a=0;a<V;a+=2){var b=ca[a],c=ca[a+1];b(c),ca[a]=void 0,ca[a+1]=void 0}V=0}function n(){try{var a=b,c=a("vertx");return W=c.runOnLoop||c.runOnContext,i()}catch(a){return l()}}function o(a,b){var c=arguments,d=this,e=new this.constructor(q);void 0===e[ea]&&J(e);var f=d._state;return f?!function(){var a=c[f-1];Y(function(){return G(f,e,a,d._result)})}():C(d,e,a,b),e}function p(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(q);return y(c,a),c}function q(){}function r(){return new TypeError("You cannot resolve a promise with itself")}function s(){return new TypeError("A promises callback cannot return that same promise.")}function t(a){try{return a.then}catch(a){return ia.error=a,ia}}function u(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function v(a,b,c){Y(function(a){var d=!1,e=u(c,b,function(c){d||(d=!0,b!==c?y(a,c):A(a,c))},function(b){d||(d=!0,B(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,B(a,e))},a)}function w(a,b){b._state===ga?A(a,b._result):b._state===ha?B(a,b._result):C(b,void 0,function(b){return y(a,b)},function(b){return B(a,b)})}function x(a,b,d){b.constructor===a.constructor&&d===o&&b.constructor.resolve===p?w(a,b):d===ia?B(a,ia.error):void 0===d?A(a,b):c(d)?v(a,b,d):A(a,b)}function y(b,c){b===c?B(b,r()):a(c)?x(b,c,t(c)):A(b,c)}function z(a){a._onerror&&a._onerror(a._result),D(a)}function A(a,b){a._state===fa&&(a._result=b,a._state=ga,0!==a._subscribers.length&&Y(D,a))}function B(a,b){a._state===fa&&(a._state=ha,a._result=b,Y(z,a))}function C(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ga]=c,e[f+ha]=d,0===f&&a._state&&Y(D,a)}function D(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?G(c,d,e,f):e(f);a._subscribers.length=0}}function E(){this.error=null}function F(a,b){try{return a(b)}catch(a){return ja.error=a,ja}}function G(a,b,d,e){var f=c(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if(g=F(d,e),g===ja?(j=!0,h=g.error,g=null):i=!0,b===g)return void B(b,s())}else g=e,i=!0;b._state!==fa||(f&&i?y(b,g):j?B(b,h):a===ga?A(b,g):a===ha&&B(b,g))}function H(a,b){try{b(function(b){y(a,b)},function(b){B(a,b)})}catch(b){B(a,b)}}function I(){return ka++}function J(a){a[ea]=ka++,a._state=void 0,a._result=void 0,a._subscribers=[]}function K(a,b){this._instanceConstructor=a,this.promise=new a(q),this.promise[ea]||J(this.promise),U(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):B(this.promise,L())}function L(){return new Error("Array Methods must be provided an Array")}function M(a){return new K(this,a).promise}function N(a){var b=this;return new b(U(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function O(a){var b=this,c=new b(q);return B(c,a),c}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(a){this[ea]=I(),this._result=this._state=void 0,this._subscribers=[],q!==a&&("function"!=typeof a&&P(),this instanceof R?H(this,a):Q())}function S(){var a=void 0;if("undefined"!=typeof f)a=f;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast)return}a.Promise=R}var T=void 0;T=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var U=T,V=0,W=void 0,X=void 0,Y=function(a,b){ca[V]=a,ca[V+1]=b,V+=2,2===V&&(X?X(m):da())},Z="undefined"!=typeof window?window:void 0,$=Z||{},_=$.MutationObserver||$.WebKitMutationObserver,aa="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ba="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ca=new Array(1e3),da=void 0;da=aa?h():_?j():ba?k():void 0===Z&&"function"==typeof b?n():l();var ea=Math.random().toString(36).substring(16),fa=void 0,ga=1,ha=2,ia=new E,ja=new E,ka=0;return K.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===fa&&c<a;c++)this._eachEntry(b[c],c)},K.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===p){var e=t(a);if(e===o&&a._state!==fa)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===R){var f=new c(q);x(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},K.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===fa&&(this._remaining--,a===ha?B(d,c):this._result[b]=c),0===this._remaining&&A(d,this._result)},K.prototype._willSettleAt=function(a,b){var c=this;C(a,void 0,function(a){return c._settledAt(ga,b,a)},function(a){return c._settledAt(ha,b,a)})},R.all=M,R.race=N,R.resolve=p,R.reject=O,R._setScheduler=d,R._setAsap=g,R._asap=Y,R.prototype={constructor:R,then:o,"catch":function(a){return this.then(null,a)}},S(),R.polyfill=S,R.Promise=R,R})}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:445}],102:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],103:[function(a,b,c){"use strict";function d(a,b,c){var d=b||0,e=c||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[d*a[12]+a[8],d*a[13]+a[9],d*a[14]+a[10],d*a[15]+a[11]],[e*a[12]-a[8],e*a[13]-a[9],e*a[14]-a[10],e*a[15]-a[11]]]}b.exports=d},{}],104:[function(a,b,c){"use strict";function d(a){for(var b,c=a.length,d=0;d<c;d++)if(b=a.charCodeAt(d),(b<9||b>13)&&32!==b&&133!==b&&160!==b&&5760!==b&&6158!==b&&(b<8192||b>8205)&&8232!==b&&8233!==b&&8239!==b&&8287!==b&&8288!==b&&12288!==b&&65279!==b)return!1;return!0}b.exports=function(a){var b=typeof a;if("string"===b){var c=a;if(a=+a,0===a&&d(c))return!1}else if("number"!==b)return!1;return a-a<1}},{}],105:[function(a,b,c){"use strict";function d(a){return new Function("f","var p = (f && f.properties || {}); return "+e(a))}function e(a){if(!a)return"true";var b=a[0];if(a.length<=1)return"any"===b?"false":"true";var c="=="===b?g(a[1],a[2],"===",!1):"!="===b?g(a[1],a[2],"!==",!1):"<"===b||">"===b||"<="===b||">="===b?g(a[1],a[2],b,!0):"any"===b?h(a.slice(1),"||"):"all"===b?h(a.slice(1),"&&"):"none"===b?k(h(a.slice(1),"||")):"in"===b?i(a[1],a.slice(2)):"!in"===b?k(i(a[1],a.slice(2))):"has"===b?j(a[1]):"!has"===b?k(j([a[1]])):"true";return"("+c+")"}function f(a){return"$type"===a?"f.type":"$id"===a?"f.id":"p["+JSON.stringify(a)+"]"}function g(a,b,c,d){var e=f(a),g="$type"===a?m.indexOf(b):JSON.stringify(b);return(d?"typeof "+e+"=== typeof "+g+"&&":"")+e+c+g}function h(a,b){return a.map(e).join(b)}function i(a,b){"$type"===a&&(b=b.map(function(a){return m.indexOf(a)}));var c=JSON.stringify(b.sort(l)),d=f(a);return b.length<=200?c+".indexOf("+d+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+d+", "+c+",0,"+(b.length-1)+")"}function j(a){return JSON.stringify(a)+" in p"}function k(a){return"!("+a+")"}function l(a,b){return a<b?-1:a>b?1:0}b.exports=d;var m=["Unknown","Point","LineString","Polygon"]},{}],106:[function(a,b,c){"use strict";function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a,b,c){this.dimension=a.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-(1/0),this.bounds[1][d]=1/0;this._state=a.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[c],this._scratch=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice()]}function f(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=0;return b}function g(a,b,c){switch(arguments.length){case 0:return new e([0],[0],0);case 1:if("number"==typeof a){var d=f(a);return new e(d,d,0)}return new e(a,f(a.length),0);case 2:if("number"==typeof b){var d=f(a.length);return new e(a,d,(+b))}c=0;case 3:if(a.length!==b.length)throw new Error("state and velocity lengths must match");return new e(a,b,c)}}b.exports=g;var h=a("cubic-hermite"),i=a("binary-search-bounds"),j=e.prototype;j.flush=function(a){var b=i.gt(this._time,a)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},j.curve=function(a){var b=this._time,c=b.length,e=i.le(b,a),f=this._scratch[0],g=this._state,j=this._velocity,k=this.dimension,l=this.bounds;if(e<0)for(var m=k-1,n=0;n<k;++n,--m)f[n]=g[m];else if(e>=c-1)for(var m=g.length-1,o=a-b[c-1],n=0;n<k;++n,--m)f[n]=g[m]+o*j[m];else{for(var m=k*(e+1)-1,p=b[e],q=b[e+1],r=q-p||1,s=this._scratch[1],t=this._scratch[2],u=this._scratch[3],v=this._scratch[4],w=!0,n=0;n<k;++n,--m)s[n]=g[m],u[n]=j[m]*r,t[n]=g[m+k],v[n]=j[m+k]*r,w=w&&s[n]===t[n]&&u[n]===v[n]&&0===u[n];if(w)for(var n=0;n<k;++n)f[n]=s[n];else h(s,u,t,v,(a-p)/r,f)}for(var x=l[0],y=l[1],n=0;n<k;++n)f[n]=d(x[n],y[n],f[n]);return f},j.dcurve=function(a){var b=this._time,c=b.length,d=i.le(b,a),e=this._scratch[0],f=this._state,g=this._velocity,j=this.dimension;if(d>=c-1)for(var k=f.length-1,l=(a-b[c-1],0);l<j;++l,--k)e[l]=g[k];else{for(var k=j*(d+1)-1,m=b[d],n=b[d+1],o=n-m||1,p=this._scratch[1],q=this._scratch[2],r=this._scratch[3],s=this._scratch[4],t=!0,l=0;l<j;++l,--k)p[l]=f[k],r[l]=g[k]*o,q[l]=f[k+j],s[l]=g[k+j]*o,t=t&&p[l]===q[l]&&r[l]===s[l]&&0===r[l];if(t)for(var l=0;l<j;++l)e[l]=0;else{h.derivative(p,r,q,s,(a-m)/o,e);for(var l=0;l<j;++l)e[l]/=o}}return e},j.lastT=function(){var a=this._time;return a[a.length-1]},j.stable=function(){for(var a=this._velocity,b=a.length,c=this.dimension-1;c>=0;--c)if(a[--b])return!1;return!0},j.jump=function(a){var b=this.lastT(),c=this.dimension;if(!(a<b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1];this._time.push(b,a);for(var k=0;k<2;++k)for(var l=0;l<c;++l)e.push(e[g++]),f.push(0);this._time.push(a);for(var l=c;l>0;--l)e.push(d(i[l-1],j[l-1],arguments[l])),f.push(0)}},j.push=function(a){var b=this.lastT(),c=this.dimension;if(!(a<b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=a-b,i=this.bounds,j=i[0],k=i[1],l=h>1e-6?1/h:0;this._time.push(a);for(var m=c;m>0;--m){var n=d(j[m-1],k[m-1],arguments[m]);e.push(n),f.push((n-e[g++])*l)}}},j.set=function(a){var b=this.dimension;if(!(a<this.lastT()||arguments.length!==b+1)){var c=this._state,e=this._velocity,f=this.bounds,g=f[0],h=f[1];this._time.push(a);for(var i=b;i>0;--i)c.push(d(g[i-1],h[i-1],arguments[i])),e.push(0)}},j.move=function(a){var b=this.lastT(),c=this.dimension;if(!(a<=b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1],k=a-b,l=k>1e-6?1/k:0;this._time.push(a);for(var m=c;m>0;--m){var n=arguments[m];e.push(d(i[m-1],j[m-1],e[g++]+n)),f.push(n*l)}}},j.idle=function(a){var b=this.lastT();if(!(a<b)){var c=this.dimension,e=this._state,f=this._velocity,g=e.length-c,h=this.bounds,i=h[0],j=h[1],k=a-b;this._time.push(a);for(var l=c-1;l>=0;--l)e.push(d(i[l],j[l],e[g]+k*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":53,"cubic-hermite":90}],107:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._color=a,this.key=b,this.value=c,this.left=d,this.right=e,this._count=f}function e(a){return new d(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,b){return new d(a,b.key,b.value,b.left,b.right,b._count)}function g(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function h(a,b){this._compare=a,this.root=b}function i(a,b){if(b.left){var c=i(a,b.left);if(c)return c}var c=a(b.key,b.value);return c?c:b.right?i(a,b.right):void 0}function j(a,b,c,d){var e=b(a,d.key);if(e<=0){if(d.left){var f=j(a,b,c,d.left);if(f)return f}var f=c(d.key,d.value);if(f)return f}if(d.right)return j(a,b,c,d.right)}function k(a,b,c,d,e){var f,g=c(a,e.key),h=c(b,e.key);if(g<=0){if(e.left&&(f=k(a,b,c,d,e.left)))return f;if(h>0&&(f=d(e.key,e.value)))return f}if(h>0&&e.right)return k(a,b,c,d,e.right)}function l(a,b){this.tree=a,this._stack=b}function m(a,b){a.key=b.key,a.value=b.value,a.left=b.left,a.right=b.right,a._color=b._color,a._count=b._count}function n(a){for(var b,c,d,h,i=a.length-1;i>=0;--i){if(b=a[i],0===i)return void(b._color=r);if(c=a[i-1],c.left===b){if(d=c.right,d.right&&d.right._color===q){if(d=c.right=e(d),h=d.right=e(d.right),c.right=d.left,d.left=c,d.right=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}return void(a[i-1]=d)}if(d.left&&d.left._color===q){if(d=c.right=e(d),h=d.left=e(d.left),c.right=h.left,d.left=h.right,h.left=c,h.right=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.left===c?j.left=h:j.right=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.right=f(q,d));c.right=f(q,d);continue}if(d=e(d),c.right=d.left,d.left=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}else{if(d=c.left,d.left&&d.left._color===q){if(d=c.left=e(d),h=d.left=e(d.left),c.left=d.right,d.right=c,d.left=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}return void(a[i-1]=d)}if(d.right&&d.right._color===q){if(d=c.left=e(d),h=d.right=e(d.right),c.left=h.right,d.right=h.left,h.right=c,h.left=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.right===c?j.right=h:j.left=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.left=f(q,d));c.left=f(q,d);continue}if(d=e(d),c.left=d.right,d.right=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}}}function o(a,b){return a<b?-1:a>b?1:0}function p(a){return new h(a||o,null)}b.exports=p;var q=0,r=1,s=h.prototype;Object.defineProperty(s,"keys",{get:function(){var a=[];return this.forEach(function(b,c){a.push(b)}),a}}),Object.defineProperty(s,"values",{get:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(a,b){for(var c=this._compare,e=this.root,i=[],j=[];e;){var k=c(a,e.key);i.push(e),j.push(k),e=k<=0?e.left:e.right}i.push(new d(q,a,b,null,null,1));for(var l=i.length-2;l>=0;--l){var e=i[l];j[l]<=0?i[l]=new d(e._color,e.key,e.value,i[l+1],e.right,e._count+1):i[l]=new d(e._color,e.key,e.value,e.left,i[l+1],e._count+1)}for(var l=i.length-1;l>1;--l){var m=i[l-1],e=i[l];if(m._color===r||e._color===r)break;var n=i[l-2];if(n.left===m)if(m.left===e){var o=n.right;if(!o||o._color!==q){if(n._color=q,n.left=m.right,m._color=r,m.right=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.left===n?p.left=m:p.right=m}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else{var o=n.right;if(!o||o._color!==q){if(m.right=e.left,n._color=q,n.left=e.right,e._color=r,e.left=m,e.right=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.left===n?p.left=e:p.right=e}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else if(m.right===e){var o=n.left;if(!o||o._color!==q){if(n._color=q,n.right=m.left,m._color=r,m.left=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.right===n?p.right=m:p.left=m}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}else{var o=n.left;if(!o||o._color!==q){if(m.left=e.right,n._color=q,n.right=e.left,e._color=r,e.right=m,e.left=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.right===n?p.right=e:p.left=e}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}}return i[0]._color=r,new h(c,i[0])},s.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return i(a,this.root);case 2:return j(b,this._compare,a,this.root);case 3:if(this._compare(b,c)>=0)return;return k(b,c,this._compare,a,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new l(this,a)}}),Object.defineProperty(s,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new l(this,a)}}),s.at=function(a){if(a<0)return new l(this,[]);for(var b=this.root,c=[];;){if(c.push(b),b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new l(this,c);if(a-=1,!b.right)break;if(a>=b.right._count)break;b=b.right}return new l(this,[])},s.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<=0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>=0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);if(d.push(c),0===e)return new l(this,d);c=e<=0?c.left:c.right}return new l(this,[])},s.remove=function(a){var b=this.find(a);return b?b.remove():this},s.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=d<=0?c.left:c.right}};var t=l.prototype;Object.defineProperty(t,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(t,"node",{
get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),t.clone=function(){return new l(this.tree,this._stack.slice())},t.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=new Array(a.length),c=a[a.length-1];b[b.length-1]=new d(c._color,c.key,c.value,c.left,c.right,c._count);for(var e=a.length-2;e>=0;--e){var c=a[e];c.left===a[e+1]?b[e]=new d(c._color,c.key,c.value,b[e+1],c.right,c._count):b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count)}if(c=b[b.length-1],c.left&&c.right){var f=b.length;for(c=c.left;c.right;)b.push(c),c=c.right;var g=b[f-1];b.push(new d(c._color,g.key,g.value,c.left,c.right,c._count)),b[f-1].key=c.key,b[f-1].value=c.value;for(var e=b.length-2;e>=f;--e)c=b[e],b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count);b[f-1].left=b[f]}if(c=b[b.length-1],c._color===q){var i=b[b.length-2];i.left===c?i.left=null:i.right===c&&(i.right=null),b.pop();for(var e=0;e<b.length;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(c.left||c.right){c.left?m(c,c.left):c.right&&m(c,c.right),c._color=r;for(var e=0;e<b.length-1;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(1===b.length)return new h(this.tree._compare,null);for(var e=0;e<b.length;++e)b[e]._count--;var j=b[b.length-2];return n(b),j.left===c?j.left=null:j.right=null,new h(this.tree._compare,b[0])},Object.defineProperty(t,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(t,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(t,"index",{get:function(){var a=0,b=this._stack;if(0===b.length){var c=this.tree.root;return c?c._count:0}b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;d>=0;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0}),t.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();a.length>0&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].left===a[b])return!0;return!1}}),t.update=function(a){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var c=new Array(b.length),e=b[b.length-1];c[c.length-1]=new d(e._color,e.key,a,e.left,e.right,e._count);for(var f=b.length-2;f>=0;--f)e=b[f],e.left===b[f+1]?c[f]=new d(e._color,e.key,e.value,c[f+1],e.right,e._count):c[f]=new d(e._color,e.key,e.value,e.left,c[f+1],e._count);return new h(this.tree._compare,c[0])},t.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();a.length>0&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],108:[function(a,b,c){function d(a){if(a<0)return Number("0/0");for(var b=h[0],c=h.length-1;c>0;--c)b+=h[c]/(a+c);var d=a+g+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(d)-d+Math.log(b)-Math.log(a)}var e=7,f=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],g=607/128,h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];b.exports=function i(a){if(a<.5)return Math.PI/(Math.sin(Math.PI*a)*i(1-a));if(a>100)return Math.exp(d(a));a-=1;for(var b=f[0],c=1;c<e+2;c++)b+=f[c]/(a+c);var g=a+e+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*b},b.exports.log=d},{}],109:[function(a,b,c){function d(a){if("Polygon"===a.type)return e(a.coordinates);if("MultiPolygon"===a.type){for(var b=0,c=0;c<a.coordinates.length;c++)b+=e(a.coordinates[c]);return b}return null}function e(a){var b=0;if(a&&a.length>0){b+=Math.abs(f(a[0]));for(var c=1;c<a.length;c++)b-=Math.abs(f(a[c]))}return b}function f(a){var b=0;if(a.length>2){for(var c,d,e=0;e<a.length-1;e++)c=a[e],d=a[e+1],b+=g(d[0]-c[0])*(2+Math.sin(g(c[1]))+Math.sin(g(d[1])));b=b*h.RADIUS*h.RADIUS/2}return b}function g(a){return a*Math.PI/180}var h=a("wgs84");b.exports.geometry=d,b.exports.ring=f},{wgs84:520}],110:[function(a,b,c){function d(a,b){switch(a&&a.type||null){case"FeatureCollection":return a.features=a.features.map(e(d,b)),a;case"Feature":return a.geometry=d(a.geometry,b),a;case"Polygon":case"MultiPolygon":return f(a,b);default:return a}}function e(a,b){return function(c){return a(c,b)}}function f(a,b){return"Polygon"===a.type?a.coordinates=g(a.coordinates,b):"MultiPolygon"===a.type&&(a.coordinates=a.coordinates.map(e(g,b))),a}function g(a,b){b=!!b,a[0]=h(a[0],!b);for(var c=1;c<a.length;c++)a[c]=h(a[c],b);return a}function h(a,b){return i(a)===b?a:a.reverse()}function i(a){return j.ring(a)>=0}var j=a("geojson-area");b.exports=d},{"geojson-area":109}],111:[function(a,b,c){"use strict";function d(a,b,c,d,g,i,j,k){if(c/=b,d/=b,j>=c&&k<=d)return a;if(j>d||k<c)return null;for(var l=[],m=0;m<a.length;m++){var n,o,p=a[m],q=p.geometry,r=p.type;if(n=p.min[g],o=p.max[g],n>=c&&o<=d)l.push(p);else if(!(n>d||o<c)){var s=1===r?e(q,c,d,g):f(q,c,d,g,i,3===r);s.length&&l.push(h(p.tags,r,s,p.id))}}return l.length?l:null}function e(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g[d];h>=b&&h<=c&&e.push(g)}return e}function f(a,b,c,d,e,f){for(var h=[],i=0;i<a.length;i++){var j,k,l,m=0,n=0,o=null,p=a[i],q=p.area,r=p.dist,s=p.outer,t=p.length,u=[];for(k=0;k<t-1;k++)j=o||p[k],o=p[k+1],m=n||j[d],n=o[d],m<b?n>c?(u.push(e(j,o,b),e(j,o,c)),f||(u=g(h,u,q,r,s))):n>=b&&u.push(e(j,o,b)):m>c?n<b?(u.push(e(j,o,c),e(j,o,b)),f||(u=g(h,u,q,r,s))):n<=c&&u.push(e(j,o,c)):(u.push(j),n<b?(u.push(e(j,o,b)),f||(u=g(h,u,q,r,s))):n>c&&(u.push(e(j,o,c)),f||(u=g(h,u,q,r,s))));j=p[t-1],m=j[d],m>=b&&m<=c&&u.push(j),l=u[u.length-1],f&&l&&(u[0][0]!==l[0]||u[0][1]!==l[1])&&u.push(u[0]),g(h,u,q,r,s)}return h}function g(a,b,c,d,e){return b.length&&(b.area=c,b.dist=d,void 0!==e&&(b.outer=e),a.push(b)),[]}b.exports=d;var h=a("./feature")},{"./feature":113}],112:[function(a,b,c){"use strict";function d(a,b){var c=[];if("FeatureCollection"===a.type)for(var d=0;d<a.features.length;d++)e(c,a.features[d],b);else"Feature"===a.type?e(c,a,b):e(c,{geometry:a},b);return c}function e(a,b,c){if(null!==b.geometry){var d,h,i,k,l=b.geometry,m=l.type,n=l.coordinates,o=b.properties,p=b.id;if("Point"===m)a.push(j(o,1,[g(n)],p));else if("MultiPoint"===m)a.push(j(o,1,f(n),p));else if("LineString"===m)a.push(j(o,2,[f(n,c)],p));else if("MultiLineString"===m||"Polygon"===m){for(i=[],d=0;d<n.length;d++)k=f(n[d],c),"Polygon"===m&&(k.outer=0===d),i.push(k);a.push(j(o,"Polygon"===m?3:2,i,p))}else if("MultiPolygon"===m){for(i=[],d=0;d<n.length;d++)for(h=0;h<n[d].length;h++)k=f(n[d][h],c),k.outer=0===h,i.push(k);a.push(j(o,3,i,p))}else{if("GeometryCollection"!==m)throw new Error("Input data is not a valid GeoJSON object.");for(d=0;d<l.geometries.length;d++)e(a,{geometry:l.geometries[d],properties:o},c)}}}function f(a,b){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));return b&&(i(c,b),h(c)),c}function g(a){var b=Math.sin(a[1]*Math.PI/180),c=a[0]/360+.5,d=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return d=d<0?0:d>1?1:d,[c,d,0]}function h(a){for(var b,c,d=0,e=0,f=0;f<a.length-1;f++)b=c||a[f],c=a[f+1],d+=b[0]*c[1]-c[0]*b[1],e+=Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1]);a.area=Math.abs(d/2),a.dist=e}b.exports=d;var i=a("./simplify"),j=a("./feature")},{"./feature":113,"./simplify":115}],113:[function(a,b,c){"use strict";function d(a,b,c,d){var f={id:d||null,type:b,geometry:c,tags:a||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return e(f),f}function e(a){var b=a.geometry,c=a.min,d=a.max;if(1===a.type)f(c,d,b);else for(var e=0;e<b.length;e++)f(c,d,b[e]);return a}function f(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[0]=Math.min(d[0],a[0]),b[0]=Math.max(d[0],b[0]),a[1]=Math.min(d[1],a[1]),b[1]=Math.max(d[1],b[1])}b.exports=d},{}],114:[function(a,b,c){"use strict";function d(a,b){return new e(a,b)}function e(a,b){b=this.options=i(Object.create(this.options),b);var c=b.debug;c&&console.time("preprocess data");var d=1<<b.maxZoom,e=k(a,b.tolerance/(d*b.extent));this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=n(e,b.buffer/b.extent,g),e.length&&this.splitTile(e,0,0,0),c&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function f(a,b,c){return 32*((1<<a)*c+b)+a}function g(a,b,c){return[c,(c-a[0])*(b[1]-a[1])/(b[0]-a[0])+a[1],1]}function h(a,b,c){return[(c-a[1])*(b[0]-a[0])/(b[1]-a[1])+a[0],c,1]}function i(a,b){for(var c in b)a[c]=b[c];return a}function j(a,b,c){var d=a.source;if(1!==d.length)return!1;var e=d[0];if(3!==e.type||e.geometry.length>1)return!1;var f=e.geometry[0].length;if(5!==f)return!1;for(var g=0;g<f;g++){var h=l.point(e.geometry[0][g],b,a.z2,a.x,a.y);if(h[0]!==-c&&h[0]!==b+c||h[1]!==-c&&h[1]!==b+c)return!1}return!0}b.exports=d;var k=a("./convert"),l=a("./transform"),m=a("./clip"),n=a("./wrap"),o=a("./tile");e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},e.prototype.splitTile=function(a,b,c,d,e,i,k){for(var l=[a,b,c,d],n=this.options,p=n.debug,q=null;l.length;){d=l.pop(),c=l.pop(),b=l.pop(),a=l.pop();var r=1<<b,s=f(b,c,d),t=this.tiles[s],u=b===n.maxZoom?0:n.tolerance/(r*n.extent);if(!t&&(p>1&&console.time("creation"),t=this.tiles[s]=o(a,r,c,d,u,b===n.maxZoom),this.tileCoords.push({z:b,x:c,y:d}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,t.numFeatures,t.numPoints,t.numSimplified),console.timeEnd("creation"));var v="z"+b;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(t.source=a,e){if(b===n.maxZoom||b===e)continue;var w=1<<e-b;if(c!==Math.floor(i/w)||d!==Math.floor(k/w))continue}else if(b===n.indexMaxZoom||t.numPoints<=n.indexMaxPoints)continue;if(n.solidChildren||!j(t,n.extent,n.buffer)){t.source=null,p>1&&console.time("clipping");var x,y,z,A,B,C,D=.5*n.buffer/n.extent,E=.5-D,F=.5+D,G=1+D;x=y=z=A=null,B=m(a,r,c-D,c+F,0,g,t.min[0],t.max[0]),C=m(a,r,c+E,c+G,0,g,t.min[0],t.max[0]),B&&(x=m(B,r,d-D,d+F,1,h,t.min[1],t.max[1]),y=m(B,r,d+E,d+G,1,h,t.min[1],t.max[1])),C&&(z=m(C,r,d-D,d+F,1,h,t.min[1],t.max[1]),A=m(C,r,d+E,d+G,1,h,t.min[1],t.max[1])),p>1&&console.timeEnd("clipping"),a.length&&(l.push(x||[],b+1,2*c,2*d),l.push(y||[],b+1,2*c,2*d+1),l.push(z||[],b+1,2*c+1,2*d),l.push(A||[],b+1,2*c+1,2*d+1))}else e&&(q=b)}return q},e.prototype.getTile=function(a,b,c){var d=this.options,e=d.extent,g=d.debug,h=1<<a;b=(b%h+h)%h;var i=f(a,b,c);if(this.tiles[i])return l.tile(this.tiles[i],e);g>1&&console.log("drilling down to z%d-%d-%d",a,b,c);for(var k,m=a,n=b,o=c;!k&&m>0;)m--,n=Math.floor(n/2),o=Math.floor(o/2),k=this.tiles[f(m,n,o)];if(!k||!k.source)return null;if(g>1&&console.log("found parent tile z%d-%d-%d",m,n,o),j(k,e,d.buffer))return l.tile(k,e);g>1&&console.time("drilling down");var p=this.splitTile(k.source,m,n,o,a,b,c);if(g>1&&console.timeEnd("drilling down"),null!==p){var q=1<<a-p;i=f(p,Math.floor(b/q),Math.floor(c/q))}return this.tiles[i]?l.tile(this.tiles[i],e):null}},{"./clip":111,"./convert":112,"./tile":116,"./transform":117,"./wrap":118}],115:[function(a,b,c){"use strict";function d(a,b){var c,d,f,g,h=b*b,i=a.length,j=0,k=i-1,l=[];for(a[j][2]=1,a[k][2]=1;k;){for(d=0,c=j+1;c<k;c++)f=e(a[c],a[j],a[k]),f>d&&(g=c,d=f);d>h?(a[g][2]=d,l.push(j),l.push(g),j=g):(k=l.pop(),j=l.pop())}}function e(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=a[1],j=f-d,k=g-e;if(0!==j||0!==k){var l=((h-d)*j+(i-e)*k)/(j*j+k*k);l>1?(d=f,e=g):l>0&&(d+=j*l,e+=k*l)}return j=h-d,k=i-e,j*j+k*k}b.exports=d},{}],116:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z2:b,transformed:!1,min:[2,1],max:[-1,0]},i=0;i<a.length;i++){h.numFeatures++,e(h,a[i],f,g);var j=a[i].min,k=a[i].max;j[0]<h.min[0]&&(h.min[0]=j[0]),j[1]<h.min[1]&&(h.min[1]=j[1]),k[0]>h.max[0]&&(h.max[0]=k[0]),k[1]>h.max[1]&&(h.max[1]=k[1])}return h}function e(a,b,c,d){var e,g,h,i,j=b.geometry,k=b.type,l=[],m=c*c;if(1===k)for(e=0;e<j.length;e++)l.push(j[e]),a.numPoints++,a.numSimplified++;else for(e=0;e<j.length;e++)if(h=j[e],d||!(2===k&&h.dist<c||3===k&&h.area<m)){var n=[];for(g=0;g<h.length;g++)i=h[g],(d||i[2]>m)&&(n.push(i),a.numSimplified++),a.numPoints++;3===k&&f(n,h.outer),l.push(n)}else a.numPoints+=h.length;if(l.length){var o={geometry:l,type:k,tags:b.tags||null};null!==b.id&&(o.id=b.id),a.features.push(o)}}function f(a,b){var c=g(a);c<0===b&&a.reverse()}function g(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c[0]-b[0])*(b[1]+c[1]);return d}b.exports=d},{}],117:[function(a,b,c){"use strict";function d(a,b){if(a.transformed)return a;var c,d,f,g=a.z2,h=a.x,i=a.y;for(c=0;c<a.features.length;c++){var j=a.features[c],k=j.geometry,l=j.type;if(1===l)for(d=0;d<k.length;d++)k[d]=e(k[d],b,g,h,i);else for(d=0;d<k.length;d++){var m=k[d];for(f=0;f<m.length;f++)m[f]=e(m[f],b,g,h,i)}}return a.transformed=!0,a}function e(a,b,c,d,e){var f=Math.round(b*(a[0]*c-d)),g=Math.round(b*(a[1]*c-e));return[f,g]}c.tile=d,c.point=e},{}],118:[function(a,b,c){"use strict";function d(a,b,c){var d=a,f=g(a,1,-1-b,b,0,c,-1,2),h=g(a,1,1-b,2+b,0,c,-1,2);return(f||h)&&(d=g(a,1,-b,1+b,0,c,-1,2)||[],f&&(d=e(f,1).concat(d)),h&&(d=d.concat(e(h,-1)))),d}function e(a,b){for(var c=[],d=0;d<a.length;d++){var e,g=a[d],i=g.type;if(1===i)e=f(g.geometry,b);else{e=[];for(var j=0;j<g.geometry.length;j++)e.push(f(g.geometry[j],b))}c.push(h(g.tags,i,e,g.id))}return c}function f(a,b){var c=[];c.area=a.area,c.dist=a.dist;for(var d=0;d<a.length;d++)c.push([a[d][0]+b,a[d][1],a[d][2]]);return c}var g=a("./clip"),h=a("./feature");b.exports=d},{"./clip":111,"./feature":113}],119:[function(a,b,c){function d(a,b){if("string"!=typeof a)throw new TypeError("must specify type string");if(b=b||{},"undefined"==typeof document&&!b.canvas)return null;var c=b.canvas||document.createElement("canvas");"number"==typeof b.width&&(c.width=b.width),"number"==typeof b.height&&(c.height=b.height);var d,e=b;try{var f=[a];0===a.indexOf("webgl")&&f.push("experimental-"+a);for(var g=0;g<f.length;g++)if(d=c.getContext(f[g],e))return d}catch(a){d=null}return d||null}b.exports=d},{}],120:[function(a,b,c){"use strict";function d(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function e(a){this.gl=a,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=k(a)}function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function g(a,b,c,d,e){for(var f=a.primalOffset,g=a.primalMinor,h=a.mirrorOffset,i=a.mirrorMinor,j=d[b],k=0;k<3;++k)if(b!==k){var l=f,m=h,n=g,o=i;j&1<<k&&(l=h,m=f,n=i,o=g),l[k]=c[0][k],m[k]=c[1][k],e[k]>0?(n[k]=-1,o[k]=0):(n[k]=0,o[k]=1)}}function h(a,b){var c=new e(a);return c.update(b),c}b.exports=h;var i=a("./lib/text.js"),j=a("./lib/lines.js"),k=a("./lib/background.js"),l=a("./lib/cube.js"),m=a("./lib/ticks.js"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=e.prototype;o.update=function(a){function b(b,c,d){if(d in a){var e,f=a[d],g=this[d];(b?Array.isArray(f)&&Array.isArray(f[0]):Array.isArray(f))?this[d]=e=[c(f[0]),c(f[1]),c(f[2])]:this[d]=e=[c(f),c(f),c(f)];for(var h=0;h<3;++h)if(e[h]!==g[h])return!0}return!1}a=a||{};var c,d=b.bind(this,!1,Number),e=b.bind(this,!1,Boolean),f=b.bind(this,!1,String),g=b.bind(this,!0,function(a){if(Array.isArray(a)){if(3===a.length)return[+a[0],+a[1],+a[2],1];if(4===a.length)return[+a[0],+a[1],+a[2],+a[3]]}return[0,0,0,1]}),h=!1,k=!1;if("bounds"in a)for(var l=a.bounds,n=0;n<2;++n)for(var o=0;o<3;++o)l[n][o]!==this.bounds[n][o]&&(k=!0),this.bounds[n][o]=l[n][o];if("ticks"in a){c=a.ticks,h=!0,this.autoTicks=!1;for(var n=0;n<3;++n)this.tickSpacing[n]=0}else d("tickSpacing")&&(this.autoTicks=!0,k=!0);if(this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),k=!0,h=!0,this._firstInit=!1),k&&this.autoTicks&&(c=m.create(this.bounds,this.tickSpacing),h=!0),h){for(var n=0;n<3;++n)c[n].sort(function(a,b){return a.x-b.x});m.equal(c,this.ticks)?h=!1:this.ticks=c}e("tickEnable"),f("tickFont")&&(h=!0),d("tickSize"),d("tickAngle"),d("tickPad"),g("tickColor");var p=f("labels");f("labelFont")&&(p=!0),e("labelEnable"),d("labelSize"),d("labelPad"),g("labelColor"),e("lineEnable"),e("lineMirror"),d("lineWidth"),g("lineColor"),e("lineTickEnable"),e("lineTickMirror"),d("lineTickLength"),d("lineTickWidth"),g("lineTickColor"),e("gridEnable"),d("gridWidth"),g("gridColor"),e("zeroEnable"),g("zeroLineColor"),d("zeroLineWidth"),e("backgroundEnable"),g("backgroundColor"),this._text?this._text&&(p||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=j(this.gl,this.bounds,this.ticks))};var p=[new f,new f,new f],q=[0,0,0],r={model:n,view:n,projection:n};o.isOpaque=function(){return!0},o.isTransparent=function(){return!1},o.drawTransparent=function(a){};var s=[0,0,0],t=[0,0,0],u=[0,0,0];o.draw=function(a){a=a||r;for(var b=this.gl,c=a.model||n,e=a.view||n,f=a.projection||n,h=this.bounds,i=l(c,e,f,h),j=i.cubeEdges,k=i.axis,m=e[12],o=e[13],v=e[14],w=e[15],x=this.pixelRatio*(f[3]*m+f[7]*o+f[11]*v+f[15]*w)/b.drawingBufferHeight,y=0;y<3;++y)this.lastCubeProps.cubeEdges[y]=j[y],this.lastCubeProps.axis[y]=k[y];for(var z=p,y=0;y<3;++y)g(p[y],y,this.bounds,j,k);for(var b=this.gl,A=q,y=0;y<3;++y)this.backgroundEnable[y]?A[y]=k[y]:A[y]=0;this._background.draw(c,e,f,h,A,this.backgroundColor),this._lines.bind(c,e,f,this);for(var y=0;y<3;++y){var B=[0,0,0];k[y]>0?B[y]=h[1][y]:B[y]=h[0][y];for(var C=0;C<2;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.gridEnable[D]&&this._lines.drawGrid(D,E,this.bounds,B,this.gridColor[D],this.gridWidth[D]*this.pixelRatio)}for(var C=0;C<2;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.zeroEnable[E]&&h[0][E]<=0&&h[1][E]>=0&&this._lines.drawZero(D,E,this.bounds,B,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}}for(var y=0;y<3;++y){this.lineEnable[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].primalOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio),this.lineMirror[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].mirrorOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);for(var F=d(s,z[y].primalMinor),G=d(t,z[y].mirrorMinor),H=this.lineTickLength,C=0;C<3;++C){var I=x/c[5*C];F[C]*=H[C]*I,G[C]*=H[C]*I}this.lineTickEnable[y]&&this._lines.drawAxisTicks(y,z[y].primalOffset,F,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio),this.lineTickMirror[y]&&this._lines.drawAxisTicks(y,z[y].mirrorOffset,G,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio)}this._text.bind(c,e,f,this.pixelRatio);for(var y=0;y<3;++y){for(var J=z[y].primalMinor,K=d(u,z[y].primalOffset),C=0;C<3;++C)this.lineTickEnable[y]&&(K[C]+=x*J[C]*Math.max(this.lineTickLength[C],0)/c[5*C]);if(this.tickEnable[y]){for(var C=0;C<3;++C)K[C]+=x*J[C]*this.tickPad[C]/c[5*C];this._text.drawTicks(y,this.tickSize[y],this.tickAngle[y],K,this.tickColor[y])}if(this.labelEnable[y]){for(var C=0;C<3;++C)K[C]+=x*J[C]*this.labelPad[C]/c[5*C];K[y]+=.5*(h[0][y]+h[1][y]),this._text.drawLabel(y,this.labelSize[y],this.labelAngle[y],K,this.labelColor[y])}}},o.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":121,"./lib/cube.js":122,"./lib/lines.js":123,"./lib/text.js":125,"./lib/ticks.js":126}],121:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d}function e(a){for(var b=[],c=[],e=0,i=0;i<3;++i)for(var j=(i+1)%3,k=(i+2)%3,l=[0,0,0],m=[0,0,0],n=-1;n<=1;n+=2){c.push(e,e+2,e+1,e+1,e+2,e+3),l[i]=n,m[i]=n;for(var o=-1;o<=1;o+=2){l[j]=o;for(var p=-1;p<=1;p+=2)l[k]=p,b.push(l[0],l[1],l[2],m[0],m[1],m[2]),e+=1}var q=j;j=k,k=q}var r=f(a,new Float32Array(b)),s=f(a,new Uint16Array(c),a.ELEMENT_ARRAY_BUFFER),t=g(a,[{buffer:r,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:r,type:a.FLOAT,size:3,offset:12,stride:24}],s),u=h(a);return u.attributes.position.location=0,u.attributes.normal.location=1,new d(a,r,t,u)}b.exports=e;var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders").bg,i=d.prototype;i.draw=function(a,b,c,d,e,f){for(var g=!1,h=0;h<3;++h)g=g||e[h];if(g){var i=this.gl;i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:b,projection:c,bounds:d,enable:e,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),i.disable(i.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":124,"gl-buffer":128,"gl-vao":236}],122:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<4;++d){a[d]=c[12+d];for(var e=0;e<3;++e)a[d]+=b[e]*c[4*e+d]}}function e(a){for(var b=0;b<p.length;++b)if(a=i.positive(a,p[b]),a.length<3)return 0;for(var c=a[0],d=c[0]/c[3],e=c[1]/c[3],f=0,b=1;b+1<a.length;++b){var g=a[b],h=a[b+1],j=g[0]/g[3],k=g[1]/g[3],l=h[0]/h[3],m=h[1]/h[3],n=j-d,o=k-e,q=l-d,r=m-e;f+=Math.abs(n*r-o*q)}return f}function f(a,b,c,f){h(k,b,a),h(k,c,k);for(var i=0,p=0;p<2;++p){n[2]=f[p][2];for(var t=0;t<2;++t){n[1]=f[t][1];for(var u=0;u<2;++u)n[0]=f[u][0],d(l[i],n,k),i+=1}}for(var v=-1,p=0;p<8;++p){for(var w=l[p][3],x=0;x<3;++x)m[p][x]=l[p][x]/w;w<0&&(v<0?v=p:m[p][2]<m[v][2]&&(v=p))}if(v<0){v=0;for(var y=0;y<3;++y){for(var z=(y+2)%3,A=(y+1)%3,B=-1,C=-1,D=0;D<2;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A);j(m[E],m[F],m[G],o)<0||(D?B=1:C=1)}if(B<0||C<0)C>B&&(v|=1<<y);else{for(var D=0;D<2;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A),H=e([l[E],l[F],l[G],l[E+(1<<z)+(1<<A)]]);D?B=H:C=H}C>B&&(v|=1<<y)}}}for(var I=7^v,J=-1,p=0;p<8;++p)p!==v&&p!==I&&(J<0?J=p:m[J][1]>m[p][1]&&(J=p));for(var K=-1,p=0;p<3;++p){var L=J^1<<p;if(L!==v&&L!==I){K<0&&(K=L);var A=m[L];A[0]<m[K][0]&&(K=L)}}for(var M=-1,p=0;p<3;++p){var L=J^1<<p;if(L!==v&&L!==I&&L!==K){M<0&&(M=L);var A=m[L];A[0]>m[M][0]&&(M=L)}}var N=q;N[0]=N[1]=N[2]=0,N[g.log2(K^J)]=J&K,N[g.log2(J^M)]=J&M;var O=7^M;O===v||O===I?(O=7^K,N[g.log2(M^O)]=O&M):N[g.log2(K^O)]=O&K;for(var P=r,Q=v,y=0;y<3;++y)Q&1<<y?P[y]=-1:P[y]=1;return s}b.exports=f;var g=a("bit-twiddle"),h=a("gl-mat4/multiply"),i=(a("gl-mat4/invert"),a("split-polygon")),j=a("robust-orientation"),k=new Array(16),l=(new Array(16),new Array(8)),m=new Array(8),n=new Array(3),o=[0,0,0];!function(){for(var a=0;a<8;++a)l[a]=[1,1,1,1],m[a]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],q=[1,1,1],r=[0,0,0],s={cubeEdges:q,axis:r}},{"bit-twiddle":54,"gl-mat4/invert":149,"gl-mat4/multiply":151,"robust-orientation":465,"split-polygon":483}],123:[function(a,b,c){"use strict";function d(a){return a[0]=a[1]=a[2]=0,a}function e(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function f(a,b,c,d,e,f,g,h){this.gl=a,this.vertBuffer=b,this.vao=c,this.shader=d,this.tickCount=e,this.tickOffset=f,this.gridCount=g,this.gridOffset=h}function g(a,b,c){var d=[],e=[0,0,0],g=[0,0,0],k=[0,0,0],l=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var m=0;m<3;++m){for(var n=d.length/3|0,o=0;o<c[m].length;++o){var p=+c[m][o].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;e[m]=n,g[m]=q-n;for(var n=d.length/3|0,r=0;r<c[m].length;++r){var p=+c[m][r].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;k[m]=n,l[m]=q-n}var s=h(a,new Float32Array(d)),t=i(a,[{buffer:s,type:a.FLOAT,size:3,stride:0,offset:0}]),u=j(a);return u.attributes.position.location=0,new f(a,s,t,u,g,e,l,k)}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders").line,k=[0,0,0],l=[0,0,0],m=[0,0,0],n=[0,0,0],o=[1,1],p=f.prototype;p.bind=function(a,b,c){this.shader.bind(),this.shader.uniforms.model=a,this.shader.uniforms.view=b,this.shader.uniforms.projection=c,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.drawAxisLine=function(a,b,c,f,g){var h=d(l);this.shader.uniforms.majorAxis=l,h[a]=b[1][a]-b[0][a],this.shader.uniforms.minorAxis=h;var i=e(n,c);i[a]+=b[0][a],this.shader.uniforms.offset=i,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=f;var j=d(m);j[(a+2)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6);var j=d(m);j[(a+1)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(a,b,c,e,f){if(this.tickCount[a]){var g=d(k);g[a]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=b,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=e,this.shader.uniforms.lineWidth=f;var h=d(m);h[a]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}},p.drawGrid=function(a,b,c,f,g,h){if(this.gridCount[a]){var i=d(l);i[b]=c[1][b]-c[0][b],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[b]+=c[0][b],this.shader.uniforms.offset=j;var o=d(k);o[a]=1,this.shader.uniforms.majorAxis=o;var p=d(m);p[a]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,this.gridCount[a],this.gridOffset[a])}},p.drawZero=function(a,b,c,f,g,h){var i=d(l);this.shader.uniforms.majorAxis=i,i[a]=c[1][a]-c[0][a],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[a]+=c[0][a],this.shader.uniforms.offset=j;var k=d(m);k[b]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":124,"gl-buffer":128,"gl-vao":236}],124:[function(a,b,c){"use strict";var d=a("gl-shader"),e="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",f="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";c.line=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"}])};var g="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",h="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";c.text=function(a){return d(a,g,h,null,[{name:"position",type:"vec3"}])};var i="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",j="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}";c.bg=function(a){return d(a,i,j,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":220}],125:[function(a,b,c){(function(c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=b,this.buffer=c,this.vao=d,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function e(a,b){try{return i(a,b)}catch(a){return console.warn("error vectorizing text:",a),{cells:[],positions:[]}}}function f(a,b,c,e,f,i){var k=g(a),l=h(a,[{buffer:k,size:3}]),m=j(a);m.attributes.position.location=0;var n=new d(a,m,k,l);return n.update(b,c,e,f,i),n}b.exports=f;var g=a("gl-buffer"),h=a("gl-vao"),i=a("vectorize-text"),j=a("./shaders").text,k=window||c.global||{},l=k.__TEXT_CACHE||{};k.__TEXT_CACHE={};var m=3,n=d.prototype,o=[0,0];n.bind=function(a,b,c,d){this.vao.bind(),this.shader.bind();var e=this.shader.uniforms;e.model=a,e.view=b,e.projection=c,e.pixelScale=d,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=o},n.update=function(a,b,c,d,f){function g(a,b,c,d){var f=l[c];f||(f=l[c]={});var g=f[b];g||(g=f[b]=e(b,{triangles:!0,font:c,textAlign:"center",textBaseline:"middle"}));for(var i=(d||12)/12,j=g.positions,k=g.cells,m=0,n=k.length;m<n;++m)for(var o=k[m],p=2;p>=0;--p){var q=j[o[p]];h.push(i*q[0],-i*q[1],a)}}for(var h=(this.gl,[]),i=[0,0,0],j=[0,0,0],k=[0,0,0],n=[0,0,0],o=0;o<3;++o){k[o]=h.length/m|0,g(.5*(a[0][o]+a[1][o]),b[o],c),n[o]=(h.length/m|0)-k[o],i[o]=h.length/m|0;for(var p=0;p<d[o].length;++p)d[o][p].text&&g(d[o][p].x,d[o][p].text,d[o][p].font||f,d[o][p].fontSize||12);
j[o]=(h.length/m|0)-i[o]}this.buffer.update(h),this.tickOffset=i,this.tickCount=j,this.labelOffset=k,this.labelCount=n};var p=[0,0,0];n.drawTicks=function(a,b,c,d,e){if(this.tickCount[a]){var f=p;f[0]=f[1]=f[2]=0,f[a]=1,this.shader.uniforms.axis=f,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}};var q=[0,0,0];n.drawLabel=function(a,b,c,d,e){this.labelCount[a]&&(this.shader.uniforms.axis=q,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a]))},n.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":124,_process:445,"gl-buffer":128,"gl-vao":236,"vectorize-text":509}],126:[function(a,b,c){"use strict";function d(a,b){var c=a+"",d=c.indexOf("."),e=0;d>=0&&(e=c.length-d-1);var f=Math.pow(10,e),g=Math.round(a*b*f),h=g+"";if(h.indexOf("e")>=0)return h;var i=g/f,j=g%f;g<0?(i=0|-Math.ceil(i),j=0|-j):(i=0|Math.floor(i),j=0|j);var k=""+i;if(g<0&&(k="-"+k),e){for(var l=""+j;l.length<e;)l="0"+l;return k+"."+l}return k}function e(a,b){for(var c=[],e=0;e<3;++e){for(var f=[],g=(.5*(a[0][e]+a[1][e]),0);g*b[e]<=a[1][e];++g)f.push({x:g*b[e],text:d(b[e],g)});for(var g=-1;g*b[e]>=a[0][e];--g)f.push({x:g*b[e],text:d(b[e],g)});c.push(f)}return c}function f(a,b){for(var c=0;c<3;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;++d){var e=a[c][d],f=b[c][d];if(e.x!==f.x||e.text!==f.text||e.font!==f.font||e.fontColor!==f.fontColor||e.fontSize!==f.fontSize||e.dx!==f.dx||e.dy!==f.dy)return!1}}return!0}c.create=e,c.equal=f},{}],127:[function(a,b,c){"use strict";function d(a,b,c){this.lo=a,this.hi=b,this.pixelsPerDataUnit=c}function e(a,b,c,d,e){for(var f=0;f<3;++f){for(var g=o,h=p,i=0;i<3;++i)h[i]=g[i]=c[i];h[3]=g[3]=1,h[f]+=1,l(h,h,b),h[3]<0&&(a[f]=1/0),g[f]-=1,l(g,g,b),g[3]<0&&(a[f]=1/0);var j=(g[0]/g[3]-h[0]/h[3])*d,k=(g[1]/g[3]-h[1]/h[3])*e;a[f]=.25*Math.sqrt(j*j+k*k)}return a}function f(a,b,c,d,f){var l=b.model||m,o=b.view||m,p=b.projection||m,s=a.bounds,f=f||i(l,o,p,s),t=f.axis;f.edges,j(n,o,l),j(n,p,n);for(var u=q,v=0;v<3;++v)u[v].lo=1/0,u[v].hi=-(1/0),u[v].pixelsPerDataUnit=1/0;var w=g(k(n,n));k(n,n);for(var x=0;x<3;++x){var y=(x+1)%3,z=(x+2)%3,A=r;a:for(var v=0;v<2;++v){var B=[];if(t[x]<0!=!!v){A[x]=s[v][x];for(var C=0;C<2;++C){A[y]=s[C^v][y];for(var D=0;D<2;++D)A[z]=s[D^C^v][z],B.push(A.slice())}for(var C=0;C<w.length;++C){if(0===B.length)continue a;B=h.positive(B,w[C])}for(var C=0;C<B.length;++C)for(var z=B[C],E=e(r,n,z,c,d),D=0;D<3;++D)u[D].lo=Math.min(u[D].lo,z[D]),u[D].hi=Math.max(u[D].hi,z[D]),D!==x&&(u[D].pixelsPerDataUnit=Math.min(u[D].pixelsPerDataUnit,Math.abs(E[D])))}}}return u}b.exports=f;var g=a("extract-frustum-planes"),h=a("split-polygon"),i=a("./lib/cube.js"),j=a("gl-mat4/multiply"),k=a("gl-mat4/transpose"),l=a("gl-vec4/transformMat4"),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=new Float32Array(16),o=[0,0,0,1],p=[0,0,0,1],q=[new d(1/0,(-(1/0)),1/0),new d(1/0,(-(1/0)),1/0),new d(1/0,(-(1/0)),1/0)],r=[0,0,0]},{"./lib/cube.js":122,"extract-frustum-planes":103,"gl-mat4/multiply":151,"gl-mat4/transpose":159,"gl-vec4/transformMat4":242,"split-polygon":483}],128:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.gl=a,this.type=b,this.handle=c,this.length=d,this.usage=e}function e(a,b,c,d,e,f){var g=e.length*e.BYTES_PER_ELEMENT;if(f<0)return a.bufferData(b,e,d),g;if(g+f>c)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return a.bufferSubData(b,f,e),c}function f(a,b){for(var c=i.malloc(a.length,b),d=a.length,e=0;e<d;++e)c[e]=a[e];return c}function g(a,b){for(var c=1,d=b.length-1;d>=0;--d){if(b[d]!==c)return!1;c*=a[d]}return!0}function h(a,b,c,e){if(c=c||a.ARRAY_BUFFER,e=e||a.DYNAMIC_DRAW,c!==a.ARRAY_BUFFER&&c!==a.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(e!==a.DYNAMIC_DRAW&&e!==a.STATIC_DRAW&&e!==a.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=a.createBuffer(),g=new d(a,c,f,0,e);return g.update(b),g}var i=a("typedarray-pool"),j=a("ndarray-ops"),k=a("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],m=d.prototype;m.bind=function(){this.gl.bindBuffer(this.type,this.handle)},m.unbind=function(){this.gl.bindBuffer(this.type,null)},m.dispose=function(){this.gl.deleteBuffer(this.handle)},m.update=function(a,b){if("number"!=typeof b&&(b=-1),this.bind(),"object"==typeof a&&"undefined"!=typeof a.shape){var c=a.dtype;if(l.indexOf(c)<0&&(c="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var d=gl.getExtension("OES_element_index_uint");c=d&&"uint16"!==c?"uint32":"uint16"}if(c===a.dtype&&g(a.shape,a.stride))0===a.offset&&a.data.length===a.shape[0]?this.length=e(this.gl,this.type,this.length,this.usage,a.data,b):this.length=e(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),b);else{var h=i.malloc(a.size,c),m=k(h,a.shape);j.assign(m,a),b<0?this.length=e(this.gl,this.type,this.length,this.usage,h,b):this.length=e(this.gl,this.type,this.length,this.usage,h.subarray(0,a.size),b),i.free(h)}}else if(Array.isArray(a)){var n;n=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(a,"uint16"):f(a,"float32"),b<0?this.length=e(this.gl,this.type,this.length,this.usage,n,b):this.length=e(this.gl,this.type,this.length,this.usage,n.subarray(0,a.length),b),i.free(n)}else if("object"==typeof a&&"number"==typeof a.length)this.length=e(this.gl,this.type,this.length,this.usage,a,b);else{if("number"!=typeof a&&void 0!==a)throw new Error("gl-buffer: Invalid data type");if(b>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");a=0|a,a<=0&&(a=1),this.gl.bufferData(this.type,0|a,this.usage),this.length=a}},b.exports=h},{ndarray:427,"ndarray-ops":421,"typedarray-pool":496}],129:[function(a,b,c){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],130:[function(a,b,c){var d=a("./1.0/numbers");b.exports=function(a){return d[a]}},{"./1.0/numbers":129}],131:[function(a,b,c){"use strict";function d(a,b,c,d){this.plot=a,this.shader=b,this.bufferHi=c,this.bufferLo=d,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.numPoints=0,this.color=[0,0,0,1]}function e(a,b){var c=f(a.gl,i.vertex,i.fragment),e=g(a.gl),h=g(a.gl),j=new d(a,c,e,h);return j.update(b),a.addObject(j),j}var f=a("gl-shader"),g=a("gl-buffer"),h=a("typedarray-pool"),i=a("./lib/shaders");b.exports=e;var j=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],k=d.prototype;k.draw=function(){var a=new Float32Array([0,0]),b=new Float32Array([0,0]),c=new Float32Array([0,0]),d=new Float32Array([0,0]),e=[1,1];return function(){var f=this.plot,g=this.shader,h=this.bounds,i=this.numPoints;if(i){var k=f.gl,l=f.dataBox,m=f.viewBox,n=f.pixelRatio,o=h[2]-h[0],p=h[3]-h[1],q=l[2]-l[0],r=l[3]-l[1],s=2*o/q,t=2*p/r,u=2*(h[0]-l[0])/q-1,v=2*(h[1]-l[1])/r-1;a[0]=s,a[1]=t,b[0]=s-a[0],b[1]=t-a[1],c[0]=u,c[1]=v,d[0]=u-c[0],d[1]=v-c[1];var w=m[2]-m[0],x=m[3]-m[1];e[0]=2*n/w,e[1]=2*n/x,g.bind(),g.uniforms.scaleHi=a,g.uniforms.scaleLo=b,g.uniforms.translateHi=c,g.uniforms.translateLo=d,g.uniforms.pixelScale=e,g.uniforms.color=this.color,this.bufferLo.bind(),g.attributes.positionLo.pointer(k.FLOAT,!1,16,0),this.bufferHi.bind(),g.attributes.positionHi.pointer(k.FLOAT,!1,16,0),g.attributes.pixelOffset.pointer(k.FLOAT,!1,16,8),k.drawArrays(k.TRIANGLES,0,i*j.length)}}}(),k.drawPick=function(a){return a},k.pick=function(a,b){return null},k.update=function(a){a=a||{};var b,c,d,e=a.positions||[],f=a.errors||[],g=1;"lineWidth"in a&&(g=+a.lineWidth);var i=5;"capSize"in a&&(i=+a.capSize),this.color=(a.color||[0,0,0,1]).slice();var k=this.bounds=[1/0,1/0,-(1/0),-(1/0)],l=this.numPoints=e.length>>1;for(b=0;b<l;++b)c=e[2*b],d=e[2*b+1],k[0]=Math.min(c,k[0]),k[1]=Math.min(d,k[1]),k[2]=Math.max(c,k[2]),k[3]=Math.max(d,k[3]);k[2]===k[0]&&(k[2]+=1),k[3]===k[1]&&(k[3]+=1);var m=1/(k[2]-k[0]),n=1/(k[3]-k[1]),o=k[0],p=k[1],q=h.mallocFloat64(l*j.length*4),r=h.mallocFloat32(l*j.length*4),s=h.mallocFloat32(l*j.length*4),t=0;for(b=0;b<l;++b){c=e[2*b],d=e[2*b+1];for(var u=f[4*b],v=f[4*b+1],w=f[4*b+2],x=f[4*b+3],y=0;y<j.length;++y){var z=j[y],A=z[0],B=z[1];A<0?A*=u:A>0&&(A*=v),B<0?B*=w:B>0&&(B*=x),q[t++]=m*(c-o+A),q[t++]=n*(d-p+B),q[t++]=g*z[2]+(i+g)*z[4],q[t++]=g*z[3]+(i+g)*z[5]}}for(b=0;b<q.length;b++)r[b]=q[b],s[b]=q[b]-r[b];this.bufferHi.update(r),this.bufferLo.update(s),h.free(q)},k.dispose=function(){this.plot.removeObject(this),this.shader.dispose(),this.bufferHi.dispose(),this.bufferLo.dispose()}},{"./lib/shaders":132,"gl-buffer":128,"gl-shader":220,"typedarray-pool":496}],132:[function(a,b,c){b.exports={vertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi;\nattribute vec2 positionLo;\nattribute vec2 pixelOffset;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\n\nvec2 project(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi + trHi\n       + scLo * posHi + trLo\n       + scHi * posLo\n       + scLo * posLo;\n}\n\nvoid main() {\n  vec3 scrPosition = vec3(\n         project(scaleHi, translateHi, scaleLo, translateLo, positionHi, positionLo),\n         1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],133:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=d,this.buffer=b,this.vao=c,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function e(a,b){for(var c=0;c<3;++c)a[0][c]=Math.min(a[0][c],b[c]),a[1][c]=Math.max(a[1][c],b[c])}function f(a,b,c,d){for(var e=m[d],f=0;f<e.length;++f){var g=e[f];a.push(b[0],b[1],b[2],c[0],c[1],c[2],c[3],g[0],g[1],g[2])}return e.length}function g(a){var b=a.gl,c=h(b),e=i(b,[{buffer:c,type:b.FLOAT,size:3,offset:0,stride:40},{buffer:c,type:b.FLOAT,size:4,offset:12,stride:40},{buffer:c,type:b.FLOAT,size:3,offset:28,stride:40}]),f=j(b);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.offset.location=2;var g=new d(b,c,e,f);return g.update(a),g}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders/index"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=d.prototype;l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.drawTransparent=l.draw=function(a){var b=this.gl,c=this.shader.uniforms;this.shader.bind();var d=c.view=a.view||k,e=c.projection=a.projection||k;c.model=a.model||k,c.clipBounds=this.clipBounds,c.opacity=this.opacity;var f=d[12],g=d[13],h=d[14],i=d[15],j=this.pixelRatio*(e[3]*f+e[7]*g+e[11]*h+e[15]*i)/b.drawingBufferHeight;this.vao.bind();for(var l=0;l<3;++l)b.lineWidth(this.lineWidth[l]),c.capSize=this.capSize[l]*j,b.drawArrays(b.LINES,this.lineOffset[l],this.lineCount[l]);this.vao.unbind()};var m=function(){for(var a=new Array(3),b=0;b<3;++b){for(var c=[],d=1;d<=2;++d)for(var e=-1;e<=1;e+=2){var f=(d+b)%3,g=[0,0,0];g[f]=e,c.push(g)}a[b]=c}return a}();l.update=function(a){a=a||{},"lineWidth"in a&&(this.lineWidth=a.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in a&&(this.capSize=a.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in a&&(this.opacity=a.opacity);var b=a.color||[[0,0,0],[0,0,0],[0,0,0]],c=a.position,d=a.error;if(Array.isArray(b[0])||(b=[b,b,b]),c&&d){var g=[],h=c.length,i=0;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.lineCount=[0,0,0];for(var j=0;j<3;++j){this.lineOffset[j]=i;a:for(var k=0;k<h;++k){for(var l=c[k],m=0;m<3;++m)if(isNaN(l[m])||!isFinite(l[m]))continue a;var n=d[k],o=b[j];if(Array.isArray(o[0])&&(o=b[k]),3===o.length&&(o=[o[0],o[1],o[2],1]),!isNaN(n[0][j])&&!isNaN(n[1][j])){if(n[0][j]<0){var p=l.slice();p[j]+=n[0][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}if(n[1][j]>0){var p=l.slice();p[j]+=n[1][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}}}this.lineCount[j]=i-this.lineOffset[j]}this.buffer.update(g)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":134,"gl-buffer":128,"gl-vao":236}],134:[function(a,b,c){"use strict";var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}",f="precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"},{name:"offset",type:"vec3"},{name:"color",type:"vec4"}])}},{"gl-shader":220}],135:[function(a,b,c){"use strict";function d(a){var b=a.getParameter(a.FRAMEBUFFER_BINDING),c=a.getParameter(a.RENDERBUFFER_BINDING),d=a.getParameter(a.TEXTURE_BINDING_2D);return[b,c,d]}function e(a,b){a.bindFramebuffer(a.FRAMEBUFFER,b[0]),a.bindRenderbuffer(a.RENDERBUFFER,b[1]),a.bindTexture(a.TEXTURE_2D,b[2])}function f(a,b){var c=a.getParameter(b.MAX_COLOR_ATTACHMENTS_WEBGL);s=new Array(c+1);for(var d=0;d<=c;++d){for(var e=new Array(c),f=0;f<d;++f)e[f]=a.COLOR_ATTACHMENT0+f;for(var f=d;f<c;++f)e[f]=a.NONE;s[d]=e}}function g(a){switch(a){case o:throw new Error("gl-fbo: Framebuffer unsupported");case p:throw new Error("gl-fbo: Framebuffer incomplete attachment");case q:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(a,b,c,d,e,f){if(!d)return null;var g=n(a,b,c,e,d);return g.magFilter=a.NEAREST,g.minFilter=a.NEAREST,g.mipSamples=1,g.bind(),a.framebufferTexture2D(a.FRAMEBUFFER,f,a.TEXTURE_2D,g.handle,0),g}function i(a,b,c,d,e){var f=a.createRenderbuffer();return a.bindRenderbuffer(a.RENDERBUFFER,f),a.renderbufferStorage(a.RENDERBUFFER,d,b,c),a.framebufferRenderbuffer(a.FRAMEBUFFER,e,a.RENDERBUFFER,f),f}function j(a){var b=d(a.gl),c=a.gl,f=a.handle=c.createFramebuffer(),j=a._shape[0],k=a._shape[1],l=a.color.length,m=a._ext,n=a._useStencil,o=a._useDepth,p=a._colorType;c.bindFramebuffer(c.FRAMEBUFFER,f);for(var q=0;q<l;++q)a.color[q]=h(c,j,k,p,c.RGBA,c.COLOR_ATTACHMENT0+q);0===l?(a._color_rb=i(c,j,k,c.RGBA4,c.COLOR_ATTACHMENT0),m&&m.drawBuffersWEBGL(s[0])):l>1&&m.drawBuffersWEBGL(s[l]);var r=c.getExtension("WEBGL_depth_texture");r?n?a.depth=h(c,j,k,r.UNSIGNED_INT_24_8_WEBGL,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o&&(a.depth=h(c,j,k,c.UNSIGNED_SHORT,c.DEPTH_COMPONENT,c.DEPTH_ATTACHMENT)):o&&n?a._depth_rb=i(c,j,k,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o?a._depth_rb=i(c,j,k,c.DEPTH_COMPONENT16,c.DEPTH_ATTACHMENT):n&&(a._depth_rb=i(c,j,k,c.STENCIL_INDEX,c.STENCIL_ATTACHMENT));var t=c.checkFramebufferStatus(c.FRAMEBUFFER);if(t!==c.FRAMEBUFFER_COMPLETE){a._destroyed=!0,c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteFramebuffer(a.handle),a.handle=null,a.depth&&(a.depth.dispose(),a.depth=null),a._depth_rb&&(c.deleteRenderbuffer(a._depth_rb),a._depth_rb=null);for(var q=0;q<a.color.length;++q)a.color[q].dispose(),a.color[q]=null;a._color_rb&&(c.deleteRenderbuffer(a._color_rb),a._color_rb=null),e(c,b),g(t)}e(c,b)}function k(a,b,c,d,e,f,g,h){this.gl=a,this._shape=[0|b,0|c],this._destroyed=!1,this._ext=h,this.color=new Array(e);for(var i=0;i<e;++i)this.color[i]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=d,this._useDepth=f,this._useStencil=g;var k=this,l=[0|b,0|c];Object.defineProperties(l,{0:{get:function(){return k._shape[0]},set:function(a){return k.width=a}},1:{get:function(){return k._shape[1]},set:function(a){return k.height=a}}}),this._shapeVector=l,j(this)}function l(a,b,c){if(a._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(a._shape[0]!==b||a._shape[1]!==c){var f=a.gl,h=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(b<0||b>h||c<0||c>h)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");a._shape[0]=b,a._shape[1]=c;for(var i=d(f),j=0;j<a.color.length;++j)a.color[j].shape=a._shape;a._color_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._color_rb),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,a._shape[0],a._shape[1])),a.depth&&(a.depth.shape=a._shape),a._depth_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._depth_rb),a._useDepth&&a._useStencil?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,a._shape[0],a._shape[1]):a._useDepth?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,a._shape[0],a._shape[1]):a._useStencil&&f.renderbufferStorage(f.RENDERBUFFER,f.STENCIL_INDEX,a._shape[0],a._shape[1])),f.bindFramebuffer(f.FRAMEBUFFER,a.handle);var k=f.checkFramebufferStatus(f.FRAMEBUFFER);k!==f.FRAMEBUFFER_COMPLETE&&(a.dispose(),e(f,i),g(k)),e(f,i)}}function m(a,b,c,d){o||(o=a.FRAMEBUFFER_UNSUPPORTED,p=a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,q=a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var e=a.getExtension("WEBGL_draw_buffers");if(!s&&e&&f(a,e),Array.isArray(b)&&(d=c,c=0|b[1],b=0|b[0]),"number"!=typeof b)throw new Error("gl-fbo: Missing shape parameter");var g=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(b<0||b>g||c<0||c>g)throw new Error("gl-fbo: Parameters are too large for FBO");d=d||{};var h=1;if("color"in d){if(h=Math.max(0|d.color,0),h<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!e)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>a.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var i=a.UNSIGNED_BYTE,j=a.getExtension("OES_texture_float");if(d["float"]&&h>0){if(!j)throw new Error("gl-fbo: Context does not support floating point textures");i=a.FLOAT}else d.preferFloat&&h>0&&j&&(i=a.FLOAT);var l=!0;"depth"in d&&(l=!!d.depth);var m=!1;return"stencil"in d&&(m=!!d.stencil),new k(a,b,c,i,h,l,m,e)}var n=a("gl-texture2d");b.exports=m;var o,p,q,r,s=null,t=k.prototype;Object.defineProperties(t,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(a){if(Array.isArray(a)||(a=[0|a,0|a]),2!==a.length)throw new Error("gl-fbo: Shape vector must be length 2");var b=0|a[0],c=0|a[1];return l(this,b,c),[b,c]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(a){return a=0|a,l(this,a,this._shape[1]),a},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(a){return a=0|a,l(this,this._shape[0],a),a},enumerable:!1}}),t.bind=function(){if(!this._destroyed){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.handle),a.viewport(0,0,this._shape[0],this._shape[1])}},t.dispose=function(){if(!this._destroyed){this._destroyed=!0;var a=this.gl;a.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(a.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var b=0;b<this.color.length;++b)this.color[b].dispose(),this.color[b]=null;this._color_rb&&(a.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":232}],136:[function(a,b,c){function d(a,b,c){"use strict";var d=g(b)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==c&&(i=c===f.FRAGMENT_SHADER?"fragment":"vertex");for(var j=e("Error compiling %s shader %s:\n",i,d),k=e("%s%s",j,a),l=a.split("\n"),m={},n=0;n<l.length;n++){var o=l[n];if(""!==o){var p=parseInt(o.split(":")[2]);if(isNaN(p))throw new Error(e("Could not parse error: %s",o));m[p]=o}}for(var q=h(b).split("\n"),n=0;n<q.length;n++)if(m[n+3]||m[n+2]||m[n+1]){var r=q[n];if(j+=r+"\n",m[n+1]){var s=m[n+1];s=s.substr(s.split(":",3).join(":").length+1).trim(),j+=e("^^^ %s\n\n",s)}}return{"long":j.trim(),"short":k.trim()}}var e=a("sprintf-js").sprintf,f=a("gl-constants/lookup"),g=a("glsl-shader-name"),h=a("add-line-numbers");b.exports=d},{"add-line-numbers":29,"gl-constants/lookup":130,"glsl-shader-name":244,"sprintf-js":484}],137:[function(a,b,c){c.lineVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi, dLo;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi + trHi\n       + scLo * posHi + trLo\n       + scHi * posLo\n       + scLo * posLo;\n}\n\n\nvec2 project_2_1(vec2 scHi, vec2 scLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi\n       + scLo * posHi\n       + scHi * posLo\n       + scLo * posLo;\n}\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  vec2 dir = project_2_1(scaleHi, scaleLo, dHi, dLo);\n  vec2 n = 0.5 * width * normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(p + n, 0.0, 1.0);\n}",c.lineFragment="precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}",c.mitreVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo;\nuniform float radius;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi + trHi\n       + scLo * posHi + trLo\n       + scHi * posLo\n       + scLo * posLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  gl_Position = vec4(p, 0.0, 1.0);\n  gl_PointSize = radius;\n}",c.mitreFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}",c.pickVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi;\nattribute vec4 pick0, pick1;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi + trHi\n       + scLo * posHi + trLo\n       + scHi * posLo\n       + scLo * posLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  vec2 n = width * normalize(screenShape.yx * vec2(dHi.y, -dHi.x)) / screenShape.xy;\n  gl_Position = vec4(p + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}",
c.fillVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, projectAxis;\nuniform float projectValue, depth;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi + trHi\n       + scLo * posHi + trLo\n       + scHi * posLo\n       + scLo * posLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  if(dHi.y < 0.0 || (dHi.y == 0.0 && dHi.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}",c.fillFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}"},{}],138:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i){this.plot=a,this.dashPattern=b,this.lineBufferHi=c,this.lineBufferLo=d,this.pickBuffer=e,this.lineShader=f,this.mitreShader=g,this.fillShader=h,this.pickShader=i,this.usingDashes=!1,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.width=1,this.color=[0,0,1,1],this.fill=[!1,!1,!1,!1],this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.data=null,this.numPoints=0,this.vertCount=0,this.pickOffset=0}function e(a){return a.map(function(a){return a.slice()})}function f(a,b){var c=a.gl,e=h(c),f=h(c),j=h(c),k=i(c,[1,1]),m=g(c,l.lineVertex,l.lineFragment),n=g(c,l.mitreVertex,l.mitreFragment),o=g(c,l.fillVertex,l.fillFragment),p=g(c,l.pickVertex,l.pickFragment),q=new d(a,k,e,f,j,m,n,o,p);return a.addObject(q),q.update(b),q}b.exports=f;var g=a("gl-shader"),h=a("gl-buffer"),i=a("gl-texture2d"),j=a("ndarray"),k=a("typedarray-pool"),l=a("./lib/shaders"),m=d.prototype;m.setProjectionModel=function(){var a={scaleHi:new Float32Array([0,0]),scaleLo:new Float32Array([0,0]),translateHi:new Float32Array([0,0]),translateLo:new Float32Array([0,0]),screenShape:[0,0]};return function(){var b=this.bounds,c=this.plot.viewBox,d=this.plot.dataBox,e=b[2]-b[0],f=b[3]-b[1],g=d[2]-d[0],h=d[3]-d[1],i=c[2]-c[0],j=c[3]-c[1],k=2*e/g,l=2*f/h,m=2*(b[0]-d[0])/g-1,n=2*(b[1]-d[1])/h-1;return a.scaleHi[0]=k,a.scaleHi[1]=l,a.scaleLo[0]=k-a.scaleHi[0],a.scaleLo[1]=l-a.scaleHi[1],a.translateHi[0]=m,a.translateHi[1]=n,a.translateLo[0]=m-a.translateHi[0],a.translateLo[1]=n-a.translateHi[1],a.screenShape[0]=i,a.screenShape[1]=j,a}}(),m.setProjectionUniforms=function(a,b){a.scaleHi=b.scaleHi,a.scaleLo=b.scaleLo,a.translateHi=b.translateHi,a.translateLo=b.translateLo,a.screenShape=b.screenShape},m.draw=function(){var a=[1,0],b=[-1,0],c=[0,1],d=[0,-1];return function(){var e=this.vertCount;if(e){var f=this.setProjectionModel(),g=this.plot,h=this.width,i=g.gl,j=g.pixelRatio,k=this.color,l=this.fillShader.attributes;this.lineBufferLo.bind(),l.aLo.pointer(i.FLOAT,!1,16,0),this.lineBufferHi.bind();var m=this.fill;if(m[0]||m[1]||m[2]||m[3]){var n=this.fillShader;n.bind();var o=n.uniforms;this.setProjectionUniforms(o,f),o.depth=g.nextDepthValue(),l.aHi.pointer(i.FLOAT,!1,16,0),l.dHi.pointer(i.FLOAT,!1,16,8),i.depthMask(!0),i.enable(i.DEPTH_TEST);var p=this.fillColor;m[0]&&(o.color=p[0],o.projectAxis=b,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),m[1]&&(o.color=p[1],o.projectAxis=d,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),m[2]&&(o.color=p[2],o.projectAxis=a,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),m[3]&&(o.color=p[3],o.projectAxis=c,o.projectValue=1,i.drawArrays(i.TRIANGLES,0,e)),i.depthMask(!1),i.disable(i.DEPTH_TEST)}var q=this.lineShader;q.bind(),this.lineBufferLo.bind(),q.attributes.aLo.pointer(i.FLOAT,!1,16,0),q.attributes.dLo.pointer(i.FLOAT,!1,16,8),this.lineBufferHi.bind();var r=q.uniforms;this.setProjectionUniforms(r,f),r.color=k,r.width=h*j,r.dashPattern=this.dashPattern.bind(),r.dashLength=this.dashLength*j;var s=q.attributes;if(s.aHi.pointer(i.FLOAT,!1,16,0),s.dHi.pointer(i.FLOAT,!1,16,8),i.drawArrays(i.TRIANGLES,0,e),h>2&&!this.usingDashes){var t=this.mitreShader;this.lineBufferLo.bind(),t.attributes.aLo.pointer(i.FLOAT,!1,48,0),this.lineBufferHi.bind(),t.bind();var u=t.uniforms;this.setProjectionUniforms(u,f),u.color=k,u.radius=h*j,t.attributes.aHi.pointer(i.FLOAT,!1,48,0),i.drawArrays(i.POINTS,0,e/3|0)}}}}(),m.drawPick=function(){var a=[0,0,0,0];return function(b){var c=this.vertCount,d=this.numPoints;if(this.pickOffset=b,!c)return b+d;var e=this.setProjectionModel(),f=this.plot,g=this.width,h=f.gl,i=f.pickPixelRatio,j=this.pickShader,k=this.pickBuffer;a[0]=255&b,a[1]=b>>>8&255,a[2]=b>>>16&255,a[3]=b>>>24,j.bind();var l=j.uniforms;this.setProjectionUniforms(l,e),l.width=g*i,l.pickOffset=a;var m=j.attributes;return this.lineBufferHi.bind(),m.aHi.pointer(h.FLOAT,!1,16,0),m.dHi.pointer(h.FLOAT,!1,16,8),this.lineBufferLo.bind(),m.aLo.pointer(h.FLOAT,!1,16,0),k.bind(),m.pick0.pointer(h.UNSIGNED_BYTE,!1,8,0),m.pick1.pointer(h.UNSIGNED_BYTE,!1,8,4),h.drawArrays(h.TRIANGLES,0,c),b+d}}(),m.pick=function(a,b,c){var d=this.pickOffset,e=this.numPoints;if(c<d||c>=d+e)return null;var f=c-d,g=this.data;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}},m.update=function(a){a=a||{};var b,c,d,f,g,h=this.plot.gl;this.color=(a.color||[0,0,1,1]).slice(),this.width=+(a.width||1),this.fill=(a.fill||[!1,!1,!1,!1]).slice(),this.fillColor=e(a.fillColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var l=a.dashes||[1],m=0;for(b=0;b<l.length;++b)m+=l[b];var n=k.mallocUint8(m);d=0;var o=255;for(b=0;b<l.length;++b){for(c=0;c<l[b];++c)n[d++]=o;o^=255}this.dashPattern.dispose(),this.usingDashes=l.length>1,this.dashPattern=i(h,j(n,[m,1,4],[1,0,0])),this.dashPattern.minFilter=h.NEAREST,this.dashPattern.magFilter=h.NEAREST,this.dashLength=m,k.free(n);var p=a.positions;this.data=p;var q=this.bounds;q[0]=q[1]=1/0,q[2]=q[3]=-(1/0);var r=this.numPoints=p.length>>>1;if(0!==r){for(b=0;b<r;++b)f=p[2*b],g=p[2*b+1],isNaN(f)||isNaN(g)||(q[0]=Math.min(q[0],f),q[1]=Math.min(q[1],g),q[2]=Math.max(q[2],f),q[3]=Math.max(q[3],g));q[0]===q[2]&&(q[2]+=1),q[3]===q[1]&&(q[3]+=1);var s=k.mallocFloat64(24*(r-1)),t=k.mallocFloat32(24*(r-1)),u=k.mallocFloat32(24*(r-1)),v=k.mallocUint32(12*(r-1)),w=t.length,x=v.length;d=r;for(var y=0;d>1;){var z=--d;f=p[2*d],g=p[2*d+1];var A=z-1,B=p[2*A],C=p[2*A+1];if(!(isNaN(f)||isNaN(g)||isNaN(B)||isNaN(C))){y+=1,f=(f-q[0])/(q[2]-q[0]),g=(g-q[1])/(q[3]-q[1]),B=(B-q[0])/(q[2]-q[0]),C=(C-q[1])/(q[3]-q[1]);var D=B-f,E=C-g,F=z|1<<24,G=z-1,H=z,I=z-1|1<<24;s[--w]=-E,s[--w]=-D,s[--w]=g,s[--w]=f,v[--x]=F,v[--x]=G,s[--w]=E,s[--w]=D,s[--w]=C,s[--w]=B,v[--x]=H,v[--x]=I,s[--w]=-E,s[--w]=-D,s[--w]=C,s[--w]=B,v[--x]=H,v[--x]=I,s[--w]=E,s[--w]=D,s[--w]=C,s[--w]=B,v[--x]=H,v[--x]=I,s[--w]=-E,s[--w]=-D,s[--w]=g,s[--w]=f,v[--x]=F,v[--x]=G,s[--w]=E,s[--w]=D,s[--w]=g,s[--w]=f,v[--x]=F,v[--x]=G}}for(b=0;b<s.length;b++)t[b]=s[b],u[b]=s[b]-t[b];this.vertCount=6*y,this.lineBufferHi.update(t.subarray(w)),this.lineBufferLo.update(u.subarray(w)),this.pickBuffer.update(v.subarray(x)),k.free(s),k.free(t),k.free(u),k.free(v)}},m.dispose=function(){this.plot.removeObject(this),this.lineBufferLo.dispose(),this.lineBufferHi.dispose(),this.pickBuffer.dispose(),this.lineShader.dispose(),this.mitreShader.dispose(),this.fillShader.dispose(),this.pickShader.dispose(),this.dashPattern.dispose()}},{"./lib/shaders":137,"gl-buffer":128,"gl-shader":220,"gl-texture2d":232,ndarray:427,"typedarray-pool":496}],139:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",g="precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];c.createShader=function(a){return d(a,e,f,null,h)},c.createPickShader=function(a){return d(a,e,g,null,h)}},{"gl-shader":220}],140:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=0;d<3;++d){var e=a[d]-b[d];c+=e*e}return Math.sqrt(c)}function e(a){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],c=0;c<3;++c)b[0][c]=Math.max(a[0][c],b[0][c]),b[1][c]=Math.min(a[1][c],b[1][c]);return b}function f(a,b,c,d){this.arcLength=a,this.position=b,this.index=c,this.dataCoordinate=d}function g(a,b,c,d,e,f){this.gl=a,this.shader=b,this.pickShader=c,this.buffer=d,this.vao=e,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=f,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function h(a){var b=a.gl||a.scene&&a.scene.gl,c=p(b);c.attributes.position.location=0,c.attributes.nextPosition.location=1,c.attributes.arcLength.location=2,c.attributes.lineWidth.location=3,c.attributes.color.location=4;var d=q(b);d.attributes.position.location=0,d.attributes.nextPosition.location=1,d.attributes.arcLength.location=2,d.attributes.lineWidth.location=3,d.attributes.color.location=4;for(var e=i(b),f=j(b,[{buffer:e,size:3,offset:0,stride:48},{buffer:e,size:3,offset:12,stride:48},{buffer:e,size:1,offset:24,stride:48},{buffer:e,size:1,offset:28,stride:48},{buffer:e,size:4,offset:32,stride:48}]),h=n(new Array(1024),[256,1,4]),l=0;l<1024;++l)h.data[l]=255;var m=k(b,h);m.wrap=b.REPEAT;var o=new g(b,c,d,e,f,m);return o.update(a),o}b.exports=h;var i=a("gl-buffer"),j=a("gl-vao"),k=a("gl-texture2d"),l=a("glsl-read-float"),m=a("binary-search-bounds"),n=a("ndarray"),o=a("./lib/shaders"),p=o.createShader,q=o.createPickShader,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=g.prototype;s.isTransparent=function(){return this.opacity<1},s.isOpaque=function(){return this.opacity>=1},s.pickSlots=1,s.setPickBase=function(a){this.pickId=a},s.drawTransparent=s.draw=function(a){var b=this.gl,c=this.shader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,clipBounds:e(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.drawPick=function(a){var b=this.gl,c=this.pickShader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,pickId:this.pickId,clipBounds:e(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.update=function(a){var b,c;this.dirty=!0;var e=!!a.connectGaps;"dashScale"in a&&(this.dashScale=a.dashScale),"opacity"in a&&(this.opacity=+a.opacity);var f=a.position||a.positions;if(f){var g=a.color||a.colors||[0,0,0,1],h=a.lineWidth||1,i=[],j=[],k=[],l=0,o=0,p=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],q=!1;a:for(b=1;b<f.length;++b){var r=f[b-1],s=f[b];for(j.push(l),k.push(r.slice()),c=0;c<3;++c){if(isNaN(r[c])||isNaN(s[c])||!isFinite(r[c])||!isFinite(s[c])){if(!e&&i.length>0){for(var t=0;t<24;++t)i.push(i[i.length-12]);o+=2,q=!0}continue a}p[0][c]=Math.min(p[0][c],r[c],s[c]),p[1][c]=Math.max(p[1][c],r[c],s[c])}var u,v;Array.isArray(g[0])?(u=g[b-1],v=g[b]):u=v=g,3===u.length&&(u=[u[0],u[1],u[2],1]),3===v.length&&(v=[v[0],v[1],v[2],1]);var w;w=Array.isArray(h)?h[b-1]:h;var x=l;if(l+=d(r,s),q){for(c=0;c<2;++c)i.push(r[0],r[1],r[2],s[0],s[1],s[2],x,w,u[0],u[1],u[2],u[3]);o+=2,q=!1}i.push(r[0],r[1],r[2],s[0],s[1],s[2],x,w,u[0],u[1],u[2],u[3],r[0],r[1],r[2],s[0],s[1],s[2],x,-w,u[0],u[1],u[2],u[3],s[0],s[1],s[2],r[0],r[1],r[2],l,-w,v[0],v[1],v[2],v[3],s[0],s[1],s[2],r[0],r[1],r[2],l,w,v[0],v[1],v[2],v[3]),o+=4}if(this.buffer.update(i),j.push(l),k.push(f[f.length-1].slice()),this.bounds=p,this.vertexCount=o,this.points=k,this.arcLength=j,"dashes"in a){var y=a.dashes,z=y.slice();for(z.unshift(0),b=1;b<z.length;++b)z[b]=z[b-1]+z[b];var A=n(new Array(1024),[256,1,4]);for(b=0;b<256;++b){for(c=0;c<4;++c)A.set(b,0,c,0);1&m.le(z,z[z.length-1]*b/255)?A.set(b,0,0,0):A.set(b,0,0,255)}this.texture.setPixels(A)}}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=l(a.value[0],a.value[1],a.value[2],0),c=m.le(this.arcLength,b);if(c<0)return null;if(c===this.arcLength.length-1)return new f(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),c);for(var d=this.points[c],e=this.points[Math.min(c+1,this.points.length-1)],g=(b-this.arcLength[c])/(this.arcLength[c+1]-this.arcLength[c]),h=1-g,i=[0,0,0],j=0;j<3;++j)i[j]=h*d[j]+g*e[j];var k=Math.min(g<.5?c:c+1,this.points.length-1);return new f(b,i,k,this.points[k])}},{"./lib/shaders":139,"binary-search-bounds":53,"gl-buffer":128,"gl-texture2d":232,"gl-vao":236,"glsl-read-float":243,ndarray:427}],141:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null}b.exports=d},{}],142:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null}b.exports=d},{}],143:[function(a,b,c){function d(a){var b=new Float32Array(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b}b.exports=d},{}],144:[function(a,b,c){function d(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],145:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x}b.exports=d},{}],146:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],147:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}b.exports=d},{}],148:[function(a,b,c){function d(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],149:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null}b.exports=d},{}],150:[function(a,b,c){function d(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,p=b[0],q=b[1],r=b[2],s=d[0],t=d[1],u=d[2],v=c[0],w=c[1],x=c[2];return Math.abs(p-v)<1e-6&&Math.abs(q-w)<1e-6&&Math.abs(r-x)<1e-6?e(a):(l=p-v,m=q-w,n=r-x,o=1/Math.sqrt(l*l+m*m+n*n),l*=o,m*=o,n*=o,f=t*n-u*m,g=u*l-s*n,h=s*m-t*l,o=Math.sqrt(f*f+g*g+h*h),o?(o=1/o,f*=o,g*=o,h*=o):(f=0,g=0,h=0),i=m*h-n*g,j=n*f-l*h,k=l*g-m*f,o=Math.sqrt(i*i+j*j+k*k),o?(o=1/o,i*=o,j*=o,k*=o):(i=0,j=0,k=0),a[0]=f,a[1]=i,a[2]=l,a[3]=0,a[4]=g,a[5]=j,a[6]=m,a[7]=0,a[8]=h,a[9]=k,a[10]=n,a[11]=0,a[12]=-(f*p+g*q+h*r),a[13]=-(i*p+j*q+k*r),a[14]=-(l*p+m*q+n*r),a[15]=1,a)}var e=a("./identity");b.exports=d},{"./identity":148}],151:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a}b.exports=d},{}],152:[function(a,b,c){function d(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a}b.exports=d},{}],153:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=d[0],D=d[1],E=d[2],F=Math.sqrt(C*C+D*D+E*E);return Math.abs(F)<1e-6?null:(F=1/F,C*=F,D*=F,E*=F,e=Math.sin(c),f=Math.cos(c),g=1-f,h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,a[0]=h*t+l*u+p*v,a[1]=i*t+m*u+q*v,a[2]=j*t+n*u+r*v,a[3]=k*t+o*u+s*v,a[4]=h*w+l*x+p*y,a[5]=i*w+m*x+q*y,a[6]=j*w+n*x+r*y,a[7]=k*w+o*x+s*y,a[8]=h*z+l*A+p*B,a[9]=i*z+m*A+q*B,a[10]=j*z+n*A+r*B,a[11]=k*z+o*A+s*B,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)}b.exports=d},{}],154:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a}b.exports=d},{}],155:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a}b.exports=d},{}],156:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a}b.exports=d},{}],157:[function(a,b,c){function d(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}b.exports=d},{}],158:[function(a,b,c){function d(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a}b.exports=d},{}],159:[function(a,b,c){function d(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}b.exports=d},{}],160:[function(a,b,c){"use strict";function d(a,b){switch(b.length){case 0:break;case 1:a[0]=1/b[0];break;case 4:e(a,b);break;case 9:f(a,b);break;case 16:g(a,b);break;default:throw new Error("currently supports matrices up to 4x4")}return a}b.exports=d;var e=a("gl-mat2/invert"),f=a("gl-mat3/invert"),g=a("gl-mat4/invert")},{"gl-mat2/invert":141,"gl-mat3/invert":142,"gl-mat4/invert":149}],161:[function(a,b,c){c.glMatrix=a("./gl-matrix/common.js"),c.mat2=a("./gl-matrix/mat2.js"),c.mat2d=a("./gl-matrix/mat2d.js"),c.mat3=a("./gl-matrix/mat3.js"),c.mat4=a("./gl-matrix/mat4.js"),c.quat=a("./gl-matrix/quat.js"),c.vec2=a("./gl-matrix/vec2.js"),c.vec3=a("./gl-matrix/vec3.js"),c.vec4=a("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":162,"./gl-matrix/mat2.js":163,"./gl-matrix/mat2d.js":164,"./gl-matrix/mat3.js":165,"./gl-matrix/mat4.js":166,"./gl-matrix/quat.js":167,"./gl-matrix/vec2.js":168,"./gl-matrix/vec3.js":169,"./gl-matrix/vec4.js":170}],162:[function(a,b,c){var d={};d.EPSILON=1e-6,d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,d.RANDOM=Math.random,d.ENABLE_SIMD=!1,d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this,d.USE_SIMD=d.ENABLE_SIMD&&d.SIMD_AVAILABLE,d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var e=Math.PI/180;d.toRadian=function(a){return a*e},d.equals=function(a,b){return Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},b.exports=d},{}],163:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},b.exports=e},{"./common.js":162}],164:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.fromValues=function(a,b,c,e,f,g){var h=new d.ARRAY_TYPE(6);return h[0]=a,h[1]=b,h[2]=c,h[3]=e,h[4]=f,h[5]=g,h},e.set=function(a,b,c,d,e,f,g){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=b[0],k=b[1],l=b[2],m=b[3],n=b[4],o=b[5];return Math.abs(c-j)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(e-k)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(g-m)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(h-n)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(i-o)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))},b.exports=e},{"./common.js":162}],165:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromValues=function(a,b,c,e,f,g,h,i,j){var k=new d.ARRAY_TYPE(9);return k[0]=a,k[1]=b,k[2]=c,k[3]=e,k[4]=f,k[5]=g,k[6]=h,k[7]=i,k[8]=j,k},e.set=function(a,b,c,d,e,f,g,h,i,j){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,
a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=a[6],t=b[7],u=b[8];return Math.abs(c-m)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(e-n)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(f-o)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(o))&&Math.abs(g-p)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(h-q)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(i-r)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(j-s)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(s))&&Math.abs(k-t)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(t))&&Math.abs(l-u)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(u))},b.exports=e},{"./common.js":162}],166:[function(a,b,c){var d=a("./common.js"),e={scalar:{},SIMD:{}};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.fromValues=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=new d.ARRAY_TYPE(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=e,r[4]=f,r[5]=g,r[6]=h,r[7]=i,r[8]=j,r[9]=k,r[10]=l,r[11]=m,r[12]=n,r[13]=o,r[14]=p,r[15]=q,r},e.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.scalar.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.SIMD.transpose=function(a,b){var c,d,e,f,g,h,i,j,k,l;return c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12),g=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),i=SIMD.Float32x4.shuffle(g,h,0,2,4,6),j=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,0,i),SIMD.Float32x4.store(a,4,j),g=SIMD.Float32x4.shuffle(c,d,2,3,6,7),h=SIMD.Float32x4.shuffle(e,f,2,3,6,7),k=SIMD.Float32x4.shuffle(g,h,0,2,4,6),l=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,8,k),SIMD.Float32x4.store(a,12,l),a},e.transpose=d.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.SIMD.invert=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=SIMD.Float32x4.load(b,0),n=SIMD.Float32x4.load(b,4),o=SIMD.Float32x4.load(b,8),p=SIMD.Float32x4.load(b,12);return g=SIMD.Float32x4.shuffle(m,n,0,1,4,5),d=SIMD.Float32x4.shuffle(o,p,0,1,4,5),c=SIMD.Float32x4.shuffle(g,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,g,1,3,5,7),g=SIMD.Float32x4.shuffle(m,n,2,3,6,7),f=SIMD.Float32x4.shuffle(o,p,2,3,6,7),e=SIMD.Float32x4.shuffle(g,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,g,1,3,5,7),g=SIMD.Float32x4.mul(e,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.mul(d,g),i=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),h),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),g=SIMD.Float32x4.mul(d,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),h),k=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),h),j=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),j),j=SIMD.Float32x4.swizzle(j,2,3,0,1),g=SIMD.Float32x4.mul(c,d),g=SIMD.Float32x4.swizzle(g,1,0,3,2),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,g),k),g=SIMD.Float32x4.swizzle(g,2,3,0,1),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,g)),g=SIMD.Float32x4.mul(c,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),j),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),i),j=SIMD.Float32x4.sub(j,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.mul(c,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),i),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),k),l=SIMD.Float32x4.mul(c,h),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l),g=SIMD.Float32x4.reciprocalApproximation(l),l=SIMD.Float32x4.sub(SIMD.Float32x4.add(g,g),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(g,g))),(l=SIMD.Float32x4.swizzle(l,0,0,0,0))?(SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(l,h)),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(l,i)),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(l,j)),SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(l,k)),a):null},e.invert=d.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.SIMD.adjoint=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12);return k=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),g=SIMD.Float32x4.shuffle(k,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,k,1,3,5,7),k=SIMD.Float32x4.shuffle(c,d,2,3,6,7),j=SIMD.Float32x4.shuffle(e,f,2,3,6,7),i=SIMD.Float32x4.shuffle(k,j,0,2,4,6),j=SIMD.Float32x4.shuffle(j,k,1,3,5,7),k=SIMD.Float32x4.mul(i,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.mul(h,k),m=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),l),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),k=SIMD.Float32x4.mul(h,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),l),o=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),l),n=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),k=SIMD.Float32x4.mul(g,h),k=SIMD.Float32x4.swizzle(k,1,0,3,2),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,k),o),k=SIMD.Float32x4.swizzle(k,2,3,0,1),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,k)),k=SIMD.Float32x4.mul(g,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),n),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),m),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.mul(g,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),m),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),o),SIMD.Float32x4.store(a,0,l),SIMD.Float32x4.store(a,4,m),SIMD.Float32x4.store(a,8,n),SIMD.Float32x4.store(a,12,o),a},e.adjoint=d.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.SIMD.multiply=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4.load(c,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),g))));SIMD.Float32x4.store(a,0,i);var j=SIMD.Float32x4.load(c,4),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,3,3,3,3),g))));SIMD.Float32x4.store(a,4,k);var l=SIMD.Float32x4.load(c,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),g))));SIMD.Float32x4.store(a,8,m);var n=SIMD.Float32x4.load(c,12),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,3,3,3,3),g))));return SIMD.Float32x4.store(a,12,o),a},e.scalar.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.multiply=d.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.SIMD.translate=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]),d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(h,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(h,1,1,1,1)),f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(h,2,2,2,2));var i=SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,g)));return SIMD.Float32x4.store(a,12,i),a},e.translate=d.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.SIMD.scale=function(a,b,c){var d,e,f,g=SIMD.Float32x4(c[0],c[1],c[2],0);return d=SIMD.Float32x4.load(b,0),SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,0,0,0,0))),e=SIMD.Float32x4.load(b,4),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(g,1,1,1,1))),f=SIMD.Float32x4.load(b,8),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2))),a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.scale=d.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.scalar.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.SIMD.rotateX=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateX=d.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.SIMD.rotateY=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(g,e))),a},e.rotateY=d.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.SIMD.rotateZ=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,4);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateZ=d.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},e.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;return c>0?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d),a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a[9]=b[9]+c[9],a[10]=b[10]+c[10],a[11]=b[11]+c[11],a[12]=b[12]+c[12],a[13]=b[13]+c[13],a[14]=b[14]+c[14],a[15]=b[15]+c[15],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a[9]=b[9]-c[9],a[10]=b[10]-c[10],a[11]=b[11]-c[11],a[12]=b[12]-c[12],a[13]=b[13]-c[13],a[14]=b[14]-c[14],a[15]=b[15]-c[15],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a[9]=b[9]+c[9]*d,a[10]=b[10]+c[10]*d,a[11]=b[11]+c[11]*d,a[12]=b[12]+c[12]*d,a[13]=b[13]+c[13]*d,a[14]=b[14]+c[14]*d,a[15]=b[15]+c[15]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],x=b[4],y=b[5],z=b[6],A=b[7],B=b[8],C=b[9],D=b[10],E=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return Math.abs(c-t)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(e-u)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-v)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(g-w)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(h-x)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(i-y)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(j-z)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(k-A)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(s-I)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))},b.exports=e},{"./common.js":162}],167:[function(a,b,c){var d=a("./common.js"),e=a("./mat3.js"),f=a("./vec3.js"),g=a("./vec4.js"),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return i<-.999999?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);return 0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0),c},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){
return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},h.exactEquals=g.exactEquals,h.equals=g.equals,b.exports=h},{"./common.js":162,"./mat3.js":165,"./vec3.js":169,"./vec4.js":170}],168:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},e.equals=function(a,b){var c=a[0],e=a[1],f=b[0],g=b[1];return Math.abs(c-f)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))},b.exports=e},{"./common.js":162}],169:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))},b.exports=e},{"./common.js":162}],170:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a[3]=Math.ceil(b[3]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a[3]=Math.floor(b[3]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a[3]=Math.round(b[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},b.exports=e},{"./common.js":162}],171:[function(a,b,c){"use strict";function d(a,b){for(var c=[0,0,0,0],d=0;d<4;++d)for(var e=0;e<4;++e)c[e]+=a[4*d+e]*b[d];return c}function e(a,b,c,e,f){for(var g=d(e,d(c,d(b,[a[0],a[1],a[2],1]))),h=0;h<3;++h)g[h]/=g[3];return[.5*f[0]*(1+g[0]),.5*f[1]*(1-g[1])]}function f(a,b){if(2===a.length){for(var c=0,d=0,e=0;e<2;++e)c+=Math.pow(b[e]-a[0][e],2),d+=Math.pow(b[e]-a[1][e],2);return c=Math.sqrt(c),d=Math.sqrt(d),c+d<1e-6?[1,0]:[d/(c+d),c/(d+c)]}if(3===a.length){var f=[0,0];return j(a[0],a[1],a[2],b,f),i(a,f)}return[]}function g(a,b){for(var c=[0,0,0],d=0;d<a.length;++d)for(var e=a[d],f=b[d],g=0;g<3;++g)c[g]+=f*e[g];return c}function h(a,b,c,d,h,i){if(1===a.length)return[0,a[0].slice()];for(var j=new Array(a.length),k=0;k<a.length;++k)j[k]=e(a[k],c,d,h,i);for(var l=0,m=1/0,k=0;k<j.length;++k){for(var n=0,o=0;o<2;++o)n+=Math.pow(j[k][o]-b[o],2);n<m&&(m=n,l=k)}for(var p=f(j,b),q=0,k=0;k<3;++k){if(p[k]<-.001||p[k]>1.0001)return null;q+=p[k]}return Math.abs(q-1)>.001?null:[l,g(a,p),p]}var i=a("barycentric"),j=a("polytope-closest-point/lib/closest_point_2d.js");b.exports=h},{barycentric:36,"polytope-closest-point/lib/closest_point_2d.js":444}],172:[function(a,b,c){var d="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",e="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",g="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",i="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",j="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",k="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",l="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",m="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",n="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n";c.meshShader={vertex:d,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.wireShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.pointShader={vertex:h,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},c.pickShader={vertex:j,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},c.pointPickShader={vertex:l,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},c.contourShader={vertex:m,fragment:n,attributes:[{name:"position",type:"vec3"}]}},{}],173:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){this.gl=a,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=c,this.lineShader=d,this.pointShader=e,this.pickShader=f,this.pointPickShader=g,this.contourShader=h,this.trianglePositions=i,this.triangleColors=k,this.triangleNormals=m,this.triangleUVs=l,this.triangleIds=j,this.triangleVAO=n,this.triangleCount=0,this.lineWidth=1,this.edgePositions=o,this.edgeColors=q,this.edgeUVs=r,this.edgeIds=p,this.edgeVAO=s,this.edgeCount=0,this.pointPositions=t,this.pointColors=v,this.pointUVs=w,this.pointSizes=x,this.pointIds=u,this.pointVAO=y,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=z,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=J,this._view=J,this._projection=J,this._resolution=[1,1]}function e(a){for(var b=y({colormap:a,nshades:256,format:"rgba"}),c=new Uint8Array(1024),d=0;d<256;++d){for(var e=b[d],f=0;f<3;++f)c[4*d+f]=e[f];c[4*d+3]=255*e[3]}return x(c,[256,256,4],[4,0,1])}function f(a,b,c){for(var d=new Array(b),e=0;e<b;++e)d[e]=0;for(var f=a.length,e=0;e<f;++e)for(var g=a[e],h=0;h<g.length;++h)d[g[h]]=c[e];return d}function g(a){for(var b=a.length,c=new Array(b),d=0;d<b;++d)c[d]=a[d][2];return c}function h(a){var b=q(a,D);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.normal.location=4,b}function i(a){var b=q(a,E);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b}function j(a){var b=q(a,F);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.pointSize.location=4,b}function k(a){var b=q(a,G);return b.attributes.position.location=0,b.attributes.id.location=1,b}function l(a){var b=q(a,H);return b.attributes.position.location=0,b.attributes.id.location=1,b.attributes.pointSize.location=4,b}function m(a){var b=q(a,I);return b.attributes.position.location=0,b}function n(a){var b=a.gl,c=h(b),e=i(b),f=j(b),g=k(b),n=l(b),o=m(b),p=t(b,x(new Uint8Array([255,255,255,255]),[1,1,4]));p.generateMipmap(),p.minFilter=b.LINEAR_MIPMAP_LINEAR,p.magFilter=b.LINEAR;var q=r(b),u=r(b),v=r(b),w=r(b),y=r(b),z=s(b,[{buffer:q,type:b.FLOAT,size:3},{buffer:y,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:b.FLOAT,size:4},{buffer:v,type:b.FLOAT,size:2},{buffer:w,type:b.FLOAT,size:3}]),A=r(b),B=r(b),C=r(b),D=r(b),E=s(b,[{buffer:A,type:b.FLOAT,size:3},{buffer:D,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:b.FLOAT,size:4},{buffer:C,type:b.FLOAT,size:2}]),F=r(b),G=r(b),H=r(b),I=r(b),J=r(b),K=s(b,[{buffer:F,type:b.FLOAT,size:3},{buffer:J,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:G,type:b.FLOAT,size:4},{buffer:H,type:b.FLOAT,size:2},{buffer:I,type:b.FLOAT,size:1}]),L=r(b),M=s(b,[{buffer:L,type:b.FLOAT,size:3}]),N=new d(b,p,c,e,f,g,n,o,q,y,u,v,w,z,A,D,B,C,E,F,J,G,H,I,K,L,M);return N.update(a),N}var o=1e-6,p=1e-6,q=a("gl-shader"),r=a("gl-buffer"),s=a("gl-vao"),t=a("gl-texture2d"),u=a("normals"),v=a("gl-mat4/multiply"),w=a("gl-mat4/invert"),x=a("ndarray"),y=a("colormap"),z=a("simplicial-complex-contour"),A=a("typedarray-pool"),B=a("./lib/shaders"),C=a("./lib/closest-point"),D=B.meshShader,E=B.wireShader,F=B.pointShader,G=B.pickShader,H=B.pointPickShader,I=B.contourShader,J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K=d.prototype;K.isOpaque=function(){return this.opacity>=1},K.isTransparent=function(){return this.opacity<1},K.pickSlots=1,K.setPickBase=function(a){this.pickId=a},K.highlight=function(a){if(!a||!this.contourEnable)return void(this.contourCount=0);for(var b=z(this.cells,this.intensity,a.intensity),c=b.cells,d=b.vertexIds,e=b.vertexWeights,f=c.length,g=A.mallocFloat32(6*f),h=0,i=0;i<f;++i)for(var j=c[i],k=0;k<2;++k){var l=j[0];2===j.length&&(l=j[k]);for(var m=d[l][0],n=d[l][1],o=e[l],p=1-o,q=this.positions[m],r=this.positions[n],s=0;s<3;++s)g[h++]=o*q[s]+p*r[s]}this.contourCount=h/3|0,this.contourPositions.update(g.subarray(0,h)),A.free(g)},K.update=function(a){a=a||{};var b=this.gl;this.dirty=!0,"contourEnable"in a&&(this.contourEnable=a.contourEnable),"contourColor"in a&&(this.contourColor=a.contourColor),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"lightPosition"in a&&(this.lightPosition=a.lightPosition),"opacity"in a&&(this.opacity=a.opacity),"ambient"in a&&(this.ambientLight=a.ambient),"diffuse"in a&&(this.diffuseLight=a.diffuse),"specular"in a&&(this.specularLight=a.specular),"roughness"in a&&(this.roughness=a.roughness),"fresnel"in a&&(this.fresnel=a.fresnel),a.texture?(this.texture.dispose(),this.texture=t(b,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(e(a.colormap)),this.texture.generateMipmap());var c=a.cells,d=a.positions;if(d&&c){var h=[],i=[],j=[],k=[],l=[],m=[],n=[],q=[],r=[],s=[],v=[],w=[],x=[],y=[];this.cells=c,this.positions=d;var z=a.vertexNormals,A=a.cellNormals,B=void 0===a.vertexNormalsEpsilon?o:a.vertexNormalsEpsilon,C=void 0===a.faceNormalsEpsilon?p:a.faceNormalsEpsilon;a.useFacetNormals&&!A&&(A=u.faceNormals(c,d,C)),A||z||(z=u.vertexNormals(c,d,B));var D=a.vertexColors,E=a.cellColors,F=a.meshColor||[1,1,1,1],G=a.vertexUVs,H=a.vertexIntensity,I=a.cellUVs,J=a.cellIntensity,K=1/0,L=-(1/0);if(!G&&!I)if(H)for(var M=0;M<H.length;++M){var N=H[M];K=Math.min(K,N),L=Math.max(L,N)}else if(J)for(var M=0;M<J.length;++M){var N=J[M];K=Math.min(K,N),L=Math.max(L,N)}else for(var M=0;M<d.length;++M){var N=d[M][2];K=Math.min(K,N),L=Math.max(L,N)}H?this.intensity=H:J?this.intensity=f(c,d.length,J):this.intensity=g(d);var O=a.pointSizes,P=a.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(var M=0;M<d.length;++M)for(var Q=d[M],R=0;R<3;++R)!isNaN(Q[R])&&isFinite(Q[R])&&(this.bounds[0][R]=Math.min(this.bounds[0][R],Q[R]),this.bounds[1][R]=Math.max(this.bounds[1][R],Q[R]));var S=0,T=0,U=0;a:for(var M=0;M<c.length;++M){var V=c[M];switch(V.length){case 1:for(var W=V[0],Q=d[W],R=0;R<3;++R)if(isNaN(Q[R])||!isFinite(Q[R]))continue a;s.push(Q[0],Q[1],Q[2]);var X;X=D?D[W]:E?E[M]:F,3===X.length?v.push(X[0],X[1],X[2],1):v.push(X[0],X[1],X[2],X[3]);var Y;Y=G?G[W]:H?[(H[W]-K)/(L-K),0]:I?I[M]:J?[(J[M]-K)/(L-K),0]:[(Q[2]-K)/(L-K),0],w.push(Y[0],Y[1]),O?x.push(O[W]):x.push(P),y.push(M),U+=1;break;case 2:for(var R=0;R<2;++R)for(var W=V[R],Q=d[W],Z=0;Z<3;++Z)if(isNaN(Q[Z])||!isFinite(Q[Z]))continue a;for(var R=0;R<2;++R){var W=V[R],Q=d[W];m.push(Q[0],Q[1],Q[2]);var X;X=D?D[W]:E?E[M]:F,3===X.length?n.push(X[0],X[1],X[2],1):n.push(X[0],X[1],X[2],X[3]);var Y;Y=G?G[W]:H?[(H[W]-K)/(L-K),0]:I?I[M]:J?[(J[M]-K)/(L-K),0]:[(Q[2]-K)/(L-K),0],q.push(Y[0],Y[1]),r.push(M)}T+=1;break;case 3:for(var R=0;R<3;++R)for(var W=V[R],Q=d[W],Z=0;Z<3;++Z)if(isNaN(Q[Z])||!isFinite(Q[Z]))continue a;for(var R=0;R<3;++R){var W=V[R],Q=d[W];h.push(Q[0],Q[1],Q[2]);var X;X=D?D[W]:E?E[M]:F,3===X.length?i.push(X[0],X[1],X[2],1):i.push(X[0],X[1],X[2],X[3]);var Y;Y=G?G[W]:H?[(H[W]-K)/(L-K),0]:I?I[M]:J?[(J[M]-K)/(L-K),0]:[(Q[2]-K)/(L-K),0],k.push(Y[0],Y[1]);var $;$=z?z[W]:A[M],j.push($[0],$[1],$[2]),l.push(M)}S+=1}}this.pointCount=U,this.edgeCount=T,this.triangleCount=S,this.pointPositions.update(s),this.pointColors.update(v),this.pointUVs.update(w),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(y)),this.edgePositions.update(m),this.edgeColors.update(n),this.edgeUVs.update(q),this.edgeIds.update(new Uint32Array(r)),this.trianglePositions.update(h),this.triangleColors.update(i),this.triangleUVs.update(k),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(l))}},K.drawTransparent=K.draw=function(a){a=a||{};for(var b=this.gl,c=a.model||J,d=a.view||J,e=a.projection||J,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;g<3;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);var h={model:c,view:d,projection:e,clipBounds:f,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var i=new Array(16);v(i,h.view,h.model),v(i,h.projection,i),w(i,i);for(var g=0;g<3;++g)h.eyePosition[g]=i[12+g]/i[15];for(var j=i[15],g=0;g<3;++g)j+=this.lightPosition[g]*i[4*g+3];for(var g=0;g<3;++g){for(var k=i[12+g],l=0;l<3;++l)k+=i[4*l+g]*this.lightPosition[l];h.lightPosition[g]=k/j}if(this.triangleCount>0){var m=this.triShader;m.bind(),m.uniforms=h,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var m=this.lineShader;m.bind(),m.uniforms=h,this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var m=this.pointShader;m.bind(),m.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var m=this.contourShader;m.bind(),m.uniforms=h,this.contourVAO.bind(),b.drawArrays(b.LINES,0,this.contourCount),this.contourVAO.unbind()}},K.drawPick=function(a){a=a||{};for(var b=this.gl,c=a.model||J,d=a.view||J,e=a.projection||J,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;g<3;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c),this._view=[].slice.call(d),this._projection=[].slice.call(e),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var h={model:c,view:d,projection:e,clipBounds:f,pickId:this.pickId/255},i=this.pickShader;if(i.bind(),i.uniforms=h,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var i=this.pointPickShader;i.bind(),i.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}},K.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;for(var b=a.value[0]+256*a.value[1]+65536*a.value[2],c=this.cells[b],d=this.positions,e=new Array(c.length),f=0;f<c.length;++f)e[f]=d[c[f]];var g=C(e,[a.coord[0],this._resolution[1]-a.coord[1]],this._model,this._view,this._projection,this._resolution);if(!g)return null;for(var h=g[2],i=0,f=0;f<c.length;++f)i+=h[f]*this.intensity[c[f]];return{position:g[1],index:c[g[0]],cell:c,cellId:b,intensity:i,dataCoordinate:this.positions[c[g[0]]]}},K.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),
this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=n},{"./lib/closest-point":171,"./lib/shaders":172,colormap:80,"gl-buffer":128,"gl-mat4/invert":149,"gl-mat4/multiply":151,"gl-shader":220,"gl-texture2d":232,"gl-vao":236,ndarray:427,normals:429,"simplicial-complex-contour":474,"typedarray-pool":496}],174:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl,c=f(b,[0,0,0,1,1,0,1,1]),e=g(b,h.boxVert,h.lineFrag);return new d(a,c,e)}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawBox=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g){var h=this.plot,i=this.shader,j=h.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,i.uniforms.lo=a,i.uniforms.hi=b,i.uniforms.color=g,j.drawArrays(j.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":177,"gl-buffer":128,"gl-shader":180}],175:[function(a,b,c){"use strict";function d(a,b,c,d){this.plot=a,this.vbo=b,this.shader=c,this.tickShader=d,this.ticks=[[],[]]}function e(a,b){return a-b}function f(a){var b=a.gl,c=g(b),e=h(b,j.gridVert,j.gridFrag),f=h(b,j.tickVert,j.gridFrag),i=new d(a,c,e,f);return i}b.exports=f;var g=a("gl-buffer"),h=a("gl-shader"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.draw=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){for(var d=this.plot,e=this.vbo,f=this.shader,g=this.ticks,h=d.gl,i=d._tickBounds,j=d.dataBox,k=d.viewBox,l=d.gridLineWidth,m=d.gridLineColor,n=d.gridLineEnable,o=d.pixelRatio,p=0;p<2;++p){var q=i[p],r=i[p+2],s=r-q,t=.5*(j[p+2]+j[p]),u=j[p+2]-j[p];b[p]=2*s/u,a[p]=2*(q-t)/u}f.bind(),e.bind(),f.attributes.dataCoord.pointer(),f.uniforms.dataShift=a,f.uniforms.dataScale=b;for(var v=0,p=0;p<2;++p){c[0]=c[1]=0,c[p]=1,f.uniforms.dataAxis=c,f.uniforms.lineWidth=l[p]/(k[p+2]-k[p])*o,f.uniforms.color=m[p];var w=6*g[p].length;n[p]&&w&&h.drawArrays(h.TRIANGLES,v,w),v+=w}}}(),k.drawTickMarks=function(){var a=[0,0],b=[0,0],c=[1,0],d=[0,1],f=[0,0],g=[0,0];return function(){for(var h=this.plot,j=this.vbo,k=this.tickShader,l=this.ticks,m=h.gl,n=h._tickBounds,o=h.dataBox,p=h.viewBox,q=h.pixelRatio,r=h.screenBox,s=r[2]-r[0],t=r[3]-r[1],u=p[2]-p[0],v=p[3]-p[1],w=0;w<2;++w){var x=n[w],y=n[w+2],z=y-x,A=.5*(o[w+2]+o[w]),B=o[w+2]-o[w];b[w]=2*z/B,a[w]=2*(x-A)/B}b[0]*=u/s,a[0]*=u/s,b[1]*=v/t,a[1]*=v/t,k.bind(),j.bind(),k.attributes.dataCoord.pointer();var C=k.uniforms;C.dataShift=a,C.dataScale=b;var D=h.tickMarkLength,E=h.tickMarkWidth,F=h.tickMarkColor,G=0,H=6*l[0].length,I=Math.min(i.ge(l[0],(o[0]-n[0])/(n[2]-n[0]),e),l[0].length),J=Math.min(i.gt(l[0],(o[2]-n[0])/(n[2]-n[0]),e),l[0].length),K=G+6*I,L=6*Math.max(0,J-I),M=Math.min(i.ge(l[1],(o[1]-n[1])/(n[3]-n[1]),e),l[1].length),N=Math.min(i.gt(l[1],(o[3]-n[1])/(n[3]-n[1]),e),l[1].length),O=H+6*M,P=6*Math.max(0,N-M);f[0]=2*(p[0]-D[1])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[1]*q/s,g[1]=E[1]*q/t,P&&(C.color=F[1],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,O,P)),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[1]-D[0])/t-1,g[0]=E[0]*q/s,g[1]=D[0]*q/t,L&&(C.color=F[0],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,K,L)),f[0]=2*(p[2]+D[3])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[3]*q/s,g[1]=E[3]*q/t,P&&(C.color=F[3],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,O,P)),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[3]+D[2])/t-1,g[0]=E[2]*q/s,g[1]=D[2]*q/t,L&&(C.color=F[2],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,K,L))}}(),k.update=function(){var a=[1,1,-1,-1,1,-1],b=[1,-1,1,1,-1,-1];return function(c){for(var d=c.ticks,e=c.bounds,f=new Float32Array(18*(d[0].length+d[1].length)),g=(this.plot.zeroLineEnable,0),h=[[],[]],i=0;i<2;++i)for(var j=h[i],k=d[i],l=e[i],m=e[i+2],n=0;n<k.length;++n){var o=(k[n].x-l)/(m-l);j.push(o);for(var p=0;p<6;++p)f[g++]=o,f[g++]=a[p],f[g++]=b[p]}this.ticks=h,this.vbo.update(f)}}(),k.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":177,"binary-search-bounds":179,"gl-buffer":128,"gl-shader":180}],176:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl,c=f(b,[-1,-1,-1,1,1,-1,1,1]),e=g(b,h.lineVert,h.lineFrag),i=new d(a,c,e);return i}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawLine=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g,h){var i=this.plot,j=this.shader,k=i.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,j.uniforms.start=a,j.uniforms.end=b,j.uniforms.width=g*i.pixelRatio,j.uniforms.color=h,k.drawArrays(k.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":177,"gl-buffer":128,"gl-shader":180}],177:[function(a,b,c){"use strict";var d="precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";b.exports={lineVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:d,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:d,gridVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:d,boxVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],178:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function e(a){var b=a.gl,c=f(b),e=g(b,j.textVert,j.textFrag),h=new d(a,c,e);return h}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("text-cache"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.drawTicks=function(){var a=[0,0],b=[0,0],c=[0,0];return function(d){var e=this.plot,f=this.shader,g=this.tickX[d],h=this.tickOffset[d],j=e.gl,k=e.viewBox,l=e.dataBox,m=e.screenBox,n=e.pixelRatio,o=e.tickEnable,p=e.tickPad,q=e.tickColor,r=e.tickAngle,s=e.labelEnable,t=e.labelPad,u=e.labelColor,v=e.labelAngle,w=this.labelOffset[d],x=this.labelCount[d],y=i.lt(g,l[d]),z=i.le(g,l[d+2]);a[0]=a[1]=0,a[d]=1,b[d]=(k[2+d]+k[d])/(m[2+d]-m[d])-1;var A=2/m[2+(1^d)]-m[1^d];b[1^d]=A*k[1^d]-1,o[d]&&(b[1^d]-=A*n*p[d],y<z&&h[z]>h[y]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d],f.uniforms.angle=r[d],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d]&&x&&(b[1^d]-=A*n*t[d],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d],f.uniforms.angle=v[d],j.drawArrays(j.TRIANGLES,w,x)),b[1^d]=A*k[2+(1^d)]-1,o[d+2]&&(b[1^d]+=A*n*p[d+2],y<z&&h[z]>h[y]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d+2],f.uniforms.angle=r[d+2],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d+2]&&x&&(b[1^d]+=A*n*t[d+2],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d+2],f.uniforms.angle=v[d+2],j.drawArrays(j.TRIANGLES,w,x))}}(),k.drawTitle=function(){var a=[0,0],b=[0,0];return function(){var c=this.plot,d=this.shader,e=c.gl,f=c.screenBox,g=c.titleCenter,h=c.titleAngle,i=c.titleColor,j=c.pixelRatio;if(this.titleCount){for(var k=0;k<2;++k)b[k]=2*(g[k]*j-f[k])/(f[2+k]-f[k])-1;d.bind(),d.uniforms.dataAxis=a,d.uniforms.screenOffset=b,d.uniforms.angle=h,d.uniforms.color=i,e.drawArrays(e.TRIANGLES,this.titleOffset,this.titleCount)}}}(),k.bind=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){var d=this.plot,e=this.shader,f=d._tickBounds,g=d.dataBox,h=d.screenBox,i=d.viewBox;e.bind();for(var j=0;j<2;++j){var k=f[j],l=f[j+2],m=l-k,n=.5*(g[j+2]+g[j]),o=g[j+2]-g[j],p=i[j],q=i[j+2],r=q-p,s=h[j],t=h[j+2],u=t-s;b[j]=2*m/o*r/u,a[j]=2*(k-n)/o*r/u}c[1]=2*d.pixelRatio/(h[3]-h[1]),c[0]=c[1]*(h[3]-h[1])/(h[2]-h[0]),e.uniforms.dataScale=b,e.uniforms.dataShift=a,e.uniforms.textScale=c,this.vbo.bind(),e.attributes.textCoordinate.pointer()}}(),k.update=function(a){var b,c,d,e,f,g=[],i=a.ticks,j=a.bounds;for(f=0;f<2;++f){var k=[Math.floor(g.length/3)],l=[-(1/0)],m=i[f];for(b=0;b<m.length;++b){var n=m[b],o=n.x,p=n.text,q=n.font||"sans-serif";e=n.fontSize||12;for(var r=1/(j[f+2]-j[f]),s=j[f],t=p.split("\n"),u=0;u<t.length;u++)for(d=h(q,t[u]).data,c=0;c<d.length;c+=2)g.push(d[c]*e,-d[c+1]*e-u*e*1.2,(o-s)*r);k.push(Math.floor(g.length/3)),l.push(o)}this.tickOffset[f]=k,this.tickX[f]=l}for(f=0;f<2;++f){for(this.labelOffset[f]=Math.floor(g.length/3),d=h(a.labelFont[f],a.labels[f],{textAlign:"center"}).data,e=a.labelSize[f],b=0;b<d.length;b+=2)g.push(d[b]*e,-d[b+1]*e,0);this.labelCount[f]=Math.floor(g.length/3)-this.labelOffset[f]}for(this.titleOffset=Math.floor(g.length/3),d=h(a.titleFont,a.title).data,e=a.titleSize,b=0;b<d.length;b+=2)g.push(d[b]*e,-d[b+1]*e,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},k.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":177,"binary-search-bounds":179,"gl-buffer":128,"gl-shader":180,"text-cache":488}],179:[function(a,b,c){arguments[4][72][0].apply(c,arguments)},{dup:72}],180:[function(a,b,c){"use strict";function d(a){this.gl=a,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink();var a,b=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),c=this.gl.lastAttribCount;if(b>c)for(a=c;a<b;a++)this.gl.enableVertexAttribArray(a);else if(c>b)for(a=b;a<c;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=b,this.gl.useProgram(this.program)},m.dispose=function(){for(var a=this.gl.lastAttribCount,b=0;b<a;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,v,w);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);var t,u=[],v=[],w=[];for(t=0;t<d.length;++t){var x=d[t];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;A<y;++A)z[A]=w.length,v.push(x.name+"["+A+"]"),"number"==typeof x.location?w.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?w.push(0|x.location[A]):w.push(-1);u.push({name:x.name,type:x.type,locations:z})}else u.push({name:x.name,type:x.type,locations:[w.length]}),v.push(x.name),"number"==typeof x.location?w.push(0|x.location):w.push(-1)}var B=0;for(t=0;t<w.length;++t)if(w[t]<0){for(;w.indexOf(B)>=0;)B+=1;w[t]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,u,w),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":181,"./lib/create-attributes":182,"./lib/create-uniforms":183,"./lib/reflect":184,"./lib/runtime-reflect":185,"./lib/shader-cache":186}],181:[function(a,b,c){function d(a,b,c){this.shortMessage=b||"",this.longMessage=c||"",this.rawError=a||"",this.message="gl-shader: "+(b||a||"")+(c?"\n"+c:""),this.stack=(new Error).stack}d.prototype=new Error,d.prototype.name="GLError",d.prototype.constructor=d,b.exports=d},{}],182:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._gl=a,this._wrapper=b,this._index=c,this._locations=d,this._dimension=e,this._constFunc=f}function e(a,b,c,e,f,g,h){for(var i=["gl","v"],j=[],k=0;k<f;++k)i.push("x"+k),j.push("x"+k);i.push("if(x0.length===void 0){return gl.vertexAttrib"+f+"f(v,"+j.join()+")}else{return gl.vertexAttrib"+f+"fv(v,x0)}");var l=Function.apply(null,i),m=new d(a,b,c,e,f,l);Object.defineProperty(g,h,{set:function(b){return a.disableVertexAttribArray(e[c]),l(a,e[c],b),b},get:function(){return m},enumerable:!0})}function f(a,b,c,d,f,g,h){for(var i=new Array(f),j=new Array(f),k=0;k<f;++k)e(a,b,c[k],d,f,i,k),j[k]=i[k];Object.defineProperty(i,"location",{set:function(a){if(Array.isArray(a))for(var b=0;b<f;++b)j[b].location=a[b];else for(var b=0;b<f;++b)j[b].location=a+b;return a},get:function(){for(var a=new Array(f),b=0;b<f;++b)a[b]=d[c[b]];return a},enumerable:!0}),i.pointer=function(b,e,g,h){b=b||a.FLOAT,e=!!e,g=g||f*f,h=h||0;for(var i=0;i<f;++i){var j=d[c[i]];a.vertexAttribPointer(j,f,b,e,g,h+i*f),a.enableVertexAttribArray(j)}};var l=new Array(f),m=a["vertexAttrib"+f+"fv"];Object.defineProperty(g,h,{set:function(b){for(var e=0;e<f;++e){var g=d[c[e]];if(a.disableVertexAttribArray(g),Array.isArray(b[0]))m.call(a,g,b[e]);else{for(var h=0;h<f;++h)l[h]=b[f*e+h];m.call(a,g,l)}}return b},get:function(){return i},enumerable:!0})}function g(a,b,c,d){for(var g={},i=0,j=c.length;i<j;++i){var k=c[i],l=k.name,m=k.type,n=k.locations;switch(m){case"bool":case"int":case"float":e(a,b,n[0],d,1,g,l);break;default:if(m.indexOf("vec")>=0){var o=m.charCodeAt(m.length-1)-48;if(o<2||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);e(a,b,n[0],d,o,g,l)}else{if(!(m.indexOf("mat")>=0))throw new h("","Unknown data type for attribute "+l+": "+m);var o=m.charCodeAt(m.length-1)-48;if(o<2||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);f(a,b,n,d,o,g,l)}}}return g}b.exports=g;var h=a("./GLError"),i=d.prototype;i.pointer=function(a,b,c,d){var e=this,f=e._gl,g=e._locations[e._index];f.vertexAttribPointer(g,e._dimension,a||f.FLOAT,!!b,c||0,d||0),f.enableVertexAttribArray(g)},i.set=function(a,b,c,d){return this._constFunc(this._locations[this._index],a,b,c,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(a){return a!==this._locations[this._index]&&(this._locations[this._index]=0|a,this._wrapper.program=null),0|a}})},{"./GLError":181}],183:[function(a,b,c){"use strict";function d(a){var b=new Function("y","return function(){return y}");return b(a)}function e(a,b){for(var c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function f(a,b,c,f){function i(c){var d=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}");return d(a,b,f)}function j(a,b,c){switch(c){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+b+"],obj"+a+")";case"float":return"gl.uniform1f(locations["+b+"],obj"+a+")";default:var d=c.indexOf("vec");if(!(0<=d&&d<=1&&c.length===4+d)){if(0===c.indexOf("mat")&&4===c.length){var e=c.charCodeAt(c.length-1)-48;if(e<2||e>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+e+"fv(locations["+b+"],false,obj"+a+")"}throw new h("","Unknown uniform data type for "+name+": "+c)}var e=c.charCodeAt(c.length-1)-48;if(e<2||e>4)throw new h("","Invalid data type");switch(c.charAt(0)){case"b":case"i":return"gl.uniform"+e+"iv(locations["+b+"],obj"+a+")";case"v":return"gl.uniform"+e+"fv(locations["+b+"],obj"+a+")";default:throw new h("","Unrecognized data type for vector "+name+": "+c)}}}function k(a,b){if("object"!=typeof b)return[[a,b]];var c=[];for(var d in b){var e=b[d],f=a;f+=parseInt(d)+""===d?"["+d+"]":"."+d,"object"==typeof e?c.push.apply(c,k(f,e)):c.push([f,e])}return c}function l(b){for(var d=["return function updateProperty(obj){"],e=k("",b),g=0;g<e.length;++g){var h=e[g],i=h[0],l=h[1];f[l]&&d.push(j(i,l,c[l].type))}d.push("return obj}");var m=new Function("gl","locations",d.join("\n"));return m(a,f)}function m(a){switch(a){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var b=a.indexOf("vec");if(0<=b&&b<=1&&a.length===4+b){var c=a.charCodeAt(a.length-1)-48;if(c<2||c>4)throw new h("","Invalid data type");return"b"===a.charAt(0)?e(c,!1):e(c,0)}if(0===a.indexOf("mat")&&4===a.length){var c=a.charCodeAt(a.length-1)-48;if(c<2||c>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+a);return e(c*c,0)}throw new h("","Unknown uniform data type for "+name+": "+a)}}function n(a,b,e){if("object"==typeof e){var g=o(e);Object.defineProperty(a,b,{get:d(g),set:l(e),enumerable:!0,configurable:!1})}else f[e]?Object.defineProperty(a,b,{get:i(e),set:l(e),enumerable:!0,configurable:!1}):a[b]=m(c[e].type)}function o(a){var b;if(Array.isArray(a)){b=new Array(a.length);for(var c=0;c<a.length;++c)n(b,c,a[c])}else{b={};for(var d in a)n(b,d,a[d])}return b}var p=g(c,!0);return{get:d(o(p)),set:l(p),enumerable:!0,configurable:!0}}var g=a("./reflect"),h=a("./GLError");b.exports=f},{"./GLError":181,"./reflect":184}],184:[function(a,b,c){"use strict";function d(a,b){for(var c={},d=0;d<a.length;++d)for(var e=a[d].name,f=e.split("."),g=c,h=0;h<f.length;++h){var i=f[h].split("[");if(i.length>1){i[0]in g||(g[i[0]]=[]),g=g[i[0]];for(var j=1;j<i.length;++j){var k=parseInt(i[j]);j<i.length-1||h<f.length-1?(k in g||(j<i.length-1?g[k]=[]:g[k]={}),g=g[k]):b?g[k]=d:g[k]=a[d].type}}else h<f.length-1?(i[0]in g||(g[i[0]]={}),g=g[i[0]]):b?g[i[0]]=d:g[i[0]]=a[d].type}return c}b.exports=d},{}],185:[function(a,b,c){"use strict";function d(a,b){if(!h){var c=Object.keys(g);h={};for(var d=0;d<c.length;++d){var e=c[d];h[a[e]]=g[e]}}return h[b]}function e(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),e=[],f=0;f<c;++f){var g=a.getActiveUniform(b,f);if(g){var h=d(a,g.type);if(g.size>1)for(var i=0;i<g.size;++i)e.push({name:g.name.replace("[0]","["+i+"]"),type:h});else e.push({name:g.name,type:h})}}return e}function f(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),e=[],f=0;f<c;++f){var g=a.getActiveAttrib(b,f);g&&e.push({name:g.name,type:d(a,g.type)})}return e}c.uniforms=e,c.attributes=f;var g={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},h=null},{}],186:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.id=a,this.src=b,this.type=c,this.shader=d,this.count=f,this.programs=[],this.cache=g}function e(a){this.gl=a,this.shaders=[{},{}],this.programs={}}function f(a,b,c){var d=a.createShader(b);if(a.shaderSource(d,c),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS)){var e=a.getShaderInfoLog(d);try{var f=l(e,c,b)}catch(a){throw console.warn("Failed to format compiler error: "+a),new k(e,"Error compiling shader:\n"+e)}throw new k(e,f["short"],f["long"])}return d}function g(a,b,c,d,e){var f=a.createProgram();a.attachShader(f,b),a.attachShader(f,c);for(var g=0;g<d.length;++g)a.bindAttribLocation(f,e[g],d[g]);if(a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS)){var h=a.getProgramInfoLog(f);throw new k(h,"Error linking program: "+h)}return f}function h(a){var b=n.get(a);return b||(b=new e(a),n.set(a,b)),b}function i(a,b,c){return h(a).getShaderReference(b,c)}function j(a,b,c,d,e){return h(a).getProgram(b,c,d,e)}c.shader=i,c.program=j;var k=a("./GLError"),l=a("gl-format-compiler-error"),m="undefined"==typeof WeakMap?a("weakmap-shim"):WeakMap,n=new m,o=0;d.prototype.dispose=function(){if(0===--this.count){for(var a=this.cache,b=a.gl,c=this.programs,d=0,e=c.length;d<e;++d){var f=a.programs[c[d]];f&&(delete a.programs[d],b.deleteProgram(f))}b.deleteShader(this.shader),delete a.shaders[this.type===b.FRAGMENT_SHADER|0][this.src]}};var p=e.prototype;p.getShaderReference=function(a,b){var c=this.gl,e=this.shaders[a===c.FRAGMENT_SHADER|0],g=e[b];if(g&&c.isShader(g.shader))g.count+=1;else{var h=f(c,a,b);g=e[b]=new d((o++),b,a,h,[],1,this)}return g},p.getProgram=function(a,b,c,d){var e=[a.id,b.id,c.join(":"),d.join(":")].join("@"),f=this.programs[e];return f&&this.gl.isProgram(f)||(this.programs[e]=f=g(this.gl,a.shader,b.shader,c,d),a.programs.push(e),b.programs.push(e)),f}},{"./GLError":181,"gl-format-compiler-error":136,"weakmap-shim":517}],187:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.pickBuffer=b,this.screenBox=[0,0,a.drawingBufferWidth,a.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-(1/0),-(1/0)],this["static"]=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function e(a){for(var b=a.slice(),c=0;c<b.length;++c)b[c]=b[c].slice();return b}function f(a,b){return a.x-b.x}function g(a){var b=a.gl,c=h(b,[b.drawingBufferWidth,b.drawingBufferHeight]),e=new d(b,c);return e.grid=i(e),e.text=j(e),e.line=k(e),e.box=l(e),e.update(a),e}b.exports=g;var h=a("gl-select-static"),i=a("./lib/grid"),j=a("./lib/text"),k=a("./lib/line"),l=a("./lib/box"),m=d.prototype;m.setDirty=function(){this.dirty=this.pickDirty=!0},m.setOverlayDirty=function(){this.dirty=!0},m.nextDepthValue=function(){return this._depthCounter++/65536},m.draw=function(){return function(){var a=this.gl,b=this.screenBox,c=this.viewBox,d=this.dataBox,e=this.pixelRatio,f=this.grid,g=this.line,h=this.text,i=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){this.dirty=!1,a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),a.disable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.depthMask(!1),a.enable(a.BLEND),a.blendEquation(a.FUNC_ADD,a.FUNC_ADD),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var j=this.borderColor;a.clearColor(j[0]*j[3],j[1]*j[3],j[2]*j[3],j[3]),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),a.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);var k=this.backgroundColor;a.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),a.clear(a.COLOR_BUFFER_BIT),f.draw();var l=this.zeroLineEnable,m=this.zeroLineColor,n=this.zeroLineWidth;if(l[0]||l[1]){g.bind();for(var o=0;o<2;++o)if(l[o]&&d[o]<=0&&d[o+2]>=0){var p=b[o]-d[o]*(b[o+2]-b[o])/(d[o+2]-d[o]);0===o?g.drawLine(p,b[1],p,b[3],n[o],m[o]):g.drawLine(b[0],p,b[2],p,n[o],m[o])}}for(var o=0;o<i.length;++o)i[o].draw();a.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]),a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.grid.drawTickMarks(),g.bind();var q=this.borderLineEnable,r=this.borderLineWidth,s=this.borderLineColor;q[1]&&g.drawLine(c[0],c[1]-.5*r[1]*e,c[0],c[3]+.5*r[3]*e,r[1],s[1]),q[0]&&g.drawLine(c[0]-.5*r[0]*e,c[1],c[2]+.5*r[2]*e,c[1],r[0],s[0]),q[3]&&g.drawLine(c[2],c[1]-.5*r[1]*e,c[2],c[3]+.5*r[3]*e,r[3],s[3]),q[2]&&g.drawLine(c[0]-.5*r[0]*e,c[3],c[2]+.5*r[2]*e,c[3],r[2],s[2]),h.bind();for(var o=0;o<2;++o)h.drawTicks(o);this.titleEnable&&h.drawTitle();for(var t=this.overlays,o=0;o<t.length;++o)t[o].draw();a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.depthMask(!0)}}}(),m.drawPick=function(){return function(){if(!this["static"]){var a=this.pickBuffer;this.gl,this._pickTimeout=null,a.begin();for(var b=1,c=this.objects,d=0;d<c.length;++d)b=c[d].drawPick(b);a.end()}}}(),m.pick=function(){return function(a,b){if(!this["static"]){var c=this.pixelRatio,d=this.pickPixelRatio,e=this.viewBox,f=0|Math.round((a-e[0]/c)*d),g=0|Math.round((b-e[1]/c)*d),h=this.pickBuffer.query(f,g,this.pickRadius);if(!h)return null;for(var i=h.id+(h.value[0]<<8)+(h.value[1]<<16)+(h.value[2]<<24),j=this.objects,k=0;k<j.length;++k){var l=j[k].pick(f,g,i);if(l)return l}return null}}}(),m.setScreenBox=function(a){var b=this.screenBox,c=this.pixelRatio;b[0]=0|Math.round(a[0]*c),b[1]=0|Math.round(a[1]*c),b[2]=0|Math.round(a[2]*c),b[3]=0|Math.round(a[3]*c),this.setDirty()},m.setDataBox=function(a){var b=this.dataBox,c=b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||b[3]!==a[3];c&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],this.setDirty())},m.setViewBox=function(a){var b=this.pixelRatio,c=this.viewBox;c[0]=0|Math.round(a[0]*b),c[1]=0|Math.round(a[1]*b),c[2]=0|Math.round(a[2]*b),c[3]=0|Math.round(a[3]*b);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((a[2]-a[0])*d),0|Math.round((a[3]-a[1])*d)],this.setDirty()},m.update=function(a){a=a||{};var b=this.gl;this.pixelRatio=a.pixelRatio||1;var c=this.pixelRatio;this.pickPixelRatio=Math.max(c,1),this.setScreenBox(a.screenBox||[0,0,b.drawingBufferWidth/c,b.drawingBufferHeight/c]),this.screenBox,this.setViewBox(a.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/c,.125*(this.screenBox[3]-this.screenBox[1])/c,.875*(this.screenBox[2]-this.screenBox[0])/c,.875*(this.screenBox[3]-this.screenBox[1])/c]);var d=this.viewBox,g=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(a.dataBox||[-10,-10/g,10,10/g]),this.borderColor=(a.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(a.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(a.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(a.gridLineWidth||[1,1]).slice(),this.gridLineColor=e(a.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(a.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(a.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=e(a.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(a.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(a.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=e(a.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(a.titleCenter||[.5*(d[0]+d[2])/c,(d[3]+120)/c]).slice(),this.titleEnable=!("titleEnable"in a&&!a.titleEnable),this.titleAngle=a.titleAngle||0,this.titleColor=(a.titleColor||[0,0,0,1]).slice(),this.labelPad=(a.labelPad||[15,15,15,15]).slice(),this.labelAngle=(a.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(a.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=e(a.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(a.tickPad||[15,15,15,15]).slice(),this.tickAngle=(a.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(a.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=e(a.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(a.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(a.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=e(a.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var h=a.ticks||[[],[]],i=this._tickBounds;i[0]=i[1]=1/0,i[2]=i[3]=-(1/0);for(var j=0;j<2;++j){var k=h[j].slice(0);0!==k.length&&(k.sort(f),i[j]=Math.min(i[j],k[0].x),i[j+2]=Math.max(i[j+2],k[k.length-1].x))}this.grid.update({bounds:i,ticks:h}),this.text.update({bounds:i,ticks:h,labels:a.labels||["x","y"],labelSize:a.labelSize||[12,12],labelFont:a.labelFont||["sans-serif","sans-serif"],title:a.title||"",titleSize:a.titleSize||18,titleFont:a.titleFont||"sans-serif"}),this["static"]=!!a["static"],this.setDirty()},m.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var a=this.objects.length-1;a>=0;--a)this.objects[a].dispose();this.objects.length=0;for(var a=this.overlays.length-1;a>=0;--a)this.overlays[a].dispose();this.overlays.length=0,this.gl=null},m.addObject=function(a){this.objects.indexOf(a)<0&&(this.objects.push(a),this.setDirty())},m.removeObject=function(a){for(var b=this.objects,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setDirty();break}},m.addOverlay=function(a){this.overlays.indexOf(a)<0&&(this.overlays.push(a),this.setOverlayDirty())},m.removeOverlay=function(a){for(var b=this.overlays,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setOverlayDirty();break}}},{"./lib/box":174,"./lib/grid":175,"./lib/line":176,"./lib/text":178,"gl-select-static":219}],188:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec2"}])}},{"gl-shader":220}],189:[function(a,b,c){"use strict";function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,
this.data=null}function e(a,b){var c=null;try{c=a.getContext("webgl",b),c||(c=a.getContext("experimental-webgl",b))}catch(a){return null}return c}function f(a){var b=Math.round(Math.log(Math.abs(a))/Math.log(10));if(b<0){var c=Math.round(Math.pow(10,-b));return Math.ceil(a*c)/c}if(b>0){var c=Math.round(Math.pow(10,b));return Math.ceil(a/c)*c}return Math.ceil(a)}function g(a){return"boolean"!=typeof a||a}function h(a){function b(){if(!v&&S.autoResize){var a=w.parentNode,b=1,c=1;a&&a!==document.body?(b=a.clientWidth,c=a.clientHeight):(b=window.innerWidth,c=window.innerHeight);var d=0|Math.ceil(b*S.pixelRatio),e=0|Math.ceil(c*S.pixelRatio);if(d!==w.width||e!==w.height){w.width=d,w.height=e;var f=w.style;f.position=f.position||"absolute",f.left="0px",f.top="0px",f.width=b+"px",f.height=c+"px",M=!0}}}function c(){for(var a=I.length,b=L.length,c=0;c<b;++c)K[c]=0;a:for(var c=0;c<a;++c){var d=I[c],e=d.pickSlots;if(e){for(var f=0;f<b;++f)if(K[f]+e<255){J[c]=f,d.setPickBase(K[f]+1),K[f]+=e;continue a}var g=m(y,R);J[c]=b,L.push(g),K.push(e),d.setPickBase(1),b+=1}else J[c]=-1}for(;b>0&&0===K[b-1];)K.pop(),L.pop().dispose()}function h(){return!!S.contextLost||void(y.isContextLost()&&(S.contextLost=!0,S.mouseListener.enabled=!1,S.selection.object=null,S.oncontextloss&&S.oncontextloss()))}function s(){if(!h()){y.colorMask(!0,!0,!0,!0),y.depthMask(!0),y.disable(y.BLEND),y.enable(y.DEPTH_TEST);for(var a=I.length,b=L.length,c=0;c<b;++c){var d=L[c];d.shape=T,d.begin();for(var e=0;e<a;++e)if(J[e]===c){var f=I[e];f.drawPick&&(f.pixelRatio=1,f.drawPick(Q))}d.end()}}}function t(){if(!h()){b();var a=S.camera.tick();Q.view=S.camera.matrix,M=M||a,N=N||a,F.pixelRatio=S.pixelRatio,H.pixelRatio=S.pixelRatio;var c=I.length,d=W[0],e=W[1];d[0]=d[1]=d[2]=1/0,e[0]=e[1]=e[2]=-(1/0);for(var g=0;g<c;++g){var i=I[g];i.pixelRatio=S.pixelRatio,i.axes=S.axes,M=M||!!i.dirty,N=N||!!i.dirty;var j=i.bounds;if(j)for(var l=j[0],m=j[1],n=0;n<3;++n)d[n]=Math.min(d[n],l[n]),e[n]=Math.max(e[n],m[n])}var p=S.bounds;if(S.autoBounds)for(var n=0;n<3;++n){if(e[n]<d[n])d[n]=-1,e[n]=1;else{d[n]===e[n]&&(d[n]-=1,e[n]+=1);var r=.05*(e[n]-d[n]);d[n]=d[n]-r,e[n]=e[n]+r}p[0][n]=d[n],p[1][n]=e[n]}for(var t=!1,n=0;n<3;++n)t=t||X[0][n]!==p[0][n]||X[1][n]!==p[1][n],X[0][n]=p[0][n],X[1][n]=p[1][n];if(t){for(var u=[0,0,0],g=0;g<3;++g)u[g]=f((p[1][g]-p[0][g])/10);F.autoTicks?F.update({bounds:p,tickSpacing:u}):F.update({bounds:p})}N=N||t,M=M||t;var v=y.drawingBufferWidth,w=y.drawingBufferHeight;R[0]=v,R[1]=w,T[0]=0|Math.max(v/S.pixelRatio,1),T[1]=0|Math.max(w/S.pixelRatio,1),q(O,S.fovy,v/w,S.zNear,S.zFar);for(var g=0;g<16;++g)P[g]=0;P[15]=1;for(var x=0,g=0;g<3;++g)x=Math.max(x,p[1][g]-p[0][g]);for(var g=0;g<3;++g)S.autoScale?P[5*g]=S.aspect[g]/(p[1][g]-p[0][g]):P[5*g]=1/x,S.autoCenter&&(P[12+g]=.5*-P[5*g]*(p[0][g]+p[1][g]));for(var g=0;g<c;++g){var i=I[g];i.axesBounds=p,S.clipToBounds&&(i.clipBounds=p)}if(A.object&&(S.snapToData?H.position=A.dataCoordinate:H.position=A.dataPosition,H.bounds=p),N&&(N=!1,s()),M){S.axesPixels=k(S.axes,Q,v,w),S.onrender&&S.onrender(),y.bindFramebuffer(y.FRAMEBUFFER,null),y.viewport(0,0,v,w);var z=S.clearColor;y.clearColor(z[0],z[1],z[2],z[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT),y.depthMask(!0),y.colorMask(!0,!0,!0,!0),y.enable(y.DEPTH_TEST),y.depthFunc(y.LEQUAL),y.disable(y.BLEND),y.disable(y.CULL_FACE);var D=!1;F.enable&&(D=D||F.isTransparent(),F.draw(Q)),H.axes=F,A.object&&H.draw(Q),y.disable(y.CULL_FACE);for(var g=0;g<c;++g){var i=I[g];i.axes=F,i.pixelRatio=S.pixelRatio,i.isOpaque&&i.isOpaque()&&i.draw(Q),i.isTransparent&&i.isTransparent()&&(D=!0)}if(D){B.shape=R,B.bind(),y.clear(y.DEPTH_BUFFER_BIT),y.colorMask(!1,!1,!1,!1),y.depthMask(!0),y.depthFunc(y.LESS),F.enable&&F.isTransparent()&&F.drawTransparent(Q);for(var g=0;g<c;++g){var i=I[g];i.isOpaque&&i.isOpaque()&&i.draw(Q)}y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.colorMask(!0,!0,!0,!0),y.depthMask(!1),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),F.isTransparent()&&F.drawTransparent(Q);for(var g=0;g<c;++g){var i=I[g];i.isTransparent&&i.isTransparent()&&i.drawTransparent(Q)}y.bindFramebuffer(y.FRAMEBUFFER,null),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.disable(y.DEPTH_TEST),C.bind(),B.color[0].bind(0),C.uniforms.accumBuffer=0,o(y),y.disable(y.BLEND)}M=!1;for(var g=0;g<c;++g)I[g].dirty=!1}}}function u(){v||S.contextLost||(requestAnimationFrame(u),t())}a=a||{};var v=!1,w=(a.pixelRatio||parseFloat(window.devicePixelRatio),a.canvas);if(!w)if(w=document.createElement("canvas"),a.container){var x=a.container;x.appendChild(w)}else document.body.appendChild(w);var y=a.gl;if(y||(y=e(w,a.glOptions||{premultipliedAlpha:!0,antialias:!0})),!y)throw new Error("webgl not supported");var z=a.bounds||[[-10,-10,-10],[10,10,10]],A=new d,B=n(y,[y.drawingBufferWidth,y.drawingBufferHeight],{preferFloat:!0}),C=r(y),D=a.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},E=a.axes||{},F=j(y,E);F.enable=!E.disable;var G=a.spikes||{},H=l(y,G),I=[],J=[],K=[],L=[],M=!0,N=!0,O=new Array(16),P=new Array(16),Q={view:null,projection:O,model:P},N=!0,R=[y.drawingBufferWidth,y.drawingBufferHeight],S={gl:y,contextLost:!1,pixelRatio:a.pixelRatio||parseFloat(window.devicePixelRatio),canvas:w,selection:A,camera:i(w,D),axes:F,axesPixels:null,spikes:H,bounds:z,objects:I,shape:R,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1e3,fovy:a.fovy||Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:g(a.autoResize),autoBounds:g(a.autoBounds),autoScale:!!a.autoScale,autoCenter:g(a.autoCenter),clipToBounds:g(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:Q,oncontextloss:null,mouseListener:null},T=[y.drawingBufferWidth/S.pixelRatio|0,y.drawingBufferHeight/S.pixelRatio|0];S.autoResize&&b(),window.addEventListener("resize",b),S.update=function(a){v||(a=a||{},M=!0,N=!0)},S.add=function(a){v||(a.axes=F,I.push(a),J.push(-1),M=!0,N=!0,c())},S.remove=function(a){if(!v){var b=I.indexOf(a);b<0||(I.splice(b,1),J.pop(),M=!0,N=!0,c())}},S.dispose=function(){if(!v&&(v=!0,window.removeEventListener("resize",b),w.removeEventListener("webglcontextlost",h),S.mouseListener.enabled=!1,!S.contextLost)){F.dispose(),H.dispose();for(var a=0;a<I.length;++a)I[a].dispose();B.dispose();for(var a=0;a<L.length;++a)L[a].dispose();C.dispose(),y=null,F=null,H=null,I=[]}};var U=!1,V=0;S.mouseListener=p(w,function(a,b,c){if(!v){var d=L.length,e=I.length,f=A.object;A.distance=1/0,A.mouse[0]=b,A.mouse[1]=c,A.object=null,A.screen=null,A.dataCoordinate=A.dataPosition=null;var g=!1;if(a&&V)U=!0;else{U&&(N=!0),U=!1;for(var h=0;h<d;++h){var i=L[h].query(b,T[1]-c-1,S.pickRadius);if(i){if(i.distance>A.distance)continue;for(var j=0;j<e;++j){var k=I[j];if(J[j]===h){var l=k.pick(i);l&&(A.buttons=a,A.screen=i.coord,A.distance=i.distance,A.object=k,A.index=l.distance,A.dataPosition=l.position,A.dataCoordinate=l.dataCoordinate,A.data=l,g=!0)}}}}}f&&f!==A.object&&(f.highlight&&f.highlight(null),M=!0),A.object&&(A.object.highlight&&A.object.highlight(A.data),M=!0),g=g||A.object!==f,g&&S.onselect&&S.onselect(A),1&a&&!(1&V)&&S.onclick&&S.onclick(A),V=a}}),w.addEventListener("webglcontextlost",h);var W=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],X=[W[0].slice(),W[1].slice()];return u(),S.redraw=function(){v||(M=!0,t())},S}b.exports=h;var i=a("3d-view-controls"),j=a("gl-axes3d"),k=a("gl-axes3d/properties"),l=a("gl-spikes3d"),m=a("gl-select-static"),n=a("gl-fbo"),o=a("a-big-triangle"),p=a("mouse-change"),q=a("gl-mat4/perspective"),r=a("./lib/shader")},{"./lib/shader":188,"3d-view-controls":26,"a-big-triangle":28,"gl-axes3d":120,"gl-axes3d/properties":127,"gl-fbo":135,"gl-mat4/perspective":152,"gl-select-static":219,"gl-spikes3d":229,"mouse-change":413}],190:[function(a,b,c){c.pointVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}",c.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n",c.pickVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],191:[function(a,b,c){arguments[4][180][0].apply(c,arguments)},{"./lib/GLError":192,"./lib/create-attributes":193,"./lib/create-uniforms":194,"./lib/reflect":195,"./lib/runtime-reflect":196,"./lib/shader-cache":197,dup:180}],192:[function(a,b,c){arguments[4][181][0].apply(c,arguments)},{dup:181}],193:[function(a,b,c){arguments[4][182][0].apply(c,arguments)},{"./GLError":192,dup:182}],194:[function(a,b,c){arguments[4][183][0].apply(c,arguments)},{"./GLError":192,"./reflect":195,dup:183}],195:[function(a,b,c){arguments[4][184][0].apply(c,arguments)},{dup:184}],196:[function(a,b,c){arguments[4][185][0].apply(c,arguments)},{dup:185}],197:[function(a,b,c){arguments[4][186][0].apply(c,arguments)},{"./GLError":192,dup:186,"gl-format-compiler-error":136,"weakmap-shim":517}],198:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.plot=a,this.offsetBuffer=b,this.pickBuffer=c,this.shader=d,this.pickShader=e,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}function e(a,b){var c,d=0,e=a.length>>>1;for(c=0;c<e;c++){var f=a[2*c],g=a[2*c+1];f>=b[0]&&f<=b[2]&&g>=b[1]&&g<=b[3]&&d++}return d}function f(a,b){var c=a.gl,e=h(c),f=h(c),i=g(c,j.pointVertex,j.pointFragment),k=g(c,j.pickVertex,j.pickFragment),l=new d(a,e,f,i,k);return l.update(b),a.addObject(l),l}var g=a("gl-shader"),h=a("gl-buffer"),i=a("typedarray-pool"),j=a("./lib/shader");b.exports=f;var k=d.prototype;k.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},k.update=function(a){function b(b,c){return b in a?a[b]:c}var c;a=a||{},this.sizeMin=b("sizeMin",.5),this.sizeMax=b("sizeMax",20),this.color=b("color",[1,0,0,1]).slice(),this.areaRatio=b("areaRatio",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.blend=b("blend",!1);var d=a.positions.length>>>1,e=a.positions instanceof Float32Array,f=a.idToIndex instanceof Int32Array&&a.idToIndex.length>=d,g=a.positions,h=e?g:i.mallocFloat32(g.length),j=f?a.idToIndex:i.mallocInt32(d);if(e||h.set(g),!f)for(h.set(g),c=0;c<d;c++)j[c]=c;this.points=g,this.offsetBuffer.update(h),this.pickBuffer.update(j),e||i.free(h),f||i.free(j),this.pointCount=d,this.pickOffset=0},k.unifiedDraw=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(c){var d=void 0!==c,f=d?this.pickShader:this.shader,g=this.plot.gl,h=this.plot.dataBox;if(0===this.pointCount)return c;var i=h[2]-h[0],j=h[3]-h[1],k=e(this.points,h),l=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(k,.33333)));a[0]=2/i,a[4]=2/j,a[6]=-2*h[0]/i-1,a[7]=-2*h[1]/j-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=a,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=l<5,f.uniforms.pointSize=l,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(b[0]=255&c,b[1]=c>>8&255,b[2]=c>>16&255,b[3]=c>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(g.UNSIGNED_BYTE),f.uniforms.pickOffset=b,this.pickOffset=c);var m=g.getParameter(g.BLEND),n=g.getParameter(g.DITHER);return m&&!this.blend&&g.disable(g.BLEND),n&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),m&&!this.blend&&g.enable(g.BLEND),n&&g.enable(g.DITHER),c+this.pointCount}}(),k.draw=k.unifiedDraw,k.drawPick=k.unifiedDraw,k.pick=function(a,b,c){var d=this.pickOffset,e=this.pointCount;if(c<d||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}}},{"./lib/shader":190,"gl-buffer":128,"gl-shader":191,"typedarray-pool":496}],199:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a}b.exports=d},{}],200:[function(a,b,c){"use strict";b.exports={vertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute vec2 offset;\nattribute vec4 color;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\n\nvarying vec4 fragColor;\n\n\nvec4 computePosition_1_0(vec2 posHi, vec2 posLo, vec2 scHi, vec2 scLo, vec2 trHi, vec2 trLo, vec2 screenScale, vec2 screenOffset) {\n  return vec4(scHi * posHi + trHi\n            + scLo * posHi + trLo\n            + scHi * posLo\n            + scLo * posLo\n            + screenScale * screenOffset, 0, 1);\n}\n\nvoid main() {\n  fragColor = color;\n\n  gl_Position = computePosition_1_0(\n    positionHi, positionLo,\n    scaleHi, scaleLo,\n    translateHi, translateLo,\n    pixelScale, offset);\n}\n",fragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",pickVertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute vec2 offset;\nattribute vec4 id;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\nuniform vec4 pickOffset;\n\nvarying vec4 fragColor;\n\n\nvec4 computePosition_1_0(vec2 posHi, vec2 posLo, vec2 scHi, vec2 scLo, vec2 trHi, vec2 trLo, vec2 screenScale, vec2 screenOffset) {\n  return vec4(scHi * posHi + trHi\n            + scLo * posHi + trLo\n            + scHi * posLo\n            + scLo * posLo\n            + screenScale * screenOffset, 0, 1);\n}\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_Position = computePosition_1_0(\n    positionHi, positionLo,\n    scaleHi, scaleLo,\n    translateHi, translateLo,\n    pixelScale, offset);\n}\n",pickFragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],201:[function(a,b,c){arguments[4][180][0].apply(c,arguments)},{"./lib/GLError":202,"./lib/create-attributes":203,"./lib/create-uniforms":204,"./lib/reflect":205,"./lib/runtime-reflect":206,"./lib/shader-cache":207,dup:180}],202:[function(a,b,c){arguments[4][181][0].apply(c,arguments)},{dup:181}],203:[function(a,b,c){arguments[4][182][0].apply(c,arguments)},{"./GLError":202,dup:182}],204:[function(a,b,c){arguments[4][183][0].apply(c,arguments)},{"./GLError":202,"./reflect":205,dup:183}],205:[function(a,b,c){arguments[4][184][0].apply(c,arguments)},{dup:184}],206:[function(a,b,c){arguments[4][185][0].apply(c,arguments)},{dup:185}],207:[function(a,b,c){arguments[4][186][0].apply(c,arguments)},{"./GLError":202,dup:186,"gl-format-compiler-error":136,"weakmap-shim":517}],208:[function(a,b,c){"use strict";function d(a){if(a in m)return m[a];var b=k(a,{polygons:!0,font:"sans-serif",textAlign:"left",textBaseline:"alphabetic"}),c=[],d=[];b.forEach(function(a){a.forEach(function(a){for(var b=0;b<a.length;++b){var e=a[(b+a.length-1)%a.length],f=a[b],g=a[(b+1)%a.length],h=a[(b+2)%a.length],i=f[0]-e[0],j=f[1]-e[1],k=Math.sqrt(i*i+j*j);i/=k,j/=k,c.push(e[0],e[1]+1.4),d.push(j,-i),c.push(e[0],e[1]+1.4),d.push(-j,i),c.push(f[0],f[1]+1.4),d.push(-j,i),c.push(f[0],f[1]+1.4),d.push(-j,i),c.push(e[0],e[1]+1.4),d.push(j,-i),c.push(f[0],f[1]+1.4),d.push(j,-i);var l=h[0]-g[0],m=h[1]-g[1],n=Math.sqrt(l*l+m*m);l/=n,m/=n,c.push(f[0],f[1]+1.4),d.push(j,-i),c.push(f[0],f[1]+1.4),d.push(-j,i),c.push(g[0],g[1]+1.4),d.push(-m,l),c.push(g[0],g[1]+1.4),d.push(-m,l),c.push(f[0],f[1]+1.4),d.push(m,-l),c.push(g[0],g[1]+1.4),d.push(m,-l)}})});for(var e=[1/0,1/0,-(1/0),-(1/0)],f=0;f<c.length;f+=2)for(var g=0;g<2;++g)e[g]=Math.min(e[g],c[f+g]),e[2+g]=Math.max(e[2+g],c[f+g]);return m[a]={coords:c,normals:d,bounds:e}}function e(a,b,c,d,e,f,g,h){this.plot=a,this.shader=b,this.pickShader=c,this.posHiBuffer=d,this.posLoBuffer=e,this.offsetBuffer=f,this.colorBuffer=g,this.idBuffer=h,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.numPoints=0,this.numVertices=0,this.pickOffset=0,this.points=null}function f(a,b){var c=a.gl,d=g(c,l.vertex,l.fragment),f=g(c,l.pickVertex,l.pickFragment),i=h(c),j=h(c),k=h(c),m=h(c),n=h(c),o=new e(a,d,f,i,j,k,m,n);return o.update(b),a.addObject(o),o}b.exports=f;var g=a("gl-shader"),h=a("gl-buffer"),i=a("text-cache"),j=a("typedarray-pool"),k=a("vectorize-text"),l=a("./lib/shaders"),m={},n=e.prototype;!function(){function a(){var a=this.plot,g=this.bounds,h=a.viewBox,i=a.dataBox,j=a.pixelRatio,k=g[2]-g[0],l=g[3]-g[1],m=i[2]-i[0],n=i[3]-i[1],o=2*k/m,p=2*l/n,q=2*(g[0]-i[0])/m-1,r=2*(g[1]-i[1])/n-1;b[0]=o,c[0]=o-b[0],b[1]=p,c[1]=p-b[1],d[0]=q,e[0]=q-d[0],d[1]=r,e[1]=r-d[1];var s=h[2]-h[0],t=h[3]-h[1];f[0]=2*j/s,f[1]=2*j/t}var b=new Float32Array([0,0]),c=new Float32Array([0,0]),d=new Float32Array([0,0]),e=new Float32Array([0,0]),f=[0,0],g=[0,0,0,0];n.drawPick=function(h){var i=void 0!==h,j=this.plot,k=this.numVertices;if(!k)return h;a.call(this);var l=j.gl,m=i?this.pickShader:this.shader;if(m.bind(),i){this.pickOffset=h;for(var n=0;n<4;++n)g[n]=h>>8*n&255;m.uniforms.pickOffset=g,this.idBuffer.bind(),m.attributes.id.pointer(l.UNSIGNED_BYTE,!1)}else this.colorBuffer.bind(),m.attributes.color.pointer(l.UNSIGNED_BYTE,!0);return this.posHiBuffer.bind(),m.attributes.positionHi.pointer(),this.posLoBuffer.bind(),m.attributes.positionLo.pointer(),this.offsetBuffer.bind(),m.attributes.offset.pointer(),m.uniforms.pixelScale=f,m.uniforms.scaleHi=b,m.uniforms.scaleLo=c,m.uniforms.translateHi=d,m.uniforms.translateLo=e,l.drawArrays(l.TRIANGLES,0,k),i?h+this.numPoints:void 0}}(),n.draw=n.drawPick,n.pick=function(a,b,c){var d=this.pickOffset,e=this.numPoints;if(c<d||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}},n.update=function(a){a=a||{};var b,c,e=a.positions||[],f=a.colors||[],g=a.glyphs||[],h=a.sizes||[],k=a.borderWidths||[],l=a.borderColors||[];this.points=e;var m,n,o=this.bounds=[1/0,1/0,-(1/0),-(1/0)],p=0,q=[],r=[];for(b=0;b<g.length;++b)for(m=i("sans-serif",g[b]),n=d(g[b]),q.push(m),r.push(n),p+=m.data.length+n.coords.length>>1,c=0;c<2;++c)o[c]=Math.min(o[c],e[2*b+c]),o[2+c]=Math.max(o[2+c],e[2*b+c]);o[0]===o[2]&&(o[2]+=1),o[3]===o[1]&&(o[3]+=1);var s=1/(o[2]-o[0]),t=1/(o[3]-o[1]),u=o[0],v=o[1],w=j.mallocFloat64(2*p),x=j.mallocFloat32(2*p),y=j.mallocFloat32(2*p),z=j.mallocFloat32(2*p),A=j.mallocUint8(4*p),B=j.mallocUint32(p),C=0;for(b=0;b<g.length;++b){m=q[b],n=r[b];var D=s*(e[2*b]-u),E=t*(e[2*b+1]-v),F=h[b],G=255*f[4*b],H=255*f[4*b+1],I=255*f[4*b+2],J=255*f[4*b+3],K=.5*(n.bounds[0]+n.bounds[2]),L=.5*(n.bounds[1]+n.bounds[3]);for(c=0;c<m.data.length;c+=2)w[2*C]=D,w[2*C+1]=E,z[2*C]=-F*(m.data[c]-K),z[2*C+1]=-F*(m.data[c+1]-L),A[4*C]=G,A[4*C+1]=H,A[4*C+2]=I,A[4*C+3]=J,B[C]=b,C+=1;var M=k[b];for(G=255*l[4*b],H=255*l[4*b+1],I=255*l[4*b+2],J=255*l[4*b+3],c=0;c<n.coords.length;c+=2)w[2*C]=D,w[2*C+1]=E,z[2*C]=-(F*(n.coords[c]-K)+M*n.normals[c]),z[2*C+1]=-(F*(n.coords[c+1]-L)+M*n.normals[c+1]),A[4*C]=G,A[4*C+1]=H,A[4*C+2]=I,A[4*C+3]=J,B[C]=b,C+=1}for(this.numPoints=g.length,this.numVertices=p,x.set(w),b=0;b<w.length;b++)y[b]=w[b]-x[b];this.posHiBuffer.update(x),this.posLoBuffer.update(y),this.offsetBuffer.update(z),this.colorBuffer.update(A),this.idBuffer.update(B),j.free(w),j.free(x),j.free(y),j.free(z),j.free(A),j.free(B)},n.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.posHiBuffer.dispose(),this.posLoBuffer.dispose(),this.offsetBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":200,"gl-buffer":128,"gl-shader":201,"text-cache":488,"typedarray-pool":496,"vectorize-text":509}],209:[function(a,b,c){c.pointVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute float weight;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\n\nvec4 pfx_1_0(vec2 scaleHi, vec2 scaleLo, vec2 translateHi, vec2 translateLo, vec2 positionHi, vec2 positionLo) {\n  return vec4(scaleHi * positionHi + translateHi\n            + scaleLo * positionHi + translateLo\n            + scaleHi * positionLo\n            + scaleLo * positionLo, 0.0, 1.0);\n}\n\nvoid main() {\n  gl_Position = pfx_1_0(scaleHi, scaleLo, translateHi, translateLo, positionHi, positionLo);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}",c.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}",c.pickVertex="precision highp float;\n#define GLSLIFY 1\n\nvec4 pfx_1_0(vec2 scaleHi, vec2 scaleLo, vec2 translateHi, vec2 translateLo, vec2 positionHi, vec2 positionLo) {\n  return vec4(scaleHi * positionHi + translateHi\n            + scaleLo * positionHi + translateLo\n            + scaleHi * positionLo\n            + scaleLo * positionLo, 0.0, 1.0);\n}\n\nattribute vec2 positionHi, positionLo;\nattribute vec4 pickId;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_Position = pfx_1_0(scaleHi, scaleLo, translateHi, translateLo, positionHi, positionLo);\n  gl_PointSize = pointSize;\n  fragId = id;\n}",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}"},{}],210:[function(a,b,c){arguments[4][72][0].apply(c,arguments)},{dup:72}],211:[function(a,b,c){"use strict";function d(a,b,c,d,f){f<=4*m?e(0,f-1,a,b,c,d):l(0,f-1,a,b,c,d)}function e(a,b,c,d,e,f){for(var g=a+1;g<=b;++g){for(var h=c[g],i=d[2*g],j=d[2*g+1],k=e[g],l=f[g],m=g;m>a;){var n=c[m-1],o=d[2*(m-1)];if((n-h||i-o)>=0)break;c[m]=n,d[2*m]=o,d[2*m+1]=d[2*m-1],e[m]=e[m-1],f[m]=f[m-1],m-=1}c[m]=h,d[2*m]=i,d[2*m+1]=j,e[m]=k,f[m]=l}}function f(a,b,c,d,e,f){var g=c[a],h=d[2*a],i=d[2*a+1],j=e[a],k=f[a];c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b],c[b]=g,d[2*b]=h,d[2*b+1]=i,e[b]=j,f[b]=k}function g(a,b,c,d,e,f){c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b]}function h(a,b,c,d,e,f,g){var h=d[a],i=e[2*a],j=e[2*a+1],k=f[a],l=g[a];d[a]=d[b],e[2*a]=e[2*b],e[2*a+1]=e[2*b+1],f[a]=f[b],g[a]=g[b],d[b]=d[c],e[2*b]=e[2*c],e[2*b+1]=e[2*c+1],f[b]=f[c],g[b]=g[c],d[c]=h,e[2*c]=i,e[2*c+1]=j,f[c]=k,g[c]=l}function i(a,b,c,d,e,f,g,h,i,j,k){h[a]=h[b],i[2*a]=i[2*b],i[2*a+1]=i[2*b+1],j[a]=j[b],k[a]=k[b],h[b]=c,i[2*b]=d,i[2*b+1]=e,j[b]=f,k[b]=g}function j(a,b,c,d,e){return(c[a]-c[b]||d[2*b]-d[2*a]||e[a]-e[b])<0}function k(a,b,c,d,e,f,g,h){return(b-f[a]||g[2*a]-c||e-h[a])<0}function l(a,b,c,d,n,o){var p=(b-a+1)/6|0,q=a+p,r=b-p,s=a+b>>1,t=s-p,u=s+p,v=q,w=t,x=s,y=u,z=r,A=a+1,B=b-1,C=0;j(v,w,c,d,n,o)&&(C=v,v=w,w=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C),j(v,x,c,d,n,o)&&(C=v,v=x,x=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(v,y,c,d,n,o)&&(C=v,v=y,y=C),j(x,y,c,d,n,o)&&(C=x,x=y,y=C),j(w,z,c,d,n,o)&&(C=w,w=z,z=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C);var D=c[w],E=d[2*w],F=d[2*w+1],G=n[w],H=o[w],I=c[y],J=d[2*y],K=d[2*y+1],L=n[y],M=o[y],N=v,O=x,P=z,Q=q,R=s,S=r,T=c[N],U=c[O],V=c[P];c[Q]=T,c[R]=U,c[S]=V;for(var W=0;W<2;++W){var X=d[2*N+W],Y=d[2*O+W],Z=d[2*P+W];d[2*Q+W]=X,d[2*R+W]=Y,d[2*S+W]=Z}var $=n[N],_=n[O],aa=n[P];n[Q]=$,n[R]=_,n[S]=aa;var ba=o[N],ca=o[O],da=o[P];o[Q]=ba,o[R]=ca,o[S]=da,g(t,a,c,d,n,o),g(u,b,c,d,n,o);for(var ea=A;ea<=B;++ea)if(k(ea,D,E,F,G,c,d,n))ea!==A&&f(ea,A,c,d,n,o),++A;else if(!k(ea,I,J,K,L,c,d,n))for(;;){if(k(B,I,J,K,L,c,d,n)){k(B,D,E,F,G,c,d,n)?(h(ea,A,B,c,d,n,o),++A,--B):(f(ea,B,c,d,n,o),--B);break}if(--B<ea)break}i(a,A-1,D,E,F,G,H,c,d,n,o),i(b,B+1,I,J,K,L,M,c,d,n,o),A-2-a<=m?e(a,A-2,c,d,n,o):l(a,A-2,c,d,n,o),b-(B+2)<=m?e(B+2,b,c,d,n,o):l(B+2,b,c,d,n,o),B-A<=m?e(A,B,c,d,n,o):l(A,B,c,d,n,o)}b.exports=d;var m=32},{}],212:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){for(var i=c,j=c;j<d;++j){var k=a[2*j],l=a[2*j+1],m=b[j];e<=k&&k<=g&&f<=l&&l<=h&&(j===i?i+=1:(a[2*j]=a[2*i],a[2*j+1]=a[2*i+1],b[j]=b[i],a[2*i]=k,a[2*i+1]=l,b[i]=m,i+=1))}return i}function e(a,b,c){this.pixelSize=a,this.offset=b,this.count=c}function f(a,b,c,f){function i(e,f,g,h,j,k){var l=.5*g,m=h+1,n=j-h;c[v]=n,u[v++]=k;for(var o=0;o<2;++o)for(var p=0;p<2;++p){var q=e+o*l,r=f+p*l,s=d(a,b,m,j,q,r,q+l,r+l);if(s!==m){if(s-m>=Math.max(.9*n,32)){var t=j+h>>>1;i(q,r,l,m,t,k+1),m=t}i(q,r,l,m,s,k+1),m=s}}}var j=a.length>>>1;if(j<1)return[];for(var k=1/0,l=1/0,m=-(1/0),n=-(1/0),o=0;o<j;++o){var p=a[2*o],q=a[2*o+1];k=Math.min(k,p),m=Math.max(m,p),l=Math.min(l,q),n=Math.max(n,q),b[o]=o}k===m&&(m+=1+Math.abs(m)),l===n&&(n+=1+Math.abs(m));var r=1/(m-k),s=1/(n-l),t=Math.max(m-k,n-l);f=f||[0,0,0,0],f[0]=k,f[1]=l,f[2]=m,f[3]=n;var u=g.mallocInt32(j),v=0;i(k,l,t,0,j,0),h(u,a,b,c,j);for(var w=[],x=0,y=j,v=j-1;v>=0;--v){a[2*v]=(a[2*v]-k)*r,a[2*v+1]=(a[2*v+1]-l)*s;var z=u[v];z!==x&&(w.push(new e(t*Math.pow(.5,z),v+1,y-(v+1))),y=v+1,x=z)}return w.push(new e(t*Math.pow(.5,z+1),0,y)),g.free(u),w}var g=a("typedarray-pool"),h=a("./lib/sort");b.exports=f},{"./lib/sort":211,"typedarray-pool":496}],213:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.plot=a,this.positionBufferHi=b,this.positionBufferLo=c,this.pickBuffer=d,this.weightBuffer=e,this.shader=f,this.pickShader=g,this.scales=[],this.size=12,this.borderSize=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.pickOffset=0,this.points=null,this.xCoords=null}function e(a,b){var c=a.gl,e=g(c),h=g(c),i=g(c),j=g(c),l=f(c,k.pointVertex,k.pointFragment),m=f(c,k.pickVertex,k.pickFragment),n=new d(a,e,h,i,j,l,m);return n.update(b),a.addObject(n),n}var f=a("gl-shader"),g=a("gl-buffer"),h=a("binary-search-bounds"),i=a("snap-points-2d"),j=a("typedarray-pool"),k=a("./lib/shader");b.exports=e;var l=d.prototype,m=new Float32Array(2),n=new Float32Array(2),o=new Float32Array(2),p=new Float32Array(2),q=[0,0,0,0];l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBufferHi.dispose(),this.positionBufferLo.dispose(),this.pickBuffer.dispose(),this.xCoords&&j.free(this.xCoords),this.plot.removeObject(this)},l.update=function(a){function b(b,c){return b in a?a[b]:c}a=a||{},this.size=b("size",12),this.color=b("color",[1,0,0,1]).slice(),this.borderSize=b("borderSize",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.xCoords&&j.free(this.xCoords),this.points=a.positions;var c=this.points.length>>>1,d=j.mallocInt32(c),e=j.mallocFloat32(2*c),f=j.mallocFloat64(2*c);f.set(this.points),this.scales=i(f,d,e,this.bounds);var g=j.mallocFloat64(c),h=j.mallocFloat32(2*c),k=j.mallocFloat32(2*c);h.set(f);for(var l=0,m=0;l<c;l++,m+=2)k[m]=f[m]-h[m],k[m+1]=f[m+1]-h[m+1],g[l]=f[m];this.positionBufferHi.update(h),this.positionBufferLo.update(k),this.pickBuffer.update(d),this.weightBuffer.update(e),j.free(d),j.free(f),j.free(h),j.free(k),j.free(e),this.xCoords=g,this.pointCount=c,this.pickOffset=0},l.draw=function(a){var b=void 0!==a,c=this.plot,d=b?this.pickShader:this.shader,e=this.scales,f=this.positionBufferHi,g=this.positionBufferLo,i=this.pickBuffer,j=this.bounds,k=this.size,l=this.borderSize,r=c.gl,s=b?c.pickPixelRatio:c.pixelRatio,t=c.viewBox,u=c.dataBox;if(0===this.pointCount)return a;var v=j[2]-j[0],w=j[3]-j[1],x=u[2]-u[0],y=u[3]-u[1],z=(t[2]-t[0])*s/c.pixelRatio,A=(t[3]-t[1])*s/c.pixelRatio,B=Math.min(x/z,y/A),C=2*v/x,D=2*w/y;m[0]=C,m[1]=D,n[0]=C-m[0],n[1]=D-m[1];var E=2*(j[0]-u[0])/x-1,F=2*(j[1]-u[1])/y-1;o[0]=E,o[1]=F,p[0]=E-o[0],p[1]=F-o[1],d.bind(),d.uniforms.scaleHi=m,d.uniforms.scaleLo=n,d.uniforms.translateHi=o,d.uniforms.translateLo=p,d.uniforms.color=this.color,d.uniforms.borderColor=this.borderColor,d.uniforms.pointSize=s*(k+l),d.uniforms.centerFraction=0===this.borderSize?2:k/(k+l+1.25),f.bind(),d.attributes.positionHi.pointer(),g.bind(),d.attributes.positionLo.pointer(),b?(this.pickOffset=a,q[0]=255&a,q[1]=a>>8&255,q[2]=a>>16&255,q[3]=a>>24&255,d.uniforms.pickOffset=q,i.bind(),d.attributes.pickId.pointer(r.UNSIGNED_BYTE)):(d.uniforms.useWeight=1,this.weightBuffer.bind(),d.attributes.weight.pointer());for(var G=this.xCoords,H=(u[0]-j[0]-B*k*s)/v,I=(u[2]-j[0]+B*k*s)/v,J=!0,K=e.length-1;K>=0;K--){var L=e[K];if(!(L.pixelSize<B&&K>1)){var M=L.offset,N=L.count+M,O=h.ge(G,H,M,N-1),P=h.lt(G,I,O,N-1)+1;P>O&&r.drawArrays(r.POINTS,O,P-O),!b&&J&&(J=!1,d.uniforms.useWeight=0)}}},l.drawPick=l.draw,l.pick=function(a,b,c){var d=c-this.pickOffset;return d<0||d>=this.pointCount?null:{object:this,pointId:d,dataCoord:[this.points[2*d],this.points[2*d+1]]}}},{"./lib/shader":209,"binary-search-bounds":210,"gl-buffer":128,"gl-shader":220,"snap-points-2d":212,"typedarray-pool":496}],214:[function(a,b,c){"use strict";function d(a,b){var c=f[b];if(c||(c=f[b]={}),
a in c)return c[a];for(var d=e(a,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),g=e(a,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),h=[[1/0,1/0],[-(1/0),-(1/0)]],i=0;i<d.positions.length;++i)for(var j=d.positions[i],k=0;k<2;++k)h[0][k]=Math.min(h[0][k],j[k]),h[1][k]=Math.max(h[1][k],j[k]);return c[a]=[g,d,h]}var e=a("vectorize-text");b.exports=d;var f={}},{"vectorize-text":509}],215:[function(a,b,c){function d(a,b){var c=e(a,b),d=c.attributes;return d.position.location=0,d.color.location=1,d.glyph.location=2,d.id.location=3,c}var e=a("gl-shader"),f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",g="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",i="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",j="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",k=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:f,fragment:i,attributes:k},m={vertex:g,fragment:i,attributes:k},n={vertex:h,fragment:i,attributes:k},o={vertex:f,fragment:j,attributes:k},p={vertex:g,fragment:j,attributes:k},q={vertex:h,fragment:j,attributes:k};c.createPerspective=function(a){return d(a,l)},c.createOrtho=function(a){return d(a,m)},c.createProject=function(a){return d(a,n)},c.createPickPerspective=function(a){return d(a,o)},c.createPickOrtho=function(a){return d(a,p)},c.createPickProject=function(a){return d(a,q)}},{"gl-shader":220}],216:[function(a,b,c){"use strict";function d(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f,a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f,a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f,a[3]=b[3]*c+b[7]*d+b[11]*e+b[15]*f,a}function e(a,b,c,e){return d(e,e,c),d(e,e,b),d(e,e,a)}function f(a,b){this.index=a,this.dataCoordinate=this.position=b}function g(a,b,c,d,e,g,h,i,j,k,l,m){this.gl=a,this.pixelRatio=1,this.shader=b,this.orthoShader=c,this.projectShader=d,this.pointBuffer=e,this.colorBuffer=g,this.glyphBuffer=h,this.idBuffer=i,this.vao=j,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=k,this.pickOrthoShader=l,this.pickProjectShader=m,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.dirty=!0}function h(a){return a[0]=a[1]=a[2]=0,a}function i(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=1,a}function j(a,b,c,d){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[c]=d,a}function k(a){for(var b=D,c=0;c<2;++c)for(var d=0;d<3;++d)b[c][d]=Math.max(Math.min(a[c][d],1e8),-1e8);return b}function l(a,b,c,d,f){var g,l=b.axesProject,m=b.gl,n=a.uniforms,o=c.model||u,p=c.view||u,q=c.projection||u,s=b.axesBounds,t=k(b.clipBounds);g=b.axes?b.axes.lastCubeProps.axis:[1,1,1],w[0]=2/m.drawingBufferWidth,w[1]=2/m.drawingBufferHeight,a.bind(),n.view=p,n.projection=q,n.screenSize=w,n.highlightId=b.highlightId,n.highlightScale=b.highlightScale,n.clipBounds=t,n.pickGroup=b.pickId/255,n.pixelRatio=b.pixelRatio;for(var v=0;v<3;++v)if(l[v]&&b.projectOpacity[v]<1===d){n.scale=b.projectScale[v],n.opacity=b.projectOpacity[v];for(var D=B,E=0;E<16;++E)D[E]=0;for(var E=0;E<4;++E)D[5*E]=1;D[5*v]=0,g[v]<0?D[12+v]=s[0][v]:D[12+v]=s[1][v],r(D,o,D),n.model=D;var F=(v+1)%3,G=(v+2)%3,H=h(x),I=h(y);H[F]=1,I[G]=1;var J=e(q,p,o,i(z,H)),K=e(q,p,o,i(A,I));if(Math.abs(J[1])>Math.abs(K[1])){var L=J;J=K,K=L,L=H,H=I,I=L;var M=F;F=G,G=M}J[0]<0&&(H[F]=-1),K[1]>0&&(I[G]=-1);for(var N=0,O=0,E=0;E<4;++E)N+=Math.pow(o[4*F+E],2),O+=Math.pow(o[4*G+E],2);H[F]/=Math.sqrt(N),I[G]/=Math.sqrt(O),n.axes[0]=H,n.axes[1]=I,n.fragClipBounds[0]=j(C,t[0],v,-1e8),n.fragClipBounds[1]=j(C,t[1],v,1e8),b.vao.draw(m.TRIANGLES,b.vertexCount),b.lineWidth>0&&(m.lineWidth(b.lineWidth),b.vao.draw(m.LINES,b.lineVertexCount,b.vertexCount))}}function m(a,b,c,d,e,f){var g=c.gl;if(c.vao.bind(),e===c.opacity<1||f){a.bind();var h=a.uniforms;h.model=d.model||u,h.view=d.view||u,h.projection=d.projection||u,w[0]=2/g.drawingBufferWidth,w[1]=2/g.drawingBufferHeight,h.screenSize=w,h.highlightId=c.highlightId,h.highlightScale=c.highlightScale,h.fragClipBounds=G,h.clipBounds=c.axes.bounds,h.opacity=c.opacity,h.pickGroup=c.pickId/255,h.pixelRatio=c.pixelRatio,c.vao.draw(g.TRIANGLES,c.vertexCount),c.lineWidth>0&&(g.lineWidth(c.lineWidth),c.vao.draw(g.LINES,c.lineVertexCount,c.vertexCount))}l(b,c,d,e,f),c.vao.unbind()}function n(a){var b=a.gl,c=s.createPerspective(b),d=s.createOrtho(b),e=s.createProject(b),f=s.createPickPerspective(b),h=s.createPickOrtho(b),i=s.createPickProject(b),j=o(b),k=o(b),l=o(b),m=o(b),n=p(b,[{buffer:j,size:3,type:b.FLOAT},{buffer:k,size:4,type:b.FLOAT},{buffer:l,size:2,type:b.FLOAT},{buffer:m,size:4,type:b.UNSIGNED_BYTE,normalized:!0}]),q=new g(b,c,d,e,j,k,l,m,n,f,h,i);return q.update(a),q}var o=a("gl-buffer"),p=a("gl-vao"),q=a("typedarray-pool"),r=a("gl-mat4/multiply"),s=a("./lib/shaders"),t=a("./lib/glyphs"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.exports=n;var v=g.prototype;v.pickSlots=1,v.setPickBase=function(a){this.pickId=a},v.isTransparent=function(){if(this.opacity<1)return!0;for(var a=0;a<3;++a)if(this.axesProject[a]&&this.projectOpacity[a]<1)return!0;return!1},v.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;a<3;++a)if(this.axesProject[a]&&this.projectOpacity[a]>=1)return!0;return!1};var w=[0,0],x=[0,0,0],y=[0,0,0],z=[0,0,0,1],A=[0,0,0,1],B=u.slice(),C=[0,0,0],D=[[0,0,0],[0,0,0]],E=[-1e8,-1e8,-1e8],F=[1e8,1e8,1e8],G=[E,F];v.draw=function(a){var b=this.useOrtho?this.orthoShader:this.shader;m(b,this.projectShader,this,a,!1,!1)},v.drawTransparent=function(a){var b=this.useOrtho?this.orthoShader:this.shader;m(b,this.projectShader,this,a,!0,!1)},v.drawPick=function(a){var b=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;m(b,this.pickProjectShader,this,a,!1,!0)},v.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=a.value[2]+(a.value[1]<<8)+(a.value[0]<<16);if(b>=this.pointCount||b<0)return null;var c=this.points[b],d=this._selectResult;d.index=b;for(var e=0;e<3;++e)d.position[e]=d.dataCoordinate[e]=c[e];return d},v.highlight=function(a){if(a){var b=a.index,c=255&b,d=b>>8&255,e=b>>16&255;this.highlightId=[c/255,d/255,e/255,0]}else this.highlightId=[1,1,1,1]},v.update=function(a){if(a=a||{},"perspective"in a&&(this.useOrtho=!a.perspective),"orthographic"in a&&(this.useOrtho=!!a.orthographic),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"project"in a)if(Array.isArray(a.project))this.axesProject=a.project;else{var b=!!a.project;this.axesProject=[b,b,b]}if("projectScale"in a)if(Array.isArray(a.projectScale))this.projectScale=a.projectScale.slice();else{var c=+a.projectScale;this.projectScale=[c,c,c]}if("projectOpacity"in a)if(Array.isArray(a.projectOpacity))this.projectOpacity=a.projectOpacity.slice();else{var c=+a.projectOpacity;this.projectOpacity=[c,c,c]}"opacity"in a&&(this.opacity=a.opacity),this.dirty=!0;var d=a.position;if(d){var e=a.font||"normal",f=a.alignment||[0,0],g=[1/0,1/0,1/0],h=[-(1/0),-(1/0),-(1/0)],i=a.glyph,j=a.color,k=a.size,l=a.angle,m=a.lineColor,n=0,o=0,p=0,r=d.length;a:for(var s=0;s<r;++s){for(var u=d[s],v=0;v<3;++v)if(isNaN(u[v])||!isFinite(u[v]))continue a;var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("●",e);var x=w[0],y=w[1],z=w[2];o+=3*x.cells.length,p+=2*y.edges.length}var A=o+p,B=q.mallocFloat(3*A),C=q.mallocFloat(4*A),D=q.mallocFloat(2*A),E=q.mallocUint32(A),F=[0,f[1]],G=0,H=o,I=[0,0,0,1],J=[0,0,0,1],K=Array.isArray(j)&&Array.isArray(j[0]),L=Array.isArray(m)&&Array.isArray(m[0]);a:for(var s=0;s<r;++s){for(var u=d[s],v=0;v<3;++v){if(isNaN(u[v])||!isFinite(u[v])){n+=1;continue a}h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v])}var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("●",e);var x=w[0],y=w[1],z=w[2];if(Array.isArray(j)){var M;if(M=K?j[s]:j,3===M.length){for(var v=0;v<3;++v)I[v]=M[v];I[3]=1}else if(4===M.length)for(var v=0;v<4;++v)I[v]=M[v]}else I[0]=I[1]=I[2]=0,I[3]=1;if(Array.isArray(m)){var M;if(M=L?m[s]:m,3===M.length){for(var v=0;v<3;++v)J[v]=M[v];J[v]=1}else if(4===M.length)for(var v=0;v<4;++v)J[v]=M[v]}else J[0]=J[1]=J[2]=0,J[3]=1;var N=.5;Array.isArray(k)?N=+k[s]:k?N=+k:this.useOrtho&&(N=12);var O=0;Array.isArray(l)?O=+l[s]:l&&(O=+l);for(var P=Math.cos(O),Q=Math.sin(O),u=d[s],v=0;v<3;++v)h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v]);f[0]<0?F[0]=f[0]*(1+z[1][0]):f[0]>0&&(F[0]=-f[0]*(1+z[0][0]));for(var R=x.cells,S=x.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;U<3;++U){for(var V=0;V<3;++V)B[3*G+V]=u[V];for(var V=0;V<4;++V)C[4*G+V]=I[V];E[G]=n;var W=S[T[U]];D[2*G]=N*(P*W[0]-Q*W[1]+F[0]),D[2*G+1]=N*(Q*W[0]+P*W[1]+F[1]),G+=1}for(var R=y.edges,S=y.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;U<2;++U){for(var V=0;V<3;++V)B[3*H+V]=u[V];for(var V=0;V<4;++V)C[4*H+V]=J[V];E[H]=n;var W=S[T[U]];D[2*H]=N*(P*W[0]-Q*W[1]+F[0]),D[2*H+1]=N*(Q*W[0]+P*W[1]+F[1]),H+=1}n+=1}this.vertexCount=o,this.lineVertexCount=p,this.pointBuffer.update(B),this.colorBuffer.update(C),this.glyphBuffer.update(D),this.idBuffer.update(new Uint32Array(E)),q.free(B),q.free(C),q.free(D),q.free(E),this.bounds=[g,h],this.points=d,this.pointCount=d.length}},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":214,"./lib/shaders":215,"gl-buffer":128,"gl-mat4/multiply":151,"gl-vao":236,"typedarray-pool":496}],217:[function(a,b,c){"use strict";c.boxVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",c.boxFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],218:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.boxBuffer=b,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-(1/0),-(1/0)],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function e(a,b){var c=a.gl,e=g(c,[0,0,0,1,1,0,1,1]),i=f(c,h.boxVertex,h.boxFragment),j=new d(a,e,i);return j.update(b),a.addOverlay(j),j}var f=a("gl-shader"),g=a("gl-buffer"),h=a("./lib/shaders");b.exports=e;var i=d.prototype;i.draw=function(){if(this.enabled){var a=this.plot,b=this.selectBox,c=this.borderWidth,d=(this.innerFill,this.innerColor),e=(this.outerFill,this.outerColor),f=this.borderColor,g=a.box,h=a.screenBox,i=a.dataBox,j=a.viewBox,k=a.pixelRatio,l=(b[0]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],m=(b[1]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1],n=(b[2]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],o=(b[3]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1];if(l=Math.max(l,j[0]),m=Math.max(m,j[1]),n=Math.min(n,j[2]),o=Math.min(o,j[3]),!(n<l||o<m)){g.bind();var p=h[2]-h[0],q=h[3]-h[1];if(this.outerFill&&(g.drawBox(0,0,p,m,e),g.drawBox(0,m,l,o,e),g.drawBox(0,o,p,q,e),g.drawBox(n,m,p,o,e)),this.innerFill&&g.drawBox(l,m,n,o,d),c>0){var r=c*k;g.drawBox(l-r,m-r,n+r,m+r,f),g.drawBox(l-r,o-r,n+r,o+r,f),g.drawBox(l-r,m-r,l+r,o+r,f),g.drawBox(n-r,m-r,n+r,o+r,f)}}}},i.update=function(a){a=a||{},this.innerFill=!!a.innerFill,this.outerFill=!!a.outerFill,this.innerColor=(a.innerColor||[0,0,0,.5]).slice(),this.outerColor=(a.outerColor||[0,0,0,.5]).slice(),this.borderColor=(a.borderColor||[0,0,0,1]).slice(),this.borderWidth=a.borderWidth||0,this.selectBox=(a.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":217,"gl-buffer":128,"gl-shader":220}],219:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.coord=[a,b],this.id=c,this.value=d,this.distance=e}function e(a,b,c){this.gl=a,this.fbo=b,this.buffer=c,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(b.bind(),a.readPixels(0,0,b.shape[0],b.shape[1],a.RGBA,a.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}function f(a,b){var c=g(a,b),d=h.mallocUint8(b[0]*b[1]*4);return new e(a,c,d)}b.exports=f;var g=a("gl-fbo"),h=a("typedarray-pool"),i=a("ndarray"),j=a("bit-twiddle").nextPow2,k=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_49_arg0_<255||_inline_49_arg1_<255||_inline_49_arg2_<255||_inline_49_arg3_<255){var _inline_49_l=_inline_49_arg4_-_inline_49_arg6_[0],_inline_49_a=_inline_49_arg5_-_inline_49_arg6_[1],_inline_49_f=_inline_49_l*_inline_49_l+_inline_49_a*_inline_49_a;_inline_49_f<this_closestD2&&(this_closestD2=_inline_49_f,this_closestX=_inline_49_arg6_[0],this_closestY=_inline_49_arg6_[1])}}",args:[{name:"_inline_49_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_49_a","_inline_49_f","_inline_49_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),l=e.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var b=this.fbo.shape[0],c=this.fbo.shape[1];if(c*b*4>this.buffer.length){h.free(this.buffer);for(var d=this.buffer=h.mallocUint8(j(c*b*4)),e=0;e<c*b*4;++e)d[e]=255}return a}}}),l.begin=function(){var a=this.gl;this.shape,a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},l.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(a,b,c){if(!this.gl)return null;var e=this.fbo.shape.slice();a=0|a,b=0|b,"number"!=typeof c&&(c=1);var f=0|Math.min(Math.max(a-c,0),e[0]),g=0|Math.min(Math.max(a+c,0),e[0]),h=0|Math.min(Math.max(b-c,0),e[1]),j=0|Math.min(Math.max(b+c,0),e[1]);if(g<=f||j<=h)return null;var l=[g-f,j-h],m=i(this.buffer,[l[0],l[1],4],[4,4*e[0],1],4*(f+e[0]*h)),n=k(m.hi(l[0],l[1],1),c,c),o=n[0],p=n[1];if(o<0||Math.pow(this.radius,2)<n[2])return null;var q=m.get(o,p,0),r=m.get(o,p,1),s=m.get(o,p,2),t=m.get(o,p,3);return new d(o+f|0,p+h|0,q,[r,s,t],Math.sqrt(n[2]))},l.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":54,"cwise/lib/wrapper":94,"gl-fbo":135,ndarray:427,"typedarray-pool":496}],220:[function(a,b,c){"use strict";function d(a){this.gl=a,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},m.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,u,v);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);for(var t=[],u=[],v=[],w=0;w<d.length;++w){var x=d[w];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;A<y;++A)z[A]=v.length,u.push(x.name+"["+A+"]"),"number"==typeof x.location?v.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?v.push(0|x.location[A]):v.push(-1);t.push({name:x.name,type:x.type,locations:z})}else t.push({name:x.name,type:x.type,locations:[v.length]}),u.push(x.name),"number"==typeof x.location?v.push(0|x.location):v.push(-1)}for(var B=0,w=0;w<v.length;++w)if(v[w]<0){for(;v.indexOf(B)>=0;)B+=1;v[w]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,t,v),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":221,"./lib/create-attributes":222,"./lib/create-uniforms":223,"./lib/reflect":224,"./lib/runtime-reflect":225,"./lib/shader-cache":226}],221:[function(a,b,c){arguments[4][181][0].apply(c,arguments)},{dup:181}],222:[function(a,b,c){arguments[4][182][0].apply(c,arguments)},{"./GLError":221,dup:182}],223:[function(a,b,c){arguments[4][183][0].apply(c,arguments)},{"./GLError":221,"./reflect":224,dup:183}],224:[function(a,b,c){arguments[4][184][0].apply(c,arguments)},{dup:184}],225:[function(a,b,c){arguments[4][185][0].apply(c,arguments)},{dup:185}],226:[function(a,b,c){arguments[4][186][0].apply(c,arguments)},{"./GLError":221,dup:186,"gl-format-compiler-error":136,"weakmap-shim":517}],227:[function(a,b,c){"use strict";function d(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function e(a,b){var c=new d(a);return c.update(b),a.addOverlay(c),c}b.exports=e;var f=d.prototype;f.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},f.draw=function(){var a=this.enable,b=this.width,c=this.color,d=this.center,e=this.plot,f=e.line,g=e.dataBox,h=e.viewBox;if(f.bind(),g[0]<=d[0]&&d[0]<=g[2]&&g[1]<=d[1]&&d[1]<=g[3]){var i=h[0]+(d[0]-g[0])/(g[2]-g[0])*(h[2]-h[0]),j=h[1]+(d[1]-g[1])/(g[3]-g[1])*(h[3]-h[1]);a[0]&&f.drawLine(i,j,h[0],j,b[0],c[0]),a[1]&&f.drawLine(i,j,i,h[1],b[1],c[1]),a[2]&&f.drawLine(i,j,h[2],j,b[2],c[2]),a[3]&&f.drawLine(i,j,i,h[3],b[3],c[3])}},f.dispose=function(){this.plot.removeOverlay(this)}},{}],228:[function(a,b,c){"use strict";var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":220}],229:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function e(a,b){function c(a,b,c,d,f,g){var h=[a,b,c,0,0,0,1];h[d+3]=1,h[d]=f,e.push.apply(e,h),h[6]=-1,e.push.apply(e,h),h[d]=g,e.push.apply(e,h),e.push.apply(e,h),h[6]=1,e.push.apply(e,h),h[d]=f,e.push.apply(e,h)}var e=[];c(0,0,0,0,0,1),c(0,0,0,1,0,1),c(0,0,0,2,0,1),c(1,0,0,1,-1,1),c(1,0,0,2,-1,1),c(0,1,0,0,-1,1),c(0,1,0,2,-1,1),c(0,0,1,0,-1,1),c(0,0,1,1,-1,1);var i=f(a,e),j=g(a,[{type:a.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:a.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:a.FLOAT,buffer:i,size:1,offset:24,stride:28}]),k=h(a);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.weight.location=2;var l=new d(a,i,j,k);return l.update(b),l}var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders/index");b.exports=e;var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],j=d.prototype,k=[0,0,0],l=[0,0,0],m=[0,0];j.isTransparent=function(){return!1},j.drawTransparent=function(a){},j.draw=function(a){var b=this.gl,c=this.vao,d=this.shader;c.bind(),d.bind();var e,f=a.model||i,g=a.view||i,h=a.projection||i;this.axes&&(e=this.axes.lastCubeProps.axis);for(var j=k,n=l,o=0;o<3;++o)e&&e[o]<0?(j[o]=this.bounds[0][o],n[o]=this.bounds[1][o]):(j[o]=this.bounds[1][o],n[o]=this.bounds[0][o]);m[0]=b.drawingBufferWidth,m[1]=b.drawingBufferHeight,d.uniforms.model=f,d.uniforms.view=g,d.uniforms.projection=h,d.uniforms.coordinates=[this.position,j,n],d.uniforms.colors=this.colors,d.uniforms.screenShape=m;for(var o=0;o<3;++o)d.uniforms.lineWidth=this.lineWidth[o]*this.pixelRatio,this.enabled[o]&&(c.draw(b.TRIANGLES,6,6*o),this.drawSides[o]&&c.draw(b.TRIANGLES,12,18+12*o));c.unbind()},j.update=function(a){a&&("bounds"in a&&(this.bounds=a.bounds),"position"in a&&(this.position=a.position),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"colors"in a&&(this.colors=a.colors),"enabled"in a&&(this.enabled=a.enabled),"drawSides"in a&&(this.drawSides=a.drawSides))},j.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":228,"gl-buffer":128,"gl-vao":236}],230:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",g="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",h="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n";c.createShader=function(a){var b=d(a,e,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createPickShader=function(a){var b=d(a,e,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createContourShader=function(a){var b=d(a,g,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b},c.createPickContourShader=function(a){var b=d(a,g,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,
b}},{"gl-shader":220}],231:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.position=a,this.index=b,this.uv=c,this.level=d,this.dataCoordinate=e}function e(a){var b=u([s({colormap:a,nshades:K,format:"rgba"}).map(function(a){return[a[0],a[1],a[2],255*a[3]]})]);return t.divseq(b,255),b}function f(a,b,c,e,f,g,h,i,j,k,l,m,n,o){this.gl=a,this.shape=b,this.bounds=c,this.intensityBounds=[],this._shader=e,this._pickShader=f,this._coordinateBuffer=g,this._vao=h,this._colorMap=i,this._contourShader=j,this._contourPickShader=k,this._contourBuffer=l,this._contourVAO=m,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new d([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=n,this._dynamicVAO=o,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}function g(a,b){var c,d,e,f=b.axes&&b.axes.lastCubeProps.axis||M,g=b.showSurface,h=b.showContour;for(c=0;c<3;++c)for(g=g||b.surfaceProject[c],d=0;d<3;++d)h=h||b.contourProject[c][d];for(c=0;c<3;++c){var i=N.projections[c];for(d=0;d<16;++d)i[d]=0;for(d=0;d<4;++d)i[5*d]=1;i[5*c]=0,i[12+c]=b.axesBounds[+(f[c]>0)][c],x(i,a.model,i);var j=N.clipBounds[c];for(e=0;e<2;++e)for(d=0;d<3;++d)j[e][d]=a.clipBounds[e][d];j[0][c]=-1e8,j[1][c]=1e8}return N.showSurface=g,N.showContour=h,N}function h(a,b){a=a||{};var c=this.gl;c.disable(c.CULL_FACE),this._colorMap.bind(0);var d=O;d.model=a.model||H,d.view=a.view||H,d.projection=a.projection||H,d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],d.contourColor=this.contourColor[0],d.inverseModel=y(d.inverseModel,d.model);for(var e=0;e<2;++e)for(var f=d.clipBounds[e],h=0;h<3;++h)f[h]=Math.min(Math.max(this.clipBounds[e][h],-1e8),1e8);d.kambient=this.ambientLight,d.kdiffuse=this.diffuseLight,d.kspecular=this.specularLight,d.roughness=this.roughness,d.fresnel=this.fresnel,d.opacity=this.opacity,d.height=0,d.permutation=Q,d.vertexColor=this.vertexColor;var i=P;for(x(i,d.view,d.model),x(i,d.projection,i),y(i,i),e=0;e<3;++e)d.eyePosition[e]=i[12+e]/i[15];var j=i[15];for(e=0;e<3;++e)j+=this.lightPosition[e]*i[4*e+3];for(e=0;e<3;++e){var k=i[12+e];for(h=0;h<3;++h)k+=i[4*h+e]*this.lightPosition[h];d.lightPosition[e]=k/j}var l=g(d,this);if(l.showSurface&&b===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=d,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(c.TRIANGLES,this._vertexCount),e=0;e<3;++e)this.surfaceProject[e]&&this.vertexCount&&(this._shader.uniforms.model=l.projections[e],this._shader.uniforms.clipBounds=l.clipBounds[e],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(l.showContour&&!b){var m=this._contourShader;d.kambient=1,d.kdiffuse=0,d.kspecular=0,d.opacity=1,m.bind(),m.uniforms=d;var n=this._contourVAO;for(n.bind(),e=0;e<3;++e)for(m.uniforms.permutation=J[e],c.lineWidth(this.contourWidth[e]),h=0;h<this.contourLevels[e].length;++h)this._contourCounts[e][h]&&(h===this.highlightLevel[e]?(m.uniforms.contourColor=this.highlightColor[e],m.uniforms.contourTint=this.highlightTint[e]):0!==h&&h-1!==this.highlightLevel[e]||(m.uniforms.contourColor=this.contourColor[e],m.uniforms.contourTint=this.contourTint[e]),m.uniforms.height=this.contourLevels[e][h],n.draw(c.LINES,this._contourCounts[e][h],this._contourOffsets[e][h]));for(e=0;e<3;++e)for(m.uniforms.model=l.projections[e],m.uniforms.clipBounds=l.clipBounds[e],h=0;h<3;++h)if(this.contourProject[e][h]){m.uniforms.permutation=J[h],c.lineWidth(this.contourWidth[h]);for(var o=0;o<this.contourLevels[h].length;++o)o===this.highlightLevel[h]?(m.uniforms.contourColor=this.highlightColor[h],m.uniforms.contourTint=this.highlightTint[h]):0!==o&&o-1!==this.highlightLevel[h]||(m.uniforms.contourColor=this.contourColor[h],m.uniforms.contourTint=this.contourTint[h]),m.uniforms.height=this.contourLevels[h][o],n.draw(c.LINES,this._contourCounts[h][o],this._contourOffsets[h][o])}for(n=this._dynamicVAO,n.bind(),e=0;e<3;++e)if(0!==this._dynamicCounts[e])for(m.uniforms.model=d.model,m.uniforms.clipBounds=d.clipBounds,m.uniforms.permutation=J[e],c.lineWidth(this.dynamicWidth[e]),m.uniforms.contourColor=this.dynamicColor[e],m.uniforms.contourTint=this.dynamicTint[e],m.uniforms.height=this.dynamicLevel[e],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]),h=0;h<3;++h)this.contourProject[h][e]&&(m.uniforms.model=l.projections[h],m.uniforms.clipBounds=l.clipBounds[h],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]));n.unbind()}}function i(a,b){var c=b.shape.slice(),d=a.shape.slice();t.assign(a.lo(1,1).hi(c[0],c[1]),b),t.assign(a.lo(1).hi(c[0],1),b.hi(c[0],1)),t.assign(a.lo(1,d[1]-1).hi(c[0],1),b.lo(0,c[1]-1).hi(c[0],1)),t.assign(a.lo(0,1).hi(1,c[1]),b.hi(1)),t.assign(a.lo(d[0]-1,1).hi(1,c[1]),b.lo(c[0]-1)),a.set(0,0,b.get(0,0)),a.set(0,d[1]-1,b.get(0,c[1]-1)),a.set(d[0]-1,0,b.get(c[0]-1,0)),a.set(d[0]-1,d[1]-1,b.get(c[0]-1,c[1]-1))}function j(a,b){return Array.isArray(a)?[b(a[0]),b(a[1]),b(a[2])]:[b(a),b(a),b(a)]}function k(a){return Array.isArray(a)?3===a.length?[a[0],a[1],a[2],1]:[a[0],a[1],a[2],a[3]]:[0,0,0,1]}function l(a){if(Array.isArray(a)){if(Array.isArray(a))return[k(a[0]),k(a[1]),k(a[2])];var b=k(a);return[b.slice(),b.slice(),b.slice()]}}function m(a){var b=a.gl,c=C(b),d=E(b),e=D(b),g=F(b),h=o(b),i=p(b,[{buffer:h,size:4,stride:G,offset:0},{buffer:h,size:3,stride:G,offset:16},{buffer:h,size:3,stride:G,offset:28}]),j=o(b),k=p(b,[{buffer:j,size:4,stride:20,offset:0},{buffer:j,size:1,stride:20,offset:16}]),l=o(b),m=p(b,[{buffer:l,size:2,type:b.FLOAT}]),n=q(b,1,K,b.RGBA,b.UNSIGNED_BYTE);n.minFilter=b.LINEAR,n.magFilter=b.LINEAR;var r=new f(b,[0,0],[[0,0,0],[0,0,0]],c,d,h,i,n,e,g,j,k,l,m),s={levels:[[],[],[]]};for(var t in a)s[t]=a[t];return s.colormap=s.colormap||"jet",r.update(s),r}b.exports=m;var n=a("bit-twiddle"),o=a("gl-buffer"),p=a("gl-vao"),q=a("gl-texture2d"),r=a("typedarray-pool"),s=a("colormap"),t=a("ndarray-ops"),u=a("ndarray-pack"),v=a("ndarray"),w=a("surface-nets"),x=a("gl-mat4/multiply"),y=a("gl-mat4/invert"),z=a("binary-search-bounds"),A=a("ndarray-gradient"),B=a("./lib/shaders"),C=B.createShader,D=B.createContourShader,E=B.createPickShader,F=B.createPickContourShader,G=40,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],J=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var a=0;a<3;++a){var b=J[a],c=(a+1)%3,d=(a+2)%3;b[c+0]=1,b[d+3]=1,b[a+6]=1}}();var K=256,L=f.prototype;L.isTransparent=function(){return this.opacity<1},L.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;a<3;++a)if(this._contourCounts[a].length>0||this._dynamicCounts[a]>0)return!0;return!1},L.pickSlots=1,L.setPickBase=function(a){this.pickId=a};var M=[0,0,0],N={showSurface:!1,showContour:!1,projections:[H.slice(),H.slice(),H.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:H,view:H,projection:H,inverseModel:H.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},P=H.slice(),Q=[1,0,0,0,1,0,0,0,1];L.draw=function(a){return h.call(this,a,!1)},L.drawTransparent=function(a){return h.call(this,a,!0)};var R={model:H,view:H,projection:H,inverseModel:H,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};L.drawPick=function(a){a=a||{};var b=this.gl;b.disable(b.CULL_FACE);var c=R;c.model=a.model||H,c.view=a.view||H,c.projection=a.projection||H,c.shape=this._field[2].shape,c.pickId=this.pickId/255,c.lowerBound=this.bounds[0],c.upperBound=this.bounds[1],c.permutation=Q;for(var d=0;d<2;++d)for(var e=c.clipBounds[d],f=0;f<3;++f)e[f]=Math.min(Math.max(this.clipBounds[d][f],-1e8),1e8);var h=g(c,this);if(h.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=c,this._vao.bind(),this._vao.draw(b.TRIANGLES,this._vertexCount),d=0;d<3;++d)this.surfaceProject[d]&&(this._pickShader.uniforms.model=h.projections[d],this._pickShader.uniforms.clipBounds=h.clipBounds[d],this._vao.draw(b.TRIANGLES,this._vertexCount));this._vao.unbind()}if(h.showContour){var i=this._contourPickShader;i.bind(),i.uniforms=c;var j=this._contourVAO;for(j.bind(),f=0;f<3;++f)for(b.lineWidth(this.contourWidth[f]),i.uniforms.permutation=J[f],d=0;d<this.contourLevels[f].length;++d)this._contourCounts[f][d]&&(i.uniforms.height=this.contourLevels[f][d],j.draw(b.LINES,this._contourCounts[f][d],this._contourOffsets[f][d]));for(d=0;d<3;++d)for(i.uniforms.model=h.projections[d],i.uniforms.clipBounds=h.clipBounds[d],f=0;f<3;++f)if(this.contourProject[d][f]){i.uniforms.permutation=J[f],b.lineWidth(this.contourWidth[f]);for(var k=0;k<this.contourLevels[f].length;++k)this._contourCounts[f][k]&&(i.uniforms.height=this.contourLevels[f][k],j.draw(b.LINES,this._contourCounts[f][k],this._contourOffsets[f][k]))}j.unbind()}},L.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=this._field[2].shape,c=this._pickResult,d=b[0]*(a.value[0]+(a.value[2]>>4)/16)/255,e=Math.floor(d),f=d-e,g=b[1]*(a.value[1]+(15&a.value[2])/16)/255,h=Math.floor(g),i=g-h;e+=1,h+=1;var j=c.position;j[0]=j[1]=j[2]=0;for(var k=0;k<2;++k)for(var l=k?f:1-f,m=0;m<2;++m)for(var n=m?i:1-i,o=e+k,p=h+m,q=l*n,r=0;r<3;++r)j[r]+=this._field[r].get(o,p)*q;for(var s=this._pickResult.level,t=0;t<3;++t)if(s[t]=z.le(this.contourLevels[t],j[t]),s[t]<0)this.contourLevels[t].length>0&&(s[t]=0);else if(s[t]<this.contourLevels[t].length-1){var u=this.contourLevels[t][s[t]],v=this.contourLevels[t][s[t]+1];Math.abs(u-j[t])>Math.abs(v-j[t])&&(s[t]+=1)}for(c.index[0]=f<.5?e:e+1,c.index[1]=i<.5?h:h+1,c.uv[0]=d/b[0],c.uv[1]=g/b[1],r=0;r<3;++r)c.dataCoordinate[r]=this._field[r].get(c.index[0],c.index[1]);return c},L.update=function(a){a=a||{},this.dirty=!0,"contourWidth"in a&&(this.contourWidth=j(a.contourWidth,Number)),"showContour"in a&&(this.showContour=j(a.showContour,Boolean)),"showSurface"in a&&(this.showSurface=!!a.showSurface),"contourTint"in a&&(this.contourTint=j(a.contourTint,Boolean)),"contourColor"in a&&(this.contourColor=l(a.contourColor)),"contourProject"in a&&(this.contourProject=j(a.contourProject,function(a){return j(a,Boolean)})),"surfaceProject"in a&&(this.surfaceProject=a.surfaceProject),"dynamicColor"in a&&(this.dynamicColor=l(a.dynamicColor)),"dynamicTint"in a&&(this.dynamicTint=j(a.dynamicTint,Number)),"dynamicWidth"in a&&(this.dynamicWidth=j(a.dynamicWidth,Number)),"opacity"in a&&(this.opacity=a.opacity),"colorBounds"in a&&(this.colorBounds=a.colorBounds),"vertexColor"in a&&(this.vertexColor=a.vertexColor?1:0);var b=a.field||a.coords&&a.coords[2]||null,c=!1;if(b||(b=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in a||"coords"in a){var d=(b.shape[0]+2)*(b.shape[1]+2);d>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(n.nextPow2(d))),this._field[2]=v(this._field[2].data,[b.shape[0]+2,b.shape[1]+2]),i(this._field[2],b),this.shape=b.shape.slice();for(var f=this.shape,g=0;g<2;++g)this._field[2].size>this._field[g].data.length&&(r.freeFloat(this._field[g].data),this._field[g].data=r.mallocFloat(this._field[2].size)),this._field[g]=v(this._field[g].data,[f[0]+2,f[1]+2]);if(a.coords){var h=a.coords;if(!Array.isArray(h)||3!==h.length)throw new Error("gl-surface: invalid coordinates for x/y");for(g=0;g<2;++g){var k=h[g];for(s=0;s<2;++s)if(k.shape[s]!==f[s])throw new Error("gl-surface: coords have incorrect shape");i(this._field[g],k)}}else if(a.ticks){var m=a.ticks;if(!Array.isArray(m)||2!==m.length)throw new Error("gl-surface: invalid ticks");for(g=0;g<2;++g){var o=m[g];if((Array.isArray(o)||o.length)&&(o=v(o)),o.shape[0]!==f[g])throw new Error("gl-surface: invalid tick length");var p=v(o.data,f);p.stride[g]=o.stride[0],p.stride[1^g]=0,i(this._field[g],p)}}else{for(g=0;g<2;++g){var q=[0,0];q[g]=1,this._field[g]=v(this._field[g].data,[f[0]+2,f[1]+2],q,0)}this._field[0].set(0,0,0);for(var s=0;s<f[0];++s)this._field[0].set(s+1,0,s);for(this._field[0].set(f[0]+1,0,f[0]-1),this._field[1].set(0,0,0),s=0;s<f[1];++s)this._field[1].set(0,s+1,s);this._field[1].set(0,f[1]+1,f[1]-1)}var t=this._field,u=v(r.mallocFloat(3*t[2].size*2),[3,f[0]+2,f[1]+2,2]);for(g=0;g<3;++g)A(u.pick(g),t[g],"mirror");var x=v(r.mallocFloat(3*t[2].size),[f[0]+2,f[1]+2,3]);for(g=0;g<f[0]+2;++g)for(s=0;s<f[1]+2;++s){var y=u.get(0,g,s,0),z=u.get(0,g,s,1),B=u.get(1,g,s,0),C=u.get(1,g,s,1),D=u.get(2,g,s,0),E=u.get(2,g,s,1),F=B*E-C*D,G=D*z-E*y,H=y*C-z*B,J=Math.sqrt(F*F+G*G+H*H);J<1e-8?(J=Math.max(Math.abs(F),Math.abs(G),Math.abs(H)),J<1e-8?(H=1,G=F=0,J=1):J=1/J):J=1/Math.sqrt(J),x.set(g,s,0,F*J),x.set(g,s,1,G*J),x.set(g,s,2,H*J)}r.free(u.data);var K=[1/0,1/0,1/0],L=[-(1/0),-(1/0),-(1/0)],M=1/0,N=-(1/0),O=(f[0]-1)*(f[1]-1)*6,P=r.mallocFloat(n.nextPow2(10*O)),Q=0,R=0;for(g=0;g<f[0]-1;++g)a:for(s=0;s<f[1]-1;++s){for(var S=0;S<2;++S)for(var T=0;T<2;++T)for(var U=0;U<3;++U){var V=this._field[U].get(1+g+S,1+s+T);if(isNaN(V)||!isFinite(V))continue a}for(U=0;U<6;++U){var W=g+I[U][0],X=s+I[U][1],Y=this._field[0].get(W+1,X+1),Z=this._field[1].get(W+1,X+1);V=this._field[2].get(W+1,X+1);var $=V;F=x.get(W+1,X+1,0),G=x.get(W+1,X+1,1),H=x.get(W+1,X+1,2),a.intensity&&($=a.intensity.get(W,X)),P[Q++]=W,P[Q++]=X,P[Q++]=Y,P[Q++]=Z,P[Q++]=V,P[Q++]=0,P[Q++]=$,P[Q++]=F,P[Q++]=G,P[Q++]=H,K[0]=Math.min(K[0],Y),K[1]=Math.min(K[1],Z),K[2]=Math.min(K[2],V),M=Math.min(M,$),L[0]=Math.max(L[0],Y),L[1]=Math.max(L[1],Z),L[2]=Math.max(L[2],V),N=Math.max(N,$),R+=1}}for(a.intensityBounds&&(M=+a.intensityBounds[0],N=+a.intensityBounds[1]),g=6;g<Q;g+=10)P[g]=(P[g]-M)/(N-M);this._vertexCount=R,this._coordinateBuffer.update(P.subarray(0,Q)),r.freeFloat(P),r.free(x.data),this.bounds=[K,L],this.intensity=a.intensity||this._field[2],this.intensityBounds[0]===M&&this.intensityBounds[1]===N||(c=!0),this.intensityBounds=[M,N]}if("levels"in a){var _=a.levels;for(_=Array.isArray(_[0])?_.slice():[[],[],_],g=0;g<3;++g)_[g]=_[g].slice(),_.sort(function(a,b){return a-b});a:for(g=0;g<3;++g){if(_[g].length!==this.contourLevels[g].length){c=!0;break}for(s=0;s<_[g].length;++s)if(_[g][s]!==this.contourLevels[g][s]){c=!0;break a}}this.contourLevels=_}if(c){t=this._field,f=this.shape;for(var aa=[],ba=0;ba<3;++ba){_=this.contourLevels[ba];var ca=[],da=[],ea=[0,0,0];for(g=0;g<_.length;++g){var fa=w(this._field[ba],_[g]);ca.push(aa.length/5|0),R=0;a:for(s=0;s<fa.cells.length;++s){var ga=fa.cells[s];for(U=0;U<2;++U){var ha=fa.positions[ga[U]],ia=ha[0],ja=0|Math.floor(ia),ka=ia-ja,la=ha[1],ma=0|Math.floor(la),na=la-ma,oa=!1;b:for(var pa=0;pa<3;++pa){ea[pa]=0;var qa=(ba+pa+1)%3;for(S=0;S<2;++S){var ra=S?ka:1-ka;for(W=0|Math.min(Math.max(ja+S,0),f[0]),T=0;T<2;++T){var sa=T?na:1-na;if(X=0|Math.min(Math.max(ma+T,0),f[1]),V=pa<2?this._field[qa].get(W,X):(this.intensity.get(W,X)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(V)||isNaN(V)){oa=!0;break b}var ta=ra*sa;ea[pa]+=ta*V}}}if(oa){if(U>0){for(var ua=0;ua<5;++ua)aa.pop();R-=1}continue a}aa.push(ea[0],ea[1],ha[0],ha[1],ea[2]),R+=1}}da.push(R)}this._contourOffsets[ba]=ca,this._contourCounts[ba]=da}var va=r.mallocFloat(aa.length);for(g=0;g<aa.length;++g)va[g]=aa[g];this._contourBuffer.update(va),r.freeFloat(va)}a.colormap&&this._colorMap.setPixels(e(a.colormap))},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var a=0;a<3;++a)r.freeFloat(this._field[a].data)},L.highlight=function(a){if(!a)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var b=0;b<3;++b)this.enableHighlight[b]?this.highlightLevel[b]=a.level[b]:this.highlightLevel[b]=-1;var c;if(c=this.snapToData?a.dataCoordinate:a.position,this.enableDynamic[0]&&c[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&c[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&c[2]!==this.dynamicLevel[2]){for(var d=0,e=this.shape,f=r.mallocFloat(12*e[0]*e[1]),g=0;g<3;++g)if(this.enableDynamic[g]){this.dynamicLevel[g]=c[g];var h=(g+1)%3,i=(g+2)%3,j=this._field[g],k=this._field[h],l=this._field[i],m=(this.intensity,w(j,c[g])),n=m.cells,o=m.positions;for(this._dynamicOffsets[g]=d,b=0;b<n.length;++b)for(var p=n[b],q=0;q<2;++q){var s=o[p[q]],t=+s[0],u=0|t,v=0|Math.min(u+1,e[0]),x=t-u,y=1-x,z=+s[1],A=0|z,B=0|Math.min(A+1,e[1]),C=z-A,D=1-C,E=y*D,F=y*C,G=x*D,H=x*C,I=E*k.get(u,A)+F*k.get(u,B)+G*k.get(v,A)+H*k.get(v,B),J=E*l.get(u,A)+F*l.get(u,B)+G*l.get(v,A)+H*l.get(v,B);if(isNaN(I)||isNaN(J)){q&&(d-=1);break}f[2*d+0]=I,f[2*d+1]=J,d+=1}this._dynamicCounts[g]=d-this._dynamicOffsets[g]}else this.dynamicLevel[g]=NaN,this._dynamicCounts[g]=0;this._dynamicBuffer.update(f.subarray(0,2*d)),r.freeFloat(f)}}},{"./lib/shaders":230,"binary-search-bounds":53,"bit-twiddle":54,colormap:80,"gl-buffer":128,"gl-mat4/invert":149,"gl-mat4/multiply":151,"gl-texture2d":232,"gl-vao":236,ndarray:427,"ndarray-gradient":418,"ndarray-ops":421,"ndarray-pack":422,"surface-nets":487,"typedarray-pool":496}],232:[function(a,b,c){"use strict";function d(a){q=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],r=[a.NEAREST,a.LINEAR,a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],s=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]}function e(a,b,c){var d=a.gl,e=d.getParameter(d.MAX_TEXTURE_SIZE);if(b<0||b>e||c<0||c>e)throw new Error("gl-texture2d: Invalid texture size");return a._shape=[b,c],a.bind(),d.texImage2D(d.TEXTURE_2D,0,a.format,b,c,0,a.format,a.type,null),a._mipLevels=[0],a}function f(a,b,c,d,e,f){this.gl=a,this.handle=b,this.format=e,this.type=f,this._shape=[c,d],this._mipLevels=[0],this._magFilter=a.NEAREST,this._minFilter=a.NEAREST,this._wrapS=a.CLAMP_TO_EDGE,this._wrapT=a.CLAMP_TO_EDGE,this._anisoSamples=1;var g=this,h=[this._wrapS,this._wrapT];Object.defineProperties(h,[{get:function(){return g._wrapS},set:function(a){return g.wrapS=a}},{get:function(){return g._wrapT},set:function(a){return g.wrapT=a}}]),this._wrapVector=h;var i=[this._shape[0],this._shape[1]];Object.defineProperties(i,[{get:function(){return g._shape[0]},set:function(a){return g.width=a}},{get:function(){return g._shape[1]},set:function(a){return g.height=a}}]),this._shapeVector=i}function g(a,b){return 3===a.length?1===b[2]&&b[1]===a[0]*a[2]&&b[0]===a[2]:1===b[0]&&b[1]===a[0]}function h(a,b,c,d,e,f,h,i){var j=i.dtype,k=i.shape.slice();if(k.length<2||k.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var l=0,m=0,q=g(k,i.stride.slice());"float32"===j?l=a.FLOAT:"float64"===j?(l=a.FLOAT,q=!1,j="float32"):"uint8"===j?l=a.UNSIGNED_BYTE:(l=a.UNSIGNED_BYTE,q=!1,j="uint8");var r=1;if(2===k.length)m=a.LUMINANCE,k=[k[0],k[1],1],i=n(i.data,k,[i.stride[0],i.stride[1],1],i.offset);else{if(3!==k.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===k[2])m=a.ALPHA;else if(2===k[2])m=a.LUMINANCE_ALPHA;else if(3===k[2])m=a.RGB;else{if(4!==k[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=a.RGBA}r=k[2]}if(m!==a.LUMINANCE&&m!==a.ALPHA||e!==a.LUMINANCE&&e!==a.ALPHA||(m=e),m!==e)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var s=i.size,u=h.indexOf(d)<0;if(u&&h.push(d),l===f&&q)0===i.offset&&i.data.length===s?u?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data):u?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data.subarray(i.offset,i.offset+s)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data.subarray(i.offset,i.offset+s));else{var v;v=f===a.FLOAT?p.mallocFloat32(s):p.mallocUint8(s);var w=n(v,k,[k[2],k[2]*k[0],1]);l===a.FLOAT&&f===a.UNSIGNED_BYTE?t(w,i):o.assign(w,i),u?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,v.subarray(0,s)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,v.subarray(0,s)),f===a.FLOAT?p.freeFloat32(v):p.freeUint8(v)}}function i(a){var b=a.createTexture();return a.bindTexture(a.TEXTURE_2D,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),b}function j(a,b,c,d,e){var g=a.getParameter(a.MAX_TEXTURE_SIZE);if(b<0||b>g||c<0||c>g)throw new Error("gl-texture2d: Invalid texture shape");if(e===a.FLOAT&&!a.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var h=i(a);return a.texImage2D(a.TEXTURE_2D,0,d,b,c,0,d,e,null),new f(a,h,b,c,d,e)}function k(a,b,c,d){var e=i(a);return a.texImage2D(a.TEXTURE_2D,0,c,c,d,b),new f(a,e,0|b.width,0|b.height,c,d)}function l(a,b){var c=b.dtype,d=b.shape.slice(),e=a.getParameter(a.MAX_TEXTURE_SIZE);if(d[0]<0||d[0]>e||d[1]<0||d[1]>e)throw new Error("gl-texture2d: Invalid texture size");var h=g(d,b.stride.slice()),j=0;"float32"===c?j=a.FLOAT:"float64"===c?(j=a.FLOAT,h=!1,c="float32"):"uint8"===c?j=a.UNSIGNED_BYTE:(j=a.UNSIGNED_BYTE,h=!1,c="uint8");var k=0;if(2===d.length)k=a.LUMINANCE,d=[d[0],d[1],1],b=n(b.data,d,[b.stride[0],b.stride[1],1],b.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])k=a.ALPHA;else if(2===d[2])k=a.LUMINANCE_ALPHA;else if(3===d[2])k=a.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");k=a.RGBA}}j!==a.FLOAT||a.getExtension("OES_texture_float")||(j=a.UNSIGNED_BYTE,h=!1);var l,m,q=b.size;if(h)l=0===b.offset&&b.data.length===q?b.data:b.data.subarray(b.offset,b.offset+q);else{var r=[d[2],d[2]*d[0],1];m=p.malloc(q,c);var s=n(m,d,r,0);"float32"!==c&&"float64"!==c||j!==a.UNSIGNED_BYTE?o.assign(s,b):t(s,b),l=m.subarray(0,q)}var u=i(a);return a.texImage2D(a.TEXTURE_2D,0,k,d[0],d[1],0,k,j,l),h||p.free(m),new f(a,u,d[0],d[1],k,j)}function m(a){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(q||d(a),"number"==typeof arguments[1])return j(a,arguments[1],arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return j(a,0|arguments[1][0],0|arguments[1][1],arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var b=arguments[1];if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement||b instanceof HTMLVideoElement||b instanceof ImageData)return k(a,b,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if(b.shape&&b.data&&b.stride)return l(a,b)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var n=a("ndarray"),o=a("ndarray-ops"),p=a("typedarray-pool");b.exports=m;var q=null,r=null,s=null,t=function(a,b){o.muls(a,b,255)},u=f.prototype;Object.defineProperties(u,{minFilter:{get:function(){return this._minFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&q.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),r.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a),this._minFilter=a}},magFilter:{get:function(){return this._magFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&q.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),r.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),this._magFilter=a}},mipSamples:{get:function(){return this._anisoSamples},set:function(a){var b=this._anisoSamples;if(this._anisoSamples=0|Math.max(a,1),b!==this._anisoSamples){var c=this.gl.getExtension("EXT_texture_filter_anisotropic");c&&this.gl.texParameterf(this.gl.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(a){if(this.bind(),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,a),this._wrapS=a}},wrapT:{get:function(){return this._wrapT},set:function(a){if(this.bind(),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,a),this._wrapT=a}},wrap:{get:function(){return this._wrapVector},set:function(a){if(Array.isArray(a)||(a=[a,a]),2!==a.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var b=0;b<2;++b)if(s.indexOf(a[b])<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);this._wrapS=a[0],this._wrapT=a[1];var c=this.gl;return this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),a}},shape:{get:function(){return this._shapeVector},set:function(a){if(Array.isArray(a)){if(2!==a.length)throw new Error("gl-texture2d: Invalid texture shape")}else a=[0|a,0|a];return e(this,0|a[0],0|a[1]),[0|a[0],0|a[1]]}},width:{get:function(){return this._shape[0]},set:function(a){return a=0|a,e(this,a,this._shape[1]),a}},height:{get:function(){return this._shape[1]},set:function(a){return a=0|a,e(this,this._shape[0],a),a}}}),u.bind=function(a){var b=this.gl;return void 0!==a&&b.activeTexture(b.TEXTURE0+(0|a)),b.bindTexture(b.TEXTURE_2D,this.handle),void 0!==a?0|a:b.getParameter(b.ACTIVE_TEXTURE)-b.TEXTURE0},u.dispose=function(){this.gl.deleteTexture(this.handle)},u.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var a=Math.min(this._shape[0],this._shape[1]),b=0;a>0;++b,a>>>=1)this._mipLevels.indexOf(b)<0&&this._mipLevels.push(b)},u.setPixels=function(a,b,c,d){var e=this.gl;if(this.bind(),Array.isArray(b)?(d=c,c=0|b[1],b=0|b[0]):(b=b||0,c=c||0),d=d||0,a instanceof HTMLCanvasElement||a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLVideoElement){var f=this._mipLevels.indexOf(d)<0;f?(e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(d)):e.texSubImage2D(e.TEXTURE_2D,d,b,c,this.format,this.type,a)}else{if(!(a.shape&&a.stride&&a.data))throw new Error("gl-texture2d: Unsupported data type");if(a.shape.length<2||b+a.shape[1]>this._shape[1]>>>d||c+a.shape[0]>this._shape[0]>>>d||b<0||c<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");h(e,b,c,d,this.format,this.type,this._mipLevels,a)}}},{ndarray:427,"ndarray-ops":421,"typedarray-pool":496}],233:[function(a,b,c){"use strict";function d(a,b,c){b?b.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var d=0|a.getParameter(a.MAX_VERTEX_ATTRIBS);if(c){if(c.length>d)throw new Error("gl-vao: Too many vertex attributes");for(var e=0;e<c.length;++e){var f=c[e];if(f.buffer){var g=f.buffer,h=f.size||4,i=f.type||a.FLOAT,j=!!f.normalized,k=f.stride||0,l=f.offset||0;g.bind(),a.enableVertexAttribArray(e),a.vertexAttribPointer(e,h,i,j,k,l)}else{if("number"==typeof f)a.vertexAttrib1f(e,f);else if(1===f.length)a.vertexAttrib1f(e,f[0]);else if(2===f.length)a.vertexAttrib2f(e,f[0],f[1]);else if(3===f.length)a.vertexAttrib3f(e,f[0],f[1],f[2]);else{if(4!==f.length)throw new Error("gl-vao: Invalid vertex attribute");a.vertexAttrib4f(e,f[0],f[1],f[2],f[3])}a.disableVertexAttribArray(e)}}for(;e<d;++e)a.disableVertexAttribArray(e)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var e=0;e<d;++e)a.disableVertexAttribArray(e)}}b.exports=d},{}],234:[function(a,b,c){"use strict";function d(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}function e(a){return new d(a)}var f=a("./do-bind.js");d.prototype.bind=function(){f(this.gl,this._elements,this._attributes)},d.prototype.update=function(a,b,c){this._elements=b,this._attributes=a,this._elementsType=c||this.gl.UNSIGNED_SHORT},d.prototype.dispose=function(){},d.prototype.unbind=function(){},d.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._elements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=e},{"./do-bind.js":233}],235:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this.location=a,this.dimension=b,this.a=c,this.b=d,this.c=e,this.d=f}function e(a,b,c){this.gl=a,this._ext=b,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}function f(a,b){return new e(a,b,b.createVertexArrayOES())}var g=a("./do-bind.js");d.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},e.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},e.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},e.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},e.prototype.update=function(a,b,c){if(this.bind(),g(this.gl,b,a),this.unbind(),this._attribs.length=0,a)for(var e=0;e<a.length;++e){var f=a[e];"number"==typeof f?this._attribs.push(new d(e,1,f)):Array.isArray(f)&&this._attribs.push(new d(e,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!b,this._elementsType=c||this.gl.UNSIGNED_SHORT},e.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._useElements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=f},{"./do-bind.js":233}],236:[function(a,b,c){"use strict";function d(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}function e(a,b,c,e){var h,i=a.createVertexArray?new d(a):a.getExtension("OES_vertex_array_object");return h=i?f(a,i):g(a),h.update(b,c,e),h}var f=a("./lib/vao-native.js"),g=a("./lib/vao-emulated.js");b.exports=e},{"./lib/vao-emulated.js":234,"./lib/vao-native.js":235}],237:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a}b.exports=d},{}],238:[function(a,b,c){function d(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}b.exports=d},{}],239:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)}b.exports=d},{}],240:[function(a,b,c){function d(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a}b.exports=d},{}],241:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a}b.exports=d},{}],
242:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}b.exports=d},{}],243:[function(a,b,c){function d(a,b,c,d){return e[0]=d,e[1]=c,e[2]=b,e[3]=a,f[0]}b.exports=d;var e=new Uint8Array(4),f=new Float32Array(e.buffer)},{}],244:[function(a,b,c){function d(a){for(var b=Array.isArray(a)?a:e(a),c=0;c<b.length;c++){var d=b[c];if("preprocessor"===d.type){var g=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(g&&g[2]){var h=g[1],i=g[2];return(h?f(i):i).trim()}}}}var e=a("glsl-tokenizer"),f=a("atob-lite");b.exports=d},{"atob-lite":35,"glsl-tokenizer":251}],245:[function(a,b,c){function d(a){function b(a){a.length&&Q.push({type:x[O],data:a,position:T,line:R,column:S})}function c(a){M=0,W+=a,L=W.length;for(var b;J=W[M],M<L;){switch(b=M,O){case l:M=C();break;case m:M=B();break;case n:M=A();break;case o:M=D();break;case p:M=G();break;case w:M=F();break;case q:M=H();break;case k:M=I();break;case u:M=z();break;case j:M=y()}if(b!==M)switch(W[b]){case"\n":S=0,++R;break;default:++S}}return N+=M,W=W.slice(M),Q}function d(a){return P.length&&b(P.join("")),O=v,b("(eof)"),Q}function y(){return P=P.length?[]:P,"/"===K&&"*"===J?(T=N+M-1,O=l,K=J,M+1):"/"===K&&"/"===J?(T=N+M-1,O=m,K=J,M+1):"#"===J?(O=n,T=N+M,M):/\s/.test(J)?(O=u,T=N+M,M):(U=/\d/.test(J),V=/[^\w_]/.test(J),T=N+M,O=U?p:V?o:k,M)}function z(){return/[^\s]/g.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function A(){return"\r"!==J&&"\n"!==J||"\\"===K?(P.push(J),K=J,M+1):(b(P.join("")),O=j,M)}function B(){return A()}function C(){return"/"===J&&"*"===K?(P.push(J),b(P.join("")),O=j,M+1):(P.push(J),K=J,M+1)}function D(){if("."===K&&/\d/.test(J))return O=q,M;if("/"===K&&"*"===J)return O=l,M;if("/"===K&&"/"===J)return O=m,M;if("."===J&&P.length){for(;E(P););return O=q,M}if(";"===J||")"===J||"("===J){if(P.length)for(;E(P););return b(J),O=j,M+1}var a=2===P.length&&"="!==J;if(/[\w_\d\s]/.test(J)||a){for(;E(P););return O=j,M}return P.push(J),K=J,M+1}function E(a){for(var c,d,e=0;;){if(c=f.indexOf(a.slice(0,a.length+e).join("")),d=f[c],c===-1){if(e--+a.length>0)continue;d=a.slice(0,1).join("")}return b(d),T+=d.length,P=P.slice(d.length),P.length}}function F(){return/[^a-fA-F0-9]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function G(){return"."===J?(P.push(J),O=q,K=J,M+1):/[eE]/.test(J)?(P.push(J),O=q,K=J,M+1):"x"===J&&1===P.length&&"0"===P[0]?(O=w,P.push(J),K=J,M+1):/[^\d]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function H(){return"f"===J&&(P.push(J),K=J,M+=1),/[eE]/.test(J)?(P.push(J),K=J,M+1):"-"===J&&/[eE]/.test(K)?(P.push(J),K=J,M+1):/[^\d]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function I(){if(/[^\d\w_]/.test(J)){var a=P.join("");return O=Y.indexOf(a)>-1?t:X.indexOf(a)>-1?s:r,b(P.join("")),O=j,M}return P.push(J),K=J,M+1}var J,K,L,M=0,N=0,O=j,P=[],Q=[],R=1,S=0,T=0,U=!1,V=!1,W="";a=a||{};var X=g,Y=e;return"300 es"===a.version&&(X=i,Y=h),function(a){return Q=[],null!==a?c(a.replace?a.replace(/\r\n/g,"\n"):a):d()}}b.exports=d;var e=a("./lib/literals"),f=a("./lib/operators"),g=a("./lib/builtins"),h=a("./lib/literals-300es"),i=a("./lib/builtins-300es"),j=999,k=9999,l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":247,"./lib/builtins-300es":246,"./lib/literals":249,"./lib/literals-300es":248,"./lib/operators":250}],246:[function(a,b,c){var d=a("./builtins");d=d.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),b.exports=d.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":247}],247:[function(a,b,c){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],248:[function(a,b,c){var d=a("./literals");b.exports=d.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":249}],249:[function(a,b,c){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],250:[function(a,b,c){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],251:[function(a,b,c){function d(a,b){var c=e(b),d=[];return d=d.concat(c(a)),d=d.concat(c(null))}var e=a("./index");b.exports=d},{"./index":245}],252:[function(a,b,c){"use strict";function d(a,b,c){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var f=new Int32Array(this.arrayBuffer);a=f[0],b=f[1],c=f[2],this.d=b+2*c;for(var g=0;g<this.d*this.d;g++){var h=f[e+g],i=f[e+g+1];d.push(h===i?null:f.subarray(h,i))}var j=f[e+d.length],k=f[e+d.length+1];this.keys=f.subarray(j,k),this.bboxes=f.subarray(k),this.insert=this._insertReadonly}else{this.d=b+2*c;for(var l=0;l<this.d*this.d;l++)d.push([]);this.keys=[],this.bboxes=[]}this.n=b,this.extent=a,this.padding=c,this.scale=b/a,this.uid=0;var m=c/b*a;this.min=-m,this.max=a+m}b.exports=d;var e=3;d.prototype.insert=function(a,b,c,d,e){this._forEachCell(b,c,d,e,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(b),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(e)},d.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},d.prototype._insertCell=function(a,b,c,d,e,f){this.cells[e].push(f)},d.prototype.query=function(a,b,c,d){var e=this.min,f=this.max;if(a<=e&&b<=e&&f<=c&&f<=d)return Array.prototype.slice.call(this.keys);var g=[],h={};return this._forEachCell(a,b,c,d,this._queryCell,g,h),g},d.prototype._queryCell=function(a,b,c,d,e,f,g){var h=this.cells[e];if(null!==h)for(var i=this.keys,j=this.bboxes,k=0;k<h.length;k++){var l=h[k];if(void 0===g[l]){var m=4*l;a<=j[m+2]&&b<=j[m+3]&&c>=j[m+0]&&d>=j[m+1]?(g[l]=!0,f.push(i[l])):g[l]=!1}}},d.prototype._forEachCell=function(a,b,c,d,e,f,g){for(var h=this._convertToCellCoord(a),i=this._convertToCellCoord(b),j=this._convertToCellCoord(c),k=this._convertToCellCoord(d),l=h;l<=j;l++)for(var m=i;m<=k;m++){var n=this.d*m+l;if(e.call(this,a,b,c,d,n,f,g))return}},d.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},d.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,b=e+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=this.cells[d].length;var f=new Int32Array(b+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=b,h=0;h<a.length;h++){var i=a[h];f[e+h]=g,f.set(i,g),g+=i.length}return f[e+a.length]=g,f.set(this.keys,g),g+=this.keys.length,f[e+a.length+1]=g,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer}},{}],253:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],254:[function(a,b,c){"use strict";function d(a,b,c){this.vertices=a,this.adjacent=b,this.boundary=c,this.lastVisited=-1}function e(a,b,c){this.vertices=a,this.cell=b,this.index=c}function f(a,b){return k(a.vertices,b.vertices)}function g(a){for(var b=["function orient(){var tuple=this.tuple;return test("],c=0;c<=a;++c)c>0&&b.push(","),b.push("tuple[",c,"]");b.push(")}return orient");var d=new Function("test",b.join("")),e=j[a+1];return e||(e=j),d(e)}function h(a,b,c){this.dimension=a,this.vertices=b,this.simplices=c,this.interior=c.filter(function(a){return!a.boundary}),this.tuple=new Array(a+1);for(var d=0;d<=a;++d)this.tuple[d]=this.vertices[d];var e=l[a];e||(e=l[a]=g(a)),this.orient=e}function i(a,b){var c=a.length;if(0===c)throw new Error("Must have at least d+1 points");var e=a[0].length;if(c<=e)throw new Error("Must input at least d+1 points");var f=a.slice(0,e+1),g=j.apply(void 0,f);if(0===g)throw new Error("Input not in general position");for(var i=new Array(e+1),k=0;k<=e;++k)i[k]=k;g<0&&(i[0]=1,i[1]=0);for(var l=new d(i,new Array(e+1),(!1)),m=l.adjacent,n=new Array(e+2),k=0;k<=e;++k){for(var o=i.slice(),p=0;p<=e;++p)p===k&&(o[p]=-1);var q=o[0];o[0]=o[1],o[1]=q;var r=new d(o,new Array(e+1),(!0));m[k]=r,n[k]=r}n[e+1]=l;for(var k=0;k<=e;++k)for(var o=m[k].vertices,s=m[k].adjacent,p=0;p<=e;++p){var t=o[p];if(t<0)s[p]=l;else for(var u=0;u<=e;++u)m[u].vertices.indexOf(t)<0&&(s[p]=m[u])}for(var v=new h(e,f,n),w=!!b,k=e+1;k<c;++k)v.insert(a[k],w);return v.boundary()}b.exports=i;var j=a("robust-orientation"),k=a("simplicial-complex").compareCells;d.prototype.flip=function(){var a=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=a;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};var l=[],m=h.prototype;m.handleBoundaryDegeneracy=function(a,b){var c=this.dimension,d=this.vertices.length-1,e=this.tuple,f=this.vertices,g=[a];for(a.lastVisited=-d;g.length>0;){a=g.pop();for(var h=(a.vertices,a.adjacent),i=0;i<=c;++i){var j=h[i];if(j.boundary&&!(j.lastVisited<=-d)){for(var k=j.vertices,l=0;l<=c;++l){var m=k[l];m<0?e[l]=b:e[l]=f[m]}var n=this.orient();if(n>0)return j;j.lastVisited=-d,0===n&&g.push(j)}}}return null},m.walk=function(a,b){var c=this.vertices.length-1,d=this.dimension,e=this.vertices,f=this.tuple,g=b?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[g];a:for(;!h.boundary;){for(var i=h.vertices,j=h.adjacent,k=0;k<=d;++k)f[k]=e[i[k]];h.lastVisited=c;for(var k=0;k<=d;++k){var l=j[k];if(!(l.lastVisited>=c)){var m=f[k];f[k]=a;var n=this.orient();if(f[k]=m,n<0){h=l;continue a}l.boundary?l.lastVisited=-c:l.lastVisited=c}}return}return h},m.addPeaks=function(a,b){var c=this.vertices.length-1,g=this.dimension,h=this.vertices,i=this.tuple,j=this.interior,k=this.simplices,l=[b];b.lastVisited=c,b.vertices[b.vertices.indexOf(-1)]=c,b.boundary=!1,j.push(b);for(var m=[];l.length>0;){var b=l.pop(),n=b.vertices,o=b.adjacent,p=n.indexOf(c);if(!(p<0))for(var q=0;q<=g;++q)if(q!==p){var r=o[q];if(r.boundary&&!(r.lastVisited>=c)){var s=r.vertices;if(r.lastVisited!==-c){for(var t=0,u=0;u<=g;++u)s[u]<0?(t=u,i[u]=a):i[u]=h[s[u]];var v=this.orient();if(v>0){s[t]=c,r.boundary=!1,j.push(r),l.push(r),r.lastVisited=c;continue}r.lastVisited=-c}var w=r.adjacent,x=n.slice(),y=o.slice(),z=new d(x,y,(!0));k.push(z);var A=w.indexOf(b);if(!(A<0)){w[A]=z,y[p]=r,x[q]=-1,y[q]=b,o[q]=z,z.flip();for(var u=0;u<=g;++u){var B=x[u];if(!(B<0||B===c)){for(var C=new Array(g-1),D=0,E=0;E<=g;++E){var F=x[E];F<0||E===u||(C[D++]=F)}m.push(new e(C,z,u))}}}}}}m.sort(f);for(var q=0;q+1<m.length;q+=2){var G=m[q],H=m[q+1],I=G.index,J=H.index;I<0||J<0||(G.cell.adjacent[G.index]=H.cell,H.cell.adjacent[H.index]=G.cell)}},m.insert=function(a,b){var c=this.vertices;c.push(a);var d=this.walk(a,b);if(d){for(var e=this.dimension,f=this.tuple,g=0;g<=e;++g){var h=d.vertices[g];h<0?f[g]=a:f[g]=c[h]}var i=this.orient(f);i<0||(0!==i||(d=this.handleBoundaryDegeneracy(d,a)))&&this.addPeaks(a,d)}},m.boundary=function(){for(var a=this.dimension,b=[],c=this.simplices,d=c.length,e=0;e<d;++e){var f=c[e];if(f.boundary){for(var g=new Array(a),h=f.vertices,i=0,j=0,k=0;k<=a;++k)h[k]>=0?g[i++]=h[k]:j=1&k;if(j===(1&a)){var l=g[0];g[0]=g[1],g[1]=l}b.push(g)}}return b}},{"robust-orientation":465,"simplicial-complex":476}],255:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.mid=a,this.left=b,this.right=c,this.leftPoints=d,this.rightPoints=e,this.count=(b?b.count:0)+(c?c.count:0)+d.length}function e(a,b){a.mid=b.mid,a.left=b.left,a.right=b.right,a.leftPoints=b.leftPoints,a.rightPoints=b.rightPoints,a.count=b.count}function f(a,b){var c=o(b);a.mid=c.mid,a.left=c.left,a.right=c.right,a.leftPoints=c.leftPoints,a.rightPoints=c.rightPoints,a.count=c.count}function g(a,b){var c=a.intervals([]);c.push(b),f(a,c)}function h(a,b){var c=a.intervals([]),d=c.indexOf(b);return d<0?s:(c.splice(d,1),f(a,c),t)}function i(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function j(a,b,c){for(var d=a.length-1;d>=0&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function k(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function l(a,b){return a-b}function m(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function o(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(l);for(var e=b[b.length>>1],f=[],g=[],h=[],c=0;c<a.length;++c){var i=a[c];i[1]<e?f.push(i):e<i[0]?g.push(i):h.push(i)}var j=h,k=h.slice();return j.sort(m),k.sort(n),new d(e,o(f),o(g),j,k)}function p(a){this.root=a}function q(a){return new p(a&&0!==a.length?o(a):null)}var r=a("binary-search-bounds"),s=0,t=1,u=2;b.exports=q;var v=d.prototype;v.intervals=function(a){return a.push.apply(a,this.leftPoints),this.left&&this.left.intervals(a),this.right&&this.right.intervals(a),a},v.insert=function(a){var b=this.count-this.leftPoints.length;if(this.count+=1,a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?g(this,a):this.left.insert(a):this.left=o([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?g(this,a):this.right.insert(a):this.right=o([a]);else{var c=r.ge(this.leftPoints,a,m),d=r.ge(this.rightPoints,a,n);this.leftPoints.splice(c,0,a),this.rightPoints.splice(d,0,a)}},v.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return s;var c=this.right?this.right.count:0;if(4*c>3*(b-1))return h(this,a);var d=this.left.remove(a);return d===u?(this.left=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(a[0]>this.mid){if(!this.right)return s;var f=this.left?this.left.count:0;if(4*f>3*(b-1))return h(this,a);var d=this.right.remove(a);return d===u?(this.right=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(1===this.count)return this.leftPoints[0]===a?u:s;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){for(var g=this,i=this.left;i.right;)g=i,i=i.right;if(g===this)i.right=this.right;else{var j=this.left,d=this.right;g.count-=i.count,g.right=i.left,i.left=j,i.right=d}e(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e(this,this.left):e(this,this.right);return t}for(var j=r.ge(this.leftPoints,a,m);j<this.leftPoints.length&&this.leftPoints[j][0]===a[0];++j)if(this.leftPoints[j]===a){this.count-=1,this.leftPoints.splice(j,1);for(var d=r.ge(this.rightPoints,a,n);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),t}return s},v.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return i(this.leftPoints,a,b)}if(a>this.mid){if(this.right){var c=this.right.queryPoint(a,b);if(c)return c}return j(this.rightPoints,a,b)}return k(this.leftPoints,b)},v.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}if(b>this.mid&&this.right){var d=this.right.queryInterval(a,b,c);if(d)return d}return b<this.mid?i(this.leftPoints,b,c):a>this.mid?j(this.rightPoints,a,c):k(this.leftPoints,c)};var w=p.prototype;w.insert=function(a){this.root?this.root.insert(a):this.root=new d(a[0],null,null,[a],[a])},w.remove=function(a){if(this.root){var b=this.root.remove(a);return b===u&&(this.root=null),b!==s}return!1},w.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)},w.queryInterval=function(a,b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":53}],256:[function(a,b,c){"use strict";function d(a,b){b=b||new Array(a.length);for(var c=0;c<a.length;++c)b[a[c]]=c;return b}b.exports=d},{}],257:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=c;return b}b.exports=d},{}],258:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],259:[function(a,b,c){"use strict";function d(a,b,c,d,f){return new e(a,b,c,d,f)}function e(a,b,c,d,e){b=b||f,c=c||g,e=e||Array,this.nodeSize=d||64,this.points=a,this.ids=new e(a.length),this.coords=new e(2*a.length);for(var i=0;i<a.length;i++)this.ids[i]=i,this.coords[2*i]=b(a[i]),this.coords[2*i+1]=c(a[i]);h(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function f(a){return a[0]}function g(a){return a[1]}var h=a("./sort"),i=a("./range"),j=a("./within");b.exports=d,e.prototype={range:function(a,b,c,d){return i(this.ids,this.coords,a,b,c,d,this.nodeSize)},within:function(a,b,c){return j(this.ids,this.coords,a,b,c,this.nodeSize)}}},{"./range":260,"./sort":261,"./within":262}],260:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){for(var h,i,j=[0,a.length-1,0],k=[];j.length;){var l=j.pop(),m=j.pop(),n=j.pop();if(m-n<=g)for(var o=n;o<=m;o++)h=b[2*o],i=b[2*o+1],h>=c&&h<=e&&i>=d&&i<=f&&k.push(a[o]);else{var p=Math.floor((n+m)/2);h=b[2*p],i=b[2*p+1],h>=c&&h<=e&&i>=d&&i<=f&&k.push(a[p]);var q=(l+1)%2;(0===l?c<=h:d<=i)&&(j.push(n),j.push(p-1),j.push(q)),(0===l?e>=h:f>=i)&&(j.push(p+1),j.push(m),j.push(q))}}return k}b.exports=d},{}],261:[function(a,b,c){"use strict";function d(a,b,c,f,g,h){if(!(g-f<=c)){var i=Math.floor((f+g)/2);e(a,b,i,f,g,h%2),d(a,b,c,f,i-1,h+1),d(a,b,c,i+1,g,h+1)}}function e(a,b,c,d,g,h){for(;g>d;){if(g-d>600){var i=g-d+1,j=c-d+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1),n=Math.max(d,Math.floor(c-j*l/i+m)),o=Math.min(g,Math.floor(c+(i-j)*l/i+m));e(a,b,c,n,o,h)}var p=b[2*c+h],q=d,r=g;for(f(a,b,d,c),b[2*g+h]>p&&f(a,b,d,g);q<r;){for(f(a,b,q,r),q++,r--;b[2*q+h]<p;)q++;for(;b[2*r+h]>p;)r--}b[2*d+h]===p?f(a,b,d,r):(r++,f(a,b,r,g)),r<=c&&(d=r+1),c<=r&&(g=r-1)}}function f(a,b,c,d){g(a,c,d),g(b,2*c,2*d),g(b,2*c+1,2*d+1)}function g(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.exports=d},{}],262:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h=[0,a.length-1,0],i=[],j=f*f;h.length;){var k=h.pop(),l=h.pop(),m=h.pop();if(l-m<=g)for(var n=m;n<=l;n++)e(b[2*n],b[2*n+1],c,d)<=j&&i.push(a[n]);else{var o=Math.floor((m+l)/2),p=b[2*o],q=b[2*o+1];e(p,q,c,d)<=j&&i.push(a[o]);var r=(k+1)%2;(0===k?c-f<=p:d-f<=q)&&(h.push(m),h.push(o-1),h.push(r)),(0===k?c+f>=p:d+f>=q)&&(h.push(o+1),h.push(l),h.push(r))}}return i}function e(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}b.exports=d},{}],263:[function(a,b,c){"use strict";function d(a,b){var c;if(l(a)){var i,j=a.stops&&"object"==typeof a.stops[0][0],k=j||void 0!==a.property,m=j||!k,n=a.type||b||"exponential";if("exponential"===n)i=g;else if("interval"===n)i=f;else if("categorical"===n)i=e;else{if("identity"!==n)throw new Error('Unknown function type "'+n+'"');i=h}if(j){for(var o={},p=[],q=0;q<a.stops.length;q++){var r=a.stops[q];void 0===o[r[0].zoom]&&(o[r[0].zoom]={zoom:r[0].zoom,type:a.type,property:a.property,stops:[]}),o[r[0].zoom].stops.push([r[0].value,r[1]])}for(var s in o)p.push([o[s].zoom,d(o[s])]);c=function(b,c){return g({stops:p,base:a.base},b)(b,c)},c.isFeatureConstant=!1,c.isZoomConstant=!1}else m?(c=function(b){return i(a,b)},c.isFeatureConstant=!0,c.isZoomConstant=!1):(c=function(b,c){return i(a,c[a.property])},c.isFeatureConstant=!1,c.isZoomConstant=!0)}else c=function(){return a},c.isFeatureConstant=!0,c.isZoomConstant=!0;return c}function e(a,b){for(var c=0;c<a.stops.length;c++)if(b===a.stops[c][0])return a.stops[c][1];return a.stops[0][1]}function f(a,b){for(var c=0;c<a.stops.length&&!(b<a.stops[c][0]);c++);return a.stops[Math.max(c-1,0)][1]}function g(a,b){for(var c=void 0!==a.base?a.base:1,d=0;!(d>=a.stops.length)&&!(b<=a.stops[d][0]);)d++;return 0===d?a.stops[d][1]:d===a.stops.length?a.stops[d-1][1]:i(b,c,a.stops[d-1][0],a.stops[d][0],a.stops[d-1][1],a.stops[d][1])}function h(a,b){return b}function i(a,b,c,d,e,f){return"function"==typeof e?function(){var g=e.apply(void 0,arguments),h=f.apply(void 0,arguments);return i(a,b,c,d,g,h)}:e.length?k(a,b,c,d,e,f):j(a,b,c,d,e,f)}function j(a,b,c,d,e,f){var g,h=d-c,i=a-c;return g=1===b?i/h:(Math.pow(b,i)-1)/(Math.pow(b,h)-1),e*(1-g)+f*g}function k(a,b,c,d,e,f){for(var g=[],h=0;h<e.length;h++)g[h]=j(a,b,c,d,e[h],f[h]);return g}function l(a){return"object"==typeof a&&(a.stops||"identity"===a.type)}b.exports.isFunctionDefinition=l,b.exports.interpolated=function(a){return d(a,"exponential")},b.exports["piecewise-constant"]=function(a){return d(a,"interval")}},{}],264:[function(a,b,c){a("path"),b.exports={debug:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},circle:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\nuniform float u_devicepixelratio;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},line:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform float u_blur;\n\nvarying vec2 v_linewidth;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\nuniform mediump float u_blur;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"
},linepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_blur;\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    alpha *= u_opacity;\n\n    gl_FragColor = color * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n    v_linesofar = a_linesofar;\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linesdfpattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\n\nuniform float u_blur;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},outline:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},outlinepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    \n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},pattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n}\n"},raster:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity0;\nuniform float u_opacity1;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = color0 * u_opacity0 + color1 * u_opacity1;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb), color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},icon:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},sdf:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nconst float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = (gl_Position.w - 0.5);\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},collisionbox:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"}},b.exports.util="float evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n"},{path:434}],265:[function(a,b,c){"use strict";function d(a,b){this.message=(a?a+": ":"")+e.apply(e,Array.prototype.slice.call(arguments,2)),null!==b&&void 0!==b&&b.__line__&&(this.line=b.__line__)}var e=a("util").format;b.exports=d},{util:504}],266:[function(a,b,c){"use strict";b.exports=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}},{}],267:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}},{}],268:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}},{}],269:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("../util/extend");b.exports=function(b){var c=a("./validate_function"),g=a("./validate_object"),h={"*":function(){return[]},array:a("./validate_array"),"boolean":a("./validate_boolean"),number:a("./validate_number"),color:a("./validate_color"),constants:a("./validate_constants"),"enum":a("./validate_enum"),filter:a("./validate_filter"),"function":a("./validate_function"),layer:a("./validate_layer"),object:a("./validate_object"),source:a("./validate_source"),string:a("./validate_string")},i=b.value,j=b.valueSpec,k=b.key,l=b.styleSpec,m=b.style;if("string"===e(i)&&"@"===i[0]){if(l.$version>7)return[new d(k,i,"constants have been deprecated as of v8")];if(!(i in m.constants))return[new d(k,i,'constant "%s" not found',i)];b=f({},b,{value:m.constants[i]})}return j["function"]&&"object"===e(i)?c(b):j.type&&h[j.type]?h[j.type](b):g(f({},b,{valueSpec:j.type?l[j.type]:j}))}},{"../error/validation_error":265,"../util/extend":266,"../util/get_type":267,"./validate_array":270,"./validate_boolean":271,"./validate_color":272,"./validate_constants":273,"./validate_enum":274,"./validate_filter":275,"./validate_function":276,"./validate_layer":278,"./validate_number":280,"./validate_object":281,"./validate_source":283,"./validate_string":284}],270:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("./validate"),f=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.valueSpec,g=a.style,h=a.styleSpec,i=a.key,j=a.arrayElementValidator||e;if("array"!==d(b))return[new f(i,b,"array expected, %s found",d(b))];if(c.length&&b.length!==c.length)return[new f(i,b,"array length %d expected, length %d found",c.length,b.length)];if(c["min-length"]&&b.length<c["min-length"])return[new f(i,b,"array length at least %d expected, length %d found",c["min-length"],b.length)];var k={type:c.value};h.$version<7&&(k["function"]=c["function"]),"object"===d(c.value)&&(k=c.value);for(var l=[],m=0;m<b.length;m++)l=l.concat(j({array:b,arrayIndex:m,value:b[m],valueSpec:k,style:g,styleSpec:h,key:i+"["+m+"]"}));return l}},{"../error/validation_error":265,"../util/get_type":267,"./validate":269}],271:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"boolean"!==f?[new e(c,b,"boolean expected, %s found",f)]:[]}},{"../error/validation_error":265,"../util/get_type":267}],272:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("csscolorparser").parseCSSColor;b.exports=function(a){var b=a.key,c=a.value,g=e(c);return"string"!==g?[new d(b,c,"color expected, %s found",g)]:null===f(c)?[new d(b,c,'color expected, "%s" found',c)]:[]}},{"../error/validation_error":265,"../util/get_type":267,csscolorparser:89}],273:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type");b.exports=function(a){var b=a.key,c=a.value,f=a.styleSpec;if(f.$version>7)return c?[new d(b,c,"constants have been deprecated as of v8")]:[];var g=e(c);if("object"!==g)return[new d(b,c,"object expected, %s found",g)];var h=[];for(var i in c)"@"!==i[0]&&h.push(new d(b+"."+i,c[i],'constants must start with "@"'));return h}},{"../error/validation_error":265,"../util/get_type":267}],274:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=[];return f.values.indexOf(e(c))===-1&&g.push(new d(b,c,"expected one of [%s], %s found",f.values.join(", "),c)),g}},{"../error/validation_error":265,"../util/unbundle_jsonlint":268}],275:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_enum"),f=a("../util/get_type"),g=a("../util/unbundle_jsonlint");b.exports=function h(a){var b,c=a.value,i=a.key,j=a.styleSpec,k=[];if("array"!==f(c))return[new d(i,c,"array expected, %s found",f(c))];if(c.length<1)return[new d(i,c,"filter array must have at least 1 element")];switch(k=k.concat(e({key:i+"[0]",value:c[0],valueSpec:j.filter_operator,style:a.style,styleSpec:a.styleSpec})),g(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&"$type"==c[1]&&k.push(new d(i,c,'"$type" cannot be use with operator "%s"',c[0]));case"==":case"!=":3!=c.length&&k.push(new d(i,c,'filter array for operator "%s" must have 3 elements',c[0]));case"in":case"!in":c.length>=2&&(b=f(c[1]),"string"!==b?k.push(new d(i+"[1]",c[1],"string expected, %s found",b)):"@"===c[1][0]&&k.push(new d(i+"[1]",c[1],"filter key cannot be a constant")));for(var l=2;l<c.length;l++)b=f(c[l]),"$type"==c[1]?k=k.concat(e({key:i+"["+l+"]",value:c[l],valueSpec:j.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"===b&&"@"===c[l][0]?k.push(new d(i+"["+l+"]",c[l],"filter value cannot be a constant")):"string"!==b&&"number"!==b&&"boolean"!==b&&k.push(new d(i+"["+l+"]",c[l],"string, number, or boolean expected, %s found",b));break;case"any":case"all":case"none":for(l=1;l<c.length;l++)k=k.concat(h({key:i+"["+l+"]",value:c[l],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":b=f(c[1]),2!==c.length?k.push(new d(i,c,'filter array for "%s" operator must have 2 elements',c[0])):"string"!==b?k.push(new d(i+"[1]",c[1],"string expected, %s found",b)):"@"===c[1][0]&&k.push(new d(i+"[1]",c[1],"filter key cannot be a constant"))}return k}},{"../error/validation_error":265,"../util/get_type":267,
"../util/unbundle_jsonlint":268,"./validate_enum":274}],276:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate"),g=a("./validate_object"),h=a("./validate_array"),i=a("./validate_number");b.exports=function(a){function b(a){var b=[],f=a.value;return b=b.concat(h({key:a.key,value:f,valueSpec:a.valueSpec,style:a.style,styleSpec:a.styleSpec,arrayElementValidator:c})),"array"===e(f)&&0===f.length&&b.push(new d(a.key,f,"array must have at least one stop")),b}function c(a){var b=[],c=a.value,h=a.key;if("array"!==e(c))return[new d(h,c,"array expected, %s found",e(c))];if(2!==c.length)return[new d(h,c,"array length %d expected, length %d found",2,c.length)];var m=e(c[0]);if(k||(k=m),m!==k)return[new d(h,c,"%s stop key type must match previous stop key type %s",m,k)];if("object"===m){if(void 0===c[0].zoom)return[new d(h,c,"object stop key must have zoom")];if(void 0===c[0].value)return[new d(h,c,"object stop key must have value")];b=b.concat(g({key:h+"[0]",value:c[0],valueSpec:{zoom:{}},style:a.style,styleSpec:a.styleSpec,objectElementValidators:{zoom:i,value:j}}))}else b=b.concat((n?i:j)({key:h+"[0]",value:c[0],valueSpec:{},style:a.style,styleSpec:a.styleSpec}));return b=b.concat(f({key:h+"[1]",value:c[1],valueSpec:l,style:a.style,styleSpec:a.styleSpec})),"number"===e(c[0])&&("piecewise-constant"===l["function"]&&c[0]%1!==0&&b.push(new d(h+"[0]",c[0],"zoom level for piecewise-constant functions must be an integer")),0!==a.arrayIndex&&c[0]<a.array[a.arrayIndex-1][0]&&b.push(new d(h+"[0]",c[0],"array stops must appear in ascending order"))),b}function j(a){var b=[],c=e(a.value);return"number"!==c&&"string"!==c&&"array"!==c&&b.push(new d(a.key,a.value,"property value must be a number, string or array")),b}var k,l=a.valueSpec,m=void 0!==a.value.property||"object"===k,n=void 0===a.value.property||"object"===k,o=g({key:a.key,value:a.value,valueSpec:a.styleSpec["function"],style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:b}});return a.styleSpec.$version>=8&&(m&&!a.valueSpec["property-function"]?o.push(new d(a.key,a.value,"property functions not supported")):n&&!a.valueSpec["zoom-function"]&&o.push(new d(a.key,a.value,"zoom functions not supported"))),o}},{"../error/validation_error":265,"../util/get_type":267,"./validate":269,"./validate_array":270,"./validate_number":280,"./validate_object":281}],277:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_string");b.exports=function(a){var b=a.value,c=a.key,f=e(a);return f.length?f:(b.indexOf("{fontstack}")===-1&&f.push(new d(c,b,'"glyphs" url must include a "{fontstack}" token')),b.indexOf("{range}")===-1&&f.push(new d(c,b,'"glyphs" url must include a "{range}" token')),f)}},{"../error/validation_error":265,"./validate_string":284}],278:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_filter"),h=a("./validate_paint_property"),i=a("./validate_layout_property"),j=a("../util/extend");b.exports=function(a){var b=[],c=a.value,k=a.key,l=a.style,m=a.styleSpec;c.type||c.ref||b.push(new d(k,c,'either "type" or "ref" is required'));var n=e(c.type),o=e(c.ref);if(c.id)for(var p=0;p<a.arrayIndex;p++){var q=l.layers[p];e(q.id)===e(c.id)&&b.push(new d(k,c.id,'duplicate layer id "%s", previously used at line %d',c.id,q.id.__line__))}if("ref"in c){["type","source","source-layer","filter","layout"].forEach(function(a){a in c&&b.push(new d(k,c[a],'"%s" is prohibited for ref layers',a))});var r;l.layers.forEach(function(a){a.id==o&&(r=a)}),r?r.ref?b.push(new d(k,c.ref,"ref cannot reference another ref layer")):n=e(r.type):b.push(new d(k,c.ref,'ref layer "%s" not found',o))}else if("background"!==n)if(c.source){var s=l.sources&&l.sources[c.source];s?"vector"==s.type&&"raster"==n?b.push(new d(k,c.source,'layer "%s" requires a raster source',c.id)):"raster"==s.type&&"raster"!=n?b.push(new d(k,c.source,'layer "%s" requires a vector source',c.id)):"vector"!=s.type||c["source-layer"]||b.push(new d(k,c,'layer "%s" must specify a "source-layer"',c.id)):b.push(new d(k,c.source,'source "%s" not found',c.source))}else b.push(new d(k,c,'missing required property "source"'));return b=b.concat(f({key:k,value:c,valueSpec:m.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{filter:g,layout:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return i(j({layerType:n},a))}}})},paint:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return h(j({layerType:n},a))}}})}}}))}},{"../error/validation_error":265,"../util/extend":266,"../util/unbundle_jsonlint":268,"./validate_filter":275,"./validate_layout_property":279,"./validate_object":281,"./validate_paint_property":282}],279:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["layout_"+a.layerType];if(a.valueSpec||i[h]){var j=[];return"symbol"===a.layerType&&("icon-image"===h&&c&&!c.sprite?j.push(new e(b,g,'use of "icon-image" requires a style "sprite" property')):"text-field"===h&&c&&!c.glyphs&&j.push(new e(b,g,'use of "text-field" requires a style "glyphs" property'))),j.concat(d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}))}return[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":265,"./validate":269}],280:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=d(c);return"number"!==g?[new e(b,c,"number expected, %s found",g)]:"minimum"in f&&c<f.minimum?[new e(b,c,"%s is less than the minimum value %s",c,f.minimum)]:"maximum"in f&&c>f.maximum?[new e(b,c,"%s is greater than the maximum value %s",c,f.maximum)]:[]}},{"../error/validation_error":265,"../util/get_type":267}],281:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate");b.exports=function(a){var b=a.key,c=a.value,g=a.valueSpec,h=a.objectElementValidators||{},i=a.style,j=a.styleSpec,k=[],l=e(c);if("object"!==l)return[new d(b,c,"object expected, %s found",l)];for(var m in c){var n=m.split(".")[0],o=g&&(g[n]||g["*"]),p=h[n]||h["*"];o||p?k=k.concat((p||f)({key:(b?b+".":b)+m,value:c[m],valueSpec:o,style:i,styleSpec:j,object:c,objectKey:m})):""!==b&&1!==b.split(".").length&&k.push(new d(b,c[m],'unknown property "%s"',m))}for(n in g)g[n].required&&void 0===g[n]["default"]&&void 0===c[n]&&k.push(new d(b,c,'missing required property "%s"',n));return k}},{"../error/validation_error":265,"../util/get_type":267,"./validate":269}],282:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["paint_"+a.layerType],j=h.match(/^(.*)-transition$/);return j&&i[j[1]]&&i[j[1]].transition?d({key:b,value:g,valueSpec:f.transition,style:c,styleSpec:f}):a.valueSpec||i[h]?d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}):[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":265,"./validate":269}],283:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_enum");b.exports=function(a){var b=a.value,c=a.key,h=a.styleSpec,i=a.style;if(!b.type)return[new d(c,b,'"type" is required')];var j=e(b.type);switch(j){case"vector":case"raster":var k=[];if(k=k.concat(f({key:c,value:b,valueSpec:h.source_tile,style:a.style,styleSpec:h})),"url"in b)for(var l in b)["type","url","tileSize"].indexOf(l)<0&&k.push(new d(c+"."+l,b[l],'a source with a "url" property may not include a "%s" property',l));return k;case"geojson":return f({key:c,value:b,valueSpec:h.source_geojson,style:i,styleSpec:h});case"video":return f({key:c,value:b,valueSpec:h.source_video,style:i,styleSpec:h});case"image":return f({key:c,value:b,valueSpec:h.source_image,style:i,styleSpec:h});default:return g({key:c+".type",value:b.type,valueSpec:{values:["vector","raster","geojson","video","image"]},style:i,styleSpec:h})}}},{"../error/validation_error":265,"../util/unbundle_jsonlint":268,"./validate_enum":274,"./validate_object":281}],284:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"string"!==f?[new e(c,b,"string expected, %s found",f)]:[]}},{"../error/validation_error":265,"../util/get_type":267}],285:[function(a,b,c){"use strict";function d(a,b){b=b||i;var c=[];return c=c.concat(h({key:"",value:a,valueSpec:b.$root,styleSpec:b,style:a,objectElementValidators:{glyphs:j}})),b.$version>7&&a.constants&&(c=c.concat(g({key:"constants",value:a.constants,style:a,styleSpec:b}))),e(c)}function e(a){return[].concat(a).sort(function(a,b){return a.line-b.line})}function f(a){return function(){return e(a.apply(this,arguments))}}var g=a("./validate/validate_constants"),h=a("./validate/validate"),i=a("../reference/latest.min"),j=a("./validate/validate_glyphs_url");d.source=f(a("./validate/validate_source")),d.layer=f(a("./validate/validate_layer")),d.filter=f(a("./validate/validate_filter")),d.paintProperty=f(a("./validate/validate_paint_property")),d.layoutProperty=f(a("./validate/validate_layout_property")),b.exports=d},{"../reference/latest.min":286,"./validate/validate":269,"./validate/validate_constants":273,"./validate/validate_filter":275,"./validate/validate_glyphs_url":277,"./validate/validate_layer":278,"./validate/validate_layout_property":279,"./validate/validate_paint_property":282,"./validate/validate_source":283}],286:[function(a,b,c){b.exports=a("./v8.min.json")},{"./v8.min.json":287}],287:[function(a,b,c){b.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"]},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"]},data:{type:"*"},maxzoom:{type:"number","default":14},buffer:{type:"number","default":64},tolerance:{type:"number","default":3},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":400},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:["video"]},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:["image"]},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"]},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{type:"boolean","default":!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_fill:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_circle:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["point","line"],"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"viewport",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!1,values:["none","both","width","height"],"default":"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image","icon-text-fit","text-field"]},"icon-image":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],requires:["text-field"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"viewport",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["left","center","right"],"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["none","uppercase","lowercase"],"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated","zoom-function":!0,"property-function":!0,length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_raster:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none","has","!has"]},geometry_type:{type:"enum",values:["Point","LineString","Polygon"]},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"]},"function":{stops:{type:"array",required:!0,value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:["exponential","interval","categorical"],"default":"exponential"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!0},"fill-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant","zoom-function":!0,"property-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","zoom-function":!0,"default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","zoom-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],288:[function(a,b,c){"use strict";function d(a){return!!(e()&&f()&&g()&&h()&&i()&&j()&&k()&&l(a&&a.failIfMajorPerformanceCaveat))}function e(){return"undefined"!=typeof window&&"undefined"!=typeof document}function f(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function g(){return Function.prototype&&Function.prototype.bind}function h(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function i(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function j(){return"Worker"in window}function k(){return"Uint8ClampedArray"in window}function l(a){return void 0===n[a]&&(n[a]=m(a)),n[a]}function m(a){var b=document.createElement("canvas"),c=Object.create(d.webGLContextAttributes);return c.failIfMajorPerformanceCaveat=a,b.probablySupportsContext?b.probablySupportsContext("webgl",c)||b.probablySupportsContext("experimental-webgl",c):b.supportsContext?b.supportsContext("webgl",c)||b.supportsContext("experimental-webgl",c):b.getContext("webgl",c)||b.getContext("experimental-webgl",c)}"undefined"!=typeof b&&b.exports?b.exports=d:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=d);var n={};d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],289:[function(a,b,c){"use strict";function d(a){var b=a.layoutVertexArrayType;this.layoutVertexArray=new b;var c=a.elementArrayType;c&&(this.elementArray=new c);var d=a.elementArrayType2;d&&(this.elementArray2=new d),this.paintVertexArrays=e.mapObject(a.paintVertexArrayTypes,function(a){return new a})}var e=a("../util/util");b.exports=d,d.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,d.prototype.hasCapacityFor=function(a){return this.layoutVertexArray.length+a<=d.MAX_VERTEX_ARRAY_LENGTH},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.trim=function(){this.layoutVertexArray.trim(),this.elementArray&&this.elementArray.trim(),this.elementArray2&&this.elementArray2.trim();for(var a in this.paintVertexArrays)this.paintVertexArrays[a].trim()},d.prototype.serialize=function(){return{layoutVertexArray:this.layoutVertexArray.serialize(),elementArray:this.elementArray&&this.elementArray.serialize(),elementArray2:this.elementArray2&&this.elementArray2.serialize(),paintVertexArrays:e.mapObject(this.paintVertexArrays,function(a){return a.serialize()})}},d.prototype.getTransferables=function(a){a.push(this.layoutVertexArray.arrayBuffer),this.elementArray&&a.push(this.elementArray.arrayBuffer),this.elementArray2&&a.push(this.elementArray2.arrayBuffer);for(var b in this.paintVertexArrays)a.push(this.paintVertexArrays[b].arrayBuffer)}},{"../util/util":403}],290:[function(a,b,c){"use strict";function d(a){if(this.zoom=a.zoom,this.overscaling=a.overscaling,this.layer=a.layer,this.childLayers=a.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=a.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=a.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=e(this),a.arrays){var b=this.programInterfaces;this.bufferGroups=k.mapObject(a.arrays,function(c,d){var e=b[d],f=a.paintVertexArrayTypes[d];return c.map(function(a){return new j(a,{layoutVertexArrayType:e.layoutVertexArrayType.serialize(),elementArrayType:e.elementArrayType&&e.elementArrayType.serialize(),elementArrayType2:e.elementArrayType2&&e.elementArrayType2.serialize(),paintVertexArrayTypes:f})})})}}function e(a){var b={};for(var c in a.programInterfaces){for(var d=b[c]={},e=0;e<a.childLayers.length;e++){var h=a.childLayers[e];d[h.id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var i=a.programInterfaces[c];if(i.paintAttributes)for(var j="{precision}",l="{type}",n=0;n<i.paintAttributes.length;n++){var o=i.paintAttributes[n];o.multiplier=o.multiplier||1;for(var p=0;p<a.childLayers.length;p++){var q=a.childLayers[p],r=d[q.id],s=o.name;m("a_"===o.name.slice(0,2));var t,u=o.name.slice(2);if(r.fragmentPragmas.initialize[u]="",q.isPaintValueFeatureConstant(o.paintProperty))r.uniforms.push(o),
r.fragmentPragmas.define[u]=r.vertexPragmas.define[u]=["uniform",j,l,s].join(" ")+";",r.fragmentPragmas.initialize[u]=r.vertexPragmas.initialize[u]=[j,l,u,"=",s].join(" ")+";\n";else if(q.isPaintValueZoomConstant(o.paintProperty)){r.attributes.push(k.extend({},o,{name:s})),t=["varying",j,l,u].join(" ")+";\n";var v=[r.fragmentPragmas.define[u],"attribute",j,l,s].join(" ")+";\n";r.fragmentPragmas.define[u]=t,r.vertexPragmas.define[u]=t+v,r.vertexPragmas.initialize[u]=[u,"=",s,"/",o.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var w="u_"+s.slice(2)+"_t",x=q.getPaintValueStopZoomLevels(o.paintProperty),y=0;y<x.length&&x[y]<a.zoom;)y++;for(var z=Math.max(0,Math.min(x.length-4,y-2)),A=[],B=0;B<4;B++)A.push(x[Math.min(z+B,x.length-1)]);t=["varying",j,l,u].join(" ")+";\n",r.vertexPragmas.define[u]=t+["uniform","lowp","float",w].join(" ")+";\n",r.fragmentPragmas.define[u]=t,r.uniforms.push(k.extend({},o,{name:w,getValue:g(o,z),components:1}));var C=o.components;if(1===C)r.attributes.push(k.extend({},o,{getValue:f(o,A),isFunction:!0,components:4*C})),r.vertexPragmas.define[u]+=["attribute",j,"vec4",s].join(" ")+";\n",r.vertexPragmas.initialize[u]=[u,"=","evaluate_zoom_function_1("+s+", "+w+")","/",o.multiplier.toFixed(1)].join(" ")+";\n";else{for(var D=[],E=0;E<4;E++)D.push(s+E),r.attributes.push(k.extend({},o,{getValue:f(o,[A[E]]),isFunction:!0,name:s+E})),r.vertexPragmas.define[u]+=["attribute",j,l,s+E].join(" ")+";\n";r.vertexPragmas.initialize[u]=[u," = ","evaluate_zoom_function_4("+D.join(", ")+", "+w+")","/",o.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return b}function f(a,b){return function(c,d,e){if(1===b.length)return a.getValue(c,k.extend({},d,{zoom:b[0]}),e);for(var f=[],g=0;g<b.length;g++){var h=b[g];f.push(a.getValue(c,k.extend({},d,{zoom:h}),e)[0])}return f}}function g(a,b){return function(c,d){var e=c.getPaintInterpolationT(a.paintProperty,d.zoom);return[Math.max(0,Math.min(4,e-b))]}}var h=a("feature-filter"),i=a("./array_group"),j=a("./buffer_group"),k=a("../util/util"),l=a("../util/struct_array"),m=a("assert");b.exports=d,d.create=function(b){var c={fill:a("./bucket/fill_bucket"),line:a("./bucket/line_bucket"),circle:a("./bucket/circle_bucket"),symbol:a("./bucket/symbol_bucket")};return new c[b.layer.type](b)},d.EXTENT=8192,d.prototype.populateArrays=function(){this.createArrays(),this.recalculateStyleLayers();for(var a=0;a<this.features.length;a++)this.addFeature(this.features[a]);this.trimArrays()},d.prototype.prepareArrayGroup=function(a,b){var c=this.arrayGroups[a],d=c.length&&c[c.length-1];return d&&d.hasCapacityFor(b)||(d=new i({layoutVertexArrayType:this.programInterfaces[a].layoutVertexArrayType,elementArrayType:this.programInterfaces[a].elementArrayType,elementArrayType2:this.programInterfaces[a].elementArrayType2,paintVertexArrayTypes:this.paintVertexArrayTypes[a]}),d.index=c.length,c.push(d)),d},d.prototype.createArrays=function(){this.arrayGroups={},this.paintVertexArrayTypes={};for(var a in this.programInterfaces){this.arrayGroups[a]=[];var b=this.paintVertexArrayTypes[a]={},c=this.paintAttributes[a];for(var e in c)b[e]=new d.VertexArrayType(c[e].attributes)}},d.prototype.destroy=function(a){for(var b in this.bufferGroups)for(var c=this.bufferGroups[b],d=0;d<c.length;d++)c[d].destroy(a)},d.prototype.trimArrays=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)b[c].trim()},d.prototype.isEmpty=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)if(!b[c].isEmpty())return!1;return!0},d.prototype.getTransferables=function(a){for(var b in this.arrayGroups)for(var c=this.arrayGroups[b],d=0;d<c.length;d++)c[d].getTransferables(a)},d.prototype.setUniforms=function(a,b,c,d,e){for(var f=this.paintAttributes[b][d.id].uniforms,g=0;g<f.length;g++){var h=f[g],i=c[h.name];a["uniform"+h.components+"fv"](i,h.getValue(d,e))}},d.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:k.mapObject(this.arrayGroups,function(a){return a.map(function(a){return a.serialize()})}),paintVertexArrayTypes:k.mapObject(this.paintVertexArrayTypes,function(a){return k.mapObject(a,function(a){return a.serialize()})}),childLayerIds:this.childLayers.map(function(a){return a.id})}},d.prototype.createFilter=function(){this.filter||(this.filter=h(this.layer.filter))};var n={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};d.prototype.recalculateStyleLayers=function(){for(var a=0;a<this.childLayers.length;a++)this.childLayers[a].recalculate(this.zoom,n)},d.prototype.populatePaintArrays=function(a,b,c,d,e){for(var f=0;f<this.childLayers.length;f++)for(var g=this.childLayers[f],h=this.arrayGroups[a],i=d.index;i<h.length;i++){var j=h[i],k=j.layoutVertexArray.length,l=j.paintVertexArrays[g.id];l.resize(k);for(var m=this.paintAttributes[a][g.id].attributes,n=0;n<m.length;n++)for(var o=m[n],p=o.getValue(g,b,c),q=o.multiplier||1,r=o.components||1,s=i===d.index?e:0,t=s;t<k;t++)for(var u=l.get(t),v=0;v<r;v++){var w=r>1?o.name+v:o.name;u[w]=p[v]*q}}},d.VertexArrayType=function(a){return new l({members:a,alignment:4})},d.ElementArrayType=function(a){return new l({members:[{type:"Uint16",name:"vertices",components:a||3}]})}},{"../util/struct_array":401,"../util/util":403,"./array_group":289,"./bucket/circle_bucket":291,"./bucket/fill_bucket":292,"./bucket/line_bucket":293,"./bucket/symbol_bucket":294,"./buffer_group":296,assert:34,"feature-filter":105}],291:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addCircleVertex=function(a,b,c,d,e){return a.emplaceBack(2*b+(d+1)/2,2*c+(e+1)/2)},d.prototype.programInterfaces={circle:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType,paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("circle-color",b,c)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-radius",b,c)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-blur",b,c)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-opacity",b,c)]},multiplier:255,paintProperty:"circle-opacity"}]}},d.prototype.addFeature=function(a){for(var b={zoom:this.zoom},c=g(a),d=this.prepareArrayGroup("circle",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)for(var i=0;i<c[f].length;i++){var j=c[f][i].x,k=c[f][i].y;if(!(j<0||j>=h||k<0||k>=h)){var l=this.prepareArrayGroup("circle",4),m=l.layoutVertexArray,n=this.addCircleVertex(m,j,k,-1,-1);this.addCircleVertex(m,j,k,1,-1),this.addCircleVertex(m,j,k,1,1),this.addCircleVertex(m,j,k,-1,1),l.elementArray.emplaceBack(n,n+1,n+2),l.elementArray.emplaceBack(n,n+3,n+2)}}this.populatePaintArrays("circle",b,a.properties,d,e)}},{"../../util/util":403,"../bucket":290,"../load_geometry":298}],292:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=a("earcut"),i=a("../../util/classify_rings"),j=500;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.programInterfaces={fill:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType(1),elementArrayType2:new e.ElementArrayType(2),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-color",b,c)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-outline-color",b,c)},multiplier:255,paintProperty:"fill-outline-color"},{name:"a_opacity",components:1,type:"Uint8",getValue:function(a,b,c){return[a.getPaintValue("fill-opacity",b,c)]},multiplier:255,paintProperty:"fill-opacity"}]}},d.prototype.addFeature=function(a){for(var b=g(a),c=i(b,j),d=this.prepareArrayGroup("fill",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)this.addPolygon(c[f]);this.populatePaintArrays("fill",{zoom:this.zoom},a.properties,d,e)},d.prototype.addPolygon=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].length;for(var d=this.prepareArrayGroup("fill",b),e=[],f=[],g=d.layoutVertexArray.length,i=0;i<a.length;i++){var j=a[i];i>0&&f.push(e.length/2);for(var k=0;k<j.length;k++){var l=j[k],m=d.layoutVertexArray.emplaceBack(l.x,l.y);k>=1&&d.elementArray2.emplaceBack(m-1,m),e.push(l.x),e.push(l.y)}}for(var n=h(e,f),o=0;o<n.length;o++)d.elementArray.emplaceBack(n[o]+g)}},{"../../util/classify_rings":391,"../../util/util":403,"../bucket":290,"../load_geometry":298,earcut:99}],293:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT,i=63,j=Math.cos(37.5*(Math.PI/180)),k=15,l=15,m=.5,n=Math.pow(2,l-1)/m;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addLineVertex=function(a,b,c,d,e,f,g){return a.emplaceBack(b.x<<1|d,b.y<<1|e,Math.round(i*c.x)+128,Math.round(i*c.y)+128,(0===f?0:f<0?-1:1)+1|(g*m&63)<<2,g*m>>6)},d.prototype.programInterfaces={line:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),elementArrayType:new e.ElementArrayType}},d.prototype.addFeature=function(a){for(var b=g(a,l),c=0;c<b.length;c++)this.addLine(b[c],this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},d.prototype.addLine=function(a,b,c,d,e){for(var f=a.length;f>2&&a[f-1].equals(a[f-2]);)f--;if(!(a.length<2)){"bevel"===b&&(d=1.05);var g=k*(h/(512*this.overscaling)),i=a[0],l=a[f-1],m=i.equals(l);if(this.prepareArrayGroup("line",10*f),2!==f||!m){this.distance=0;var n,o,p,q,r,s,t,u=c,v=m?"butt":c,w=!0;this.e1=this.e2=this.e3=-1,m&&(n=a[f-2],r=i.sub(n)._unit()._perp());for(var x=0;x<f;x++)if(p=m&&x===f-1?a[1]:a[x+1],!p||!a[x].equals(p)){r&&(q=r),n&&(o=n),n=a[x],r=p?p.sub(n)._unit()._perp():q,q=q||r;var y=q.add(r)._unit(),z=y.x*r.x+y.y*r.y,A=1/z,B=z<j&&o&&p;if(B&&x>0){var C=n.dist(o);if(C>2*g){var D=n.sub(n.sub(o)._mult(g/C)._round());this.distance+=D.dist(o),this.addCurrentVertex(D,this.distance,q.mult(1),0,0,!1),o=D}}var E=o&&p,F=E?b:p?u:v;if(E&&"round"===F&&(A<e?F="miter":A<=2&&(F="fakeround")),"miter"===F&&A>d&&(F="bevel"),"bevel"===F&&(A>2&&(F="flipbevel"),A<d&&(F="miter")),o&&(this.distance+=n.dist(o)),"miter"===F)y._mult(A),this.addCurrentVertex(n,this.distance,y,0,0,!1);else if("flipbevel"===F){if(A>100)y=r.clone();else{var G=q.x*r.y-q.y*r.x>0?-1:1,H=A*q.add(r).mag()/q.sub(r).mag();y._perp()._mult(H*G)}this.addCurrentVertex(n,this.distance,y,0,0,!1),this.addCurrentVertex(n,this.distance,y.mult(-1),0,0,!1)}else if("bevel"===F||"fakeround"===F){var I=q.x*r.y-q.y*r.x>0,J=-Math.sqrt(A*A-1);if(I?(t=0,s=J):(s=0,t=J),w||this.addCurrentVertex(n,this.distance,q,s,t,!1),"fakeround"===F){for(var K,L=Math.floor(8*(.5-(z-.5))),M=0;M<L;M++)K=r.mult((M+1)/(L+1))._add(q)._unit(),this.addPieSliceVertex(n,this.distance,K,I);this.addPieSliceVertex(n,this.distance,y,I);for(var N=L-1;N>=0;N--)K=q.mult((N+1)/(L+1))._add(r)._unit(),this.addPieSliceVertex(n,this.distance,K,I)}p&&this.addCurrentVertex(n,this.distance,r,-s,-t,!1)}else"butt"===F?(w||this.addCurrentVertex(n,this.distance,q,0,0,!1),p&&this.addCurrentVertex(n,this.distance,r,0,0,!1)):"square"===F?(w||(this.addCurrentVertex(n,this.distance,q,1,1,!1),this.e1=this.e2=-1),p&&this.addCurrentVertex(n,this.distance,r,-1,-1,!1)):"round"===F&&(w||(this.addCurrentVertex(n,this.distance,q,0,0,!1),this.addCurrentVertex(n,this.distance,q,1,1,!0),this.e1=this.e2=-1),p&&(this.addCurrentVertex(n,this.distance,r,-1,-1,!0),this.addCurrentVertex(n,this.distance,r,0,0,!1)));if(B&&x<f-1){var O=n.dist(p);if(O>2*g){var P=n.add(p.sub(n)._mult(g/O)._round());this.distance+=P.dist(n),this.addCurrentVertex(P,this.distance,r.mult(1),0,0,!1),n=P}}w=!1}}}},d.prototype.addCurrentVertex=function(a,b,c,d,e,f){var g,h=f?1:0,i=this.arrayGroups.line[this.arrayGroups.line.length-1],j=i.layoutVertexArray,k=i.elementArray;g=c.clone(),d&&g._sub(c.perp()._mult(d)),this.e3=this.addLineVertex(j,a,g,h,0,d,b),this.e1>=0&&this.e2>=0&&k.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,g=c.mult(-1),e&&g._sub(c.perp()._mult(e)),this.e3=this.addLineVertex(j,a,g,h,1,-e,b),this.e1>=0&&this.e2>=0&&k.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,b>n/2&&(this.distance=0,this.addCurrentVertex(a,this.distance,c,d,e,f))},d.prototype.addPieSliceVertex=function(a,b,c,d){var e=d?1:0;c=c.mult(d?-1:1);var f=this.arrayGroups.line[this.arrayGroups.line.length-1],g=f.layoutVertexArray,h=f.elementArray;this.e3=this.addLineVertex(g,a,c,0,e,0,b),this.e1>=0&&this.e2>=0&&h.emplaceBack(this.e1,this.e2,this.e3),d?this.e2=this.e3:this.e1=this.e3}},{"../../util/util":403,"../bucket":290,"../load_geometry":298}],294:[function(a,b,c){"use strict";function d(a){g.apply(this,arguments),this.showCollisionBoxes=a.showCollisionBoxes,this.overscaling=a.overscaling,this.collisionBoxArray=a.collisionBoxArray,this.symbolQuadsArray=a.symbolQuadsArray,this.symbolInstancesArray=a.symbolInstancesArray,this.sdfIcons=a.sdfIcons,this.iconsNeedLinear=a.iconsNeedLinear,this.adjustedTextSize=a.adjustedTextSize,this.adjustedIconSize=a.adjustedIconSize,this.fontstack=a.fontstack}function e(a,b,c,d,e,f,g,h,i,j,k){return a.emplaceBack(b,c,Math.round(64*d),Math.round(64*e),f/4,g/4,10*(j||0),k,10*(h||0),10*Math.min(i||25,25))}var f=a("point-geometry"),g=a("../bucket"),h=a("../../symbol/anchor"),i=a("../../symbol/get_anchors"),j=a("../../util/token"),k=a("../../symbol/quads"),l=a("../../symbol/shaping"),m=a("../../symbol/resolve_text"),n=a("../../symbol/mergelines"),o=a("../../symbol/clip_line"),p=a("../../util/util"),q=a("../load_geometry"),r=a("../../symbol/collision_feature"),s=l.shapeText,t=l.shapeIcon,u=k.getGlyphQuads,v=k.getIconQuads,w=g.EXTENT;b.exports=d,d.MAX_QUADS=65535,d.prototype=p.inherit(g,{}),d.prototype.serialize=function(){var a=g.prototype.serialize.apply(this);return a.sdfIcons=this.sdfIcons,a.iconsNeedLinear=this.iconsNeedLinear,a.adjustedTextSize=this.adjustedTextSize,a.adjustedIconSize=this.adjustedIconSize,a.fontstack=this.fontstack,a};var x=new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),y=new g.ElementArrayType;d.prototype.addCollisionBoxVertex=function(a,b,c,d,e){return a.emplaceBack(b.x,b.y,Math.round(c.x),Math.round(c.y),10*d,10*e)},d.prototype.programInterfaces={glyph:{layoutVertexArrayType:x,elementArrayType:y},icon:{layoutVertexArrayType:x,elementArrayType:y},collisionBox:{layoutVertexArrayType:new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}])}},d.prototype.populateArrays=function(a,b,c){var d={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:d}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:d}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:d}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:d});var e=512*this.overscaling;this.tilePixelRatio=w/e,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var f=this.layer.layout,g=this.features,h=this.textFeatures,i=.5,k=.5;switch(f["text-anchor"]){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(f["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":k=1;break;case"top":case"top-right":case"top-left":k=0}for(var l="right"===f["text-justify"]?1:"left"===f["text-justify"]?0:.5,m=24,o=f["text-line-height"]*m,r="line"!==f["symbol-placement"]?f["text-max-width"]*m:0,u=f["text-letter-spacing"]*m,v=[f["text-offset"][0]*m,f["text-offset"][1]*m],x=this.fontstack=f["text-font"].join(","),y=[],z=0;z<g.length;z++)y.push(q(g[z]));if("line"===f["symbol-placement"]){var A=n(g,h,y);y=A.geometries,g=A.features,h=A.textFeatures}for(var B,C,D=0;D<g.length;D++)if(y[D]){if(B=h[D]?s(h[D],b[x],r,o,i,k,l,u,v):null,f["icon-image"]){var E=j(g[D].properties,f["icon-image"]),F=c[E];C=t(F,f),F&&(void 0===this.sdfIcons?this.sdfIcons=F.sdf:this.sdfIcons!==F.sdf&&p.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==F.pixelRatio?this.iconsNeedLinear=!0:0===f["icon-rotate"]&&this.layer.isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0))}else C=null;(B||C)&&this.addFeature(y[D],B,C,g[D])}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(a,this.showCollisionBoxes),this.trimArrays()},d.prototype.addFeature=function(a,b,c,d){var e=this.layer.layout,f=24,g=this.adjustedTextSize/f,j=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,k=this.tilePixelRatio*g,l=this.tilePixelRatio*j/f,m=this.tilePixelRatio*this.adjustedIconSize,n=this.tilePixelRatio*e["symbol-spacing"],p=e["symbol-avoid-edges"],q=e["text-padding"]*this.tilePixelRatio,r=e["icon-padding"]*this.tilePixelRatio,s=e["text-max-angle"]/180*Math.PI,t="map"===e["text-rotation-alignment"]&&"line"===e["symbol-placement"],u="map"===e["icon-rotation-alignment"]&&"line"===e["symbol-placement"],v=e["text-allow-overlap"]||e["icon-allow-overlap"]||e["text-ignore-placement"]||e["icon-ignore-placement"],x="line"===e["symbol-placement"],y=n/2;x&&(a=o(a,0,0,w,w));for(var z=0;z<a.length;z++){var A,B=a[z];A=x?i(B,n,s,b,c,f,l,this.overscaling,w):[new h(B[0].x,B[0].y,0)];for(var C=0,D=A.length;C<D;C++){var E=A[C];if(!(b&&x&&this.anchorIsTooClose(b.text,y,E))){var F=!(E.x<0||E.x>w||E.y<0||E.y>w);if(!p||F){var G=F||v;this.addSymbolInstance(E,B,b,c,this.layer,G,this.symbolInstancesArray.length,this.collisionBoxArray,d.index,this.sourceLayerIndex,this.index,k,q,t,m,r,u,{zoom:this.zoom},d.properties)}}}}},d.prototype.anchorIsTooClose=function(a,b,c){var d=this.compareText;if(a in d){for(var e=d[a],f=e.length-1;f>=0;f--)if(c.dist(e[f])<b)return!0}else d[a]=[];return d[a].push(c),!1},d.prototype.placeFeatures=function(a,b){this.recalculateStyleLayers(),this.createArrays();var c=this.layer.layout,d=a.maxScale,e="map"===c["text-rotation-alignment"]&&"line"===c["symbol-placement"],f="map"===c["icon-rotation-alignment"]&&"line"===c["symbol-placement"],g=c["text-allow-overlap"]||c["icon-allow-overlap"]||c["text-ignore-placement"]||c["icon-ignore-placement"];if(g){var h=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),i=a.angle,j=Math.sin(i),k=Math.cos(i);this.sortedSymbolInstances=h.sort(function(a,b){var c=j*a.anchorPointX+k*a.anchorPointY|0,d=j*b.anchorPointX+k*b.anchorPointY|0;return c-d||b.index-a.index})}for(var l=this.symbolInstancesStartIndex;l<this.symbolInstancesEndIndex;l++){var m=this.sortedSymbolInstances?this.sortedSymbolInstances[l-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(l),n={boxStartIndex:m.textBoxStartIndex,boxEndIndex:m.textBoxEndIndex},o={boxStartIndex:m.iconBoxStartIndex,boxEndIndex:m.iconBoxEndIndex},p=!(m.textBoxStartIndex===m.textBoxEndIndex),q=!(m.iconBoxStartIndex===m.iconBoxEndIndex),r=c["text-optional"]||!p,s=c["icon-optional"]||!q,t=p?a.placeCollisionFeature(n,c["text-allow-overlap"],c["symbol-avoid-edges"]):a.minScale,u=q?a.placeCollisionFeature(o,c["icon-allow-overlap"],c["symbol-avoid-edges"]):a.minScale;r||s?!s&&t?t=Math.max(u,t):!r&&u&&(u=Math.max(u,t)):u=t=Math.max(u,t),p&&(a.insertCollisionFeature(n,t,c["text-ignore-placement"]),t<=d&&this.addSymbols("glyph",m.glyphQuadStartIndex,m.glyphQuadEndIndex,t,c["text-keep-upright"],e,a.angle)),q&&(a.insertCollisionFeature(o,u,c["icon-ignore-placement"]),u<=d&&this.addSymbols("icon",m.iconQuadStartIndex,m.iconQuadEndIndex,u,c["icon-keep-upright"],f,a.angle))}b&&this.addToDebugBuffers(a)},d.prototype.addSymbols=function(a,b,c,d,f,g,h){for(var i=this.prepareArrayGroup(a,4*(c-b)),j=i.elementArray,k=i.layoutVertexArray,l=this.zoom,m=Math.max(Math.log(d)/Math.LN2+l,0),n=b;n<c;n++){var o=this.symbolQuadsArray.get(n).SymbolQuad,p=(o.anchorAngle+h+Math.PI)%(2*Math.PI);if(!(f&&g&&(p<=Math.PI/2||p>3*Math.PI/2))){var q=o.tl,r=o.tr,s=o.bl,t=o.br,u=o.tex,v=o.anchorPoint,w=Math.max(l+Math.log(o.minScale)/Math.LN2,m),x=Math.min(l+Math.log(o.maxScale)/Math.LN2,25);if(!(x<=w)){w===m&&(w=0);var y=Math.round(o.glyphAngle/(2*Math.PI)*256),z=e(k,v.x,v.y,q.x,q.y,u.x,u.y,w,x,m,y);e(k,v.x,v.y,r.x,r.y,u.x+u.w,u.y,w,x,m,y),e(k,v.x,v.y,s.x,s.y,u.x,u.y+u.h,w,x,m,y),e(k,v.x,v.y,t.x,t.y,u.x+u.w,u.y+u.h,w,x,m,y),j.emplaceBack(z,z+1,z+2),j.emplaceBack(z+1,z+2,z+3)}}}},d.prototype.updateIcons=function(a){this.recalculateStyleLayers();var b=this.layer.layout["icon-image"];if(b)for(var c=0;c<this.features.length;c++){var d=j(this.features[c].properties,b);d&&(a[d]=!0)}},d.prototype.updateFont=function(a){this.recalculateStyleLayers();var b=this.layer.layout["text-font"],c=a[b]=a[b]||{};this.textFeatures=m(this.features,this.layer.layout,c)},d.prototype.addToDebugBuffers=function(a){for(var b=this.prepareArrayGroup("collisionBox",0),c=b.layoutVertexArray,d=-a.angle,e=a.yStretch,g=this.symbolInstancesStartIndex;g<this.symbolInstancesEndIndex;g++){var h=this.symbolInstancesArray.get(g);h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var i=0;i<2;i++){var j=h[0===i?"textCollisionFeature":"iconCollisionFeature"];if(j)for(var k=j.boxStartIndex;k<j.boxEndIndex;k++){var l=this.collisionBoxArray.get(k),m=l.anchorPoint,n=new f(l.x1,l.y1*e)._rotate(d),o=new f(l.x2,l.y1*e)._rotate(d),p=new f(l.x1,l.y2*e)._rotate(d),q=new f(l.x2,l.y2*e)._rotate(d),r=Math.max(0,Math.min(25,this.zoom+Math.log(l.maxScale)/Math.LN2)),s=Math.max(0,Math.min(25,this.zoom+Math.log(l.placementScale)/Math.LN2));this.addCollisionBoxVertex(c,m,n,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,n,r,s)}}}},d.prototype.addSymbolInstance=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,q,s,t,w,x){var y,z,A,B,C,D,E,F;if(c&&(E=g?u(a,c,m,b,f,o):[],C=new r(i,b,a,j,k,l,c,m,n,o,(!1))),y=this.symbolQuadsArray.length,E&&E.length)for(var G=0;G<E.length;G++)this.addSymbolQuad(E[G]);z=this.symbolQuadsArray.length;var H=C?C.boxStartIndex:this.collisionBoxArray.length,I=C?C.boxEndIndex:this.collisionBoxArray.length;e&&(F=g?v(a,e,q,b,f,t,c,w,x):[],D=new r(i,b,a,j,k,l,e,q,s,t,(!0))),A=this.symbolQuadsArray.length,F&&1===F.length&&this.addSymbolQuad(F[0]),B=this.symbolQuadsArray.length;var J=D?D.boxStartIndex:this.collisionBoxArray.length,K=D?D.boxEndIndex:this.collisionBoxArray.length;return B>d.MAX_QUADS&&p.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),z>d.MAX_QUADS&&p.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstancesArray.emplaceBack(H,I,J,K,y,z,A,B,a.x,a.y,h)},d.prototype.addSymbolQuad=function(a){return this.symbolQuadsArray.emplaceBack(a.anchorPoint.x,a.anchorPoint.y,a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y,a.tex.h,a.tex.w,a.tex.x,a.tex.y,a.anchorAngle,a.glyphAngle,a.maxScale,a.minScale)}},{"../../symbol/anchor":352,"../../symbol/clip_line":354,"../../symbol/collision_feature":356,"../../symbol/get_anchors":358,"../../symbol/mergelines":361,"../../symbol/quads":362,"../../symbol/resolve_text":363,"../../symbol/shaping":364,"../../util/token":402,"../../util/util":403,"../bucket":290,"../load_geometry":298,"point-geometry":442}],295:[function(a,b,c){"use strict";function d(a,b,c){this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.attributes=b.members,this.itemSize=b.bytesPerElement,this.type=c,this.arrayType=b}b.exports=d,d.prototype.bind=function(a){var b=a[this.type];this.buffer?a.bindBuffer(b,this.buffer):(this.buffer=a.createBuffer(),a.bindBuffer(b,this.buffer),a.bufferData(b,this.arrayBuffer,a.STATIC_DRAW),this.arrayBuffer=null)};var e={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};d.prototype.setVertexAttribPointers=function(a,b){for(var c=0;c<this.attributes.length;c++){var d=this.attributes[c],f=b[d.name];void 0!==f&&a.vertexAttribPointer(f,d.components,a[e[d.type]],!1,this.arrayType.bytesPerElement,d.offset)}},d.prototype.destroy=function(a){this.buffer&&a.deleteBuffer(this.buffer)},d.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"}},{}],296:[function(a,b,c){"use strict";function d(a,b){this.layoutVertexBuffer=new f(a.layoutVertexArray,b.layoutVertexArrayType,f.BufferType.VERTEX),a.elementArray&&(this.elementBuffer=new f(a.elementArray,b.elementArrayType,f.BufferType.ELEMENT));var c,d=this.vaos={};a.elementArray2&&(this.elementBuffer2=new f(a.elementArray2,b.elementArrayType2,f.BufferType.ELEMENT),c=this.secondVaos={}),this.paintVertexBuffers=e.mapObject(a.paintVertexArrays,function(e,h){return d[h]=new g,a.elementArray2&&(c[h]=new g),new f(e,b.paintVertexArrayTypes[h],f.BufferType.VERTEX)})}var e=a("../util/util"),f=a("./buffer"),g=a("../render/vertex_array_object");b.exports=d,d.prototype.destroy=function(a){this.layoutVertexBuffer.destroy(a),this.elementBuffer&&this.elementBuffer.destroy(a),this.elementBuffer2&&this.elementBuffer2.destroy(a);for(var b in this.paintVertexBuffers)this.paintVertexBuffers[b].destroy(a);for(var c in this.vaos)this.vaos[c].destroy(a);for(var d in this.secondVaos)this.secondVaos[d].destroy(a)}},{"../render/vertex_array_object":318,"../util/util":403,"./buffer":295}],297:[function(a,b,c){"use strict";function d(a,b,c){if(a.grid){var d=a,e=b;a=d.coord,b=d.overscaling,this.grid=new o(d.grid),this.featureIndexArray=new y(d.featureIndexArray),this.rawTileData=e,this.bucketLayerIDs=d.bucketLayerIDs}else this.grid=new o(l,16,0),this.featureIndexArray=new y;this.coord=a,this.overscaling=b,this.x=a.x,this.y=a.y,this.z=a.z-Math.log(b)/Math.LN2,this.setCollisionTile(c)}function e(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function f(a,b){return b-a}function g(a){return a["line-gap-width"]>0?a["line-gap-width"]+2*a["line-width"]:a["line-width"]}function h(a,b,c,d,e){if(!b[0]&&!b[1])return a;b=j.convert(b),"viewport"===c&&b._rotate(-d);for(var f=[],g=0;g<a.length;g++){for(var h=a[g],i=[],k=0;k<h.length;k++)i.push(h[k].sub(b._mult(e)));f.push(i)}return f}function i(a,b){for(var c=[],d=new j(0,0),e=0;e<a.length;e++){for(var f=a[e],g=[],h=0;h<f.length;h++){var i=f[h-1],k=f[h],l=f[h+1],m=0===h?d:k.sub(i)._unit()._perp(),n=h===f.length-1?d:l.sub(k)._unit()._perp(),o=m._add(n)._unit(),p=o.x*n.x+o.y*n.y;o._mult(1/p),g.push(o._mult(b)._add(k))}c.push(g)}return c}var j=a("point-geometry"),k=a("./load_geometry"),l=a("./bucket").EXTENT,m=a("feature-filter"),n=a("../util/struct_array"),o=a("grid-index"),p=a("../util/dictionary_coder"),q=a("vector-tile"),r=a("pbf"),s=a("../util/vectortile_to_geojson"),t=a("../util/util").arraysIntersect,u=a("../util/intersection_tests"),v=u.multiPolygonIntersectsBufferedMultiPoint,w=u.multiPolygonIntersectsMultiPolygon,x=u.multiPolygonIntersectsBufferedMultiLine,y=new n({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});b.exports=d,d.prototype.insert=function(a,b,c,d){var e=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,c,d);for(var f=k(a),g=0;g<f.length;g++){for(var h=f[g],i=[1/0,1/0,-(1/0),-(1/0)],j=0;j<h.length;j++){var l=h[j];i[0]=Math.min(i[0],l.x),i[1]=Math.min(i[1],l.y),i[2]=Math.max(i[2],l.x),i[3]=Math.max(i[3],l.y)}this.grid.insert(e,i[0],i[1],i[2],i[3])}},d.prototype.setCollisionTile=function(a){this.collisionTile=a},d.prototype.serialize=function(){var a={coord:this.coord,overscaling:this.overscaling,grid:this.grid.toArrayBuffer(),featureIndexArray:this.featureIndexArray.serialize(),bucketLayerIDs:this.bucketLayerIDs};return{data:a,transferables:[a.grid,a.featureIndexArray.arrayBuffer]}},d.prototype.query=function(a,b){this.vtLayers||(this.vtLayers=new q.VectorTile(new r(new Uint8Array(this.rawTileData))).layers,this.sourceLayerCoder=new p(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var c={},d=a.params||{},h=l/a.tileSize/a.scale,i=m(d.filter),k=0;for(var n in b){var o=b[n],s=o.paint,t=0;"line"===o.type?t=g(s)/2+Math.abs(s["line-offset"])+e(s["line-translate"]):"fill"===o.type?t=e(s["fill-translate"]):"circle"===o.type&&(t=s["circle-radius"]+e(s["circle-translate"])),k=Math.max(k,t*h)}for(var u=a.queryGeometry.map(function(a){return a.map(function(a){return new j(a.x,a.y)})}),v=1/0,w=1/0,x=-(1/0),y=-(1/0),z=0;z<u.length;z++)for(var A=u[z],B=0;B<A.length;B++){var C=A[B];v=Math.min(v,C.x),w=Math.min(w,C.y),x=Math.max(x,C.x),y=Math.max(y,C.y)}var D=this.grid.query(v-k,w-k,x+k,y+k);D.sort(f),this.filterMatching(c,D,this.featureIndexArray,u,i,d.layers,b,a.bearing,h);var E=this.collisionTile.queryRenderedSymbols(v,w,x,y,a.scale);return E.sort(),this.filterMatching(c,E,this.collisionTile.collisionBoxArray,u,i,d.layers,b,a.bearing,h),c},d.prototype.filterMatching=function(a,b,c,d,e,f,j,l,m){for(var n,o=0;o<b.length;o++){var p=b[o];if(p!==n){n=p;var q=c.get(p),r=this.bucketLayerIDs[q.bucketIndex];if(!f||t(f,r)){var u=this.sourceLayerCoder.decode(q.sourceLayerIndex),y=this.vtLayers[u],z=y.feature(q.featureIndex);if(e(z))for(var A=null,B=0;B<r.length;B++){var C=r[B];if(!(f&&f.indexOf(C)<0)){var D=j[C];if(D){var E;if("symbol"!==D.type){A||(A=k(z));var F=D.paint;if("line"===D.type){E=h(d,F["line-translate"],F["line-translate-anchor"],l,m);var G=g(F)/2*m;if(F["line-offset"]&&(A=i(A,F["line-offset"]*m)),!x(E,A,G))continue}else if("fill"===D.type){if(E=h(d,F["fill-translate"],F["fill-translate-anchor"],l,m),!w(E,A))continue}else if("circle"===D.type){E=h(d,F["circle-translate"],F["circle-translate-anchor"],l,m);var H=F["circle-radius"]*m;if(!v(E,A,H))continue}}var I=new s(z,this.z,this.x,this.y);I.layer=D.serialize({includeRefProperties:!0});var J=a[C];void 0===J&&(J=a[C]=[]),J.push(I)}}}}}}}},{"../util/dictionary_coder":393,"../util/intersection_tests":398,"../util/struct_array":401,"../util/util":403,"../util/vectortile_to_geojson":404,"./bucket":290,"./load_geometry":298,"feature-filter":105,"grid-index":252,pbf:436,"point-geometry":442,"vector-tile":505}],298:[function(a,b,c){"use strict";function d(a){return{min:-1*Math.pow(2,a-1),max:Math.pow(2,a-1)-1}}var e=a("../util/util"),f=a("./bucket").EXTENT,g=a("assert"),h={15:d(15),16:d(16)};b.exports=function(a,b){var c=h[b||16];g(c);for(var d=f/a.extent,i=a.loadGeometry(),j=0;j<i.length;j++)for(var k=i[j],l=0;l<k.length;l++){var m=k[l];m.x=Math.round(m.x*d),m.y=Math.round(m.y*d),(m.x<c.min||m.x>c.max||m.y<c.min||m.y>c.max)&&e.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}},{"../util/util":403,"./bucket":290,assert:34}],299:[function(a,b,c){"use strict";function d(a,b,c){this.column=a,this.row=b,this.zoom=c}b.exports=d,d.prototype={clone:function(){return new d(this.column,this.row,this.zoom)},zoomTo:function(a){return this.clone()._zoomTo(a)},sub:function(a){return this.clone()._sub(a)},_zoomTo:function(a){var b=Math.pow(2,a-this.zoom);return this.column*=b,this.row*=b,this.zoom=a,this},_sub:function(a){return a=a.zoomTo(this.zoom),this.column-=a.column,this.row-=a.row,
this}}},{}],300:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))throw new Error("Invalid LngLat object: ("+a+", "+b+")");if(this.lng=+a,this.lat=+b,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}b.exports=d;var e=a("../util/util").wrap;d.prototype.wrap=function(){return new d(e(this.lng,-180,180),this.lat)},d.prototype.toArray=function(){return[this.lng,this.lat]},d.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{"../util/util":403}],301:[function(a,b,c){"use strict";function d(a,b){a&&(b?this.extend(a).extend(b):4===a.length?this.extend([a[0],a[1]]).extend([a[2],a[3]]):this.extend(a[0]).extend(a[1]))}b.exports=d;var e=a("./lng_lat");d.prototype={extend:function(a){var b,c,f=this._sw,g=this._ne;if(a instanceof e)b=a,c=a;else{if(!(a instanceof d))return a?this.extend(e.convert(a)||d.convert(a)):this;if(b=a._sw,c=a._ne,!b||!c)return this}return f||g?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),g.lng=Math.max(c.lng,g.lng),g.lat=Math.max(c.lat,g.lat)):(this._sw=new e(b.lng,b.lat),this._ne=new e(c.lng,c.lat)),this},getCenter:function(){return new e((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new e(this.getWest(),this.getNorth())},getSouthEast:function(){return new e(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},d.convert=function(a){return!a||a instanceof d?a:new d(a)}},{"./lng_lat":300}],302:[function(a,b,c){"use strict";function d(a,b){this.tileSize=512,this._minZoom=a||0,this._maxZoom=b||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new e(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var e=a("./lng_lat"),f=a("point-geometry"),g=a("./coordinate"),h=a("../util/util").wrap,i=a("../util/interpolate"),j=a("../source/tile_coord"),k=a("../data/bucket").EXTENT,l=a("gl-matrix"),m=l.vec4,n=l.mat4,o=l.mat2;b.exports=d,d.prototype={get minZoom(){return this._minZoom},set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))},get maxZoom(){return this._maxZoom},set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new f(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(a){var b=-h(a,-180,180)*Math.PI/180;this.angle!==b&&(this._unmodified=!1,this.angle=b,this._calcMatrices(),this.rotationMatrix=o.create(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(a){var b=Math.min(60,a)/180*Math.PI;this._pitch!==b&&(this._unmodified=!1,this._pitch=b,this._calcMatrices())},get altitude(){return this._altitude},set altitude(a){var b=Math.max(.75,a);this._altitude!==b&&(this._unmodified=!1,this._altitude=b,this._calcMatrices())},get zoom(){return this._zoom},set zoom(a){var b=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._calcMatrices(),this._constrain())},coveringZoomLevel:function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))},coveringTiles:function(a){var b=this.coveringZoomLevel(a),c=b;if(b<a.minzoom)return[];b>a.maxzoom&&(b=a.maxzoom);var d=this,e=d.locationCoordinate(d.center)._zoomTo(b),g=new f(e.column-.5,e.row-.5);return j.cover(b,[d.pointCoordinate(new f(0,0))._zoomTo(b),d.pointCoordinate(new f(d.width,0))._zoomTo(b),d.pointCoordinate(new f(d.width,d.height))._zoomTo(b),d.pointCoordinate(new f(0,d.height))._zoomTo(b)],a.reparseOverscaled?c:b).sort(function(a,b){return g.dist(a)-g.dist(b)})},resize:function(a,b){this.width=a,this.height=b,this.pixelsToGLUnits=[2/a,-2/b],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(a){return Math.pow(2,a)},scaleZoom:function(a){return Math.log(a)/Math.LN2},project:function(a,b){return new f(this.lngX(a.lng,b),this.latY(a.lat,b))},unproject:function(a,b){return new e(this.xLng(a.x,b),this.yLat(a.y,b))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new f(this.x,this.y)},lngX:function(a,b){return(180+a)*(b||this.worldSize)/360},latY:function(a,b){var c=180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360));return(180-c)*(b||this.worldSize)/360},xLng:function(a,b){return 360*a/(b||this.worldSize)-180},yLat:function(a,b){var c=180-360*a/(b||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(c*Math.PI/180))-90},panBy:function(a){var b=this.centerPoint._add(a);this.center=this.pointLocation(b)},setLocationAtPoint:function(a,b){var c=this.locationCoordinate(a),d=this.pointCoordinate(b),e=this.pointCoordinate(this.centerPoint),f=d._sub(c);this._unmodified=!1,this.center=this.coordinateLocation(e._sub(f))},locationPoint:function(a){return this.coordinatePoint(this.locationCoordinate(a))},pointLocation:function(a){return this.coordinateLocation(this.pointCoordinate(a))},locationCoordinate:function(a){var b=this.zoomScale(this.tileZoom)/this.worldSize,c=e.convert(a);return new g(this.lngX(c.lng)*b,this.latY(c.lat)*b,this.tileZoom)},coordinateLocation:function(a){var b=this.zoomScale(a.zoom);return new e(this.xLng(a.column,b),this.yLat(a.row,b))},pointCoordinate:function(a){var b=0,c=[a.x,a.y,0,1],d=[a.x,a.y,1,1];m.transformMat4(c,c,this.pixelMatrixInverse),m.transformMat4(d,d,this.pixelMatrixInverse);var e=c[3],f=d[3],h=c[0]/e,j=d[0]/f,k=c[1]/e,l=d[1]/f,n=c[2]/e,o=d[2]/f,p=n===o?0:(b-n)/(o-n),q=this.worldSize/this.zoomScale(this.tileZoom);return new g(i(h,j,p)/q,i(k,l,p)/q,this.tileZoom)},coordinatePoint:function(a){var b=this.worldSize/this.zoomScale(a.zoom),c=[a.column*b,a.row*b,0,1];return m.transformMat4(c,c,this.pixelMatrix),new f(c[0]/c[3],c[1]/c[3])},calculatePosMatrix:function(a,b){void 0===b&&(b=1/0),a instanceof j&&(a=a.toCoordinate(b));var c=Math.min(a.zoom,b),d=this.worldSize/Math.pow(2,c),e=new Float64Array(16);return n.identity(e),n.translate(e,e,[a.column*d,a.row*d,0]),n.scale(e,e,[d/k,d/k,1]),n.multiply(e,this.projMatrix,e),new Float32Array(e)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,b,c,d,e,g,h,i,j=this.size,k=this._unmodified;this.latRange&&(a=this.latY(this.latRange[1]),b=this.latY(this.latRange[0]),e=b-a<j.y?j.y/(b-a):0),this.lngRange&&(c=this.lngX(this.lngRange[0]),d=this.lngX(this.lngRange[1]),g=d-c<j.x?j.x/(d-c):0);var l=Math.max(g||0,e||0);if(l)return this.center=this.unproject(new f(g?(d+c)/2:this.x,e?(b+a)/2:this.y)),this.zoom+=this.scaleZoom(l),this._unmodified=k,void(this._constraining=!1);if(this.latRange){var m=this.y,n=j.y/2;m-n<a&&(i=a+n),m+n>b&&(i=b-n)}if(this.lngRange){var o=this.x,p=j.x/2;o-p<c&&(h=c+p),o+p>d&&(h=d-p)}void 0===h&&void 0===i||(this.center=this.unproject(new f(void 0!==h?h:this.x,void 0!==i?i:this.y))),this._unmodified=k,this._constraining=!1}},_calcMatrices:function(){if(this.height){var a=Math.atan(.5/this.altitude),b=Math.sin(a)*this.altitude/Math.sin(Math.PI/2-this._pitch-a),c=Math.cos(Math.PI/2-this._pitch)*b+this.altitude,d=new Float64Array(16);if(n.perspective(d,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,c),n.translate(d,d,[0,0,-this.altitude]),n.scale(d,d,[1,-1,1/this.height]),n.rotateX(d,d,this._pitch),n.rotateZ(d,d,this.angle),n.translate(d,d,[-this.x,-this.y,0]),this.projMatrix=d,d=n.create(),n.scale(d,d,[this.width/2,-this.height/2,1]),n.translate(d,d,[1,-1,0]),this.pixelMatrix=n.multiply(new Float64Array(16),d,this.projMatrix),d=n.invert(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d}}}},{"../data/bucket":290,"../source/tile_coord":330,"../util/interpolate":397,"../util/util":403,"./coordinate":299,"./lng_lat":300,"gl-matrix":161,"point-geometry":442}],303:[function(a,b,c){"use strict";var d={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};b.exports=function(a,b,c,e){e=e||1;var f,g,h,i,j,k,l,m,n=[];for(f=0,g=a.length;f<g;f++)if(j=d[a[f]]){for(m=null,h=0,i=j[1].length;h<i;h+=2)j[1][h]===-1&&j[1][h+1]===-1?m=null:(k=b+j[1][h]*e,l=c-j[1][h+1]*e,m&&n.push(m.x,m.y,k,l),m={x:k,y:l});b+=j[0]*e}return n}},{}],304:[function(a,b,c){"use strict";var d=b.exports={};d.version=a("../package.json").version,d.Map=a("./ui/map"),d.Control=a("./ui/control/control"),d.Navigation=a("./ui/control/navigation"),d.Geolocate=a("./ui/control/geolocate"),d.Attribution=a("./ui/control/attribution"),d.Popup=a("./ui/popup"),d.Marker=a("./ui/marker"),d.Style=a("./style/style"),d.LngLat=a("./geo/lng_lat"),d.LngLatBounds=a("./geo/lng_lat_bounds"),d.Point=a("point-geometry"),d.Evented=a("./util/evented"),d.util=a("./util/util"),d.supported=a("./util/browser").supported;var e=a("./util/ajax");d.util.getJSON=e.getJSON,d.util.getArrayBuffer=e.getArrayBuffer;var f=a("./util/config");d.config=f,Object.defineProperty(d,"accessToken",{get:function(){return f.ACCESS_TOKEN},set:function(a){f.ACCESS_TOKEN=a}})},{"../package.json":405,"./geo/lng_lat":300,"./geo/lng_lat_bounds":301,"./style/style":339,"./ui/control/attribution":370,"./ui/control/control":371,"./ui/control/geolocate":372,"./ui/control/navigation":373,"./ui/map":382,"./ui/marker":383,"./ui/popup":384,"./util/ajax":386,"./util/browser":387,"./util/config":392,"./util/evented":395,"./util/util":403,"point-geometry":442}],305:[function(a,b,c){"use strict";var d=a("assert");b.exports=function(a){for(var b={define:{},initialize:{}},c=0;c<a.length;c++){var e=a[c];d("u_"===e.name.slice(0,2));var f="{precision} "+(1===e.components?"float":"vec"+e.components);b.define[e.name.slice(2)]="uniform "+f+" "+e.name+";\n",b.initialize[e.name.slice(2)]=f+" "+e.name.slice(2)+" = "+e.name+";\n"}return b}},{assert:34}],306:[function(a,b,c){"use strict";function d(a,b,c){var d,h=a.gl,i=a.transform,j=c.paint["background-color"],k=c.paint["background-pattern"],l=c.paint["background-opacity"],m=k?a.spriteAtlas.getPosition(k.from,!0):null,n=k?a.spriteAtlas.getPosition(k.to,!0):null;if(a.setDepthSublayer(0),m&&n){if(a.isOpaquePass)return;d=a.useProgram("pattern"),h.uniform1i(d.u_image,0),h.uniform2fv(d.u_pattern_tl_a,m.tl),h.uniform2fv(d.u_pattern_br_a,m.br),h.uniform2fv(d.u_pattern_tl_b,n.tl),h.uniform2fv(d.u_pattern_br_b,n.br),h.uniform1f(d.u_opacity,l),h.uniform1f(d.u_mix,k.t),h.uniform2fv(d.u_pattern_size_a,m.size),h.uniform2fv(d.u_pattern_size_b,n.size),h.uniform1f(d.u_scale_a,k.fromScale),h.uniform1f(d.u_scale_b,k.toScale),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),a.tileExtentPatternVAO.bind(h,d,a.tileExtentBuffer)}else{if(a.isOpaquePass!==(1===j[3]))return;var o=f([{name:"u_color",components:4},{name:"u_opacity",components:1}]);d=a.useProgram("fill",[],o,o),h.uniform4fv(d.u_color,j),h.uniform1f(d.u_opacity,l),a.tileExtentVAO.bind(h,d,a.tileExtentBuffer)}h.disable(h.STENCIL_TEST);for(var p=i.coveringTiles({tileSize:g}),q=0;q<p.length;q++){var r=p[q];if(m&&n){var s={coord:r,tileSize:g};h.uniform1f(d.u_tile_units_to_pixels,1/e(s,1,a.transform.tileZoom));var t=s.tileSize*Math.pow(2,a.transform.tileZoom-s.coord.z),u=t*(s.coord.x+r.w*Math.pow(2,s.coord.z)),v=t*s.coord.y;h.uniform2f(d.u_pixel_coord_upper,u>>16,v>>16),h.uniform2f(d.u_pixel_coord_lower,65535&u,65535&v)}h.uniformMatrix4fv(d.u_matrix,!1,a.transform.calculatePosMatrix(r)),h.drawArrays(h.TRIANGLE_STRIP,0,a.tileExtentBuffer.length)}h.stencilMask(0),h.stencilFunc(h.EQUAL,128,128)}var e=a("../source/pixels_to_tile_units"),f=a("./create_uniform_pragmas"),g=512;b.exports=d},{"../source/pixels_to_tile_units":324,"./create_uniform_pragmas":305}],307:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;a.setDepthSublayer(0),a.depthMask(!1),f.disable(f.STENCIL_TEST);for(var g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.circle;if(k){var l=j.paintAttributes.circle[c.id],m=a.useProgram("circle",l.defines,l.vertexPragmas,l.fragmentPragmas);"map"===c.paint["circle-pitch-scale"]?(f.uniform1i(m.u_scale_with_map,!0),f.uniform2f(m.u_extrude_scale,a.transform.pixelsToGLUnits[0]*a.transform.altitude,a.transform.pixelsToGLUnits[1]*a.transform.altitude)):(f.uniform1i(m.u_scale_with_map,!1),f.uniform2fv(m.u_extrude_scale,a.transform.pixelsToGLUnits)),f.uniform1f(m.u_devicepixelratio,e.devicePixelRatio),f.uniformMatrix4fv(m.u_matrix,!1,a.translatePosMatrix(h.posMatrix,i,c.paint["circle-translate"],c.paint["circle-translate-anchor"])),j.setUniforms(f,"circle",m,c,{zoom:a.transform.zoom});for(var n=0;n<k.length;n++){var o=k[n];o.vaos[c.id].bind(f,m,o.layoutVertexBuffer,o.elementBuffer,o.paintVertexBuffers[c.id]),f.drawElements(f.TRIANGLES,3*o.elementBuffer.length,f.UNSIGNED_SHORT,0)}}}}}}var e=a("../util/browser");b.exports=d},{"../util/browser":387}],308:[function(a,b,c){"use strict";function d(a,b,c,d){var e=a.gl;e.enable(e.STENCIL_TEST);for(var f=a.useProgram("collisionbox"),g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.collisionBox;if(k&&k.length){var l=k[0];0!==l.layoutVertexBuffer.length&&(e.uniformMatrix4fv(f.u_matrix,!1,h.posMatrix),a.enableTileClippingMask(h),a.lineWidth(1),e.uniform1f(f.u_scale,Math.pow(2,a.transform.zoom-i.coord.z)),e.uniform1f(f.u_zoom,10*a.transform.zoom),e.uniform1f(f.u_maxzoom,10*(i.coord.z+1)),l.vaos[c.id].bind(e,f,l.layoutVertexBuffer),e.drawArrays(e.LINES,0,l.layoutVertexBuffer.length))}}}}b.exports=d},{}],309:[function(a,b,c){"use strict";function d(a,b,c){if(!a.isOpaquePass&&a.options.debug)for(var d=0;d<c.length;d++)e(a,b,c[d])}function e(a,b,c){var d=a.gl;d.disable(d.STENCIL_TEST),a.lineWidth(1*g.devicePixelRatio);var e=c.posMatrix,l=a.useProgram("debug");d.uniformMatrix4fv(l.u_matrix,!1,e),d.uniform4f(l.u_color,1,0,0,1),a.debugVAO.bind(d,l,a.debugBuffer),d.drawArrays(d.LINE_STRIP,0,a.debugBuffer.length);for(var m=f(c.toString(),50,200,5),n=new a.PosArray,o=0;o<m.length;o+=2)n.emplaceBack(m[o],m[o+1]);var p=new j(n.serialize(),a.PosArray.serialize(),j.BufferType.VERTEX),q=new k;q.bind(d,l,p),d.uniform4f(l.u_color,1,1,1,1);for(var r=b.getTile(c).tileSize,s=i/(Math.pow(2,a.transform.zoom-c.z)*r),t=[[-1,-1],[-1,1],[1,-1],[1,1]],u=0;u<t.length;u++){var v=t[u];d.uniformMatrix4fv(l.u_matrix,!1,h.translate([],e,[s*v[0],s*v[1],0])),d.drawArrays(d.LINES,0,p.length)}d.uniform4f(l.u_color,0,0,0,1),d.uniformMatrix4fv(l.u_matrix,!1,e),d.drawArrays(d.LINES,0,p.length)}var f=a("../lib/debugtext"),g=a("../util/browser"),h=a("gl-matrix").mat4,i=a("../data/bucket").EXTENT,j=a("../data/buffer"),k=a("./vertex_array_object");b.exports=d},{"../data/bucket":290,"../data/buffer":295,"../lib/debugtext":303,"../util/browser":387,"./vertex_array_object":318,"gl-matrix":161}],310:[function(a,b,c){"use strict";function d(a,b,c,d){var g=a.gl;g.enable(g.STENCIL_TEST);var h;if(h=!c.paint["fill-pattern"]&&c.isPaintValueFeatureConstant("fill-color")&&c.isPaintValueFeatureConstant("fill-opacity")&&1===c.paint["fill-color"][3]&&1===c.paint["fill-opacity"],a.isOpaquePass===h){a.setDepthSublayer(1);for(var i=0;i<d.length;i++)e(a,b,c,d[i])}if(!a.isOpaquePass&&c.paint["fill-antialias"]){a.lineWidth(2),a.depthMask(!1);var j=c.getPaintProperty("fill-outline-color");!j&&c.paint["fill-pattern"]||!j?a.setDepthSublayer(0):a.setDepthSublayer(2);for(var k=0;k<d.length;k++)f(a,b,c,d[k])}}function e(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h=f.bufferGroups.fill;if(h){var i,j=a.gl,k=c.paint["fill-pattern"];if(k)i=a.useProgram("pattern"),g(k,c.paint["fill-opacity"],e,d,a,i),j.activeTexture(j.TEXTURE0),a.spriteAtlas.bind(j,!0);else{var l=f.paintAttributes.fill[c.id];i=a.useProgram("fill",l.defines,l.vertexPragmas,l.fragmentPragmas),f.setUniforms(j,"fill",i,c,{zoom:a.transform.zoom})}j.uniformMatrix4fv(i.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),a.enableTileClippingMask(d);for(var m=0;m<h.length;m++){var n=h[m];n.vaos[c.id].bind(j,i,n.layoutVertexBuffer,n.elementBuffer,n.paintVertexBuffers[c.id]),j.drawElements(j.TRIANGLES,n.elementBuffer.length,j.UNSIGNED_SHORT,0)}}}}function f(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h,i=a.gl,j=f.bufferGroups.fill,k=c.paint["fill-pattern"],l=c.paint["fill-opacity"],m=c.getPaintProperty("fill-outline-color");if(k&&!m)h=a.useProgram("outlinepattern"),i.uniform2f(h.u_world,i.drawingBufferWidth,i.drawingBufferHeight);else{var n=f.paintAttributes.fill[c.id];h=a.useProgram("outline",n.defines,n.vertexPragmas,n.fragmentPragmas),i.uniform2f(h.u_world,i.drawingBufferWidth,i.drawingBufferHeight),i.uniform1f(h.u_opacity,l),f.setUniforms(i,"fill",h,c,{zoom:a.transform.zoom})}i.uniformMatrix4fv(h.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),k&&g(k,l,e,d,a,h),a.enableTileClippingMask(d);for(var o=0;o<j.length;o++){var p=j[o];p.secondVaos[c.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer2,p.paintVertexBuffers[c.id]),i.drawElements(i.LINES,2*p.elementBuffer2.length,i.UNSIGNED_SHORT,0)}}}function g(a,b,c,d,e,f){var g=e.gl,i=e.spriteAtlas.getPosition(a.from,!0),j=e.spriteAtlas.getPosition(a.to,!0);if(i&&j){g.uniform1i(f.u_image,0),g.uniform2fv(f.u_pattern_tl_a,i.tl),g.uniform2fv(f.u_pattern_br_a,i.br),g.uniform2fv(f.u_pattern_tl_b,j.tl),g.uniform2fv(f.u_pattern_br_b,j.br),g.uniform1f(f.u_opacity,b),g.uniform1f(f.u_mix,a.t),g.uniform1f(f.u_tile_units_to_pixels,1/h(c,1,e.transform.tileZoom)),g.uniform2fv(f.u_pattern_size_a,i.size),g.uniform2fv(f.u_pattern_size_b,j.size),g.uniform1f(f.u_scale_a,a.fromScale),g.uniform1f(f.u_scale_b,a.toScale);var k=c.tileSize*Math.pow(2,e.transform.tileZoom-c.coord.z),l=k*(c.coord.x+d.w*Math.pow(2,c.coord.z)),m=k*c.coord.y;g.uniform2f(f.u_pixel_coord_upper,l>>16,m>>16),g.uniform2f(f.u_pixel_coord_lower,65535&l,65535&m),g.activeTexture(g.TEXTURE0),e.spriteAtlas.bind(g,!0)}}var h=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":324}],311:[function(a,b,c){"use strict";var d=a("../util/browser"),e=a("gl-matrix").mat2,f=a("../source/pixels_to_tile_units");b.exports=function(a,b,c,g){if(!a.isOpaquePass){a.setDepthSublayer(0),a.depthMask(!1);var h=a.gl;if(h.enable(h.STENCIL_TEST),!(c.paint["line-width"]<=0)){var i=1/d.devicePixelRatio,j=c.paint["line-blur"]+i,k=c.paint["line-color"],l=a.transform,m=e.create();e.scale(m,m,[1,Math.cos(l._pitch)]),e.rotate(m,m,a.transform.angle);var n,o,p,q,r,s=Math.sqrt(l.height*l.height/4*(1+l.altitude*l.altitude)),t=l.height/2*Math.tan(l._pitch),u=(s+t)/s-1,v=c.paint["line-dasharray"],w=c.paint["line-pattern"];if(v)n=a.useProgram("linesdfpattern"),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform4fv(n.u_color,k),h.uniform1f(n.u_opacity,c.paint["line-opacity"]),o=a.lineAtlas.getDash(v.from,"round"===c.layout["line-cap"]),p=a.lineAtlas.getDash(v.to,"round"===c.layout["line-cap"]),h.uniform1i(n.u_image,0),h.activeTexture(h.TEXTURE0),a.lineAtlas.bind(h),h.uniform1f(n.u_tex_y_a,o.y),h.uniform1f(n.u_tex_y_b,p.y),h.uniform1f(n.u_mix,v.t),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m);else if(w){if(q=a.spriteAtlas.getPosition(w.from,!0),r=a.spriteAtlas.getPosition(w.to,!0),!q||!r)return;n=a.useProgram("linepattern"),h.uniform1i(n.u_image,0),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform2fv(n.u_pattern_tl_a,q.tl),h.uniform2fv(n.u_pattern_br_a,q.br),h.uniform2fv(n.u_pattern_tl_b,r.tl),h.uniform2fv(n.u_pattern_br_b,r.br),h.uniform1f(n.u_fade,w.t),h.uniform1f(n.u_opacity,c.paint["line-opacity"]),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m)}else n=a.useProgram("line"),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m),h.uniform4fv(n.u_color,k),h.uniform1f(n.u_opacity,c.paint["line-opacity"]);for(var x=0;x<g.length;x++){var y=g[x],z=b.getTile(y),A=z.getBucket(c);if(A){var B=A.bufferGroups.line;if(B){a.enableTileClippingMask(y);var C=a.translatePosMatrix(y.posMatrix,z,c.paint["line-translate"],c.paint["line-translate-anchor"]);h.uniformMatrix4fv(n.u_matrix,!1,C);var D=1/f(z,1,a.transform.zoom);if(v){var E=o.width*v.fromScale,F=p.width*v.toScale,G=[1/f(z,E,a.transform.tileZoom),-o.height/2],H=[1/f(z,F,a.transform.tileZoom),-p.height/2],I=a.lineAtlas.width/(256*Math.min(E,F)*d.devicePixelRatio)/2;h.uniform1f(n.u_ratio,D),h.uniform2fv(n.u_patternscale_a,G),h.uniform2fv(n.u_patternscale_b,H),h.uniform1f(n.u_sdfgamma,I)}else w?(h.uniform1f(n.u_ratio,D),h.uniform2fv(n.u_pattern_size_a,[f(z,q.size[0]*w.fromScale,a.transform.tileZoom),r.size[1]]),h.uniform2fv(n.u_pattern_size_b,[f(z,r.size[0]*w.toScale,a.transform.tileZoom),r.size[1]])):h.uniform1f(n.u_ratio,D);for(var J=0;J<B.length;J++){var K=B[J];K.vaos[c.id].bind(h,n,K.layoutVertexBuffer,K.elementBuffer),h.drawElements(h.TRIANGLES,3*K.elementBuffer.length,h.UNSIGNED_SHORT,0)}}}}}}}},{"../source/pixels_to_tile_units":324,"../util/browser":387,"gl-matrix":161}],312:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;f.enable(f.DEPTH_TEST),a.depthMask(!0),f.depthFunc(f.LESS);for(var g=d.length&&d[0].z,h=0;h<d.length;h++){var i=d[h];a.setDepthSublayer(i.z-g),e(a,b,c,i)}f.depthFunc(f.LEQUAL)}}function e(a,b,c,d){var e=a.gl;e.disable(e.STENCIL_TEST);var j=b.getTile(d),k=a.transform.calculatePosMatrix(d,b.maxzoom),l=a.useProgram("raster");e.uniformMatrix4fv(l.u_matrix,!1,k),e.uniform1f(l.u_brightness_low,c.paint["raster-brightness-min"]),e.uniform1f(l.u_brightness_high,c.paint["raster-brightness-max"]),e.uniform1f(l.u_saturation_factor,h(c.paint["raster-saturation"])),e.uniform1f(l.u_contrast_factor,g(c.paint["raster-contrast"])),e.uniform3fv(l.u_spin_weights,f(c.paint["raster-hue-rotate"]));var m,n,o=j.source&&j.source.findLoadedParent(d,0,{}),p=i(j,o,c,a.transform);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,j.texture),e.activeTexture(e.TEXTURE1),o?(e.bindTexture(e.TEXTURE_2D,o.texture),m=Math.pow(2,o.coord.z-j.coord.z),n=[j.coord.x*m%1,j.coord.y*m%1]):(e.bindTexture(e.TEXTURE_2D,j.texture),p[1]=0),e.uniform2fv(l.u_tl_parent,n||[0,0]),e.uniform1f(l.u_scale_parent,m||1),e.uniform1f(l.u_buffer_scale,1),e.uniform1f(l.u_opacity0,p[0]),e.uniform1f(l.u_opacity1,p[1]),e.uniform1i(l.u_image0,0),e.uniform1i(l.u_image1,1);var q=j.boundsBuffer||a.rasterBoundsBuffer,r=j.boundsVAO||a.rasterBoundsVAO;r.bind(e,l,q),e.drawArrays(e.TRIANGLE_STRIP,0,q.length)}function f(a){a*=Math.PI/180;var b=Math.sin(a),c=Math.cos(a);return[(2*c+1)/3,(-Math.sqrt(3)*b-c+1)/3,(Math.sqrt(3)*b-c+1)/3]}function g(a){return a>0?1/(1-a):1+a}function h(a){return a>0?1-1/(1.001-a):-a}function i(a,b,c,d){var e=[1,0],f=c.paint["raster-fade-duration"];if(a.source&&f>0){var g=(new Date).getTime(),h=(g-a.timeAdded)/f,i=b?(g-b.timeAdded)/f:-1,k=d.coveringZoomLevel(a.source),l=!!b&&Math.abs(b.coord.z-k)>Math.abs(a.coord.z-k);!b||l?(e[0]=j.clamp(h,0,1),e[1]=1-e[0]):(e[0]=j.clamp(1-i,0,1),e[1]=1-e[0])}var m=c.paint["raster-opacity"];return e[0]*=m,e[1]*=m,e}var j=a("../util/util"),k=a("../util/struct_array");b.exports=d,d.RasterBoundsArray=new k({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]})},{"../util/struct_array":401,"../util/util":403}],313:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=!(c.layout["text-allow-overlap"]||c.layout["icon-allow-overlap"]||c.layout["text-ignore-placement"]||c.layout["icon-ignore-placement"]),g=a.gl;f?g.disable(g.STENCIL_TEST):g.enable(g.STENCIL_TEST),a.setDepthSublayer(0),a.depthMask(!1),g.disable(g.DEPTH_TEST),e(a,b,c,d,!1,c.paint["icon-translate"],c.paint["icon-translate-anchor"],c.layout["icon-rotation-alignment"],c.layout["icon-rotation-alignment"],c.layout["icon-size"],c.paint["icon-halo-width"],c.paint["icon-halo-color"],c.paint["icon-halo-blur"],c.paint["icon-opacity"],c.paint["icon-color"]),
e(a,b,c,d,!0,c.paint["text-translate"],c.paint["text-translate-anchor"],c.layout["text-rotation-alignment"],c.layout["text-pitch-alignment"],c.layout["text-size"],c.paint["text-halo-width"],c.paint["text-halo-color"],c.paint["text-halo-blur"],c.paint["text-opacity"],c.paint["text-color"]),g.enable(g.DEPTH_TEST),b.map.showCollisionBoxes&&h(a,b,c,d)}}function e(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){for(var q=0;q<d.length;q++){var r=b.getTile(d[q]),s=r.getBucket(c);if(s){var t=s.bufferGroups,u=e?t.glyph:t.icon;u.length&&(a.enableTileClippingMask(d[q]),f(a,c,d[q].posMatrix,r,s,u,e,e||s.sdfIcons,!e&&s.iconsNeedLinear,e?s.adjustedTextSize:s.adjustedIconSize,s.fontstack,g,h,i,j,k,l,m,n,o,p))}}}function f(a,b,c,d,e,f,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y,z,A=a.gl,B=a.transform,C="map"===p,D="map"===q,E=h?24:1,F=r/E;if(D?(y=i(d,1,a.transform.zoom)*F,z=1/Math.cos(B._pitch),x=[y,y]):(y=a.transform.altitude*F,z=1,x=[B.pixelsToGLUnits[0]*y,B.pixelsToGLUnits[1]*y]),h||a.style.sprite.loaded()){var G=a.useProgram(j?"sdf":"icon");if(A.uniformMatrix4fv(G.u_matrix,!1,a.translatePosMatrix(c,d,n,o)),A.uniform1i(G.u_rotate_with_map,C),A.uniform1i(G.u_pitch_with_map,D),A.uniform2fv(G.u_extrude_scale,x),A.activeTexture(A.TEXTURE0),A.uniform1i(G.u_texture,0),h){var H=m&&a.glyphSource.getGlyphAtlas(m);if(!H)return;H.updateTexture(A),A.uniform2f(G.u_texsize,H.width/4,H.height/4)}else{var I=a.options.rotating||a.options.zooming,J=1!==F||g.devicePixelRatio!==a.spriteAtlas.pixelRatio||k,K=D||a.transform.pitch;a.spriteAtlas.bind(A,j||I||J||K),A.uniform2f(G.u_texsize,a.spriteAtlas.width/4,a.spriteAtlas.height/4)}var L=Math.log(r/l)/Math.LN2||0;A.uniform1f(G.u_zoom,10*(a.transform.zoom-L)),A.activeTexture(A.TEXTURE1),a.frameHistory.bind(A),A.uniform1i(G.u_fadetexture,1);var M;if(j){var N=8,O=1.19,P=6,Q=.105*E/r/g.devicePixelRatio;if(s){A.uniform1f(G.u_gamma,(u*O/F/N+Q)*z),A.uniform4fv(G.u_color,t),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,(P-s/F)/N);for(var R=0;R<f.length;R++)M=f[R],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}A.uniform1f(G.u_gamma,Q*z),A.uniform4fv(G.u_color,w),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,.75),A.uniform1f(G.u_pitch,B.pitch/360*2*Math.PI),A.uniform1f(G.u_bearing,B.bearing/360*2*Math.PI),A.uniform1f(G.u_aspect_ratio,B.width/B.height);for(var S=0;S<f.length;S++)M=f[S],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}else{A.uniform1f(G.u_opacity,v);for(var T=0;T<f.length;T++)M=f[T],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}}}var g=a("../util/browser"),h=a("./draw_collision_debug"),i=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":324,"../util/browser":387,"./draw_collision_debug":308}],314:[function(a,b,c){"use strict";function d(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.fadeDuration=300,this.previousZoom=0,this.firstFrame=!0}b.exports=d,d.prototype.record=function(a){var b=Date.now();this.firstFrame&&(b=0,this.firstFrame=!1),a=Math.floor(10*a);var c;if(a<this.previousZoom)for(c=a+1;c<=this.previousZoom;c++)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];else for(c=a;c>this.previousZoom;c--)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];for(c=0;c<256;c++){var d=b-this.changeTimes[c],e=d/this.fadeDuration*255;c<=a?this.opacities[c]=this.changeOpacities[c]+e:this.opacities[c]=this.changeOpacities[c]-e}this.changed=!0,this.previousZoom=a},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.changed&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,256,1,a.ALPHA,a.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,256,1,0,a.ALPHA,a.UNSIGNED_BYTE,this.array))}},{}],315:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var e=a("../util/util");b.exports=d,d.prototype.setSprite=function(a){this.sprite=a},d.prototype.getDash=function(a,b){var c=a.join(",")+b;return this.positions[c]||(this.positions[c]=this.addDash(a,b)),this.positions[c]},d.prototype.addDash=function(a,b){var c=b?7:0,d=2*c+1,f=128;if(this.nextRow+d>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var g=0,h=0;h<a.length;h++)g+=a[h];for(var i=this.width/g,j=i/2,k=a.length%2===1,l=-c;l<=c;l++)for(var m=this.nextRow+c+l,n=this.width*m,o=k?-a[a.length-1]:0,p=a[0],q=1,r=0;r<this.width;r++){for(;p<r/i;)o=p,p+=a[q],k&&q===a.length-1&&(p+=a[0]),q++;var s,t=Math.abs(r-o*i),u=Math.abs(r-p*i),v=Math.min(t,u),w=q%2===1;if(b){var x=c?l/c*(j+1):0;if(w){var y=j-Math.abs(x);s=Math.sqrt(v*v+y*y)}else s=j-Math.sqrt(v*v+x*x)}else s=(w?1:-1)*v;this.data[3+4*(n+r)]=Math.max(0,Math.min(255,s+f))}var z={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=d,this.dirty=!0,z},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.data))}},{"../util/util":403}],316:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.transform=b,this.reusableTextures={},this.preFbos={},this.frameHistory=new g,this.setup(),this.numSublayers=h.maxUnderzooming+h.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE)}var e=a("../util/browser"),f=a("gl-matrix").mat4,g=a("./frame_history"),h=a("../source/source_cache"),i=a("../data/bucket").EXTENT,j=a("../source/pixels_to_tile_units"),k=a("../util/util"),l=a("../util/struct_array"),m=a("../data/buffer"),n=a("./vertex_array_object"),o=a("./draw_raster").RasterBoundsArray,p=a("./create_uniform_pragmas");b.exports=d,k.extend(d.prototype,a("./painter/use_program")),d.prototype.resize=function(a,b){var c=this.gl;this.width=a*e.devicePixelRatio,this.height=b*e.devicePixelRatio,c.viewport(0,0,this.width,this.height)},d.prototype.setup=function(){var a=this.gl;a.verbose=!0,a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),this._depthMask=!1,a.depthMask(!1);var b=this.PosArray=new l({members:[{name:"a_pos",type:"Int16",components:2}]}),c=new b;c.emplaceBack(0,0),c.emplaceBack(i,0),c.emplaceBack(0,i),c.emplaceBack(i,i),this.tileExtentBuffer=new m(c.serialize(),b.serialize(),m.BufferType.VERTEX),this.tileExtentVAO=new n,this.tileExtentPatternVAO=new n;var d=new b;d.emplaceBack(0,0),d.emplaceBack(i,0),d.emplaceBack(i,i),d.emplaceBack(0,i),d.emplaceBack(0,0),this.debugBuffer=new m(d.serialize(),b.serialize(),m.BufferType.VERTEX),this.debugVAO=new n;var e=new o;e.emplaceBack(0,0,0,0),e.emplaceBack(i,0,32767,0),e.emplaceBack(0,i,0,32767),e.emplaceBack(i,i,32767,32767),this.rasterBoundsBuffer=new m(e.serialize(),o.serialize(),m.BufferType.VERTEX),this.rasterBoundsVAO=new n},d.prototype.clearColor=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},d.prototype.clearStencil=function(){var a=this.gl;a.clearStencil(0),a.stencilMask(255),a.clear(a.STENCIL_BUFFER_BIT)},d.prototype.clearDepth=function(){var a=this.gl;a.clearDepth(1),this.depthMask(!0),a.clear(a.DEPTH_BUFFER_BIT)},d.prototype._renderTileClippingMasks=function(a){var b=this.gl;b.colorMask(!1,!1,!1,!1),this.depthMask(!1),b.disable(b.DEPTH_TEST),b.enable(b.STENCIL_TEST),b.stencilMask(248),b.stencilOp(b.KEEP,b.KEEP,b.REPLACE);var c=1;this._tileClippingMaskIDs={};for(var d=0;d<a.length;d++){var e=a[d],f=this._tileClippingMaskIDs[e.id]=c++<<3;b.stencilFunc(b.ALWAYS,f,248);var g=p([{name:"u_color",components:4},{name:"u_opacity",components:1}]),h=this.useProgram("fill",[],g,g);b.uniformMatrix4fv(h.u_matrix,!1,e.posMatrix),this.tileExtentVAO.bind(b,h,this.tileExtentBuffer),b.drawArrays(b.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}b.stencilMask(0),b.colorMask(!0,!0,!0,!0),this.depthMask(!0),b.enable(b.DEPTH_TEST)},d.prototype.enableTileClippingMask=function(a){var b=this.gl;b.stencilFunc(b.EQUAL,this._tileClippingMaskIDs[a.id],248)},d.prototype.prepareBuffers=function(){},d.prototype.bindDefaultFramebuffer=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)};var q={symbol:a("./draw_symbol"),circle:a("./draw_circle"),line:a("./draw_line"),fill:a("./draw_fill"),raster:a("./draw_raster"),background:a("./draw_background"),debug:a("./draw_debug")};d.prototype.render=function(a,b){this.style=a,this.options=b,this.lineAtlas=a.lineAtlas,this.spriteAtlas=a.spriteAtlas,this.spriteAtlas.setSprite(a.sprite),this.glyphSource=a.glyphSource,this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(b.showOverdrawInspector),this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass({isOpaquePass:!0}),this.renderPass({isOpaquePass:!1})},d.prototype.renderPass=function(a){var b=this.style._groups,c=a.isOpaquePass;this.currentLayer=c?this.style._order.length:-1;for(var d=0;d<b.length;d++){var e,f=b[c?b.length-1-d:d],g=this.style.sources[f.source],h=[];if(g){for(h=g.getVisibleCoordinates(),e=0;e<h.length;e++)h[e].posMatrix=this.transform.calculatePosMatrix(h[e],g.maxzoom);this.clearStencil(),g.prepare&&g.prepare(),g.isTileClipped&&this._renderTileClippingMasks(h)}for(c?(this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.isOpaquePass=!0):(this.gl.enable(this.gl.BLEND),this.isOpaquePass=!1,h.reverse()),e=0;e<f.length;e++){var i=f[c?f.length-1-e:e];this.currentLayer+=c?-1:1,this.renderLayer(this,g,i,h)}g&&q.debug(this,g,h)}},d.prototype.depthMask=function(a){a!==this._depthMask&&(this._depthMask=a,this.gl.depthMask(a))},d.prototype.renderLayer=function(a,b,c,d){c.isHidden(this.transform.zoom)||("background"===c.type||d.length)&&(this.id=c.id,q[c.type](a,b,c,d))},d.prototype.setDepthSublayer=function(a){var b=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon,c=b-1+this.depthRange;this.gl.depthRange(c,b)},d.prototype.translatePosMatrix=function(a,b,c,d){if(!c[0]&&!c[1])return a;if("viewport"===d){var e=Math.sin(-this.transform.angle),g=Math.cos(-this.transform.angle);c=[c[0]*g-c[1]*e,c[0]*e+c[1]*g]}var h=[j(b,c[0],this.transform.zoom),j(b,c[1],this.transform.zoom),0],i=new Float32Array(16);return f.translate(i,a,h),i},d.prototype.saveTexture=function(a){var b=this.reusableTextures[a.size];b?b.push(a):this.reusableTextures[a.size]=[a]},d.prototype.getTexture=function(a){var b=this.reusableTextures[a];return b&&b.length>0?b.pop():null},d.prototype.lineWidth=function(a){this.gl.lineWidth(k.clamp(a,this.lineWidthRange[0],this.lineWidthRange[1]))},d.prototype.showOverdrawInspector=function(a){if(a||this._showOverdrawInspector){this._showOverdrawInspector=a;var b=this.gl;if(a){b.blendFunc(b.CONSTANT_COLOR,b.ONE);var c=8,d=1/c;b.blendColor(d,d,d,0),b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)}else b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)}}},{"../data/bucket":290,"../data/buffer":295,"../source/pixels_to_tile_units":324,"../source/source_cache":328,"../util/browser":387,"../util/struct_array":401,"../util/util":403,"./create_uniform_pragmas":305,"./draw_background":306,"./draw_circle":307,"./draw_debug":309,"./draw_fill":310,"./draw_line":311,"./draw_raster":312,"./draw_symbol":313,"./frame_history":314,"./painter/use_program":317,"./vertex_array_object":318,"gl-matrix":161}],317:[function(a,b,c){"use strict";function d(a,b){return a.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(a,c,d,e,f){return b[c][f].replace(/{type}/g,e).replace(/{precision}/g,d)})}var e=a("assert"),f=a("../../util/util"),g=a("mapbox-gl-shaders"),h=g.util;b.exports._createProgram=function(a,b,c,i){for(var j=this.gl,k=j.createProgram(),l=g[a],m="#define MAPBOX_GL_JS;\n",n=0;n<b.length;n++)m+="#define "+b[n]+";\n";var o=j.createShader(j.FRAGMENT_SHADER);j.shaderSource(o,d(m+l.fragmentSource,i)),j.compileShader(o),e(j.getShaderParameter(o,j.COMPILE_STATUS),j.getShaderInfoLog(o)),j.attachShader(k,o);var p=j.createShader(j.VERTEX_SHADER);j.shaderSource(p,d(m+h+l.vertexSource,c)),j.compileShader(p),e(j.getShaderParameter(p,j.COMPILE_STATUS),j.getShaderInfoLog(p)),j.attachShader(k,p),j.linkProgram(k),e(j.getProgramParameter(k,j.LINK_STATUS),j.getProgramInfoLog(k));for(var q={},r=j.getProgramParameter(k,j.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var t=j.getActiveAttrib(k,s);q[t.name]=j.getAttribLocation(k,t.name)}for(var u={},v=j.getProgramParameter(k,j.ACTIVE_UNIFORMS),w=0;w<v;w++){var x=j.getActiveUniform(k,w);u[x.name]=j.getUniformLocation(k,x.name)}return f.extend({program:k,definition:l,attributes:q,numAttributes:r},q,u)},b.exports._createProgramCached=function(a,b,c,d){this.cache=this.cache||{};var e=JSON.stringify({name:a,defines:b,vertexPragmas:c,fragmentPragmas:d});return this.cache[e]||(this.cache[e]=this._createProgram(a,b,c,d)),this.cache[e]},b.exports.useProgram=function(a,b,c,d){var e=this.gl;b=b||[],this._showOverdrawInspector&&(b=b.concat("OVERDRAW_INSPECTOR"));var f=this._createProgramCached(a,b,c,d),g=this.currentProgram;return g!==f&&(e.useProgram(f.program),this.currentProgram=f),f}},{"../../util/util":403,assert:34,"mapbox-gl-shaders":264}],318:[function(a,b,c){"use strict";function d(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}var e=a("assert");b.exports=d,d.prototype.bind=function(a,b,c,d,e){void 0===a.extVertexArrayObject&&(a.extVertexArrayObject=a.getExtension("OES_vertex_array_object"));var f=!this.vao||this.boundProgram!==b||this.boundVertexBuffer!==c||this.boundVertexBuffer2!==e||this.boundElementBuffer!==d;!a.extVertexArrayObject||f?this.freshBind(a,b,c,d,e):a.extVertexArrayObject.bindVertexArrayOES(this.vao)},d.prototype.freshBind=function(a,b,c,d,f){var g,h=b.numAttributes;if(a.extVertexArrayObject)this.vao&&this.destroy(a),this.vao=a.extVertexArrayObject.createVertexArrayOES(),a.extVertexArrayObject.bindVertexArrayOES(this.vao),g=0,this.boundProgram=b,this.boundVertexBuffer=c,this.boundVertexBuffer2=f,this.boundElementBuffer=d;else{g=a.currentNumAttributes||0;for(var i=h;i<g;i++)e(0!==i),a.disableVertexAttribArray(i)}for(var j=g;j<h;j++)a.enableVertexAttribArray(j);c.bind(a),c.setVertexAttribPointers(a,b),f&&(f.bind(a),f.setVertexAttribPointers(a,b)),d&&d.bind(a),a.currentNumAttributes=h},d.prototype.unbind=function(a){var b=a.extVertexArrayObject;b&&b.bindVertexArrayOES(null)},d.prototype.destroy=function(a){var b=a.extVertexArrayObject;b&&this.vao&&(b.deleteVertexArrayOES(this.vao),this.vao=null)}},{assert:34}],319:[function(a,b,c){"use strict";function d(a,b,c){b=b||{},this.id=a,this.dispatcher=c,this._data=b.data,void 0!==b.maxzoom&&(this.maxzoom=b.maxzoom),b.type&&(this.type=b.type);var d=h/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:b.cluster||!1,geojsonVtOptions:{buffer:(void 0!==b.buffer?b.buffer:128)*d,tolerance:(void 0!==b.tolerance?b.tolerance:.375)*d,extent:h,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(b.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:h,radius:(b.clusterRadius||50)*d,log:!1}},b.workerOptions),this._updateWorkerData(function(a){return a?void this.fire("error",{error:a}):void this.fire("load")}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("resolve-url"),h=a("../data/bucket").EXTENT;b.exports=d,d.prototype=f.inherit(e,{type:"geojson",minzoom:0,maxzoom:18,tileSize:512,isTileClipped:!0,reparseOverscaled:!0,onAdd:function(a){this.map=a},setData:function(a){return this._data=a,this._updateWorkerData(function(a){return a?this.fire("error",{error:a}):void this.fire("change")}.bind(this)),this},_updateWorkerData:function(a){var b=f.extend({},this.workerOptions),c=this._data;"string"==typeof c?b.url="undefined"!=typeof window?g(window.location.href,c):c:b.data=JSON.stringify(c),this.workerID=this.dispatcher.send(this.type+".loadData",b,function(b){this._loaded=!0,a(b)}.bind(this))},loadTile:function(a,b){var c=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,d={type:this.type,uid:a.uid,coord:a.coord,zoom:a.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:c,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID=this.dispatcher.send("load tile",d,function(c,d){if(a.unloadVectorData(this.map.painter),!a.aborted)return c?b(c):(a.loadVectorData(d,this.map.style),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null))}.bind(this),this.workerID)},abortTile:function(a){a.aborted=!0},unloadTile:function(a){a.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},function(){},a.workerID)},serialize:function(){return{type:this.type,data:this._data}}})},{"../data/bucket":290,"../util/evented":395,"../util/util":403,"resolve-url":458}],320:[function(a,b,c){"use strict";function d(a,b,c){c&&(this.loadGeoJSON=c),l.call(this,a,b)}var e=a("../util/util"),f=a("../util/ajax"),g=a("geojson-rewind"),h=a("./geojson_wrapper"),i=a("vt-pbf"),j=a("supercluster"),k=a("geojson-vt"),l=a("./vector_tile_worker_source");b.exports=d,d.prototype=e.inherit(l,{_geoJSONIndexes:{},loadVectorData:function(a,b){var c=a.source,d=a.coord;if(!this._geoJSONIndexes[c])return b(null,null);var e=this._geoJSONIndexes[c].getTile(Math.min(d.z,a.maxZoom),d.x,d.y);if(!e)return b(null,null);var f=new h(e.features);f.name="_geojsonTileLayer";var g=i({layers:{_geojsonTileLayer:f}});0===g.byteOffset&&g.byteLength===g.buffer.byteLength||(g=new Uint8Array(g)),b(null,{tile:f,rawTileData:g.buffer})},loadData:function(a,b){var c=function(c,d){return c?b(c):"object"!=typeof d?b(new Error("Input data is not a valid GeoJSON object.")):(g(d,!0),void this._indexData(d,a,function(c,d){return c?b(c):(this._geoJSONIndexes[a.source]=d,void b(null))}.bind(this)))}.bind(this);this.loadGeoJSON(a,c)},loadGeoJSON:function(a,b){if(a.url)f.getJSON(a.url,b);else{if("string"!=typeof a.data)return b(new Error("Input data is not a valid GeoJSON object."));try{return b(null,JSON.parse(a.data))}catch(a){return b(new Error("Input data is not a valid GeoJSON object."))}}},_indexData:function(a,b,c){try{b.cluster?c(null,j(b.superclusterOptions).load(a.features)):c(null,k(a,b.geojsonVtOptions))}catch(a){return c(a)}}})},{"../util/ajax":386,"../util/util":403,"./geojson_wrapper":321,"./vector_tile_worker_source":332,"geojson-rewind":110,"geojson-vt":114,supercluster:485,"vt-pbf":511}],321:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length,this.extent=h}function e(a){if(this.type=a.type,1===a.type){this.rawGeometry=[];for(var b=0;b<a.geometry.length;b++)this.rawGeometry.push([a.geometry[b]])}else this.rawGeometry=a.geometry;this.properties=a.tags,this.extent=h}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature,h=a("../data/bucket").EXTENT;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-(1/0),d=1/0,e=-(1/0),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"../data/bucket":290,"point-geometry":442,"vector-tile":505}],322:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,this.url=b.url,this.coordinates=b.coordinates,j.getImage(b.url,function(a,c){return a?this.fire("error",{error:a}):(this.image=c,this.image.addEventListener("load",function(){this.map._rerender()}.bind(this)),this._loaded=!0,this.fire("load"),void(this.map&&this.setCoordinates(b.coordinates)))}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,onAdd:function(a){this.map=a,this.image&&this.setCoordinates(this.coordinates)},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this._coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("change"),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=32767,c=new l;c.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),c.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,b,0),c.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,b),c.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,b,b),this.tile.buckets={},this.tile.boundsBuffer=new m(c.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){if(this._loaded&&this.image&&this.image.complete&&this.tile){var a=this.map.painter,b=a.gl;this._prepared?(b.bindTexture(b.TEXTURE_2D,this.tile.texture),b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,this.image)):(this.tile.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.tile.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,this.image))}},loadTile:function(a,b){this._coord&&this._coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"image",urls:this.url,coordinates:this.coordinates}}})},{"../data/bucket":290,"../data/buffer":295,"../geo/lng_lat":300,"../render/draw_raster":312,"../render/vertex_array_object":318,"../util/ajax":386,"../util/evented":395,"../util/util":403,"./tile_coord":330,"point-geometry":442}],323:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/ajax"),f=a("../util/browser"),g=a("../util/mapbox").normalizeSourceURL;b.exports=function(a,b){var c=function(a,c){if(a)return b(a);var e=d.pick(c,["tiles","minzoom","maxzoom","attribution"]);c.vector_layers&&(e.vectorLayers=c.vector_layers,e.vectorLayerIds=e.vectorLayers.map(function(a){return a.id})),b(null,e)};a.url?e.getJSON(g(a.url),c):f.frame(c.bind(null,null,a))}},{"../util/ajax":386,"../util/browser":387,"../util/mapbox":400,"../util/util":403}],324:[function(a,b,c){"use strict";var d=a("../data/bucket");b.exports=function(a,b,c){return b*(d.EXTENT/(a.tileSize*Math.pow(2,c-a.coord.z)))}},{"../data/bucket":290}],325:[function(a,b,c){"use strict";function d(a,b){var c=a.coord,d=b.coord;return c.z-d.z||c.y-d.y||c.w-d.w||c.x-d.x}function e(a){for(var b=a[0]||{},c=1;c<a.length;c++){var d=a[c];for(var e in d){var f=d[e],g=b[e];if(void 0===g)g=b[e]=f;else for(var h=0;h<f.length;h++)g.push(f[h])}}return b}var f=a("./tile_coord");c.rendered=function(a,b,c,f,g,h){var i=a.tilesIn(c);i.sort(d);for(var j=[],k=0;k<i.length;k++){var l=i[k];l.tile.featureIndex&&j.push(l.tile.featureIndex.query({queryGeometry:l.queryGeometry,scale:l.scale,tileSize:l.tile.tileSize,bearing:h,params:f},b))}return e(j)},c.source=function(a,b){for(var c=a.getRenderableIds().map(function(b){return a.getTileByID(b)}),d=[],e={},g=0;g<c.length;g++){var h=c[g],i=new f(Math.min(h.sourceMaxZoom,h.coord.z),h.coord.x,h.coord.y,0).id;e[i]||(e[i]=!0,h.querySourceFeatures(d,b))}return d}},{"./tile_coord":330}],326:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,e.extend(this,e.pick(b,["url","scheme","tileSize"])),h(b,function(a,b){return a?this.fire("error",a):(e.extend(this,b),void this.fire("load"))}.bind(this))}var e=a("../util/util"),f=a("../util/ajax"),g=a("../util/evented"),h=a("./load_tilejson"),i=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=e.inherit(g,{minzoom:0,maxzoom:22,roundZoom:!0,scheme:"xyz",tileSize:512,_loaded:!1,onAdd:function(a){this.map=a},serialize:function(){return{type:"raster",url:this.url,tileSize:this.tileSize}},loadTile:function(a,b){function c(c,d){if(delete a.request,!a.aborted){if(c)return b(c);var e=this.map.painter.gl;a.texture=this.map.painter.getTexture(d.width),a.texture?(e.bindTexture(e.TEXTURE_2D,a.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,d)):(a.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,a.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,d),a.texture.size=d.width),e.generateMipmap(e.TEXTURE_2D),this.map.animationLoop.set(this.map.style.rasterFadeDuration),a.state="loaded",b(null)}}var d=i(a.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);a.request=f.getImage(d,c.bind(this))},abortTile:function(a){a.request&&(a.request.abort(),delete a.request)},unloadTile:function(a){a.texture&&this.map.painter.saveTexture(a.texture)}})},{"../util/ajax":386,"../util/evented":395,"../util/mapbox":400,"../util/util":403,"./load_tilejson":323}],327:[function(a,b,c){"use strict";var d=a("../util/util"),e={vector:a("../source/vector_tile_source"),raster:a("../source/raster_tile_source"),geojson:a("../source/geojson_source"),video:a("../source/video_source"),image:a("../source/image_source")};c.create=function(a,b,c){if(b=new e[b.type](a,b,c),b.id!==a)throw new Error("Expected Source id to be "+a+" instead of "+b.id);return d.bindAll(["load","abort","unload","serialize","prepare"],b),b},c.getType=function(a){return e[a]},c.setType=function(a,b){e[a]=b}},{"../source/geojson_source":319,"../source/image_source":322,"../source/raster_tile_source":326,"../source/vector_tile_source":331,"../source/video_source":333,"../util/util":403}],328:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c;var d=this._source=g.create(a,b,c).on("load",function(){this.map&&this._source.onAdd&&this._source.onAdd(this.map),this._sourceLoaded=!0,this.tileSize=d.tileSize,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,this.roundZoom=d.roundZoom,this.reparseOverscaled=d.reparseOverscaled,this.isTileClipped=d.isTileClipped,this.attribution=d.attribution,this.vectorLayerIds=d.vectorLayerIds,this.fire("load")}.bind(this)).on("error",function(a){this._sourceErrored=!0,this.fire("error",a)}.bind(this)).on("change",function(){this.reload(),this.transform&&this.update(this.transform,this.map&&this.map.style.rasterFadeDuration),this.fire("change")}.bind(this));this._tiles={},this._cache=new k(0,this.unloadTile.bind(this)),this._isIdRenderable=this._isIdRenderable.bind(this)}function e(a,b,c){var d=c.zoomTo(Math.min(a.z,b));return{x:(d.column-(a.x+a.w*Math.pow(2,a.z)))*n,y:(d.row-a.y)*n}}function f(a,b){return a%32-b%32}var g=a("./source"),h=a("./tile"),i=a("../util/evented"),j=a("./tile_coord"),k=a("../util/lru_cache"),l=a("../geo/coordinate"),m=a("../util/util"),n=a("../data/bucket").EXTENT;b.exports=d,d.maxOverzooming=10,d.maxUnderzooming=3,d.prototype=m.inherit(i,{onAdd:function(a){this.map=a,this._source&&this._source.onAdd&&this._source.onAdd(a)},loaded:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var b=this._tiles[a];if("loaded"!==b.state&&"errored"!==b.state)return!1}return!0},getSource:function(){return this._source},loadTile:function(a,b){return this._source.loadTile(a,b)},unloadTile:function(a){if(this._source.unloadTile)return this._source.unloadTile(a)},abortTile:function(a){if(this._source.abortTile)return this._source.abortTile(a)},serialize:function(){return this._source.serialize()},prepare:function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},getIds:function(){return Object.keys(this._tiles).map(Number).sort(f)},getRenderableIds:function(){return this.getIds().filter(this._isIdRenderable)},_isIdRenderable:function(a){return this._tiles[a].isRenderable()&&!this._coveredTiles[a]},reload:function(){this._cache.reset();for(var a in this._tiles){var b=this._tiles[a];"loading"!==b.state&&(b.state="reloading"),this.loadTile(this._tiles[a],this._tileLoaded.bind(this,this._tiles[a]))}},_tileLoaded:function(a,b){return b?(a.state="errored",this.fire("tile.error",{tile:a,error:b}),void this._source.fire("tile.error",{tile:a,error:b})):(a.source=this,a.timeAdded=(new Date).getTime(),this.fire("tile.load",{tile:a}),void this._source.fire("tile.load",{tile:a}))},getTile:function(a){return this.getTileByID(a.id)},getTileByID:function(a){return this._tiles[a]},getZoom:function(a){return a.zoom+a.scaleZoom(a.tileSize/this.tileSize)},findLoadedChildren:function(a,b,c){var d=!1;for(var e in this._tiles){var f=this._tiles[e];if(!(c[e]||!f.isRenderable()||f.coord.z<=a.z||f.coord.z>b)){var g=Math.pow(2,Math.min(f.coord.z,this.maxzoom)-Math.min(a.z,this.maxzoom));if(Math.floor(f.coord.x/g)===a.x&&Math.floor(f.coord.y/g)===a.y)for(c[e]=!0,d=!0;f&&f.coord.z-1>a.z;){var h=f.coord.parent(this.maxzoom).id;f=this._tiles[h],f&&f.isRenderable()&&(delete c[e],c[h]=!0)}}}return d},findLoadedParent:function(a,b,c){for(var d=a.z-1;d>=b;d--){a=a.parent(this.maxzoom);var e=this._tiles[a.id];if(e&&e.isRenderable())return c[a.id]=!0,e;if(this._cache.has(a.id))return this.addTile(a),c[a.id]=!0,this._tiles[a.id]}},updateCacheSize:function(a){var b=Math.ceil(a.width/a.tileSize)+1,c=Math.ceil(a.height/a.tileSize)+1,d=b*c,e=5;this._cache.setMaxSize(Math.floor(d*e))},update:function(a,b){if(this._sourceLoaded){var c,e,f;this.updateCacheSize(a);var g=(this.roundZoom?Math.round:Math.floor)(this.getZoom(a)),h=Math.max(g-d.maxOverzooming,this.minzoom),i=Math.max(g+d.maxUnderzooming,this.minzoom),k={},l=(new Date).getTime();this._coveredTiles={};var n=this.used?a.coveringTiles(this._source):[];for(c=0;c<n.length;c++)e=n[c],f=this.addTile(e),k[e.id]=!0,f.isRenderable()||this.findLoadedChildren(e,i,k)||this.findLoadedParent(e,h,k);for(var o={},p=Object.keys(k),q=0;q<p.length;q++){var r=p[q];e=j.fromID(r),f=this._tiles[r],f&&f.timeAdded>l-(b||0)&&(this.findLoadedChildren(e,i,k)&&(k[r]=!0),this.findLoadedParent(e,h,o))}var s;for(s in o)k[s]||(this._coveredTiles[s]=!0);for(s in o)k[s]=!0;var t=m.keysDifference(this._tiles,k);for(c=0;c<t.length;c++)this.removeTile(+t[c]);this.transform=a}},addTile:function(a){
var b=this._tiles[a.id];if(b)return b;var c=a.wrapped();if(b=this._tiles[c.id],b||(b=this._cache.get(c.id),b&&this._redoPlacement&&this._redoPlacement(b)),!b){var d=a.z,e=d>this.maxzoom?Math.pow(2,d-this.maxzoom):1;b=new h(c,this.tileSize*e,this.maxzoom),this.loadTile(b,this._tileLoaded.bind(this,b))}return b.uses++,this._tiles[a.id]=b,this.fire("tile.add",{tile:b}),this._source.fire("tile.add",{tile:b}),b},removeTile:function(a){var b=this._tiles[a];b&&(b.uses--,delete this._tiles[a],this.fire("tile.remove",{tile:b}),this._source.fire("tile.remove",{tile:b}),b.uses>0||(b.isRenderable()?this._cache.add(b.coord.wrapped().id,b):(b.aborted=!0,this.abortTile(b),this.unloadTile(b))))},clearTiles:function(){for(var a in this._tiles)this.removeTile(a);this._cache.reset()},tilesIn:function(a){for(var b={},c=this.getIds(),d=1/0,f=1/0,g=-(1/0),h=-(1/0),i=a[0].zoom,k=0;k<a.length;k++){var m=a[k];d=Math.min(d,m.column),f=Math.min(f,m.row),g=Math.max(g,m.column),h=Math.max(h,m.row)}for(var o=0;o<c.length;o++){var p=this._tiles[c[o]],q=j.fromID(c[o]),r=[e(q,p.sourceMaxZoom,new l(d,f,i)),e(q,p.sourceMaxZoom,new l(g,h,i))];if(r[0].x<n&&r[0].y<n&&r[1].x>=0&&r[1].y>=0){for(var s=[],t=0;t<a.length;t++)s.push(e(q,p.sourceMaxZoom,a[t]));var u=b[p.coord.id];void 0===u&&(u=b[p.coord.id]={tile:p,coord:q,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-p.coord.z)}),u.queryGeometry.push(s)}}var v=[];for(var w in b)v.push(b[w]);return v},redoPlacement:function(){for(var a=this.getIds(),b=0;b<a.length;b++){var c=this.getTileByID(a[b]);c.redoPlacement(this)}},getVisibleCoordinates:function(){return this.getRenderableIds().map(j.fromID)}})},{"../data/bucket":290,"../geo/coordinate":299,"../util/evented":395,"../util/lru_cache":399,"../util/util":403,"./source":327,"./tile":329,"./tile_coord":330}],329:[function(a,b,c){"use strict";function d(a,b,c){this.coord=a,this.uid=f.uniqueId(),this.uses=0,this.tileSize=b,this.sourceMaxZoom=c,this.buckets={},this.state="loading"}function e(a,b){if(b){for(var c={},d=0;d<a.length;d++){var e=b.getLayer(a[d].layerId);if(e){var h=g.create(f.extend({layer:e,childLayers:a[d].childLayerIds.map(b.getLayer.bind(b)).filter(function(a){return a})},a[d]));c[h.id]=h}}return c}}var f=a("../util/util"),g=a("../data/bucket"),h=a("../data/feature_index"),i=a("vector-tile"),j=a("pbf"),k=a("../util/vectortile_to_geojson"),l=a("feature-filter"),m=a("../symbol/collision_tile"),n=a("../symbol/collision_box"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype={loadVectorData:function(a,b){this.state="loaded",a&&(this.collisionBoxArray=new n(a.collisionBoxArray),this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new o(a.symbolInstancesArray),this.symbolQuadsArray=new p(a.symbolQuadsArray),this.featureIndex=new h(a.featureIndex,a.rawTileData,this.collisionTile),this.rawTileData=a.rawTileData,this.buckets=e(a.buckets,b))},reloadSymbolData:function(a,b,c){if("unloaded"!==this.state){this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var d in this.buckets){var g=this.buckets[d];"symbol"===g.type&&(g.destroy(b.gl),delete this.buckets[d])}f.extend(this.buckets,e(a.buckets,c))}},unloadVectorData:function(a){for(var b in this.buckets){var c=this.buckets[b];c.destroy(a.gl)}this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.rawTileData=null,this.buckets=null,this.state="unloaded"},redoPlacement:function(a){function b(b,c){this.reloadSymbolData(c,a.map.painter,a.map.style),a.fire("tile.load",{tile:this}),this.state="loaded",this.redoWhenDone&&(this.redoPlacement(a),this.redoWhenDone=!1)}return"loaded"!==this.state||"reloading"===this.state?void(this.redoWhenDone=!0):(this.state="reloading",void a.dispatcher.send("redo placement",{uid:this.uid,source:a.id,angle:a.map.transform.angle,pitch:a.map.transform.pitch,showCollisionBoxes:a.map.showCollisionBoxes},b.bind(this),this.workerID))},getBucket:function(a){return this.buckets&&this.buckets[a.ref||a.id]},querySourceFeatures:function(a,b){if(this.rawTileData){this.vtLayers||(this.vtLayers=new i.VectorTile(new j(new Uint8Array(this.rawTileData))).layers);var c=this.vtLayers._geojsonTileLayer||this.vtLayers[b.sourceLayer];if(c)for(var d=l(b.filter),e={z:this.coord.z,x:this.coord.x,y:this.coord.y},f=0;f<c.length;f++){var g=c.feature(f);if(d(g)){var h=new k(g,this.coord.z,this.coord.x,this.coord.y);h.tile=e,a.push(h)}}}},isRenderable:function(){return"loaded"===this.state||"reloading"===this.state}}},{"../data/bucket":290,"../data/feature_index":297,"../symbol/collision_box":355,"../symbol/collision_tile":357,"../symbol/symbol_instances":366,"../symbol/symbol_quads":367,"../util/util":403,"../util/vectortile_to_geojson":404,"feature-filter":105,pbf:436,"vector-tile":505}],330:[function(a,b,c){"use strict";function d(a,b,c,d){i(!isNaN(a)&&a>=0&&a%1===0),i(!isNaN(b)&&b>=0&&b%1===0),i(!isNaN(c)&&c>=0&&c%1===0),isNaN(d)&&(d=0),this.z=+a,this.x=+b,this.y=+c,this.w=+d,d*=2,d<0&&(d=d*-1-1);var e=1<<this.z;this.id=32*(e*e*d+e*this.y+this.x)+this.z,this.posMatrix=null}function e(a,b,c){for(var d,e="",f=a;f>0;f--)d=1<<f-1,e+=(b&d?1:0)+(c&d?2:0);return e}function f(a,b){if(a.row>b.row){var c=a;a=b,b=c}return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function g(a,b,c,d,e){var f=Math.max(c,Math.floor(b.y0)),g=Math.min(d,Math.ceil(b.y1));if(a.x0===b.x0&&a.y0===b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0){var h=a;a=b,b=h}for(var i=a.dx/a.dy,j=b.dx/b.dy,k=a.dx>0,l=b.dx<0,m=f;m<g;m++){var n=i*Math.max(0,Math.min(a.dy,m+k-a.y0))+a.x0,o=j*Math.max(0,Math.min(b.dy,m+l-b.y0))+b.x0;e(Math.floor(o),Math.ceil(n),m)}}function h(a,b,c,d,e,h){var i,j=f(a,b),k=f(b,c),l=f(c,a);j.dy>k.dy&&(i=j,j=k,k=i),j.dy>l.dy&&(i=j,j=l,l=i),k.dy>l.dy&&(i=k,k=l,l=i),j.dy&&g(l,j,d,e,h),k.dy&&g(l,k,d,e,h)}var i=a("assert"),j=a("whoots-js"),k=a("../geo/coordinate");b.exports=d,d.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},d.prototype.toCoordinate=function(a){var b=Math.min(this.z,a),c=Math.pow(2,b),d=this.y,e=this.x+c*this.w;return new k(e,d,b)},d.fromID=function(a){var b=a%32,c=1<<b,e=(a-b)/32,f=e%c,g=(e-f)/c%c,h=Math.floor(e/(c*c));return h%2!==0&&(h=h*-1-1),h/=2,new d(b,f,g,h)},d.prototype.url=function(a,b,c){var d=j.getTileBBox(this.x,this.y,this.z),f=e(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,b||this.z)).replace("{x}",this.x).replace("{y}","tms"===c?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)},d.prototype.parent=function(a){return 0===this.z?null:this.z>a?new d(this.z-1,this.x,this.y,this.w):new d(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},d.prototype.wrapped=function(){return new d(this.z,this.x,this.y,0)},d.prototype.children=function(a){if(this.z>=a)return[new d(this.z+1,this.x,this.y,this.w)];var b=this.z+1,c=2*this.x,e=2*this.y;return[new d(b,c,e,this.w),new d(b,c+1,e,this.w),new d(b,c,e+1,this.w),new d(b,c+1,e+1,this.w)]},d.cover=function(a,b,c){function e(a,b,e){var h,i,j;if(e>=0&&e<=f)for(h=a;h<b;h++)i=(h%f+f)%f,j=new d(c,i,e,Math.floor(h/f)),g[j.id]=j}var f=1<<a,g={};return h(b[0],b[1],b[2],0,f,e),h(b[2],b[3],b[0],0,f,e),Object.keys(g).map(function(a){return g[a]})}},{"../geo/coordinate":299,assert:34,"whoots-js":521}],331:[function(a,b,c){"use strict";function d(a,b,c){if(this.id=a,this.dispatcher=c,f.extend(this,f.pick(b,["url","scheme","tileSize"])),this._options=f.extend({type:"vector"},b),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");g(b,function(a,b){return a?void this.fire("error",a):(f.extend(this,b),void this.fire("load"))}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("./load_tilejson"),h=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=f.inherit(e,{minzoom:0,maxzoom:22,scheme:"xyz",tileSize:512,reparseOverscaled:!0,isTileClipped:!0,onAdd:function(a){this.map=a},serialize:function(){return f.extend({},this._options)},loadTile:function(a,b){function c(c,d){if(!a.aborted){if(c)return b(c);a.loadVectorData(d,this.map.style),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null),a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)}}var d=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,e={url:h(a.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:a.uid,coord:a.coord,zoom:a.coord.z,tileSize:this.tileSize*d,source:this.id,overscaling:d,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID?"loading"===a.state?a.reloadCallback=b:(e.rawTileData=a.rawTileData,this.dispatcher.send("reload tile",e,c.bind(this),a.workerID)):a.workerID=this.dispatcher.send("load tile",e,c.bind(this))},abortTile:function(a){this.dispatcher.send("abort tile",{uid:a.uid,source:this.id},null,a.workerID)},unloadTile:function(a){a.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},null,a.workerID)}})},{"../util/evented":395,"../util/mapbox":400,"../util/util":403,"./load_tilejson":323}],332:[function(a,b,c){"use strict";function d(a,b,c){this.actor=a,this.styleLayers=b,c&&(this.loadVectorData=c),this.loading={},this.loaded={}}var e=a("../util/ajax"),f=a("vector-tile"),g=a("pbf"),h=a("./worker_tile");b.exports=d,d.prototype={loadTile:function(a,b){function c(a,c){return delete this.loading[d][e],a?b(a):c?(f.data=c.tile,f.parse(f.data,this.styleLayers.getLayerFamilies(),this.actor,c.rawTileData,b),this.loaded[d]=this.loaded[d]||{},void(this.loaded[d][e]=f)):b(null,null)}var d=a.source,e=a.uid;this.loading[d]||(this.loading[d]={});var f=this.loading[d][e]=new h(a);f.abort=this.loadVectorData(a,c.bind(this))},reloadTile:function(a,b){var c=this.loaded[a.source],d=a.uid;if(c&&c[d]){var e=c[d];e.parse(e.data,this.styleLayers.getLayerFamilies(),this.actor,a.rawTileData,b)}},abortTile:function(a){var b=this.loading[a.source],c=a.uid;b&&b[c]&&b[c].abort&&(b[c].abort(),delete b[c])},removeTile:function(a){var b=this.loaded[a.source],c=a.uid;b&&b[c]&&delete b[c]},loadVectorData:function(a,b){function c(a,c){if(a)return b(a);var d=new f.VectorTile(new g(new Uint8Array(c)));b(a,{tile:d,rawTileData:c})}var d=e.getArrayBuffer(a.url,c.bind(this));return function(){d.abort()}},redoPlacement:function(a,b){var c=this.loaded[a.source],d=this.loading[a.source],e=a.uid;if(c&&c[e]){var f=c[e],g=f.redoPlacement(a.angle,a.pitch,a.showCollisionBoxes);g.result&&b(null,g.result,g.transferables)}else d&&d[e]&&(d[e].angle=a.angle)}}},{"../util/ajax":386,"./worker_tile":335,pbf:436,"vector-tile":505}],333:[function(a,b,c){"use strict";function d(a,b){this.id=a,this.urls=b.urls,this.coordinates=b.coordinates,j.getVideo(b.urls,function(a,c){if(a)return this.fire("error",{error:a});this.video=c,this.video.loop=!0;var d;this.video.addEventListener("playing",function(){d=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(d)}.bind(this)),this.map&&(this.video.play(),this.setCoordinates(b.coordinates)),this.fire("load")}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,roundZoom:!0,getVideo:function(){return this.video},onAdd:function(a){this.map||(this.map=a,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this._coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("change"),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=32767,c=new l;c.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),c.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,b,0),c.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,b),c.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,b,b),this.tile.buckets={},this.tile.boundsBuffer=new m(c.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){if(!(this.video.readyState<2)&&this.tile){var a=this.map.painter.gl;this._prepared?(a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this._prepared=!0,this.tile.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.video)),this._currentTime=this.video.currentTime}},loadTile:function(a,b){this._coord&&this._coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}})},{"../data/bucket":290,"../data/buffer":295,"../geo/lng_lat":300,"../render/draw_raster":312,"../render/vertex_array_object":318,"../util/ajax":386,"../util/evented":395,"../util/util":403,"./tile_coord":330,"point-geometry":442}],334:[function(a,b,c){"use strict";function d(a){this.self=a,this.actor=new f(a,this);var b={getLayers:function(){return this.layers}.bind(this),getLayerFamilies:function(){return this.layerFamilies}.bind(this)};this.workerSources={vector:new i(this.actor,b),geojson:new j(this.actor,b)},this.self.registerWorkerSource=function(a,c){if(this.workerSources[a])throw new Error('Worker source with name "'+a+'" already registered.');this.workerSources[a]=new c(this.actor,b)}.bind(this)}function e(a){var b={};for(var c in a){var d=a[c],e=d.ref||d.id,f=a[e];f.layout&&"none"===f.layout.visibility||(b[e]=b[e]||[],c===e?b[e].unshift(d):b[e].push(d))}return b}var f=a("../util/actor"),g=a("../style/style_layer"),h=a("../util/util"),i=a("./vector_tile_worker_source"),j=a("./geojson_worker_source");b.exports=function(a){return new d(a)},h.extend(d.prototype,{"set layers":function(a){function b(a){var b=g.create(a,a.ref&&c.layers[a.ref]);b.updatePaintTransitions({},{transition:!1}),c.layers[b.id]=b}this.layers={};for(var c=this,d=[],f=0;f<a.length;f++){var h=a[f];"fill"!==h.type&&"line"!==h.type&&"circle"!==h.type&&"symbol"!==h.type||(h.ref?d.push(f):b(h))}for(var i=0;i<d.length;i++)b(a[d[i]]);this.layerFamilies=e(this.layers)},"update layers":function(a){function b(a){var b=f.layers[a.ref];f.layers[a.id]?f.layers[a.id].set(a,b):f.layers[a.id]=g.create(a,b),f.layers[a.id].updatePaintTransitions({},{transition:!1})}var c,d,f=this;for(c in a)d=a[c],d.ref&&b(d);for(c in a)d=a[c],d.ref||b(d);this.layerFamilies=e(this.layers)},"load tile":function(a,b){var c=a.type||"vector";this.workerSources[c].loadTile(a,b)},"reload tile":function(a,b){var c=a.type||"vector";this.workerSources[c].reloadTile(a,b)},"abort tile":function(a){var b=a.type||"vector";this.workerSources[b].abortTile(a)},"remove tile":function(a){var b=a.type||"vector";this.workerSources[b].removeTile(a)},"redo placement":function(a,b){var c=a.type||"vector";this.workerSources[c].redoPlacement(a,b)},"load worker source":function(a,b){try{this.self.importScripts(a.url),b()}catch(a){b(a)}}})},{"../style/style_layer":342,"../util/actor":385,"../util/util":403,"./geojson_worker_source":320,"./vector_tile_worker_source":332}],335:[function(a,b,c){"use strict";function d(a){this.coord=a.coord,this.uid=a.uid,this.zoom=a.zoom,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=a.overscaling,this.angle=a.angle,this.pitch=a.pitch,this.showCollisionBoxes=a.showCollisionBoxes}function e(a){return!a.isEmpty()}function f(a){return a.serialize()}function g(a){var b=[];for(var c in a)a[c].getTransferables(b);return b}function h(a){return a.id}var i=a("../data/feature_index"),j=a("../symbol/collision_tile"),k=a("../data/bucket"),l=a("../symbol/collision_box"),m=a("../util/dictionary_coder"),n=a("../util/util"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype.parse=function(a,b,c,d,q){function r(a,b){for(var c=0;c<a.length;c++){var d=a.feature(c);d.index=c;for(var e in b)b[e].filter(d)&&b[e].features.push(d)}}function s(a){if(a)return q(a);if(N++,2===N){for(var b=I.length-1;b>=0;b--)t(C,I[b]);u()}}function t(a,b){if(b.populateArrays(z,M,L),"symbol"!==b.type)for(var c=0;c<b.features.length;c++){var d=b.features[c];A.insert(d,d.index,b.sourceLayerIndex,b.index)}b.features=null}function u(){C.status="done",C.redoPlacementAfterDone&&(C.redoPlacement(C.angle,C.pitch,null),C.redoPlacementAfterDone=!1);var a=A.serialize(),b=z.serialize(),c=C.collisionBoxArray.serialize(),h=C.symbolInstancesArray.serialize(),i=C.symbolQuadsArray.serialize(),j=[d].concat(a.transferables).concat(b.transferables),k=H.filter(e);q(null,{buckets:k.map(f),featureIndex:a.data,collisionTile:b.data,collisionBoxArray:c,symbolInstancesArray:h,symbolQuadsArray:i,rawTileData:d},g(k).concat(j))}this.status="parsing",this.data=a,this.collisionBoxArray=new l,this.symbolInstancesArray=new o,this.symbolQuadsArray=new p;var v,w,x,y,z=new j(this.angle,this.pitch,this.collisionBoxArray),A=new i(this.coord,this.overscaling,z,a.layers),B=new m(a.layers?Object.keys(a.layers).sort():["_geojsonTileLayer"]),C=this,D={},E={},F=0;for(var G in b)w=b[G][0],w.source===this.source&&(w.ref||w.minzoom&&this.zoom<w.minzoom||w.maxzoom&&this.zoom>=w.maxzoom||w.layout&&"none"===w.layout.visibility||a.layers&&!a.layers[w.sourceLayer]||(y=k.create({layer:w,index:F++,childLayers:b[G],zoom:this.zoom,overscaling:this.overscaling,showCollisionBoxes:this.showCollisionBoxes,collisionBoxArray:this.collisionBoxArray,symbolQuadsArray:this.symbolQuadsArray,symbolInstancesArray:this.symbolInstancesArray,sourceLayerIndex:B.encode(w.sourceLayer||"_geojsonTileLayer")}),y.createFilter(),D[w.id]=y,a.layers&&(x=w.sourceLayer,E[x]=E[x]||{},E[x][w.id]=y)));if(a.layers)for(x in E)1===w.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.'),w=a.layers[x],w&&r(w,E[x]);else r(a,D);var H=[],I=this.symbolBuckets=[],J=[];A.bucketLayerIDs={};for(var K in D)y=D[K],0!==y.features.length&&(A.bucketLayerIDs[y.index]=y.childLayers.map(h),H.push(y),"symbol"===y.type?I.push(y):J.push(y));var L={},M={},N=0;if(I.length>0){for(v=I.length-1;v>=0;v--)I[v].updateIcons(L),I[v].updateFont(M);for(var O in M)M[O]=Object.keys(M[O]).map(Number);L=Object.keys(L),c.send("get glyphs",{uid:this.uid,stacks:M},function(a,b){M=b,s(a)}),L.length?c.send("get icons",{icons:L},function(a,b){L=b,s(a)}):s()}for(v=J.length-1;v>=0;v--)t(this,J[v]);if(0===I.length)return u()},d.prototype.redoPlacement=function(a,b,c){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=a,{};for(var d=new j(a,b,this.collisionBoxArray),h=this.symbolBuckets,i=h.length-1;i>=0;i--)h[i].placeFeatures(d,c);var k=d.serialize(),l=h.filter(e);return{result:{buckets:l.map(f),collisionTile:k.data},transferables:g(l).concat(k.transferables)}}},{"../data/bucket":290,"../data/feature_index":297,"../symbol/collision_box":355,"../symbol/collision_tile":357,"../symbol/symbol_instances":366,"../symbol/symbol_quads":367,"../util/dictionary_coder":393,"../util/util":403}],336:[function(a,b,c){"use strict";function d(){this.n=0,this.times=[]}b.exports=d,d.prototype.stopped=function(){return this.times=this.times.filter(function(a){return a.time>=(new Date).getTime()}),!this.times.length},d.prototype.set=function(a){return this.times.push({id:this.n,time:a+(new Date).getTime()}),this.n++},d.prototype.cancel=function(a){this.times=this.times.filter(function(b){return b.id!==a})}},{}],337:[function(a,b,c){"use strict";function d(a){this.base=a,this.retina=h.devicePixelRatio>1;var b=this.retina?"@2x":"";g.getJSON(i(a,b,".json"),function(a,b){return a?void this.fire("error",{error:a}):(this.data=b,void(this.img&&this.fire("load")))}.bind(this)),g.getImage(i(a,b,".png"),function(a,b){if(a)return void this.fire("error",{error:a});for(var c=b.getData(),d=b.data=new Uint8Array(c.length),e=0;e<c.length;e+=4){var f=c[e+3]/255;d[e+0]=c[e+0]*f,d[e+1]=c[e+1]*f,d[e+2]=c[e+2]*f,d[e+3]=c[e+3]}this.img=b,this.data&&this.fire("load")}.bind(this))}function e(){}var f=a("../util/evented"),g=a("../util/ajax"),h=a("../util/browser"),i=a("../util/mapbox").normalizeSpriteURL;b.exports=d,d.prototype=Object.create(f),d.prototype.toJSON=function(){return this.base},d.prototype.loaded=function(){return!(!this.data||!this.img)},d.prototype.resize=function(){if(h.devicePixelRatio>1!==this.retina){var a=new d(this.base);a.on("load",function(){this.img=a.img,this.data=a.data,this.retina=a.retina}.bind(this))}},e.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},d.prototype.getSpritePosition=function(a){if(!this.loaded())return new e;var b=this.data&&this.data[a];return b&&this.img?b:new e}},{"../util/ajax":386,"../util/browser":387,"../util/evented":395,"../util/mapbox":400}],338:[function(a,b,c){"use strict";var d=a("csscolorparser").parseCSSColor,e=a("../util/util"),f=a("./style_function"),g={};b.exports=function h(a){if(f.isFunctionDefinition(a))return e.extend({},a,{stops:a.stops.map(function(a){return[a[0],h(a[1])]})});if("string"==typeof a){if(!g[a]){var b=d(a);if(!b)throw new Error("Invalid color "+a);g[a]=[b[0]/255*b[3],b[1]/255*b[3],b[2]/255*b[3],b[3]]}return g[a]}throw new Error("Invalid color "+a)}},{"../util/util":403,"./style_function":341,csscolorparser:89}],339:[function(a,b,c){"use strict";function d(a,b,c){this.animationLoop=b||new p,this.dispatcher=new o(c||1,this),this.spriteAtlas=new i(1024,1024),this.lineAtlas=new j(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},k.bindAll(["_forwardSourceEvent","_forwardTileEvent","_forwardLayerEvent","_redoPlacement"],this),this._resetUpdates();var d=function(a,b){if(a)return void this.fire("error",{error:a});if(!q.emitErrors(this,q(b))){this._loaded=!0,this.stylesheet=b,this.updateClasses();var c=b.sources;for(var d in c)this.addSource(d,c[d]);b.sprite&&(this.sprite=new g(b.sprite),this.sprite.on("load",this.fire.bind(this,"change"))),this.glyphSource=new h(b.glyphs),this._resolve(),this.fire("load")}}.bind(this);"string"==typeof a?l.getJSON(m(a),d):n.frame(d.bind(this,null,a)),this.on("source.load",function(a){var b=a.source;if(b&&b.vectorLayerIds)for(var c in this._layers){var d=this._layers[c];d.source===b.id&&this._validateLayer(d)}})}var e=a("../util/evented"),f=a("./style_layer"),g=a("./image_sprite"),h=a("../symbol/glyph_source"),i=a("../symbol/sprite_atlas"),j=a("../render/line_atlas"),k=a("../util/util"),l=a("../util/ajax"),m=a("../util/mapbox").normalizeStyleURL,n=a("../util/browser"),o=a("../util/dispatcher"),p=a("./animation_loop"),q=a("./validate_style"),r=a("../source/source"),s=a("../source/query_features"),t=a("../source/source_cache"),u=a("./style_spec"),v=a("./style_function");b.exports=d,d.prototype=k.inherit(e,{_loaded:!1,_validateLayer:function(a){var b=this.sources[a.source];a.sourceLayer&&b&&b.vectorLayerIds&&b.vectorLayerIds.indexOf(a.sourceLayer)===-1&&this.fire("error",{error:new Error('Source layer "'+a.sourceLayer+'" does not exist on source "'+b.id+'" as specified by style layer "'+a.id+'"')})},loaded:function(){if(!this._loaded)return!1;if(Object.keys(this._updates.sources).length)return!1;for(var a in this.sources)if(!this.sources[a].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},_resolve:function(){var a,b;this._layers={},this._order=this.stylesheet.layers.map(function(a){return a.id});for(var c=0;c<this.stylesheet.layers.length;c++)b=this.stylesheet.layers[c],b.ref||(a=f.create(b),this._layers[a.id]=a,a.on("error",this._forwardLayerEvent));for(var d=0;d<this.stylesheet.layers.length;d++)if(b=this.stylesheet.layers[d],b.ref){var e=this.getLayer(b.ref);a=f.create(b,e),this._layers[a.id]=a,a.on("error",this._forwardLayerEvent)}this._groupLayers(),this._updateWorkerLayers()},_groupLayers:function(){var a;this._groups=[];for(var b=0;b<this._order.length;++b){var c=this._layers[this._order[b]];a&&c.source===a.source||(a=[],a.source=c.source,this._groups.push(a)),a.push(c)}},_updateWorkerLayers:function(a){this.dispatcher.broadcast(a?"update layers":"set layers",this._serializeLayers(a))},_serializeLayers:function(a){a=a||this._order;for(var b=[],c={includeRefProperties:!0},d=0;d<a.length;d++)b.push(this._layers[a[d]].serialize(c));return b},_applyClasses:function(a,b){if(this._loaded){a=a||[],b=b||{transition:!0};var c=this.stylesheet.transition||{},d=this._updates.allPaintProps?this._layers:this._updates.paintProps;for(var e in d){var f=this._layers[e],g=this._updates.paintProps[e];if(this._updates.allPaintProps||g.all)f.updatePaintTransitions(a,b,c,this.animationLoop);else for(var h in g)this._layers[e].updatePaintTransition(h,a,b,c,this.animationLoop)}}},_recalculate:function(a){for(var b in this.sources)this.sources[b].used=!1;this._updateZoomHistory(a),this.rasterFadeDuration=300;for(var c in this._layers){var d=this._layers[c];d.recalculate(a,this.zoomHistory),!d.isHidden(a)&&d.source&&(this.sources[d.source].used=!0)}var e=300;Math.floor(this.z)!==Math.floor(a)&&this.animationLoop.set(e),this.z=a,this.fire("zoom")},_updateZoomHistory:function(a){var b=this.zoomHistory;void 0===b.lastIntegerZoom&&(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=0,b.lastZoom=a),Math.floor(b.lastZoom)<Math.floor(a)?(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=Date.now()):Math.floor(b.lastZoom)>Math.floor(a)&&(b.lastIntegerZoom=Math.floor(a+1),b.lastIntegerZoomTime=Date.now()),b.lastZoom=a},_checkLoaded:function(){if(!this._loaded)throw new Error("Style is not done loading")},update:function(a,b){if(!this._updates.changed)return this;if(this._updates.allLayers)this._groupLayers(),this._updateWorkerLayers();else{var c=Object.keys(this._updates.layers);c.length&&this._updateWorkerLayers(c)}var d,e=Object.keys(this._updates.sources);for(d=0;d<e.length;d++)this._reloadSource(e[d]);for(d=0;d<this._updates.events.length;d++){var f=this._updates.events[d];this.fire(f[0],f[1])}return this._applyClasses(a,b),this._updates.changed&&this.fire("change"),this._resetUpdates(),this},_resetUpdates:function(){this._updates={events:[],layers:{},sources:{},paintProps:{}}},addSource:function(a,b){if(this._checkLoaded(),void 0!==this.sources[a])throw new Error("There is already a source with this ID");if(!b.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(b)+".");var c=["vector","raster","geojson","video","image"],d=c.indexOf(b.type)>=0;return d&&this._handleErrors(q.source,"sources."+a,b)?this:(b=new t(a,b,this.dispatcher),this.sources[a]=b,b.style=this,b.on("load",this._forwardSourceEvent).on("error",this._forwardSourceEvent).on("change",this._forwardSourceEvent).on("tile.add",this._forwardTileEvent).on("tile.load",this._forwardTileEvent).on("tile.error",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.add",{source:b}]),this._updates.changed=!0,this)},removeSource:function(a){if(this._checkLoaded(),void 0===this.sources[a])throw new Error("There is no source with this ID");var b=this.sources[a];return delete this.sources[a],delete this._updates.sources[a],b.off("load",this._forwardSourceEvent).off("error",this._forwardSourceEvent).off("change",this._forwardSourceEvent).off("tile.add",this._forwardTileEvent).off("tile.load",this._forwardTileEvent).off("tile.error",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.remove",{source:b}]),this._updates.changed=!0,this},getSource:function(a){return this.sources[a]&&this.sources[a].getSource()},addLayer:function(a,b){if(this._checkLoaded(),!(a instanceof f)){if(this._handleErrors(q.layer,"layers."+a.id,a,!1,{arrayIndex:-1}))return this;var c=a.ref&&this.getLayer(a.ref);a=f.create(a,c)}return this._validateLayer(a),a.on("error",this._forwardLayerEvent),this._layers[a.id]=a,this._order.splice(b?this._order.indexOf(b):1/0,0,a.id),this._updates.allLayers=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.events.push(["layer.add",{layer:a}]),this.updateClasses(a.id)},removeLayer:function(a){this._checkLoaded();var b=this._layers[a];if(void 0===b)throw new Error("There is no layer with this ID");for(var c in this._layers)this._layers[c].ref===a&&this.removeLayer(c);return b.off("error",this._forwardLayerEvent),delete this._layers[a],delete this._updates.layers[a],delete this._updates.paintProps[a],this._order.splice(this._order.indexOf(a),1),this._updates.allLayers=!0,this._updates.events.push(["layer.remove",{layer:b}]),this._updates.changed=!0,this},getLayer:function(a){return this._layers[a]},getReferentLayer:function(a){var b=this.getLayer(a);return b.ref&&(b=this.getLayer(b.ref)),b},setLayerZoomRange:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return d.minzoom===b&&d.maxzoom===c?this:(null!=b&&(d.minzoom=b),null!=c&&(d.maxzoom=c),this._updateLayer(d))},setFilter:function(a,b){this._checkLoaded();var c=this.getReferentLayer(a);return null!==b&&this._handleErrors(q.filter,"layers."+c.id+".filter",b)?this:k.deepEqual(c.filter,b)?this:(c.filter=k.clone(b),this._updateLayer(c))},getFilter:function(a){return this.getReferentLayer(a).filter},setLayoutProperty:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return k.deepEqual(d.getLayoutProperty(b),c)?this:(d.setLayoutProperty(b,c),this._updateLayer(d))},getLayoutProperty:function(a,b){return this.getReferentLayer(a).getLayoutProperty(b)},setPaintProperty:function(a,b,c,d){this._checkLoaded();var e=this.getLayer(a);if(k.deepEqual(e.getPaintProperty(b,d),c))return this;var f=e.isPaintValueFeatureConstant(b);e.setPaintProperty(b,c,d);var g=!(c&&v.isFunctionDefinition(c)&&"$zoom"!==c.property&&void 0!==c.property);return g&&f||(this._updates.layers[a]=!0,e.source&&(this._updates.sources[e.source]=!0)),this.updateClasses(a,b)},getPaintProperty:function(a,b,c){return this.getLayer(a).getPaintProperty(b,c)},updateClasses:function(a,b){if(this._updates.changed=!0,a){var c=this._updates.paintProps;c[a]||(c[a]={}),c[a][b||"all"]=!0}else this._updates.allPaintProps=!0;return this},serialize:function(){return k.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:k.mapObject(this.sources,function(a){return a.serialize()}),layers:this._order.map(function(a){return this._layers[a].serialize()},this)},function(a){return void 0!==a})},_updateLayer:function(a){return this._updates.layers[a.id]=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.changed=!0,this},_flattenRenderedFeatures:function(a){for(var b=[],c=this._order.length-1;c>=0;c--)for(var d=this._order[c],e=0;e<a.length;e++){var f=a[e][d];
if(f)for(var g=0;g<f.length;g++)b.push(f[g])}return b},queryRenderedFeatures:function(a,b,c,d){b&&b.filter&&this._handleErrors(q.filter,"queryRenderedFeatures.filter",b.filter,!0);var e={};if(b&&b.layers)for(var f=0;f<b.layers.length;f++){var g=b.layers[f];e[this._layers[g].source]=!0}var h=[];for(var i in this.sources)if(!b.layers||e[i]){var j=this.sources[i],k=s.rendered(j,this._layers,a,b,c,d);h.push(k)}return this._flattenRenderedFeatures(h)},querySourceFeatures:function(a,b){b&&b.filter&&this._handleErrors(q.filter,"querySourceFeatures.filter",b.filter,!0);var c=this.sources[a];return c?s.source(c,b):[]},addSourceType:function(a,b,c){return r.getType(a)?c(new Error('A source type called "'+a+'" already exists.')):(r.setType(a,b),b.workerSourceURL?void this.dispatcher.broadcast("load worker source",{name:a,url:b.workerSourceURL},c):c(null,null))},_handleErrors:function(a,b,c,d,e){var f=d?q.throwErrors:q.emitErrors,g=a.call(q,k.extend({key:b,style:this.serialize(),value:c,styleSpec:u},e));return f.call(q,this,g)},_remove:function(){this.dispatcher.remove()},_reloadSource:function(a){this.sources[a].reload()},_updateSources:function(a){for(var b in this.sources)this.sources[b].update(a)},_redoPlacement:function(){for(var a in this.sources)this.sources[a].redoPlacement&&this.sources[a].redoPlacement()},_forwardSourceEvent:function(a){this.fire("source."+a.type,k.extend({source:a.target.getSource()},a))},_forwardTileEvent:function(a){this.fire(a.type,k.extend({source:a.target},a))},_forwardLayerEvent:function(a){this.fire("layer."+a.type,k.extend({layer:{id:a.target.id}},a))},"get sprite json":function(a,b){var c=this.sprite;c.loaded()?b(null,{sprite:c.data,retina:c.retina}):c.on("load",function(){b(null,{sprite:c.data,retina:c.retina})})},"get icons":function(a,b){var c=this.sprite,d=this.spriteAtlas;c.loaded()?(d.setSprite(c),d.addIcons(a.icons,b)):c.on("load",function(){d.setSprite(c),d.addIcons(a.icons,b)})},"get glyphs":function(a,b){function c(a,c,d){a&&console.error(a),f[d]=c,e--,0===e&&b(null,f)}var d=a.stacks,e=Object.keys(d).length,f={};for(var g in d)this.glyphSource.getSimpleGlyphs(g,d[g],a.uid,c)}})},{"../render/line_atlas":315,"../source/query_features":325,"../source/source":327,"../source/source_cache":328,"../symbol/glyph_source":360,"../symbol/sprite_atlas":365,"../util/ajax":386,"../util/browser":387,"../util/dispatcher":394,"../util/evented":395,"../util/mapbox":400,"../util/util":403,"./animation_loop":336,"./image_sprite":337,"./style_function":341,"./style_layer":342,"./style_spec":349,"./validate_style":351}],340:[function(a,b,c){"use strict";function d(a,b){this.value=h.clone(b),this.isFunction=f.isFunctionDefinition(b),this.json=JSON.stringify(this.value);var c="color"===a.type&&this.value?g(this.value):b;if(this.calculate=f[a["function"]||"piecewise-constant"](c),this.isFeatureConstant=this.calculate.isFeatureConstant,this.isZoomConstant=this.calculate.isZoomConstant,"piecewise-constant"===a["function"]&&a.transition&&(this.calculate=e(this.calculate)),!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var d=[],i=this.value.stops,j=0;j<this.value.stops.length;j++){var k=i[j][0].zoom;this.stopZoomLevels.indexOf(k)<0&&(this.stopZoomLevels.push(k),d.push([k,d.length]))}this.calculateInterpolationT=f.interpolated({stops:d,base:b.base})}}function e(a){return function(b,c){var d,e,f,g=b.zoom,h=b.zoomHistory,i=b.duration,j=g%1,k=Math.min((Date.now()-h.lastIntegerZoomTime)/i,1),l=1,m=1;return g>h.lastIntegerZoom?(d=j+(1-j)*k,l*=2,e=a({zoom:g-1},c),f=a({zoom:g},c)):(d=1-(1-k)*j,f=a({zoom:g},c),e=a({zoom:g+1},c),l/=2),void 0===e||void 0===f?void 0:{from:e,fromScale:l,to:f,toScale:m,t:d}}}var f=a("./style_function"),g=a("./parse_color"),h=a("../util/util");b.exports=d},{"../util/util":403,"./parse_color":338,"./style_function":341}],341:[function(a,b,c){"use strict";var d=a("mapbox-gl-function");c.interpolated=function(a){var b=d.interpolated(a),c=function(a,c){return b(a&&a.zoom,c||{})};return c.isFeatureConstant=b.isFeatureConstant,c.isZoomConstant=b.isZoomConstant,c},c["piecewise-constant"]=function(a){var b=d["piecewise-constant"](a),c=function(a,c){return b(a&&a.zoom,c||{})};return c.isFeatureConstant=b.isFeatureConstant,c.isZoomConstant=b.isZoomConstant,c},c.isFunctionDefinition=d.isFunctionDefinition},{"mapbox-gl-function":263}],342:[function(a,b,c){"use strict";function d(a,b){this.set(a,b)}function e(a){return a.value}var f=a("../util/util"),g=a("./style_transition"),h=a("./style_declaration"),i=a("./style_spec"),j=a("./validate_style"),k=a("./parse_color"),l=a("../util/evented");b.exports=d;var m="-transition";d.create=function(b,c){var d={background:a("./style_layer/background_style_layer"),circle:a("./style_layer/circle_style_layer"),fill:a("./style_layer/fill_style_layer"),line:a("./style_layer/line_style_layer"),raster:a("./style_layer/raster_style_layer"),symbol:a("./style_layer/symbol_style_layer")};return new d[(c||b).type](b,c)},d.prototype=f.inherit(l,{set:function(a,b){this.id=a.id,this.ref=a.ref,this.metadata=a.metadata,this.type=(b||a).type,this.source=(b||a).source,this.sourceLayer=(b||a)["source-layer"],this.minzoom=(b||a).minzoom,this.maxzoom=(b||a).maxzoom,this.filter=(b||a).filter,this.paint={},this.layout={},this._paintSpecifications=i["paint_"+this.type],this._layoutSpecifications=i["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var c,d;for(var e in a){var f=e.match(/^paint(?:\.(.*))?$/);if(f){var g=f[1]||"";for(c in a[e])this.setPaintProperty(c,a[e][c],g)}}if(this.ref)this._layoutDeclarations=b._layoutDeclarations;else for(d in a.layout)this.setLayoutProperty(d,a.layout[d]);for(c in this._paintSpecifications)this.paint[c]=this.getPaintValue(c);for(d in this._layoutSpecifications)this._updateLayoutValue(d)},setLayoutProperty:function(a,b){if(null==b)delete this._layoutDeclarations[a];else{var c="layers."+this.id+".layout."+a;if(this._handleErrors(j.layoutProperty,c,a,b))return;this._layoutDeclarations[a]=new h(this._layoutSpecifications[a],b)}this._updateLayoutValue(a)},getLayoutProperty:function(a){return this._layoutDeclarations[a]&&this._layoutDeclarations[a].value},getLayoutValue:function(a,b,c){var d=this._layoutSpecifications[a],e=this._layoutDeclarations[a];return e?e.calculate(b,c):d["default"]},setPaintProperty:function(a,b,c){var d="layers."+this.id+(c?'["paint.'+c+'"].':".paint.")+a;if(f.endsWith(a,m))if(this._paintTransitionOptions[c||""]||(this._paintTransitionOptions[c||""]={}),null===b||void 0===b)delete this._paintTransitionOptions[c||""][a];else{if(this._handleErrors(j.paintProperty,d,a,b))return;this._paintTransitionOptions[c||""][a]=b}else if(this._paintDeclarations[c||""]||(this._paintDeclarations[c||""]={}),null===b||void 0===b)delete this._paintDeclarations[c||""][a];else{if(this._handleErrors(j.paintProperty,d,a,b))return;this._paintDeclarations[c||""][a]=new h(this._paintSpecifications[a],b)}},getPaintProperty:function(a,b){return b=b||"",f.endsWith(a,m)?this._paintTransitionOptions[b]&&this._paintTransitionOptions[b][a]:this._paintDeclarations[b]&&this._paintDeclarations[b][a]&&this._paintDeclarations[b][a].value},getPaintValue:function(a,b,c){var d=this._paintSpecifications[a],e=this._paintTransitions[a];return e?e.calculate(b,c):"color"===d.type&&d["default"]?k(d["default"]):d["default"]},getPaintValueStopZoomLevels:function(a){var b=this._paintTransitions[a];return b?b.declaration.stopZoomLevels:[]},getPaintInterpolationT:function(a,b){var c=this._paintTransitions[a];return c.declaration.calculateInterpolationT({zoom:b})},isPaintValueFeatureConstant:function(a){var b=this._paintTransitions[a];return!b||b.declaration.isFeatureConstant},isLayoutValueFeatureConstant:function(a){var b=this._layoutDeclarations[a];return!b||b.isFeatureConstant},isPaintValueZoomConstant:function(a){var b=this._paintTransitions[a];return!b||b.declaration.isZoomConstant},isHidden:function(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.layout.visibility||0===this.paint[this.type+"-opacity"]},updatePaintTransitions:function(a,b,c,d){for(var e=f.extend({},this._paintDeclarations[""]),g=0;g<a.length;g++)f.extend(e,this._paintDeclarations[a[g]]);var h;for(h in e)this._applyPaintDeclaration(h,e[h],b,c,d);for(h in this._paintTransitions)h in e||this._applyPaintDeclaration(h,null,b,c,d)},updatePaintTransition:function(a,b,c,d,e){for(var f=this._paintDeclarations[""][a],g=0;g<b.length;g++){var h=this._paintDeclarations[b[g]];h&&h[a]&&(f=h[a])}this._applyPaintDeclaration(a,f,c,d,e)},recalculate:function(a,b){for(var c in this._paintTransitions)this.paint[c]=this.getPaintValue(c,{zoom:a,zoomHistory:b});for(var d in this._layoutFunctions)this.layout[d]=this.getLayoutValue(d,{zoom:a,zoomHistory:b})},serialize:function(a){var b={id:this.id,ref:this.ref,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom};for(var c in this._paintDeclarations){var d=""===c?"paint":"paint."+c;b[d]=f.mapObject(this._paintDeclarations[c],e)}return(!this.ref||a&&a.includeRefProperties)&&f.extend(b,{type:this.type,source:this.source,"source-layer":this.sourceLayer,filter:this.filter,layout:f.mapObject(this._layoutDeclarations,e)}),f.filterObject(b,function(a,b){return void 0!==a&&!("layout"===b&&!Object.keys(a).length)})},_applyPaintDeclaration:function(a,b,c,d,e){var i=c.transition?this._paintTransitions[a]:void 0,j=this._paintSpecifications[a];if(null!==b&&void 0!==b||(b=new h(j,j["default"])),!i||i.declaration.json!==b.json){var k=f.extend({duration:300,delay:0},d,this.getPaintProperty(a+m)),l=this._paintTransitions[a]=new g(j,b,i,k);l.instant()||(l.loopID=e.set(l.endTime-Date.now())),i&&e.cancel(i.loopID)}},_updateLayoutValue:function(a){var b=this._layoutDeclarations[a];b&&b.isFunction?this._layoutFunctions[a]=!0:(delete this._layoutFunctions[a],this.layout[a]=this.getLayoutValue(a))},_handleErrors:function(a,b,c,d){return j.emitErrors(this,a.call(j,{key:b,layerType:this.type,objectKey:c,value:d,styleSpec:i,style:{glyphs:!0,sprite:!0}}))}})},{"../util/evented":395,"../util/util":403,"./parse_color":338,"./style_declaration":340,"./style_layer/background_style_layer":343,"./style_layer/circle_style_layer":344,"./style_layer/fill_style_layer":345,"./style_layer/line_style_layer":346,"./style_layer/raster_style_layer":347,"./style_layer/symbol_style_layer":348,"./style_spec":349,"./style_transition":350,"./validate_style":351}],343:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":403,"../style_layer":342}],344:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":403,"../style_layer":342}],345:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValue.call(this,"fill-color",b,c):f.prototype.getPaintValue.call(this,a,b,c)},getPaintValueStopZoomLevels:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):f.prototype.getPaintValueStopZoomLevels.call(this,arguments)},getPaintInterpolationT:function(a,b){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintInterpolationT.call(this,"fill-color",b):f.prototype.getPaintInterpolationT.call(this,a,b)},isPaintValueFeatureConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):f.prototype.isPaintValueFeatureConstant.call(this,a)},isPaintValueZoomConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueZoomConstant.call(this,"fill-color"):f.prototype.isPaintValueZoomConstant.call(this,a)}}),b.exports=d},{"../../util/util":403,"../style_layer":342}],346:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){var d=f.prototype.getPaintValue.apply(this,arguments);if(d&&"line-dasharray"===a){var e=Math.floor(b.zoom);this._flooredZoom!==e&&(this._flooredZoom=e,this._flooredLineWidth=this.getPaintValue("line-width",b,c)),d.fromScale*=this._flooredLineWidth,d.toScale*=this._flooredLineWidth}return d}})},{"../../util/util":403,"../style_layer":342}],347:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":403,"../style_layer":342}],348:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{isHidden:function(){if(f.prototype.isHidden.apply(this,arguments))return!0;var a=0===this.paint["text-opacity"]||!this.layout["text-field"],b=0===this.paint["icon-opacity"]||!this.layout["icon-image"];return!(!a||!b)},getLayoutValue:function(a,b,c){return"text-rotation-alignment"===a&&"line"===this.getLayoutValue("symbol-placement",b,c)&&!this.getLayoutProperty("text-rotation-alignment")||"icon-rotation-alignment"===a&&"line"===this.getLayoutValue("symbol-placement",b,c)&&!this.getLayoutProperty("icon-rotation-alignment")?"map":"text-pitch-alignment"!==a||this.getLayoutProperty("text-pitch-alignment")?f.prototype.getLayoutValue.apply(this,arguments):this.getLayoutValue("text-rotation-alignment")}})},{"../../util/util":403,"../style_layer":342}],349:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":286}],350:[function(a,b,c){"use strict";function d(a,b,c,d){this.declaration=b,this.startTime=this.endTime=(new Date).getTime(),"piecewise-constant"===a["function"]&&a.transition?this.interp=e:this.interp=g[a.type],this.oldTransition=c,this.duration=d.duration||0,this.delay=d.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=f.easeCubicInOut),c&&c.endTime<=this.startTime&&delete c.oldTransition}function e(a,b,c){return void 0===(a&&a.to)||void 0===(b&&b.to)?void 0:{from:a.to,fromScale:a.toScale,to:b.to,toScale:b.toScale,t:c}}var f=a("../util/util"),g=a("../util/interpolate");b.exports=d,d.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},d.prototype.calculate=function(a,b){var c=this.declaration.calculate(f.extend({},a,{duration:this.duration}),b);if(this.instant())return c;var d=a.time||Date.now();if(d<this.endTime){var e=this.oldTransition.calculate(f.extend({},a,{time:this.startTime}),b),g=this.ease((d-this.startTime-this.delay)/this.duration);c=this.interp(e,c,g)}return c}},{"../util/interpolate":397,"../util/util":403}],351:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/lib/validate_style.min"),b.exports.emitErrors=function(a,b){if(b&&b.length){for(var c=0;c<b.length;c++)a.fire("error",{error:new Error(b[c].message)});return!0}return!1},b.exports.throwErrors=function(a,b){if(b)for(var c=0;c<b.length;c++)throw new Error(b[c].message)}},{"mapbox-gl-style-spec/lib/validate_style.min":285}],352:[function(a,b,c){"use strict";function d(a,b,c,d){this.x=a,this.y=b,this.angle=c,void 0!==d&&(this.segment=d)}var e=a("point-geometry");b.exports=d,d.prototype=Object.create(e.prototype),d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)}},{"point-geometry":442}],353:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(void 0===b.segment)return!0;for(var f=b,g=b.segment+1,h=0;h>-c/2;){if(g--,g<0)return!1;h-=a[g].dist(f),f=a[g]}h+=a[g].dist(a[g+1]),g++;for(var i=[],j=0;h<c/2;){var k=a[g-1],l=a[g],m=a[g+1];if(!m)return!1;var n=k.angleTo(l)-l.angleTo(m);for(n=Math.abs((n+3*Math.PI)%(2*Math.PI)-Math.PI),i.push({distance:h,angleDelta:n}),j+=n;h-i[0].distance>d;)j-=i.shift().angleDelta;if(j>e)return!1;g++,h+=l.dist(m)}return!0}b.exports=d},{}],354:[function(a,b,c){"use strict";function d(a,b,c,d,f){for(var g=[],h=0;h<a.length;h++)for(var i,j=a[h],k=0;k<j.length-1;k++){var l=j[k],m=j[k+1];l.x<b&&m.x<b||(l.x<b?l=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round():m.x<b&&(m=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round()),l.y<c&&m.y<c||(l.y<c?l=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round():m.y<c&&(m=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round()),l.x>=d&&m.x>=d||(l.x>=d?l=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round():m.x>=d&&(m=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round()),l.y>=f&&m.y>=f||(l.y>=f?l=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round():m.y>=f&&(m=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round()),i&&l.equals(i[i.length-1])||(i=[l],g.push(i)),i.push(m)))))}return g}var e=a("point-geometry");b.exports=d},{"point-geometry":442}],355:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":401,"../util/util":403,"point-geometry":442}],356:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k){var l=g.top*h-i,m=g.bottom*h+i,n=g.left*h-i,o=g.right*h+i;if(this.boxStartIndex=a.length,j){var p=m-l,q=o-n;if(p>0)if(p=Math.max(10*h,p),k){var r=b[c.segment+1].sub(b[c.segment])._unit()._mult(q),s=[c.sub(r),c.add(r)];this._addLineCollisionBoxes(a,s,c,0,q,p,d,e,f)}else this._addLineCollisionBoxes(a,b,c,c.segment,q,p,d,e,f)}else a.emplaceBack(c.x,c.y,n,l,o,m,1/0,d,e,f,0,0,0,0,0);this.boxEndIndex=a.length}b.exports=d,d.prototype._addLineCollisionBoxes=function(a,b,c,d,e,f,g,h,i){var j=f/2,k=Math.floor(e/j),l=-f/2,m=this.boxes,n=c,o=d+1,p=l;do{if(o--,o<0)return m;p-=b[o].dist(n),n=b[o]}while(p>-e/2);for(var q=b[o].dist(b[o+1]),r=0;r<k;r++){for(var s=-e/2+r*j;p+q<s;){if(p+=q,o++,o+1>=b.length)return m;q=b[o].dist(b[o+1])}var t=s-p,u=b[o],v=b[o+1],w=v.sub(u)._unit()._mult(t)._add(u)._round(),x=Math.max(Math.abs(s-l)-j/2,0),y=e/2/x;a.emplaceBack(w.x,w.y,-f/2,-f/2,f/2,f/2,y,g,h,i,0,0,0,0,0)}return m}},{}],357:[function(a,b,c){"use strict";function d(a,b,c){if("object"==typeof a){var d=a;c=b,a=d.angle,b=d.pitch,this.grid=new g(d.grid),this.ignoredGrid=new g(d.ignoredGrid)}else this.grid=new g(f,12,6),this.ignoredGrid=new g(f,12,0);this.angle=a,this.pitch=b;var e=Math.sin(a),h=Math.cos(a);if(this.rotationMatrix=[h,-e,e,h],this.reverseRotationMatrix=[h,e,-e,h],this.yStretch=1/Math.cos(b/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=c,0===c.length){c.emplaceBack();var i=32767;c.emplaceBack(0,0,0,-i,0,i,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(f,0,0,-i,0,i,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,0,-i,0,i,0,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,f,-i,0,i,0,i,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=c.get(0),this.edges=[c.get(1),c.get(2),c.get(3),c.get(4)]}var e=a("point-geometry"),f=a("../data/bucket").EXTENT,g=a("grid-index");b.exports=d,d.prototype.serialize=function(){var a={angle:this.angle,pitch:this.pitch,grid:this.grid.toArrayBuffer(),ignoredGrid:this.ignoredGrid.toArrayBuffer()};return{data:a,transferables:[a.grid,a.ignoredGrid]}},d.prototype.minScale=.25,d.prototype.maxScale=2,d.prototype.placeCollisionFeature=function(a,b,c){for(var d=this.collisionBoxArray,f=this.minScale,g=this.rotationMatrix,h=this.yStretch,i=a.boxStartIndex;i<a.boxEndIndex;i++){var j=d.get(i),k=j.anchorPoint._matMult(g),l=k.x,m=k.y,n=l+j.x1,o=m+j.y1*h,p=l+j.x2,q=m+j.y2*h;if(j.bbox0=n,j.bbox1=o,j.bbox2=p,j.bbox3=q,!b)for(var r=this.grid.query(n,o,p,q),s=0;s<r.length;s++){var t=d.get(r[s]),u=t.anchorPoint._matMult(g);if(f=this.getPlacementScale(f,k,j,u,t),f>=this.maxScale)return f}if(c){var v;if(this.angle){var w=this.reverseRotationMatrix,x=new e(j.x1,j.y1).matMult(w),y=new e(j.x2,j.y1).matMult(w),z=new e(j.x1,j.y2).matMult(w),A=new e(j.x2,j.y2).matMult(w);v=this.tempCollisionBox,v.anchorPointX=j.anchorPoint.x,v.anchorPointY=j.anchorPoint.y,v.x1=Math.min(x.x,y.x,z.x,A.x),v.y1=Math.min(x.y,y.x,z.x,A.x),v.x2=Math.max(x.x,y.x,z.x,A.x),v.y2=Math.max(x.y,y.x,z.x,A.x),v.maxScale=j.maxScale}else v=j;for(var B=0;B<this.edges.length;B++){var C=this.edges[B];if(f=this.getPlacementScale(f,j.anchorPoint,v,C.anchorPoint,C),f>=this.maxScale)return f}}}return f},d.prototype.queryRenderedSymbols=function(a,b,c,d,f){var g={},h=[],i=this.collisionBoxArray,j=this.rotationMatrix,k=new e(a,b)._matMult(j),l=this.tempCollisionBox;l.anchorX=k.x,l.anchorY=k.y,l.x1=0,l.y1=0,l.x2=c-a,l.y2=d-b,l.maxScale=f,f=l.maxScale;for(var m=[k.x+l.x1/f,k.y+l.y1/f*this.yStretch,k.x+l.x2/f,k.y+l.y2/f*this.yStretch],n=this.grid.query(m[0],m[1],m[2],m[3]),o=this.ignoredGrid.query(m[0],m[1],m[2],m[3]),p=0;p<o.length;p++)n.push(o[p]);for(var q=0;q<n.length;q++){var r=i.get(n[q]),s=r.sourceLayerIndex,t=r.featureIndex;if(void 0===g[s]&&(g[s]={}),!g[s][t]){var u=r.anchorPoint.matMult(j),v=this.getPlacementScale(this.minScale,k,l,u,r);v>=f&&(g[s][t]=!0,h.push(n[q]))}}return h},d.prototype.getPlacementScale=function(a,b,c,d,e){var f=b.x-d.x,g=b.y-d.y,h=(e.x1-c.x2)/f,i=(e.x2-c.x1)/f,j=(e.y1-c.y2)*this.yStretch/g,k=(e.y2-c.y1)*this.yStretch/g;(isNaN(h)||isNaN(i))&&(h=i=1),(isNaN(j)||isNaN(k))&&(j=k=1);var l=Math.min(Math.max(h,i),Math.max(j,k)),m=e.maxScale,n=c.maxScale;return l>m&&(l=m),l>n&&(l=n),l>a&&l>=e.placementScale&&(a=l),a},d.prototype.insertCollisionFeature=function(a,b,c){for(var d=c?this.ignoredGrid:this.grid,e=this.collisionBoxArray,f=a.boxStartIndex;f<a.boxEndIndex;f++){var g=e.get(f);g.placementScale=b,b<this.maxScale&&d.insert(f,g.bbox0,g.bbox1,g.bbox2,g.bbox3)}}},{"../data/bucket":290,"grid-index":252,"point-geometry":442}],358:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){var k=d?.6*g*h:0,l=Math.max(d?d.right-d.left:0,f?f.right-f.left:0),m=0===a[0].x||a[0].x===j||0===a[0].y||a[0].y===j;b-l*h<b/4&&(b=l*h+b/4);var n=2*g,o=m?b/2*i%b:(l/2+n)*h*i%b;return e(a,o,b,k,c,l*h,m,!1,j)}function e(a,b,c,d,i,j,k,l,m){for(var n=j/2,o=0,p=0;p<a.length-1;p++)o+=a[p].dist(a[p+1]);for(var q=0,r=b-c,s=[],t=0;t<a.length-1;t++){for(var u=a[t],v=a[t+1],w=u.dist(v),x=v.angleTo(u);r+c<q+w;){r+=c;var y=(r-q)/w,z=f(u.x,v.x,y),A=f(u.y,v.y,y);if(z>=0&&z<m&&A>=0&&A<m&&r-n>=0&&r+n<=o){var B=new g(z,A,x,t)._round();d&&!h(a,B,j,d,i)||s.push(B)}}q+=w}return l||s.length||k||(s=e(a,q/2,c,d,i,j,k,!0,m)),s}var f=a("../util/interpolate"),g=a("../symbol/anchor"),h=a("./check_max_angle");b.exports=d},{"../symbol/anchor":352,"../util/interpolate":397,"./check_max_angle":353}],359:[function(a,b,c){"use strict";function d(){this.width=h,this.height=h,this.bin=new e(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)}var e=a("shelf-pack"),f=a("../util/util"),g=4,h=128,i=2048;b.exports=d,d.prototype.getGlyphs=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]=[]),d[b].push(c);return d},d.prototype.getRects=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]={}),d[b][c]=this.index[e];return d},d.prototype.addGlyph=function(a,b,c,d){if(!c)return null;var e=b+"#"+c.id;if(this.index[e])return this.ids[e].indexOf(a)<0&&this.ids[e].push(a),this.index[e];if(!c.bitmap)return null;var g=c.width+2*d,h=c.height+2*d,i=1,j=g+2*i,k=h+2*i;j+=4-j%4,k+=4-k%4;var l=this.bin.packOne(j,k);if(l||(this.resize(),l=this.bin.packOne(j,k)),!l)return f.warnOnce("glyph bitmap overflow"),null;this.index[e]=l,this.ids[e]=[a];for(var m=this.data,n=c.bitmap,o=0;o<h;o++)for(var p=this.width*(l.y+o+i)+l.x+i,q=g*o,r=0;r<g;r++)m[p+r]=n[q+r];return this.dirty=!0,l},d.prototype.resize=function(){var a=this.width,b=this.height;if(!(a>=i||b>=i)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=g,this.height*=g,this.bin.resize(this.width,this.height);for(var c=new ArrayBuffer(this.width*this.height),d=0;d<b;d++){var e=new Uint8Array(this.data.buffer,b*d,a),f=new Uint8Array(c,b*d*g,a);f.set(e)}this.data=new Uint8Array(c)}},d.prototype.bind=function(a){this.gl=a,this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,null))},d.prototype.updateTexture=function(a){this.bind(a),this.dirty&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data),this.dirty=!1)}},{"../util/util":403,"shelf-pack":471}],360:[function(a,b,c){"use strict";function d(a){this.url=a&&g(a),this.atlases={},this.stacks={},this.loading={}}function e(a,b,c){var d=1;this.advance=a.advance,this.left=a.left-c-d,this.top=a.top+c+d,this.rect=b}function f(a,b,c,d){return d=d||"abc",c.replace("{s}",d[a.length%d.length]).replace("{fontstack}",a).replace("{range}",b)}var g=a("../util/mapbox").normalizeGlyphsURL,h=a("../util/ajax").getArrayBuffer,i=a("../util/glyphs"),j=a("../symbol/glyph_atlas"),k=a("pbf");b.exports=d,d.prototype.getSimpleGlyphs=function(a,b,c,d){void 0===this.stacks[a]&&(this.stacks[a]={}),void 0===this.atlases[a]&&(this.atlases[a]=new j);for(var f,g={},h=this.stacks[a],i=this.atlases[a],k=3,l={},m=0,n=0;n<b.length;n++){var o=b[n];if(f=Math.floor(o/256),h[f]){var p=h[f].glyphs[o],q=i.addGlyph(c,a,p,k);p&&(g[o]=new e(p,q,k))}else void 0===l[f]&&(l[f]=[],m++),l[f].push(o)}m||d(void 0,g,a);var r=function(b,f,h){if(!b)for(var j=this.stacks[a][f]=h.stacks[0],n=0;n<l[f].length;n++){var o=l[f][n],p=j.glyphs[o],q=i.addGlyph(c,a,p,k);p&&(g[o]=new e(p,q,k))}m--,m||d(void 0,g,a)}.bind(this);for(var s in l)this.loadRange(a,s,r)},d.prototype.loadRange=function(a,b,c){if(256*b>65535)return c("glyphs > 65535 not supported");void 0===this.loading[a]&&(this.loading[a]={});var d=this.loading[a];if(d[b])d[b].push(c);else{d[b]=[c];var e=256*b+"-"+(256*b+255),g=f(a,e,this.url);h(g,function(a,c){for(var e=!a&&new i(new k(new Uint8Array(c))),f=0;f<d[b].length;f++)d[b][f](a,b,e);delete d[b]})}},d.prototype.getGlyphAtlas=function(a){return this.atlases[a]}},{"../symbol/glyph_atlas":359,"../util/ajax":386,"../util/glyphs":396,"../util/mapbox":400,pbf:436}],361:[function(a,b,c){"use strict";b.exports=function(a,b,c){function d(d){k.push(a[d]),l.push(c[d]),m.push(b[d]),n++}function e(a,b,c){var d=j[a];return delete j[a],j[b]=d,l[d][0].pop(),l[d][0]=l[d][0].concat(c[0]),d}function f(a,b,c){var d=i[b];return delete i[b],i[a]=d,l[d][0].shift(),l[d][0]=c[0].concat(l[d][0]),d}function g(a,b,c){var d=c?b[0][b[0].length-1]:b[0][0];return a+":"+d.x+":"+d.y}var h,i={},j={},k=[],l=[],m=[],n=0;for(h=0;h<a.length;h++){var o=c[h],p=b[h];if(p){var q=g(p,o),r=g(p,o,!0);if(q in j&&r in i&&j[q]!==i[r]){var s=f(q,r,o),t=e(q,r,l[s]);delete i[q],delete j[r],j[g(p,l[t],!0)]=t,l[s]=null}else q in j?e(q,r,o):r in i?f(q,r,o):(d(h),i[q]=n-1,j[r]=n-1)}else d(h)}return{features:k,textFeatures:m,geometries:l}}},{}],362:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){this.anchorPoint=a,this.tl=b,this.tr=c,this.bl=d,this.br=e,this.tex=f,this.anchorAngle=g,this.glyphAngle=h,this.minScale=i,this.maxScale=j}function e(a,b,c,e,f,g,j,k,l){var m,n,o,p,q=b.image.rect,r=f.layout,s=1,t=b.left-s,u=t+q.w/b.image.pixelRatio,v=b.top-s,w=v+q.h/b.image.pixelRatio;if("none"!==r["icon-text-fit"]&&j){var x=u-t,y=w-v,z=r["text-size"]/24,A=j.left*z,B=j.right*z,C=j.top*z,D=j.bottom*z,E=B-A,F=D-C,G=r["icon-text-fit-padding"][0],H=r["icon-text-fit-padding"][1],I=r["icon-text-fit-padding"][2],J=r["icon-text-fit-padding"][3],K="width"===r["icon-text-fit"]?.5*(F-y):0,L="height"===r["icon-text-fit"]?.5*(E-x):0,M="width"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?E:x,N="height"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?F:y;m=new h(A+L-J,C+K-G),n=new h(A+L+H+M,C+K-G),o=new h(A+L+H+M,C+K+I+N),p=new h(A+L-J,C+K+I+N)}else m=new h(t,v),n=new h(u,v),o=new h(u,w),p=new h(t,w);var O=f.getLayoutValue("icon-rotate",k,l)*Math.PI/180;if(g){var P=e[a.segment];if(a.y===P.y&&a.x===P.x&&a.segment+1<e.length){var Q=e[a.segment+1];O+=Math.atan2(a.y-Q.y,a.x-Q.x)+Math.PI}else O+=Math.atan2(a.y-P.y,a.x-P.x)}if(O){var R=Math.sin(O),S=Math.cos(O),T=[S,-R,R,S];m=m.matMult(T),n=n.matMult(T),p=p.matMult(T),o=o.matMult(T)}return[new d(new h(a.x,a.y),m,n,p,o,b.image.rect,0,0,i,1/0)]}function f(a,b,c,e,f,j){for(var k=f.layout["text-rotate"]*Math.PI/180,l=f.layout["text-keep-upright"],m=b.positionedGlyphs,n=[],o=0;o<m.length;o++){var p=m[o],q=p.glyph,r=q.rect;if(r){var s,t=(p.x+q.advance/2)*c,u=i;j?(s=[],u=g(s,a,t,e,a.segment,!0),l&&(u=Math.min(u,g(s,a,t,e,a.segment,!1)))):s=[{anchorPoint:new h(a.x,a.y),offset:0,angle:0,maxScale:1/0,minScale:i}];for(var v=p.x+q.left,w=p.y-q.top,x=v+r.w,y=w+r.h,z=new h(v,w),A=new h(x,w),B=new h(v,y),C=new h(x,y),D=0;D<s.length;D++){var E=s[D],F=z,G=A,H=B,I=C;if(k){var J=Math.sin(k),K=Math.cos(k),L=[K,-J,J,K];F=F.matMult(L),G=G.matMult(L),H=H.matMult(L),I=I.matMult(L)}var M=Math.max(E.minScale,u),N=(a.angle+E.offset+2*Math.PI)%(2*Math.PI),O=(E.angle+E.offset+2*Math.PI)%(2*Math.PI);n.push(new d(E.anchorPoint,F,G,H,I,r,N,O,M,E.maxScale))}}}return n}function g(a,b,c,d,e,f){var g=!f;c<0&&(f=!f),f&&e++;var j=new h(b.x,b.y),k=d[e],l=1/0;c=Math.abs(c);for(var m=i;;){var n=j.dist(k),o=c/n,p=Math.atan2(k.y-j.y,k.x-j.x);if(f||(p+=Math.PI),a.push({anchorPoint:j,offset:g?Math.PI:0,minScale:o,maxScale:l,angle:(p+2*Math.PI)%(2*Math.PI)}),o<=m)break;for(j=k;j.equals(k);)if(e+=f?1:-1,k=d[e],!k)return o;var q=k.sub(j)._unit();j=j.sub(q._mult(n)),l=o}return m}var h=a("point-geometry");b.exports={getIconQuads:e,getGlyphQuads:f,SymbolQuad:d};var i=.5},{"point-geometry":442}],363:[function(a,b,c){"use strict";function d(a,b,c){for(var d=[],f=0,g=a.length;f<g;f++){var h=e(a[f].properties,b["text-field"]);if(h){h=h.toString();var i=b["text-transform"];"uppercase"===i?h=h.toLocaleUpperCase():"lowercase"===i&&(h=h.toLocaleLowerCase());for(var j=0;j<h.length;j++)c[h.charCodeAt(j)]=!0;d[f]=h}else d[f]=null}return d}var e=a("../util/token");b.exports=d},{"../util/token":402}],364:[function(a,b,c){"use strict";function d(a,b,c,d){this.codePoint=a,this.x=b,this.y=c,this.glyph=d}function e(a,b,c,d,e,f){this.positionedGlyphs=a,this.text=b,this.top=c,this.bottom=d,this.left=e,this.right=f}function f(a,b,c,f,h,i,j,k,l){for(var m=[],n=new e(m,a,l[1],l[1],l[0],l[0]),o=-17,p=0,q=o,r=0;r<a.length;r++){var s=a.charCodeAt(r),t=b[s];t&&(m.push(new d(s,p,q,t)),p+=t.advance+k)}return!!m.length&&(g(n,b,f,c,h,i,j,l),n)}function g(a,b,c,d,e,f,g,j){var k=null,n=0,o=0,p=0,q=0,r=a.positionedGlyphs;if(d)for(var s=0;s<r.length;s++){var t=r[s];if(t.x-=n,t.y+=c*p,t.x>d&&null!==k){var u=r[k+1].x;q=Math.max(u,q);for(var v=k+1;v<=s;v++)r[v].y+=c,r[v].x-=u;if(g){var w=k;l[r[k].codePoint]&&w--,h(r,b,o,w,g)}o=k+1,k=null,n+=u,p++}m[t.codePoint]&&(k=s)}var x=r[r.length-1],y=x.x+b[x.codePoint].advance;q=Math.max(q,y);var z=(p+1)*c;h(r,b,o,r.length-1,g),i(r,g,e,f,q,c,p,j),a.top+=-f*z,
a.bottom=a.top+z,a.left+=-e*q,a.right=a.left+q}function h(a,b,c,d,e){for(var f=b[a[d].codePoint].advance,g=(a[d].x+f)*e,h=c;h<=d;h++)a[h].x-=g}function i(a,b,c,d,e,f,g,h){for(var i=(b-c)*e+h[0],j=(-d*(g+1)+.5)*f+h[1],k=0;k<a.length;k++)a[k].x+=i,a[k].y+=j}function j(a,b){if(!a||!a.rect)return null;var c=b["icon-offset"][0],d=b["icon-offset"][1],e=c-a.width/2,f=e+a.width,g=d-a.height/2,h=g+a.height;return new k(a,g,h,e,f)}function k(a,b,c,d,e){this.image=a,this.top=b,this.bottom=c,this.left=d,this.right=e}b.exports={shapeText:f,shapeIcon:j};var l={32:!0,8203:!0},m={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0}},{}],365:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.bin=new g(a,b),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function e(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=d*b+c,o=h*f+g;if(k)for(o-=f,m=-1;m<=j;m++,n=((m+j)%j+d)*b+c,o+=f)for(l=-1;l<=i;l++)e[o+l]=a[n+(l+i)%i];else for(m=0;m<j;m++,n+=b,o+=f)for(l=0;l<i;l++)e[o+l]=a[n+l]}function f(a,b,c,d,e){this.rect=a,this.width=b,this.height=c,this.sdf=d,this.pixelRatio=e}var g=a("shelf-pack"),h=a("../util/browser"),i=a("../util/util");b.exports=d,d.prototype.allocateImage=function(a,b){a/=this.pixelRatio,b/=this.pixelRatio;var c=2,d=a+c+(4-(a+c)%4),e=b+c+(4-(b+c)%4),f=this.bin.packOne(d,e);return f?f:(i.warnOnce("SpriteAtlas out of space."),null)},d.prototype.getImage=function(a,b){if(this.images[a])return this.images[a];if(!this.sprite)return null;var c=this.sprite.getSpritePosition(a);if(!c.width||!c.height)return null;var d=this.allocateImage(c.width,c.height);if(!d)return null;var e=new f(d,c.width/c.pixelRatio,c.height/c.pixelRatio,c.sdf,c.pixelRatio/this.pixelRatio);return this.images[a]=e,this.copy(d,c,b),e},d.prototype.getPosition=function(a,b){var c=this.getImage(a,b),d=c&&c.rect;if(!d)return null;var e=c.width*c.pixelRatio,f=c.height*c.pixelRatio,g=1;return{size:[c.width,c.height],tl:[(d.x+g)/this.width,(d.y+g)/this.height],br:[(d.x+g+e)/this.width,(d.y+g+f)/this.height]}},d.prototype.allocate=function(){if(!this.data){var a=Math.floor(this.width*this.pixelRatio),b=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(a*b);for(var c=0;c<this.data.length;c++)this.data[c]=0}},d.prototype.copy=function(a,b,c){if(this.sprite.img.data){var d=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var f=this.data,g=1;e(d,this.sprite.img.width,b.x,b.y,f,this.width*this.pixelRatio,(a.x+g)*this.pixelRatio,(a.y+g)*this.pixelRatio,b.width,b.height,c),this.dirty=!0}},d.prototype.setSprite=function(a){a&&(this.pixelRatio=h.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=a},d.prototype.addIcons=function(a,b){for(var c=0;c<a.length;c++)this.getImage(a[c]);b(null,this.images)},d.prototype.bind=function(a,b){var c=!1;this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),c=!0);var d=b?a.LINEAR:a.NEAREST;d!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d),this.filter=d),this.dirty&&(this.allocate(),c?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)}},{"../util/browser":387,"../util/util":403,"shelf-pack":471}],366:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":401,"../util/util":403,"point-geometry":442}],367:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=a("./quads").SymbolQuad,h=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"}]});e.extendAll(h.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)},get SymbolQuad(){return new g(this.anchorPoint,new f(this.tlX,this.tlY),new f(this.trX,this.trY),new f(this.blX,this.blY),new f(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale)}})},{"../util/struct_array":401,"../util/util":403,"./quads":362,"point-geometry":442}],368:[function(a,b,c){"use strict";var d=a("../util/dom"),e=a("point-geometry"),f={scrollZoom:a("./handler/scroll_zoom"),boxZoom:a("./handler/box_zoom"),dragRotate:a("./handler/drag_rotate"),dragPan:a("./handler/drag_pan"),keyboard:a("./handler/keyboard"),doubleClickZoom:a("./handler/dblclick_zoom"),touchZoomRotate:a("./handler/touch_zoom_rotate")};b.exports=function(a,b){function c(a){r("mouseout",a)}function g(b){a.stop(),v=d.mousePos(t,b),r("mousedown",b)}function h(b){var c=a.dragRotate&&a.dragRotate.isActive();u&&!c&&r("contextmenu",u),u=null,r("mouseup",b)}function i(b){if(!(a.dragPan&&a.dragPan.isActive()||a.dragRotate&&a.dragRotate.isActive())){for(var c=b.toElement||b.target;c&&c!==t;)c=c.parentNode;c===t&&r("mousemove",b)}}function j(b){a.stop(),s("touchstart",b),!b.touches||b.touches.length>1||(w?(clearTimeout(w),w=null,r("dblclick",b)):w=setTimeout(n,300))}function k(a){s("touchmove",a)}function l(a){s("touchend",a)}function m(a){s("touchcancel",a)}function n(){w=null}function o(a){var b=d.mousePos(t,a);b.equals(v)&&r("click",a)}function p(a){r("dblclick",a),a.preventDefault()}function q(a){u=a,a.preventDefault()}function r(b,c){var e=d.mousePos(t,c);return a.fire(b,{lngLat:a.unproject(e),point:e,originalEvent:c})}function s(b,c){var f=d.touchPos(t,c),g=f.reduce(function(a,b,c,d){return a.add(b.div(d.length))},new e(0,0));return a.fire(b,{lngLat:a.unproject(g),point:g,lngLats:f.map(function(b){return a.unproject(b)},this),points:f,originalEvent:c})}var t=a.getCanvasContainer(),u=null,v=null,w=null;for(var x in f)a[x]=new f[x](a,b),b.interactive&&b[x]&&a[x].enable();t.addEventListener("mouseout",c,!1),t.addEventListener("mousedown",g,!1),t.addEventListener("mouseup",h,!1),t.addEventListener("mousemove",i,!1),t.addEventListener("touchstart",j,!1),t.addEventListener("touchend",l,!1),t.addEventListener("touchmove",k,!1),t.addEventListener("touchcancel",m,!1),t.addEventListener("click",o,!1),t.addEventListener("dblclick",p,!1),t.addEventListener("contextmenu",q,!1)}},{"../util/dom":389,"./handler/box_zoom":374,"./handler/dblclick_zoom":375,"./handler/drag_pan":376,"./handler/drag_rotate":377,"./handler/keyboard":378,"./handler/scroll_zoom":379,"./handler/touch_zoom_rotate":380,"point-geometry":442}],369:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/interpolate"),f=a("../util/browser"),g=a("../geo/lng_lat"),h=a("../geo/lng_lat_bounds"),i=a("point-geometry"),j=b.exports=function(){};d.extend(j.prototype,{getCenter:function(){return this.transform.center},setCenter:function(a,b){return this.jumpTo({center:a},b),this},panBy:function(a,b,c){return this.panTo(this.transform.center,d.extend({offset:i.convert(a).mult(-1)},b),c),this},panTo:function(a,b,c){return this.easeTo(d.extend({center:a},b),c)},getZoom:function(){return this.transform.zoom},setZoom:function(a,b){return this.jumpTo({zoom:a},b),this},zoomTo:function(a,b,c){return this.easeTo(d.extend({zoom:a},b),c)},zoomIn:function(a,b){return this.zoomTo(this.getZoom()+1,a,b),this},zoomOut:function(a,b){return this.zoomTo(this.getZoom()-1,a,b),this},getBearing:function(){return this.transform.bearing},setBearing:function(a,b){return this.jumpTo({bearing:a},b),this},rotateTo:function(a,b,c){return this.easeTo(d.extend({bearing:a},b),c)},resetNorth:function(a,b){return this.rotateTo(0,d.extend({duration:1e3},a),b),this},snapToNorth:function(a,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,b):this},getPitch:function(){return this.transform.pitch},setPitch:function(a,b){return this.jumpTo({pitch:a},b),this},fitBounds:function(a,b,c){b=d.extend({padding:0,offset:[0,0],maxZoom:1/0},b),a=h.convert(a);var e=i.convert(b.offset),f=this.transform,g=f.project(a.getNorthWest()),j=f.project(a.getSouthEast()),k=j.sub(g),l=(f.width-2*b.padding-2*Math.abs(e.x))/k.x,m=(f.height-2*b.padding-2*Math.abs(e.y))/k.y;return b.center=f.unproject(g.add(j).div(2)),b.zoom=Math.min(f.scaleZoom(f.scale*Math.min(l,m)),b.maxZoom),b.bearing=0,b.linear?this.easeTo(b,c):this.flyTo(b,c)},jumpTo:function(a,b){this.stop();var c=this.transform,d=!1,e=!1,f=!1;return"zoom"in a&&c.zoom!==+a.zoom&&(d=!0,c.zoom=+a.zoom),"center"in a&&(c.center=g.convert(a.center)),"bearing"in a&&c.bearing!==+a.bearing&&(e=!0,c.bearing=+a.bearing),"pitch"in a&&c.pitch!==+a.pitch&&(f=!0,c.pitch=+a.pitch),this.fire("movestart",b).fire("move",b),d&&this.fire("zoomstart",b).fire("zoom",b).fire("zoomend",b),e&&this.fire("rotate",b),f&&this.fire("pitch",b),this.fire("moveend",b)},easeTo:function(a,b){this.stop(),a=d.extend({offset:[0,0],duration:500,easing:d.ease},a);var c,f,h=this.transform,j=i.convert(a.offset),k=this.getZoom(),l=this.getBearing(),m=this.getPitch(),n="zoom"in a?+a.zoom:k,o="bearing"in a?this._normalizeBearing(a.bearing,l):l,p="pitch"in a?+a.pitch:m;"center"in a?(c=g.convert(a.center),f=h.centerPoint.add(j)):"around"in a?(c=g.convert(a.around),f=h.locationPoint(c)):(f=h.centerPoint.add(j),c=h.pointLocation(f));var q=h.locationPoint(c);return a.animate===!1&&(a.duration=0),this.zooming=n!==k,this.rotating=l!==o,this.pitching=p!==m,a.noMoveStart||this.fire("movestart",b),this.zooming&&this.fire("zoomstart",b),clearTimeout(this._onEaseEnd),this._ease(function(a){this.zooming&&(h.zoom=e(k,n,a)),this.rotating&&(h.bearing=e(l,o,a)),this.pitching&&(h.pitch=e(m,p,a)),h.setLocationAtPoint(c,q.add(f.sub(q)._mult(a))),this.fire("move",b),this.zooming&&this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){a.delayEndEvents?this._onEaseEnd=setTimeout(this._easeToEnd.bind(this,b),a.delayEndEvents):this._easeToEnd(b)}.bind(this),a),this},_easeToEnd:function(a){var b=this.zooming;this.zooming=!1,this.rotating=!1,this.pitching=!1,b&&this.fire("zoomend",a),this.fire("moveend",a)},flyTo:function(a,b){function c(a){var b=(z*z-y*y+(a?-1:1)*D*D*A*A)/(2*(a?z:y)*D*A);return Math.log(Math.sqrt(b*b+1)-b)}function f(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function j(a){return f(a)/h(a)}this.stop(),a=d.extend({offset:[0,0],speed:1.2,curve:1.42,easing:d.ease},a);var k=this.transform,l=i.convert(a.offset),m=this.getZoom(),n=this.getBearing(),o=this.getPitch(),p="center"in a?g.convert(a.center):this.getCenter(),q="zoom"in a?+a.zoom:m,r="bearing"in a?this._normalizeBearing(a.bearing,n):n,s="pitch"in a?+a.pitch:o;Math.abs(k.center.lng)+Math.abs(p.lng)>180&&(k.center.lng>0&&p.lng<0?p.lng+=360:k.center.lng<0&&p.lng>0&&(p.lng-=360));var t=k.zoomScale(q-m),u=k.point,v="center"in a?k.project(p).sub(l.div(t)):u,w=k.worldSize,x=a.curve,y=Math.max(k.width,k.height),z=y/t,A=v.sub(u).mag();if("minZoom"in a){var B=d.clamp(Math.min(a.minZoom,m,q),k.minZoom,k.maxZoom),C=y/k.zoomScale(B-m);x=Math.sqrt(C/A*2)}var D=x*x,E=c(0),F=function(a){return h(E)/h(E+x*a)},G=function(a){return y*((h(E)*j(E+x*a)-f(E))/D)/A},H=(c(1)-E)/x;if(Math.abs(A)<1e-6){if(Math.abs(y-z)<1e-6)return this.easeTo(a);var I=z<y?-1:1;H=Math.abs(Math.log(z/y))/x,G=function(){return 0},F=function(a){return Math.exp(I*x*a)}}if("duration"in a)a.duration=+a.duration;else{var J="screenSpeed"in a?+a.screenSpeed/x:+a.speed;a.duration=1e3*H/J}return this.zooming=!0,n!==r&&(this.rotating=!0),o!==s&&(this.pitching=!0),this.fire("movestart",b),this.fire("zoomstart",b),this._ease(function(a){var c=a*H,d=G(c);k.zoom=m+k.scaleZoom(1/F(c)),k.center=k.unproject(u.add(v.sub(u).mult(d)),w),this.rotating&&(k.bearing=e(n,r,a)),this.pitching&&(k.pitch=e(o,s,a)),this.fire("move",b),this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",b),this.fire("moveend",b)},a),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(a,b,c){this._finishFn=b,this._abortFn=f.timed(function(b){a.call(this,c.easing(b)),1===b&&this._finishEase()},c.animate===!1?0:c.duration,this)},_finishEase:function(){delete this._abortFn;var a=this._finishFn;delete this._finishFn,a.call(this)},_normalizeBearing:function(a,b){a=d.wrap(a,-180,180);var c=Math.abs(a-b);return Math.abs(a-360-b)<c&&(a-=360),Math.abs(a+360-b)<c&&(a+=360),a},_updateEasing:function(a,b,c){var e;if(this.ease){var f=this.ease,g=(Date.now()-f.start)/f.duration,h=f.easing(g+.01)-f.easing(g),i=.27/Math.sqrt(h*h+1e-4)*.01,j=Math.sqrt(.0729-i*i);e=d.bezier(i,j,.25,1)}else e=c?d.bezier.apply(d,c):d.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,b),duration:a,easing:e},e}})},{"../geo/lng_lat":300,"../geo/lng_lat_bounds":301,"../util/browser":387,"../util/interpolate":397,"../util/util":403,"point-geometry":442}],370:[function(a,b,c){"use strict";function d(a){g.setOptions(this,a)}var e=a("./control"),f=a("../../util/dom"),g=a("../../util/util");b.exports=d,d.createAttributionString=function(a){var b=[];for(var c in a){var d=a[c];d.attribution&&b.indexOf(d.attribution)<0&&b.push(d.attribution)}return b.sort(function(a,b){return a.length-b.length}),b=b.filter(function(a,c){for(var d=c+1;d<b.length;d++)if(b[d].indexOf(a)>=0)return!1;return!0}),b.join(" | ")},d.prototype=g.inherit(e,{options:{position:"bottom-right"},onAdd:function(a){var b="mapboxgl-ctrl-attrib",c=this._container=f.create("div",b,a.getContainer());return this._update(),a.on("source.load",this._update.bind(this)),a.on("source.change",this._update.bind(this)),a.on("source.remove",this._update.bind(this)),a.on("moveend",this._updateEditLink.bind(this)),c},_update:function(){this._map.style&&(this._container.innerHTML=d.createAttributionString(this._map.style.sources)),this._editLink=this._container.getElementsByClassName("mapbox-improve-map")[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var a=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+a.lng+"/"+a.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":389,"../../util/util":403,"./control":371}],371:[function(a,b,c){"use strict";function d(){}var e=a("../../util/util"),f=a("../../util/evented");b.exports=d,d.prototype={addTo:function(a){this._map=a;var b=this._container=this.onAdd(a);if(this.options&&this.options.position){var c=this.options.position,d=a._controlCorners[c];b.className+=" mapboxgl-ctrl",c.indexOf("bottom")!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}},e.extend(d.prototype,f)},{"../../util/evented":395,"../../util/util":403}],372:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}var e=a("./control"),f=a("../../util/browser"),g=a("../../util/dom"),h=a("../../util/util");b.exports=d;var i={enableHighAccuracy:!1,timeout:6e3};d.prototype=h.inherit(e,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return f.supportsGeolocation?(this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._geolocateButton=g.create("button",b+"-icon "+b+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),c):c},_onContextMenu:function(a){a.preventDefault()},_onClickGeolocate:function(){navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this),i),this._timeoutId=setTimeout(this._finish.bind(this),1e4)},_success:function(a){this._map.jumpTo({center:[a.coords.longitude,a.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",a),this._finish()},_error:function(a){this.fire("error",a),this._finish()},_finish:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}})},{"../../util/browser":387,"../../util/dom":389,"../../util/util":403,"./control":371}],373:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}function e(a){return new MouseEvent(a.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:a.detail,view:a.view,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,movementX:a.movementX,movementY:a.movementY,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,altKey:a.altKey,metaKey:a.metaKey})}var f=a("./control"),g=a("../../util/dom"),h=a("../../util/util");b.exports=d,d.prototype=h.inherit(f,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(b+"-icon "+b+"-zoom-in",a.zoomIn.bind(a)),this._zoomOutButton=this._createButton(b+"-icon "+b+"-zoom-out",a.zoomOut.bind(a)),this._compass=this._createButton(b+"-icon "+b+"-compass",a.resetNorth.bind(a)),this._compassArrow=g.create("div","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),a.on("rotate",this._rotateCompassArrow.bind(this)),this._rotateCompassArrow(),this._el=a.getCanvasContainer(),c},_onContextMenu:function(a){a.preventDefault()},_onCompassDown:function(a){0===a.button&&(g.disableDrag(),document.addEventListener("mousemove",this._onCompassMove),document.addEventListener("mouseup",this._onCompassUp),this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassMove:function(a){0===a.button&&(this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassUp:function(a){0===a.button&&(document.removeEventListener("mousemove",this._onCompassMove),document.removeEventListener("mouseup",this._onCompassUp),g.enableDrag(),this._el.dispatchEvent(e(a)),a.stopPropagation())},_createButton:function(a,b){var c=g.create("button",a,this._container);return c.type="button",c.addEventListener("click",function(){b()}),c},_rotateCompassArrow:function(){var a="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=a}})},{"../../util/dom":389,"../../util/util":403,"./control":371}],374:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../geo/lng_lat_bounds"),g=a("../../util/util");b.exports=d,d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(a){a.shiftKey&&0===a.button&&(document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("mouseup",this._onMouseUp,!1),e.disableDrag(),this._startPos=e.mousePos(this._el,a),this._active=!0)},_onMouseMove:function(a){var b=this._startPos,c=e.mousePos(this._el,a);this._box||(this._box=e.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));var d=Math.min(b.x,c.x),f=Math.max(b.x,c.x),g=Math.min(b.y,c.y),h=Math.max(b.y,c.y);e.setTransform(this._box,"translate("+d+"px,"+g+"px)"),this._box.style.width=f-d+"px",this._box.style.height=h-g+"px"},_onMouseUp:function(a){if(0===a.button){var b=this._startPos,c=e.mousePos(this._el,a),d=new f(this._map.unproject(b),this._map.unproject(c));this._finish(),b.x===c.x&&b.y===c.y?this._fireEvent("boxzoomcancel",a):this._map.fitBounds(d,{linear:!0}).fire("boxzoomend",{originalEvent:a,boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",a))},_finish:function(){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),e.enableDrag()},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})}}},{"../../geo/lng_lat_bounds":301,"../../util/dom":389,"../../util/util":403}],375:[function(a,b,c){"use strict";function d(a){this._map=a,this._onDblClick=this._onDblClick.bind(this)}b.exports=d,d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},_onDblClick:function(a){this._map.zoomTo(this._map.getZoom()+(a.originalEvent.shiftKey?-1:1),{around:a.lngLat},a)}}},{}],376:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util");b.exports=d;var g=.3,h=f.bezier(0,0,g,1),i=1400,j=2500;d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},_onDown:function(a){this._ignoreEvent(a)||this.isActive()||(a.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=e.mousePos(this._el,a),this._inertia=[[Date.now(),this._pos]])},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",a),this._fireEvent("movestart",a));var b=e.mousePos(this._el,a),c=this._map;c.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),b]),c.transform.setLocationAtPoint(c.transform.pointLocation(this._pos),b),this._fireEvent("drag",a),this._fireEvent("move",a),this._pos=b,a.preventDefault()}},_onUp:function(a){if(this.isActive()){this._active=!1,this._fireEvent("dragend",a),this._drainInertiaBuffer();var b=function(){this._fireEvent("moveend",a)}.bind(this),c=this._inertia;if(c.length<2)return void b();var d=c[c.length-1],e=c[0],f=d[1].sub(e[1]),k=(d[0]-e[0])/1e3;if(0===k||d[1].equals(e[1]))return void b();var l=f.mult(g/k),m=l.mag();m>i&&(m=i,l._unit()._mult(m));var n=m/(j*g),o=l.mult(-n/2);this._map.panBy(o,{duration:1e3*n,easing:h,noMoveStart:!0},{originalEvent:a})}},_onMouseUp:function(a){this._ignoreEvent(a)||(this._onUp(a),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp))},_onTouchEnd:function(a){this._ignoreEvent(a)||(this._onUp(a),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd))},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragRotate&&b.dragRotate.isActive())return!0;if(a.touches)return a.touches.length>1;if(a.ctrlKey)return!0;var c=1,d=0;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>0&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":389,"../../util/util":403}],377:[function(a,b,c){"use strict";function d(a,b){this._map=a,this._el=a.getCanvasContainer(),this._bearingSnap=b.bearingSnap,g.bindHandlers(this)}var e=a("../../util/dom"),f=a("point-geometry"),g=a("../../util/util");b.exports=d;var h=.25,i=g.bezier(0,0,h,1),j=180,k=720;d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},_onDown:function(a){if(!this._ignoreEvent(a)&&!this.isActive()){document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=e.mousePos(this._el,a),this._center=this._map.transform.centerPoint;var b=this._startPos.sub(this._center),c=b.mag();c<200&&(this._center=this._startPos.add(new f((-200),0)._rotate(b.angle()))),a.preventDefault()}},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",a),this._fireEvent("movestart",a));var b=this._map;b.stop();var c=this._pos,d=e.mousePos(this._el,a),f=this._center,g=c.sub(f).angleWith(d.sub(f))/Math.PI*180,h=b.getBearing()-g,i=this._inertia,j=i[i.length-1];this._drainInertiaBuffer(),i.push([Date.now(),b._normalizeBearing(h,j[1])]),b.transform.bearing=h,this._fireEvent("rotate",a),this._fireEvent("move",a),this._pos=d}},_onUp:function(a){if(!this._ignoreEvent(a)&&(document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",a),this._drainInertiaBuffer();var b=this._map,c=b.getBearing(),d=this._inertia,e=function(){Math.abs(c)<this._bearingSnap?b.resetNorth({noMoveStart:!0},{originalEvent:a}):this._fireEvent("moveend",a)}.bind(this);if(d.length<2)return void e();var f=d[0],g=d[d.length-1],l=d[d.length-2],m=b._normalizeBearing(c,l[1]),n=g[1]-f[1],o=n<0?-1:1,p=(g[0]-f[0])/1e3;if(0===n||0===p)return void e();var q=Math.abs(n*(h/p));q>j&&(q=j);var r=q/(k*h),s=o*q*(r/2);m+=s,Math.abs(b._normalizeBearing(m,0))<this._bearingSnap&&(m=b._normalizeBearing(0,m)),b.rotateTo(m,{duration:1e3*r,easing:i,noMoveStart:!0},{originalEvent:a})}},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragPan&&b.dragPan.isActive())return!0;if(a.touches)return a.touches.length>1;var c=a.ctrlKey?1:2,d=a.ctrlKey?0:2;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>0&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":389,"../../util/util":403,"point-geometry":442}],378:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}b.exports=d;var e=80,f=2,g=5;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=this._map,c={originalEvent:a};if(!b.isEasing())switch(a.keyCode){case 61:case 107:case 171:case 187:b.zoomTo(Math.round(b.getZoom())+(a.shiftKey?2:1),c);break;case 189:case 109:case 173:b.zoomTo(Math.round(b.getZoom())-(a.shiftKey?2:1),c);break;case 37:a.shiftKey?b.easeTo({bearing:b.getBearing()-f},c):(a.preventDefault(),b.panBy([-e,0],c));break;case 39:a.shiftKey?b.easeTo({bearing:b.getBearing()+f},c):(a.preventDefault(),b.panBy([e,0],c));break;case 38:a.shiftKey?b.easeTo({pitch:b.getPitch()+g},c):(a.preventDefault(),b.panBy([0,-e],c));break;case 40:a.shiftKey?b.easeTo({pitch:Math.max(b.getPitch()-g,0)},c):(a.preventDefault(),b.panBy([0,e],c))}}}}},{}],379:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/browser"),g=a("../../util/util");b.exports=d;var h="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=h.indexOf("firefox")!==-1,j=h.indexOf("safari")!==-1&&h.indexOf("chrom")===-1;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},_onWheel:function(a){var b;"wheel"===a.type?(b=a.deltaY,i&&a.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(b/=f.devicePixelRatio),a.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(b*=40)):"mousewheel"===a.type&&(b=-a.wheelDeltaY,j&&(b/=3));var c=f.now(),d=c-(this._time||0);this._pos=e.mousePos(this._el,a),this._time=c,0!==b&&b%4.000244140625===0?(this._type="wheel",b=Math.floor(b/4)):0!==b&&Math.abs(b)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(d*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),a.shiftKey&&b&&(b/=4),this._type&&this._zoom(-b,a),a.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(a,b){if(0!==a){var c=this._map,d=2/(1+Math.exp(-Math.abs(a/100)));a<0&&0!==d&&(d=1/d);var e=c.ease?c.ease.to:c.transform.scale,f=c.transform.scaleZoom(e*d);c.zoomTo(f,{duration:0,around:c.unproject(this._pos),delayEndEvents:200},{originalEvent:b})}}}},{"../../util/browser":387,"../../util/dom":389,"../../util/util":403}],380:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util");b.exports=d;var g=.15,h=f.bezier(0,0,g,1),i=12,j=2.5,k=.15,l=4;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},disableRotation:function(){this._rotationDisabled=!0},enableRotation:function(){this._rotationDisabled=!1},_onStart:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]);
this._startVec=b.sub(c),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]),d=b.add(c).div(2),f=b.sub(c),g=f.mag()/this._startVec.mag(),h=this._rotationDisabled?0:180*f.angleWith(this._startVec)/Math.PI,i=this._map;if(this._gestureIntent){var j={duration:0,around:i.unproject(d)};"rotate"===this._gestureIntent&&(j.bearing=this._startBearing+h),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(j.zoom=i.transform.scaleZoom(this._startScale*g)),i.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),g,d]),i.easeTo(j,{originalEvent:a})}else{var m=Math.abs(1-g)>k,n=Math.abs(h)>l;n?this._gestureIntent="rotate":m&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=f,this._startScale=i.transform.scale,this._startBearing=i.transform.bearing)}a.preventDefault()}},_onEnd:function(a){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var b=this._inertia,c=this._map;if(b.length<2)return void c.snapToNorth({},{originalEvent:a});var d=b[b.length-1],e=b[0],f=c.transform.scaleZoom(this._startScale*d[1]),k=c.transform.scaleZoom(this._startScale*e[1]),l=f-k,m=(d[0]-e[0])/1e3,n=d[2];if(0===m||f===k)return void c.snapToNorth({},{originalEvent:a});var o=l*g/m;Math.abs(o)>j&&(o=o>0?j:-j);var p=1e3*Math.abs(o/(i*g)),q=f+o*p/2e3;q<0&&(q=0),c.easeTo({zoom:q,duration:p,easing:h,around:c.unproject(n)},{originalEvent:a})},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>2&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":389,"../../util/util":403}],381:[function(a,b,c){"use strict";function d(){e.bindAll(["_onHashChange","_updateHash"],this)}b.exports=d;var e=a("../util/util");d.prototype={addTo:function(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},_onHashChange:function(){var a=location.hash.replace("#","").split("/");return a.length>=3&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0)}),!0)},_updateHash:function(){var a=this._map.getCenter(),b=this._map.getZoom(),c=this._map.getBearing(),d=Math.max(0,Math.ceil(Math.log(b)/Math.LN2)),e="#"+Math.round(100*b)/100+"/"+a.lat.toFixed(d)+"/"+a.lng.toFixed(d)+(c?"/"+Math.round(10*c)/10:"");window.history.replaceState("","",e)}}},{"../util/util":403}],382:[function(a,b,c){"use strict";function d(a){a.parentNode&&a.parentNode.removeChild(a)}var e=a("../util/canvas"),f=a("../util/util"),g=a("../util/browser"),h=a("../util/browser").window,i=a("../util/evented"),j=a("../util/dom"),k=a("../style/style"),l=a("../style/animation_loop"),m=a("../render/painter"),n=a("../geo/transform"),o=a("./hash"),p=a("./bind_handlers"),q=a("./camera"),r=a("../geo/lng_lat"),s=a("../geo/lng_lat_bounds"),t=a("point-geometry"),u=a("./control/attribution"),v=0,w=20,x={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:v,maxZoom:w,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,workerCount:Math.max(g.hardwareConcurrency-1,1)},y=b.exports=function(a){if(a=f.extend({},x,a),a.workerCount<1)throw new Error("workerCount must an integer greater than or equal to 1.");this._interactive=a.interactive,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=a.preserveDrawingBuffer,this._trackResize=a.trackResize,this._workerCount=a.workerCount,this._bearingSnap=a.bearingSnap,"string"==typeof a.container?this._container=document.getElementById(a.container):this._container=a.container,this.animationLoop=new l,this.transform=new n(a.minZoom,a.maxZoom),a.maxBounds&&this.setMaxBounds(a.maxBounds),f.bindAll(["_forwardStyleEvent","_forwardSourceEvent","_forwardLayerEvent","_forwardTileEvent","_onStyleLoad","_onStyleChange","_onSourceAdd","_onSourceRemove","_onSourceUpdate","_onWindowOnline","_onWindowResize","_update","_render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),"undefined"!=typeof h&&(h.addEventListener("online",this._onWindowOnline,!1),h.addEventListener("resize",this._onWindowResize,!1)),p(this,a),this._hash=a.hash&&(new o).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),this.stacks={},this._classes=[],this.resize(),a.classes&&this.setClasses(a.classes),a.style&&this.setStyle(a.style),a.attributionControl&&this.addControl(new u(a.attributionControl));var b=this.fire.bind(this,"error");this.on("style.error",b),this.on("source.error",b),this.on("tile.error",b),this.on("layer.error",b)};f.extend(y.prototype,i),f.extend(y.prototype,q.prototype),f.extend(y.prototype,{addControl:function(a){return a.addTo(this),this},addClass:function(a,b){return this._classes.indexOf(a)>=0||""===a?this:(this._classes.push(a),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},removeClass:function(a,b){var c=this._classes.indexOf(a);return c<0||""===a?this:(this._classes.splice(c,1),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},setClasses:function(a,b){for(var c={},d=0;d<a.length;d++)""!==a[d]&&(c[a[d]]=!0);return this._classes=Object.keys(c),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0)},hasClass:function(a){return this._classes.indexOf(a)>=0},getClasses:function(){return this._classes},resize:function(){var a=0,b=0;return this._container&&(a=this._container.offsetWidth||400,b=this._container.offsetHeight||300),this._canvas.resize(a,b),this.transform.resize(a,b),this.painter.resize(a,b),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){var a=new s(this.transform.pointLocation(new t(0,0)),this.transform.pointLocation(this.transform.size));return(this.transform.angle||this.transform.pitch)&&(a.extend(this.transform.pointLocation(new t(this.transform.size.x,0))),a.extend(this.transform.pointLocation(new t(0,this.transform.size.y)))),a},setMaxBounds:function(a){if(a){var b=s.convert(a);this.transform.lngRange=[b.getWest(),b.getEast()],this.transform.latRange=[b.getSouth(),b.getNorth()],this.transform._constrain(),this._update()}else null!==a&&void 0!==a||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},setMinZoom:function(a){if(a=null===a||void 0===a?v:a,a>=v&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw new Error("minZoom must be between "+v+" and the current maxZoom, inclusive")},setMaxZoom:function(a){if(a=null===a||void 0===a?w:a,a>=this.transform.minZoom&&a<=w)return this.transform.maxZoom=a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw new Error("maxZoom must be between the current minZoom and "+w+", inclusive")},project:function(a){return this.transform.locationPoint(r.convert(a))},unproject:function(a){return this.transform.pointLocation(t.convert(a))},queryRenderedFeatures:function(){function a(a){return a instanceof t||Array.isArray(a)}var b,c={};return 2===arguments.length?(b=arguments[0],c=arguments[1]):1===arguments.length&&a(arguments[0])?b=arguments[0]:1===arguments.length&&(c=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(b),c,this.transform.zoom,this.transform.angle)},_makeQueryGeometry:function(a){void 0===a&&(a=[t.convert([0,0]),t.convert([this.transform.width,this.transform.height])]);var b,c=a instanceof t||"number"==typeof a[0];if(c){var d=t.convert(a);b=[d]}else{var e=[t.convert(a[0]),t.convert(a[1])];b=[e[0],new t(e[1].x,e[0].y),e[1],new t(e[0].x,e[1].y),e[0]]}return b=b.map(function(a){return this.transform.pointCoordinate(a)}.bind(this))},querySourceFeatures:function(a,b){return this.style.querySourceFeatures(a,b)},setStyle:function(a){return this.style&&(this.style.off("load",this._onStyleLoad).off("error",this._forwardStyleEvent).off("change",this._onStyleChange).off("source.add",this._onSourceAdd).off("source.remove",this._onSourceRemove).off("source.load",this._onSourceUpdate).off("source.error",this._forwardSourceEvent).off("source.change",this._onSourceUpdate).off("layer.add",this._forwardLayerEvent).off("layer.remove",this._forwardLayerEvent).off("layer.error",this._forwardLayerEvent).off("tile.add",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.load",this._update).off("tile.error",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent)._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),a?(a instanceof k?this.style=a:this.style=new k(a,this.animationLoop,this._workerCount),this.style.on("load",this._onStyleLoad).on("error",this._forwardStyleEvent).on("change",this._onStyleChange).on("source.add",this._onSourceAdd).on("source.remove",this._onSourceRemove).on("source.load",this._onSourceUpdate).on("source.error",this._forwardSourceEvent).on("source.change",this._onSourceUpdate).on("layer.add",this._forwardLayerEvent).on("layer.remove",this._forwardLayerEvent).on("layer.error",this._forwardLayerEvent).on("tile.add",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.load",this._update).on("tile.error",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},getStyle:function(){if(this.style)return this.style.serialize()},addSource:function(a,b){return this.style.addSource(a,b),this._update(!0),this},addSourceType:function(a,b,c){return this.style.addSourceType(a,b,c)},removeSource:function(a){return this.style.removeSource(a),this._update(!0),this},getSource:function(a){return this.style.getSource(a)},addLayer:function(a,b){return this.style.addLayer(a,b),this._update(!0),this},removeLayer:function(a){return this.style.removeLayer(a),this._update(!0),this},getLayer:function(a){return this.style.getLayer(a)},setFilter:function(a,b){return this.style.setFilter(a,b),this._update(!0),this},setLayerZoomRange:function(a,b,c){return this.style.setLayerZoomRange(a,b,c),this._update(!0),this},getFilter:function(a){return this.style.getFilter(a)},setPaintProperty:function(a,b,c,d){return this.style.setPaintProperty(a,b,c,d),this._update(!0),this},getPaintProperty:function(a,b,c){return this.style.getPaintProperty(a,b,c)},setLayoutProperty:function(a,b,c){return this.style.setLayoutProperty(a,b,c),this._update(!0),this},getLayoutProperty:function(a,b){return this.style.getLayoutProperty(a,b)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var a=this._container;a.classList.add("mapboxgl-map");var b=this._canvasContainer=j.create("div","mapboxgl-canvas-container",a);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=new e(this,b);var c=this._controlContainer=j.create("div","mapboxgl-control-container",a),d=this._controlCorners={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){d[a]=j.create("div","mapboxgl-ctrl-"+a,c)})},_setupPainter:function(){var a=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer});return a?void(this.painter=new m(a,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},_contextLost:function(a){a.preventDefault(),this._frameId&&g.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:a})},_contextRestored:function(a){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:a})},loaded:function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},_update:function(a){return this.style?(this._styleDirty=this._styleDirty||a,this._sourcesDirty=!0,this._rerender(),this):this},_render:function(){try{this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender()}catch(a){this.fire("error",{error:a})}return this},remove:function(){this._hash&&this._hash.remove(),g.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof h&&h.removeEventListener("resize",this._onWindowResize,!1);var a=this.painter.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),d(this._canvasContainer),d(this._controlContainer),this._container.classList.remove("mapboxgl-map")},_rerender:function(){this.style&&!this._frameId&&(this._frameId=g.frame(this._render))},_forwardStyleEvent:function(a){this.fire("style."+a.type,f.extend({style:a.target},a))},_forwardSourceEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_forwardLayerEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_forwardTileEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_onStyleLoad:function(a){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1}),this._forwardStyleEvent(a)},_onStyleChange:function(a){this._update(!0),this._forwardStyleEvent(a)},_onSourceAdd:function(a){var b=a.source;b.onAdd&&b.onAdd(this),this._forwardSourceEvent(a)},_onSourceRemove:function(a){var b=a.source;b.onRemove&&b.onRemove(this),this._forwardSourceEvent(a)},_onSourceUpdate:function(a){this._update(),this._forwardSourceEvent(a)},_onWindowOnline:function(){this._update()},_onWindowResize:function(){this._trackResize&&this.stop().resize()._update()}}),f.extendAll(y.prototype,{_showTileBoundaries:!1,get showTileBoundaries(){return this._showTileBoundaries},set showTileBoundaries(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},_showCollisionBoxes:!1,get showCollisionBoxes(){return this._showCollisionBoxes},set showCollisionBoxes(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,this.style._redoPlacement())},_showOverdrawInspector:!1,get showOverdrawInspector(){return this._showOverdrawInspector},set showOverdrawInspector(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},_repaint:!1,get repaint(){return this._repaint},set repaint(a){this._repaint=a,this._update()},_vertices:!1,get vertices(){return this._vertices},set vertices(a){this._vertices=a,this._update()}})},{"../geo/lng_lat":300,"../geo/lng_lat_bounds":301,"../geo/transform":302,"../render/painter":316,"../style/animation_loop":336,"../style/style":339,"../util/browser":387,"../util/canvas":388,"../util/dom":389,"../util/evented":395,"../util/util":403,"./bind_handlers":368,"./camera":369,"./control/attribution":370,"./hash":381,"point-geometry":442}],383:[function(a,b,c){"use strict";function d(a,b){a||(a=e.create("div")),a.classList.add("mapboxgl-marker"),this._el=a,this._offset=g.convert(b&&b.offset||[0,0]),this._update=this._update.bind(this)}b.exports=d;var e=a("../util/dom"),f=a("../geo/lng_lat"),g=a("point-geometry");d.prototype={addTo:function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._el),a.on("move",this._update),this._update(),this},remove:function(){this._map&&(this._map.off("move",this._update),this._map=null);var a=this._el.parentNode;return a&&a.removeChild(this._el),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=f.convert(a),this._update(),this},getElement:function(){return this._el},_update:function(){if(this._map){var a=this._map.project(this._lngLat)._add(this._offset);e.setTransform(this._el,"translate("+a.x+"px,"+a.y+"px)")}}}},{"../geo/lng_lat":300,"../util/dom":389,"point-geometry":442}],384:[function(a,b,c){"use strict";function d(a){e.setOptions(this,a),e.bindAll(["_update","_onClickClose"],this)}b.exports=d;var e=a("../util/util"),f=a("../util/evented"),g=a("../util/dom"),h=a("../geo/lng_lat");d.prototype=e.inherit(f,{options:{closeButton:!0,closeOnClick:!0},addTo:function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},remove:function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=h.convert(a),this._update(),this},setText:function(a){return this.setDOMContent(document.createTextNode(a))},setHTML:function(a){var b,c=document.createDocumentFragment(),d=document.createElement("body");for(d.innerHTML=a;b=d.firstChild,b;)c.appendChild(b);return this.setDOMContent(c)},setDOMContent:function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},_createContent:function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=g.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},_update:function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var a=this._map.project(this._lngLat).round(),b=this.options.anchor;if(!b){var c=this._container.offsetWidth,d=this._container.offsetHeight;b=a.y<d?["top"]:a.y>this._map.transform.height-d?["bottom"]:[],a.x<c/2?b.push("left"):a.x>this._map.transform.width-c/2&&b.push("right"),b=0===b.length?"bottom":b.join("-")}var e={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},f=this._container.classList;for(var h in e)f.remove("mapboxgl-popup-anchor-"+h);f.add("mapboxgl-popup-anchor-"+b),g.setTransform(this._container,e[b]+" translate("+a.x+"px,"+a.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":300,"../util/dom":389,"../util/evented":395,"../util/util":403}],385:[function(a,b,c){"use strict";function d(a,b){this.target=a,this.parent=b,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}b.exports=d,d.prototype.receive=function(a){function b(a,b,c){this.postMessage({type:"<response>",id:String(e),error:a?String(a):null,data:b},c)}var c,d=a.data,e=d.id;if("<response>"===d.type)c=this.callbacks[d.id],delete this.callbacks[d.id],c&&c(d.error||null,d.data);else if("undefined"!=typeof d.id&&this.parent[d.type])this.parent[d.type](d.data,b.bind(this));else if("undefined"!=typeof d.id&&this.parent.workerSources){var f=d.type.split(".");this.parent.workerSources[f[0]][f[1]](d.data,b.bind(this))}else this.parent[d.type](d.data)},d.prototype.send=function(a,b,c,d){var e=null;c&&(this.callbacks[e=this.callbackID++]=c),this.postMessage({type:a,id:String(e),data:b},d)},d.prototype.postMessage=function(a,b){this.target.postMessage(a,b)}},{}],386:[function(a,b,c){"use strict";function d(a){var b=document.createElement("a");return b.href=a,b.protocol===document.location.protocol&&b.host===document.location.host}c.getJSON=function(a,b){var c=new XMLHttpRequest;return c.open("GET",a,!0),c.setRequestHeader("Accept","application/json"),c.onerror=function(a){b(a)},c.onload=function(){if(c.status>=200&&c.status<300&&c.response){var a;try{a=JSON.parse(c.response)}catch(a){return b(a)}b(null,a)}else b(new Error(c.statusText))},c.send(),c},c.getArrayBuffer=function(a,b){var c=new XMLHttpRequest;return c.open("GET",a,!0),c.responseType="arraybuffer",c.onerror=function(a){b(a)},c.onload=function(){c.status>=200&&c.status<300&&c.response?b(null,c.response):b(new Error(c.statusText))},c.send(),c},c.getImage=function(a,b){return c.getArrayBuffer(a,function(a,c){if(a)return b(a);var d=new Image;d.onload=function(){b(null,d),(window.URL||window.webkitURL).revokeObjectURL(d.src)};var e=new Blob([new Uint8Array(c)],{type:"image/png"});return d.src=(window.URL||window.webkitURL).createObjectURL(e),d.getData=function(){var a=document.createElement("canvas"),b=a.getContext("2d");return a.width=d.width,a.height=d.height,b.drawImage(d,0,0),b.getImageData(0,0,d.width,d.height).data},d})},c.getVideo=function(a,b){var c=document.createElement("video");c.onloadstart=function(){b(null,c)};for(var e=0;e<a.length;e++){var f=document.createElement("source");d(a[e])||(c.crossOrigin="Anonymous"),f.src=a[e],c.appendChild(f)}return c.getData=function(){return c},c}},{}],387:[function(a,b,c){"use strict";c.window=window,b.exports.now=function(){return window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date)}();var d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;c.frame=function(a){return d(a)};var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;c.cancelFrame=function(a){e(a)},c.timed=function(a,d,e){function f(i){g||(i=b.exports.now(),i>=h+d?a.call(e,1):(a.call(e,(i-h)/d),c.frame(f)))}if(!d)return a.call(e,1),null;var g=!1,h=b.exports.now();return c.frame(f),function(){g=!0}},c.supported=a("mapbox-gl-supported"),c.hardwareConcurrency=navigator.hardwareConcurrency||4,Object.defineProperty(c,"devicePixelRatio",{get:function(){return window.devicePixelRatio}}),c.supportsWebp=!1;var f=document.createElement("img");f.onload=function(){c.supportsWebp=!0},f.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",c.supportsGeolocation=!!navigator.geolocation},{"mapbox-gl-supported":288}],388:[function(a,b,c){"use strict";function d(a,b){this.canvas=document.createElement("canvas"),a&&b&&(this.canvas.style.position="absolute",this.canvas.classList.add("mapboxgl-canvas"),this.canvas.addEventListener("webglcontextlost",a._contextLost.bind(a),!1),this.canvas.addEventListener("webglcontextrestored",a._contextRestored.bind(a),!1),this.canvas.setAttribute("tabindex",0),b.appendChild(this.canvas))}var e=a("../util"),f=a("mapbox-gl-supported");b.exports=d,d.prototype.resize=function(a,b){var c=window.devicePixelRatio||1;this.canvas.width=c*a,this.canvas.height=c*b,this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"},d.prototype.getWebGLContext=function(a){return a=e.extend({},a,f.webGLContextAttributes),this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a)},d.prototype.getElement=function(){return this.canvas}},{"../util":403,"mapbox-gl-supported":288}],389:[function(a,b,c){"use strict";function d(a){for(var b=0;b<a.length;b++)if(a[b]in h)return a[b]}function e(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",e,!0)}var f=a("point-geometry");c.create=function(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c&&c.appendChild(d),d};var g,h=document.documentElement.style,i=d(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){i&&(g=h[i],h[i]="none")},c.enableDrag=function(){i&&(h[i]=g)};var j=d(["transform","WebkitTransform"]);c.setTransform=function(a,b){a.style[j]=b},c.suppressClick=function(){window.addEventListener("click",e,!0),window.setTimeout(function(){window.removeEventListener("click",e,!0)},0)},c.mousePos=function(a,b){var c=a.getBoundingClientRect();return b=b.touches?b.touches[0]:b,new f(b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop)},c.touchPos=function(a,b){for(var c=a.getBoundingClientRect(),d=[],e=0;e<b.touches.length;e++)d.push(new f(b.touches[e].clientX-c.left-a.clientLeft,b.touches[e].clientY-c.top-a.clientTop));return d}},{"point-geometry":442}],390:[function(a,b,c){"use strict";var d=a("webworkify");b.exports=function(){return new d(a("../../source/worker"))}},{"../../source/worker":334,webworkify:519}],391:[function(a,b,c){"use strict";function d(a,b){return b.area-a.area}function e(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var f=a("quickselect");b.exports=function(a,b){var c=a.length;if(c<=1)return[a];for(var g,h,i=[],j=0;j<c;j++){var k=e(a[j]);0!==k&&(a[j].area=Math.abs(k),void 0===h&&(h=k<0),h===k<0?(g&&i.push(g),g=[a[j]]):g.push(a[j]))}if(g&&i.push(g),b>1)for(var l=0;l<i.length;l++)i[l].length<=b||(f(i[l],b,1,i[l].length-1,d),i[l]=i[l].slice(0,b));return i}},{quickselect:451}],392:[function(a,b,c){"use strict";b.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],393:[function(a,b,c){"use strict";function d(a){this._stringToNumber={},this._numberToString=[];for(var b=0;b<a.length;b++){var c=a[b];this._stringToNumber[c]=b,this._numberToString[b]=c}}var e=a("assert");b.exports=d,d.prototype.encode=function(a){return e(a in this._stringToNumber),this._stringToNumber[a]},d.prototype.decode=function(a){return e(a<this._numberToString.length),this._numberToString[a]}},{assert:34}],394:[function(a,b,c){"use strict";function d(a,b){this.actors=[],this.currentActor=0;for(var c=0;c<a;c++){var d=new g,e=new f(d,b);e.name="Worker "+c,this.actors.push(e)}}var e=a("./util"),f=a("./actor"),g=a("./web_worker");b.exports=d,d.prototype={broadcast:function(a,b,c){c=c||function(){},e.asyncAll(this.actors,function(c,d){c.send(a,b,d)},c)},send:function(a,b,c,d,e){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(a,b,c,e),d},remove:function(){for(var a=0;a<this.actors.length;a++)this.actors[a].target.terminate();this.actors=[]}}},{"./actor":385,"./util":403,"./web_worker":390}],395:[function(a,b,c){"use strict";var d=a("./util"),e={on:function(a,b){return this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b),this},off:function(a,b){if(!a)return delete this._events,this;if(!this.listens(a))return this;if(b){var c=this._events[a].indexOf(b);c>=0&&this._events[a].splice(c,1),this._events[a].length||delete this._events[a]}else delete this._events[a];return this},once:function(a,b){var c=function(d){this.off(a,c),b.call(this,d)}.bind(this);return this.on(a,c),this},fire:function(a,b){if(!this.listens(a))return d.endsWith(a,"error")&&console.error(b&&b.error||b||"Empty error event"),this;b=d.extend({},b),d.extend(b,{type:a,target:this});for(var c=this._events[a].slice(),e=0;e<c.length;e++)c[e].call(this,b);return this},listens:function(a){return!(!this._events||!this._events[a])}};b.exports=e},{"./util":403}],396:[function(a,b,c){"use strict";function d(a,b){this.stacks=a.readFields(e,[],b)}function e(a,b,c){if(1===a){var d=c.readMessage(f,{glyphs:{}});b.push(d)}}function f(a,b,c){if(1===a)b.name=c.readString();else if(2===a)b.range=c.readString();else if(3===a){var d=c.readMessage(g,{});b.glyphs[d.id]=d}}function g(a,b,c){1===a?b.id=c.readVarint():2===a?b.bitmap=c.readBytes():3===a?b.width=c.readVarint():4===a?b.height=c.readVarint():5===a?b.left=c.readSVarint():6===a?b.top=c.readSVarint():7===a&&(b.advance=c.readVarint())}b.exports=d},{}],397:[function(a,b,c){"use strict";function d(a,b,c){return a*(1-c)+b*c}b.exports=d,d.number=d,d.vec2=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c)]},d.color=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c),d(a[2],b[2],c),d(a[3],b[3],c)]},d.array=function(a,b,c){return a.map(function(a,e){return d(a,b[e],c)})}},{}],398:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++)for(var g=b[f],h=0;h<g.length;h++){var i=g[h];if(n(e,i))return!0;if(k(i,e,c))return!0}return!1}function e(a,b){if(1===a.length&&1===a[0].length)return m(b,a[0][0]);for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)if(m(a,d[e]))return!0;for(var f=0;f<a.length;f++){for(var g=a[f],i=0;i<g.length;i++)if(m(b,g[i]))return!0;for(var j=0;j<b.length;j++)if(h(g,b[j]))return!0}return!1}function f(a,b,c){for(var d=0;d<b.length;d++)for(var e=b[d],f=0;f<a.length;f++){var h=a[f];if(h.length>=3)for(var i=0;i<e.length;i++)if(n(h,e[i]))return!0;if(g(h,e,c))return!0}return!1}function g(a,b,c){if(a.length>1){if(h(a,b))return!0;for(var d=0;d<b.length;d++)if(k(b[d],a,c))return!0}for(var e=0;e<a.length;e++)if(k(a[e],b,c))return!0;return!1}function h(a,b){for(var c=0;c<a.length-1;c++)for(var d=a[c],e=a[c+1],f=0;f<b.length-1;f++){var g=b[f],h=b[f+1];if(j(d,e,g,h))return!0}return!1}function i(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}function j(a,b,c,d){return i(a,c,d)!==i(b,c,d)&&i(a,b,c)!==i(a,b,d)}function k(a,b,c){var d=c*c;if(1===b.length)return a.distSqr(b[0])<d;for(var e=1;e<b.length;e++){var f=b[e-1],g=b[e];if(l(a,f,g)<d)return!0}return!1}function l(a,b,c){var d=b.distSqr(c);if(0===d)return a.distSqr(b);var e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;return e<0?a.distSqr(b):e>1?a.distSqr(c):a.distSqr(c.sub(b)._mult(e)._add(b))}function m(a,b){for(var c,d,e,f=!1,g=0;g<a.length;g++){c=a[g];for(var h=0,i=c.length-1;h<c.length;i=h++)d=c[h],e=c[i],d.y>b.y!=e.y>b.y&&b.x<(e.x-d.x)*(b.y-d.y)/(e.y-d.y)+d.x&&(f=!f)}return f}function n(a,b){for(var c=!1,d=0,e=a.length-1;d<a.length;e=d++){var f=a[d],g=a[e];f.y>b.y!=g.y>b.y&&b.x<(g.x-f.x)*(b.y-f.y)/(g.y-f.y)+f.x&&(c=!c)}return c}b.exports={multiPolygonIntersectsBufferedMultiPoint:d,multiPolygonIntersectsMultiPolygon:e,multiPolygonIntersectsBufferedMultiLine:f}},{}],399:[function(a,b,c){"use strict";function d(a,b){this.max=a,this.onRemove=b,this.reset()}b.exports=d,d.prototype.reset=function(){for(var a in this.data)this.onRemove(this.data[a]);return this.data={},this.order=[],this},d.prototype.add=function(a,b){if(this.has(a))this.order.splice(this.order.indexOf(a),1),this.data[a]=b,this.order.push(a);else if(this.data[a]=b,this.order.push(a),this.order.length>this.max){var c=this.get(this.order[0]);c&&this.onRemove(c)}return this},d.prototype.has=function(a){return a in this.data},d.prototype.keys=function(){return this.order},d.prototype.get=function(a){if(!this.has(a))return null;var b=this.data[a];return delete this.data[a],this.order.splice(this.order.indexOf(a),1),b},d.prototype.setMaxSize=function(a){for(this.max=a;this.order.length>this.max;){var b=this.get(this.order[0]);b&&this.onRemove(b)}return this}},{}],400:[function(a,b,c){"use strict";function d(a,b,c){if(c=c||g.ACCESS_TOKEN,
!c&&g.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");if(a=a.replace(/^mapbox:\/\//,g.API_URL+b),a+=a.indexOf("?")!==-1?"&access_token=":"?access_token=",g.REQUIRE_ACCESS_TOKEN){if("s"===c[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");a+=c}return a}function e(a){return a?"?"+a:""}function f(a){return a.access_token&&"tk."===a.access_token.slice(0,3)?j.extend({},a,{access_token:g.ACCESS_TOKEN}):a}var g=a("./config"),h=a("./browser"),i=a("url"),j=a("./util");b.exports.normalizeStyleURL=function(a,b){var c=i.parse(a);return"mapbox:"!==c.protocol?a:d("mapbox:/"+c.pathname+e(c.query),"/styles/v1/",b)},b.exports.normalizeSourceURL=function(a,b){var c=i.parse(a);return"mapbox:"!==c.protocol?a:d(a+".json","/v4/",b)+"&secure"},b.exports.normalizeGlyphsURL=function(a,b){var c=i.parse(a);if("mapbox:"!==c.protocol)return a;var f=c.pathname.split("/")[1];return d("mapbox://"+f+"/{fontstack}/{range}.pbf"+e(c.query),"/fonts/v1/",b)},b.exports.normalizeSpriteURL=function(a,b,c,f){var g=i.parse(a);return"mapbox:"!==g.protocol?(g.pathname+=b+c,i.format(g)):d("mapbox:/"+g.pathname+"/sprite"+b+c+e(g.query),"/styles/v1/",f)},b.exports.normalizeTileURL=function(a,b,c){var d=i.parse(a,!0);if(!b)return a;var e=i.parse(b);if("mapbox:"!==e.protocol)return a;var g=h.supportsWebp?".webp":"$1",j=h.devicePixelRatio>=2||512===c?"@2x":"";return i.format({protocol:d.protocol,hostname:d.hostname,pathname:d.pathname.replace(/(\.(?:png|jpg)\d*)/,j+g),query:f(d.query)})}},{"./browser":387,"./config":392,"./util":403,url:500}],401:[function(a,b,c){"use strict";function d(a){function b(){m.apply(this,arguments)}function c(){n.apply(this,arguments),this.members=b.prototype.members}var d=JSON.stringify(a);if(q[d])return q[d];void 0===a.alignment&&(a.alignment=1),b.prototype=Object.create(m.prototype);var h=0,j=0,r=["Uint8"];return b.prototype.members=a.members.map(function(c){c={name:c.name,type:c.type,components:c.components||1},o(c.name.length),o(c.type in p),r.indexOf(c.type)<0&&r.push(c.type);var d=g(c.type);j=Math.max(j,d),c.offset=h=f(h,Math.max(a.alignment,d));for(var e=0;e<c.components;e++)Object.defineProperty(b.prototype,c.name+(1===c.components?"":e),{get:k(c,e),set:l(c,e)});return h+=d*c.components,c}),b.prototype.alignment=a.alignment,b.prototype.size=f(h,Math.max(j,a.alignment)),c.serialize=e,c.prototype=Object.create(n.prototype),c.prototype.StructType=b,c.prototype.bytesPerElement=b.prototype.size,c.prototype.emplaceBack=i(b.prototype.members,b.prototype.size),c.prototype._usedTypes=r,q[d]=c,c}function e(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function f(a,b){return Math.ceil(a/b)*b}function g(a){return p[a].BYTES_PER_ELEMENT}function h(a){return a.toLowerCase()}function i(a,b){for(var c=[],d=[],e="var i = this.length;\nthis.resize(this.length + 1);\n",f=0;f<a.length;f++){var i=a[f],j=g(i.type);c.indexOf(j)<0&&(c.push(j),e+="var o"+j.toFixed(0)+" = i * "+(b/j).toFixed(0)+";\n");for(var k=0;k<i.components;k++){var l="v"+d.length,m="o"+j.toFixed(0)+" + "+(i.offset/j+k).toFixed(0);e+="this."+h(i.type)+"["+m+"] = "+l+";\n",d.push(l)}}return e+="return i;",new Function(d,e)}function j(a,b){var c="this._pos"+g(a.type).toFixed(0),d=(a.offset/g(a.type)+b).toFixed(0),e=c+" + "+d;return"this._structArray."+h(a.type)+"["+e+"]"}function k(a,b){return new Function([],"return "+j(a,b)+";")}function l(a,b){return new Function(["x"],j(a,b)+" = x;")}function m(a,b){this._structArray=a,this._pos1=b*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function n(a){void 0!==a?(this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}var o=a("assert");b.exports=d;var p={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},q={};n.prototype.DEFAULT_CAPACITY=128,n.prototype.RESIZE_MULTIPLIER=5,n.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},n.prototype.get=function(a){return new this.StructType(this,a)},n.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},n.prototype.resize=function(a){if(this.length=a,a>this.capacity){this.capacity=Math.max(a,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var b=this.uint8;this._refreshViews(),b&&this.uint8.set(b)}},n.prototype._refreshViews=function(){for(var a=0;a<this._usedTypes.length;a++){var b=this._usedTypes[a];this[h(b)]=new p[b](this.arrayBuffer)}},n.prototype.toArray=function(a,b){for(var c=[],d=a;d<b;d++){var e=this.get(d);c.push(e)}return c}},{assert:34}],402:[function(a,b,c){"use strict";function d(a,b){return b.replace(/{([^{}]+)}/g,function(b,c){return c in a?a[c]:""})}b.exports=d},{}],403:[function(a,b,c){"use strict";var d=a("unitbezier"),e=a("../geo/coordinate");c.easeCubicInOut=function(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)},c.bezier=function(a,b,c,e){var f=new d(a,b,c,e);return function(a){return f.solve(a)}},c.ease=c.bezier(.25,.1,.25,1),c.clamp=function(a,b,c){return Math.min(c,Math.max(b,a))},c.wrap=function(a,b,c){var d=c-b,e=((a-b)%d+d)%d+b;return e===b?c:e},c.coalesce=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(null!==b&&void 0!==b)return b}},c.asyncAll=function(a,b,c){if(!a.length)return c(null,[]);var d=a.length,e=new Array(a.length),f=null;a.forEach(function(a,g){b(a,function(a,b){a&&(f=a),e[g]=b,0===--d&&c(f,e)})})},c.keysDifference=function(a,b){var c=[];for(var d in a)d in b||c.push(d);return c},c.extend=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},c.extendAll=function(a,b){for(var c in b)Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c));return a},c.inherit=function(a,b){var d="function"==typeof a?a.prototype:a,e=Object.create(d);return c.extendAll(e,b),e},c.pick=function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];e in a&&(c[e]=a[e])}return c};var f=1;c.uniqueId=function(){return f++},c.debounce=function(a,b){var c,d;return function(){d=arguments,clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},c.bindAll=function(a,b){a.forEach(function(a){b[a]&&(b[a]=b[a].bind(b))})},c.bindHandlers=function(a){for(var b in a)"function"==typeof a[b]&&0===b.indexOf("_on")&&(a[b]=a[b].bind(a))},c.setOptions=function(a,b){a.hasOwnProperty("options")||(a.options=a.options?Object.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},c.getCoordinatesCenter=function(a){for(var b=1/0,c=1/0,d=-(1/0),f=-(1/0),g=0;g<a.length;g++)b=Math.min(b,a[g].column),c=Math.min(c,a[g].row),d=Math.max(d,a[g].column),f=Math.max(f,a[g].row);var h=d-b,i=f-c,j=Math.max(h,i);return new e((b+d)/2,(c+f)/2,0).zoomTo(Math.floor(-Math.log(j)/Math.LN2))},c.endsWith=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.mapObject=function(a,b,c){var d={};for(var e in a)d[e]=b.call(c||this,a[e],e,a);return d},c.filterObject=function(a,b,c){var d={};for(var e in a)b.call(c||this,a[e],e,a)&&(d[e]=a[e]);return d},c.deepEqual=function h(a,b){if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!h(a[c],b[c]))return!1;return!0}if("object"==typeof a&&null!==a&&null!==b){if("object"!=typeof b)return!1;var d=Object.keys(a);if(d.length!==Object.keys(b).length)return!1;for(var e in a)if(!h(a[e],b[e]))return!1;return!0}return a===b},c.clone=function(a){return Array.isArray(a)?a.map(c.clone):"object"==typeof a?c.mapObject(a,c.clone):a},c.arraysIntersect=function(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>=0)return!0;return!1};var g={};c.warnOnce=function(a){g[a]||("undefined"!=typeof console&&console.warn(a),g[a]=!0)}},{"../geo/coordinate":299,unitbezier:499}],404:[function(a,b,c){"use strict";function d(a,b,c,d){this._vectorTileFeature=a,a._z=b,a._x=c,a._y=d,this.properties=a.properties,null!=a.id&&(this.id=a.id)}b.exports=d,d.prototype={type:"Feature",get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set geometry(a){this._geometry=a},toJSON:function(){var a={};for(var b in this)"_geometry"!==b&&"_vectorTileFeature"!==b&&"toJSON"!==b&&(a[b]=this[b]);return a}}},{}],405:[function(a,b,c){b.exports={_args:[[{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},"/home/etienne/Documents/plotly/plotly.js"]],_from:"mapbox-gl@>=0.22.0 <0.23.0",_id:"mapbox-gl@0.22.1",_inCache:!0,_location:"/mapbox-gl",_nodeVersion:"4.4.5",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/mapbox-gl-0.22.1.tgz_1471549891670_0.8762630566488951"},_npmUser:{name:"lucaswoj",email:"lucas@lucaswoj.com"},_npmVersion:"2.15.5",_phantomChildren:{},_requested:{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz",_shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",_shrinkwrap:null,_spec:"mapbox-gl@^0.22.0",_where:"/home/etienne/Documents/plotly/plotly.js",browser:{"./js/util/ajax.js":"./js/util/browser/ajax.js","./js/util/browser.js":"./js/util/browser/browser.js","./js/util/canvas.js":"./js/util/browser/canvas.js","./js/util/dom.js":"./js/util/browser/dom.js","./js/util/web_worker.js":"./js/util/browser/web_worker.js"},bugs:{url:"https://github.com/mapbox/mapbox-gl-js/issues"},dependencies:{csscolorparser:"^1.0.2",earcut:"^2.0.3","feature-filter":"^2.2.0","geojson-rewind":"^0.1.0","geojson-vt":"^2.4.0","gl-matrix":"^2.3.1","grid-index":"^1.0.0","mapbox-gl-function":"^1.2.1","mapbox-gl-shaders":"github:mapbox/mapbox-gl-shaders#de2ab007455aa2587c552694c68583f94c9f2747","mapbox-gl-style-spec":"github:mapbox/mapbox-gl-style-spec#83b1a3e5837d785af582efd5ed1a212f2df6a4ae","mapbox-gl-supported":"^1.2.0",pbf:"^1.3.2",pngjs:"^2.2.0","point-geometry":"^0.0.0",quickselect:"^1.0.0",request:"^2.39.0","resolve-url":"^0.2.1","shelf-pack":"^1.0.0",supercluster:"^2.0.1",unassertify:"^2.0.0",unitbezier:"^0.0.0","vector-tile":"^1.3.0","vt-pbf":"^2.0.2",webworkify:"^1.3.0","whoots-js":"^2.0.0"},description:"A WebGL interactive maps library",devDependencies:{"babel-preset-react":"^6.11.1",babelify:"^7.3.0",benchmark:"~2.1.0",browserify:"^13.0.0",clipboard:"^1.5.12","concat-stream":"1.5.1",coveralls:"^2.11.8",doctrine:"^1.2.1",documentation:"https://github.com/documentationjs/documentation/archive/bb41619c734e59ef3fbc3648610032efcfdaaace.tar.gz","documentation-theme-utils":"3.0.0",envify:"^3.4.0",eslint:"^2.5.3","eslint-config-mourner":"^2.0.0","eslint-plugin-html":"^1.5.1",gl:"^4.0.1",handlebars:"4.0.5","highlight.js":"9.3.0",istanbul:"^0.4.2","json-loader":"^0.5.4",lodash:"^4.13.1","mapbox-gl-test-suite":"github:mapbox/mapbox-gl-test-suite#7babab52fb02788ebbc38384139bf350e8e38552","memory-fs":"^0.3.0",minifyify:"^7.0.1","npm-run-all":"^3.0.0",nyc:"6.4.0",proxyquire:"^1.7.9",remark:"4.2.2","remark-html":"3.0.0",sinon:"^1.15.4",st:"^1.2.0",tap:"^5.7.0","transform-loader":"^0.2.3","unist-util-visit":"1.1.0",vinyl:"1.1.1","vinyl-fs":"2.4.3",watchify:"^3.7.0",webpack:"^1.13.1","webworkify-webpack":"^1.1.3"},directories:{},dist:{shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",tarball:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz"},engines:{node:">=4.0.0"},gitHead:"13a9015341f0602ccb55c98c53079838ad4b70b5",homepage:"https://github.com/mapbox/mapbox-gl-js#readme",license:"BSD-3-Clause",main:"js/mapbox-gl.js",maintainers:[{name:"aaronlidman",email:"aaronlidman@gmail.com"},{name:"ajashton",email:"aj.ashton@gmail.com"},{name:"ansis",email:"ansis.brammanis@gmail.com"},{name:"bergwerkgis",email:"wb@bergwerk-gis.at"},{name:"bhousel",email:"bryan@mapbox.com"},{name:"bsudekum",email:"bobby@mapbox.com"},{name:"camilleanne",email:"camille@mapbox.com"},{name:"dnomadb",email:"damon@mapbox.com"},{name:"dthompson",email:"dthompson@gmail.com"},{name:"emilymcafee",email:"emily@mapbox.com"},{name:"flippmoke",email:"flippmoke@gmail.com"},{name:"freenerd",email:"spam@freenerd.de"},{name:"gretacb",email:"carol@mapbox.com"},{name:"ian29",email:"ian.villeda@gmail.com"},{name:"ianshward",email:"ian@mapbox.com"},{name:"ingalls",email:"nicholas.ingalls@gmail.com"},{name:"jfirebaugh",email:"john.firebaugh@gmail.com"},{name:"jrpruit1",email:"jake@jakepruitt.com"},{name:"karenzshea",email:"karen@mapbox.com"},{name:"kkaefer",email:"kkaefer@gmail.com"},{name:"lbud",email:"lauren@mapbox.com"},{name:"lucaswoj",email:"lucas@lucaswoj.com"},{name:"lxbarth",email:"alex@mapbox.com"},{name:"lyzidiamond",email:"lyzi@mapbox.com"},{name:"mapbox-admin",email:"accounts@mapbox.com"},{name:"mateov",email:"matt@mapbox.com"},{name:"mcwhittemore",email:"mcwhittemore@gmail.com"},{name:"miccolis",email:"jeff@miccolis.net"},{name:"mikemorris",email:"michael.patrick.morris@gmail.com"},{name:"morganherlocker",email:"morgan.herlocker@gmail.com"},{name:"mourner",email:"agafonkin@gmail.com"},{name:"nickidlugash",email:"nicki@mapbox.com"},{name:"rclark",email:"ryan.clark.j@gmail.com"},{name:"samanbb",email:"saman@mapbox.com"},{name:"sbma44",email:"tlee@mapbox.com"},{name:"scothis",email:"scothis@gmail.com"},{name:"sgillies",email:"sean@mapbox.com"},{name:"springmeyer",email:"dane@mapbox.com"},{name:"themarex",email:"patrick@mapbox.com"},{name:"tmcw",email:"tom@macwright.org"},{name:"tristen",email:"tristen.brown@gmail.com"},{name:"willwhite",email:"will@mapbox.com"},{name:"yhahn",email:"young@mapbox.com"}],name:"mapbox-gl",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/mapbox/mapbox-gl-js.git"},scripts:{build:"npm run build-docs # invoked by publisher when publishing docs on the mb-pages branch","build-dev":"browserify js/mapbox-gl.js --debug --standalone mapboxgl > dist/mapbox-gl-dev.js && tap --no-coverage test/build/dev.test.js","build-docs":"documentation build --github --format html -c documentation.yml --theme ./docs/_theme --output docs/api/","build-min":"browserify js/mapbox-gl.js --debug -t unassertify --plugin [minifyify --map mapbox-gl.js.map --output dist/mapbox-gl.js.map] --standalone mapboxgl > dist/mapbox-gl.js && tap --no-coverage test/build/min.test.js","build-token":"browserify debug/access-token-src.js --debug -t envify > debug/access-token.js",lint:"eslint  --ignore-path .gitignore js test bench docs/_posts/examples/*.html","open-changed-examples":"git diff --name-only mb-pages HEAD -- docs/_posts/examples/*.html | awk '{print \"http://127.0.0.1:4000/mapbox-gl-js/example/\" substr($0,33,length($0)-37)}' | xargs open",start:"run-p build-token watch-dev watch-bench start-server","start-bench":"run-p build-token watch-bench start-server","start-debug":"run-p build-token watch-dev start-server","start-docs":"npm run build-min && npm run build-docs && jekyll serve -w","start-server":"st --no-cache --localhost --port 9966 --index index.html .",test:"npm run lint && tap --reporter dot test/js/*/*.js test/build/webpack.test.js","test-suite":"node test/render.test.js && node test/query.test.js","watch-bench":"node bench/download-data.js && watchify bench/index.js --plugin [minifyify --no-map] -t [babelify --presets react] -t unassertify -t envify -o bench/bench.js -v","watch-dev":"watchify js/mapbox-gl.js --debug --standalone mapboxgl -o dist/mapbox-gl-dev.js -v"},version:"0.22.1"}},{}],406:[function(a,b,c){"use strict";function d(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=0,e===b&&(d[e]+=.5),e===c&&(d[e]+=.5);return d}function e(a,b){if(0===b||b===(1<<a+1)-1)return[];for(var c=[],e=[],f=0;f<=a;++f)if(b&1<<f){c.push(d(a,f-1,f-1)),e.push(null);for(var h=0;h<=a;++h)~b&1<<h&&(c.push(d(a,f-1,h-1)),e.push([f,h]))}var i=g(c),j=[];a:for(var f=0;f<i.length;++f){for(var k=i[f],l=[],h=0;h<k.length;++h){if(!e[k[h]])continue a;l.push(e[k[h]].slice())}j.push(l)}return j}function f(a){for(var b=1<<a+1,c=new Array(b),d=0;d<b;++d)c[d]=e(a,d);return c}b.exports=f;var g=a("convex-hull")},{"convex-hull":84}],407:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}function e(a,b){a[0][0]=b[0],a[0][1]=b[1],a[0][2]=b[2],a[1][0]=b[4],a[1][1]=b[5],a[1][2]=b[6],a[2][0]=b[8],a[2][1]=b[9],a[2][2]=b[10]}function f(a,b,c,d,e){a[0]=b[0]*d+c[0]*e,a[1]=b[1]*d+c[1]*e,a[2]=b[2]*d+c[2]*e}var g=a("./normalize"),h=a("gl-mat4/create"),i=a("gl-mat4/clone"),j=a("gl-mat4/determinant"),k=a("gl-mat4/invert"),l=a("gl-mat4/transpose"),m={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},n=h(),o=h(),p=[0,0,0,0],q=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0];b.exports=function(a,b,c,h,s,t){if(b||(b=[0,0,0]),c||(c=[0,0,0]),h||(h=[0,0,0]),s||(s=[0,0,0,1]),t||(t=[0,0,0,1]),!g(n,a))return!1;if(i(o,n),o[3]=0,o[7]=0,o[11]=0,o[15]=1,Math.abs(j(o)<1e-8))return!1;var u=n[3],v=n[7],w=n[11],x=n[12],y=n[13],z=n[14],A=n[15];if(0!==u||0!==v||0!==w){p[0]=u,p[1]=v,p[2]=w,p[3]=A;var B=k(o,o);if(!B)return!1;l(o,o),d(s,p,o)}else s[0]=s[1]=s[2]=0,s[3]=1;if(b[0]=x,b[1]=y,b[2]=z,e(q,n),c[0]=m.length(q[0]),m.normalize(q[0],q[0]),h[0]=m.dot(q[0],q[1]),f(q[1],q[1],q[0],1,-h[0]),c[1]=m.length(q[1]),m.normalize(q[1],q[1]),h[0]/=c[1],h[1]=m.dot(q[0],q[2]),f(q[2],q[2],q[0],1,-h[1]),h[2]=m.dot(q[1],q[2]),f(q[2],q[2],q[1],1,-h[2]),c[2]=m.length(q[2]),m.normalize(q[2],q[2]),h[1]/=c[2],h[2]/=c[2],m.cross(r,q[1],q[2]),m.dot(q[0],r)<0)for(var C=0;C<3;C++)c[C]*=-1,q[C][0]*=-1,q[C][1]*=-1,q[C][2]*=-1;return t[0]=.5*Math.sqrt(Math.max(1+q[0][0]-q[1][1]-q[2][2],0)),t[1]=.5*Math.sqrt(Math.max(1-q[0][0]+q[1][1]-q[2][2],0)),t[2]=.5*Math.sqrt(Math.max(1-q[0][0]-q[1][1]+q[2][2],0)),t[3]=.5*Math.sqrt(Math.max(1+q[0][0]+q[1][1]+q[2][2],0)),q[2][1]>q[1][2]&&(t[0]=-t[0]),q[0][2]>q[2][0]&&(t[1]=-t[1]),q[1][0]>q[0][1]&&(t[2]=-t[2]),!0}},{"./normalize":408,"gl-mat4/clone":143,"gl-mat4/create":144,"gl-mat4/determinant":145,"gl-mat4/invert":149,"gl-mat4/transpose":159,"gl-vec3/cross":237,"gl-vec3/dot":238,"gl-vec3/length":239,"gl-vec3/normalize":241}],408:[function(a,b,c){b.exports=function(a,b){var c=b[15];if(0===c)return!1;for(var d=1/c,e=0;e<16;e++)a[e]=b[e]*d;return!0}},{}],409:[function(a,b,c){function d(a,b,c,d){if(0===k(b)||0===k(c))return!1;var e=j(b,m.translate,m.scale,m.skew,m.perspective,m.quaternion),f=j(c,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return!(!e||!f||(h(o.translate,m.translate,n.translate,d),h(o.skew,m.skew,n.skew,d),h(o.scale,m.scale,n.scale,d),h(o.perspective,m.perspective,n.perspective,d),l(o.quaternion,m.quaternion,n.quaternion,d),i(a,o.translate,o.scale,o.skew,o.perspective,o.quaternion),0))}function e(){return{translate:f(),scale:f(1),skew:f(),perspective:g(),quaternion:g()}}function f(a){return[a||0,a||0,a||0]}function g(){return[0,0,0,1]}var h=a("gl-vec3/lerp"),i=a("mat4-recompose"),j=a("mat4-decompose"),k=a("gl-mat4/determinant"),l=a("quat-slerp"),m=e(),n=e(),o=e();b.exports=d},{"gl-mat4/determinant":145,"gl-vec3/lerp":240,"mat4-decompose":407,"mat4-recompose":410,"quat-slerp":447}],410:[function(a,b,c){var d={identity:a("gl-mat4/identity"),translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")},e=(d.create(),d.create());b.exports=function(a,b,c,f,g,h){return d.identity(a),d.fromRotationTranslation(a,h,b),a[3]=g[0],a[7]=g[1],a[11]=g[2],a[15]=g[3],d.identity(e),0!==f[2]&&(e[9]=f[2],d.multiply(a,a,e)),0!==f[1]&&(e[9]=0,e[8]=f[1],d.multiply(a,a,e)),0!==f[0]&&(e[8]=0,e[4]=f[0],d.multiply(a,a,e)),d.scale(a,a,c),a}},{"gl-mat4/create":144,"gl-mat4/fromRotationTranslation":147,"gl-mat4/identity":148,"gl-mat4/multiply":151,"gl-mat4/scale":157,"gl-mat4/translate":158}],411:[function(a,b,c){"use strict";function d(a){this._components=a.slice(),this._time=[0],this.prevMatrix=a.slice(),this.nextMatrix=a.slice(),this.computedMatrix=a.slice(),this.computedInverse=a.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-(1/0),1/0]}function e(a){a=a||{};var b=a.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(b)}var f=a("binary-search-bounds"),g=a("mat4-interpolate"),h=a("gl-mat4/invert"),i=a("gl-mat4/rotateX"),j=a("gl-mat4/rotateY"),k=a("gl-mat4/rotateZ"),l=a("gl-mat4/lookAt"),m=a("gl-mat4/translate"),n=(a("gl-mat4/scale"),a("gl-vec3/normalize")),o=[0,0,0];b.exports=e;var p=d.prototype;p.recalcMatrix=function(a){var b=this._time,c=f.le(b,a),d=this.computedMatrix;if(!(c<0)){var e=this._components;if(c===b.length-1)for(var i=16*c,j=0;j<16;++j)d[j]=e[i++];else{for(var k=b[c+1]-b[c],i=16*c,l=this.prevMatrix,m=!0,j=0;j<16;++j)l[j]=e[i++];for(var o=this.nextMatrix,j=0;j<16;++j)o[j]=e[i++],m=m&&l[j]===o[j];if(k<1e-6||m)for(var j=0;j<16;++j)d[j]=l[j];else g(d,l,o,(a-b[c])/k)}var p=this.computedUp;p[0]=d[1],p[1]=d[5],p[2]=d[6],n(p,p);var q=this.computedInverse;h(q,d);var r=this.computedEye,s=q[15];r[0]=q[12]/s,r[1]=q[13]/s,r[2]=q[14]/s;for(var t=this.computedCenter,u=Math.exp(this.computedRadius[0]),j=0;j<3;++j)t[j]=r[j]-d[2+4*j]*u}},p.idle=function(a){if(!(a<this.lastT())){for(var b=this._components,c=b.length-16,d=0;d<16;++d)b.push(b[c++]);this._time.push(a)}},p.flush=function(a){var b=f.gt(this._time,a)-2;b<0||(this._time.slice(0,b),this._components.slice(0,16*b))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(a,b,c,d){this.recalcMatrix(a),b=b||this.computedEye,c=c||o,d=d||this.computedUp,this.setMatrix(a,l(this.computedMatrix,b,c,d));for(var e=0,f=0;f<3;++f)e+=Math.pow(c[f]-b[f],2);e=Math.log(Math.sqrt(e)),this.computedRadius[0]=e},p.rotate=function(a,b,c,d){this.recalcMatrix(a);var e=this.computedInverse;b&&j(e,e,b),c&&i(e,e,c),d&&k(e,e,d),this.setMatrix(a,h(this.computedMatrix,e))};var q=[0,0,0];p.pan=function(a,b,c,d){q[0]=-(b||0),q[1]=-(c||0),q[2]=-(d||0),this.recalcMatrix(a);var e=this.computedInverse;m(e,e,q),this.setMatrix(a,h(e,e))},p.translate=function(a,b,c,d){q[0]=b||0,q[1]=c||0,q[2]=d||0,this.recalcMatrix(a);var e=this.computedMatrix;m(e,e,q),this.setMatrix(a,e)},p.setMatrix=function(a,b){if(!(a<this.lastT())){this._time.push(a);for(var c=0;c<16;++c)this._components.push(b[c])}},p.setDistance=function(a,b){this.computedRadius[0]=b},p.setDistanceLimits=function(a,b){var c=this._limits;c[0]=a,c[1]=b},p.getDistanceLimits=function(a){var b=this._limits;return a?(a[0]=b[0],a[1]=b[1],a):b}},{"binary-search-bounds":53,"gl-mat4/invert":149,"gl-mat4/lookAt":150,"gl-mat4/rotateX":154,"gl-mat4/rotateY":155,"gl-mat4/rotateZ":156,"gl-mat4/scale":157,"gl-mat4/translate":158,"gl-vec3/normalize":241,"mat4-interpolate":409}],412:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b<3){for(var c=new Array(b),d=0;d<b;++d)c[d]=d;return 2===b&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:c}for(var f=new Array(b),d=0;d<b;++d)f[d]=d;f.sort(function(b,c){var d=a[b][0]-a[c][0];return d?d:a[b][1]-a[c][1]});for(var g=[f[0],f[1]],h=[f[0],f[1]],d=2;d<b;++d){for(var i=f[d],j=a[i],k=g.length;k>1&&e(a[g[k-2]],a[g[k-1]],j)<=0;)k-=1,g.pop();for(g.push(i),k=h.length;k>1&&e(a[h[k-2]],a[h[k-1]],j)>=0;)k-=1,h.pop();h.push(i)}for(var c=new Array(h.length+g.length-2),l=0,d=0,m=g.length;d<m;++d)c[l++]=g[d];for(var n=h.length-2;n>0;--n)c[l++]=h[n];return c}b.exports=d;var e=a("robust-orientation")[3]},{"robust-orientation":465}],413:[function(a,b,c){"use strict";function d(a,b){function c(a){var b=!1;return"altKey"in a&&(b=b||a.altKey!==p.alt,p.alt=!!a.altKey),"shiftKey"in a&&(b=b||a.shiftKey!==p.shift,p.shift=!!a.shiftKey),"ctrlKey"in a&&(b=b||a.ctrlKey!==p.control,p.control=!!a.ctrlKey),"metaKey"in a&&(b=b||a.metaKey!==p.meta,p.meta=!!a.metaKey),b}function d(a,d){var f=e.x(d),g=e.y(d);"buttons"in d&&(a=0|d.buttons),(a!==m||f!==n||g!==o||c(d))&&(m=0|a,n=f||0,o=g||0,b&&b(m,n,o,p))}function f(a){d(0,a)}function g(){(m||n||o||p.shift||p.alt||p.meta||p.control)&&(n=o=0,m=0,p.shift=p.alt=p.control=p.meta=!1,b&&b(0,0,0,p))}function h(a){c(a)&&b&&b(m,n,o,p)}function i(a){0===e.buttons(a)?d(0,a):d(m,a)}function j(a){d(m|e.buttons(a),a)}function k(a){d(m&~e.buttons(a),a)}function l(){q||(q=!0,a.addEventListener("mousemove",i),a.addEventListener("mousedown",j),a.addEventListener("mouseup",k),a.addEventListener("mouseleave",f),a.addEventListener("mouseenter",f),a.addEventListener("mouseout",f),a.addEventListener("mouseover",f),a.addEventListener("blur",g),a.addEventListener("keyup",h),a.addEventListener("keydown",h),a.addEventListener("keypress",h),a!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}b||(b=a,a=window);var m=0,n=0,o=0,p={shift:!1,alt:!1,control:!1,meta:!1},q=!1;l();var r={element:a};return Object.defineProperties(r,{enabled:{get:function(){return q},set:function(a){a&&l()},enumerable:!0},buttons:{get:function(){return m},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),r}b.exports=d;var e=a("mouse-event")},{"mouse-event":414}],414:[function(a,b,c){"use strict";function d(a){if("object"==typeof a){if("buttons"in a)return a.buttons;if("which"in a){var b=a.which;if(2===b)return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in a){var b=a.button;if(1===b)return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0}function e(a){return a.target||a.srcElement||window}function f(a){if("object"==typeof a){if("offsetX"in a)return a.offsetX;var b=e(a),c=b.getBoundingClientRect();return a.clientX-c.left}return 0}function g(a){if("object"==typeof a){if("offsetY"in a)return a.offsetY;var b=e(a),c=b.getBoundingClientRect();return a.clientY-c.top}return 0}c.buttons=d,c.element=e,c.x=f,c.y=g},{}],415:[function(a,b,c){"use strict";function d(a,b,c){"function"==typeof a&&(c=!!b,b=a,a=window);var d=e("ex",a),f=function(a){c&&a.preventDefault();var e=a.deltaX||0,f=a.deltaY||0,g=a.deltaZ||0,h=a.deltaMode,i=1;switch(h){case 1:i=d;break;case 2:i=window.innerHeight}if(e*=i,f*=i,g*=i,e||f||g)return b(e,f,g,a)};return a.addEventListener("wheel",f),f}var e=a("to-px");b.exports=d},{"to-px":490}],416:[function(a,b,c){"use strict";function d(a){return"a"+a}function e(a){return"d"+a}function f(a,b){return"c"+a+"_"+b}function g(a){return"s"+a}function h(a,b){return"t"+a+"_"+b}function i(a){return"o"+a}function j(a){return"x"+a}function k(a){return"p"+a}function l(a,b){return"d"+a+"_"+b}function m(a){return"i"+a}function n(a,b){return"u"+a+"_"+b}function o(a){return"b"+a}function p(a){return"y"+a}function q(a){return"e"+a}function r(a){return"v"+a}function s(a,b,c){for(var d=0,e=0;e<a;++e)b&1<<e&&(d|=1<<c[e]);return d}function t(a,b,c,t,u,C){function D(a,b){M.push("for(",m(u[a]),"=",b,";",m(u[a]),"<",g(u[a]),";","++",m(u[a]),"){")}function E(a){for(var b=0;b<J;++b)M.push(k(b),"+=",n(b,u[a]),";");M.push("}")}function F(a){for(var b=a-1;b>=0;--b)D(b,0);for(var c=[],b=0;b<J;++b)C[b]?c.push(e(b)+".get("+k(b)+")"):c.push(e(b)+"["+k(b)+"]");for(var b=0;b<t;++b)c.push(j(b));M.push(x,"[",A,"++]=phase(",c.join(),");");for(var b=0;b<a;++b)E(b);for(var d=0;d<J;++d)M.push(k(d),"+=",n(d,u[a]),";")}function G(a){for(var b=0;b<J;++b)C[b]?M.push(f(b,0),"=",e(b),".get(",k(b),");"):M.push(f(b,0),"=",e(b),"[",k(b),"];");for(var c=[],b=0;b<J;++b)c.push(f(b,0));for(var b=0;b<t;++b)c.push(j(b));M.push(o(0),"=",x,"[",A,"]=phase(",c.join(),");");for(var d=1;d<1<<K;++d)M.push(o(d),"=",x,"[",A,"+",q(d),"];");for(var g=[],d=1;d<1<<K;++d)g.push("("+o(0)+"!=="+o(d)+")");M.push("if(",g.join("||"),"){");for(var h=[],b=0;b<K;++b)h.push(m(b));for(var b=0;b<J;++b){h.push(f(b,0));for(var d=1;d<1<<K;++d)C[b]?M.push(f(b,d),"=",e(b),".get(",k(b),"+",l(b,d),");"):M.push(f(b,d),"=",e(b),"[",k(b),"+",l(b,d),"];"),h.push(f(b,d))}for(var b=0;b<1<<K;++b)h.push(o(b));for(var b=0;b<t;++b)h.push(j(b));M.push("vertex(",h.join(),");",r(0),"=",w,"[",A,"]=",y,"++;");for(var i=(1<<K)-1,n=o(i),d=0;d<K;++d)if(0===(a&~(1<<d))){for(var p=i^1<<d,s=o(p),u=[],v=p;v>0;v=v-1&p)u.push(w+"["+A+"+"+q(v)+"]");u.push(r(0));for(var v=0;v<J;++v)1&d?u.push(f(v,i),f(v,p)):u.push(f(v,p),f(v,i));1&d?u.push(n,s):u.push(s,n);for(var v=0;v<t;++v)u.push(j(v));M.push("if(",n,"!==",s,"){","face(",u.join(),")}")}M.push("}",A,"+=1;")}function H(){for(var a=1;a<1<<K;++a)M.push(B,"=",q(a),";",q(a),"=",p(a),";",p(a),"=",B,";")}function I(a,b){if(a<0)return void G(b);F(a),M.push("if(",g(u[a]),">0){",m(u[a]),"=1;"),I(a-1,b|1<<u[a]);for(var c=0;c<J;++c)M.push(k(c),"+=",n(c,u[a]),";");a===K-1&&(M.push(A,"=0;"),H()),D(a,2),I(a-1,b),a===K-1&&(M.push("if(",m(u[K-1]),"&1){",A,"=0;}"),H()),E(a),M.push("}")}var J=C.length,K=u.length;if(K<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var L="extractContour"+u.join("_"),M=[],N=[],O=[],P=0;P<J;++P)O.push(d(P));for(var P=0;P<t;++P)O.push(j(P));for(var P=0;P<K;++P)N.push(g(P)+"="+d(0)+".shape["+P+"]|0");for(var P=0;P<J;++P){N.push(e(P)+"="+d(P)+".data",i(P)+"="+d(P)+".offset|0");for(var Q=0;Q<K;++Q)N.push(h(P,Q)+"="+d(P)+".stride["+Q+"]|0")}for(var P=0;P<J;++P){N.push(k(P)+"="+i(P)),N.push(f(P,0));for(var Q=1;Q<1<<K;++Q){for(var R=[],S=0;S<K;++S)Q&1<<S&&R.push("-"+h(P,S));N.push(l(P,Q)+"=("+R.join("")+")|0"),N.push(f(P,Q)+"=0")}}for(var P=0;P<J;++P)for(var Q=0;Q<K;++Q){var T=[h(P,u[Q])];Q>0&&T.push(h(P,u[Q-1])+"*"+g(u[Q-1])),N.push(n(P,u[Q])+"=("+T.join("-")+")|0")}for(var P=0;P<K;++P)N.push(m(P)+"=0");N.push(y+"=0");for(var U=["2"],P=K-2;P>=0;--P)U.push(g(u[P]));N.push(z+"=("+U.join("*")+")|0",x+"=mallocUint32("+z+")",w+"=mallocUint32("+z+")",A+"=0"),N.push(o(0)+"=0");for(var Q=1;Q<1<<K;++Q){for(var V=[],W=[],S=0;S<K;++S)Q&1<<S&&(0===W.length?V.push("1"):V.unshift(W.join("*"))),W.push(g(u[S]));var X="";V[0].indexOf(g(u[K-2]))<0&&(X="-");var Y=s(K,Q,u);N.push(q(Y)+"=(-"+V.join("-")+")|0",p(Y)+"=("+X+V.join("-")+")|0",o(Y)+"=0")}N.push(r(0)+"=0",B+"=0"),I(K-1,0),M.push("freeUint32(",w,");freeUint32(",x,");");var Z=["'use strict';","function ",L,"(",O.join(),"){","var ",N.join(),";",M.join(""),"}","return ",L].join(""),$=new Function("vertex","face","phase","mallocUint32","freeUint32",Z);return $(a,b,c,v.mallocUint32,v.freeUint32)}function u(a){function b(a){throw new Error("ndarray-extract-contour: "+a)}"object"!=typeof a&&b("Must specify arguments");var c=a.order;Array.isArray(c)||b("Must specify order");var d=a.arrayArguments||1;d<1&&b("Must have at least one array argument");var e=a.scalarArguments||0;e<0&&b("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&b("Must specify vertex creation function"),"function"!=typeof a.cell&&b("Must specify cell creation function"),"function"!=typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],g=new Array(d),h=0;h<d;++h)f.indexOf(h)>=0?g[h]=!0:g[h]=!1;return t(a.vertex,a.cell,a.phase,e,c,g)}var v=a("typedarray-pool");b.exports=u;var w="V",x="P",y="N",z="Q",A="X",B="T"},{"typedarray-pool":496}],417:[function(a,b,c){"use strict";var d=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_4_arg1_=_inline_4_arg2_.apply(void 0,_inline_4_arg0_)}",
args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});b.exports=function(a,b){return d(a,b),a}},{"cwise/lib/wrapper":94}],418:[function(a,b,c){"use strict";function d(a){if(a in i)return i[a];for(var b=[],c=0;c<a;++c)b.push("out",c,"s=0.5*(inp",c,"l-inp",c,"r);");for(var d=["array"],e=["junk"],c=0;c<a;++c){d.push("array"),e.push("out"+c+"s");var f=g(a);f[c]=-1,d.push({array:0,offset:f.slice()}),f[c]=1,d.push({array:0,offset:f.slice()}),e.push("inp"+c+"l","inp"+c+"r")}return i[a]=h({args:d,pre:k,post:k,body:{body:b.join(""),args:e.map(function(a){return{name:a,lvalue:0===a.indexOf("out"),rvalue:0===a.indexOf("inp"),count:"junk"!==a|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+a})}function e(a){function b(b){for(var c=f-b.length,d=[],e=[],h=[],i=0;i<f;++i)b.indexOf(i+1)>=0?h.push("0"):b.indexOf(-(i+1))>=0?h.push("s["+i+"]-1"):(h.push("-1"),d.push("1"),e.push("s["+i+"]-2"));var j=".lo("+d.join()+").hi("+e.join()+")";if(0===d.length&&(j=""),c>0){g.push("if(1");for(var i=0;i<f;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||g.push("&&s[",i,"]>2");g.push("){grad",c,"(src.pick(",h.join(),")",j);for(var i=0;i<f;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||g.push(",dst.pick(",h.join(),",",i,")",j);g.push(");")}for(var i=0;i<b.length;++i){var k=Math.abs(b[i])-1,l="dst.pick("+h.join()+","+k+")"+j;switch(a[k]){case"clamp":var m=h.slice(),n=h.slice();b[i]<0?m[k]="s["+k+"]-2":n[k]="1",0===c?g.push("if(s[",k,"]>1){dst.set(",h.join(),",",k,",0.5*(src.get(",m.join(),")-src.get(",n.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):g.push("if(s[",k,"]>1){diff(",l,",src.pick(",m.join(),")",j,",src.pick(",n.join(),")",j,");}else{zero(",l,");};");break;case"mirror":0===c?g.push("dst.set(",h.join(),",",k,",0);"):g.push("zero(",l,");");break;case"wrap":var o=h.slice(),p=h.slice();b[i]<0?(o[k]="s["+k+"]-2",p[k]="0"):(o[k]="s["+k+"]-1",p[k]="1"),0===c?g.push("if(s[",k,"]>2){dst.set(",h.join(),",",k,",0.5*(src.get(",o.join(),")-src.get(",p.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):g.push("if(s[",k,"]>2){diff(",l,",src.pick(",o.join(),")",j,",src.pick(",p.join(),")",j,");}else{zero(",l,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}c>0&&g.push("};")}var c=a.join(),e=j[c];if(e)return e;for(var f=a.length,g=["function gradient(dst,src){var s=src.shape.slice();"],h=0;h<1<<f;++h){for(var k=[],n=0;n<f;++n)h&1<<n&&k.push(n+1);for(var o=0;o<1<<k.length;++o){for(var p=k.slice(),n=0;n<k.length;++n)o&1<<n&&(p[n]=-p[n]);b(p)}}g.push("return dst;};return gradient");for(var q=["diff","zero"],r=[l,m],h=1;h<=f;++h)q.push("grad"+h),r.push(d(h));q.push(g.join(""));var s=Function.apply(void 0,q),e=s.apply(void 0,r);return i[c]=e,e}function f(a,b,c){if(Array.isArray(c)){if(c.length!==b.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else c="string"==typeof c?g(b.dimension,c):g(b.dimension,"clamp");if(a.dimension!==b.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(a.shape[b.dimension]!==b.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<b.dimension;++d)if(a.shape[d]!==b.shape[d])throw new Error("ndarray-gradient: shape mismatch");if(0===b.size)return a;if(b.dimension<=0)return a.set(0),a;var f=e(c);return f(a,b)}b.exports=f;var g=a("dup"),h=a("cwise-compiler"),i={},j={},k={body:"",args:[],thisVars:[],localVars:[]},l=h({args:["array","array","array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),m=h({args:["array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":91,dup:98}],419:[function(a,b,c){"use strict";function d(a,b,c){var d=b.dimension,g=f([],c);return e(a,b,function(a,b){for(var c=0;c<d;++c){a[c]=g[(d+1)*d+c];for(var e=0;e<d;++e)a[c]+=g[(d+1)*e+c]*b[e]}for(var f=g[(d+1)*(d+1)-1],e=0;e<d;++e)f+=g[(d+1)*e+d]*b[e];for(var h=1/f,c=0;c<d;++c)a[c]*=h;return a}),a}var e=a("ndarray-warp"),f=a("gl-matrix-invert");b.exports=d},{"gl-matrix-invert":160,"ndarray-warp":426}],420:[function(a,b,c){"use strict";function d(a,b){var c=Math.floor(b),d=b-c,e=0<=c&&c<a.shape[0],f=0<=c+1&&c+1<a.shape[0],g=e?+a.get(c):0,h=f?+a.get(c+1):0;return(1-d)*g+d*h}function e(a,b,c){var d=Math.floor(b),e=b-d,f=0<=d&&d<a.shape[0],g=0<=d+1&&d+1<a.shape[0],h=Math.floor(c),i=c-h,j=0<=h&&h<a.shape[1],k=0<=h+1&&h+1<a.shape[1],l=f&&j?a.get(d,h):0,m=f&&k?a.get(d,h+1):0,n=g&&j?a.get(d+1,h):0,o=g&&k?a.get(d+1,h+1):0;return(1-i)*((1-e)*l+e*n)+i*((1-e)*m+e*o)}function f(a,b,c,d){var e=Math.floor(b),f=b-e,g=0<=e&&e<a.shape[0],h=0<=e+1&&e+1<a.shape[0],i=Math.floor(c),j=c-i,k=0<=i&&i<a.shape[1],l=0<=i+1&&i+1<a.shape[1],m=Math.floor(d),n=d-m,o=0<=m&&m<a.shape[2],p=0<=m+1&&m+1<a.shape[2],q=g&&k&&o?a.get(e,i,m):0,r=g&&l&&o?a.get(e,i+1,m):0,s=h&&k&&o?a.get(e+1,i,m):0,t=h&&l&&o?a.get(e+1,i+1,m):0,u=g&&k&&p?a.get(e,i,m+1):0,v=g&&l&&p?a.get(e,i+1,m+1):0,w=h&&k&&p?a.get(e+1,i,m+1):0,x=h&&l&&p?a.get(e+1,i+1,m+1):0;return(1-n)*((1-j)*((1-f)*q+f*s)+j*((1-f)*r+f*t))+n*((1-j)*((1-f)*u+f*w)+j*((1-f)*v+f*x))}function g(a){var b,c,d=0|a.shape.length,e=new Array(d),f=new Array(d),g=new Array(d),h=new Array(d);for(b=0;b<d;++b)c=+arguments[b+1],e[b]=Math.floor(c),f[b]=c-e[b],g[b]=0<=e[b]&&e[b]<a.shape[b],h[b]=0<=e[b]+1&&e[b]+1<a.shape[b];var i,j,k,l=0;a:for(b=0;b<1<<d;++b){for(j=1,k=a.offset,i=0;i<d;++i)if(b&1<<i){if(!h[i])continue a;j*=f[i],k+=a.stride[i]*(e[i]+1)}else{if(!g[i])continue a;j*=1-f[i],k+=a.stride[i]*e[i]}l+=j*a.data[k]}return l}function h(a,b,c,h){switch(a.shape.length){case 0:return 0;case 1:return d(a,b);case 2:return e(a,b,c);case 3:return f(a,b,c,h);default:return g.apply(void 0,arguments)}}b.exports=h,b.exports.d1=d,b.exports.d2=e,b.exports.d3=f},{}],421:[function(a,b,c){"use strict";function d(a){if(!a)return h;for(var b=0;b<a.args.length;++b){var c=a.args[b];0===b?a.args[b]={name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[b]={name:c,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function e(a){return g({args:a.args,pre:d(a.pre),body:d(a.body),post:d(a.proc),funcName:a.funcName})}function f(a){for(var b=[],c=0;c<a.args.length;++c)b.push("a"+c);var d=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""));return d(e(a))}var g=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},i={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in i){var b=i[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+b+"=b"},rvalue:!0,funcName:a+"eq"}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"=s"},rvalue:!0,funcName:a+"seq"})}}();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in j){var b=j[a];c[a]=f({args:["array","array"],body:{args:["a","b"],body:"a="+b+"b"},funcName:a}),c[a+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+b+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var k={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in k){var b=k[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<l.length;++a){var b=l[a];c[b]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:b}),c[b+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}}();var m=["max","min","atan2","pow"];!function(){for(var a=0;a<m.length;++a){var b=m[a];c[b]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b}),c[b+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b+"s"}),c[b+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"}),c[b+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}}();var n=["atan2","pow"];!function(){for(var a=0;a<n.length;++a){var b=n[a];c[b+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"op"}),c[b+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"ops"}),c[b+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"}),c[b+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}}(),c.any=g({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=g({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=g({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=g({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=g({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=g({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=f({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=g({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":91}],422:[function(a,b,c){"use strict";var d=a("ndarray"),e=a("./doConvert.js");b.exports=function(a,b){for(var c=[],f=a,g=1;Array.isArray(f);)c.push(f.length),g*=f.length,f=f[0];return 0===c.length?d():(b||(b=d(new Float64Array(g),c)),e(b,a),b)}},{"./doConvert.js":423,ndarray:427}],423:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":91}],424:[function(a,b,c){"use strict";function d(a){switch(a){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function e(a){for(var b=[],c=0;c<a;++c)b.push("s"+c);for(var c=0;c<a;++c)b.push("n"+c);for(var c=1;c<a;++c)b.push("d"+c);for(var c=1;c<a;++c)b.push("e"+c);for(var c=1;c<a;++c)b.push("f"+c);return b}function f(a,b){function c(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function f(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}var g=["'use strict'"],h=["ndarrayInsertionSort",a.join("d"),b].join(""),i=["left","right","data","offset"].concat(e(a.length)),j=d(b),k=["i,j,cptr,ptr=left*s0+offset"];if(a.length>1){for(var l=[],m=1;m<a.length;++m)k.push("i"+m),l.push("n"+m);j?k.push("scratch=malloc("+l.join("*")+")"):k.push("scratch=new Array("+l.join("*")+")"),k.push("dptr","sptr","a","b")}else k.push("scratch");if(g.push(["function ",h,"(",i.join(","),"){var ",k.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),a.length>1){g.push("dptr=0;sptr=ptr");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push("scratch[dptr++]=",c("sptr"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("sptr+=d"+n,"}")}g.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var m=1;m<a.length;++m)1===m&&g.push("__l:"),g.push(["for(i",m,"=0;i",m,"<n",m,";++i",m,"){"].join(""));g.push(["a=",c("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var m=a.length-1;m>=1;--m)g.push("sptr+=e"+m,"dptr+=f"+m,"}");g.push("dptr=cptr;sptr=cptr-s0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr",c("sptr")));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push(["dptr+=d",n,";sptr+=d",n].join(""),"}")}g.push("cptr-=s0\n}"),g.push("dptr=cptr;sptr=0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr","scratch[sptr++]"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("dptr+=d"+n,"}")}}else g.push("scratch="+c("ptr"),"while((j-->left)&&("+c("cptr-s0")+">scratch)){",f("cptr",c("cptr-s0")),"cptr-=s0","}",f("cptr","scratch"));if(g.push("}"),a.length>1&&j&&g.push("free(scratch)"),g.push("} return "+h),j){var o=new Function("malloc","free",g.join("\n"));return o(j[0],j[1])}var o=new Function(g.join("\n"));return o()}function g(a,b,c){function f(a){return["(offset+",a,"*s0)"].join("")}function g(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function h(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}function i(b,c,d){if(1===b.length)v.push("ptr0="+f(b[0]));else for(var e=0;e<b.length;++e)v.push(["b_ptr",e,"=s0*",b[e]].join(""));c&&v.push("pivot_ptr=0"),v.push("ptr_shift=offset");for(var e=a.length-1;e>=0;--e){var g=a[e];0!==g&&v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""))}if(b.length>1)for(var e=0;e<b.length;++e)v.push(["ptr",e,"=b_ptr",e,"+ptr_shift"].join(""));v.push(d),c&&v.push("++pivot_ptr");for(var e=0;e<a.length;++e){var g=a[e];0!==g&&(b.length>1?v.push("ptr_shift+=d"+g):v.push("ptr0+=d"+g),v.push("}"))}}function k(b,c,d,e){if(1===c.length)v.push("ptr0="+f(c[0]));else{for(var g=0;g<c.length;++g)v.push(["b_ptr",g,"=s0*",c[g]].join(""));v.push("ptr_shift=offset")}d&&v.push("pivot_ptr=0"),b&&v.push(b+":");for(var g=1;g<a.length;++g)v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""));if(c.length>1)for(var g=0;g<c.length;++g)v.push(["ptr",g,"=b_ptr",g,"+ptr_shift"].join(""));v.push(e);for(var g=a.length-1;g>=1;--g)d&&v.push("pivot_ptr+=f"+g),c.length>1?v.push("ptr_shift+=e"+g):v.push("ptr0+=e"+g),v.push("}")}function l(){a.length>1&&y&&v.push("free(pivot1)","free(pivot2)")}function m(b,c){var d="el"+b,e="el"+c;if(a.length>1){var h="__l"+ ++z;k(h,[d,e],!1,["comp=",g("ptr0"),"-",g("ptr1"),"\n","if(comp>0){tmp0=",d,";",d,"=",e,";",e,"=tmp0;break ",h,"}\n","if(comp<0){break ",h,"}"].join(""))}else v.push(["if(",g(f(d)),">",g(f(e)),"){tmp0=",d,";",d,"=",e,";",e,"=tmp0}"].join(""))}function n(b,c){a.length>1?i([b,c],!1,h("ptr0",g("ptr1"))):v.push(h(f(b),g(f(c))))}function o(b,c,d){if(a.length>1){var e="__l"+ ++z;k(e,[c],!0,[b,"=",g("ptr0"),"-pivot",d,"[pivot_ptr]\n","if(",b,"!==0){break ",e,"}"].join(""))}else v.push([b,"=",g(f(c)),"-pivot",d].join(""))}function p(b,c){a.length>1?i([b,c],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join("")):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join(""))}function q(b,c,d){a.length>1?(i([b,c,d],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join("")),v.push("++"+c,"--"+d)):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","ptr2=",f(d),"\n","++",c,"\n","--",d,"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join(""))}function r(a,b){p(a,b),v.push("--"+b)}function s(b,c,d){a.length>1?i([b,c],!0,[h("ptr0",g("ptr1")),"\n",h("ptr1",["pivot",d,"[pivot_ptr]"].join(""))].join("")):v.push(h(f(b),g(f(c))),h(f(c),"pivot"+d))}function t(b,c){v.push(["if((",c,"-",b,")<=",j,"){\n","insertionSort(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}else{\n",w,"(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}"].join(""))}function u(b,c,d){a.length>1?(v.push(["__l",++z,":while(true){"].join("")),i([b],!0,["if(",g("ptr0"),"!==pivot",c,"[pivot_ptr]){break __l",z,"}"].join("")),v.push(d,"}")):v.push(["while(",g(f(b)),"===pivot",c,"){",d,"}"].join(""))}var v=["'use strict'"],w=["ndarrayQuickSort",a.join("d"),b].join(""),x=["left","right","data","offset"].concat(e(a.length)),y=d(b),z=0;v.push(["function ",w,"(",x.join(","),"){"].join(""));var A=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(a.length>1){for(var B=[],C=1;C<a.length;++C)B.push("n"+C),A.push("i"+C);for(var C=0;C<8;++C)A.push("b_ptr"+C);A.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+B.join("*")),y?A.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):A.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else A.push("pivot1","pivot2");if(v.push("var "+A.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),a.length>1?i(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),"\n","pivot2[pivot_ptr]=",g("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",g("ptr0"),"\n","y=",g("ptr2"),"\n","z=",g("ptr4"),"\n",h("ptr5","x"),"\n",h("ptr6","y"),"\n",h("ptr7","z")].join("")):v.push(["pivot1=",g(f("el2")),"\n","pivot2=",g(f("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",g(f("el1")),"\n","y=",g(f("el3")),"\n","z=",g(f("el5")),"\n",h(f("index1"),"x"),"\n",h(f("index3"),"y"),"\n",h(f("index5"),"z")].join("")),n("index2","left"),n("index4","right"),v.push("if(pivots_are_equal){"),v.push("for(k=less;k<=great;++k){"),o("comp","k",1),v.push("if(comp===0){continue}"),v.push("if(comp<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),v.push("while(true){"),o("comp","great",1),v.push("if(comp>0){"),v.push("great--"),v.push("}else if(comp<0){"),q("k","less","great"),v.push("break"),v.push("}else{"),r("k","great"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}else{"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2>0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp>0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),s("left","(less-1)",1),s("right","(great+1)",2),t("left","(less-2)"),t("(great+2)","right"),v.push("if(pivots_are_equal){"),l(),v.push("return"),v.push("}"),v.push("if(less<index1&&great>index5){"),u("less",1,"++less"),u("great",2,"--great"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1===0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2===0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp===0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),l(),t("less","great"),v.push("}return "+w),a.length>1&&y){var D=new Function("insertionSort","malloc","free",v.join("\n"));return D(c,y[0],y[1])}var D=new Function("insertionSort",v.join("\n"));return D(c)}function h(a,b){var c=["'use strict'"],d=["ndarraySortWrapper",a.join("d"),b].join(""),h=["array"];c.push(["function ",d,"(",h.join(","),"){"].join(""));for(var i=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],k=0;k<a.length;++k)i.push(["s",k,"=stride[",k,"]|0,n",k,"=shape[",k,"]|0"].join(""));for(var l=new Array(a.length),m=[],k=0;k<a.length;++k){var n=a[k];0!==n&&(0===m.length?l[n]="1":l[n]=m.join("*"),m.push("n"+n))}for(var o=-1,p=-1,k=0;k<a.length;++k){var q=a[k];0!==q&&(o>0?i.push(["d",q,"=s",q,"-d",o,"*n",o].join("")):i.push(["d",q,"=s",q].join("")),o=q);var n=a.length-1-k;0!==n&&(p>0?i.push(["e",n,"=s",n,"-e",p,"*n",p,",f",n,"=",l[n],"-f",p,"*n",p].join("")):i.push(["e",n,"=s",n,",f",n,"=",l[n]].join("")),p=n)}c.push("var "+i.join(","));var r=["0","n0-1","data","offset"].concat(e(a.length));c.push(["if(n0<=",j,"){","insertionSort(",r.join(","),")}else{","quickSort(",r.join(","),")}"].join("")),c.push("}return "+d);var s=new Function("insertionSort","quickSort",c.join("\n")),t=f(a,b),u=g(a,b,t);return s(t,u)}var i=a("typedarray-pool"),j=32;b.exports=h},{"typedarray-pool":496}],425:[function(a,b,c){"use strict";function d(a){var b=a.order,c=a.dtype,d=[b,c],g=d.join(":"),h=f[g];return h||(f[g]=h=e(b,c)),h(a),a}var e=a("./lib/compile_sort.js"),f={};b.exports=d},{"./lib/compile_sort.js":424}],426:[function(a,b,c){"use strict";var d=a("ndarray-linear-interpolate"),e=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_21_arg4_)}",args:[{name:"_inline_21_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_21_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_21_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_21_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_21_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_22_arg2_(this_warped,_inline_22_arg0_),_inline_22_arg1_=_inline_22_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_22_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_22_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),f=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_25_arg2_(this_warped,_inline_25_arg0_),_inline_25_arg1_=_inline_25_arg3_(_inline_25_arg4_,this_warped[0])}",args:[{name:"_inline_25_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_25_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_25_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_25_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_25_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),g=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_28_arg2_(this_warped,_inline_28_arg0_),_inline_28_arg1_=_inline_28_arg3_(_inline_28_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_28_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_28_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_28_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_28_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_28_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_31_arg2_(this_warped,_inline_31_arg0_),_inline_31_arg1_=_inline_31_arg3_(_inline_31_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_31_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_31_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_31_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_31_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_31_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});b.exports=function(a,b,c){switch(b.shape.length){case 1:f(a,c,d.d1,b);break;case 2:g(a,c,d.d2,b);break;case 3:h(a,c,d.d3,b);break;default:e(a,c,d.bind(void 0,b),b.shape.length)}return a}},{"cwise/lib/wrapper":94,"ndarray-linear-interpolate":420}],427:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");b<0&&(c="View_Nil"+a);var d="generic"===a;if(b===-1){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);
return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),b<4?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;q<b;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;i<h;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":257,"is-buffer":258}],428:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return b<0?-f:f;var c=e.hi(a),d=e.lo(a);return b>a==a>0?d===g?(c+=1,d=0):d+=1:0===d?(d=g,c-=1):d-=1,e.pack(d,c)}var e=a("double-bits"),f=Math.pow(2,-1074),g=-1>>>0;b.exports=d},{"double-bits":97}],429:[function(a,b,c){var d=1e-6,e=1e-6;c.vertexNormals=function(a,b,c){for(var e=b.length,f=new Array(e),g=void 0===c?d:c,h=0;h<e;++h)f[h]=[0,0,0];for(var h=0;h<a.length;++h)for(var i=a[h],j=0,k=i[i.length-1],l=i[0],m=0;m<i.length;++m){j=k,k=l,l=i[(m+1)%i.length];for(var n=b[j],o=b[k],p=b[l],q=new Array(3),r=0,s=new Array(3),t=0,u=0;u<3;++u)q[u]=n[u]-o[u],r+=q[u]*q[u],s[u]=p[u]-o[u],t+=s[u]*s[u];if(r*t>g)for(var v=f[k],w=1/Math.sqrt(r*t),u=0;u<3;++u){var x=(u+1)%3,y=(u+2)%3;v[u]+=w*(s[x]*q[y]-s[y]*q[x])}}for(var h=0;h<e;++h){for(var v=f[h],z=0,u=0;u<3;++u)z+=v[u]*v[u];if(z>g)for(var w=1/Math.sqrt(z),u=0;u<3;++u)v[u]*=w;else for(var u=0;u<3;++u)v[u]=0}return f},c.faceNormals=function(a,b,c){for(var d=a.length,f=new Array(d),g=void 0===c?e:c,h=0;h<d;++h){for(var i=a[h],j=new Array(3),k=0;k<3;++k)j[k]=b[i[k]];for(var l=new Array(3),m=new Array(3),k=0;k<3;++k)l[k]=j[1][k]-j[0][k],m[k]=j[2][k]-j[0][k];for(var n=new Array(3),o=0,k=0;k<3;++k){var p=(k+1)%3,q=(k+2)%3;n[k]=l[p]*m[q]-l[q]*m[p],o+=n[k]*n[k]}o=o>g?1/Math.sqrt(o):0;for(var k=0;k<3;++k)n[k]*=o;f[h]=n}return f}},{}],430:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){var k=b+f+j;if(l>0){var l=Math.sqrt(k+1);a[0]=.5*(g-i)/l,a[1]=.5*(h-d)/l,a[2]=.5*(c-f)/l,a[3]=.5*l}else{var m=Math.max(b,f,j),l=Math.sqrt(2*m-k+1);b>=m?(a[0]=.5*l,a[1]=.5*(e+c)/l,a[2]=.5*(h+d)/l,a[3]=.5*(g-i)/l):f>=m?(a[0]=.5*(c+e)/l,a[1]=.5*l,a[2]=.5*(i+g)/l,a[3]=.5*(h-d)/l):(a[0]=.5*(d+h)/l,a[1]=.5*(g+i)/l,a[2]=.5*l,a[3]=.5*(c-e)/l)}return a}b.exports=d},{}],431:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a,b,c,d){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2))}function f(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=e(c,d,f,g);h>1e-6?(a[0]=c/h,a[1]=d/h,a[2]=f/h,a[3]=g/h):(a[0]=a[1]=a[2]=0,a[3]=1)}function g(a,b,c){this.radius=i([c]),this.center=i(b),this.rotation=i(a),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.rotation||[0,0,0,1],d=a.radius||1;b=[].slice.call(b,0,3),c=[].slice.call(c,0,4),f(c,c);var e=new g(c,b,Math.log(d));return e.setDistanceLimits(a.zoomMin,a.zoomMax),("eye"in a||"up"in a)&&e.lookAt(0,a.eye,a.center,a.up),e}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/lookAt"),k=a("gl-mat4/fromQuat"),l=a("gl-mat4/invert"),m=a("./lib/quatFromFrame"),n=g.prototype;n.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},n.recalcMatrix=function(a){this.radius.curve(a),this.center.curve(a),this.rotation.curve(a);var b=this.computedRotation;f(b,b);var c=this.computedMatrix;k(c,b);var d=this.computedCenter,e=this.computedEye,g=this.computedUp,h=Math.exp(this.computedRadius[0]);e[0]=d[0]+h*c[2],e[1]=d[1]+h*c[6],e[2]=d[2]+h*c[10],g[0]=c[1],g[1]=c[5],g[2]=c[9];for(var i=0;i<3;++i){for(var j=0,l=0;l<3;++l)j+=c[i+4*l]*e[l];c[12+i]=-j}},n.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;d<16;++d)b[d]=c[d];return b}return c},n.idle=function(a){this.center.idle(a),this.radius.idle(a),this.rotation.idle(a)},n.flush=function(a){this.center.flush(a),this.radius.flush(a),this.rotation.flush(a)},n.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=f[1],h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=f[2],q=f[6],r=f[10],s=p*g+q*h+r*i,t=p*k+q*l+r*m;p-=s*g+t*k,q-=s*h+t*l,r-=s*i+t*m;var u=d(p,q,r);p/=u,q/=u,r/=u;var v=k*b+g*c,w=l*b+h*c,x=m*b+i*c;this.center.move(a,v,w,x);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+e),this.radius.set(a,Math.log(y))},n.rotate=function(a,b,c,f){this.recalcMatrix(a),b=b||0,c=c||0;var g=this.computedMatrix,h=g[0],i=g[4],j=g[8],k=g[1],l=g[5],m=g[9],n=g[2],o=g[6],p=g[10],q=b*h+c*k,r=b*i+c*l,s=b*j+c*m,t=-(o*s-p*r),u=-(p*q-n*s),v=-(n*r-o*q),w=Math.sqrt(Math.max(0,1-Math.pow(t,2)-Math.pow(u,2)-Math.pow(v,2))),x=e(t,u,v,w);x>1e-6?(t/=x,u/=x,v/=x,w/=x):(t=u=v=0,w=1);var y=this.computedRotation,z=y[0],A=y[1],B=y[2],C=y[3],D=z*w+C*t+A*v-B*u,E=A*w+C*u+B*t-z*v,F=B*w+C*v+z*u-A*t,G=C*w-z*t-A*u-B*v;if(f){t=n,u=o,v=p;var H=Math.sin(f)/d(t,u,v);t*=H,u*=H,v*=H,w=Math.cos(b),D=D*w+G*t+E*v-F*u,E=E*w+G*u+F*t-D*v,F=F*w+G*v+D*u-E*t,G=G*w-D*t-E*u-F*v}var I=e(D,E,F,G);I>1e-6?(D/=I,E/=I,F/=I,G/=I):(D=E=F=0,G=1),this.rotation.set(a,D,E,F,G)},n.lookAt=function(a,b,c,d){this.recalcMatrix(a),c=c||this.computedCenter,b=b||this.computedEye,d=d||this.computedUp;var e=this.computedMatrix;j(e,b,c,d);var g=this.computedRotation;m(g,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),f(g,g),this.rotation.set(a,g[0],g[1],g[2],g[3]);for(var h=0,i=0;i<3;++i)h+=Math.pow(c[i]-b[i],2);this.radius.set(a,.5*Math.log(Math.max(h,1e-6))),this.center.set(a,c[0],c[1],c[2])},n.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},n.setMatrix=function(a,b){var c=this.computedRotation;m(c,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),f(c,c),this.rotation.set(a,c[0],c[1],c[2],c[3]);var d=this.computedMatrix;l(d,b);var e=d[15];if(Math.abs(e)>1e-6){var g=d[12]/e,h=d[13]/e,i=d[14]/e;this.recalcMatrix(a);var j=Math.exp(this.computedRadius[0]);this.center.set(a,g-d[2]*j,h-d[6]*j,i-d[10]*j),this.radius.idle(a)}else this.center.idle(a),this.radius.idle(a)},n.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},n.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-(1/0),b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},n.getDistanceLimits=function(a){var b=this.radius.bounds;return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},n.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},n.fromJSON=function(a){var b=this.lastT(),c=a.center;c&&this.center.set(b,c[0],c[1],c[2]);var d=a.rotation;d&&this.rotation.set(b,d[0],d[1],d[2],d[3]);var e=a.distance;e&&e>0&&this.radius.set(b,Math.log(e)),this.setDistanceLimits(a.zoomMin,a.zoomMax)}},{"./lib/quatFromFrame":430,"filtered-vector":106,"gl-mat4/fromQuat":146,"gl-mat4/invert":149,"gl-mat4/lookAt":150}],432:[function(a,b,c){"use strict";var d=a("repeat-string");b.exports=function(a,b,c){return c="undefined"!=typeof c?c+"":" ",d(c,b)+a}},{"repeat-string":457}],433:[function(a,b,c){b.exports=function(a,b){b||(b=[0,""]),a=String(a);var c=parseFloat(a,10);return b[0]=c,b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],434:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:445}],435:[function(a,b,c){"use strict";function d(a){var b;a&&a.length&&(b=a,a=b.length);var c=new Uint8Array(a||0);return b&&c.set(b),c.readUInt32LE=f.readUInt32LE,c.writeUInt32LE=f.writeUInt32LE,c.readInt32LE=f.readInt32LE,c.writeInt32LE=f.writeInt32LE,c.readFloatLE=f.readFloatLE,c.writeFloatLE=f.writeFloatLE,c.readDoubleLE=f.readDoubleLE,c.writeDoubleLE=f.writeDoubleLE,c.toString=f.toString,c.write=f.write,c.slice=f.slice,c.copy=f.copy,c._isBuffer=!0,c}function e(a){for(var b,c,d=a.length,e=[],f=0;f<d;f++){if(b=a.charCodeAt(f),b>55295&&b<57344){if(!c){b>56319||f+1===d?e.push(239,191,189):c=b;continue}if(b<56320){e.push(239,191,189),c=b;continue}b=c-55296<<10|b-56320|65536,c=null}else c&&(e.push(239,191,189),c=null);b<128?e.push(b):b<2048?e.push(b>>6|192,63&b|128):b<65536?e.push(b>>12|224,b>>6&63|128,63&b|128):e.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}return e}b.exports=d;var f,g,h,i=a("ieee754");f={readUInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},writeUInt32LE:function(a,b){this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24},readInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},readFloatLE:function(a){return i.read(this,a,!0,23,4)},readDoubleLE:function(a){return i.read(this,a,!0,52,8)},writeFloatLE:function(a,b){return i.write(this,a,b,!0,23,4)},writeDoubleLE:function(a,b){return i.write(this,a,b,!0,52,8)},toString:function(a,b,c){var d="",e="";b=b||0,c=Math.min(this.length,c||this.length);for(var f=b;f<c;f++){var g=this[f];g<=127?(d+=decodeURIComponent(e)+String.fromCharCode(g),e=""):e+="%"+g.toString(16)}return d+=decodeURIComponent(e)},write:function(a,b){for(var c=a===g?h:e(a),d=0;d<c.length;d++)this[b+d]=c[d]},slice:function(a,b){return this.subarray(a,b)},copy:function(a,b){b=b||0;for(var c=0;c<this.length;c++)a[b+c]=this[c]}},f.writeInt32LE=f.writeUInt32LE,d.byteLength=function(a){return g=a,h=e(a),h.length},d.isBuffer=function(a){return!(!a||!a._isBuffer)}},{ieee754:253}],436:[function(a,b,c){(function(c){"use strict";function d(a){this.buf=q.isBuffer(a)?a:new q(a||0),this.pos=0,this.length=this.buf.length}function e(a,b){var c,d=b.buf;if(c=d[b.pos++],a+=268435456*(127&c),c<128)return a;if(c=d[b.pos++],a+=34359738368*(127&c),c<128)return a;if(c=d[b.pos++],a+=4398046511104*(127&c),c<128)return a;if(c=d[b.pos++],a+=562949953421312*(127&c),c<128)return a;if(c=d[b.pos++],a+=72057594037927940*(127&c),c<128)return a;if(c=d[b.pos++],a+=0x8000000000000000*(127&c),c<128)return a;throw new Error("Expected varint not more than 10 bytes")}function f(a,b){b.realloc(10);for(var c=b.pos+10;a>=1;){if(b.pos>=c)throw new Error("Given varint doesn't fit into 10 bytes");var d=255&a;b.buf[b.pos++]=d|(a>=128?128:0),a/=128}}function g(a,b,c){var d=b<=16383?1:b<=2097151?2:b<=268435455?3:Math.ceil(Math.log(b)/(7*Math.LN2));c.realloc(d);for(var e=c.pos-1;e>=a;e--)c.buf[e+d]=c.buf[e]}function h(a,b){for(var c=0;c<a.length;c++)b.writeVarint(a[c])}function i(a,b){for(var c=0;c<a.length;c++)b.writeSVarint(a[c])}function j(a,b){for(var c=0;c<a.length;c++)b.writeFloat(a[c])}function k(a,b){for(var c=0;c<a.length;c++)b.writeDouble(a[c])}function l(a,b){for(var c=0;c<a.length;c++)b.writeBoolean(a[c])}function m(a,b){for(var c=0;c<a.length;c++)b.writeFixed32(a[c])}function n(a,b){for(var c=0;c<a.length;c++)b.writeSFixed32(a[c])}function o(a,b){for(var c=0;c<a.length;c++)b.writeFixed64(a[c])}function p(a,b){for(var c=0;c<a.length;c++)b.writeSFixed64(a[c])}b.exports=d;var q=c.Buffer||a("./buffer");d.Varint=0,d.Fixed64=1,d.Bytes=2,d.Fixed32=5;var r=4294967296,s=1/r,t=Math.pow(2,63);d.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,f=this.pos;a(e,b,this),this.pos===f&&this.skip(d)}return b},readMessage:function(a,b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=this.buf.readUInt32LE(this.pos);return this.pos+=4,a},readSFixed32:function(){var a=this.buf.readInt32LE(this.pos);return this.pos+=4,a},readFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*r;return this.pos+=8,a},readSFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*r;return this.pos+=8,a},readFloat:function(){var a=this.buf.readFloatLE(this.pos);return this.pos+=4,a},readDouble:function(){var a=this.buf.readDoubleLE(this.pos);return this.pos+=8,a},readVarint:function(){var a,b,c=this.buf;return b=c[this.pos++],a=127&b,b<128?a:(b=c[this.pos++],a|=(127&b)<<7,b<128?a:(b=c[this.pos++],a|=(127&b)<<14,b<128?a:(b=c[this.pos++],a|=(127&b)<<21,b<128?a:e(a,this))))},readVarint64:function(){var a=this.pos,b=this.readVarint();if(b<t)return b;for(var c=this.pos-2;255===this.buf[c];)c--;c<a&&(c=a),b=0;for(var d=0;d<c-a+1;d++){var e=127&~this.buf[a+d];b+=d<4?e<<7*d:e*Math.pow(2,7*d)}return-b-1},readSVarint:function(){var a=this.readVarint();return a%2===1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,b=this.buf.toString("utf8",this.pos,a);return this.pos=a,b},readBytes:function(){var a=this.readVarint()+this.pos,b=this.buf.slice(this.pos,a);return this.pos=a,b},readPackedVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readVarint());return b},readPackedSVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(a){var b=7&a;if(b===d.Varint)for(;this.buf[this.pos++]>127;);else if(b===d.Bytes)this.pos=this.readVarint()+this.pos;else if(b===d.Fixed32)this.pos+=4;else{if(b!==d.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(a,b){this.writeVarint(a<<3|b)},realloc:function(a){for(var b=this.length||16;b<this.pos+a;)b*=2;if(b!==this.length){var c=new q(b);this.buf.copy(c),this.buf=c,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(a){this.realloc(4),this.buf.writeUInt32LE(a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),this.buf.writeInt32LE(a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(a&-1,this.pos),this.buf.writeUInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(a&-1,this.pos),this.buf.writeInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeVarint:function(a){return a=+a,a>268435455?void f(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),void(a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127)))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a);var b=q.byteLength(a);this.writeVarint(b),this.realloc(b),this.buf.write(a,this.pos),this.pos+=b},writeFloat:function(a){this.realloc(4),this.buf.writeFloatLE(a,this.pos),this.pos+=4},writeDouble:function(a){this.realloc(8),this.buf.writeDoubleLE(a,this.pos),this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b),this.realloc(b);for(var c=0;c<b;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,b){this.pos++;var c=this.pos;a(b,this);var d=this.pos-c;d>=128&&g(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,b,c){this.writeTag(a,d.Bytes),this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,h,b)},writePackedSVarint:function(a,b){this.writeMessage(a,i,b)},writePackedBoolean:function(a,b){this.writeMessage(a,l,b)},writePackedFloat:function(a,b){this.writeMessage(a,j,b)},writePackedDouble:function(a,b){this.writeMessage(a,k,b)},writePackedFixed32:function(a,b){this.writeMessage(a,m,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,n,b)},writePackedFixed64:function(a,b){this.writeMessage(a,o,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,p,b)},writeBytesField:function(a,b){this.writeTag(a,d.Bytes),this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,d.Bytes),this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,d.Fixed32),this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,d.Fixed64),this.writeDouble(b)},writeBooleanField:function(a,b){this.writeVarintField(a,Boolean(b))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":435}],437:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b<e){for(var c=1,d=0;d<b;++d)for(var g=0;g<d;++g)if(a[d]<a[g])c=-c;else if(a[d]===a[g])return 0;return c}for(var h=f.mallocUint8(b),d=0;d<b;++d)h[d]=0;for(var c=1,d=0;d<b;++d)if(!h[d]){var i=1;h[d]=1;for(var g=a[d];g!==d;g=a[g]){if(h[g])return f.freeUint8(h),0;i+=1,h[g]=1}1&i||(c=-c)}return f.freeUint8(h),c}b.exports=d;var e=32,f=a("typedarray-pool")},{"typedarray-pool":496}],438:[function(a,b,c){"use strict";function d(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var c,d,e,h=f.mallocUint32(b),i=f.mallocUint32(b),j=0;for(g(a,i),e=0;e<b;++e)h[e]=a[e];for(e=b-1;e>0;--e)d=i[e],c=h[e],h[e]=h[d],h[d]=c,i[e]=i[c],i[c]=d,j=(j+c)*e;return f.freeUint32(i),f.freeUint32(h),j}function e(a,b,c){switch(a){case 0:return c?c:[];case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=c||new Array(a);var d,e,f,g=1;for(c[0]=0,f=1;f<a;++f)c[f]=f,g=g*f|0;for(f=a-1;f>0;--f)d=b/g|0,b=b-d*g|0,g=g/f|0,e=0|c[f],c[f]=0|c[d],c[d]=0|e;return c}var f=a("typedarray-pool"),g=a("invert-permutation");c.rank=d,c.unrank=e},{"invert-permutation":256,"typedarray-pool":496}],439:[function(a,b,c){"use strict";function d(a,b){function c(a,b){var c=j[b][a[b]];c.splice(c.indexOf(a),1)}function d(a,d,f){for(var g,h,i,k=0;k<2;++k)if(j[k][d].length>0){g=j[k][d][0],i=k;break}h=g[1^i];for(var l=0;l<2;++l)for(var m=j[l][d],n=0;n<m.length;++n){var o=m[n],p=o[1^l],q=e(b[a],b[d],b[h],b[p]);q>0&&(g=o,h=p,i=l)}return f?h:(g&&c(g,i),h)}function f(a,f){var g=j[f][a][0],h=[a];c(g,f);for(var i=g[1^f];;){for(;i!==a;)h.push(i),i=d(h[h.length-2],i,!1);if(j[0][a].length+j[1][a].length===0)break;var k=h[h.length-1],l=a,m=h[1],n=d(k,l,!0);if(e(b[k],b[l],b[m],b[n])<0)break;h.push(a),i=d(k,l)}return h}function g(a,b){return b[1]===b[b.length-1]}for(var h=0|b.length,i=a.length,j=[new Array(h),new Array(h)],k=0;k<h;++k)j[0][k]=[],j[1][k]=[];for(var k=0;k<i;++k){var l=a[k];j[0][l[0]].push(l),j[1][l[1]].push(l)}for(var m=[],k=0;k<h;++k)j[0][k].length+j[1][k].length===0&&m.push([k]);for(var k=0;k<h;++k)for(var n=0;n<2;++n){for(var o=[];j[n][k].length>0;){var p=(j[0][k].length,f(k,n));g(o,p)?o.push.apply(o,p):(o.length>0&&m.push(o),o=p)}o.length>0&&m.push(o)}return m}b.exports=d;var e=a("compare-angle")},{"compare-angle":81}],440:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a,b.length),d=new Array(b.length),f=new Array(b.length),g=[],h=0;h<b.length;++h){var i=c[h].length;f[h]=i,d[h]=!0,i<=1&&g.push(h)}for(;g.length>0;){var j=g.pop();d[j]=!1;for(var k=c[j],h=0;h<k.length;++h){var l=k[h];0===--f[l]&&g.push(l)}}for(var m=new Array(b.length),n=[],h=0;h<b.length;++h)if(d[h]){var j=n.length;m[h]=j,n.push(b[h])}else m[h]=-1;for(var o=[],h=0;h<a.length;++h){var p=a[h];d[p[0]]&&d[p[1]]&&o.push([m[p[0]],m[p[1]]])}return[o,n]}b.exports=d;var e=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":100}],441:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function e(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=[];return b}function f(a,b){function c(a){for(var c=a.length,d=[0],e=0;e<c;++e){var f=b[a[e]],g=b[a[(e+1)%c]],h=j(-f[0],f[1]),i=j(-f[0],g[1]),l=j(g[0],f[1]),m=j(g[0],g[1]);d=k(d,k(k(h,i),k(l,m)))}return d[d.length-1]>0}function f(a){for(var b=a.length,c=0;c<b;++c)if(!I[a[c]])return!1;return!0}var n=m(a,b);a=n[0],b=n[1];for(var o=b.length,p=(a.length,g(a,b.length)),q=0;q<o;++q)if(p[q].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var r=h(a,b);r=r.filter(c);for(var s=r.length,t=new Array(s),u=new Array(s),q=0;q<s;++q){t[q]=q;var v=new Array(s),w=r[q].map(function(a){return b[a]}),x=i([w]),y=0;a:for(var z=0;z<s;++z)if(v[z]=0,q!==z){for(var A=r[z],B=A.length,C=0;C<B;++C){var D=x(b[A[C]]);if(0!==D){D<0&&(v[z]=1,y+=1);continue a}}v[z]=1,y+=1}u[q]=[y,q,v]}u.sort(function(a,b){return b[0]-a[0]});for(var q=0;q<s;++q)for(var v=u[q],E=v[1],F=v[2],z=0;z<s;++z)F[z]&&(t[z]=E);for(var G=e(s),q=0;q<s;++q)G[q].push(t[q]),G[t[q]].push(q);for(var H={},I=d(o,!1),q=0;q<s;++q)for(var A=r[q],B=A.length,z=0;z<B;++z){var J=A[z],K=A[(z+1)%B],L=Math.min(J,K)+":"+Math.max(J,K);if(L in H){var M=H[L];G[M].push(q),G[q].push(M),I[J]=I[K]=!0}else H[L]=q}for(var N=[],O=d(s,-1),q=0;q<s;++q)t[q]!==q||f(r[q])?O[q]=-1:(N.push(q),O[q]=0);for(var n=[];N.length>0;){var P=N.pop(),Q=G[P];l(Q,function(a,b){return a-b});var R,S=Q.length,T=O[P];if(0===T){var A=r[P];R=[A]}for(var q=0;q<S;++q){var U=Q[q];if(!(O[U]>=0)&&(O[U]=1^T,N.push(U),0===T)){var A=r[U];f(A)||(A.reverse(),R.push(A))}}0===T&&n.push(R)}return n}b.exports=f;var g=a("edges-to-adjacency-list"),h=a("planar-dual"),i=a("point-in-big-polygon"),j=a("two-product"),k=a("robust-sum"),l=a("uniq"),m=a("./lib/trim-leaves")},{"./lib/trim-leaves":440,"edges-to-adjacency-list":100,"planar-dual":439,"point-in-big-polygon":443,"robust-sum":470,"two-product":494,uniq:498}],442:[function(a,b,c){"use strict";function d(a,b){this.x=a,this.y=b}b.exports=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x,c=a.y-this.y;return b*b+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[0]*this.x+a[1]*this.y,c=a[2]*this.x+a[3]*this.y;return this.x=b,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y,e=c*this.x+b*this.y;return this.x=d,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{}],443:[function(a,b,c){function d(){return!0}function e(a){return function(b,c){var e=a[b];return!!e&&!!e.queryPoint(c,d)}}function f(a){for(var b={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],h=d[1][1],i=[Math.min(g,h),Math.max(g,h)];f in b?b[f].push(i):b[f]=[i]}for(var j={},k=Object.keys(b),c=0;c<k.length;++c){var l=b[k[c]];j[k[c]]=n(l)}return e(j)}function g(a,b){return function(c){var d=o.le(b,c[0]);if(d<0)return 1;var e=a[d];if(!e){if(!(d>0&&b[d]===c[0]))return 1;e=a[d-1]}for(var f=1;e;){var g=e.key,h=l(c,g[0],g[1]);if(g[0][0]<g[1][0])if(h<0)e=e.left;else{if(!(h>0))return 0;f=-1,e=e.right}else if(h>0)e=e.left;else{if(!(h<0))return 0;f=1,e=e.right}}return f}}function h(a){return 1}function i(a){return function(b){return a(b[0],b[1])?0:1}}function j(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}function k(a){for(var b=a.length,c=[],d=[],e=0;e<b;++e)for(var k=a[e],l=k.length,n=l-1,o=0;o<l;n=o++){var p=k[n],q=k[o];p[0]===q[0]?d.push([p,q]):c.push([p,q])}if(0===c.length)return 0===d.length?h:i(f(d));var r=m(c),s=g(r.slabs,r.coordinates);return 0===d.length?s:j(f(d),s)}b.exports=k;var l=a("robust-orientation")[3],m=a("slab-decomposition"),n=a("interval-tree-1d"),o=a("binary-search-bounds")},{"binary-search-bounds":53,"interval-tree-1d":255,"robust-orientation":465,"slab-decomposition":482}],444:[function(a,b,c){"use strict";function d(a,b,c,d,h){e.length<d.length&&(e=new Float64Array(d.length),f=new Float64Array(d.length),g=new Float64Array(d.length));for(var i=0;i<d.length;++i)e[i]=a[i]-d[i],
f[i]=b[i]-a[i],g[i]=c[i]-a[i];for(var j=0,k=0,l=0,m=0,n=0,o=0,i=0;i<d.length;++i){var p=f[i],q=g[i],r=e[i];j+=p*p,k+=p*q,l+=q*q,m+=r*p,n+=r*q,o+=r*r}var s,t=Math.abs(j*l-k*k),u=k*n-l*m,v=k*m-j*n;if(u+v<=t)if(u<0)v<0&&m<0?(v=0,-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o)):(u=0,n>=0?(v=0,s=o):-n>=l?(v=1,s=l+2*n+o):(v=-n/l,s=n*v+o));else if(v<0)v=0,m>=0?(u=0,s=o):-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o);else{var w=1/t;u*=w,v*=w,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o}else{var x,y,z,A;u<0?(x=k+m,y=l+n,y>x?(z=y-x,A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(u=0,y<=0?(v=1,s=l+2*n+o):n>=0?(v=0,s=o):(v=-n/l,s=n*v+o))):v<0?(x=k+n,y=j+m,y>x?(z=y-x,A=j-2*k+l,z>=A?(v=1,u=0,s=l+2*n+o):(v=z/A,u=1-v,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(v=0,y<=0?(u=1,s=j+2*m+o):m>=0?(u=0,s=o):(u=-m/j,s=m*u+o))):(z=l+n-k-m,z<=0?(u=0,v=1,s=l+2*n+o):(A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)))}for(var B=1-u-v,i=0;i<d.length;++i)h[i]=B*a[i]+u*b[i]+v*c[i];return s<0?0:s}var e=new Float64Array(4),f=new Float64Array(4),g=new Float64Array(4);b.exports=d},{}],445:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],446:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:x}function l(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<q;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=i<=t?y:i>=t+z?z:i-t,!(l<n);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;h<q;++h)p=a[h],p<128&&u.push(L(p));for(d=e=u.length,e&&u.push(E);d<q;){for(j=w,h=0;h<q;++h)p=a[h],p>=b&&p<j&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;h<q;++h)if(p=a[h],p<b&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=n<=g?y:n>=g+z?z:n-g,!(k<o);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],447:[function(a,b,c){b.exports=a("gl-quat/slerp")},{"gl-quat/slerp":199}],448:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],449:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],450:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":448,"./encode":449}],451:[function(a,b,c){"use strict";function d(a,b,c,g,h){for(c=c||0,g=g||a.length-1,h=h||f;g>c;){if(g-c>600){var i=g-c+1,j=b-c+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1),n=Math.max(c,Math.floor(b-j*l/i+m)),o=Math.min(g,Math.floor(b+(i-j)*l/i+m));d(a,b,n,o,h)}var p=a[b],q=c,r=g;for(e(a,c,b),h(a[g],p)>0&&e(a,c,g);q<r;){for(e(a,q,r),q++,r--;h(a[q],p)<0;)q++;for(;h(a[r],p)>0;)r--}0===h(a[c],p)?e(a,c,r):(r++,e(a,r,g)),r<=b&&(c=r+1),b<=r&&(g=r-1)}}function e(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function f(a,b){return a<b?-1:a>b?1:0}b.exports=d},{}],452:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;f<c;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/add");b.exports=d},{"big-rat/add":37}],453:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a.length),c=0;c<a.length;++c)b[c]=e(a[c]);return b}b.exports=d;var e=a("big-rat")},{"big-rat":40}],454:[function(a,b,c){"use strict";function d(a,b){for(var c=e(b),d=a.length,g=new Array(d),h=0;h<d;++h)g[h]=f(a[h],c);return g}var e=a("big-rat"),f=a("big-rat/mul");b.exports=d},{"big-rat":40,"big-rat/mul":49}],455:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;f<c;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/sub");b.exports=d},{"big-rat/sub":51}],456:[function(a,b,c){"use strict";function d(a){a.sort(f);for(var b=a.length,c=0,d=0;d<b;++d){var h=a[d],i=g(h);if(0!==i){if(c>0){var j=a[c-1];if(0===e(h,j)&&g(j)!==i){c-=1;continue}}a[c++]=h}}return a.length=c,a}var e=a("compare-cell"),f=a("compare-oriented-cell"),g=a("cell-orientation");b.exports=d},{"cell-orientation":73,"compare-cell":82,"compare-oriented-cell":83}],457:[function(a,b,c){"use strict";function d(a,b){if("string"!=typeof a)throw new TypeError("repeat-string expects a string.");if(1===b)return a;if(2===b)return a+a;var c=a.length*b;for(e===a&&"undefined"!=typeof e||(e=a,f="");c>f.length&&b>0&&(1&b&&(f+=a),b>>=1);)a+=a;return f.substr(0,c)}var e,f="";b.exports=d},{}],458:[function(b,c,d){void function(b,e){"function"==typeof a&&a.amd?a(e):"object"==typeof d?c.exports=e():b.resolveUrl=e()}(this,function(){function a(){var a=arguments.length;if(0===a)throw new Error("resolveUrl requires at least one argument; got none.");var b=document.createElement("base");if(b.href=arguments[0],1===a)return b.href;var c=document.getElementsByTagName("head")[0];c.insertBefore(b,c.firstChild);for(var d,e=document.createElement("a"),f=1;f<a;f++)e.href=arguments[f],d=e.href,b.href=d;return c.removeChild(b),d}return a})},{}],459:[function(a,b,c){(function(a){b.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],460:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=a[a.length-1],d=b,e=b-2;e>=0;--e){var f=c,g=a[e];c=f+g;var h=c-f,i=g-h;i&&(a[--d]=c,c=i)}for(var j=0,e=d;e<b;++e){var f=a[e],g=c;c=f+g;var h=c-f,i=g-h;i&&(a[j++]=i)}return a[j++]=c,a.length=j,a}b.exports=d},{}],461:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m[",c,"][",d,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("");for(var b=[],c=0;c<a.length;++c)b.push(["scale(",h(d(a,c)),",",f(c),a[0][c],")"].join(""));return g(b)}function i(a){var b=new Function("sum","scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",h(e(a)),")};return robustDeterminant",a].join(""));return b(l,m,k,n)}function j(){for(;p.length<o;)p.push(i(p.length));for(var a=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;d<o;++d)a.push("det"+d),c.push("case ",d,":return det",d,"(m);");c.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),a.push("CACHE","gen",c.join(""));var e=Function.apply(void 0,a);b.exports=e.apply(void 0,p.concat([p,i]));for(var d=0;d<p.length;++d)b.exports[d]=p[d]}var k=a("two-product"),l=a("robust-sum"),m=a("robust-scale"),n=a("robust-compress"),o=6,p=[function(){return[0]},function(a){return[a[0][0]]}];j()},{"robust-compress":460,"robust-scale":467,"robust-sum":470,"two-product":494}],462:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a[0],b[0]),d=1;d<a.length;++d)c=f(c,e(a[d],b[d]));return c}var e=a("two-product"),f=a("robust-sum");b.exports=d},{"robust-sum":470,"two-product":494}],463:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-2,"]"].join("")}return b}function f(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",f(a.slice(0,b)),",",f(a.slice(b)),")"].join("")}function g(a,b){if("m"===a.charAt(0)){if("w"===b.charAt(0)){var c=a.split("[");return["w",b.substr(1),"m",c[0].substr(1)].join("")}return["prod(",a,",",b,")"].join("")}return g(b,a)}function h(a){return a&!0?"-":""}function i(a){if(2===a.length)return[["diff(",g(a[0][0],a[1][1]),",",g(a[1][0],a[0][1]),")"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",f(i(d(a,c))),",",h(c),a[0][c],")"].join(""));return b}function j(a,b){for(var c=[],d=0;d<b-2;++d)c.push(["prod(m",a,"[",d,"],m",a,"[",d,"])"].join(""));return f(c)}function k(a){for(var b=[],c=[],g=e(a),h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(var h=0;h<a;++h)0===(1&h)?b.push.apply(b,i(d(g,h))):c.push.apply(c,i(d(g,h)));for(var k=f(b),l=f(c),m="exactInSphere"+a,n=[],h=0;h<a;++h)n.push("m"+h);for(var o=["function ",m,"(",n.join(),"){"],h=0;h<a;++h){o.push("var w",h,"=",j(h,a),";");for(var p=0;p<a;++p)p!==h&&o.push("var w",h,"m",p,"=scale(w",h,",m",p,"[0]);")}o.push("var p=",k,",n=",l,",d=diff(p,n);return d[d.length-1];}return ",m);var u=new Function("sum","diff","prod","scale",o.join(""));return u(r,s,q,t)}function l(){return 0}function m(){return 0}function n(){return 0}function o(a){var b=v[a.length];return b||(b=v[a.length]=k(a.length)),b.apply(void 0,a)}function p(){for(;v.length<=u;)v.push(k(v.length));for(var a=[],c=["slow"],d=0;d<=u;++d)a.push("a"+d),c.push("o"+d);for(var e=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=u;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[o].concat(v));for(var d=0;d<=u;++d)b.exports[d]=v[d]}var q=a("two-product"),r=a("robust-sum"),s=a("robust-subtract"),t=a("robust-scale"),u=6,v=[l,m,n];p()},{"robust-scale":467,"robust-subtract":469,"robust-sum":470,"two-product":494}],464:[function(a,b,c){"use strict";function d(a){for(var b="robustLinearSolve"+a+"d",c=["function ",b,"(A,b){return ["],d=0;d<a;++d){c.push("det([");for(var e=0;e<a;++e){e>0&&c.push(","),c.push("[");for(var f=0;f<a;++f)f>0&&c.push(","),f===d?c.push("+b[",e,"]"):c.push("+A[",e,"][",f,"]");c.push("]")}c.push("]),")}c.push("det(A)]}return ",b);var g=new Function("det",c.join(""));return g(a<6?h[a]:h)}function e(){return[0]}function f(a,b){return[[b[0]],[a[0][0]]]}function g(){for(;j.length<i;)j.push(d(j.length));for(var a=[],c=["function dispatchLinearSolve(A,b){switch(A.length){"],e=0;e<i;++e)a.push("s"+e),c.push("case ",e,":return s",e,"(A,b);");c.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),a.push("CACHE","g",c.join(""));var f=Function.apply(void 0,a);b.exports=f.apply(void 0,j.concat([j,d]));for(var e=0;e<i;++e)b.exports[e]=j[e]}var h=a("robust-determinant"),i=6,j=[e,f];g()},{"robust-determinant":461}],465:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",g(h(d(a,c))),",",f(c),a[0][c],")"].join(""));return b}function i(a){for(var b=[],c=[],f=e(a),i=[],j=0;j<a;++j)0===(1&j)?b.push.apply(b,h(d(f,j))):c.push.apply(c,h(d(f,j))),i.push("m"+j);var k=g(b),p=g(c),q="orientation"+a+"Exact",r=["function ",q,"(",i.join(),"){var p=",k,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",q].join(""),s=new Function("sum","prod","scale","sub",r);return s(m,l,n,o)}function j(a){var b=v[a.length];return b||(b=v[a.length]=i(a.length)),b.apply(void 0,a)}function k(){for(;v.length<=p;)v.push(i(v.length));for(var a=[],c=["slow"],d=0;d<=p;++d)a.push("a"+d),c.push("o"+d);for(var e=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=p;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[j].concat(v));for(var d=0;d<=p;++d)b.exports[d]=v[d]}var l=a("two-product"),m=a("robust-sum"),n=a("robust-scale"),o=a("robust-subtract"),p=5,q=1.1102230246251565e-16,r=(3+16*q)*q,s=(7+56*q)*q,t=i(3),u=i(4),v=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var d,e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f;if(e>0){if(f<=0)return g;d=e+f}else{if(!(e<0))return g;if(f>=0)return g;d=-(e+f)}var h=r*d;return g>=h||g<=-h?g:t(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],g=c[0]-d[0],h=a[1]-d[1],i=b[1]-d[1],j=c[1]-d[1],k=a[2]-d[2],l=b[2]-d[2],m=c[2]-d[2],n=f*j,o=g*i,p=g*h,q=e*j,r=e*i,t=f*h,v=k*(n-o)+l*(p-q)+m*(r-t),w=(Math.abs(n)+Math.abs(o))*Math.abs(k)+(Math.abs(p)+Math.abs(q))*Math.abs(l)+(Math.abs(r)+Math.abs(t))*Math.abs(m),x=s*w;return v>x||-v>x?v:u(a,b,c,d)}];k()},{"robust-scale":467,"robust-subtract":469,"robust-sum":470,"two-product":494}],466:[function(a,b,c){"use strict";function d(a,b){if(1===a.length)return f(b,a[0]);if(1===b.length)return f(a,b[0]);if(0===a.length||0===b.length)return[0];var c=[0];if(a.length<b.length)for(var d=0;d<a.length;++d)c=e(c,f(b,a[d]));else for(var d=0;d<b.length;++d)c=e(c,f(a,b[d]));return c}var e=a("robust-sum"),f=a("robust-scale");b.exports=d},{"robust-scale":467,"robust-sum":470}],467:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if(1===c){var d=e(a[0],b);return d[0]?d:[d[1]]}var g=new Array(2*c),h=[.1,.1],i=[.1,.1],j=0;e(a[0],b,h),h[0]&&(g[j++]=h[0]);for(var k=1;k<c;++k){e(a[k],b,i);var l=h[1];f(l,i[0],h),h[0]&&(g[j++]=h[0]);var m=i[1],n=h[1],o=m+n,p=o-m,q=n-p;h[1]=o,q&&(g[j++]=q)}return h[1]&&(g[j++]=h[1]),0===j&&(g[j++]=0),g.length=j,g}var e=a("two-product"),f=a("two-sum");b.exports=d},{"two-product":494,"two-sum":495}],468:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=0;e<2;++e){var f=a[e],g=b[e],h=Math.min(f,g),i=Math.max(f,g),j=c[e],k=d[e],l=Math.min(j,k),m=Math.max(j,k);if(m<h||i<l)return!1}return!0}function e(a,b,c,e){var g=f(a,c,e),h=f(b,c,e);if(g>0&&h>0||g<0&&h<0)return!1;var i=f(c,a,b),j=f(e,a,b);return!(i>0&&j>0||i<0&&j<0)&&(0!==g||0!==h||0!==i||0!==j||d(a,b,c,e))}b.exports=e;var f=a("robust-orientation")[3]},{"robust-orientation":465}],469:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],-b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=-b[l],q=m(p);o<q?(g=n,k+=1,k<c&&(n=a[k],o=m(n))):(g=p,l+=1,l<e&&(p=-b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=-b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=-b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,k<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,l<e&&(p=-b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],470:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=b[l],q=m(p);o<q?(g=n,k+=1,k<c&&(n=a[k],o=m(n))):(g=p,l+=1,l<e&&(p=b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,k<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,l<e&&(p=b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],471:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ShelfPack=e()}(this,function(){function a(a,b,c){c=c||{},this.w=a||64,this.h=b||64,this.autoResize=!!c.autoResize,this.shelves=[],this.stats={},this.count=function(a){this.stats[a]=(0|this.stats[a])+1}}function b(a,b,c){this.x=0,this.y=a,this.w=this.free=b,this.h=c}return a.prototype.pack=function(a,b){a=[].concat(a),b=b||{};for(var c,d,e,f=[],g=0;g<a.length;g++)if(c=a[g].w||a[g].width,d=a[g].h||a[g].height,c&&d){if(e=this.packOne(c,d),!e)continue;b.inPlace&&(a[g].x=e.x,a[g].y=e.y),f.push(e)}if(this.shelves.length>0){for(var h=0,i=0,j=0;j<this.shelves.length;j++){var k=this.shelves[j];i+=k.h,h=Math.max(k.w-k.free,h)}this.resize(h,i)}return f},a.prototype.packOne=function(a,c){for(var d,e,f=0,g={shelf:-1,waste:1/0},h=0;h<this.shelves.length;h++){if(d=this.shelves[h],f+=d.h,c===d.h&&a<=d.free)return this.count(c),d.alloc(a,c);c>d.h||a>d.free||c<d.h&&a<=d.free&&(e=d.h-c,e<g.waste&&(g.waste=e,g.shelf=h))}if(g.shelf!==-1)return d=this.shelves[g.shelf],this.count(c),d.alloc(a,c);if(c<=this.h-f&&a<=this.w)return d=new b(f,this.w,c),this.shelves.push(d),this.count(c),d.alloc(a,c);if(this.autoResize){var i,j,k,l;return i=j=this.h,k=l=this.w,(k<=i||a>k)&&(l=2*Math.max(a,k)),(i<k||c>i)&&(j=2*Math.max(c,i)),this.resize(l,j),this.packOne(a,c)}return null},a.prototype.clear=function(){this.shelves=[],this.stats={}},a.prototype.resize=function(a,b){this.w=a,this.h=b;for(var c=0;c<this.shelves.length;c++)this.shelves[c].resize(a);return!0},b.prototype.alloc=function(a,b){if(a>this.free||b>this.h)return null;var c=this.x;return this.x+=a,this.free-=a,{x:c,y:this.y,w:a,h:b,width:a,height:b}},b.prototype.resize=function(a){return this.free+=a-this.w,this.w=a,!0},a})},{}],472:[function(a,b,c){"use strict";b.exports=function(a){return a<0?-1:a>0?1:0}},{}],473:[function(a,b,c){"use strict";function d(a){return f(e(a))}b.exports=d;var e=a("boundary-cells"),f=a("reduce-simplicial-complex")},{"boundary-cells":56,"reduce-simplicial-complex":456}],474:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=0,d=0;d<b;++d)c=0|Math.max(c,a[d].length);return c-1}function e(a,b){for(var c=a.length,d=l.mallocUint8(c),e=0;e<c;++e)d[e]=a[e]<b|0;return d}function f(a,b){for(var c=a.length,d=b*(b+1)/2*c|0,e=l.mallocUint32(2*d),f=0,g=0;g<c;++g)for(var h=a[g],b=h.length,i=0;i<b;++i)for(var j=0;j<i;++j){var n=h[j],o=h[i];e[f++]=0|Math.min(n,o),e[f++]=0|Math.max(n,o)}var p=f/2|0;m(k(e,[p,2]));for(var q=2,g=2;g<f;g+=2)e[g-2]===e[g]&&e[g-1]===e[g+1]||(e[q++]=e[g],e[q++]=e[g+1]);return k(e,[q/2|0,2])}function g(a,b,c,d){for(var e=a.data,f=a.shape[0],g=l.mallocDouble(f),h=0,i=0;i<f;++i){var j=e[2*i],m=e[2*i+1];if(c[j]!==c[m]){var n=b[j],o=b[m];e[2*h]=j,e[2*h+1]=m,g[h++]=(o-d)/(o-n)}}return a.shape[0]=h,k(g,[h])}function h(a,b){var c=l.mallocInt32(2*b),d=a.shape[0],e=a.data;c[0]=0;for(var f=0,g=0;g<d;++g){var h=e[2*g];if(h!==f){for(c[2*f+1]=g;++f<h;)c[2*f]=g,c[2*f+1]=g;c[2*f]=g}}for(c[2*f+1]=d;++f<b;)c[2*f]=c[2*f+1]=d;return c}function i(a){for(var b=0|a.shape[0],c=a.data,d=new Array(b),e=0;e<b;++e)d[e]=[c[2*e],c[2*e+1]];return d}function j(a,b,c,j){c=c||0,"undefined"==typeof j&&(j=d(a));var k=a.length;if(0===k||j<1)return{cells:[],vertexIds:[],vertexWeights:[]};var m=e(b,+c),o=f(a,j),p=g(o,b,m,+c),q=h(o,0|b.length),r=n(j)(a,o.data,q,m),s=i(o),t=[].slice.call(p.data,0,p.shape[0]);return l.free(m),l.free(o.data),l.free(p.data),l.free(q),{cells:r,vertexIds:s,vertexWeights:t}}b.exports=j;var k=a("ndarray"),l=a("typedarray-pool"),m=a("ndarray-sort"),n=a("./lib/codegen")},{"./lib/codegen":475,ndarray:427,"ndarray-sort":425,"typedarray-pool":496}],475:[function(a,b,c){"use strict";function d(a){function b(a){if(!(a.length<=0)){j.push("R.push(");for(var b=0;b<a.length;++b){var c=a[b];b>0&&j.push(","),j.push("[");for(var d=0;d<c.length;++d){var e=c[d];d>0&&j.push(","),j.push("B(C,E,c[",e[0],"],c[",e[1],"])")}j.push("]")}j.push(");")}}var c=0,d=new Array(a+1);d[0]=[[]];for(var e=1;e<=a;++e)for(var h=d[e]=g(e),i=0;i<h.length;++i)c=Math.max(c,h[e].length);for(var j=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],e=a+1;e>1;--e){e<a+1&&j.push("else "),j.push("if(l===",e,"){");for(var k=[],i=0;i<e;++i)k.push("(S[c["+i+"]]<<"+i+")");j.push("var M=",k.join("+"),";if(M===0||M===",(1<<e)-1,"){continue}switch(M){");for(var h=d[e-1],i=0;i<h.length;++i)j.push("case ",i,":"),b(h[i]),j.push("break;");j.push("}}")}j.push("}return R;};return getContour",a,"d");var l=new Function("pool",j.join(""));return l(f)}function e(a){var b=h[a];return b||(b=h[a]=d(a)),b}b.exports=e;var f=a("typedarray-pool"),g=a("marching-simplex-table"),h={}},{"marching-simplex-table":406,"typedarray-pool":496}],476:[function(a,b,c){"use strict";"use restrict";function d(a){for(var b=0,c=Math.max,d=0,e=a.length;d<e;++d)b=c(b,a[d].length);return b-1}function e(a){for(var b=-1,c=Math.max,d=0,e=a.length;d<e;++d)for(var f=a[d],g=0,h=f.length;g<h;++g)b=c(b,f[g]);return b+1}function f(a){for(var b=new Array(a.length),c=0,d=a.length;c<d;++c)b[c]=a[c].slice(0);return b}function g(a,b){var c=a.length,d=a.length-b.length,e=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:var f=a[0]+a[1]-b[0]-b[1];return f?f:e(a[0],a[1])-e(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(f=g+a[2]-(h+b[2]))return f;var i=e(a[0],a[1]),j=e(b[0],b[1]),f=e(i,a[2])-e(j,b[2]);return f?f:e(i+a[2],g)-e(j+b[2],h);default:var k=a.slice(0);k.sort();var l=b.slice(0);l.sort();for(var m=0;m<c;++m)if(d=k[m]-l[m])return d;return 0}}function h(a,b){return g(a[0],b[0])}function i(a,b){if(b){for(var c=a.length,d=new Array(c),e=0;e<c;++e)d[e]=[a[e],b[e]];d.sort(h);for(var e=0;e<c;++e)a[e]=d[e][0],b[e]=d[e][1];return a}return a.sort(g),a}function j(a){if(0===a.length)return[];for(var b=1,c=a.length,d=1;d<c;++d){var e=a[d];if(g(e,a[d-1])){if(d===b){b++;continue}a[b++]=e}}return a.length=b,a}function k(a,b){for(var c=0,d=a.length-1,e=-1;c<=d;){var f=c+d>>1,h=g(a[f],b);h<=0?(0===h&&(e=f),c=f+1):h>0&&(d=f-1)}return e}function l(a,b){for(var c=new Array(a.length),d=0,e=c.length;d<e;++d)c[d]=[];for(var f=[],d=0,h=b.length;d<h;++d)for(var i=b[d],j=i.length,l=1,m=1<<j;l<m;++l){f.length=t.popCount(l);for(var n=0,o=0;o<j;++o)l&1<<o&&(f[n++]=i[o]);var p=k(a,f);if(!(p<0))for(;c[p++].push(d),!(p>=a.length||0!==g(a[p],f)););}return c}function m(a,b){if(!b)return l(j(o(a,0)),a,0);for(var c=new Array(b),d=0;d<b;++d)c[d]=[];for(var d=0,e=a.length;d<e;++d)for(var f=a[d],g=0,h=f.length;g<h;++g)c[f[g]].push(d);return c}function n(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0|e.length,g=1,h=1<<f;g<h;++g){for(var j=[],k=0;k<f;++k)g>>>k&1&&j.push(e[k]);b.push(j)}return i(b)}function o(a,b){if(b<0)return[];for(var c=[],d=(1<<b+1)-1,e=0;e<a.length;++e)for(var f=a[e],g=d;g<1<<f.length;g=t.nextCombination(g)){for(var h=new Array(b+1),j=0,k=0;k<f.length;++k)g&1<<k&&(h[j++]=f[k]);c.push(h)}return i(c)}function p(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;++f){for(var h=new Array(e.length-1),j=0,k=0;j<g;++j)j!==f&&(h[k++]=e[j]);b.push(h)}return i(b)}function q(a,b){for(var c=new u(b),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=f+1;g<e.length;++g)c.link(e[f],e[g]);for(var h=[],i=c.ranks,d=0;d<i.length;++d)i[d]=-1;for(var d=0;d<a.length;++d){var j=c.find(a[d][0]);i[j]<0?(i[j]=h.length,h.push([a[d].slice(0)])):h[i[j]].push(a[d].slice(0))}return h}function r(a){for(var b=j(i(o(a,0))),c=new u(b.length),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=k(b,[e[f]]),h=f+1;h<e.length;++h)c.link(g,k(b,[e[h]]));for(var l=[],m=c.ranks,d=0;d<m.length;++d)m[d]=-1;for(var d=0;d<a.length;++d){var n=c.find(k(b,[a[d][0]]));m[n]<0?(m[n]=l.length,l.push([a[d].slice(0)])):l[m[n]].push(a[d].slice(0))}return l}function s(a,b){return b?q(a,b):r(a)}var t=a("bit-twiddle"),u=a("union-find");c.dimension=d,c.countVertices=e,c.cloneCells=f,c.compareCells=g,c.normalize=i,c.unique=j,c.findCell=k,c.incidence=l,c.dual=m,c.explode=n,c.skeleton=o,c.boundary=p,c.connectedComponents=s},{"bit-twiddle":54,"union-find":497}],477:[function(a,b,c){arguments[4][54][0].apply(c,arguments)},{dup:54}],478:[function(a,b,c){arguments[4][476][0].apply(c,arguments)},{"bit-twiddle":477,dup:476,"union-find":479}],479:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d,d.prototype.length=function(){return this.roots.length},d.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},d.prototype.find=function(a){for(var b=this.roots;b[a]!==a;){var c=b[a];b[a]=b[c],a=c}return a},d.prototype.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];g<h?f[c]=d:h<g?f[d]=c:(f[d]=c,++e[c])}}},{}],480:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.abs(f(a,b,c)),e=Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2));return d/e}function e(a,b,c){function e(a){if(u[a])return 1/0;var c=r[a],e=s[a];return c<0||e<0?1/0:d(b[a],b[c],b[e])}function f(a,b){var c=z[a],d=z[b];z[a]=d,z[b]=c,A[c]=b,A[d]=a}function h(a){return t[z[a]]}function i(a){return 1&a?a-1>>1:(a>>1)-1}function j(a){for(var b=h(a);;){var c=b,d=2*a+1,e=2*(a+1),g=a;if(d<C){var i=h(d);i<c&&(g=d,c=i)}if(e<C){var j=h(e);j<c&&(g=e)}if(g===a)return a;f(a,g),a=g}}function k(a){for(var b=h(a);a>0;){var c=i(a);if(c>=0){var d=h(c);if(b<d){f(a,c),a=c;continue}}return a}}function l(){if(C>0){var a=z[0];return f(0,C-1),C-=1,j(0),a}return-1}function m(a,b){var c=z[a];return t[c]===b?a:(t[c]=-(1/0),k(a),l(),t[c]=b,C+=1,k(C-1))}function n(a){if(!u[a]){u[a]=!0;var b=r[a],c=s[a];r[c]>=0&&(r[c]=b),s[b]>=0&&(s[b]=c),A[b]>=0&&m(A[b],e(b)),A[c]>=0&&m(A[c],e(c))}}function o(a,b){if(a[b]<0)return b;var c=b,d=b;do{var e=a[d];if(!u[d]||e<0||e===d)break;if(d=e,e=a[d],!u[d]||e<0||e===d)break;d=e,c=a[c]}while(c!==d);for(var f=b;f!==d;f=a[f])a[f]=d;return d}for(var p=b.length,q=a.length,r=new Array(p),s=new Array(p),t=new Array(p),u=new Array(p),v=0;v<p;++v)r[v]=s[v]=-1,t[v]=1/0,u[v]=!1;for(var v=0;v<q;++v){var w=a[v];if(2!==w.length)throw new Error("Input must be a graph");var x=w[1],y=w[0];s[y]!==-1?s[y]=-2:s[y]=x,r[x]!==-1?r[x]=-2:r[x]=y}for(var z=[],A=new Array(p),v=0;v<p;++v){var B=t[v]=e(v);B<1/0?(A[v]=z.length,
z.push(v)):A[v]=-1}for(var C=z.length,v=C>>1;v>=0;--v)j(v);for(;;){var D=l();if(D<0||t[D]>c)break;n(D)}for(var E=[],v=0;v<p;++v)u[v]||(A[v]=E.length,E.push(b[v].slice()));var F=(E.length,[]);return a.forEach(function(a){var b=o(r,a[0]),c=o(s,a[1]);if(b>=0&&c>=0&&b!==c){var d=A[b],e=A[c];d!==e&&F.push([d,e])}}),g.unique(g.normalize(F)),{positions:E,edges:F}}b.exports=e;var f=a("robust-orientation"),g=a("simplicial-complex")},{"robust-orientation":465,"simplicial-complex":478}],481:[function(a,b,c){"use strict";function d(a,b){var c,d;if(b[0][0]<b[1][0])c=b[0],d=b[1];else{if(!(b[0][0]>b[1][0])){var e=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]),h=Math.min(b[0][1],b[1][1]),i=Math.max(b[0][1],b[1][1]);return g<h?g-h:e>i?e-i:g-i}c=b[1],d=b[0]}var j,k;a[0][1]<a[1][1]?(j=a[0],k=a[1]):(j=a[1],k=a[0]);var l=f(d,c,j);return l?l:(l=f(d,c,k),l?l:k-d)}function e(a,b){var c,e;if(b[0][0]<b[1][0])c=b[0],e=b[1];else{if(!(b[0][0]>b[1][0]))return d(b,a);c=b[1],e=b[0]}var g,h;if(a[0][0]<a[1][0])g=a[0],h=a[1];else{if(!(a[0][0]>a[1][0]))return-d(a,b);g=a[1],h=a[0]}var i=f(c,e,h),j=f(c,e,g);if(i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;if(i=f(h,g,e),j=f(h,g,c),i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;return e[0]-h[0]}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":465}],482:[function(a,b,c){"use strict";function d(a,b,c){this.slabs=a,this.coordinates=b,this.horizontal=c}function e(a,b){return a.y-b}function f(a,b){for(var c=null;a;){var d,e,g=a.key;g[0][0]<g[1][0]?(d=g[0],e=g[1]):(d=g[1],e=g[0]);var h=l(d,e,b);if(h<0)a=a.left;else if(h>0)if(b[0]!==g[1][0])c=a,a=a.right;else{var i=f(a.right,b);if(i)return i;a=a.left}else{if(b[0]!==g[1][0])return a;var i=f(a.right,b);if(i)return i;a=a.left}}return c}function g(a,b,c,d){this.y=a,this.index=b,this.start=c,this.closed=d}function h(a,b,c,d){this.x=a,this.segment=b,this.create=c,this.index=d}function i(a){for(var b=a.length,c=2*b,e=new Array(c),f=0;f<b;++f){var i=a[f],j=i[0][0]<i[1][0];e[2*f]=new h(i[0][0],i,j,f),e[2*f+1]=new h(i[1][0],i,(!j),f)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create,c?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1]))});for(var l=k(m),n=[],o=[],p=[],f=0;f<c;){for(var q=e[f].x,r=[];f<c;){var s=e[f];if(s.x!==q)break;f+=1,s.segment[0][0]===s.x&&s.segment[1][0]===s.x?s.create&&(s.segment[0][1]<s.segment[1][1]?(r.push(new g(s.segment[0][1],s.index,(!0),(!0))),r.push(new g(s.segment[1][1],s.index,(!1),(!1)))):(r.push(new g(s.segment[1][1],s.index,(!0),(!1))),r.push(new g(s.segment[0][1],s.index,(!1),(!0))))):l=s.create?l.insert(s.segment,s.index):l.remove(s.segment)}n.push(l.root),o.push(q),p.push(r)}return new d(n,o,p)}b.exports=i;var j=a("binary-search-bounds"),k=a("functional-red-black-tree"),l=a("robust-orientation"),m=a("./lib/order-segments"),n=d.prototype;n.castUp=function(a){var b=j.le(this.coordinates,a[0]);if(b<0)return-1;var c=(this.slabs[b],f(this.slabs[b],a)),d=-1;if(c&&(d=c.value),this.coordinates[b]===a[0]){var g=null;if(c&&(g=c.key),b>0){var h=f(this.slabs[b-1],a);h&&(g?m(h.key,g)>0&&(g=h.key,d=h.value):(d=h.value,g=h.key))}var i=this.horizontal[b];if(i.length>0){var k=j.ge(i,a[1],e);if(k<i.length){var n=i[k];if(a[1]===n.y){if(n.closed)return n.index;for(;k<i.length-1&&i[k+1].y===a[1];)if(k+=1,n=i[k],n.closed)return n.index;if(n.y===a[1]&&!n.start){if(k+=1,k>=i.length)return d;n=i[k]}}if(n.start)if(g){var o=l(g[0],g[1],[a[0],n.y]);g[0][0]>g[1][0]&&(o=-o),o>0&&(d=n.index)}else d=n.index;else n.y!==a[1]&&(d=n.index)}}}return d}},{"./lib/order-segments":481,"binary-search-bounds":53,"functional-red-black-tree":107,"robust-orientation":465}],483:[function(a,b,c){"use strict";function d(a,b){var c=j(i(a,b),[b[b.length-1]]);return c[c.length-1]}function e(a,b,c,d){var e=d-b,f=-b/e;f<0?f=0:f>1&&(f=1);for(var g=1-f,h=a.length,i=new Array(h),j=0;j<h;++j)i[j]=f*a[j]+g*c[j];return i}function f(a,b){for(var c=[],f=[],g=d(a[a.length-1],b),h=a[a.length-1],i=a[0],j=0;j<a.length;++j,h=i){i=a[j];var k=d(i,b);if(g<0&&k>0||g>0&&k<0){var l=e(h,k,i,g);c.push(l),f.push(l.slice())}k<0?f.push(i.slice()):k>0?c.push(i.slice()):(c.push(i.slice()),f.push(i.slice())),g=k}return{positive:c,negative:f}}function g(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(f<0&&j>0||f>0&&j<0)&&c.push(e(g,j,h,f)),j>=0&&c.push(h.slice()),f=j}return c}function h(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(f<0&&j>0||f>0&&j<0)&&c.push(e(g,j,h,f)),j<=0&&c.push(h.slice()),f=j}return c}var i=a("robust-dot-product"),j=a("robust-sum");b.exports=f,b.exports.positive=g,b.exports.negative=h},{"robust-dot-product":462,"robust-sum":470}],484:[function(b,c,d){!function(b){function c(){var a=arguments[0],b=c.cache;return b[a]&&b.hasOwnProperty(a)||(b[a]=c.parse(a)),c.format.call(null,b[a],arguments)}function e(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function f(a,b){return Array(b+1).join(a)}var g={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};c.format=function(a,b){var d,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;h<o;h++)if(p=e(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(d=b[n],i=0;i<j[2].length;i++){if(!d.hasOwnProperty(j[2][i]))throw new Error(c("[sprintf] property '%s' does not exist",j[2][i]));d=d[j[2][i]]}else d=j[1]?b[j[1]]:b[n++];if("function"==e(d)&&(d=d()),g.not_string.test(j[8])&&g.not_json.test(j[8])&&"number"!=e(d)&&isNaN(d))throw new TypeError(c("[sprintf] expecting number but found %s",e(d)));switch(g.number.test(j[8])&&(r=d>=0),j[8]){case"b":d=d.toString(2);break;case"c":d=String.fromCharCode(d);break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,j[6]?parseInt(j[6]):0);break;case"e":d=j[7]?d.toExponential(j[7]):d.toExponential();break;case"f":d=j[7]?parseFloat(d).toFixed(j[7]):parseFloat(d);break;case"g":d=j[7]?parseFloat(d).toPrecision(j[7]):parseFloat(d);break;case"o":d=d.toString(8);break;case"s":d=(d=String(d))&&j[7]?d.substring(0,j[7]):d;break;case"u":d>>>=0;break;case"x":d=d.toString(16);break;case"X":d=d.toString(16).toUpperCase()}g.json.test(j[8])?q[q.length]=d:(!g.number.test(j[8])||r&&!j[3]?s="":(s=r?"+":"-",d=d.toString().replace(g.sign,"")),l=j[4]?"0"===j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+d).length,k=j[6]&&m>0?f(l,m):"",q[q.length]=j[5]?s+d+k:"0"===l?s+k+d:k+s+d)}return q.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=g.text.exec(b)))d[d.length]=c[0];else if(null!==(c=g.modulo.exec(b)))d[d.length]="%";else{if(null===(c=g.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){e|=1;var f=[],h=c[2],i=[];if(null===(i=g.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(f[f.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=g.key_access.exec(h)))f[f.length]=i[1];else{if(null===(i=g.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");f[f.length]=i[1]}c[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var h=function(a,b,d){return d=(b||[]).slice(0),d.splice(0,0,a),c.apply(null,d)};"undefined"!=typeof d?(d.sprintf=c,d.vsprintf=h):(b.sprintf=c,b.vsprintf=h,"function"==typeof a&&a.amd&&a(function(){return{sprintf:c,vsprintf:h}}))}("undefined"==typeof window?this:window)},{}],485:[function(a,b,c){"use strict";function d(a){return new e(a)}function e(a){this.options=n(Object.create(this.options),a),this.trees=new Array(this.options.maxZoom+1)}function f(a,b,c,d){return{x:a,y:b,zoom:1/0,id:d,numPoints:c}}function g(a,b){var c=a.geometry.coordinates;return f(j(c[0]),k(c[1]),1,b)}function h(a){return{type:"Feature",properties:i(a),geometry:{type:"Point",coordinates:[l(a.x),m(a.y)]}}}function i(a){var b=a.numPoints,c=b>=1e4?Math.round(b/1e3)+"k":b>=1e3?Math.round(b/100)/10+"k":b;return{cluster:!0,point_count:b,point_count_abbreviated:c}}function j(a){return a/360+.5}function k(a){var b=Math.sin(a*Math.PI/180),c=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return c<0?0:c>1?1:c}function l(a){return 360*(a-.5)}function m(a){var b=(180-360*a)*Math.PI/180;return 360*Math.atan(Math.exp(b))/Math.PI-90}function n(a,b){for(var c in b)a[c]=b[c];return a}function o(a){return a.x}function p(a){return a.y}var q=a("kdbush");b.exports=d,e.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(a){var b=this.options.log;b&&console.time("total time");var c="prepare "+a.length+" points";b&&console.time(c),this.points=a;var d=a.map(g);b&&console.timeEnd(c);for(var e=this.options.maxZoom;e>=this.options.minZoom;e--){var f=+Date.now();this.trees[e+1]=q(d,o,p,this.options.nodeSize,Float32Array),d=this._cluster(d,e),b&&console.log("z%d: %d clusters in %dms",e,d.length,+Date.now()-f)}return this.trees[this.options.minZoom]=q(d,o,p,this.options.nodeSize,Float32Array),b&&console.timeEnd("total time"),this},getClusters:function(a,b){for(var c=this.trees[this._limitZoom(b)],d=c.range(j(a[0]),k(a[3]),j(a[2]),k(a[1])),e=[],f=0;f<d.length;f++){var g=c.points[d[f]];e.push(g.id!==-1?this.points[g.id]:h(g))}return e},getTile:function(a,b,c){var d=this.trees[this._limitZoom(a)],e=Math.pow(2,a),f=this.options.extent,g=this.options.radius,h=g/f,i=(c-h)/e,j=(c+1+h)/e,k={features:[]};return this._addTileFeatures(d.range((b-h)/e,i,(b+1+h)/e,j),d.points,b,c,e,k),0===b&&this._addTileFeatures(d.range(1-h/e,i,1,j),d.points,e,c,e,k),b===e-1&&this._addTileFeatures(d.range(0,i,h/e,j),d.points,-1,c,e,k),k.features.length?k:null},_addTileFeatures:function(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=b[a[g]];f.features.push({type:1,geometry:[[Math.round(this.options.extent*(h.x*e-c)),Math.round(this.options.extent*(h.y*e-d))]],tags:h.id!==-1?this.points[h.id].properties:i(h)})}},_limitZoom:function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))},_cluster:function(a,b){for(var c=[],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=0;e<a.length;e++){var g=a[e];if(!(g.zoom<=b)){g.zoom=b;for(var h=this.trees[b+1],i=h.within(g.x,g.y,d),j=!1,k=g.numPoints,l=g.x*k,m=g.y*k,n=0;n<i.length;n++){var o=h.points[i[n]];b<o.zoom&&(j=!0,o.zoom=b,l+=o.x*o.numPoints,m+=o.y*o.numPoints,k+=o.numPoints)}c.push(j?f(l/k,m/k,k,-1):g)}}return c}}},{kdbush:259}],486:[function(a,b,c){"use strict";function d(a){return a.split("").map(function(a){return a in e?e[a]:""}).join("")}b.exports=d;var e={" ":" ",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻",a:"ᵃ",b:"ᵇ",c:"ᶜ",d:"ᵈ",e:"ᵉ",f:"ᶠ",g:"ᵍ",h:"ʰ",i:"ⁱ",j:"ʲ",k:"ᵏ",l:"ˡ",m:"ᵐ",n:"ⁿ",o:"ᵒ",p:"ᵖ",r:"ʳ",s:"ˢ",t:"ᵗ",u:"ᵘ",v:"ᵛ",w:"ʷ",x:"ˣ",y:"ʸ",z:"ᶻ"}},{}],487:[function(a,b,c){"use strict";function d(a,b){var c=a.length,d=["'use strict';"],e="surfaceNets"+a.join("_")+"d"+b;d.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===b&&d.push("getters:[0],");for(var f=[],i=[],j=0;j<c;++j)f.push("d"+j),i.push("d"+j);for(var j=0;j<1<<c;++j)f.push("v"+j),i.push("v"+j);for(var j=0;j<1<<c;++j)f.push("p"+j),i.push("p"+j);f.push("a","b","c"),i.push("a","c"),d.push("vertex:function vertexFunc(",f.join(),"){");for(var k=[],j=0;j<1<<c;++j)k.push("(p"+j+"<<"+j+")");d.push("var m=(",k.join("+"),")|0;if(m===0||m===",(1<<(1<<c))-1,"){return}");var l=[],m=[];1<<(1<<c)<=128?(d.push("switch(m){"),m=d):d.push("switch(m>>>7){");for(var j=0;j<1<<(1<<c);++j){if(1<<(1<<c)>128&&j%128===0){l.length>0&&m.push("}}");var n="vExtra"+l.length;d.push("case ",j>>>7,":",n,"(m&0x7f,",i.join(),");break;"),m=["function ",n,"(m,",i.join(),"){switch(m){"],l.push(m)}m.push("case ",127&j,":");for(var o=new Array(c),p=new Array(c),q=new Array(c),r=new Array(c),s=0,t=0;t<c;++t)o[t]=[],p[t]=[],q[t]=0,r[t]=0;for(var t=0;t<1<<c;++t)for(var u=0;u<c;++u){var v=t^1<<u;if(!(v>t)&&!(j&1<<v)!=!(j&1<<t)){var w=1;j&1<<v?p[u].push("v"+v+"-v"+t):(p[u].push("v"+t+"-v"+v),w=-w),w<0?(o[u].push("-v"+t+"-v"+v),q[u]+=2):(o[u].push("v"+t+"+v"+v),q[u]-=2),s+=1;for(var x=0;x<c;++x)x!==u&&(v&1<<x?r[x]+=1:r[x]-=1)}}for(var y=[],u=0;u<c;++u)if(0===o[u].length)y.push("d"+u+"-0.5");else{var z="";q[u]<0?z=q[u]+"*c":q[u]>0&&(z="+"+q[u]+"*c");var A=.5*(o[u].length/s),B=.5+.5*(r[u]/s);y.push("d"+u+"-"+B+"-"+A+"*("+o[u].join("+")+z+")/("+p[u].join("+")+")")}m.push("a.push([",y.join(),"]);","break;")}d.push("}},"),l.length>0&&m.push("}}");for(var C=[],j=0;j<1<<c-1;++j)C.push("v"+j);C.push("c0","c1","p0","p1","a","b","c"),d.push("cell:function cellFunc(",C.join(),"){");var D=h(c-1);d.push("if(p0){b.push(",D.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",D.map(function(a){var b=a.slice();return b.reverse(),"["+b.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",e,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",e,";");for(var j=0;j<l.length;++j)d.push(l[j].join(""));var E=new Function("genContour",d.join(""));return E(g)}function e(a,b){for(var c=i(a,b),d=c.length,e=new Array(d),f=new Array(d),g=0;g<d;++g)e[g]=[c[g]],f[g]=[g];return{positions:e,cells:f}}function f(a,b){if(a.dimension<=0)return{positions:[],cells:[]};if(1===a.dimension)return e(a,b);var c=a.order.join()+"-"+a.dtype,f=j[c],b=+b||0;return f||(f=j[c]=d(a.order,a.dtype)),f(a,b)}b.exports=f;var g=a("ndarray-extract-contour"),h=a("triangulate-hypercube"),i=a("zero-crossings"),j={}},{"ndarray-extract-contour":416,"triangulate-hypercube":492,"zero-crossings":523}],488:[function(a,b,c){(function(c){"use strict";function d(a){for(var b=a.cells,c=a.positions,d=new Float32Array(6*b.length),e=0,f=0,g=0;g<b.length;++g)for(var h=b[g],i=0;i<3;++i){var j=c[h[i]];d[e++]=j[0],d[e++]=j[1]+1.4,f=Math.max(j[0],f)}return{data:d,shape:f}}function e(a,b,c){var c=c||{},g=h[a];g||(g=h[a]={" ":{data:new Float32Array(0),shape:.2}});var i=g[b];if(!i)if(b.length<=1||!/\d/.test(b))i=g[b]=d(f(b,{triangles:!0,font:a,textAlign:c.textAlign||"left",textBaseline:"alphabetic"}));else{for(var j=b.split(/(\d|\s)/),k=new Array(j.length),l=0,m=0,n=0;n<j.length;++n)k[n]=e(a,j[n]),l+=k[n].data.length,m+=k[n].shape,n>0&&(m+=.02);for(var o=new Float32Array(l),p=0,q=-.5*m,n=0;n<k.length;++n){for(var r=k[n].data,s=0;s<r.length;s+=2)o[p++]=r[s]+q,o[p++]=r[s+1];q+=k[n].shape+.02}i=g[b]={data:o,shape:m}}return i}b.exports=e;var f=a("vectorize-text"),g=window||c.global||{},h=g.__TEXT_CACHE||{};g.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:445,"vectorize-text":509}],489:[function(b,c,d){!function(b){function d(a,b){if(a=a?a:"",b=b||{},a instanceof d)return a;if(!(this instanceof d))return new d(a,b);var c=e(a);this._originalInput=a,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=R(100*this._a)/100,this._format=b.format||c.format,this._gradientType=b.gradientType,this._r<1&&(this._r=R(this._r)),this._g<1&&(this._g=R(this._g)),this._b<1&&(this._b=R(this._b)),this._ok=c.ok,this._tc_id=Q++}function e(a){var b={r:0,g:0,b:0},c=1,d=null,e=null,g=null,i=!1,k=!1;return"string"==typeof a&&(a=M(a)),"object"==typeof a&&(L(a.r)&&L(a.g)&&L(a.b)?(b=f(a.r,a.g,a.b),i=!0,k="%"===String(a.r).substr(-1)?"prgb":"rgb"):L(a.h)&&L(a.s)&&L(a.v)?(d=I(a.s),e=I(a.v),b=j(a.h,d,e),i=!0,k="hsv"):L(a.h)&&L(a.s)&&L(a.l)&&(d=I(a.s),g=I(a.l),b=h(a.h,d,g),i=!0,k="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=B(c),{ok:i,format:a.format||k,r:S(255,T(b.r,0)),g:S(255,T(b.g,0)),b:S(255,T(b.b,0)),a:c}}function f(a,b,c){return{r:255*C(a,255),g:255*C(b,255),b:255*C(c,255)}}function g(a,b,c){a=C(a,255),b=C(b,255),c=C(c,255);var d,e,f=T(a,b,c),g=S(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function h(a,b,c){function d(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=C(a,360),b=C(b,100),c=C(c,100),0===b)e=f=g=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function i(a,b,c){a=C(a,255),b=C(b,255),c=C(c,255);var d,e,f=T(a,b,c),g=S(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function j(a,c,d){a=6*C(a,360),c=C(c,100),d=C(d,100);var e=b.floor(a),f=a-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6,k=[d,h,g,g,i,d][j],l=[i,d,d,h,g,g][j],m=[g,g,i,d,d,h][j];return{r:255*k,g:255*l,b:255*m}}function k(a,b,c,d){var e=[H(R(a).toString(16)),H(R(b).toString(16)),H(R(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function l(a,b,c,d,e){var f=[H(R(a).toString(16)),H(R(b).toString(16)),H(R(c).toString(16)),H(J(d))];return e&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)&&f[3].charAt(0)==f[3].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function m(a,b,c,d){var e=[H(J(d)),H(R(a).toString(16)),H(R(b).toString(16)),H(R(c).toString(16))];return e.join("")}function n(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.s-=b/100,c.s=D(c.s),d(c)}function o(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.s+=b/100,c.s=D(c.s),d(c)}function p(a){return d(a).desaturate(100)}function q(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.l+=b/100,c.l=D(c.l),d(c)}function r(a,b){b=0===b?0:b||10;var c=d(a).toRgb();return c.r=T(0,S(255,c.r-R(255*-(b/100)))),c.g=T(0,S(255,c.g-R(255*-(b/100)))),c.b=T(0,S(255,c.b-R(255*-(b/100)))),d(c)}function s(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.l-=b/100,c.l=D(c.l),d(c)}function t(a,b){var c=d(a).toHsl(),e=(c.h+b)%360;return c.h=e<0?360+e:e,d(c)}function u(a){var b=d(a).toHsl();return b.h=(b.h+180)%360,d(b)}function v(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+120)%360,s:b.s,l:b.l}),d({h:(c+240)%360,s:b.s,l:b.l})]}function w(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+90)%360,s:b.s,l:b.l}),d({h:(c+180)%360,s:b.s,l:b.l}),d({h:(c+270)%360,s:b.s,l:b.l})]}function x(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+72)%360,s:b.s,l:b.l}),d({h:(c+216)%360,s:b.s,l:b.l})]}function y(a,b,c){b=b||6,c=c||30;var e=d(a).toHsl(),f=360/c,g=[d(a)];for(e.h=(e.h-(f*b>>1)+720)%360;--b;)e.h=(e.h+f)%360,g.push(d(e));return g}function z(a,b){b=b||6;for(var c=d(a).toHsv(),e=c.h,f=c.s,g=c.v,h=[],i=1/b;b--;)h.push(d({h:e,s:f,v:g})),g=(g+i)%1;return h}function A(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function B(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function C(a,c){F(a)&&(a="100%");var d=G(a);return a=S(c,T(0,parseFloat(a))),d&&(a=parseInt(a*c,10)/100),b.abs(a-c)<1e-6?1:a%c/parseFloat(c)}function D(a){return S(1,T(0,a))}function E(a){return parseInt(a,16)}function F(a){return"string"==typeof a&&a.indexOf(".")!=-1&&1===parseFloat(a)}function G(a){return"string"==typeof a&&a.indexOf("%")!=-1}function H(a){return 1==a.length?"0"+a:""+a}function I(a){return a<=1&&(a=100*a+"%"),a}function J(a){return b.round(255*parseFloat(a)).toString(16)}function K(a){return E(a)/255}function L(a){return!!X.CSS_UNIT.exec(a)}function M(a){a=a.replace(O,"").replace(P,"").toLowerCase();var b=!1;if(V[a])a=V[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=X.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=X.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=X.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=X.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=X.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=X.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=X.hex8.exec(a))?{r:E(c[1]),g:E(c[2]),b:E(c[3]),a:K(c[4]),format:b?"name":"hex8"}:(c=X.hex6.exec(a))?{r:E(c[1]),g:E(c[2]),b:E(c[3]),format:b?"name":"hex"}:(c=X.hex4.exec(a))?{r:E(c[1]+""+c[1]),g:E(c[2]+""+c[2]),b:E(c[3]+""+c[3]),a:K(c[4]+""+c[4]),format:b?"name":"hex8"}:!!(c=X.hex3.exec(a))&&{r:E(c[1]+""+c[1]),g:E(c[2]+""+c[2]),b:E(c[3]+""+c[3]),format:b?"name":"hex"}}function N(a){var b,c;return a=a||{level:"AA",size:"small"},b=(a.level||"AA").toUpperCase(),c=(a.size||"small").toLowerCase(),"AA"!==b&&"AAA"!==b&&(b="AA"),"small"!==c&&"large"!==c&&(c="small"),{level:b,size:c}}var O=/^\s+/,P=/\s+$/,Q=0,R=b.round,S=b.min,T=b.max,U=b.random;d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},getLuminance:function(){var a,c,d,e,f,g,h=this.toRgb();return a=h.r/255,c=h.g/255,d=h.b/255,e=a<=.03928?a/12.92:b.pow((a+.055)/1.055,2.4),f=c<=.03928?c/12.92:b.pow((c+.055)/1.055,2.4),g=d<=.03928?d/12.92:b.pow((d+.055)/1.055,2.4),.2126*e+.7152*f+.0722*g},setAlpha:function(a){return this._a=B(a),this._roundA=R(100*this._a)/100,this},toHsv:function(){var a=i(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=i(this._r,this._g,this._b),b=R(360*a.h),c=R(100*a.s),d=R(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=g(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=g(this._r,this._g,this._b),b=R(360*a.h),c=R(100*a.s),d=R(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return k(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){return l(this._r,this._g,this._b,this._a,a)},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:R(this._r),g:R(this._g),b:R(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+R(this._r)+", "+R(this._g)+", "+R(this._b)+")":"rgba("+R(this._r)+", "+R(this._g)+", "+R(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:R(100*C(this._r,255))+"%",g:R(100*C(this._g,255))+"%",b:R(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+R(100*C(this._r,255))+"%, "+R(100*C(this._g,255))+"%, "+R(100*C(this._b,255))+"%)":"rgba("+R(100*C(this._r,255))+"%, "+R(100*C(this._g,255))+"%, "+R(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(W[k(this._r,this._g,this._b,!0)]||!1)},toFilter:function(a){var b="#"+m(this._r,this._g,this._b,this._a),c=b,e=this._gradientType?"GradientType = 1, ":"";if(a){var f=d(a);c="#"+m(f._r,f._g,f._b,f._a)}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"hex4"===a||"hex8"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),"hex"!==a&&"hex6"!==a||(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex4"===a&&(c=this.toHex8String(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},clone:function(){return d(this.toString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(r,arguments)},darken:function(){return this._applyModification(s,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(o,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},d.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var e in a)a.hasOwnProperty(e)&&("a"===e?c[e]=a[e]:c[e]=I(a[e]));a=c}return d(a,b)},d.equals=function(a,b){return!(!a||!b)&&d(a).toRgbString()==d(b).toRgbString()},d.random=function(){return d.fromRatio({r:U(),g:U(),b:U()})},d.mix=function(a,b,c){c=0===c?0:c||50;var e=d(a).toRgb(),f=d(b).toRgb(),g=c/100,h={r:(f.r-e.r)*g+e.r,g:(f.g-e.g)*g+e.g,b:(f.b-e.b)*g+e.b,a:(f.a-e.a)*g+e.a};return d(h)},d.readability=function(a,c){var e=d(a),f=d(c);return(b.max(e.getLuminance(),f.getLuminance())+.05)/(b.min(e.getLuminance(),f.getLuminance())+.05)},d.isReadable=function(a,b,c){var e,f,g=d.readability(a,b);switch(f=!1,e=N(c),e.level+e.size){case"AAsmall":case"AAAlarge":f=g>=4.5;break;case"AAlarge":f=g>=3;break;case"AAAsmall":f=g>=7}return f},d.mostReadable=function(a,b,c){var e,f,g,h,i=null,j=0;c=c||{},f=c.includeFallbackColors,g=c.level,h=c.size;for(var k=0;k<b.length;k++)e=d.readability(a,b[k]),e>j&&(j=e,i=d(b[k]));return d.isReadable(a,i,{level:g,size:h})||!f?i:(c.includeFallbackColors=!1,d.mostReadable(a,["#fff","#000"],c))};var V=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},W=d.hexNames=A(V),X=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{CSS_UNIT:new RegExp(c),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof c&&c.exports?c.exports=d:"function"==typeof a&&a.amd?a(function(){return d}):window.tinycolor=d}(Math)},{}],490:[function(a,b,c){"use strict";function d(a,b){var c=g(getComputedStyle(a).getPropertyValue(b));return c[0]*f(c[1],a)}function e(a,b){var c=document.createElement("div");c.style["font-size"]="128"+a,b.appendChild(c);var e=d(c,"font-size")/128;return b.removeChild(c),e}function f(a,b){switch(b=b||document.body,a=(a||"px").trim().toLowerCase(),b!==window&&b!==document||(b=document.body),a){case"%":return b.clientHeight/100;case"ch":case"ex":return e(a,b);case"em":return d(b,"font-size");case"rem":return d(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return h;case"cm":return h/2.54;case"mm":return h/25.4;case"pt":return h/72;case"pc":return h/6}return 1}var g=a("parse-unit");b.exports=f;var h=96},{"parse-unit":433}],491:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.topojson=b.topojson||{})}(this,function(a){"use strict";function b(){}function c(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+h}}function d(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0);var i=Math.round((a[0]-g)/e),j=Math.round((a[1]-h)/f);a[0]=i-c,a[1]=j-d,c=i,d=j}}function e(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function f(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function g(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return h(a,b)})}:h(a,b)}function h(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:i(a,b)};return null==b.id&&delete c.id,c}function i(a,b){function d(a,b){b.length&&b.pop();for(var c,d=l[a<0?~a:a],f=0,g=d.length;f<g;++f)b.push(c=d[f].slice()),k(c,f);a<0&&e(b,g)}function f(a){return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,e=a.length;c<e;++c)d(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{
type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=c(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(b)}function j(a,b){function c(b){var c,d=a.arcs[b<0?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],b<0?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[a<0?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[c<0?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[a<0?~a:a]||h.push([a])}),h}function k(a){return i(a,l.apply(this,arguments))}function l(a,b,c){function d(a){var b=a<0?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in l&&(i=a,l[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,k=[],l={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),k.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var m=0,n=a.arcs.length;m<n;++m)h.push(m);return{type:"MultiLineString",arcs:j(a,h)}}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function n(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function o(a){return i(a,p.apply(this,arguments))}function p(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=b<0?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return Math.abs(n(i(a,{type:"Polygon",arcs:[b]}).coordinates[0]))}var e={},f=[],g=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,g.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[a<0?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:g.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[a<0?~a:a].length<2&&f.push(a)})})}),f=j(a,f),(c=f.length)>1)for(var g,h,i=1,k=d(f[0]);i<c;++i)(g=d(f[i]))>k&&(h=f[0],f[0]=f[i],f[i]=h,k=g);return f})}}function q(a){function b(a,b){a.forEach(function(a){a<0&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;l<k;++l)for(var m=l+1;m<k;++m){var n,o=j[l],p=j[m];(n=g[o])[i=f(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=f(n,o)]!==o&&n.splice(i,0,o)}return g}function r(a,b){return a[1][2]-b[1][2]}function s(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(r(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(f<e&&r(d[f],h)<0&&(h=d[g=f]),c<e&&r(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(e<=0)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(r(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function t(a,b){function e(a){h.remove(a),a[1][2]=b(a),h.push(a)}var f=c(a.transform),g=d(a.transform),h=s();return b||(b=m),a.arcs.forEach(function(a){var c,d,i,j,k=[],l=0;for(d=0,i=a.length;d<i;++d)j=a[d],f(a[d]=[j[0],j[1],1/0],d);for(d=1,i=a.length-1;d<i;++d)c=a.slice(d-1,d+2),c[1][2]=b(c),k.push(c),h.push(c);for(d=0,i=k.length;d<i;++d)c=k[d],c.previous=k[d-1],c.next=k[d+1];for(;c=h.pop();){var m=c.previous,n=c.next;c[1][2]<l?c[1][2]=l:l=c[1][2],m&&(m.next=n,m[2]=c[2],e(m)),n&&(n.previous=m,n[0]=c[0],e(n))}a.forEach(g)}),a}var u="1.6.27";a.version=u,a.mesh=k,a.meshArcs=l,a.merge=o,a.mergeArcs=p,a.feature=g,a.neighbors=q,a.presimplify=t,Object.defineProperty(a,"__esModule",{value:!0})})},{}],492:[function(a,b,c){"use strict";function d(a){if(a<0)return[];if(0===a)return[[0]];for(var b=0|Math.round(g(a+1)),c=[],d=0;d<b;++d){for(var h=e.unrank(a,d),i=[0],j=0,k=0;k<h.length;++k)j+=1<<h[k],i.push(j);f(h)<1&&(i[0]=j,i[a]=0),c.push(i)}return c}b.exports=d;var e=a("permutation-rank"),f=a("permutation-parity"),g=a("gamma")},{gamma:108,"permutation-parity":437,"permutation-rank":438}],493:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a){return Math.min(1,Math.max(-1,a))}function f(a){var b=Math.abs(a[0]),c=Math.abs(a[1]),d=Math.abs(a[2]),e=[0,0,0];b>Math.max(c,d)?e[2]=1:c>Math.max(b,d)?e[0]=1:e[1]=1;for(var f=0,g=0,h=0;h<3;++h)f+=a[h]*a[h],g+=e[h]*a[h];for(var h=0;h<3;++h)e[h]-=g/f*a[h];return m(e,e),e}function g(a,b,c,d,e,f,g,h){this.center=i(c),this.up=i(d),this.right=i(e),this.radius=i([f]),this.angle=i([g,h]),this.angle.bounds=[[-(1/0),-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(a,b),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var j=0;j<16;++j)this.computedMatrix[j]=.5;this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.up||[0,1,0],e=a.right||f(c),h=a.radius||1,i=a.theta||0,j=a.phi||0;if(b=[].slice.call(b,0,3),c=[].slice.call(c,0,3),m(c,c),e=[].slice.call(e,0,3),m(e,e),"eye"in a){var k=a.eye,o=[k[0]-b[0],k[1]-b[1],k[2]-b[2]];l(e,o,c),d(e[0],e[1],e[2])<1e-6?e=f(c):m(e,e),h=d(o[0],o[1],o[2]);var p=n(c,o)/h,q=n(e,o)/h;j=Math.acos(p),i=Math.acos(q)}return h=Math.log(h),new g(a.zoomMin,a.zoomMax,b,c,e,h,i,j)}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/invert"),k=a("gl-mat4/rotate"),l=a("gl-vec3/cross"),m=a("gl-vec3/normalize"),n=a("gl-vec3/dot"),o=g.prototype;o.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-(1/0),b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},o.getDistanceLimits=function(a){var b=this.radius.bounds[0];return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},o.recalcMatrix=function(a){this.center.curve(a),this.up.curve(a),this.right.curve(a),this.radius.curve(a),this.angle.curve(a);for(var b=this.computedUp,c=this.computedRight,e=0,f=0,g=0;g<3;++g)f+=b[g]*c[g],e+=b[g]*b[g];for(var h=Math.sqrt(e),i=0,g=0;g<3;++g)c[g]-=b[g]*f/e,i+=c[g]*c[g],b[g]/=h;for(var j=Math.sqrt(i),g=0;g<3;++g)c[g]/=j;var k=this.computedToward;l(k,b,c),m(k,k);for(var n=Math.exp(this.computedRadius[0]),o=this.computedAngle[0],p=this.computedAngle[1],q=Math.cos(o),r=Math.sin(o),s=Math.cos(p),t=Math.sin(p),u=this.computedCenter,v=q*s,w=r*s,x=t,y=-q*t,z=-r*t,A=s,B=this.computedEye,C=this.computedMatrix,g=0;g<3;++g){var D=v*c[g]+w*k[g]+x*b[g];C[4*g+1]=y*c[g]+z*k[g]+A*b[g],C[4*g+2]=D,C[4*g+3]=0}var E=C[1],F=C[5],G=C[9],H=C[2],I=C[6],J=C[10],K=F*J-G*I,L=G*H-E*J,M=E*I-F*H,N=d(K,L,M);K/=N,L/=N,M/=N,C[0]=K,C[4]=L,C[8]=M;for(var g=0;g<3;++g)B[g]=u[g]+C[2+4*g]*n;for(var g=0;g<3;++g){for(var i=0,O=0;O<3;++O)i+=C[g+4*O]*B[O];C[12+g]=-i}C[15]=1},o.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;d<16;++d)b[d]=c[d];return b}return c};var p=[0,0,0];o.rotate=function(a,b,c,d){if(this.angle.move(a,b,c),d){this.recalcMatrix(a);var e=this.computedMatrix;p[0]=e[2],p[1]=e[6],p[2]=e[10];for(var f=this.computedUp,g=this.computedRight,h=this.computedToward,i=0;i<3;++i)e[4*i]=f[i],e[4*i+1]=g[i],e[4*i+2]=h[i];k(e,e,d,p);for(var i=0;i<3;++i)f[i]=e[4*i],g[i]=e[4*i+1];this.up.set(a,f[0],f[1],f[2]),this.right.set(a,g[0],g[1],g[2])}},o.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=(Math.exp(this.computedRadius[0]),f[1]),h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=k*b+g*c,q=l*b+h*c,r=m*b+i*c;this.center.move(a,p,q,r);var s=Math.exp(this.computedRadius[0]);s=Math.max(1e-4,s+e),this.radius.set(a,Math.log(s))},o.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},o.setMatrix=function(a,b,c,f){var g=1;"number"==typeof c&&(g=0|c),(g<0||g>3)&&(g=1);var h=(g+2)%3;b||(this.recalcMatrix(a),b=this.computedMatrix);var i=b[g],k=b[g+4],l=b[g+8];if(f){var m=Math.abs(i),n=Math.abs(k),o=Math.abs(l),p=Math.max(m,n,o);m===p?(i=i<0?-1:1,k=l=0):o===p?(l=l<0?-1:1,i=k=0):(k=k<0?-1:1,i=l=0)}else{var q=d(i,k,l);i/=q,k/=q,l/=q}var r=b[h],s=b[h+4],t=b[h+8],u=r*i+s*k+t*l;r-=i*u,s-=k*u,t-=l*u;var v=d(r,s,t);r/=v,s/=v,t/=v;var w=k*t-l*s,x=l*r-i*t,y=i*s-k*r,z=d(w,x,y);w/=z,x/=z,y/=z,this.center.jump(a,S,T,U),this.radius.idle(a),this.up.jump(a,i,k,l),this.right.jump(a,r,s,t);var A,B;if(2===g){var C=b[1],D=b[5],E=b[9],F=C*r+D*s+E*t,G=C*w+D*x+E*y;A=K<0?-Math.PI/2:Math.PI/2,B=Math.atan2(G,F)}else{var H=b[2],I=b[6],J=b[10],K=H*i+I*k+J*l,L=H*r+I*s+J*t,M=H*w+I*x+J*y;A=Math.asin(e(K)),B=Math.atan2(M,L)}this.angle.jump(a,B,A),this.recalcMatrix(a);var N=b[2],O=b[6],P=b[10],Q=this.computedMatrix;j(Q,b);var R=Q[15],S=Q[12]/R,T=Q[13]/R,U=Q[14]/R,V=Math.exp(this.computedRadius[0]);this.center.jump(a,S-N*V,T-O*V,U-P*V)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(a){this.center.idle(a),this.up.idle(a),this.right.idle(a),this.radius.idle(a),this.angle.idle(a)},o.flush=function(a){this.center.flush(a),this.up.flush(a),this.right.flush(a),this.radius.flush(a),this.angle.flush(a)},o.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},o.lookAt=function(a,b,c,f){this.recalcMatrix(a),b=b||this.computedEye,c=c||this.computedCenter,f=f||this.computedUp;var g=f[0],h=f[1],i=f[2],j=d(g,h,i);if(!(j<1e-6)){g/=j,h/=j,i/=j;var k=b[0]-c[0],l=b[1]-c[1],m=b[2]-c[2],n=d(k,l,m);if(!(n<1e-6)){k/=n,l/=n,m/=n;var o=this.computedRight,p=o[0],q=o[1],r=o[2],s=g*p+h*q+i*r;p-=s*g,q-=s*h,r-=s*i;var t=d(p,q,r);if(!(t<.01&&(p=h*m-i*l,q=i*k-g*m,r=g*l-h*k,t=d(p,q,r),t<1e-6))){p/=t,q/=t,r/=t,this.up.set(a,g,h,i),this.right.set(a,p,q,r),this.center.set(a,c[0],c[1],c[2]),this.radius.set(a,Math.log(n));var u=h*r-i*q,v=i*p-g*r,w=g*q-h*p,x=d(u,v,w);u/=x,v/=x,w/=x;var y=g*k+h*l+i*m,z=p*k+q*l+r*m,A=u*k+v*l+w*m,B=Math.asin(e(y)),C=Math.atan2(A,z),D=this.angle._state,E=D[D.length-1],F=D[D.length-2];E%=2*Math.PI;var G=Math.abs(E+2*Math.PI-C),H=Math.abs(E-C),I=Math.abs(E-2*Math.PI-C);G<H&&(E+=2*Math.PI),I<H&&(E-=2*Math.PI),this.angle.jump(this.angle.lastT(),E,F),this.angle.set(a,C,B)}}}}},{"filtered-vector":106,"gl-mat4/invert":149,"gl-mat4/rotate":153,"gl-vec3/cross":237,"gl-vec3/dot":238,"gl-vec3/normalize":241}],494:[function(a,b,c){"use strict";function d(a,b,c){var d=a*b,f=e*a,g=f-a,h=f-g,i=a-h,j=e*b,k=j-b,l=j-k,m=b-l,n=d-h*l,o=n-i*l,p=o-h*m,q=i*m-p;return c?(c[0]=q,c[1]=d,c):[q,d]}b.exports=d;var e=+(Math.pow(2,27)+1)},{}],495:[function(a,b,c){"use strict";function d(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;return c?(c[0]=h+g,c[1]=d,c):[h+g,d]}b.exports=d},{}],496:[function(a,b,c){(function(b,d){"use strict";function e(a){if(a){var b=a.length||a.byteLength,c=s.log2(b);w[c].push(a)}}function f(a){e(a.buffer)}function g(a){var a=s.nextPow2(a),b=s.log2(a),c=w[b];return c.length>0?c.pop():new ArrayBuffer(a)}function h(a){return new Uint8Array(g(a),0,a)}function i(a){return new Uint16Array(g(2*a),0,a)}function j(a){return new Uint32Array(g(4*a),0,a)}function k(a){return new Int8Array(g(a),0,a)}function l(a){return new Int16Array(g(2*a),0,a)}function m(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function o(a){return new Float64Array(g(8*a),0,a)}function p(a){return u?new Uint8ClampedArray(g(a),0,a):h(a)}function q(a){return new DataView(g(a),0,a)}function r(a){a=s.nextPow2(a);var b=s.log2(a),c=x[b];return c.length>0?c.pop():new d(a)}var s=a("bit-twiddle"),t=a("dup");b.__TYPEDARRAY_POOL||(b.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var u="undefined"!=typeof Uint8ClampedArray,v=b.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=t([32,0])),v.BUFFER||(v.BUFFER=t([32,0]));var w=v.DATA,x=v.BUFFER;c.free=function(a){if(d.isBuffer(a))x[s.log2(a.length)].push(a);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),!a)return;var b=a.length||a.byteLength,c=0|s.log2(b);w[c].push(a)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=f,c.freeArrayBuffer=e,c.freeBuffer=function(a){x[s.log2(a.length)].push(a)},c.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case"uint8":return h(a);case"uint16":return i(a);case"uint32":return j(a);case"int8":return k(a);case"int16":return l(a);case"int32":return m(a);case"float":case"float32":return n(a);case"double":case"float64":return o(a);case"uint8_clamped":return p(a);case"buffer":return r(a);case"data":case"dataview":return q(a);default:return null}return null},c.mallocArrayBuffer=g,c.mallocUint8=h,c.mallocUint16=i,c.mallocUint32=j,c.mallocInt8=k,c.mallocInt16=l,c.mallocInt32=m,c.mallocFloat32=c.mallocFloat=n,c.mallocFloat64=c.mallocDouble=o,c.mallocUint8Clamped=p,c.mallocDataView=q,c.mallocBuffer=r,c.clearCache=function(){for(var a=0;a<32;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,w[a].length=0,x[a].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":54,buffer:64,dup:98}],497:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d;var e=d.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.find=function(a){for(var b=a,c=this.roots;c[a]!==a;)a=c[a];for(;c[b]!==a;){var d=c[b];c[b]=a,b=d}return a},e.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];g<h?f[c]=d:h<g?f[d]=c:(f[d]=c,++e[c])}}},{}],498:[function(a,b,c){"use strict";function d(a,b){for(var c=1,d=a.length,e=a[0],f=a[0],g=1;g<d;++g)if(f=e,e=a[g],b(e,f)){if(g===c){c++;continue}a[c++]=e}return a.length=c,a}function e(a){for(var b=1,c=a.length,d=a[0],e=a[0],f=1;f<c;++f,e=d)if(e=d,d=a[f],d!==e){if(f===b){b++;continue}a[b++]=d}return a.length=b,a}function f(a,b,c){return 0===a.length?a:b?(c||a.sort(b),d(a,b)):(c||a.sort(),e(a))}b.exports=f},{}],499:[function(a,b,c){function d(a,b,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(d-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=c,this.p2y=d}b.exports=d,d.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},d.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},d.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},d.prototype.solveCurveX=function(a,b){"undefined"==typeof b&&(b=1e-6);var c,d,e,f,g;for(e=a,g=0;g<8;g++){if(f=this.sampleCurveX(e)-a,Math.abs(f)<b)return e;var h=this.sampleCurveDerivativeX(e);if(Math.abs(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,e<c)return c;if(e>d)return d;for(;c<d;){if(f=this.sampleCurveX(e),Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e},d.prototype.solve=function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}},{}],500:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=d!==-1&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);C!==-1&&(A===-1||C<A)&&(A=C)}var D,E;E=A===-1?h.lastIndexOf("@"):h.lastIndexOf("@",A),E!==-1&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);C!==-1&&(A===-1||C<A)&&(A=C)}A===-1&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;K<L;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;B<H;B++){var R=p[B];if(h.indexOf(R)!==-1){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");T!==-1&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(U!==-1?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":501,punycode:446,querystring:450}],501:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],502:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],503:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],504:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":503,_process:445,inherits:502}],505:[function(a,b,c){b.exports.VectorTile=a("./lib/vectortile.js"),b.exports.VectorTileFeature=a("./lib/vectortilefeature.js"),b.exports.VectorTileLayer=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":506,"./lib/vectortilefeature.js":507,"./lib/vectortilelayer.js":508}],506:[function(a,b,c){"use strict";function d(a,b){this.layers=a.readFields(e,{},b)}function e(a,b,c){if(3===a){var d=new f(c,c.readVarint()+c.pos);d.length&&(b[d.name]=d)}}var f=a("./vectortilelayer");b.exports=d},{"./vectortilelayer":508}],507:[function(a,b,c){"use strict";function d(a,b,c,d,f){this.properties={},this.extent=c,this.type=0,this._pbf=a,
this._geometry=-1,this._keys=d,this._values=f,a.readFields(e,this,b)}function e(a,b,c){1==a?b.id=c.readVarint():2==a?f(c,b):3==a?b.type=c.readVarint():4==a&&(b._geometry=c.pos)}function f(a,b){for(var c=a.readVarint()+a.pos;a.pos<c;){var d=b._keys[a.readVarint()],e=b._values[a.readVarint()];b.properties[d]=e}}function g(a){var b=a.length;if(b<=1)return[a];for(var c,d,e=[],f=0;f<b;f++){var g=h(a[f]);0!==g&&(void 0===d&&(d=g<0),d===g<0?(c&&e.push(c),c=[a[f]]):c.push(a[f]))}return c&&e.push(c),e}function h(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var i=a("point-geometry");b.exports=d,d.types=["Unknown","Point","LineString","Polygon"],d.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var b,c=a.readVarint()+a.pos,d=1,e=0,f=0,g=0,h=[];a.pos<c;){if(!e){var j=a.readVarint();d=7&j,e=j>>3}if(e--,1===d||2===d)f+=a.readSVarint(),g+=a.readSVarint(),1===d&&(b&&h.push(b),b=[]),b.push(new i(f,g));else{if(7!==d)throw new Error("unknown command "+d);b&&b.push(b[0].clone())}}return b&&h.push(b),h},d.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var b=a.readVarint()+a.pos,c=1,d=0,e=0,f=0,g=1/0,h=-(1/0),i=1/0,j=-(1/0);a.pos<b;){if(!d){var k=a.readVarint();c=7&k,d=k>>3}if(d--,1===c||2===c)e+=a.readSVarint(),f+=a.readSVarint(),e<g&&(g=e),e>h&&(h=e),f<i&&(i=f),f>j&&(j=f);else if(7!==c)throw new Error("unknown command "+c)}return[g,i,h,j]},d.prototype.toGeoJSON=function(a,b,c){function e(a){for(var b=0;b<a.length;b++){var c=a[b],d=180-360*(c.y+k)/i;a[b]=[360*(c.x+j)/i-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}}var f,h,i=this.extent*Math.pow(2,c),j=this.extent*a,k=this.extent*b,l=this.loadGeometry(),m=d.types[this.type];switch(this.type){case 1:var n=[];for(f=0;f<l.length;f++)n[f]=l[f][0];l=n,e(l);break;case 2:for(f=0;f<l.length;f++)e(l[f]);break;case 3:for(l=g(l),f=0;f<l.length;f++)for(h=0;h<l[f].length;h++)e(l[f][h])}1===l.length?l=l[0]:m="Multi"+m;var o={type:"Feature",geometry:{type:m,coordinates:l},properties:this.properties};return"id"in this&&(o.id=this.id),o}},{"point-geometry":442}],508:[function(a,b,c){"use strict";function d(a,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(e,this,b),this.length=this._features.length}function e(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():5===a?b.extent=c.readVarint():2===a?b._features.push(c.pos):3===a?b._keys.push(c.readString()):4===a&&b._values.push(f(c))}function f(a){for(var b=null,c=a.readVarint()+a.pos;a.pos<c;){var d=a.readVarint()>>3;b=1===d?a.readString():2===d?a.readFloat():3===d?a.readDouble():4===d?a.readVarint64():5===d?a.readVarint():6===d?a.readSVarint():7===d?a.readBoolean():null}return b}var g=a("./vectortilefeature.js");b.exports=d,d.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var b=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,b,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":507}],509:[function(a,b,c){"use strict";function d(a,b){return"object"==typeof b&&null!==b||(b={}),e(a,b.canvas||f,b.context||g,b)}b.exports=d;var e=a("./lib/vtext"),f=null,g=null;"undefined"!=typeof document&&(f=document.createElement("canvas"),f.width=8192,f.height=1024,g=f.getContext("2d"))},{"./lib/vtext":510}],510:[function(a,b,c){"use strict";function d(a,b,c){for(var d=b.textAlign||"start",e=b.textBaseline||"alphabetic",f=[1<<30,1<<30],g=[0,0],h=a.length,i=0;i<h;++i)for(var j=a[i],k=0;k<2;++k)f[k]=0|Math.min(f[k],j[k]),g[k]=0|Math.max(g[k],j[k]);var l=0;switch(d){case"center":l=-.5*(f[0]+g[0]);break;case"right":case"end":l=-g[0];break;case"left":case"start":l=-f[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+d+"'")}var m=0;switch(e){case"hanging":case"top":m=-f[1];break;case"middle":m=-.5*(f[1]+g[1]);break;case"alphabetic":case"ideographic":m=-3*c;break;case"bottom":m=-g[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'")}var n=1/c;return"lineHeight"in b?n*=+b.lineHeight:"width"in b?n=b.width/(g[0]-f[0]):"height"in b&&(n=b.height/(g[1]-f[1])),a.map(function(a){return[n*(a[0]+l),n*(a[1]+m)]})}function e(a,b,c,d){var e=0|Math.ceil(b.measureText(c).width+2*d);if(e>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var f=3*d;a.height<f&&(a.height=f),b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.fillStyle="#fff",b.fillText(c,d,2*d);var g=b.getImageData(0,0,e,f),h=k(g.data,[f,e,4]);return h.pick(-1,-1,0).transpose(1,0)}function f(a,b){var c=j(a,128);return b?l(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions}}function g(a,b,c,e){var g=f(a,e),h=d(g.positions,b,c),i=g.edges,j="ccw"===b.orientation;if(m(h,i),b.polygons||b.polygon||b.polyline){for(var k=o(i,h),l=new Array(k.length),p=0;p<k.length;++p){for(var q=k[p],r=new Array(q.length),s=0;s<q.length;++s){for(var t=q[s],u=new Array(t.length),v=0;v<t.length;++v)u[v]=h[t[v]].slice();j&&u.reverse(),r[s]=u}l[p]=r}return l}return b.triangles||b.triangulate||b.triangle?{cells:n(h,i,{delaunay:!1,exterior:!1,interior:!0}),positions:h}:{edges:i,positions:h}}function h(a,b,c){try{return g(a,b,c,!0)}catch(a){}try{return g(a,b,c,!1)}catch(a){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function i(a,b,c,d){var f=d.size||64,g=d.font||"normal";c.font=f+"px "+g,c.textAlign="start",c.textBaseline="alphabetic",c.direction="ltr";var i=e(b,c,a,f);return h(i,d,f)}b.exports=i,b.exports.processPixels=h;var j=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),m=a("clean-pslg"),n=a("cdt2d"),o=a("planar-graph-to-polyline")},{cdt2d:67,"clean-pslg":76,ndarray:427,"planar-graph-to-polyline":441,"simplify-planar-graph":480,"surface-nets":487}],511:[function(a,b,c){function d(a){var b=[];for(var c in a.layers)b.push(f(a.layers[c]));var d=new k;return l.tile.write({layers:b},d),d.finish()}function e(a){var b={};for(var c in a)b[c]=new m(a[c].features),b[c].name=c;return d({layers:b})}function f(a){for(var b={name:a.name||"",version:a.version||1,extent:a.extent||4096,keys:[],values:[],features:[]},c={},d={},e=0;e<a.length;e++){var f=a.feature(e);f.geometry=i(f.loadGeometry());var g=[];for(var h in f.properties){var k=c[h];"undefined"==typeof k&&(b.keys.push(h),k=b.keys.length-1,c[h]=k);var l=j(f.properties[h]),m=d[l.key];"undefined"==typeof m&&(b.values.push(l),m=b.values.length-1,d[l.key]=m),g.push(k),g.push(m)}f.tags=g,b.features.push(f)}return b}function g(a,b){return(b<<3)+(7&a)}function h(a){return a<<1^a>>31}function i(a){for(var b=[],c=0,d=0,e=a.length,f=0;f<e;f++){var i=a[f];b.push(g(1,1));for(var j=0;j<i.length;j++){1===j&&b.push(g(2,i.length-1));var k=i[j].x-c,l=i[j].y-d;b.push(h(k),h(l)),c+=k,d+=l}}return b}function j(a){var b,c=typeof a;return"string"===c?b={string_value:a}:"boolean"===c?b={bool_value:a}:"number"===c?b=a%1!==0?{double_value:a}:a<0?{sint_value:a}:{uint_value:a}:(a=JSON.stringify(a),b={string_value:a}),b.key=c+":"+a,b}var k=a("pbf"),l=a("./vector-tile-pb"),m=a("./lib/geojson_wrapper");b.exports=d,b.exports.fromVectorTileJs=d,b.exports.fromGeojsonVt=e,b.exports.GeoJSONWrapper=m},{"./lib/geojson_wrapper":512,"./vector-tile-pb":513,pbf:436}],512:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length}function e(a){this.id="number"==typeof a.id?a.id:void 0,this.type=a.type,this.rawGeometry=1===a.type?[a.geometry]:a.geometry,this.properties=a.tags,this.extent=4096}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-(1/0),d=1/0,e=-(1/0),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"point-geometry":442,"vector-tile":505}],513:[function(a,b,c){"use strict";function d(a,b){return a.readFields(e,{layers:[]},b)}function e(a,b,c){3===a&&b.layers.push(m(c,c.readVarint()+c.pos))}function f(a,b){var c;if(void 0!==a.layers)for(c=0;c<a.layers.length;c++)b.writeMessage(3,o,a.layers[c])}function g(a,b){return a.readFields(h,{},b)}function h(a,b,c){1===a?b.string_value=c.readString():2===a?b.float_value=c.readFloat():3===a?b.double_value=c.readDouble():4===a?b.int_value=c.readVarint():5===a?b.uint_value=c.readVarint():6===a?b.sint_value=c.readSVarint():7===a&&(b.bool_value=c.readBoolean())}function i(a,b){void 0!==a.string_value&&b.writeStringField(1,a.string_value),void 0!==a.float_value&&b.writeFloatField(2,a.float_value),void 0!==a.double_value&&b.writeDoubleField(3,a.double_value),void 0!==a.int_value&&b.writeVarintField(4,a.int_value),void 0!==a.uint_value&&b.writeVarintField(5,a.uint_value),void 0!==a.sint_value&&b.writeSVarintField(6,a.sint_value),void 0!==a.bool_value&&b.writeBooleanField(7,a.bool_value)}function j(a,b){var c=a.readFields(k,{},b);return void 0===c.type&&(c.type="Unknown"),c}function k(a,b,c){1===a?b.id=c.readVarint():2===a?b.tags=c.readPackedVarint():3===a?b.type=c.readVarint():4===a&&(b.geometry=c.readPackedVarint())}function l(a,b){void 0!==a.id&&b.writeVarintField(1,a.id),void 0!==a.tags&&b.writePackedVarint(2,a.tags),void 0!==a.type&&b.writeVarintField(3,a.type),void 0!==a.geometry&&b.writePackedVarint(4,a.geometry)}function m(a,b){return a.readFields(n,{features:[],keys:[],values:[]},b)}function n(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():2===a?b.features.push(j(c,c.readVarint()+c.pos)):3===a?b.keys.push(c.readString()):4===a?b.values.push(g(c,c.readVarint()+c.pos)):5===a&&(b.extent=c.readVarint())}function o(a,b){void 0!==a.version&&b.writeVarintField(15,a.version),void 0!==a.name&&b.writeStringField(1,a.name);var c;if(void 0!==a.features)for(c=0;c<a.features.length;c++)b.writeMessage(2,l,a.features[c]);if(void 0!==a.keys)for(c=0;c<a.keys.length;c++)b.writeStringField(3,a.keys[c]);if(void 0!==a.values)for(c=0;c<a.values.length;c++)b.writeMessage(4,i,a.values[c]);void 0!==a.extent&&b.writeVarintField(5,a.extent)}var p=c.tile={read:d,write:f};p.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},p.value={read:g,write:i},p.feature={read:j,write:l},p.layer={read:m,write:o}},{}],514:[function(a,b,c){!function(){"use strict";function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function c(a){return!(a.substr(0,n.length)==n&&"___"===a.substr(a.length-3))}function d(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);var b=a[o];if(b&&b.key===a)return b;if(m(a)){b={key:a};try{return l(a,o,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}catch(a){return}}}function e(a){return a.prototype=null,Object.freeze(a)}function f(){s||"undefined"==typeof console||(s=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=a);var g=!1;if("function"==typeof WeakMap){var h=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var i=new h,j=Object.freeze({});if(i.set(j,1),1===i.get(j))return void(b.exports=WeakMap);g=!0}}var k=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),l=Object.defineProperty,m=Object.isExtensible,n="weakmap:",o=n+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var p=new ArrayBuffer(25),q=new Uint8Array(p);crypto.getRandomValues(q),o=n+"rand:"+Array.prototype.map.call(q,function(a){return(a%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(a){return k(a).filter(c)}}),"getPropertyNames"in Object){var r=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(a){return r(a).filter(c)}})}!function(){var a=Object.freeze;l(Object,"freeze",{value:function(b){return d(b),a(b)}});var b=Object.seal;l(Object,"seal",{value:function(a){return d(a),b(a)}});var c=Object.preventExtensions;l(Object,"preventExtensions",{value:function(a){return d(a),c(a)}})}();var s=!1,t=0,u=function(){function a(a,b){var c,e=d(a);return e?j in e?e[j]:b:(c=h.indexOf(a),c>=0?i[c]:b)}function b(a){var b=d(a);return b?j in b:h.indexOf(a)>=0}function c(a,b){var c,e=d(a);return e?e[j]=b:(c=h.indexOf(a),c>=0?i[c]=b:(c=h.length,i[c]=b,h[c]=a)),this}function g(a){var b,c,e=d(a);return e?j in e&&delete e[j]:(b=h.indexOf(a),!(b<0||(c=h.length-1,h[b]=void 0,i[b]=i[c],h[b]=h[c],h.length=c,i.length=c,0)))}this instanceof u||f();var h=[],i=[],j=t++;return Object.create(u.prototype,{get___:{value:e(a)},has___:{value:e(b)},set___:{value:e(c)},delete___:{value:e(g)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){return this.set___(a,b)},writable:!0,configurable:!0},"delete":{value:function(a){return this.delete___(a)},writable:!0,configurable:!0}}),"function"==typeof h?!function(){function c(){function b(a,b){return k?j.has(a)?j.get(a):k.get___(a,b):j.get(a,b)}function c(a){return j.has(a)||!!k&&k.has___(a)}function d(a){var b=!!j["delete"](a);return k?k.delete___(a)||b:b}this instanceof u||f();var i,j=new h,k=void 0,l=!1;return i=g?function(a,b){return j.set(a,b),j.has(a)||(k||(k=new u),k.set(a,b)),this}:function(a,b){if(l)try{j.set(a,b)}catch(c){k||(k=new u),k.set___(a,b)}else j.set(a,b);return this},Object.create(u.prototype,{get___:{value:e(b)},has___:{value:e(c)},set___:{value:e(i)},delete___:{value:e(d)},permitHostObjects___:{value:e(function(b){if(b!==a)throw new Error("bogus call to permitHostObjects___");l=!0})}})}g&&"undefined"!=typeof Proxy&&(Proxy=void 0),c.prototype=u.prototype,b.exports=c,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=u)}}()},{}],515:[function(a,b,c){function d(){var a={};return function(b){if(("object"!=typeof b||null===b)&&"function"!=typeof b)throw new Error("Weakmap-shim: Key must be object");var c=b.valueOf(a);return c&&c.identity===a?c:e(b,a)}}var e=a("./hidden-store.js");b.exports=d},{"./hidden-store.js":516}],516:[function(a,b,c){function d(a,b){var c={identity:b},d=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(a){return a!==b?d.apply(this,arguments):c},writable:!0}),c}b.exports=d},{}],517:[function(a,b,c){function d(){var a=e();return{get:function(b,c){var d=a(b);return d.hasOwnProperty("value")?d.value:c},set:function(b,c){a(b).value=c},has:function(b){return"value"in a(b)},"delete":function(b){return delete a(b).value}}}var e=a("./create-store.js");b.exports=d},{"./create-store.js":515}],518:[function(a,b,c){var d=a("get-canvas-context");b.exports=function(a){return d("webgl",a)}},{"get-canvas-context":119}],519:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a,b){function c(a){q[a]=!0;for(var b in e[a][1]){var d=e[a][1][b];q[d]||c(d)}}for(var h,i=Object.keys(f),j=0,k=i.length;j<k;j++){var l=i[j],m=f[l].exports;if(m===a||m&&m["default"]===a){h=l;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var n={},j=0,k=i.length;j<k;j++){var l=i[j];n[l]=l}e[h]=[Function(["require","module","exports"],"("+a+")(self)"),n]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[h]=h,e[o]=[Function(["require"],"var f = require("+g(h)+");(f.default ? f.default : f)(self);"),p];var q={};c(o);var r="("+d+")({"+Object.keys(q).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(o)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,t=new Blob([r],{type:"text/javascript"});if(b&&b.bare)return t;var u=s.createObjectURL(t),v=new Worker(u);return v.objectURL=u,v}},{}],520:[function(a,b,c){b.exports.RADIUS=6378137,b.exports.FLATTENING=1/298.257223563,b.exports.POLAR_RADIUS=6356752.3142},{}],521:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.WhooTS=b.WhooTS||{})}(this,function(a){function b(a,b,d,e,f,g){g=g||{};var h=a+"?"+["bbox="+c(d,e,f),"format="+(g.format||"image/png"),"service="+(g.service||"WMS"),"version="+(g.version||"1.1.1"),"request="+(g.request||"GetMap"),"srs="+(g.srs||"EPSG:3857"),"width="+(g.width||256),"height="+(g.height||256),"layers="+b].join("&");return h}function c(a,b,c){b=Math.pow(2,c)-b-1;var e=d(256*a,256*b,c),f=d(256*(a+1),256*(b+1),c);return e[0]+","+e[1]+","+f[0]+","+f[1]}function d(a,b,c){var d=2*Math.PI*6378137/256/Math.pow(2,c),e=a*d-2*Math.PI*6378137/2,f=b*d-2*Math.PI*6378137/2;return[e,f]}a.getURL=b,a.getTileBBox=c,a.getMercCoords=d,Object.defineProperty(a,"__esModule",{value:!0})})},{}],522:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":91}],523:[function(a,b,c){"use strict";function d(a,b){var c=[];return b=+b||0,e(a.hi(a.shape[0]-1),c,b),c}b.exports=d;var e=a("./lib/zc-core")},{"./lib/zc-core":522}],524:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../color"),f=a("../../plots/cartesian/axes"),g=a("./attributes");b.exports=function(a,b){function c(b,c){return d.coerce(a,h,g,b,c)}var h={};c("opacity"),c("align"),c("bgcolor");var i=c("bordercolor"),j=e.opacity(i);c("borderpad");var k=c("borderwidth"),l=c("showarrow");l&&(c("arrowcolor",j?h.bordercolor:e.defaultLine),c("arrowhead"),c("arrowsize"),c("arrowwidth",2*(j&&k||1)),c("ax"),c("ay"),c("axref"),c("ayref"),d.noneOrAll(a,h,["ax","ay"])),c("text",l?" ":"new text"),c("textangle"),d.coerceFont(c,"font",b.font);for(var m=["x","y"],n=0;n<2;n++){var o=m[n],p={_fullLayout:b},q=f.coerceRef(a,h,p,o),r=f.coerceARef(a,h,p,o),s=.5;if("paper"!==q){var t=f.getFromId(p,q);if(s=t.range[0]+s*(t.range[1]-t.range[0]),["date","category"].indexOf(t.type)!==-1&&"string"==typeof a[o]){var u;if("date"===t.type){if(u=d.dateTime2ms(a[o]),u!==!1&&(a[o]=u),r===q){var v=d.dateTime2ms(a["a"+o]);v!==!1&&(a["a"+o]=v)}}else(t._categories||[]).length&&(u=t._categories.indexOf(a[o]),u!==-1&&(a[o]=u))}}c(o,s),l||c(o+"anchor")}return d.noneOrAll(a,h,["x","y"]),h}},{"../../lib":632,"../../plots/cartesian/axes":662,"../color":533,"./attributes":526}],525:[function(a,b,c){"use strict";b.exports=["",{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0},{path:"M2,2V-2H-2V2Z",backoff:0}]},{}],526:[function(a,b,c){"use strict";var d=a("./arrow_paths"),e=a("../../plots/font_attributes"),f=a("../../plots/cartesian/constants"),g=a("../../lib/extend").extendFlat;b.exports={_isLinkedToArray:!0,text:{valType:"string"},textangle:{valType:"angle",dflt:0},font:g({},e,{}),opacity:{valType:"number",min:0,max:1,dflt:1},align:{valType:"enumerated",values:["left","center","right"],dflt:"center"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)"},borderpad:{valType:"number",min:0,dflt:1},borderwidth:{valType:"number",min:0,dflt:1},showarrow:{valType:"boolean",dflt:!0},arrowcolor:{valType:"color"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1},arrowsize:{valType:"number",min:.3,dflt:1},arrowwidth:{valType:"number",min:.1},ax:{valType:"number",dflt:-10},ay:{valType:"number",dflt:-30},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.x.toString()]},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.y.toString()]},xref:{valType:"enumerated",values:["paper",f.idRegex.x.toString()]},x:{valType:"number"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yref:{valType:"enumerated",values:["paper",f.idRegex.y.toString()]},y:{valType:"number"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"},_deprecated:{ref:{valType:"string"}}}},{"../../lib/extend":625,"../../plots/cartesian/constants":668,"../../plots/font_attributes":683,"./arrow_paths":525}],527:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b.annotations.forEach(function(b){var c=f.getFromId(a,b.xref),d=f.getFromId(a,b.yref);if(c||d){var e=(b._xsize||0)/2,g=b._xshift||0,h=(b._ysize||0)/2,i=b._yshift||0,j=e-g,k=e+g,l=h-i,m=h+i;if(b.showarrow){var n=3*b.arrowsize*b.arrowwidth;j=Math.max(j,n),k=Math.max(k,n),l=Math.max(l,n),m=Math.max(m,n)}c&&c.autorange&&f.expand(c,[c.l2c(b.x)],{ppadplus:k,ppadminus:j}),d&&d.autorange&&f.expand(d,[d.l2c(b.y)],{ppadplus:m,ppadminus:l})}})}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("./draw").draw;b.exports=function(a){var b=a._fullLayout,c=b.annotations;if(c.length&&a._fullData.length){var h={};c.forEach(function(a){h[a.xref]=!0,h[a.yref]=!0});var i=f.list(a).filter(function(a){return a.autorange&&h[a._id]});if(i.length)return e.syncOrAsync([g,d],a)}}},{"../../lib":632,"../../plots/cartesian/axes":662,"./draw":529}],528:[function(a,b,c){"use strict";var d=a("./annotation_defaults");b.exports=function(a,b){for(var c=a.annotations||[],e=b.annotations=[],f=0;f<c.length;f++){var g=c[f]||{},h=d(g,b);e.push(h)}}},{"./annotation_defaults":524}],529:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var c=0;c<b.annotations.length;c++)e(a,c);return j.previousPromises(a)}function e(a,b,c,j){function u(a){return a.call(n.font,ca).attr({"text-anchor":{left:"start",right:"end"}[S.align]||"middle"}),o.convertToTspans(a,v),a}function v(){function c(a,b){return"auto"===b&&(b=a<1/3?"left":a>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[b]}da.selectAll("tspan.line").attr({y:0,x:0});var d=Z.select(".annotation-math-group"),e=!d.empty(),h=n.bBox((e?d:da).node()),j=h.width,o=h.height,r=Math.round(j+2*aa),s=Math.round(o+2*aa);S._w=j,S._h=o;var u=!1;if(["x","y"].forEach(function(b){var d,e=S[b+"ref"]||b,f=l.getFromId(a,e),g=(W+("x"===b?0:90))*Math.PI/180,h=r*Math.abs(Math.cos(g))+s*Math.abs(Math.sin(g)),i=S[b+"anchor"];if(f){if(!f.autorange&&(S[b]-f.range[0])*(S[b]-f.range[1])>0&&(S["a"+b+"ref"]===e?(S["a"+b]-f.range[0])*(S["a"+b]-f.range[1])>0&&(u=!0):u=!0,u))return;V[b]=f._offset+f.l2p(S[b]),d=.5}else d=S[b],"y"===b&&(d=1-d),V[b]="x"===b?G.l+G.w*d:G.t+G.h*d;var j=0;S["a"+b+"ref"]===e?V["aa"+b]=f._offset+f.l2p(S["a"+b]):(j=S.showarrow?S["a"+b]:h*c(d,i),V[b]+=j),S["_"+b+"type"]=f&&f.type,S["_"+b+"size"]=h,S["_"+b+"shift"]=j}),u)return void Z.remove();var v,w;S.showarrow&&(v=S.axref===S.xref?V.x:k.constrain(V.x-S.ax,1,y.width-1),w=S.ayref===S.yref?V.y:k.constrain(V.y-S.ay,1,y.height-1)),V.x=k.constrain(V.x,1,y.width-1),V.y=k.constrain(V.y,1,y.height-1);var x=aa-h.top,z=aa-h.left;e?d.select("svg").attr({x:aa-1,y:aa}):(da.attr({x:z,y:x}),da.selectAll("tspan.line").attr({y:x,x:z})),ba.call(n.setRect,$/2,$/2,r-$,s-$);var A=0,B=0;A=S.axref===S.xref?Math.round(V.aax-r/2):Math.round(V.x-r/2),B=S.ayref===S.yref?Math.round(V.aay-s/2):Math.round(V.y-s/2),Z.call(k.setTranslate,A,B);var C="annotations["+b+"]",D=function(c,d){g.select(a).selectAll('.annotation-arrow-g[data-index="'+b+'"]').remove();var e,h;e=S.axref===S.xref?V.aax+c:V.x+c,h=S.ayref===S.yref?V.aay+d:V.y+d;var j=k.rotationXYMatrix(W,e,h),l=k.apply2DTransform(j),n=k.apply2DTransform2(j),o=ba.attr("width")/2,p=ba.attr("height")/2,r=[[e-o,h-p,e-o,h+p],[e-o,h+p,e+o,h+p],[e+o,h+p,e+o,h-p],[e+o,h-p,e-o,h-p]].map(n);if(!r.reduce(function(a,b){return a^!!f(v,w,v+1e6,w+1e6,b[0],b[1],b[2],b[3])},!1)){r.forEach(function(a){var b=f(e,h,v,w,a[0],a[1],a[2],a[3]);b&&(e=b.x,h=b.y)});var s=S.arrowwidth,u=S.arrowcolor,x=X.append("g").style({opacity:m.opacity(u)}).classed("annotation-arrow-g",!0).attr("data-index",String(b)),y=x.append("path").attr("d","M"+e+","+h+"L"+v+","+w).style("stroke-width",s+"px").call(m.stroke,m.rgb(u));t(y,S.arrowhead,"end",S.arrowsize);var z=x.append("path").classed("annotation",!0).classed("anndrag",!0).attr({"data-index":String(b),d:"M3,3H-3V-3H3ZM0,0L"+(e-v)+","+(h-w),transform:"translate("+v+","+w+")"}).style("stroke-width",s+6+"px").call(m.stroke,"rgba(0,0,0,0)").call(m.fill,"rgba(0,0,0,0)");if(a._context.editable){var A,B,D;q.init({element:z.node(),prepFn:function(){var a=k.getTranslate(Z);B=a.x,D=a.y,A={},T&&T.autorange&&(A[T._name+".autorange"]=!0),U&&U.autorange&&(A[U._name+".autorange"]=!0)},moveFn:function(a,b){x.attr("transform","translate("+a+","+b+")");var c=l(B,D),d=c[0]+a,e=c[1]+b;Z.call(k.setTranslate,d,e),A[C+".x"]=T?S.x+a/T._m:(v+a-G.l)/G.w,A[C+".y"]=U?S.y+b/U._m:1-(w+b-G.t)/G.h,S.axref===S.xref&&(A[C+".ax"]=T?S.ax+a/T._m:(v+a-G.l)/G.w),S.ayref===S.yref&&(A[C+".ay"]=U?S.ay+b/U._m:1-(w+b-G.t)/G.h),Y.attr({transform:"rotate("+W+","+d+","+e+")"})},doneFn:function(b){if(b){i.relayout(a,A);var c=document.querySelector(".js-notes-box-panel");c&&c.redraw(c.selectedObj)}}})}}};S.showarrow&&D(0,0);var E=k.rotationXYMatrix(W,V.x,V.y),F=k.apply2DTransform(E);if(a._context.editable){var H,I,J;q.init({element:Z.node(),prepFn:function(){var a=k.getTranslate(Z);H=a.x,I=a.y,J={}},moveFn:function(a,b){Z.call(k.setTranslate,H+a,I+b);var c="pointer";if(S.showarrow)S.axref===S.xref?J[C+".ax"]=T.p2l(T.l2p(S.ax)+a):J[C+".ax"]=S.ax+a,S.ayref===S.yref?J[C+".ay"]=U.p2l(U.l2p(S.ay)+b):J[C+".ay"]=S.ay+b,D(a,b);else{if(T)J[C+".x"]=S.x+a/T._m;else{var d=S._xsize/G.w,e=S.x+S._xshift/G.w-d/2;J[C+".x"]=q.align(e+a/G.w,d,0,1,S.xanchor)}if(U)J[C+".y"]=S.y+b/U._m;else{var f=S._ysize/G.h,g=S.y-S._yshift/G.h-f/2;J[C+".y"]=q.align(g-b/G.h,f,0,1,S.yanchor)}T&&U||(c=q.getCursor(T?.5:J[C+".x"],U?.5:J[C+".y"],S.xanchor,S.yanchor))}var h=F(H,I),i=h[0]+a,j=h[1]+b;Z.call(k.setTranslate,H+a,I+b),Y.attr({transform:"rotate("+W+","+i+","+j+")"}),p(Z,c)},doneFn:function(b){if(p(Z),b){i.relayout(a,J);var c=document.querySelector(".js-notes-box-panel");c&&c.redraw(c.selectedObj)}}})}}var w,x=a.layout,y=a._fullLayout;if(!h(b)||b===-1){if(!b&&Array.isArray(j))return x.annotations=j,s(x,y),void d(a);if("remove"===j)return delete x.annotations,y.annotations=[],void d(a);if(c&&"add"!==j){for(w=0;w<y.annotations.length;w++)e(a,w,c,j);return}b=y.annotations.length,y.annotations.push({})}if(!c&&j){if("remove"===j){for(y._infolayer.selectAll('.annotation[data-index="'+b+'"]').remove(),y.annotations.splice(b,1),x.annotations.splice(b,1),w=b;w<y.annotations.length;w++)y._infolayer.selectAll('.annotation[data-index="'+(w+1)+'"]').attr("data-index",String(w)),e(a,w);return}if("add"===j||k.isPlainObject(j)){y.annotations.splice(b,0,{});var z=k.isPlainObject(j)?k.extendFlat({},j):{text:"New text"};for(x.annotations?x.annotations.splice(b,0,z):x.annotations=[z],w=y.annotations.length-1;w>b;w--)y._infolayer.selectAll('.annotation[data-index="'+(w-1)+'"]').attr("data-index",String(w)),e(a,w)}}y._infolayer.selectAll('.annotation[data-index="'+b+'"]').remove();var A=x.annotations[b],B=y.annotations[b];if(A){var C={xref:A.xref,yref:A.yref},D={};"string"==typeof c&&c?D[c]=j:k.isPlainObject(c)&&(D=c);var E=Object.keys(D);for(w=0;w<E.length;w++){var F=E[w];k.nestedProperty(A,F).set(D[F])}var G=y._size,H=["x","y"];for(w=0;w<2;w++){var I=H[w];if(void 0===D[I]&&void 0!==A[I]){var J=l.getFromId(a,l.coerceRef(C,{},a,I)),K=l.getFromId(a,l.coerceRef(A,{},a,I)),L=A[I],M=B["_"+I+"type"];if(void 0!==D[I+"ref"]){var N="auto"===A[I+"anchor"],O="x"===I?G.w:G.h,P=(B["_"+I+"size"]||0)/(2*O);if(J&&K)L=(L-J.range[0])/(J.range[1]-J.range[0]),L=K.range[0]+L*(K.range[1]-K.range[0]);else if(J){if(L=(L-J.range[0])/(J.range[1]-J.range[0]),L=J.domain[0]+L*(J.domain[1]-J.domain[0]),N){var Q=L+P,R=L-P;L+R<2/3?L=R:L+Q>4/3&&(L=Q)}}else K&&(N&&(L<1/3?L+=P:L>2/3&&(L-=P)),L=(L-K.domain[0])/(K.domain[1]-K.domain[0]),L=K.range[0]+L*(K.range[1]-K.range[0]))}K&&K===J&&M&&("log"===M&&"log"!==K.type?L=Math.pow(10,L):"log"!==M&&"log"===K.type&&(L=L>0?Math.log(L)/Math.LN10:void 0)),A[I]=L}}var S=r(A,y);y.annotations[b]=S;var T=l.getFromId(a,S.xref),U=l.getFromId(a,S.yref),V={x:0,y:0},W=+S.textangle||0,X=y._infolayer.append("g").classed("annotation",!0).attr("data-index",String(b)).style("opacity",S.opacity).on("click",function(){a._dragging=!1,a.emit("plotly_clickannotation",{index:b,annotation:A,fullAnnotation:S})}),Y=X.append("g").classed("annotation-text-g",!0).attr("data-index",String(b)),Z=Y.append("g"),$=S.borderwidth,_=S.borderpad,aa=$+_,ba=Z.append("rect").attr("class","bg").style("stroke-width",$+"px").call(m.stroke,S.bordercolor).call(m.fill,S.bgcolor),ca=S.font,da=Z.append("text").classed("annotation",!0).attr("data-unformatted",S.text).text(S.text);a._context.editable?da.call(o.makeEditable,Z).call(u).on("edit",function(c){S.text=c,this.attr({"data-unformatted":S.text}),this.call(u);var d={};d["annotations["+b+"].text"]=S.text,T&&T.autorange&&(d[T._name+".autorange"]=!0),U&&U.autorange&&(d[U._name+".autorange"]=!0),i.relayout(a,d)}):da.call(u),Y.attr({transform:"rotate("+W+","+V.x+","+V.y+")"}).call(n.setPosition,V.x,V.y)}}function f(a,b,c,d,e,f,g,h){var i=c-a,j=e-a,k=g-e,l=d-b,m=f-b,n=h-f,o=i*n-k*l;if(0===o)return null;var p=(j*n-k*m)/o,q=(j*l-i*m)/o;return q<0||q>1||p<0||p>1?null:{x:a+i*p,y:b+l*p}}var g=a("d3"),h=a("fast-isnumeric"),i=a("../../plotly"),j=a("../../plots/plots"),k=a("../../lib"),l=a("../../plots/cartesian/axes"),m=a("../color"),n=a("../drawing"),o=a("../../lib/svg_text_utils"),p=a("../../lib/setcursor"),q=a("../dragelement"),r=a("./annotation_defaults"),s=a("./defaults"),t=a("./draw_arrow_head");b.exports={draw:d,drawOne:e}},{"../../lib":632,"../../lib/setcursor":642,"../../lib/svg_text_utils":646,"../../plotly":658,"../../plots/cartesian/axes":662,"../../plots/plots":723,"../color":533,"../dragelement":555,"../drawing":557,"./annotation_defaults":524,"./defaults":528,"./draw_arrow_head":530,d3:95,"fast-isnumeric":104}],530:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../color"),g=a("../drawing"),h=a("./arrow_paths");b.exports=function(a,b,c,i){e(i)||(i=1);var j=a.node(),k=h[b||0];if(k){"string"==typeof c&&c||(c="end");var l,m,n,o,p=(g.getPx(a,"stroke-width")||1)*i,q=a.style("stroke")||f.defaultLine,r=a.style("stroke-opacity")||1,s=c.indexOf("start")>=0,t=c.indexOf("end")>=0,u=k.backoff*p;if("line"===j.nodeName){if(l={x:+a.attr("x1"),y:+a.attr("y1")},m={x:+a.attr("x2"),y:+a.attr("y2")},n=Math.atan2(l.y-m.y,l.x-m.x),o=n+Math.PI,u){var v=u*Math.cos(n),w=u*Math.sin(n);s&&(l.x-=v,l.y-=w,a.attr({x1:l.x,y1:l.y})),t&&(m.x+=v,m.y+=w,a.attr({x2:m.x,y2:m.y}))}}else if("path"===j.nodeName){var x=j.getTotalLength(),y="";if(s){var z=j.getPointAtLength(0),A=j.getPointAtLength(.1);
n=Math.atan2(z.y-A.y,z.x-A.x),l=j.getPointAtLength(Math.min(u,x)),u&&(y="0px,"+u+"px,")}if(t){var B=j.getPointAtLength(x),C=j.getPointAtLength(x-.1);if(o=Math.atan2(B.y-C.y,B.x-C.x),m=j.getPointAtLength(Math.max(0,x-u)),u){var D=y?2*u:u;y+=x-D+"px,"+x+"px"}}else y&&(y+=x+"px");y&&a.style("stroke-dasharray",y)}var E=function(c,e){b>5&&(e=0),d.select(j.parentElement).append("path").attr({"class":a.attr("class"),d:k.path,transform:"translate("+c.x+","+c.y+")rotate("+180*e/Math.PI+")scale("+p+")"}).style({fill:q,opacity:r,"stroke-width":0})};s&&E(l,n),t&&E(m,o)}}},{"../color":533,"../drawing":557,"./arrow_paths":525,d3:95,"fast-isnumeric":104}],531:[function(a,b,c){"use strict";var d=a("../../plotly");c.moduleType="component",c.name="annotations",c.ARROWPATHS=a("./arrow_paths"),c.layoutAttributes=a("./attributes"),c.supplyLayoutDefaults=a("./defaults"),c.calcAutorange=a("./calc_autorange"),c.arrowhead=a("./draw_arrow_head");var e=a("./draw");c.draw=e.draw,c.drawOne=e.drawOne,c.add=function(a){var b=a._fullLayout.annotations.length;d.relayout(a,"annotations["+b+"]","add")}},{"../../plotly":658,"./arrow_paths":525,"./attributes":526,"./calc_autorange":527,"./defaults":528,"./draw":529,"./draw_arrow_head":530}],532:[function(a,b,c){"use strict";c.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c.defaultLine="#444",c.lightLine="#eee",c.background="#fff",c.borderLine="#BEC8D9",c.lightFraction=1e3/11},{}],533:[function(a,b,c){"use strict";function d(a){if(f(a)||"string"!=typeof a)return a;var b=a.trim();if("rgb"!==b.substr(0,3))return a;var c=b.match(/^rgba?\s*\(([^()]*)\)$/);if(!c)return a;var d=c[1].trim().split(/\s*[\s,]\s*/),e="a"===b.charAt(3)&&4===d.length;if(!e&&3!==d.length)return a;for(var g=0;g<d.length;g++){if(!d[g].length)return a;if(d[g]=Number(d[g]),!(d[g]>=0))return a;if(3===g)d[g]>1&&(d[g]=1);else if(d[g]>=1)return a}var h=Math.round(255*d[0])+", "+Math.round(255*d[1])+", "+Math.round(255*d[2]);return e?"rgba("+h+", "+d[3]+")":"rgb("+h+")"}var e=a("tinycolor2"),f=a("fast-isnumeric"),g=b.exports={},h=a("./attributes");g.defaults=h.defaults,g.defaultLine=h.defaultLine,g.lightLine=h.lightLine,g.background=h.background,g.tinyRGB=function(a){var b=a.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+")"},g.rgb=function(a){return g.tinyRGB(e(a))},g.opacity=function(a){return a?e(a).getAlpha():0},g.addOpacity=function(a,b){var c=e(a).toRgb();return"rgba("+Math.round(c.r)+", "+Math.round(c.g)+", "+Math.round(c.b)+", "+b+")"},g.combine=function(a,b){var c=e(a).toRgb();if(1===c.a)return e(a).toRgbString();var d=e(b||g.background).toRgb(),f=1===d.a?d:{r:255*(1-d.a)+d.r*d.a,g:255*(1-d.a)+d.g*d.a,b:255*(1-d.a)+d.b*d.a},h={r:f.r*(1-c.a)+c.r*c.a,g:f.g*(1-c.a)+c.g*c.a,b:f.b*(1-c.a)+c.b*c.a};return e(h).toRgbString()},g.contrast=function(a,b,c){var d=e(a),f=d.isLight()?d.darken(c):d.lighten(b);return f.toString()},g.stroke=function(a,b){var c=e(b);a.style({stroke:g.tinyRGB(c),"stroke-opacity":c.getAlpha()})},g.fill=function(a,b){var c=e(b);a.style({fill:g.tinyRGB(c),"fill-opacity":c.getAlpha()})},g.clean=function(a){if(a&&"object"==typeof a){var b,c,e,f,h=Object.keys(a);for(b=0;b<h.length;b++)if(e=h[b],f=a[e],"color"===e.substr(e.length-5))if(Array.isArray(f))for(c=0;c<f.length;c++)f[c]=d(f[c]);else a[e]=d(f);else if("colorscale"===e.substr(e.length-10)&&Array.isArray(f))for(c=0;c<f.length;c++)Array.isArray(f[c])&&(f[c][1]=d(f[c][1]));else if(Array.isArray(f)){var i=f[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(c=0;c<f.length;c++)g.clean(f[c])}else f&&"object"==typeof f&&g.clean(f)}}},{"./attributes":532,"fast-isnumeric":104,tinycolor2:489}],534:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/layout_attributes"),e=a("../../plots/font_attributes"),f=a("../../lib/extend").extendFlat;b.exports={thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:f({},d.ticks,{dflt:""}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:d.tickfont,tickangle:d.tickangle,tickformat:d.tickformat,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,showexponent:d.showexponent,title:{valType:"string",dflt:"Click to enter colorscale title"},titlefont:f({},e,{}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},{"../../lib/extend":625,"../../plots/cartesian/layout_attributes":672,"../../plots/font_attributes":683}],535:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/tick_value_defaults"),f=a("../../plots/cartesian/tick_mark_defaults"),g=a("../../plots/cartesian/tick_label_defaults"),h=a("./attributes");b.exports=function(a,b,c){function i(a,b){return d.coerce(k,j,h,a,b)}var j=b.colorbar={},k=a.colorbar||{},l=i("thicknessmode");i("thickness","fraction"===l?30/(c.width-c.margin.l-c.margin.r):30);var m=i("lenmode");i("len","fraction"===m?1:c.height-c.margin.t-c.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),d.noneOrAll(k,j,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),e(k,j,i,"linear"),g(k,j,i,"linear",{outerTicks:!1,font:c.font,noHover:!0}),f(k,j,i,"linear",{outerTicks:!1,font:c.font,noHover:!0}),i("title"),d.coerceFont(i,"titlefont",c.font),i("titleside")}},{"../../lib":632,"../../plots/cartesian/tick_label_defaults":678,"../../plots/cartesian/tick_mark_defaults":679,"../../plots/cartesian/tick_value_defaults":680,"./attributes":534}],536:[function(a,b,c){"use strict";var d=a("d3"),e=a("tinycolor2"),f=a("../../plotly"),g=a("../../plots/plots"),h=a("../../registry"),i=a("../../plots/cartesian/axes"),j=a("../dragelement"),k=a("../../lib"),l=a("../../lib/extend").extendFlat,m=a("../../lib/setcursor"),n=a("../drawing"),o=a("../color"),p=a("../titles"),q=a("../../plots/cartesian/axis_defaults"),r=a("../../plots/cartesian/position_defaults"),s=a("../../plots/cartesian/layout_attributes"),t=a("./attributes");b.exports=function(a,b){function c(){function t(a,b){return k.coerce($,_,s,a,b)}function w(){if(["top","bottom"].indexOf(v.titleside)!==-1){var b=fa.select(".cbtitle"),c=b.select("text"),f=[-v.outlinewidth/2,v.outlinewidth/2],g=b.select(".h"+_._id+"title-math-group").node(),h=15.6;if(c.node()&&(h=1.3*parseInt(c.style("font-size"),10)),g?(ha=n.bBox(g).height,ha>h&&(f[1]-=(ha-h)/2)):c.node()&&!c.classed("js-placeholder")&&(ha=n.bBox(b.node()).height),ha){if(ha+=5,"top"===v.titleside)_.domain[1]-=ha/A.h,f[1]*=-1;else{_.domain[0]+=ha/A.h;var j=Math.max(1,c.selectAll("tspan.line").size());f[1]+=(1-j)*h}b.attr("transform","translate("+f+")"),_.setScale()}}fa.selectAll(".cbfills,.cblines,.cbaxis").attr("transform","translate(0,"+Math.round(A.h*(1-_.domain[1]))+")");var l=fa.select(".cbfills").selectAll("rect.cbfill").data(E);l.enter().append("rect").classed("cbfill",!0).style("stroke","none"),l.exit().remove(),l.each(function(a,b){var c=[0===b?C[0]:(E[b]+E[b-1])/2,b===E.length-1?C[1]:(E[b]+E[b+1])/2].map(_.c2p).map(Math.round);b!==E.length-1&&(c[1]+=c[1]>c[0]?1:-1);var f=G(a).replace("e-",""),g=e(f).toHexString();d.select(this).attr({x:V,width:Math.max(O,2),y:d.min(c),height:Math.max(d.max(c)-d.min(c),2),fill:g})});var m=fa.select(".cblines").selectAll("path.cbline").data(v.line.color&&v.line.width?D:[]);return m.enter().append("path").classed("cbline",!0),m.exit().remove(),m.each(function(a){d.select(this).attr("d","M"+V+","+(Math.round(_.c2p(a))+v.line.width/2%1)+"h"+O).call(n.lineGroupStyle,v.line.width,F(a),v.line.dash)}),_._axislayer.selectAll("g."+_._id+"tick,path").remove(),_._pos=V+O+(v.outlinewidth||0)/2-("outside"===v.ticks?1:0),_.side="right",k.syncOrAsync([function(){return i.doTicks(a,_,!0)},function(){if(["top","bottom"].indexOf(v.titleside)===-1){var b=_.titlefont.size,c=_._offset+_._length/2,e=A.l+(_.position||0)*A.w+("right"===_.side?10+b*(_.showticklabels?1:.5):-10-b*(_.showticklabels?.5:0));x("h"+_._id+"title",{avoid:{selection:d.select(a).selectAll("g."+_._id+"tick"),side:v.titleside,offsetLeft:A.l,offsetTop:A.t,maxShift:z.width},attributes:{x:e,y:c,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function x(b,c){var d,e=u();d=h.traceIs(e,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var f={propContainer:_,propName:d,traceIndex:e.index,dfltName:"colorscale",containerGroup:fa.select(".cbtitle")},g="h"===b.charAt(0)?b.substr(1):"h"+b;fa.selectAll("."+g+",."+g+"-math-group").remove(),p.draw(a,b,l(f,c||{}))}function y(){var c=O+v.outlinewidth/2+n.bBox(_._axislayer.node()).width;if(L=ga.select("text"),L.node()&&!L.classed("js-placeholder")){var d,e=ga.select(".h"+_._id+"title-math-group").node();d=e&&["top","bottom"].indexOf(v.titleside)!==-1?n.bBox(e).width:n.bBox(ga.node()).right-V-A.l,c=Math.max(c,d)}var f=2*v.xpad+c+v.borderwidth+v.outlinewidth/2,h=Y-Z;fa.select(".cbbg").attr({x:V-v.xpad-(v.borderwidth+v.outlinewidth)/2,y:Z-T,width:Math.max(f,2),height:Math.max(h+2*T,2)}).call(o.fill,v.bgcolor).call(o.stroke,v.bordercolor).style({"stroke-width":v.borderwidth}),fa.selectAll(".cboutline").attr({x:V,y:Z+v.ypad+("top"===v.titleside?ha:0),width:Math.max(O,2),height:Math.max(h-2*v.ypad-ha,2)}).call(o.stroke,v.outlinecolor).style({fill:"None","stroke-width":v.outlinewidth});var i=({center:.5,right:1}[v.xanchor]||0)*f;fa.attr("transform","translate("+(A.l-i)+","+A.t+")"),g.autoMargin(a,b,{x:v.x,y:v.y,l:f*({right:1,center:.5}[v.xanchor]||0),r:f*({left:1,center:.5}[v.xanchor]||0),t:h*({bottom:1,middle:.5}[v.yanchor]||0),b:h*({top:1,middle:.5}[v.yanchor]||0)})}var z=a._fullLayout,A=z._size;if("function"!=typeof v.fillcolor&&"function"!=typeof v.line.color)return void z._infolayer.selectAll("g."+b).remove();var B,C=d.extent(("function"==typeof v.fillcolor?v.fillcolor:v.line.color).domain()),D=[],E=[],F="function"==typeof v.line.color?v.line.color:function(){return v.line.color},G="function"==typeof v.fillcolor?v.fillcolor:function(){return v.fillcolor},H=v.levels.end+v.levels.size/100,I=v.levels.size,J=1.001*C[0]-.001*C[1],K=1.001*C[1]-.001*C[0];for(B=v.levels.start;(B-H)*I<0;B+=I)B>J&&B<K&&D.push(B);if("function"==typeof v.fillcolor)if(v.filllevels)for(H=v.filllevels.end+v.filllevels.size/100,I=v.filllevels.size,B=v.filllevels.start;(B-H)*I<0;B+=I)B>C[0]&&B<C[1]&&E.push(B);else E=D.map(function(a){return a-v.levels.size/2}),E.push(E[E.length-1]+v.levels.size);else v.fillcolor&&"string"==typeof v.fillcolor&&(E=[0]);v.levels.size<0&&(D.reverse(),E.reverse());var L,M=z.height-z.margin.t-z.margin.b,N=z.width-z.margin.l-z.margin.r,O=Math.round(v.thickness*("fraction"===v.thicknessmode?N:1)),P=O/A.w,Q=Math.round(v.len*("fraction"===v.lenmode?M:1)),R=Q/A.h,S=v.xpad/A.w,T=(v.borderwidth+v.outlinewidth)/2,U=v.ypad/A.h,V=Math.round(v.x*A.w+v.xpad),W=v.x-P*({middle:.5,right:1}[v.xanchor]||0),X=v.y+R*(({top:-.5,bottom:.5}[v.yanchor]||0)-.5),Y=Math.round(A.h*(1-X)),Z=Y-Q,$={type:"linear",range:C,tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,showticklabels:v.showticklabels,tickfont:v.tickfont,tickangle:v.tickangle,tickformat:v.tickformat,exponentformat:v.exponentformat,separatethousands:v.separatethousands,showexponent:v.showexponent,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,title:v.title,titlefont:v.titlefont,anchor:"free",position:1},_={},aa={letter:"y",font:z.font,noHover:!0};if(q($,_,t,aa),r($,_,t,aa),_._id="y"+b,_._gd=a,_.position=v.x+S+P,c.axis=_,["top","bottom"].indexOf(v.titleside)!==-1&&(_.titleside=v.titleside,_.titlex=v.x+S,_.titley=X+("top"===v.titleside?R-U:U)),v.line.color&&"auto"===v.tickmode){_.tickmode="linear",_.tick0=v.levels.start;var ba=v.levels.size,ca=k.constrain((Y-Z)/50,4,15)+1,da=(C[1]-C[0])/((v.nticks||ca)*ba);if(da>1){var ea=Math.pow(10,Math.floor(Math.log(da)/Math.LN10));ba*=ea*k.roundUp(da/ea,[2,5,10]),(Math.abs(v.levels.start)/v.levels.size+1e-6)%1<2e-6&&(_.tick0=0)}_.dtick=ba}_.domain=[X+U,X+R-U],_.setScale();var fa=z._infolayer.selectAll("g."+b).data([0]);fa.enter().append("g").classed(b,!0).each(function(){var a=d.select(this);a.append("rect").classed("cbbg",!0),a.append("g").classed("cbfills",!0),a.append("g").classed("cblines",!0),a.append("g").classed("cbaxis",!0).classed("crisp",!0),a.append("g").classed("cbtitleunshift",!0).append("g").classed("cbtitle",!0),a.append("rect").classed("cboutline",!0),a.select(".cbtitle").datum(0)}),fa.attr("transform","translate("+Math.round(A.l)+","+Math.round(A.t)+")");var ga=fa.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(A.l)+",-"+Math.round(A.t)+")");_._axislayer=fa.select(".cbaxis");var ha=0;if(["top","bottom"].indexOf(v.titleside)!==-1){var ia,ja=A.l+(v.x+S)*A.w,ka=_.titlefont.size;ia="top"===v.titleside?(1-(X+R-U))*A.h+A.t+3+.75*ka:(1-(X+U))*A.h+A.t-3-.25*ka,x(_._id+"title",{attributes:{x:ja,y:ia,"text-anchor":"start"}})}var la=k.syncOrAsync([g.previousPromises,w,g.previousPromises,y],a);if(la&&la.then&&(a._promises||[]).push(la),a._context.editable){var ma,na,oa;j.init({element:fa.node(),prepFn:function(){ma=fa.attr("transform"),m(fa)},moveFn:function(a,b){fa.attr("transform",ma+" translate("+a+","+b+")"),na=j.align(W+a/A.w,P,0,1,v.xanchor),oa=j.align(X-b/A.h,R,0,1,v.yanchor);var c=j.getCursor(na,oa,v.xanchor,v.yanchor);m(fa,c)},doneFn:function(b){m(fa),b&&void 0!==na&&void 0!==oa&&f.restyle(a,{"colorbar.x":na,"colorbar.y":oa},u().index)}})}return la}function u(){var c,d,e=b.substr(2);for(c=0;c<a._fullData.length;c++)if(d=a._fullData[c],d.uid===e)return d}var v={};return Object.keys(t).forEach(function(a){v[a]=null}),v.fillcolor=null,v.line={color:null,width:null,dash:null},v.levels={start:null,end:null,size:null},v.filllevels=null,Object.keys(v).forEach(function(a){c[a]=function(b){return arguments.length?(v[a]=k.isPlainObject(v[a])?k.extendFlat(v[a],b):b,c):v[a]}}),c.options=function(a){return Object.keys(a).forEach(function(b){"function"==typeof c[b]&&c[b](a[b])}),c},c._opts=v,c}},{"../../lib":632,"../../lib/extend":625,"../../lib/setcursor":642,"../../plotly":658,"../../plots/cartesian/axes":662,"../../plots/cartesian/axis_defaults":664,"../../plots/cartesian/layout_attributes":672,"../../plots/cartesian/position_defaults":675,"../../plots/plots":723,"../../registry":738,"../color":533,"../dragelement":555,"../drawing":557,"../titles":608,"./attributes":534,d3:95,tinycolor2:489}],537:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a){return d.isPlainObject(a.colorbar)}},{"../../lib":632}],538:[function(a,b,c){"use strict";c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.draw=a("./draw"),c.hasColorbar=a("./has_colorbar")},{"./attributes":534,"./defaults":535,"./draw":536,"./has_colorbar":537}],539:[function(a,b,c){"use strict";b.exports={zauto:{valType:"boolean",dflt:!0},zmin:{valType:"number",dflt:null},zmax:{valType:"number",dflt:null},colorscale:{valType:"colorscale"},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!0}}},{}],540:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./scales"),f=a("./flip_scale");b.exports=function(a,b,c,g){var h,i;c?(h=d.nestedProperty(a,c).get(),i=d.nestedProperty(a._input,c).get()):(h=a,i=a._input);var j=h[g+"auto"],k=h[g+"min"],l=h[g+"max"],m=h.colorscale;j===!1&&void 0!==k||(k=d.aggNums(Math.min,null,b)),j===!1&&void 0!==l||(l=d.aggNums(Math.max,null,b)),k===l&&(k-=.5,l+=.5),h[g+"min"]=k,h[g+"max"]=l,i[g+"min"]=k,i[g+"max"]=l,h.autocolorscale&&(m=k*l<0?e.RdBu:k>=0?e.Reds:e.Blues,i.colorscale=m,h.reversescale&&(m=f(m)),h.colorscale=m)}},{"../../lib":632,"./flip_scale":545,"./scales":552}],541:[function(a,b,c){"use strict";var d=a("./attributes"),e=a("../../lib/extend").extendDeep;a("./scales.js"),b.exports=function(a){return{color:{valType:"color",arrayOk:!0},colorscale:e({},d.colorscale,{}),cauto:e({},d.zauto,{}),cmax:e({},d.zmax,{}),cmin:e({},d.zmin,{}),autocolorscale:e({},d.autocolorscale,{}),reversescale:e({},d.reversescale,{})}}},{"../../lib/extend":625,"./attributes":539,"./scales.js":552}],542:[function(a,b,c){"use strict";var d=a("./scales");b.exports=d.RdBu},{"./scales":552}],543:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../colorbar/has_colorbar"),g=a("../colorbar/defaults"),h=a("./is_valid_scale"),i=a("./flip_scale");b.exports=function(a,b,c,j,k){var l=k.prefix,m=k.cLetter,n=l.slice(0,l.length-1),o=l?e.nestedProperty(a,n).get()||{}:a,p=l?e.nestedProperty(b,n).get()||{}:b,q=o[m+"min"],r=o[m+"max"],s=o.colorscale,t=d(q)&&d(r)&&q<r;j(l+m+"auto",!t),j(l+m+"min"),j(l+m+"max");var u;void 0!==s&&(u=!h(s)),j(l+"autocolorscale",u);var v=j(l+"colorscale"),w=j(l+"reversescale");if(w&&(p.colorscale=i(v)),"marker.line."!==l){var x;l&&(x=f(o));var y=j(l+"showscale",x);y&&g(o,p,c)}}},{"../../lib":632,"../colorbar/defaults":535,"../colorbar/has_colorbar":537,"./flip_scale":545,"./is_valid_scale":549,"fast-isnumeric":104}],544:[function(a,b,c){"use strict";b.exports=function(a,b,c){for(var d=a.length,e=new Array(d),f=new Array(d),g=0;g<d;g++){var h=a[g];e[g]=b+h[0]*(c-b),f[g]=h[1]}return{domain:e,range:f}}},{}],545:[function(a,b,c){"use strict";b.exports=function(a){for(var b,c=a.length,d=new Array(c),e=c-1,f=0;e>=0;e--,f++)b=a[e],d[f]=[1-b[0],b[1]];return d}},{}],546:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./default_scale"),f=a("./is_valid_scale_array");b.exports=function(a,b){function c(){try{a=d[a]||JSON.parse(a)}catch(c){a=b}}return b||(b=e),a?("string"==typeof a&&(c(),"string"==typeof a&&c()),f(a)?a:b):b}},{"./default_scale":542,"./is_valid_scale_array":550,"./scales":552}],547:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("./is_valid_scale");b.exports=function(a,b){var c=b?e.nestedProperty(a,b).get()||{}:a,g=c.color,h=!1;if(Array.isArray(g))for(var i=0;i<g.length;i++)if(d(g[i])){h=!0;break}return e.isPlainObject(c)&&(h||c.showscale===!0||d(c.cmin)&&d(c.cmax)||f(c.colorscale)||e.isPlainObject(c.colorbar))}},{"../../lib":632,"./is_valid_scale":549,"fast-isnumeric":104}],548:[function(a,b,c){"use strict";c.scales=a("./scales"),c.defaultScale=a("./default_scale"),c.attributes=a("./attributes"),c.handleDefaults=a("./defaults"),c.calc=a("./calc"),c.hasColorscale=a("./has_colorscale"),c.isValidScale=a("./is_valid_scale"),c.getScale=a("./get_scale"),c.flipScale=a("./flip_scale"),c.extractScale=a("./extract_scale"),c.makeColorScaleFunc=a("./make_color_scale_func")},{"./attributes":539,"./calc":540,"./default_scale":542,"./defaults":543,"./extract_scale":544,"./flip_scale":545,"./get_scale":546,"./has_colorscale":547,"./is_valid_scale":549,"./make_color_scale_func":551,"./scales":552}],549:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./is_valid_scale_array");b.exports=function(a){return void 0!==d[a]||e(a)}},{"./is_valid_scale_array":550,"./scales":552}],550:[function(a,b,c){"use strict";var d=a("tinycolor2");b.exports=function(a){var b=0;if(!Array.isArray(a)||a.length<2)return!1;if(!a[0]||!a[a.length-1])return!1;if(0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var e=a[c];if(2!==e.length||+e[0]<b||!d(e[1]).isValid())return!1;b=+e[0]}return!0}},{tinycolor2:489}],551:[function(a,b,c){"use strict";function d(a){var b={r:a[0],g:a[1],b:a[2],a:a[3]};return f(b).toRgbString()}var e=a("d3"),f=a("tinycolor2"),g=a("fast-isnumeric"),h=a("../color");b.exports=function(a,b){b=b||{};for(var c=a.domain,i=a.range,j=i.length,k=new Array(j),l=0;l<j;l++){var m=f(i[l]).toRgb();k[l]=[m.r,m.g,m.b,m.a]}var n,o=e.scale.linear().domain(c).range(k).clamp(!0),p=b.noNumericCheck,q=b.returnArray;return n=p&&q?o:p?function(a){return d(o(a))}:q?function(a){return g(a)?o(a):f(a).isValid()?a:h.defaultLine}:function(a){return g(a)?d(o(a)):f(a).isValid()?a:h.defaultLine},n.domain=o.domain,n.range=function(){return i},n}},{"../color":533,d3:95,"fast-isnumeric":104,tinycolor2:489}],552:[function(a,b,c){"use strict";b.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]]}},{}],553:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=(a-c)/(d-c),g=f+b/(d-c),h=(f+g)/2;return"left"===e||"bottom"===e?f:"center"===e||"middle"===e?h:"right"===e||"top"===e?g:f<2/3-h?f:g>4/3-h?g:h}},{}],554:[function(a,b,c){"use strict";var d=a("../../lib"),e=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];b.exports=function(a,b,c,f){return a="left"===c?0:"center"===c?1:"right"===c?2:d.constrain(Math.floor(3*a),0,2),b="bottom"===f?0:"middle"===f?1:"top"===f?2:d.constrain(Math.floor(3*b),0,2),e[b][a]}},{"../../lib":632}],555:[function(a,b,c){"use strict";function d(){var a=document.createElement("div");a.className="dragcover";var b=a.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(a),a}function e(a){a._dragging=!1,a._replotPending&&f.plot(a)}var f=a("../../plotly"),g=a("../../lib"),h=a("../../plots/cartesian/constants"),i=b.exports={};i.align=a("./align"),i.getCursor=a("./cursor");var j=a("./unhover");i.unhover=j.wrapped,i.unhoverRaw=j.raw,i.init=function(a){function b(b){return a.element.onmousemove=o,p._dragged=!1,p._dragging=!0,j=b.clientX,k=b.clientY,n=b.target,l=(new Date).getTime(),l-p._mouseDownTime<r?q+=1:(q=1,p._mouseDownTime=l),a.prepFn&&a.prepFn(b,j,k),m=d(),m.onmousemove=c,m.onmouseup=f,m.onmouseout=f,m.style.cursor=window.getComputedStyle(a.element).cursor,g.pauseEvent(b)}function c(b){var c=b.clientX-j,d=b.clientY-k,e=a.minDrag||h.MINDRAG;return Math.abs(c)<e&&(c=0),Math.abs(d)<e&&(d=0),(c||d)&&(p._dragged=!0,i.unhover(p)),a.moveFn&&a.moveFn(c,d,p._dragged),g.pauseEvent(b)}function f(b){if(o=a.element.onmousemove,a.setCursor&&(a.element.onmousemove=a.setCursor),m.onmousemove=null,m.onmouseup=null,m.onmouseout=null,g.removeElement(m),!p._dragging)return void(p._dragged=!1);if(p._dragging=!1,(new Date).getTime()-p._mouseDownTime>r&&(q=Math.max(q-1,1)),a.doneFn&&a.doneFn(p._dragged,q),!p._dragged){var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),n.dispatchEvent(c)}return e(p),p._dragged=!1,g.pauseEvent(b)}var j,k,l,m,n,o,p=g.getPlotDiv(a.element)||{},q=1,r=h.DBLCLICKDELAY;p._mouseDownTime||(p._mouseDownTime=0),o=a.element.onmousemove,a.setCursor&&(a.element.onmousemove=a.setCursor),a.element.onmousedown=b,a.element.style.pointerEvents="all"},i.coverSlip=d},{"../../lib":632,"../../plotly":658,"../../plots/cartesian/constants":668,"./align":553,"./cursor":554,"./unhover":556}],556:[function(a,b,c){"use strict";var d=a("../../lib/events"),e=b.exports={};e.wrapped=function(a,b,c){"string"==typeof a&&(a=document.getElementById(a)),a._hoverTimer&&(clearTimeout(a._hoverTimer),a._hoverTimer=void 0),e.raw(a,b,c)},e.raw=function(a,b){var c=a._fullLayout;b||(b={}),b.target&&d.triggerHandler(a,"plotly_beforehover",b)===!1||(c._hoverlayer.selectAll("g").remove(),b.target&&a._hoverdata&&a.emit("plotly_unhover",{points:a._hoverdata}),a._hoverdata=void 0)}},{"../../lib/events":624}],557:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){if(h.traceIs(c,"symbols")){var j=o(c);b.attr("d",function(a){var b;b="various"===a.ms||"various"===f.size?3:n.isBubble(c)?j(a.ms):(f.size||6)/2,a.mrc=b;var d=p.symbolNumber(a.mx||f.symbol)||0,e=d%100;return a.om=d%200>=100,p.symbolFuncs[e](b)+(d>=200?s:"")}).style("opacity",function(a){return(a.mo+1||f.opacity+1)-1})}var k,l,m;a.so?(m=g.outlierwidth,l=g.outliercolor,k=f.outliercolor):(m=(a.mlw+1||g.width+1||(a.trace?a.trace.marker.line.width:0)+1)-1,l="mlc"in a?a.mlcc=e(a.mlc):Array.isArray(g.color)?i.defaultLine:g.color,k="mc"in a?a.mcc=d(a.mc):Array.isArray(f.color)?i.defaultLine:f.color||"rgba(0,0,0,0)"),a.om?b.call(i.stroke,k).style({"stroke-width":(m||1)+"px",fill:"none"}):(b.style("stroke-width",m+"px").call(i.fill,k),m&&b.call(i.stroke,l))}function e(a,b,c,d){var e=a[0]-b[0],g=a[1]-b[1],h=c[0]-b[0],i=c[1]-b[1],j=Math.pow(e*e+g*g,v/2),k=Math.pow(h*h+i*i,v/2),l=(k*k*e-j*j*h)*d,m=(k*k*g-j*j*i)*d,n=3*k*(j+k),o=3*j*(j+k);return[[f.round(b[0]+(n&&l/n),2),f.round(b[1]+(n&&m/n),2)],[f.round(b[0]-(o&&l/o),2),f.round(b[1]-(o&&m/o),2)]]}var f=a("d3"),g=a("fast-isnumeric"),h=a("../../registry"),i=a("../color"),j=a("../colorscale"),k=a("../../lib"),l=a("../../lib/svg_text_utils"),m=a("../../constants/xmlns_namespaces"),n=a("../../traces/scatter/subtypes"),o=a("../../traces/scatter/make_bubble_size_func"),p=b.exports={};p.font=function(a,b,c,d){b&&b.family&&(d=b.color,c=b.size,b=b.family),b&&a.style("font-family",b),c+1&&a.style("font-size",c+"px"),d&&a.call(i.fill,d)},p.setPosition=function(a,b,c){a.attr("x",b).attr("y",c)},p.setSize=function(a,b,c){a.attr("width",b).attr("height",c)},p.setRect=function(a,b,c,d,e){a.call(p.setPosition,b,c).call(p.setSize,d,e)},p.translatePoint=function(a,b,c,d){var e=a.xp||c.c2p(a.x),f=a.yp||d.c2p(a.y);g(e)&&g(f)?"text"===b.node().nodeName?b.attr("x",e).attr("y",f):b.attr("transform","translate("+e+","+f+")"):b.remove()},p.translatePoints=function(a,b,c,d){a.each(function(a){var e=f.select(this);p.translatePoint(a,e,b,c,d)})},p.getPx=function(a,b){return Number(a.style(b).replace(/px$/,""))},p.crispRound=function(a,b,c){return b&&g(b)?a._context.staticPlot?b:b<1?1:Math.round(b):c||0},p.singleLineStyle=function(a,b,c,d,e){b.style("fill","none");var f=(((a||[])[0]||{}).trace||{}).line||{},g=c||f.width||0,h=e||f.dash||"";i.stroke(b,d||f.color),p.dashLine(b,h,g)},p.lineGroupStyle=function(a,b,c,d){a.style("fill","none").each(function(a){var e=(((a||[])[0]||{}).trace||{}).line||{},g=b||e.width||0,h=d||e.dash||"";f.select(this).call(i.stroke,c||e.color).call(p.dashLine,h,g)})},p.dashLine=function(a,b,c){var d=Math.max(c,3);"solid"===b?b="":"dot"===b?b=d+"px,"+d+"px":"dash"===b?b=3*d+"px,"+3*d+"px":"longdash"===b?b=5*d+"px,"+5*d+"px":"dashdot"===b?b=3*d+"px,"+d+"px,"+d+"px,"+d+"px":"longdashdot"===b&&(b=5*d+"px,"+2*d+"px,"+d+"px,"+2*d+"px"),a.style({"stroke-dasharray":b,"stroke-width":c+"px"})},p.fillGroupStyle=function(a){a.style("stroke-width",0).each(function(b){var c=f.select(this);try{c.call(i.fill,b[0].trace.fillcolor)}catch(b){k.error(b,a),c.remove()}})};var q=a("./symbol_defs");p.symbolNames=[],p.symbolFuncs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolList=[],Object.keys(q).forEach(function(a){var b=q[a];p.symbolList=p.symbolList.concat([b.n,a,b.n+100,a+"-open"]),p.symbolNames[b.n]=a,p.symbolFuncs[b.n]=b.f,b.needLine&&(p.symbolNeedLines[b.n]=!0),b.noDot?p.symbolNoDot[b.n]=!0:p.symbolList=p.symbolList.concat([b.n+200,a+"-dot",b.n+300,a+"-open-dot"])});var r=p.symbolNames.length,s="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";p.symbolNumber=function(a){if("string"==typeof a){var b=0;a.indexOf("-open")>0&&(b=100,a=a.replace("-open","")),a.indexOf("-dot")>0&&(b+=200,a=a.replace("-dot","")),a=p.symbolNames.indexOf(a),a>=0&&(a+=b)}return a%100>=r||a>=400?0:Math.floor(Math.max(a,0))},p.singlePointStyle=function(a,b,c){var e=c.marker,f=e.line,g=(c._input||{}).marker||{},h=p.tryColorscale(e,g,""),i=p.tryColorscale(e,g,"line.");d(a,b,c,h,i,e,f)},p.pointStyle=function(a,b){if(a.size()){var c=b.marker,d=(b._input||{}).marker||{},e=p.tryColorscale(c,d,""),g=p.tryColorscale(c,d,"line.");a.each(function(a){p.singlePointStyle(a,f.select(this),b,e,g)})}},p.tryColorscale=function(a,b,c){var d=k.nestedProperty(a,c+"color").get(),e=k.nestedProperty(a,c+"colorscale").get(),f=k.nestedProperty(a,c+"cauto").get(),h=k.nestedProperty(a,c+"cmin"),i=k.nestedProperty(a,c+"cmax"),l=h.get(),m=i.get();return e&&Array.isArray(d)?(!f&&g(l)&&g(m)||(l=1/0,m=-(1/0),d.forEach(function(a){g(a)&&(l>a&&(l=+a),m<a&&(m=+a))}),l>m&&(l=0,m=1),h.set(l),i.set(m),k.nestedProperty(b,c+"cmin").set(l),k.nestedProperty(b,c+"cmax").set(m)),j.makeColorScaleFunc(j.extractScale(e,l,m))):k.identity};var t={start:1,end:-1,middle:0,bottom:1,top:-1},u=1.3;p.textPointStyle=function(a,b){a.each(function(a){var c=f.select(this),d=a.tx||b.text;if(!d||Array.isArray(d))return void c.remove();var e=a.tp||b.textposition,h=e.indexOf("top")!==-1?"top":e.indexOf("bottom")!==-1?"bottom":"middle",i=e.indexOf("left")!==-1?"end":e.indexOf("right")!==-1?"start":"middle",j=a.ts||b.textfont.size,k=a.mrc?a.mrc/.8+1:0;j=g(j)&&j>0?j:0,c.call(p.font,a.tf||b.textfont.family,j,a.tc||b.textfont.color).attr("text-anchor",i).text(d).call(l.convertToTspans);
var m=f.select(this.parentNode),n=c.selectAll("tspan.line"),o=((n[0].length||1)-1)*u+1,q=t[i]*k,r=.75*j+t[h]*k+(t[h]-1)*o*j/2;m.attr("transform","translate("+q+","+r+")"),o>1&&n.attr({x:c.attr("x"),y:c.attr("y")})})};var v=.5;p.smoothopen=function(a,b){if(a.length<3)return"M"+a.join("L");var c,d="M"+a[0],f=[];for(c=1;c<a.length-1;c++)f.push(e(a[c-1],a[c],a[c+1],b));for(d+="Q"+f[0][0]+" "+a[1],c=2;c<a.length-1;c++)d+="C"+f[c-2][1]+" "+f[c-1][0]+" "+a[c];return d+="Q"+f[a.length-3][1]+" "+a[a.length-1]},p.smoothclosed=function(a,b){if(a.length<3)return"M"+a.join("L")+"Z";var c,d="M"+a[0],f=a.length-1,g=[e(a[f],a[0],a[1],b)];for(c=1;c<f;c++)g.push(e(a[c-1],a[c],a[c+1],b));for(g.push(e(a[f-1],a[f],a[0],b)),c=1;c<=f;c++)d+="C"+g[c-1][1]+" "+g[c][0]+" "+a[c];return d+="C"+g[f][1]+" "+g[0][0]+" "+a[0]+"Z"};var w={hv:function(a,b){return"H"+f.round(b[0],2)+"V"+f.round(b[1],2)},vh:function(a,b){return"V"+f.round(b[1],2)+"H"+f.round(b[0],2)},hvh:function(a,b){return"H"+f.round((a[0]+b[0])/2,2)+"V"+f.round(b[1],2)+"H"+f.round(b[0],2)},vhv:function(a,b){return"V"+f.round((a[1]+b[1])/2,2)+"H"+f.round(b[0],2)+"V"+f.round(b[1],2)}},x=function(a,b){return"L"+f.round(b[0],2)+","+f.round(b[1],2)};p.steps=function(a){var b=w[a]||x;return function(a){for(var c="M"+f.round(a[0][0],2)+","+f.round(a[0][1],2),d=1;d<a.length;d++)c+=b(a[d-1],a[d]);return c}},p.makeTester=function(a){var b=f.select("body").selectAll("#js-plotly-tester").data([0]);b.enter().append("svg").attr("id","js-plotly-tester").attr(m.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var c=b.selectAll(".js-reference-point").data([0]);c.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),b.node()._cache||(b.node()._cache={}),a._tester=b,a._testref=c};var y=[],z=1e4;p.bBox=function(a){var b=a.attributes["data-bb"];if(b&&b.value)return k.extendFlat({},y[b.value]);var c=f.select("#js-plotly-tester"),d=c.node(),e=a.cloneNode(!0);d.appendChild(e),f.select(e).attr({x:0,y:0,transform:""});var g=e.getBoundingClientRect(),h=c.select(".js-reference-point").node().getBoundingClientRect();d.removeChild(e);var i={height:g.height,width:g.width,left:g.left-h.left,top:g.top-h.top,right:g.right-h.left,bottom:g.bottom-h.top};return y.length>=z&&(f.selectAll("[data-bb]").attr("data-bb",null),y=[]),a.setAttribute("data-bb",y.length),y.push(i),k.extendFlat({},i)},p.setClipUrl=function(a,b){if(!b)return void a.attr("clip-path",null);var c="#"+b,d=f.select("base");d.size()&&d.attr("href")&&(c=window.location.href+c),a.attr("clip-path","url("+c+")")}},{"../../constants/xmlns_namespaces":618,"../../lib":632,"../../lib/svg_text_utils":646,"../../registry":738,"../../traces/scatter/make_bubble_size_func":859,"../../traces/scatter/subtypes":864,"../color":533,"../colorscale":548,"./symbol_defs":558,d3:95,"fast-isnumeric":104}],558:[function(a,b,c){"use strict";var d=a("d3");b.exports={circle:{n:0,f:function(a){var b=d.round(a,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(a){var b=d.round(.4*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H"+b+"V"+c+"H-"+b+"V"+b+"H-"+c+"V-"+b+"H-"+b+"V-"+c+"H"+b+"V-"+b+"H"+c+"Z"}},x:{n:4,f:function(a){var b=d.round(.8*a/Math.sqrt(2),2),c="l"+b+","+b,e="l"+b+",-"+b,f="l-"+b+",-"+b,g="l-"+b+","+b;return"M0,"+b+c+e+f+e+f+g+f+g+c+g+c+"Z"}},"triangle-up":{n:5,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+b+","+c+"H"+b+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+b+",-"+c+"H"+b+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M"+c+",-"+b+"V"+b+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+c+",-"+b+"V"+b+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+c+",-"+b+"H"+b+"V"+c+"Z"}},"triangle-se":{n:10,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+b+",-"+c+"V"+b+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H-"+b+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+b+","+c+"V-"+b+"H"+c+"Z"}},pentagon:{n:13,f:function(a){var b=d.round(.951*a,2),c=d.round(.588*a,2),e=d.round(-a,2),f=d.round(a*-.309,2),g=d.round(.809*a,2);return"M"+b+","+f+"L"+c+","+g+"H-"+c+"L-"+b+","+f+"L0,"+e+"Z"}},hexagon:{n:14,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M"+e+",-"+c+"V"+c+"L0,"+b+"L-"+e+","+c+"V-"+c+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M-"+c+","+e+"H"+c+"L"+b+",0L"+c+",-"+e+"H-"+c+"L-"+b+",0Z"}},octagon:{n:16,f:function(a){var b=d.round(.924*a,2),c=d.round(.383*a,2);return"M-"+c+",-"+b+"H"+c+"L"+b+",-"+c+"V"+c+"L"+c+","+b+"H-"+c+"L-"+b+","+c+"V-"+c+"Z"}},star:{n:17,f:function(a){var b=1.4*a,c=d.round(.225*b,2),e=d.round(.951*b,2),f=d.round(.363*b,2),g=d.round(.588*b,2),h=d.round(-b,2),i=d.round(b*-.309,2),j=d.round(.118*b,2),k=d.round(.809*b,2),l=d.round(.382*b,2);return"M"+c+","+i+"H"+e+"L"+f+","+j+"L"+g+","+k+"L0,"+l+"L-"+g+","+k+"L-"+f+","+j+"L-"+e+","+i+"H-"+c+"L0,"+h+"Z"}},hexagram:{n:18,f:function(a){var b=d.round(.66*a,2),c=d.round(.38*a,2),e=d.round(.76*a,2);return"M-"+e+",0l-"+c+",-"+b+"h"+e+"l"+c+",-"+b+"l"+c+","+b+"h"+e+"l-"+c+","+b+"l"+c+","+b+"h-"+e+"l-"+c+","+b+"l-"+c+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M-"+b+","+c+g+b+","+c+g+"0,-"+e+g+"-"+b+","+c+"Z"}},"star-triangle-down":{n:20,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M"+b+",-"+c+g+"-"+b+",-"+c+g+"0,"+e+g+b+",-"+c+"Z"}},"star-square":{n:21,f:function(a){var b=d.round(1.1*a,2),c=d.round(2*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(a){var b=d.round(1.4*a,2),c=d.round(1.9*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(a){var b=d.round(.7*a,2),c=d.round(1.4*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(a){var b=d.round(1.4*a,2),c=d.round(.7*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},hourglass:{n:25,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var b=d.round(a,2),c=d.round(a/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var b=d.round(1.3*a,2),c=d.round(.65*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},asterisk:{n:35,f:function(a){var b=d.round(1.2*a,2),c=d.round(.85*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0},hash:{n:36,f:function(a){var b=d.round(a/2,2),c=d.round(a,2);return"M"+b+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+b+"H-"+c+"m0,-"+c+"H"+c},needLine:!0},"y-up":{n:37,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(a){var b=d.round(1.4*a,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(a){var b=d.round(a,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0}}},{d3:95}],559:[function(a,b,c){"use strict";b.exports={visible:{valType:"boolean"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"]},symmetric:{valType:"boolean"},array:{valType:"data_array"},arrayminus:{valType:"data_array"},value:{valType:"number",min:0,dflt:10},valueminus:{valType:"number",min:0,dflt:10},traceref:{valType:"integer",min:0,dflt:0},tracerefminus:{valType:"integer",min:0,dflt:0},copy_ystyle:{valType:"boolean"},copy_zstyle:{valType:"boolean"},color:{valType:"color"},thickness:{valType:"number",min:0,dflt:2},width:{valType:"number",min:0},_deprecated:{opacity:{valType:"number"}}}},{}],560:[function(a,b,c){"use strict";function d(a,b,c,d){var f=b["error_"+d]||{},i=f.visible&&["linear","log"].indexOf(c.type)!==-1,j=[];if(i){for(var k=h(f),l=0;l<a.length;l++){var m=a[l],n=m[d];if(e(c.c2l(n))){var o=k(n,l);if(e(o[0])&&e(o[1])){var p=m[d+"s"]=n-o[0],q=m[d+"h"]=n+o[1];j.push(p,q)}}}g.expand(c,j,{padded:!0})}}var e=a("fast-isnumeric"),f=a("../../registry"),g=a("../../plots/cartesian/axes"),h=a("./compute_error");b.exports=function(a){for(var b=a.calcdata,c=0;c<b.length;c++){var e=b[c],h=e[0].trace;if(f.traceIs(h,"errorBarsOK")){var i=g.getFromId(a,h.xaxis),j=g.getFromId(a,h.yaxis);d(e,h,i,"x"),d(e,h,j,"y")}}}},{"../../plots/cartesian/axes":662,"../../registry":738,"./compute_error":561,"fast-isnumeric":104}],561:[function(a,b,c){"use strict";function d(a,b){return"percent"===a?function(a){return Math.abs(a*b/100)}:"constant"===a?function(){return Math.abs(b)}:"sqrt"===a?function(a){return Math.sqrt(Math.abs(a))}:void 0}b.exports=function(a){var b=a.type,c=a.symmetric;if("data"===b){var e=a.array,f=a.arrayminus;return c||void 0===f?function(a,b){var c=+e[b];return[c,c]}:function(a,b){return[+f[b],+e[b]]}}var g=d(b,a.value),h=d(b,a.valueminus);return c||void 0===a.valueminus?function(a){var b=g(a);return[b,b]}:function(a){return[h(a),g(a)]}}},{}],562:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../registry"),f=a("../../lib"),g=a("./attributes");b.exports=function(a,b,c,h){function i(a,b){return f.coerce(l,k,g,a,b)}var j="error_"+h.axis,k=b[j]={},l=a[j]||{},m=void 0!==l.array||void 0!==l.value||"sqrt"===l.type,n=i("visible",m);if(n!==!1){var o=i("type","array"in l?"data":"percent"),p=!0;if("sqrt"!==o&&(p=i("symmetric",!(("data"===o?"arrayminus":"valueminus")in l))),"data"===o){var q=i("array");if(q||(k.array=[]),i("traceref"),!p){var r=i("arrayminus");r||(k.arrayminus=[]),i("tracerefminus")}}else"percent"!==o&&"constant"!==o||(i("value"),p||i("valueminus"));var s="copy_"+h.inherit+"style";if(h.inherit){var t=b["error_"+h.inherit];(t||{}).visible&&i(s,!(l.color||d(l.thickness)||d(l.width)))}h.inherit&&k[s]||(i("color",c),i("thickness"),i("width",e.traceIs(b,"gl3d")?0:4))}}},{"../../lib":632,"../../registry":738,"./attributes":559,"fast-isnumeric":104}],563:[function(a,b,c){"use strict";var d=b.exports={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.calcFromTrace=function(a,b){for(var c=a.x||[],e=a.y,f=c.length||e.length,g=new Array(f),h=0;h<f;h++)g[h]={x:c[h],y:e[h]};return g[0].trace=a,d.calc({calcdata:[g],_fullLayout:b}),g},d.plot=a("./plot"),d.style=a("./style"),d.hoverInfo=function(a,b,c){(b.error_y||{}).visible&&(c.yerr=a.yh-a.y,b.error_y.symmetric||(c.yerrneg=a.y-a.ys)),(b.error_x||{}).visible&&(c.xerr=a.xh-a.x,b.error_x.symmetric||(c.xerrneg=a.x-a.xs))}},{"./attributes":559,"./calc":560,"./defaults":562,"./plot":564,"./style":565}],564:[function(a,b,c){"use strict";function d(a,b,c){var d={x:b.c2p(a.x),y:c.c2p(a.y)};return void 0!==a.yh&&(d.yh=c.c2p(a.yh),d.ys=c.c2p(a.ys),f(d.ys)||(d.noYS=!0,d.ys=c.c2p(a.ys,!0))),void 0!==a.xh&&(d.xh=b.c2p(a.xh),d.xs=b.c2p(a.xs),f(d.xs)||(d.noXS=!0,d.xs=b.c2p(a.xs,!0))),d}var e=a("d3"),f=a("fast-isnumeric"),g=a("../../traces/scatter/subtypes");b.exports=function(a,b,c){var h,i=b.xaxis,j=b.yaxis,k=c&&c.duration>0;a.each(function(a){var b,l=a[0].trace,m=l.error_x||{},n=l.error_y||{};l.ids&&(b=function(a){return a.id});var o=g.hasMarkers(l)&&l.marker.maxdisplayed>0;if(n.visible||m.visible){var p=e.select(this).selectAll("g.errorbar").data(a,b);p.exit().remove(),p.style("opacity",1);var q=p.enter().append("g").classed("errorbar",!0);k&&q.style("opacity",0).transition().duration(c.duration).style("opacity",1),p.each(function(a){var b=e.select(this),g=d(a,i,j);if(!o||a.vis){var l;if(n.visible&&f(g.x)&&f(g.yh)&&f(g.ys)){var p=n.width;l="M"+(g.x-p)+","+g.yh+"h"+2*p+"m-"+p+",0V"+g.ys,g.noYS||(l+="m-"+p+",0h"+2*p);var q=b.select("path.yerror");h=!q.size(),h?q=b.append("path").classed("yerror",!0):k&&(q=q.transition().duration(c.duration).ease(c.easing)),q.attr("d",l)}if(m.visible&&f(g.y)&&f(g.xh)&&f(g.xs)){var r=(m.copy_ystyle?n:m).width;l="M"+g.xh+","+(g.y-r)+"v"+2*r+"m0,-"+r+"H"+g.xs,g.noXS||(l+="m0,-"+r+"v"+2*r);var s=b.select("path.xerror");h=!s.size(),h?s=b.append("path").classed("xerror",!0):k&&(s=s.transition().duration(c.duration).ease(c.easing)),s.attr("d",l)}}})}})}},{"../../traces/scatter/subtypes":864,d3:95,"fast-isnumeric":104}],565:[function(a,b,c){"use strict";var d=a("d3"),e=a("../color");b.exports=function(a){a.each(function(a){var b=a[0].trace,c=b.error_y||{},f=b.error_x||{},g=d.select(this);g.selectAll("path.yerror").style("stroke-width",c.thickness+"px").call(e.stroke,c.color),f.copy_ystyle&&(f=c),g.selectAll("path.xerror").style("stroke-width",f.thickness+"px").call(e.stroke,f.color)})}},{"../color":533,d3:95}],566:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/constants");b.exports={_isLinkedToArray:!0,source:{valType:"string"},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},sizex:{valType:"number",dflt:0},sizey:{valType:"number",dflt:0},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain"},opacity:{valType:"number",min:0,max:1,dflt:1},x:{valType:"number",dflt:0},y:{valType:"number",dflt:0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper"}}},{"../../plots/cartesian/constants":668}],567:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,g,c,d)}b=b||{},d("source"),d("layer"),d("x"),d("y"),d("xanchor"),d("yanchor"),d("sizex"),d("sizey"),d("sizing"),d("opacity");for(var h=0;h<2;h++){var i={_fullLayout:c},j=["x","y"][h];e.coerceRef(a,b,i,j,"paper")}return b}var e=a("../../plots/cartesian/axes"),f=a("../../lib"),g=a("./attributes");b.exports=function(a,b){if(a.images&&Array.isArray(a.images))for(var c=a.images,e=b.images=[],f=0;f<c.length;f++){var g=c[f];if(g.source){var h=d(c[f]||{},e[f]||{},b);e.push(h)}}}},{"../../lib":632,"../../plots/cartesian/axes":662,"./attributes":566}],568:[function(a,b,c){"use strict";var d=a("d3"),e=a("../drawing"),f=a("../../plots/cartesian/axes"),g=a("../../constants/xmlns_namespaces");b.exports=function(a){function b(b){var c=d.select(this);if(!this.img||this.img.src!==b.source){c.attr("xmlns",g.svg);var e=new Promise(function(a){function d(){c.remove(),a()}var e=new Image;this.img=e,e.setAttribute("crossOrigin","anonymous"),e.onerror=d,e.onload=function(){var a=document.createElement("canvas");a.width=this.width,a.height=this.height;var b=a.getContext("2d");b.drawImage(this,0,0);var d=a.toDataURL("image/png");c.attr("xlink:href",d)},c.on("error",d),c.on("load",a),e.src=b.source}.bind(this));a._promises.push(e)}}function c(b){var c=d.select(this),g=f.getFromId(a,b.xref),i=f.getFromId(a,b.yref),j=h._size,k=g?Math.abs(g.l2p(b.sizex)-g.l2p(0)):b.sizex*j.w,l=i?Math.abs(i.l2p(b.sizey)-i.l2p(0)):b.sizey*j.h,m=k*n.x[b.xanchor].offset,o=l*n.y[b.yanchor].offset,p=n.x[b.xanchor].sizing+n.y[b.yanchor].sizing,q=(g?g.l2p(b.x)+g._offset:b.x*j.w+j.l)+m,r=(i?i.l2p(b.y)+i._offset:j.h-b.y*j.h+j.t)+o;switch(b.sizing){case"fill":p+=" slice";break;case"stretch":p="none"}c.attr({x:q,y:r,width:k,height:l,preserveAspectRatio:p,opacity:b.opacity});var s=g?g._id:"",t=i?i._id:"",u=s+t;u&&c.call(e.setClipUrl,"clip"+h._uid+u)}var h=a._fullLayout,i=[],j=[],k=[];if(h.images){for(var l=0;l<h.images.length;l++){var m=h.images[l];"below"===m.layer&&"paper"!==m.xref&&"paper"!==m.yref?j.push(m):"above"===m.layer?i.push(m):k.push(m)}var n={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}},o=h._imageLowerLayer.selectAll("image").data(k),p=h._imageSubplotLayer.selectAll("image").data(j),q=h._imageUpperLayer.selectAll("image").data(i);o.enter().append("image"),p.enter().append("image"),q.enter().append("image"),o.exit().remove(),p.exit().remove(),q.exit().remove(),o.each(function(a){b.bind(this)(a),c.bind(this)(a)}),p.each(function(a){b.bind(this)(a),c.bind(this)(a)}),q.each(function(a){b.bind(this)(a),c.bind(this)(a)})}}},{"../../constants/xmlns_namespaces":618,"../../plots/cartesian/axes":662,"../drawing":557,d3:95}],569:[function(a,b,c){"use strict";var d=a("./draw"),e=a("./defaults"),f=a("./attributes");b.exports={moduleType:"component",name:"images",draw:d,layoutAttributes:f,supplyLayoutDefaults:e}},{"./attributes":566,"./defaults":567,"./draw":568}],570:[function(a,b,c){"use strict";c.isRightAnchor=function(a){return"right"===a.xanchor||"auto"===a.xanchor&&a.x>=2/3},c.isCenterAnchor=function(a){return"center"===a.xanchor||"auto"===a.xanchor&&a.x>1/3&&a.x<2/3},c.isBottomAnchor=function(a){return"bottom"===a.yanchor||"auto"===a.yanchor&&a.y<=1/3},c.isMiddleAnchor=function(a){return"middle"===a.yanchor||"auto"===a.yanchor&&a.y>1/3&&a.y<2/3}},{}],571:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat;b.exports={bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:e.defaultLine},borderwidth:{valType:"number",min:0,dflt:0},font:f({},d,{}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"]},tracegroupgap:{valType:"number",min:0,dflt:10},x:{valType:"number",min:-2,max:3,dflt:1.02},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"}}},{"../../lib/extend":625,"../../plots/font_attributes":683,"../color/attributes":532}],572:[function(a,b,c){"use strict";b.exports={scrollBarWidth:4,scrollBarHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],573:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("./attributes"),g=a("../../plots/layout_attributes"),h=a("./helpers");b.exports=function(a,b,c){function i(a,b){return e.coerce(n,o,f,a,b)}for(var j,k,l,m,n=a.legend||{},o=b.legend={},p=0,q="normal",r=0;r<c.length;r++){var s=c[r];h.legendGetsTrace(s)&&(p++,d.traceIs(s,"pie")&&p++),(d.traceIs(s,"bar")&&"stack"===b.barmode||["tonextx","tonexty"].indexOf(s.fill)!==-1)&&(q=h.isGrouped({traceorder:q})?"grouped+reversed":"reversed"),void 0!==s.legendgroup&&""!==s.legendgroup&&(q=h.isReversed({traceorder:q})?"reversed+grouped":"grouped")}var t=e.coerce(a,b,g,"showlegend",p>1);if(t!==!1){if(i("bgcolor",b.paper_bgcolor),i("bordercolor"),i("borderwidth"),e.coerceFont(i,"font",b.font),i("orientation"),"h"===o.orientation){var u=a.xaxis;u&&u.rangeslider&&u.rangeslider.visible?(j=0,l="left",k=1.1,m="bottom"):(j=0,l="left",k=-.1,m="top")}i("traceorder",q),h.isGrouped(b.legend)&&i("tracegroupgap"),i("x",j),i("xanchor",l),i("y",k),i("yanchor",m),e.noneOrAll(n,o,["x","y"])}}},{"../../lib":632,"../../plots/layout_attributes":714,"../../registry":738,"./attributes":571,"./helpers":576}],574:[function(a,b,c){"use strict";function d(a,b){function c(c){r.convertToTspans(c,function(){c.selectAll("tspan.line").attr({x:c.attr("x")}),a.call(f,b)})}var d=a.data()[0][0],e=b._fullLayout,g=d.trace,h=n.traceIs(g,"pie"),i=g.index,j=h?d.label:g.name,l=a.selectAll("text.legendtext").data([0]);l.enter().append("text").classed("legendtext",!0),l.attr({x:40,y:0,"data-unformatted":j}).style("text-anchor","start").classed("user-select-none",!0).call(p.font,e.legend.font).text(j),b._context.editable&&!h?l.call(r.makeEditable).call(c).on("edit",function(a){this.attr({"data-unformatted":a}),this.text(a).call(c),this.text()||(a="    ");var e,f=d.trace._fullInput||{};if(["ohlc","candlestick"].indexOf(f.type)!==-1){var g=d.trace.transforms,h=g[g.length-1].direction;e=h+".legenditem.name"}else e="name";k.restyle(b,e,a,i)}):l.call(c)}function e(a,b){var c=b._fullLayout.hiddenlabels?b._fullLayout.hiddenlabels.slice():[],d=a.selectAll("rect").data([0]);d.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(q.fill,"rgba(0,0,0,0)"),d.on("click",function(){if(!b._dragged){var d,e,f=a.data()[0][0],g=b._fullData,h=f.trace,i=h.legendgroup,j=[];if(n.traceIs(h,"pie")){var l=f.label,m=c.indexOf(l);m===-1?c.push(l):c.splice(m,1),k.relayout(b,"hiddenlabels",c)}else{if(""===i)j=[h.index];else for(var o=0;o<g.length;o++)d=g[o],d.legendgroup===i&&j.push(d.index);e=h.visible!==!0||"legendonly",k.restyle(b,"visible",e,j)}}})}function f(a,b){var c,d,e=a.data()[0][0],f=a.select("g[class*=math-group]"),g=b._fullLayout.legend,h=1.3*g.font.size;if(!e.trace.showlegend)return void a.remove();if(f.node()){var i=p.bBox(f.node());c=i.height,d=i.width,l.setTranslate(f,0,c/4)}else{var j=a.selectAll(".legendtext"),k=a.selectAll(".legendtext>tspan"),m=k[0].length||1;c=h*m,d=j.node()&&p.bBox(j.node()).width;var n=h*(.3+(1-m)/2);j.attr("y",n),k.attr("y",n)}c=Math.max(c,16)+3,e.height=c,e.width=d}function g(a,b,c){var d=a._fullLayout,e=d.legend,f=e.borderwidth,g=v.isGrouped(e);if(v.isVertical(e))g&&b.each(function(a,b){l.setTranslate(this,0,b*e.tracegroupgap)}),e.width=0,e.height=0,c.each(function(a){var b=a[0],c=b.height,d=b.width;l.setTranslate(this,f,5+f+e.height+c/2),e.height+=c,e.width=Math.max(e.width,d)}),e.width+=45+2*f,e.height+=10+2*f,g&&(e.height+=(e._lgroupsLength-1)*e.tracegroupgap),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),c.each(function(b){var c=b[0],d=j.select(this).select(".legendtoggle");d.call(p.setRect,0,-c.height/2,(a._context.editable?0:e.width)+40,c.height)});else if(g){e.width=0,e.height=0;for(var h=[e.width],i=b.data(),k=0,m=i.length;k<m;k++){var n=i[k].map(function(a){return a[0].width}),o=40+Math.max.apply(null,n);e.width+=e.tracegroupgap+o,h.push(e.width)}b.each(function(a,b){l.setTranslate(this,h[b],0)}),b.each(function(){var a=j.select(this),b=a.selectAll("g.traces"),c=0;b.each(function(a){var b=a[0],d=b.height;l.setTranslate(this,0,5+f+c+d/2),c+=d}),e.height=Math.max(e.height,c)}),e.height+=10+2*f,e.width+=2*f,e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),c.each(function(b){var c=b[0],d=j.select(this).select(".legendtoggle");d.call(p.setRect,0,-c.height/2,a._context.editable?0:e.width,c.height)})}else{e.width=0,e.height=0;var q=0,r=0,s=0,t=0;c.each(function(a){s=Math.max(40+a[0].width,s)}),c.each(function(a){var b=a[0],c=s,g=e.tracegroupgap||5;f+t+g+c>d.width-(d.margin.r+d.margin.l)&&(t=0,q+=r,e.height=e.height+r,r=0),l.setTranslate(this,f+t,5+f+b.height/2+q),e.width+=g+c,e.height=Math.max(e.height,b.height),t+=g+c,r=Math.max(b.height,r)}),e.width+=2*f,e.height+=10+2*f,e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),c.each(function(b){var c=b[0],d=j.select(this).select(".legendtoggle");d.call(p.setRect,0,-c.height/2,a._context.editable?0:e.width,c.height)})}}function h(a){var b=a._fullLayout,c=b.legend,d="left";w.isRightAnchor(c)?d="right":w.isCenterAnchor(c)&&(d="center");var e="top";w.isBottomAnchor(c)?e="bottom":w.isMiddleAnchor(c)&&(e="middle"),m.autoMargin(a,"legend",{x:c.x,y:c.y,l:c.width*({right:1,center:.5}[d]||0),r:c.width*({left:1,center:.5}[d]||0),b:c.height*({top:1,middle:.5}[e]||0),t:c.height*({bottom:1,middle:.5}[e]||0)})}function i(a){var b=a._fullLayout,c=b.legend,d="left";w.isRightAnchor(c)?d="right":w.isCenterAnchor(c)&&(d="center"),m.autoMargin(a,"legend",{x:c.x,y:.5,l:c.width*({right:1,center:.5}[d]||0),r:c.width*({left:1,center:.5}[d]||0),b:0,t:0})}var j=a("d3"),k=a("../../plotly"),l=a("../../lib"),m=a("../../plots/plots"),n=a("../../registry"),o=a("../dragelement"),p=a("../drawing"),q=a("../color"),r=a("../../lib/svg_text_utils"),s=a("./constants"),t=a("./get_legend_data"),u=a("./style"),v=a("./helpers"),w=a("./anchor_utils");b.exports=function(a){function b(a,b){B.attr("data-scroll",b).call(l.setTranslate,0,b),C.call(p.setRect,N,a,s.scrollBarWidth,s.scrollBarHeight),z.select("rect").attr({y:r.borderwidth-b})}var c=a._fullLayout,f="legend"+c._uid;if(c._infolayer&&a.calcdata){var r=c.legend,v=c.showlegend&&t(a.calcdata,r),x=c.hiddenlabels||[];if(!c.showlegend||!v.length)return c._infolayer.selectAll(".legend").remove(),c._topdefs.select("#"+f).remove(),void m.autoMargin(a,"legend");var y=c._infolayer.selectAll("g.legend").data([0]);y.enter().append("g").attr({"class":"legend","pointer-events":"all"});var z=c._topdefs.selectAll("#"+f).data([0]);z.enter().append("clipPath").attr("id",f).append("rect");var A=y.selectAll("rect.bg").data([0]);A.enter().append("rect").attr({"class":"bg","shape-rendering":"crispEdges"}),A.call(q.stroke,r.bordercolor),A.call(q.fill,r.bgcolor),A.style("stroke-width",r.borderwidth+"px");var B=y.selectAll("g.scrollbox").data([0]);B.enter().append("g").attr("class","scrollbox");var C=y.selectAll("rect.scrollbar").data([0]);C.enter().append("rect").attr({"class":"scrollbar",rx:20,ry:2,width:0,height:0}).call(q.fill,"#808BA4");var D=B.selectAll("g.groups").data(v);D.enter().append("g").attr("class","groups"),D.exit().remove();var E=D.selectAll("g.traces").data(l.identity);E.enter().append("g").attr("class","traces"),E.exit().remove(),E.call(u).style("opacity",function(a){var b=a[0].trace;return n.traceIs(b,"pie")?x.indexOf(a[0].label)!==-1?.5:1:"legendonly"===b.visible?.5:1}).each(function(){j.select(this).call(d,a).call(e,a)});var F=0!==y.enter().size();F&&(g(a,D,E),h(a));var G=0,H=c.width,I=0,J=c.height;g(a,D,E),r.height>J?i(a):h(a);var K=c._size,L=K.l+K.w*r.x,M=K.t+K.h*(1-r.y);w.isRightAnchor(r)?L-=r.width:w.isCenterAnchor(r)&&(L-=r.width/2),w.isBottomAnchor(r)?M-=r.height:w.isMiddleAnchor(r)&&(M-=r.height/2);var N=r.width,O=K.w;N>O?(L=K.l,N=O):(L+N>H&&(L=H-N),L<G&&(L=G),N=Math.min(H-L,r.width));var P=r.height,Q=K.h;P>Q?(M=K.t,P=Q):(M+P>J&&(M=J-P),M<I&&(M=I),P=Math.min(J-M,r.height)),l.setTranslate(y,L,M);var R,S,T=P-s.scrollBarHeight-2*s.scrollBarMargin,U=r.height-P;if(r.height<=P||a._context.staticPlot)A.attr({width:N-r.borderwidth,height:P-r.borderwidth,x:r.borderwidth/2,y:r.borderwidth/2}),l.setTranslate(B,0,0),z.select("rect").attr({width:N-2*r.borderwidth,height:P-2*r.borderwidth,x:r.borderwidth,y:r.borderwidth}),B.call(p.setClipUrl,f);else{R=s.scrollBarMargin,S=B.attr("data-scroll")||0,A.attr({width:N-2*r.borderwidth+s.scrollBarWidth+s.scrollBarMargin,height:P-r.borderwidth,x:r.borderwidth/2,y:r.borderwidth/2}),z.select("rect").attr({width:N-2*r.borderwidth+s.scrollBarWidth+s.scrollBarMargin,height:P-2*r.borderwidth,x:r.borderwidth,y:r.borderwidth-S}),B.call(p.setClipUrl,f),F&&b(R,S),y.on("wheel",null),y.on("wheel",function(){S=l.constrain(B.attr("data-scroll")-j.event.deltaY/T*U,-U,0),R=s.scrollBarMargin-S/U*T,b(R,S),j.event.preventDefault()}),C.on(".drag",null),B.on(".drag",null);var V=j.behavior.drag().on("drag",function(){R=l.constrain(j.event.y-s.scrollBarHeight/2,s.scrollBarMargin,s.scrollBarMargin+T),S=-(R-s.scrollBarMargin)/T*U,b(R,S)});C.call(V),B.call(V)}if(a._context.editable){var W,X,Y,Z;y.classed("cursor-move",!0),o.init({element:y.node(),prepFn:function(){var a=l.getTranslate(y);Y=a.x,Z=a.y},moveFn:function(a,b){var c=Y+a,d=Z+b;l.setTranslate(y,c,d),W=o.align(c,0,K.l,K.l+K.w,r.xanchor),X=o.align(d,0,K.t+K.h,K.t,r.yanchor)},doneFn:function(b){b&&void 0!==W&&void 0!==X&&k.relayout(a,{"legend.x":W,"legend.y":X})}})}}}},{"../../lib":632,"../../lib/svg_text_utils":646,"../../plotly":658,"../../plots/plots":723,"../../registry":738,"../color":533,"../dragelement":555,"../drawing":557,"./anchor_utils":570,"./constants":572,"./get_legend_data":575,"./helpers":576,"./style":578,d3:95}],575:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./helpers");b.exports=function(a,b){function c(a,c){if(""!==a&&e.isGrouped(b))i.indexOf(a)===-1?(i.push(a),j=!0,h[a]=[[c]]):h[a].push([c]);else{var d="~~i"+l;i.push(d),h[d]=[[c]],l++}}var f,g,h={},i=[],j=!1,k={},l=0;for(f=0;f<a.length;f++){var m=a[f],n=m[0],o=n.trace,p=o.legendgroup;if(e.legendGetsTrace(o)&&o.showlegend)if(d.traceIs(o,"pie"))for(k[p]||(k[p]={}),g=0;g<m.length;g++){var q=m[g].label;k[p][q]||(c(p,{label:q,color:m[g].color,i:m[g].i,trace:o}),k[p][q]=!0)}else c(p,n)}if(!i.length)return[];var r,s,t=i.length;if(j&&e.isGrouped(b))for(s=new Array(t),f=0;f<t;f++)r=h[i[f]],s[f]=e.isReversed(b)?r.reverse():r;else{for(s=[new Array(t)],f=0;f<t;f++)r=h[i[f]][0],s[0][e.isReversed(b)?t-f-1:f]=r;t=1}return b._lgroupsLength=t,s}},{"../../registry":738,"./helpers":576}],576:[function(a,b,c){"use strict";var d=a("../../registry");c.legendGetsTrace=function(a){return a.visible&&d.traceIs(a,"showLegend")},c.isGrouped=function(a){return(a.traceorder||"").indexOf("grouped")!==-1},c.isVertical=function(a){return"h"!==a.orientation},c.isReversed=function(a){return(a.traceorder||"").indexOf("reversed")!==-1}},{"../../registry":738}],577:[function(a,b,c){"use strict";var d=b.exports={};d.moduleType="component",d.name="legend",d.layoutAttributes=a("./attributes"),d.supplyLayoutDefaults=a("./defaults"),d.draw=a("./draw"),d.style=a("./style")},{"./attributes":571,"./defaults":573,"./draw":574,"./style":578}],578:[function(a,b,c){"use strict";function d(a){var b=a[0].trace,c=b.visible&&b.fill&&"none"!==b.fill,d=n.hasLines(b),e=i.select(this).select(".legendfill").selectAll("path").data(c?[a]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d","M5,0h30v6h-30z").call(l.fillGroupStyle);var f=i.select(this).select(".legendlines").selectAll("path").data(d?[a]:[]);f.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),
f.exit().remove(),f.call(l.lineGroupStyle)}function e(a){function b(a,b,c){var d=k.nestedProperty(g,a).get(),e=Array.isArray(d)&&b?b(d):d;if(c){if(e<c[0])return c[0];if(e>c[1])return c[1]}return e}function c(a){return a[0]}var d,e,f=a[0],g=f.trace,h=n.hasMarkers(g),j=n.hasText(g),m=n.hasLines(g);if(h||j||m){var o={},p={};h&&(o.mc=b("marker.color",c),o.mo=b("marker.opacity",k.mean,[.2,1]),o.ms=b("marker.size",k.mean,[2,16]),o.mlc=b("marker.line.color",c),o.mlw=b("marker.line.width",k.mean,[0,5]),p.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),m&&(p.line={width:b("line.width",c,[0,10])}),j&&(o.tx="Aa",o.tp=b("textposition",c),o.ts=10,o.tc=b("textfont.color",c),o.tf=b("textfont.family",c)),d=[k.minExtend(f,o)],e=k.minExtend(g,p)}var q=i.select(this).select("g.legendpoints"),r=q.selectAll("path.scatterpts").data(h?d:[]);r.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),r.exit().remove(),r.call(l.pointStyle,e),h&&(d[0].mrc=3);var s=q.selectAll("g.pointtext").data(j?d:[]);s.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),s.exit().remove(),s.selectAll("text").call(l.textPointStyle,e)}function f(a){var b=a[0].trace,c=b.marker||{},d=c.line||{},e=i.select(this).select("g.legendpoints").selectAll("path.legendbar").data(j.traceIs(b,"bar")?[a]:[]);e.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),e.exit().remove(),e.each(function(a){var b=(a.mlw+1||d.width+1)-1,e=i.select(this);e.style("stroke-width",b+"px").call(m.fill,a.mc||c.color),b&&e.call(m.stroke,a.mlc||d.color)})}function g(a){var b=a[0].trace,c=i.select(this).select("g.legendpoints").selectAll("path.legendbox").data(j.traceIs(b,"box")&&b.visible?[a]:[]);c.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.each(function(a){var c=(a.lw+1||b.line.width+1)-1,d=i.select(this);d.style("stroke-width",c+"px").call(m.fill,a.fc||b.fillcolor),c&&d.call(m.stroke,a.lc||b.line.color)})}function h(a){var b=a[0].trace,c=i.select(this).select("g.legendpoints").selectAll("path.legendpie").data(j.traceIs(b,"pie")&&b.visible?[a]:[]);c.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.size()&&c.call(o,a[0],b)}var i=a("d3"),j=a("../../registry"),k=a("../../lib"),l=a("../drawing"),m=a("../color"),n=a("../../traces/scatter/subtypes"),o=a("../../traces/pie/style_one");b.exports=function(a){a.each(function(a){var b=i.select(this),c=b.selectAll("g.legendfill").data([a]);c.enter().append("g").classed("legendfill",!0);var d=b.selectAll("g.legendlines").data([a]);d.enter().append("g").classed("legendlines",!0);var e=b.selectAll("g.legendsymbols").data([a]);e.enter().append("g").classed("legendsymbols",!0),e.style("opacity",a[0].trace.opacity),e.selectAll("g.legendpoints").data([a]).enter().append("g").classed("legendpoints",!0)}).each(f).each(g).each(h).each(d).each(e)}},{"../../lib":632,"../../registry":738,"../../traces/pie/style_one":838,"../../traces/scatter/subtypes":864,"../color":533,"../drawing":557,d3:95}],579:[function(a,b,c){"use strict";function d(a,b){var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g={};if("zoom"===d){for(var h,i,k="in"===e?.5:2,m=(1+k)/2,n=(1-k)/2,o=l.list(a,null,!0),p=0;p<o.length;p++)if(h=o[p],!h.fixedrange)if(i=h._name,"auto"===e)g[i+".autorange"]=!0;else if("reset"===e)if(void 0===h._rangeInitial)g[i+".autorange"]=!0;else{var q=h._rangeInitial.slice();g[i+".range[0]"]=q[0],g[i+".range[1]"]=q[1]}else{var r=h.range;g[i+".range[0]"]=m*r[0]+n*r[1],g[i+".range[1]"]=m*r[1]+n*r[0]}}else"hovermode"!==d||"x"!==e&&"y"!==e||(e=f._isHoriz?"y":"x",c.setAttribute("data-val",e)),g[d]=e;j.relayout(a,g)}function e(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g=k.getSubplotIds(f,"gl3d"),h={},i=d.split("."),l=0;l<g.length;l++)h[g[l]+"."+i[1]]=e;j.relayout(a,h)}function f(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=a._fullLayout,f=k.getSubplotIds(e,"gl3d"),g=0;g<f.length;g++){var h=f[g],i=e[h],j=i._scene;"resetDefault"===d?j.setCameraToDefault():"resetLastSave"===d&&j.setCamera(i.camera)}}function g(a,b){var c=b.currentTarget,d=c._previousVal||!1,e=a.layout,f=a._fullLayout,g=k.getSubplotIds(f,"gl3d"),h=["xaxis","yaxis","zaxis"],i=["showspikes","spikesides","spikethickness","spikecolor"],l={},n={},o={};if(d)o=m.extendDeep(e,d),c._previousVal=null;else{o={"allaxes.showspikes":!1};for(var p=0;p<g.length;p++){var q=g[p],r=f[q],s=l[q]={};s.hovermode=r.hovermode,o[q+".hovermode"]=!1;for(var t=0;t<3;t++){var u=h[t];n=s[u]={};for(var v=0;v<i.length;v++){var w=i[v];n[w]=r[u][w]}}}c._previousVal=m.extendDeep({},l)}j.relayout(a,o)}function h(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g=k.getSubplotIds(f,"geo"),h=0;h<g.length;h++){var i=f[g[h]]._subplot;if("zoom"===d){var j=i.projection.scale(),l="in"===e?2*j:.5*j;i.projection.scale(l),i.zoom.scale(l),i.render()}else"reset"===d&&i.zoomReset()}}function i(a){var b,c=a._fullLayout;b=c._has("cartesian")?c._isHoriz?"y":"x":"closest";var d=!a._fullLayout.hovermode&&b;j.relayout(a,"hovermode",d)}var j=a("../../plotly"),k=a("../../plots/plots"),l=a("../../plots/cartesian/axes"),m=a("../../lib"),n=a("../../snapshot/download"),o=a("../../../build/ploticon"),p=b.exports={};p.toImage={name:"toImage",title:"Download plot as a png",icon:o.camera,click:function(a){var b="png";m.notifier("Taking snapshot - this may take a few seconds","long"),m.isIE()&&(m.notifier("IE only supports svg.  Changing format to svg.","long"),b="svg"),n(a,{format:b}).then(function(a){m.notifier("Snapshot succeeded - "+a,"long")})["catch"](function(){m.notifier("Sorry there was a problem downloading your snapshot!","long")})}},p.sendDataToCloud={name:"sendDataToCloud",title:"Save and edit plot in cloud",icon:o.disk,click:function(a){k.sendDataToCloud(a)}},p.zoom2d={name:"zoom2d",title:"Zoom",attr:"dragmode",val:"zoom",icon:o.zoombox,click:d},p.pan2d={name:"pan2d",title:"Pan",attr:"dragmode",val:"pan",icon:o.pan,click:d},p.select2d={name:"select2d",title:"Box Select",attr:"dragmode",val:"select",icon:o.selectbox,click:d},p.lasso2d={name:"lasso2d",title:"Lasso Select",attr:"dragmode",val:"lasso",icon:o.lasso,click:d},p.zoomIn2d={name:"zoomIn2d",title:"Zoom in",attr:"zoom",val:"in",icon:o.zoom_plus,click:d},p.zoomOut2d={name:"zoomOut2d",title:"Zoom out",attr:"zoom",val:"out",icon:o.zoom_minus,click:d},p.autoScale2d={name:"autoScale2d",title:"Autoscale",attr:"zoom",val:"auto",icon:o.autoscale,click:d},p.resetScale2d={name:"resetScale2d",title:"Reset axes",attr:"zoom",val:"reset",icon:o.home,click:d},p.hoverClosestCartesian={name:"hoverClosestCartesian",title:"Show closest data on hover",attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:d},p.hoverCompareCartesian={name:"hoverCompareCartesian",title:"Compare data on hover",attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?"y":"x"},icon:o.tooltip_compare,gravity:"ne",click:d},p.zoom3d={name:"zoom3d",title:"Zoom",attr:"scene.dragmode",val:"zoom",icon:o.zoombox,click:e},p.pan3d={name:"pan3d",title:"Pan",attr:"scene.dragmode",val:"pan",icon:o.pan,click:e},p.orbitRotation={name:"orbitRotation",title:"orbital rotation",attr:"scene.dragmode",val:"orbit",icon:o["3d_rotate"],click:e},p.tableRotation={name:"tableRotation",title:"turntable rotation",attr:"scene.dragmode",val:"turntable",icon:o["z-axis"],click:e},p.resetCameraDefault3d={name:"resetCameraDefault3d",title:"Reset camera to default",attr:"resetDefault",icon:o.home,click:f},p.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:"Reset camera to last save",attr:"resetLastSave",icon:o.movie,click:f},p.hoverClosest3d={name:"hoverClosest3d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:g},p.zoomInGeo={name:"zoomInGeo",title:"Zoom in",attr:"zoom",val:"in",icon:o.zoom_plus,click:h},p.zoomOutGeo={name:"zoomOutGeo",title:"Zoom out",attr:"zoom",val:"out",icon:o.zoom_minus,click:h},p.resetGeo={name:"resetGeo",title:"Reset",attr:"reset",val:null,icon:o.autoscale,click:h},p.hoverClosestGeo={name:"hoverClosestGeo",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:i},p.hoverClosestGl2d={name:"hoverClosestGl2d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:i},p.hoverClosestPie={name:"hoverClosestPie",title:"Toggle show closest data on hover",attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:i},p.toggleHover={name:"toggleHover",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:function(a,b){i(a),g(a,b)}},p.resetViews={name:"resetViews",title:"Reset views",icon:o.home,click:function(a,b){var c=b.currentTarget;c.setAttribute("data-attr","zoom"),c.setAttribute("data-val","reset"),d(a,b),c.setAttribute("data-attr","resetLastSave"),f(a,b)}}},{"../../../build/ploticon":2,"../../lib":632,"../../plotly":658,"../../plots/cartesian/axes":662,"../../plots/plots":723,"../../snapshot/download":740}],580:[function(a,b,c){"use strict";c.manage=a("./manage")},{"./manage":581}],581:[function(a,b,c){"use strict";function d(a,b,c){function d(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];b.indexOf(e)===-1&&c.push(l[e])}q.push(c)}var h=a._fullLayout,i=a._fullData,j=h._has("cartesian"),k=h._has("gl3d"),m=h._has("geo"),n=h._has("pie"),o=h._has("gl2d"),p=h._has("ternary"),q=[];if(d(["toImage","sendDataToCloud"]),(j||o||n||p)+m+k>1)return d(["resetViews","toggleHover"]),g(q,c);k&&(d(["zoom3d","pan3d","orbitRotation","tableRotation"]),d(["resetCameraDefault3d","resetCameraLastSave3d"]),d(["hoverClosest3d"])),m&&(d(["zoomInGeo","zoomOutGeo","resetGeo"]),d(["hoverClosestGeo"]));var r=e(h),s=[];return((j||o)&&!r||p)&&(s=["zoom2d","pan2d"]),(j||p)&&f(i)&&(s.push("select2d"),s.push("lasso2d")),s.length&&d(s),!j&&!o||r||p||d(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"]),j&&n?d(["toggleHover"]):o?d(["hoverClosestGl2d"]):j?d(["hoverClosestCartesian","hoverCompareCartesian"]):n&&d(["hoverClosestPie"]),g(q,c)}function e(a){for(var b=i.list({_fullLayout:a},null,!0),c=!0,d=0;d<b.length;d++)if(!b[d].fixedrange){c=!1;break}return c}function f(a){for(var b=!1,c=0;c<a.length&&!b;c++){var d=a[c];d._module&&d._module.selectPoints&&("scatter"===d.type||"scatterternary"===d.type?(j.hasMarkers(d)||j.hasText(d))&&(b=!0):b=!0)}return b}function g(a,b){if(b.length)if(Array.isArray(b[0]))for(var c=0;c<b.length;c++)a.push(b[c]);else a.push(b);return a}function h(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.length;d++){var e=c[d];if("string"==typeof e){if(void 0===l[e])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));a[b][d]=l[e]}}return a}var i=a("../../plots/cartesian/axes"),j=a("../../traces/scatter/subtypes"),k=a("./modebar"),l=a("./buttons");b.exports=function(a){var b=a._fullLayout,c=a._context,e=b._modeBar;if(!c.displayModeBar)return void(e&&(e.destroy(),delete b._modeBar));if(!Array.isArray(c.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(c.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var f,g=c.modeBarButtons;f=Array.isArray(g)&&g.length?h(g):d(a,c.modeBarButtonsToRemove,c.modeBarButtonsToAdd),e?e.update(a,f):b._modeBar=k(a,f)}},{"../../plots/cartesian/axes":662,"../../traces/scatter/subtypes":864,"./buttons":579,"./modebar":582}],582:[function(a,b,c){"use strict";function d(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}function e(a,b){var c=a._fullLayout,e=new d({graphInfo:a,container:c._paperdiv.node(),buttons:b});return c._privateplot&&f.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}var f=a("d3"),g=a("../../lib"),h=a("../../../build/ploticon"),i=d.prototype;i.update=function(a,b){this.graphInfo=a;var c=this.graphInfo._context;"hover"===c.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var d=!this.hasButtons(b),e=this.hasLogo!==c.displaylogo;(d||e)&&(this.removeAllButtons(),this.updateButtons(b),c.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},i.updateButtons=function(a){var b=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(a){var c=b.createGroup();a.forEach(function(a){var d=a.name;if(!d)throw new Error("must provide button 'name' in button config");if(b.buttonsNames.indexOf(d)!==-1)throw new Error("button name '"+d+"' is taken");b.buttonsNames.push(d);var e=b.createButton(a);b.buttonElements.push(e),c.appendChild(e)}),b.element.appendChild(c)})},i.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},i.createButton=function(a){var b=this,c=document.createElement("a");c.setAttribute("rel","tooltip"),c.className="modebar-btn";var d=a.title;void 0===d&&(d=a.name),(d||0===d)&&c.setAttribute("data-title",d),void 0!==a.attr&&c.setAttribute("data-attr",a.attr);var e=a.val;void 0!==e&&("function"==typeof e&&(e=e(this.graphInfo)),c.setAttribute("data-val",e));var f=a.click;if("function"!=typeof f)throw new Error("must provide button 'click' function in button config");return c.addEventListener("click",function(c){a.click(b.graphInfo,c),b.updateActiveButton(c.currentTarget)}),c.setAttribute("data-toggle",a.toggle||!1),a.toggle&&c.classList.add("active"),c.appendChild(this.createIcon(a.icon||h.question)),c.setAttribute("data-gravity",a.gravity||"n"),c},i.createIcon=function(a){var b=a.ascent-a.descent,c="http://www.w3.org/2000/svg",d=document.createElementNS(c,"svg"),e=document.createElementNS(c,"path");return d.setAttribute("height","1em"),d.setAttribute("width",a.width/b+"em"),d.setAttribute("viewBox",[0,0,a.width,b].join(" ")),e.setAttribute("d",a.path),e.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),d.appendChild(e),d},i.updateActiveButton=function(a){var b=this.graphInfo._fullLayout,c=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var d=a.getAttribute("data-val")||!0,e=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle"),i=f.select(a);if(h)e===c&&i.classed("active",!i.classed("active"));else{var j=null===e?e:g.nestedProperty(b,e).get();i.classed("active",j===d)}})},i.hasButtons=function(a){var b=this.buttons;if(!b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;d++)if(a[c][d].name!==b[c][d].name)return!1}return!0},i.getLogo=function(){var a=this.createGroup(),b=document.createElement("a");return b.href="https://plot.ly/",b.target="_blank",b.setAttribute("data-title","Produced with Plotly"),b.className="modebar-btn plotlyjsicon modebar-btn--logo",b.appendChild(this.createIcon(h.plotlylogo)),a.appendChild(b),a},i.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},i.destroy=function(){g.removeElement(this.container.querySelector(".modebar"))},b.exports=e},{"../../../build/ploticon":2,"../../lib":632,d3:95}],583:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat,g=a("./button_attributes");g=f(g,{_isLinkedToArray:!0}),b.exports={visible:{valType:"boolean"},buttons:g,x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom"},font:f({},d,{}),bgcolor:{valType:"color",dflt:e.lightLine},activecolor:{valType:"color"},bordercolor:{valType:"color",dflt:e.defaultLine},borderwidth:{valType:"number",min:0,dflt:0}}},{"../../lib/extend":625,"../../plots/font_attributes":683,"../color/attributes":532,"./button_attributes":584}],584:[function(a,b,c){"use strict";b.exports={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward"},count:{valType:"number",min:0,dflt:1},label:{valType:"string"}}},{}],585:[function(a,b,c){"use strict";b.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],586:[function(a,b,c){"use strict";function d(a,b){function c(a,b){return f.coerce(d,e,i,a,b)}for(var d,e,g=a.buttons||[],h=b.buttons=[],j=0;j<g.length;j++)if(d=g[j],e={},f.isPlainObject(d)){var k=c("step");"all"!==k&&(c("stepmode"),c("count")),c("label"),e._index=j,h.push(e)}return h}function e(a,b,c){for(var d=c.filter(function(c){return b[c].anchor===a._id}),e=0,f=0;f<d.length;f++){var g=b[d[f]].domain;g&&(e=Math.max(g[1],e))}return[a.domain[0],e+j.yPad]}var f=a("../../lib"),g=a("../color"),h=a("./attributes"),i=a("./button_attributes"),j=a("./constants");b.exports=function(a,b,c,i){function k(a,b){return f.coerce(l,m,h,a,b)}var l=a.rangeselector||{},m=b.rangeselector={},n=d(l,m),o=k("visible",n.length>0);if(o){var p=e(b,c,i);k("x",p[0]),k("y",p[1]),f.noneOrAll(a,b,["x","y"]),k("xanchor"),k("yanchor"),f.coerceFont(k,"font",c.font);var q=k("bgcolor");k("activecolor",g.contrast(q,j.lightAmount,j.darkAmount)),k("bordercolor"),k("borderwidth")}}},{"../../lib":632,"../color":533,"./attributes":583,"./button_attributes":584,"./constants":585}],587:[function(a,b,c){"use strict";function d(a){for(var b=r.list(a,"x",!0),c=[],d=0;d<b.length;d++){var e=b[d];e.rangeselector&&e.rangeselector.visible&&c.push(e)}return c}function e(a){return a._id}function f(a,b,c){if("all"===b.step)return a.autorange===!0;var d=Object.keys(c);return a.range[0]===c[d[0]]&&a.range[1]===c[d[1]]}function g(a,b,c){var d=a.selectAll("rect").data([0]);d.enter().append("rect").classed("selector-rect",!0),d.attr("shape-rendering","crispEdges"),d.attr({rx:t.rx,ry:t.ry}),d.call(o.stroke,b.bordercolor).call(o.fill,h(b,c)).style("stroke-width",b.borderwidth+"px")}function h(a,b){return b.isActive||b.isHovered?a.activecolor:a.bgcolor}function i(a,b,c){function d(a){q.convertToTspans(a)}var e=a.selectAll("text").data([0]);e.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),e.attr("text-anchor","middle"),e.call(p.font,b.font).text(j(c)).call(d)}function j(a){return a.label?a.label:"all"===a.step?"all":a.count+a.step.charAt(0)}function k(a,b,c,d){c.width=0,c.height=0;var e=c.borderwidth;b.each(function(){var a=l.select(this),b=a.select(".selector-text"),d=b.selectAll("tspan"),e=1.3*c.font.size,f=d[0].length||1,g=Math.max(e*f,16)+3;c.height=Math.max(c.height,g)}),b.each(function(){var a=l.select(this),b=a.select(".selector-rect"),d=a.select(".selector-text"),f=d.selectAll("tspan"),g=d.node()&&p.bBox(d.node()).width,h=1.3*c.font.size,i=f[0].length||1,j=Math.max(g+10,t.minButtonWidth);a.attr("transform","translate("+(e+c.width)+","+e+")"),b.attr({x:0,y:0,width:j,height:c.height});var k={x:j/2,y:c.height/2-(i-1)*h/2+3};d.attr(k),f.attr(k),c.width+=j+5}),b.selectAll("rect").attr("height",c.height);var f=a._fullLayout._size;c.lx=f.l+f.w*c.x,c.ly=f.t+f.h*(1-c.y);var g="left";s.isRightAnchor(c)&&(c.lx-=c.width,g="right"),s.isCenterAnchor(c)&&(c.lx-=c.width/2,g="center");var h="top";s.isBottomAnchor(c)&&(c.ly-=c.height,h="bottom"),s.isMiddleAnchor(c)&&(c.ly-=c.height/2,h="middle"),c.width=Math.ceil(c.width),c.height=Math.ceil(c.height),c.lx=Math.round(c.lx),c.ly=Math.round(c.ly),n.autoMargin(a,d+"-range-selector",{x:c.x,y:c.y,l:c.width*({right:1,center:.5}[g]||0),r:c.width*({left:1,center:.5}[g]||0),b:c.height*({top:1,middle:.5}[h]||0),t:c.height*({bottom:1,middle:.5}[h]||0)})}var l=a("d3"),m=a("../../plotly"),n=a("../../plots/plots"),o=a("../color"),p=a("../drawing"),q=a("../../lib/svg_text_utils"),r=a("../../plots/cartesian/axis_ids"),s=a("../legend/anchor_utils"),t=a("./constants"),u=a("./get_update_object");b.exports=function(a){var b=a._fullLayout,c=b._infolayer.selectAll(".rangeselector").data(d(a),e);c.enter().append("g").classed("rangeselector",!0),c.exit().remove(),c.style({cursor:"pointer","pointer-events":"all"}),c.each(function(b){var c=l.select(this),d=b,e=d.rangeselector,h=c.selectAll("g.button").data(e.buttons);h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(b){var c=l.select(this),h=u(d,b);b.isActive=f(d,b,h),c.call(g,e,b),c.call(i,e,b),c.on("click",function(){a._dragged||m.relayout(a,h)}),c.on("mouseover",function(){b.isHovered=!0,c.call(g,e,b)}),c.on("mouseout",function(){b.isHovered=!1,c.call(g,e,b)})}),k(a,h,e,d._name),c.attr("transform","translate("+e.lx+","+e.ly+")")})}},{"../../lib/svg_text_utils":646,"../../plotly":658,"../../plots/cartesian/axis_ids":665,"../../plots/plots":723,"../color":533,"../drawing":557,"../legend/anchor_utils":570,"./constants":585,"./get_update_object":588,d3:95}],588:[function(a,b,c){"use strict";function d(a,b){var c,d=a.range,f=new Date(d[1]),g=b.step,h=b.count;switch(b.stepmode){case"backward":c=e.time[g].offset(f,-h).getTime();break;case"todate":var i=e.time[g].offset(f,-(h-1));c=e.time[g].floor(i).getTime()}var j=d[1];return[c,j]}var e=a("d3");b.exports=function(a,b){var c=a._name,e={};if("all"===b.step)e[c+".autorange"]=!0;else{var f=d(a,b);e[c+".range[0]"]=f[0],e[c+".range[1]"]=f[1]}return e}},{d3:95}],589:[function(a,b,c){"use strict";c.moduleType="component",c.name="rangeselector",c.layoutAttributes=a("./attributes"),c.handleDefaults=a("./defaults"),c.draw=a("./draw")},{"./attributes":583,"./defaults":586,"./draw":587}],590:[function(a,b,c){"use strict";var d=a("../color/attributes");b.exports={bgcolor:{valType:"color",dflt:d.background},bordercolor:{valType:"color",dflt:d.defaultLine},borderwidth:{valType:"integer",dflt:0,min:0},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},thickness:{valType:"number",dflt:.15,min:0,max:1},visible:{valType:"boolean",dflt:!0}}},{"../color/attributes":532}],591:[function(a,b,c){"use strict";b.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskColor:"rgba(0,0,0,0.4)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,grabAreaMinOffset:-6,grabAreaMaxOffset:-2,handleWidth:2,handleRadius:1,handleFill:"#fff",handleStroke:"#666"}},{}],592:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c,f){function g(a,b){return d.coerce(h,i,e,a,b)}if(a[c].rangeslider){d.isPlainObject(a[c].rangeslider)||(a[c].rangeslider={});var h=a[c].rangeslider,i=b[c].rangeslider={};if(g("bgcolor",b.plot_bgcolor),g("bordercolor"),g("borderwidth"),g("thickness"),g("visible"),g("range"),i.range&&!b[c].autorange){var j=i.range,k=b[c].range;j[0]=Math.min(j[0],k[0]),j[1]=Math.max(j[1],k[1])}else b[c]._needsExpand=!0;i.visible&&f.forEach(function(a){var c=b[a]||{};c.fixedrange=!0,b[a]=c}),i._input=h}}},{"../../lib":632,"./attributes":590}],593:[function(a,b,c){"use strict";function d(a){return a.xaxis&&a.xaxis[z.name]&&a.xaxis[z.name].visible?a._has("gl2d")?[]:[a.xaxis]:[]}function e(a,b,c,d){var e=a.select("rect."+z.slideBoxClassName).node(),g=a.select("rect."+z.grabAreaMinClassName).node(),h=a.select("rect."+z.grabAreaMaxClassName).node();a.on("mousedown",function(){function i(i){var j,k,s,t=+i.clientX-m;switch(l){case e:s="ew-resize",j=o+t,k=q+t;break;case g:s="col-resize",j=o+t,k=q;break;case h:s="col-resize",j=o,k=q+t;break;default:s="ew-resize",j=n,k=n+t}if(k<j){var u=k;k=j,j=u}d._pixelMin=j,d._pixelMax=k,y(p.select(r),s),f(a,b,c,d)}function j(){r.removeEventListener("mousemove",i),r.removeEventListener("mouseup",j),s.removeElement(r)}var k=p.event,l=k.target,m=k.clientX,n=m-a.node().getBoundingClientRect().left,o=d.d2p(c.range[0]),q=d.d2p(c.range[1]),r=x.coverSlip();r.addEventListener("mousemove",i),r.addEventListener("mouseup",j)})}function f(a,b,c,d){function e(a){return s.constrain(a,d.range[0],d.range[1])}var f=e(d.p2d(d._pixelMin)),g=e(d.p2d(d._pixelMax));window.requestAnimationFrame(function(){q.relayout(b,"xaxis.range",[f,g])})}function g(a,b,c,d){function e(a){return s.constrain(a,0,d._width)}var f=e(d.d2p(c.range[0])),g=e(d.d2p(c.range[1]));a.select("rect."+z.slideBoxClassName).attr("x",f).attr("width",g-f),a.select("rect."+z.maskMinClassName).attr("width",f),a.select("rect."+z.maskMaxClassName).attr("x",g).attr("width",d._width-g),a.select("g."+z.grabberMinClassName).attr("transform","translate("+(f-z.handleWidth-1)+",0)"),a.select("g."+z.grabberMaxClassName).attr("transform","translate("+g+",0)")}function h(a,b,c,d){var e=a.selectAll("rect."+z.bgClassName).data([0]);e.enter().append("rect").classed(z.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var f=d.borderwidth%2===0?d.borderwidth:d.borderwidth-1,g=-d._offsetShift;e.attr({width:d._width+f,height:d._height+f,transform:"translate("+g+","+g+")",fill:d.bgcolor,stroke:d.bordercolor,"stroke-width":d.borderwidth})}function i(a,b,c,d){var e=b._fullLayout,f=e._topdefs.selectAll("#"+d._clipId).data([0]);f.enter().append("clipPath").attr("id",d._clipId).append("rect").attr({x:0,y:0}),f.select("rect").attr({width:d._width,height:d._height})}function j(a,b,c,d){var e=w.getSubplots(b,c),f=b.calcdata,g=a.selectAll("g."+z.rangePlotClassName).data(e,s.identity);g.enter().append("g").attr("class",function(a){return z.rangePlotClassName+" "+a}).call(t.setClipUrl,d._clipId),g.order(),g.exit().remove();var h;g.each(function(a,c){var e=p.select(this),g=0===c,i=w.getFromId(b,a,"y"),j=i._name,l={data:[],layout:{xaxis:{domain:[0,1],range:d.range.slice()},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}}};l.layout[j]={domain:[0,1],range:i.range.slice()},r.supplyDefaults(l);var m=l._fullLayout.xaxis,n=l._fullLayout[j],o={id:a,plotgroup:e,xaxis:m,yaxis:n};g?h=o:(o.mainplot="xy",o.mainplotinfo=h),v.rangePlot(b,o,k(f,a)),g&&o.bg.call(u.fill,d.bgcolor)})}function k(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f.xaxis+f.yaxis===b&&c.push(e)}return c}function l(a,b,c,d){var e=a.selectAll("rect."+z.maskMinClassName).data([0]);e.enter().append("rect").classed(z.maskMinClassName,!0).attr({x:0,y:0}),e.attr({height:d._height,fill:z.maskColor});var f=a.selectAll("rect."+z.maskMaxClassName).data([0]);f.enter().append("rect").classed(z.maskMaxClassName,!0).attr("y",0),f.attr({height:d._height,fill:z.maskColor})}function m(a,b,c,d){var e=a.selectAll("rect."+z.slideBoxClassName).data([0]);e.enter().append("rect").classed(z.slideBoxClassName,!0).attr("y",0).attr("cursor",z.slideBoxCursor),e.attr({height:d._height,fill:z.slideBoxFill})}function n(a,b,c,d){var e=a.selectAll("g."+z.grabberMinClassName).data([0]);e.enter().append("g").classed(z.grabberMinClassName,!0);var f=a.selectAll("g."+z.grabberMaxClassName).data([0]);f.enter().append("g").classed(z.grabberMaxClassName,!0);var g={x:0,width:z.handleWidth,rx:z.handleRadius,fill:z.handleFill,stroke:z.handleStroke,"shape-rendering":"crispEdges"},h={y:d._height/4,height:d._height/2},i=e.selectAll("rect."+z.handleMinClassName).data([0]);i.enter().append("rect").classed(z.handleMinClassName,!0).attr(g),i.attr(h);var j=f.selectAll("rect."+z.handleMaxClassName).data([0]);j.enter().append("rect").classed(z.handleMaxClassName,!0).attr(g),j.attr(h);var k={width:z.grabAreaWidth,y:0,fill:z.grabAreaFill,cursor:z.grabAreaCursor},l=e.selectAll("rect."+z.grabAreaMinClassName).data([0]);l.enter().append("rect").classed(z.grabAreaMinClassName,!0).attr(k),l.attr({x:z.grabAreaMinOffset,height:d._height});var m=f.selectAll("rect."+z.grabAreaMaxClassName).data([0]);m.enter().append("rect").classed(z.grabAreaMaxClassName,!0).attr(k),m.attr({x:z.grabAreaMaxOffset,height:d._height})}function o(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];e.indexOf(z.name)!==-1&&r.autoMargin(a,e)}}var p=a("d3"),q=a("../../plotly"),r=a("../../plots/plots"),s=a("../../lib"),t=a("../drawing"),u=a("../color"),v=a("../../plots/cartesian"),w=a("../../plots/cartesian/axes"),x=a("../dragelement"),y=a("../../lib/setcursor"),z=a("./constants");b.exports=function(a){function b(a){return a._name}var c=a._fullLayout,f=d(c),k=c._infolayer.selectAll("g."+z.containerClassName).data(f,b);k.enter().append("g").classed(z.containerClassName,!0).attr("pointer-events","all"),k.exit().each(function(a){var b=p.select(this),d=a[z.name];b.remove(),c._topdefs.select("#"+d._clipId).remove()}),k.exit().size()&&o(a),0!==f.length&&k.each(function(b){var d=p.select(this),f=b[z.name];f.range||(f._input.range=f.range=w.getAutoRange(b));var k=c.margin,o=c._size,q=b.domain;f._id=z.name+b._id,f._clipId=f._id+"-"+c._uid,f._width=o.w*(q[1]-q[0]),f._height=(c.height-k.b-k.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2);var s=k.l+o.w*q[0],t=c.height-f._height-k.b;d.attr("transform","translate("+s+","+t+")"),d.call(h,a,b,f).call(i,a,b,f).call(j,a,b,f).call(l,a,b,f).call(m,a,b,f).call(n,a,b,f);var u=f.range[0],v=f.range[1],x=v-u;f.p2d=function(a){return a/f._width*x+u},f.d2p=function(a){return(a-u)/x*f._width},e(d,a,b,f),g(d,a,b,f);var y=b._boundingBox?b._boundingBox.height:0;r.autoMargin(a,f._id,{x:0,y:0,l:0,r:0,t:0,b:f._height+c.margin.b+y,pad:15+2*f._offsetShift})})}},{"../../lib":632,"../../lib/setcursor":642,"../../plotly":658,"../../plots/cartesian":671,"../../plots/cartesian/axes":662,"../../plots/plots":723,"../color":533,"../dragelement":555,"../drawing":557,"./constants":591,d3:95}],594:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"rangeslider",layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":590,"./defaults":592,"./draw":593}],595:[function(a,b,c){"use strict";var d=a("../annotations/attributes"),e=a("../../traces/scatter/attributes"),f=a("../../lib/extend").extendFlat,g=e.line;b.exports={_isLinkedToArray:!0,type:{valType:"enumerated",values:["circle","rect","path","line"]},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},xref:f({},d.xref,{}),x0:{valType:"any"},x1:{valType:"any"},yref:f({},d.yref,{}),y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string"},opacity:{valType:"number",min:0,max:1,dflt:1},line:{color:g.color,width:g.width,dash:g.dash},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"}}},{"../../lib/extend":625,"../../traces/scatter/attributes":844,"../annotations/attributes":526}],596:[function(a,b,c){"use strict";function d(a,b,c,d,e){var h="category"===a.type?Number:a.d2c;if(void 0!==b)return[h(b),h(c)];if(d){var i,j,k,l,m,n=1/0,o=-(1/0),p=d.match(f.segmentRE);for("date"===a.type&&(h=g.decodeDate(h)),i=0;i<p.length;i++)j=p[i],k=e[j.charAt(0)].drawn,void 0!==k&&(l=p[i].substr(1).match(f.paramRE),!l||l.length<k||(m=h(l[k]),m<n&&(n=m),m>o&&(o=m)));return o>=n?[n,o]:void 0}}var e=a("../../plots/cartesian/axes"),f=a("./constants"),g=a("./helpers");b.exports=function(a){var b=a._fullLayout,c=b.shapes;if(c.length&&a._fullData.length)for(var g=0;g<c.length;g++){var h,i,j=c[g],k=j.line.width/2;"paper"!==j.xref&&(h=e.getFromId(a,j.xref),i=d(h,j.x0,j.x1,j.path,f.paramIsX),
i&&e.expand(h,i,{ppad:k})),"paper"!==j.yref&&(h=e.getFromId(a,j.yref),i=d(h,j.y0,j.y1,j.path,f.paramIsY),i&&e.expand(h,i,{ppad:k}))}}},{"../../plots/cartesian/axes":662,"./constants":597,"./helpers":600}],597:[function(a,b,c){"use strict";b.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],598:[function(a,b,c){"use strict";var d=a("./shape_defaults");b.exports=function(a,b){for(var c=a.shapes||[],e=b.shapes=[],f=0;f<c.length;f++){var g=c[f]||{},h=d(g,b);e.push(h)}}},{"./shape_defaults":602}],599:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b._shapeUpperLayer.selectAll("path").remove(),b._shapeLowerLayer.selectAll("path").remove(),b._shapeSubplotLayer.selectAll("path").remove();for(var c=0;c<b.shapes.length;c++)e(a,c)}function e(a,b,c,d){if(!r(b)||b===-1){if(!b&&Array.isArray(d))return void f(a,d);if("remove"===d)return void g(a);if(c&&"add"!==d)return void h(a,c,d);b=a._fullLayout.shapes.length,a._fullLayout.shapes.push({})}if(!c&&d){if("remove"===d)return void i(a,b);("add"===d||t.isPlainObject(d))&&j(a,b,d)}k(a,b,c,d)}function f(a,b){a.layout.shapes=b,C(a.layout,a._fullLayout),d(a)}function g(a){delete a.layout.shapes,a._fullLayout.shapes=[],d(a)}function h(a,b,c){for(var d=0;d<a._fullLayout.shapes.length;d++)e(a,d,b,c)}function i(a,b){m(a,b).selectAll('[data-index="'+b+'"]').remove(),a._fullLayout.shapes.splice(b,1),a.layout.shapes.splice(b,1);for(var c=b;c<a._fullLayout.shapes.length;c++)m(a,c).selectAll('[data-index="'+(c+1)+'"]').attr("data-index",c),e(a,c)}function j(a,b,c){a._fullLayout.shapes.splice(b,0,{});var d=t.isPlainObject(c)?t.extendFlat({},c):{text:"New text"};a.layout.shapes?a.layout.shapes.splice(b,0,d):a.layout.shapes=[d];for(var f=a._fullLayout.shapes.length-1;f>b;f--)m(a,f).selectAll('[data-index="'+(f-1)+'"]').attr("data-index",f),e(a,f)}function k(a,b,c,d){function e(c){var d={"data-index":b,"fill-rule":"evenodd",d:o(a,D)},e=D.line.width?D.line.color:"rgba(0,0,0,0)",f=c.append("path").attr(d).style("opacity",D.opacity).call(v.stroke,e).call(v.fill,D.fillcolor).call(w.dashLine,D.line.dash,D.line.width);E&&f.call(w.setClipUrl,"clip"+a._fullLayout._uid+E),a._context.editable&&l(a,f,D,b)}var f,g;m(a,b).selectAll('[data-index="'+b+'"]').remove();var h=a.layout.shapes[b];if(h){var i={xref:h.xref,yref:h.yref},j={};"string"==typeof c&&c?j[c]=d:t.isPlainObject(c)&&(j=c);var k=Object.keys(j);for(f=0;f<k.length;f++){var p=k[f];t.nestedProperty(h,p).set(j[p])}var q=["x0","x1","y0","y1"];for(f=0;f<4;f++){var r=q[f];if(void 0===j[r]&&void 0!==h[r]){var s,x=r.charAt(0),y=u.getFromId(a,u.coerceRef(i,{},a,x)),z=u.getFromId(a,u.coerceRef(h,{},a,x)),C=h[r];void 0!==j[x+"ref"]&&(y?(s=A.dataToLinear(y)(C),C=(s-y.range[0])/(y.range[1]-y.range[0])):C=(C-z.domain[0])/(z.domain[1]-z.domain[0]),z?(s=z.range[0]+C*(z.range[1]-z.range[0]),C=A.linearToData(z)(s)):C=y.domain[0]+C*(y.domain[1]-y.domain[0])),h[r]=C}}var D=B(h,a._fullLayout);a._fullLayout.shapes[b]=D;var E;if("below"!==D.layer)E=(D.xref+D.yref).replace(/paper/g,""),e(a._fullLayout._shapeUpperLayer);else if("paper"===D.xref&&"paper"===D.yref)E="",e(a._fullLayout._shapeLowerLayer);else{var F,G=a._fullLayout._plots||{},H=Object.keys(G);for(f=0,g=H.length;f<g;f++)F=G[H[f]],E=H[f],n(a,D,F)&&e(F.shapelayer)}}}function l(a,b,c,d){function e(a){var c=X.right-X.left,d=X.bottom-X.top,e=a.clientX-X.left,f=a.clientY-X.top,g=c>U&&d>V&&!a.shiftKey?x.getCursor(e/c,1-f/d):"move";y(b,g),T=g.split("-")[0]}function f(b){N=u.getFromId(a,c.xref),O=u.getFromId(a,c.yref),P=A.getDataToPixel(a,N),Q=A.getDataToPixel(a,O,!0),R=A.getPixelToData(a,N),S=A.getPixelToData(a,O,!0);var f="shapes["+d+"]";"path"===c.type?(L=c.path,M=f+".path"):(k=P(c.x0),l=Q(c.y0),m=P(c.x1),n=Q(c.y1),p=f+".x0",r=f+".y0",t=f+".x1",v=f+".y1"),k<m?(B=k,F=f+".x0",J="x0",C=m,G=f+".x1",K="x1"):(B=m,F=f+".x1",J="x1",C=k,G=f+".x0",K="x0"),l<n?(w=l,D=f+".y0",H="y0",z=n,E=f+".y1",I="y1"):(w=n,D=f+".y1",H="y1",z=l,E=f+".y0",I="y0"),j={},e(b),W.moveFn="move"===T?h:i}function g(c){y(b),c&&s.relayout(a,j)}function h(d,e){if("path"===c.type){var f=function(a){return R(P(a)+d)};N&&"date"===N.type&&(f=A.encodeDate(f));var g=function(a){return S(Q(a)+e)};O&&"date"===O.type&&(g=A.encodeDate(g)),c.path=q(L,f,g),j[M]=c.path}else j[p]=c.x0=R(k+d),j[r]=c.y0=S(l+e),j[t]=c.x1=R(m+d),j[v]=c.y1=S(n+e);b.attr("d",o(a,c))}function i(d,e){if("path"===c.type){var f=function(a){return R(P(a)+d)};N&&"date"===N.type&&(f=A.encodeDate(f));var g=function(a){return S(Q(a)+e)};O&&"date"===O.type&&(g=A.encodeDate(g)),c.path=q(L,f,g),j[M]=c.path}else{var h=~T.indexOf("n")?w+e:w,i=~T.indexOf("s")?z+e:z,k=~T.indexOf("w")?B+d:B,l=~T.indexOf("e")?C+d:C;i-h>V&&(j[D]=c[H]=S(h),j[E]=c[I]=S(i)),l-k>U&&(j[F]=c[J]=R(k),j[G]=c[K]=R(l))}b.attr("d",o(a,c))}var j,k,l,m,n,p,r,t,v,w,z,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=10,V=10,W={setCursor:e,element:b.node(),prepFn:f,doneFn:g},X=W.element.getBoundingClientRect();x.init(W)}function m(a,b){var c=a._fullLayout.shapes[b],d=a._fullLayout._shapeUpperLayer;return c?"below"===c.layer&&(d="paper"===c.xref&&"paper"===c.yref?a._fullLayout._shapeLowerLayer:a._fullLayout._shapeSubplotLayer):t.log("getShapeLayer: undefined shape: index",b),d}function n(a,b,c){var d=u.getFromId(a,c.id,"x")._id,e=u.getFromId(a,c.id,"y")._id,f="below"===b.layer,g=d===b.xref||e===b.yref,h=!!c.shapelayer;return f&&g&&h}function o(a,b){var c,d,e,f,g=b.type,h=u.getFromId(a,b.xref),i=u.getFromId(a,b.yref),j=a._fullLayout._size;if(h?(c=A.dataToLinear(h),d=function(a){return h._offset+h.l2p(c(a,!0))}):d=function(a){return j.l+j.w*a},i?(e=A.dataToLinear(i),f=function(a){return i._offset+i.l2p(e(a,!0))}):f=function(a){return j.t+j.h*(1-a)},"path"===g)return h&&"date"===h.type&&(d=A.decodeDate(d)),i&&"date"===i.type&&(f=A.decodeDate(f)),p(b.path,d,f);var k=d(b.x0),l=d(b.x1),m=f(b.y0),n=f(b.y1);if("line"===g)return"M"+k+","+m+"L"+l+","+n;if("rect"===g)return"M"+k+","+m+"H"+l+"V"+n+"H"+k+"Z";var o=(k+l)/2,q=(m+n)/2,r=Math.abs(o-k),s=Math.abs(q-m),t="A"+r+","+s,v=o+r+","+q,w=o+","+(q-s);return"M"+v+t+" 0 1,1 "+w+t+" 0 0,1 "+v+"Z"}function p(a,b,c){return a.replace(z.segmentRE,function(a){var d=0,e=a.charAt(0),f=z.paramIsX[e],g=z.paramIsY[e],h=z.numParams[e],i=a.substr(1).replace(z.paramRE,function(a){return f[d]?a=b(a):g[d]&&(a=c(a)),d++,d>h&&(a="X"),a});return d>h&&(i=i.replace(/[\s,]*X.*/,""),t.log("Ignoring extra params in segment "+a)),e+i})}function q(a,b,c){return a.replace(z.segmentRE,function(a){var d=0,e=a.charAt(0),f=z.paramIsX[e],g=z.paramIsY[e],h=z.numParams[e],i=a.substr(1).replace(z.paramRE,function(a){return d>=h?a:(f[d]?a=b(a):g[d]&&(a=c(a)),d++,a)});return e+i})}var r=a("fast-isnumeric"),s=a("../../plotly"),t=a("../../lib"),u=a("../../plots/cartesian/axes"),v=a("../color"),w=a("../drawing"),x=a("../dragelement"),y=a("../../lib/setcursor"),z=a("./constants"),A=a("./helpers"),B=a("./shape_defaults"),C=a("./defaults");b.exports={draw:d,drawOne:e}},{"../../lib":632,"../../lib/setcursor":642,"../../plotly":658,"../../plots/cartesian/axes":662,"../color":533,"../dragelement":555,"../drawing":557,"./constants":597,"./defaults":598,"./helpers":600,"./shape_defaults":602,"fast-isnumeric":104}],600:[function(a,b,c){"use strict";c.dataToLinear=function(a){return"category"===a.type?a.c2l:a.d2l},c.linearToData=function(a){return"category"===a.type?a.l2c:a.l2d},c.decodeDate=function(a){return function(b){return b.replace&&(b=b.replace("_"," ")),a(b)}},c.encodeDate=function(a){return function(b){return a(b).replace(" ","_")}},c.getDataToPixel=function(a,b,d){var e,f=a._fullLayout._size;if(b){var g=c.dataToLinear(b);e=function(a){return b._offset+b.l2p(g(a,!0))},"date"===b.type&&(e=c.decodeDate(e))}else e=d?function(a){return f.t+f.h*(1-a)}:function(a){return f.l+f.w*a};return e},c.getPixelToData=function(a,b,d){var e,f=a._fullLayout._size;if(b){var g=c.linearToData(b);e=function(a){return g(b.p2l(a-b._offset))}}else e=d?function(a){return 1-(a-f.t)/f.h}:function(a){return(a-f.l)/f.w};return e}},{}],601:[function(a,b,c){"use strict";c.moduleType="component",c.name="shapes",c.layoutAttributes=a("./attributes"),c.supplyLayoutDefaults=a("./defaults"),c.calcAutorange=a("./calc_autorange");var d=a("./draw");c.draw=d.draw,c.drawOne=d.drawOne},{"./attributes":595,"./calc_autorange":596,"./defaults":598,"./draw":599}],602:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./attributes"),g=a("./helpers");b.exports=function(a,b){function c(b,c){return d.coerce(a,h,f,b,c)}var h={};c("layer"),c("opacity"),c("fillcolor"),c("line.color"),c("line.width"),c("line.dash");for(var i=a.path?"path":"rect",j=c("type",i),k=["x","y"],l=0;l<2;l++){var m=k[l],n={_fullLayout:b},o=e.coerceRef(a,h,n,m);if("path"!==j){var p=.25,q=.75;if("paper"!==o){var r=e.getFromId(n,o),s=g.linearToData(r);p=s(r.range[0]+p*(r.range[1]-r.range[0])),q=s(r.range[0]+q*(r.range[1]-r.range[0]))}c(m+"0",p),c(m+"1",q)}}return"path"===j?c("path"):d.noneOrAll(a,h,["x0","x1","y0","y1"]),h}},{"../../lib":632,"../../plots/cartesian/axes":662,"./attributes":595,"./helpers":600}],603:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../plots/pad_attributes"),f=a("../../lib/extend").extendFlat,g=a("../../lib/extend").extendDeep,h=a("../../plots/animation_attributes"),i=a("./constants"),j={_isLinkedToArray:!0,method:{valType:"enumerated",values:["restyle","relayout","animate","update"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"}};b.exports={visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:j,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:g({},e,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:f({},d,{})},font:f({},d,{}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}},{"../../lib/extend":625,"../../plots/animation_attributes":659,"../../plots/font_attributes":683,"../../plots/pad_attributes":722,"./constants":604}],604:[function(a,b,c){"use strict";b.exports={name:"sliders",itemName:"slider",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,fontSizeToHeight:1.3,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],605:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,g,c,d)}var h=e(a,b),i=d("visible",h.length>0);if(i){d("active"),d("x"),d("y"),f.noneOrAll(a,b,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),f.coerceFont(d,"font",c.font);var j=d("currentvalue.visible");j&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),f.coerceFont(d,"currentvalue.font",b.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}}function e(a,b){function c(a,b){return f.coerce(d,e,j,a,b)}for(var d,e,g=a.steps||[],h=b.steps=[],i=0;i<g.length;i++)d=g[i],e={},f.isPlainObject(d)&&Array.isArray(d.args)&&(c("method"),c("args"),c("label","step-"+i),c("value",e.label),h.push(e));return h}var f=a("../../lib"),g=a("./attributes"),h=a("./constants"),i=h.name,j=g.steps;b.exports=function(a,b){for(var c=Array.isArray(a[i])?a[i]:[],e=b[i]=[],f=0;f<c.length;f++){var g=c[f]||{},h={};d(g,h,b),h._input=g,h._index=f,e.push(h)}}},{"../../lib":632,"./attributes":603,"./constants":604}],606:[function(a,b,c){"use strict";function d(a){for(var b=a[D.name],c=[],d=0;d<b.length;d++){var e=b[d];e.visible&&e.steps.length&&c.push(e)}return c}function e(a){return a._index}function f(a,b){var c=a._tester.selectAll("g."+D.labelGroupClass).data(b.steps);c.enter().append("g").classed(D.labelGroupClass,!0);var d=0,e=0;if(c.each(function(a){var c=w.select(this),f=j(c,{step:a},b),g=f.node()&&A.bBox(f.node()).width||0;e=f.node()&&A.bBox(f.node()).height||0,d=Math.max(d,g)}),c.remove(),b.inputAreaWidth=Math.max(D.railWidth,D.gripHeight),b.currentValueMaxWidth=0,b.currentValueHeight=0,b.currentValueTotalHeight=0,b.currentvalue.visible){var f=a._tester.append("g");c.each(function(a){var c=h(f,b,a.label),d=c.node()&&A.bBox(c.node())||{width:0,height:0};b.currentValueMaxWidth=Math.max(b.currentValueMaxWidth,Math.ceil(d.width)),b.currentValueHeight=Math.max(b.currentValueHeight,Math.ceil(d.height))}),b.currentValueTotalHeight=b.currentValueHeight+b.currentvalue.offset,f.remove()}var g=a._fullLayout._size;b.lx=g.l+g.w*b.x,b.ly=g.t+g.h*(1-b.y),"fraction"===b.lenmode?b.outerLength=Math.round(g.w*b.len):b.outerLength=b.len,b.lenPad=Math.round(.5*D.gripWidth),b.inputAreaStart=0,b.inputAreaLength=Math.round(b.outerLength-b.pad.l-b.pad.r);var i=b.inputAreaLength-2*D.stepInset,k=i/(b.steps.length-1),l=d+D.labelPadding;b.labelStride=Math.max(1,Math.ceil(l/k)),b.labelHeight=e,b.height=b.currentValueTotalHeight+D.tickOffset+b.ticklen+D.labelOffset+b.labelHeight+b.pad.t+b.pad.b;var m="left";C.isRightAnchor(b)&&(b.lx-=b.outerLength,m="right"),C.isCenterAnchor(b)&&(b.lx-=b.outerLength/2,m="center");var n="top";C.isBottomAnchor(b)&&(b.ly-=b.height,n="bottom"),C.isMiddleAnchor(b)&&(b.ly-=b.height/2,n="middle"),b.outerLength=Math.ceil(b.outerLength),b.height=Math.ceil(b.height),b.lx=Math.round(b.lx),b.ly=Math.round(b.ly),x.autoMargin(a,D.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:b.outerLength*({right:1,center:.5}[m]||0),r:b.outerLength*({left:1,center:.5}[m]||0),b:b.height*({top:1,middle:.5}[n]||0),t:b.height*({bottom:1,middle:.5}[n]||0)})}function g(a,b,c){b.call(h,c).call(u,c).call(k,c).call(o,c).call(t,a,c).call(i,a,c),y.setTranslate(b,c.lx+c.pad.l,c.ly+c.pad.t),b.call(q,c,c.active/(c.steps.length-1),!1),b.call(h,c)}function h(a,b,c){if(b.currentvalue.visible){var d,e,f=a.selectAll("text").data([0]);switch(b.currentvalue.xanchor){case"right":d=b.inputAreaLength-D.currentValueInset-b.currentValueMaxWidth,e="left";break;case"center":d=.5*b.inputAreaLength,e="middle";break;default:d=D.currentValueInset,e="left"}f.enter().append("text").classed(D.labelClass,!0).classed("user-select-none",!0).attr("text-anchor",e);var g=b.currentvalue.prefix?b.currentvalue.prefix:"";if("string"==typeof c)g+=c;else{var h=b.steps[b.active].label;g+=h}return b.currentvalue.suffix&&(g+=b.currentvalue.suffix),f.call(A.font,b.currentvalue.font).text(g).call(B.convertToTspans),y.setTranslate(f,d,b.currentValueHeight),f}}function i(a,b,c){var d=a.selectAll("rect."+D.gripRectClass).data([0]);d.enter().append("rect").classed(D.gripRectClass,!0).call(n,b,a,c).style("pointer-events","all"),d.attr({width:D.gripWidth,height:D.gripHeight,rx:D.gripRadius,ry:D.gripRadius}).call(z.stroke,c.bordercolor).call(z.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px")}function j(a,b,c){var d=a.selectAll("text").data([0]);return d.enter().append("text").classed(D.labelClass,!0).classed("user-select-none",!0).attr("text-anchor","middle"),d.call(A.font,c.font).text(b.step.label).call(B.convertToTspans),d}function k(a,b){var c=a.selectAll("g."+D.labelsClass).data([0]);c.enter().append("g").classed(D.labelsClass,!0);var d=c.selectAll("g."+D.labelGroupClass).data(b.labelSteps);d.enter().append("g").classed(D.labelGroupClass,!0),d.exit().remove(),d.each(function(a){var c=w.select(this);c.call(j,a,b),y.setTranslate(c,r(b,a.fraction),D.tickOffset+b.ticklen+b.labelHeight+D.labelOffset+b.currentValueTotalHeight)})}function l(a,b,c,d,e){var f=Math.round(d*(c.steps.length-1));f!==c.active&&m(a,b,c,f,!0,e)}function m(a,b,c,d,e,f){c._input.active=c.active=d;var g=c.steps[c.active];b.call(q,c,c.active/(c.steps.length-1),f),b.call(h,c),g&&g.method&&e&&(b._nextMethod?(b._nextMethod.step=g,b._nextMethod.doCallback=e,b._nextMethod.doTransition=f):(b._nextMethod={step:g,doCallback:e,doTransition:f},b._nextMethodRaf=window.requestAnimationFrame(function(){var c=b._nextMethod.step;c.method&&(x.executeAPICommand(a,c.method,c.args),b._nextMethod=null,b._nextMethodRaf=null)})))}function n(a,b,c,d){var e=c.node(),f=w.select(b);a.on("mousedown",function(){var a=c.select("."+D.gripRectClass);w.event.stopPropagation(),w.event.preventDefault(),a.call(z.fill,d.activebgcolor);var g=s(d,w.mouse(e)[0]);l(b,c,d,g,!0),d._dragging=!0,f.on("mousemove",function(){var a=s(d,w.mouse(e)[0]);l(b,c,d,a,!1)}),f.on("mouseup",function(){d._dragging=!1,a.call(z.fill,d.bgcolor),f.on("mouseup",null),f.on("mousemove",null)})})}function o(a,b){var c=a.selectAll("rect."+D.tickRectClass).data(b.steps);c.enter().append("rect").classed(D.tickRectClass,!0),c.exit().remove(),c.attr({width:b.tickwidth+"px","shape-rendering":"crispEdges"}),c.each(function(a,c){var d=c%b.labelStride===0,e=w.select(this);e.attr({height:d?b.ticklen:b.minorticklen}).call(z.fill,d?b.tickcolor:b.tickcolor),y.setTranslate(e,r(b,c/(b.steps.length-1))-.5*b.tickwidth,(d?D.tickOffset:D.minorTickOffset)+b.currentValueTotalHeight)})}function p(a){a.labelSteps=[];for(var b=0,c=a.steps.length,d=b;d<c;d+=a.labelStride)a.labelSteps.push({fraction:d/(c-1),step:a.steps[d]})}function q(a,b,c,d){var e=a.select("rect."+D.gripRectClass),f=r(b,c);if(!b._invokingCommand){var g=e;d&&b.transition.duration>0&&(g=g.transition().duration(b.transition.duration).ease(b.transition.easing)),g.attr("transform","translate("+(f-.5*D.gripWidth)+","+b.currentValueTotalHeight+")")}}function r(a,b){return a.inputAreaStart+D.stepInset+(a.inputAreaLength-2*D.stepInset)*Math.min(1,Math.max(0,b))}function s(a,b){return Math.min(1,Math.max(0,(b-D.stepInset-a.inputAreaStart)/(a.inputAreaLength-2*D.stepInset-2*a.inputAreaStart)))}function t(a,b,c){var d=a.selectAll("rect."+D.railTouchRectClass).data([0]);d.enter().append("rect").classed(D.railTouchRectClass,!0).call(n,b,a,c).style("pointer-events","all"),d.attr({width:c.inputAreaLength,height:Math.max(c.inputAreaWidth,D.tickOffset+c.ticklen+c.labelHeight)}).call(z.fill,c.bgcolor).attr("opacity",0),y.setTranslate(d,0,c.currentValueTotalHeight)}function u(a,b){var c=a.selectAll("rect."+D.railRectClass).data([0]);c.enter().append("rect").classed(D.railRectClass,!0);var d=b.inputAreaLength-2*D.railInset;c.attr({width:d,height:D.railWidth,rx:D.railRadius,ry:D.railRadius,"shape-rendering":"crispEdges"}).call(z.stroke,b.bordercolor).call(z.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px"),y.setTranslate(c,D.railInset,.5*(b.inputAreaWidth-D.railWidth)+b.currentValueTotalHeight)}function v(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];e.indexOf(D.autoMarginIdRoot)!==-1&&x.autoMargin(a,e)}}var w=a("d3"),x=a("../../plots/plots"),y=a("../../lib"),z=a("../color"),A=a("../drawing"),B=a("../../lib/svg_text_utils"),C=a("../legend/anchor_utils"),D=a("./constants");b.exports=function(a){var b=a._fullLayout,c=d(b),h=b._infolayer.selectAll("g."+D.containerClassName).data(c.length>0?[0]:[]);if(h.enter().append("g").classed(D.containerClassName,!0).style("cursor","ew-resize"),h.exit().remove(),h.exit().size()&&v(a),0!==c.length){var i=h.selectAll("g."+D.groupClassName).data(c,e);i.enter().append("g").classed(D.groupClassName,!0),i.exit().each(function(b){w.select(this).remove(),b._commandObserver.remove(),delete b._commandObserver,x.autoMargin(a,D.autoMarginIdRoot+b._index)});for(var j=0;j<c.length;j++){var k=c[j];f(a,k)}i.each(function(b){if(!(b.steps.length<2)){var c=w.select(this);p(b),x.manageCommandObserver(a,b,b.steps,function(d){b.active!==d.index&&(b._dragging||m(a,c,b,d.index,!1,!0))}),g(a,w.select(this),b)}})}}},{"../../lib":632,"../../lib/svg_text_utils":646,"../../plots/plots":723,"../color":533,"../drawing":557,"../legend/anchor_utils":570,"./constants":604,d3:95}],607:[function(a,b,c){"use strict";c.moduleType="component",c.name="sliders",c.layoutAttributes=a("./attributes"),c.supplyLayoutDefaults=a("./defaults"),c.draw=a("./draw")},{"./attributes":603,"./defaults":605,"./draw":606}],608:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../plotly"),g=a("../../plots/plots"),h=a("../../lib"),i=a("../drawing"),j=a("../color"),k=a("../../lib/svg_text_utils"),l=b.exports={};l.draw=function(a,b,c){function l(a){h.syncOrAsync([m,n],a)}function m(b){return b.attr("transform",v?"rotate("+[v.rotate,u.x,u.y]+") translate(0, "+v.offset+")":null),b.style({"font-family":y,"font-size":d.round(z,2)+"px",fill:j.rgb(A),opacity:B*j.opacity(A),"font-weight":g.fontWeight}).attr(u).call(k.convertToTspans).attr(u),b.selectAll("tspan.line").attr(u),g.previousPromises(a)}function n(a){var b=d.select(a.node().parentNode);if(t&&t.selection&&t.side&&D){b.attr("transform",null);var c=0,f={left:"right",right:"left",top:"bottom",bottom:"top"}[t.side],g=["left","top"].indexOf(t.side)!==-1?-1:1,j=e(t.pad)?t.pad:2,k=i.bBox(b.node()),l={left:0,top:0,right:x.width,bottom:x.height},m=t.maxShift||(l[t.side]-k[t.side])*("left"===t.side||"top"===t.side?-1:1);if(m<0?c=m:(k.left-=t.offsetLeft,k.right-=t.offsetLeft,k.top-=t.offsetTop,k.bottom-=t.offsetTop,t.selection.each(function(){var a=i.bBox(this);h.bBoxIntersect(k,a,j)&&(c=Math.max(c,g*(a[t.side]-k[f])+j))}),c=Math.min(m,c)),c>0||m<0){var n={left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[t.side];b.attr("transform","translate("+n+")")}}}function o(){B=0,C=!0,D=F,x._infolayer.select("."+b).attr({"data-unformatted":D}).text(D).on("mouseover.opacity",function(){d.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(1e3).style("opacity",0)})}var p=c.propContainer,q=c.propName,r=c.traceIndex,s=c.dfltName,t=c.avoid||{},u=c.attributes,v=c.transform,w=c.containerGroup,x=a._fullLayout,y=p.titlefont.family,z=p.titlefont.size,A=p.titlefont.color,B=1,C=!1,D=p.title.trim();""===D&&(B=0),D.match(/Click to enter .+ title/)&&(B=.2,C=!0),w||(w=x._infolayer.selectAll(".g-"+b).data([0]),w.enter().append("g").classed("g-"+b,!0));var E=w.selectAll("text").data([0]);E.enter().append("text"),E.text(D).attr("class",b),E.attr({"data-unformatted":D}).call(l);var F="Click to enter "+s+" title";a._context.editable?(D||o(),E.call(k.makeEditable).on("edit",function(b){void 0!==r?f.restyle(a,q,b,r):f.relayout(a,q,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(l)}).on("input",function(a){this.text(a||" ").attr(u).selectAll("tspan.line").attr(u)})):D&&!D.match(/Click to enter .+ title/)||E.remove(),E.classed("js-placeholder",C)}},{"../../lib":632,"../../lib/svg_text_utils":646,"../../plotly":658,"../../plots/plots":723,"../color":533,"../drawing":557,d3:95,"fast-isnumeric":104}],609:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat,g=a("../../plots/pad_attributes"),h={_isLinkedToArray:!0,method:{valType:"enumerated",values:["restyle","relayout","animate","update"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""}};b.exports={_isLinkedToArray:!0,visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:h,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:f({},g,{}),font:f({},d,{}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:e.borderLine},borderwidth:{valType:"number",min:0,dflt:1}}},{"../../lib/extend":625,"../../plots/font_attributes":683,"../../plots/pad_attributes":722,"../color/attributes":532}],610:[function(a,b,c){"use strict";b.exports={name:"updatemenus",itemName:"updatemenu",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,fontSizeToHeight:1.3,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF"}},{}],611:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,g,c,d)}var h=e(a,b),i=d("visible",h.length>0);i&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),f.noneOrAll(a,b,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),f.coerceFont(d,"font",c.font),d("bgcolor",c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function e(a,b){function c(a,b){return f.coerce(d,e,j,a,b)}for(var d,e,g=a.buttons||[],h=b.buttons=[],i=0;i<g.length;i++)d=g[i],e={},f.isPlainObject(d)&&Array.isArray(d.args)&&(c("method"),c("args"),c("label"),e._index=i,h.push(e));return h}var f=a("../../lib"),g=a("./attributes"),h=a("./constants"),i=h.name,j=g.buttons;b.exports=function(a,b){for(var c=Array.isArray(a[i])?a[i]:[],e=b[i]=[],f=0;f<c.length;f++){var g=c[f]||{},h={};d(g,h,b),h._input=g,h._index=f,e.push(h)}}},{"../../lib":632,"./attributes":609,"./constants":610}],612:[function(a,b,c){"use strict";function d(a){for(var b=a[A.name],c=[],d=0;d<b.length;d++){var e=b[d];e.visible&&c.push(e)}return c}function e(a){return a._index}function f(a,b){var c=+a.attr(A.menuIndexAttrName);return c===b._index}function g(a,b,c,d){var e=b.selectAll("g."+A.headerClassName).data([0]);e.enter().append("g").classed(A.headerClassName,!0).style("pointer-events","all");var g=d.active,i=d.buttons[g]||A.blankHeaderOpts,k={y:d.pad.t,yPad:0,x:d.pad.l,xPad:0,index:0},l={width:d.headerWidth,height:d.headerHeight};e.call(j,d,i).call(q,d,k,l);var m=b.selectAll("text."+A.headerArrowClassName).data([0]);m.enter().append("text").classed(A.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(x.font,d.font).text("▼"),m.attr({x:d.headerWidth-A.arrowOffsetX+d.pad.l,y:d.headerHeight/2+A.textOffsetY+d.pad.t}),e.on("click",function(){c.call(r),c.attr(A.menuIndexAttrName,f(c,d)?"-1":String(d._index)),h(a,b,c,d)}),e.on("mouseover",function(){e.call(n)}),e.on("mouseout",function(){e.call(o,d)}),v.setTranslate(b,d.lx,d.ly)}function h(a,b,c,d){c||(c=b,c.attr("pointer-events","all"));var e="-1"!==c.attr(A.menuIndexAttrName)||"buttons"===d.type?d.buttons:[],f="dropdown"===d.type?A.dropdownButtonClassName:A.buttonClassName,g=c.selectAll("g."+f).data(e),h=g.enter().append("g").classed(f,!0),k=g.exit();"dropdown"===d.type?(h.attr("opacity","0").transition().attr("opacity","1"),k.transition().attr("opacity","0").remove()):k.remove();var l=0,p=0,r=["up","down"].indexOf(d.direction)!==-1;"dropdown"===d.type&&(r?p=d.headerHeight+A.gapButtonHeader:l=d.headerWidth+A.gapButtonHeader),"dropdown"===d.type&&"up"===d.direction&&(p=-A.gapButtonHeader+A.gapButton-d.openHeight),"dropdown"===d.type&&"left"===d.direction&&(l=-A.gapButtonHeader+A.gapButton-d.openWidth);var s={x:l+d.pad.l,y:p+d.pad.t,yPad:A.gapButton,xPad:A.gapButton,index:0};g.each(function(e,f){var h=t.select(this);h.call(j,d,e).call(q,d,s),h.on("click",function(){i(a,d,e,b,c,f),u.executeAPICommand(a,e.method,e.args)}),h.on("mouseover",function(){h.call(n)}),h.on("mouseout",function(){h.call(o,d),g.call(m,d)})}),g.call(m,d),v.setTranslate(c,d.lx,d.ly)}function i(a,b,c,d,e,f,i){b._input.active=b.active=f,"dropdown"===b.type&&(e.attr(A.menuIndexAttrName,"-1"),g(a,d,e,b)),i&&"buttons"!==b.type||h(a,d,e,b)}function j(a,b,c){a.call(k,b).call(l,b,c)}function k(a,b){var c=a.selectAll("rect").data([0]);c.enter().append("rect").classed(A.itemRectClassName,!0).attr({rx:A.rx,ry:A.ry,"shape-rendering":"crispEdges"}),c.call(w.stroke,b.bordercolor).call(w.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px")}function l(a,b,c){var d=a.selectAll("text").data([0]);d.enter().append("text").classed(A.itemTextClassName,!0).classed("user-select-none",!0).attr("text-anchor","start"),d.call(x.font,b.font).text(c.label).call(y.convertToTspans)}function m(a,b){var c=b.active;a.each(function(a,d){var e=t.select(this);d===c&&b.showactive&&e.select("rect."+A.itemRectClassName).call(w.fill,A.activeColor)})}function n(a){a.select("rect."+A.itemRectClassName).call(w.fill,A.hoverColor)}function o(a,b){a.select("rect."+A.itemRectClassName).call(w.fill,b.bgcolor)}function p(a,b){b.width1=0,b.height1=0,b.heights=[],b.widths=[],b.totalWidth=0,b.totalHeight=0,b.openWidth=0,b.openHeight=0,b.lx=0,b.ly=0;var c=a._tester.selectAll("g."+A.dropdownButtonClassName).data(b.buttons);c.enter().append("g").classed(A.dropdownButtonClassName,!0);var d=["up","down"].indexOf(b.direction)!==-1;c.each(function(a,c){var e=t.select(this);e.call(j,b,a);var f=e.select("."+A.itemTextClassName),g=f.selectAll("tspan"),h=f.node()&&x.bBox(f.node()).width,i=Math.max(h+A.textPadX,A.minWidth),k=b.font.size*A.fontSizeToHeight,l=g[0].length||1,m=Math.max(k*l,A.minHeight)+A.textOffsetY;m=Math.ceil(m),i=Math.ceil(i),b.widths[c]=i,b.heights[c]=m,b.height1=Math.max(b.height1,m),b.width1=Math.max(b.width1,i),d?(b.totalWidth=Math.max(b.totalWidth,i),b.openWidth=b.totalWidth,b.totalHeight+=m+A.gapButton,b.openHeight+=m+A.gapButton):(b.totalWidth+=i+A.gapButton,b.openWidth+=i+A.gapButton,b.totalHeight=Math.max(b.totalHeight,m),b.openHeight=b.totalHeight)}),d?b.totalHeight-=A.gapButton:b.totalWidth-=A.gapButton,b.headerWidth=b.width1+A.arrowPadX,b.headerHeight=b.height1,"dropdown"===b.type&&(d?(b.width1+=A.arrowPadX,b.totalHeight=b.height1):b.totalWidth=b.width1,b.totalWidth+=A.arrowPadX),
c.remove();var e=b.totalWidth+b.pad.l+b.pad.r,f=b.totalHeight+b.pad.t+b.pad.b,g=a._fullLayout._size;b.lx=g.l+g.w*b.x,b.ly=g.t+g.h*(1-b.y);var h="left";z.isRightAnchor(b)&&(b.lx-=e,h="right"),z.isCenterAnchor(b)&&(b.lx-=e/2,h="center");var i="top";z.isBottomAnchor(b)&&(b.ly-=f,i="bottom"),z.isMiddleAnchor(b)&&(b.ly-=f/2,i="middle"),b.totalWidth=Math.ceil(b.totalWidth),b.totalHeight=Math.ceil(b.totalHeight),b.lx=Math.round(b.lx),b.ly=Math.round(b.ly),u.autoMargin(a,A.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:e*({right:1,center:.5}[h]||0),r:e*({left:1,center:.5}[h]||0),b:f*({top:1,middle:.5}[i]||0),t:f*({bottom:1,middle:.5}[i]||0)})}function q(a,b,c,d){d=d||{};var e=a.select("."+A.itemRectClassName),f=a.select("."+A.itemTextClassName),g=f.selectAll("tspan"),h=b.borderwidth,i=c.index;v.setTranslate(a,h+c.x,h+c.y);var j=["up","down"].indexOf(b.direction)!==-1;e.attr({x:0,y:0,width:d.width||(j?b.width1:b.widths[i]),height:d.height||(j?b.heights[i]:b.height1)});var k=b.font.size*A.fontSizeToHeight,l=g[0].length||1,m=(l-1)*k/4,n={x:A.textOffsetX,y:b.heights[i]/2-m+A.textOffsetY};f.attr(n),g.attr(n),j?c.y+=b.heights[i]+c.yPad:c.x+=b.widths[i]+c.xPad,c.index++}function r(a){a.selectAll("g."+A.dropdownButtonClassName).remove()}function s(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];e.indexOf(A.autoMarginIdRoot)!==-1&&u.autoMargin(a,e)}}var t=a("d3"),u=a("../../plots/plots"),v=a("../../lib"),w=a("../color"),x=a("../drawing"),y=a("../../lib/svg_text_utils"),z=a("../legend/anchor_utils"),A=a("./constants");b.exports=function(a){var b=a._fullLayout,c=d(b),j=b._infolayer.selectAll("g."+A.containerClassName).data(c.length>0?[0]:[]);if(j.enter().append("g").classed(A.containerClassName,!0).style("cursor","pointer"),j.exit().remove(),j.exit().size()&&s(a),0!==c.length){var k=j.selectAll("g."+A.headerGroupClassName).data(c,e);k.enter().append("g").classed(A.headerGroupClassName,!0);var l=j.selectAll("g."+A.dropdownButtonGroupClassName).data([0]);l.enter().append("g").classed(A.dropdownButtonGroupClassName,!0).style("pointer-events","all"),k.enter().size()&&l.call(r).attr(A.menuIndexAttrName,"-1"),k.exit().each(function(b){t.select(this).remove(),l.call(r).attr(A.menuIndexAttrName,"-1"),u.autoMargin(a,A.autoMarginIdRoot+b._index)});for(var m=0;m<c.length;m++){var n=c[m];p(a,n)}k.each(function(b){var c=t.select(this),d="dropdown"===b.type?l:null;u.manageCommandObserver(a,b,b.buttons,function(e){i(a,b,b.buttons[e.index],c,d,e.index,!0)}),"dropdown"===b.type?(g(a,c,l,b),f(l,b)&&h(a,c,l,b)):h(a,c,null,b)})}}},{"../../lib":632,"../../lib/svg_text_utils":646,"../../plots/plots":723,"../color":533,"../drawing":557,"../legend/anchor_utils":570,"./constants":610,d3:95}],613:[function(a,b,c){"use strict";c.moduleType="component",c.name="updatemenus",c.layoutAttributes=a("./attributes"),c.supplyLayoutDefaults=a("./defaults"),c.draw=a("./draw")},{"./attributes":609,"./defaults":611,"./draw":612}],614:[function(a,b,c){"use strict";b.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],615:[function(a,b,c){"use strict";b.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],616:[function(a,b,c){"use strict";b.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],617:[function(a,b,c){"use strict";b.exports={entityToUnicode:{mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},unicodeToEntity:{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#x27","/":"#x2F"}}},{}],618:[function(a,b,c){"use strict";c.xmlns="http://www.w3.org/2000/xmlns/",c.svg="http://www.w3.org/2000/svg",c.xlink="http://www.w3.org/1999/xlink",c.svgAttrs={xmlns:c.svg,"xmlns:xlink":c.xlink}},{}],619:[function(a,b,c){"use strict";var d=a("./plotly");c.version="1.19.2",a("es6-promise").polyfill(),a("../build/plotcss"),a("./fonts/mathjax_config"),c.plot=d.plot,c.newPlot=d.newPlot,c.restyle=d.restyle,c.relayout=d.relayout,c.redraw=d.redraw,c.update=d.update,c.extendTraces=d.extendTraces,c.prependTraces=d.prependTraces,c.addTraces=d.addTraces,c.deleteTraces=d.deleteTraces,c.moveTraces=d.moveTraces,c.purge=d.purge,c.setPlotConfig=a("./plot_api/set_plot_config"),c.register=a("./plot_api/register"),c.toImage=a("./plot_api/to_image"),c.downloadImage=a("./snapshot/download"),c.validate=a("./plot_api/validate"),c.addFrames=d.addFrames,c.deleteFrames=d.deleteFrames,c.animate=d.animate,c.register(a("./traces/scatter")),c.register([a("./components/legend"),a("./components/annotations"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector")]),c.Icons=a("../build/ploticon"),c.Plots=d.Plots,c.Fx=d.Fx,c.Snapshot=a("./snapshot"),c.PlotSchema=a("./plot_api/plot_schema"),c.Queue=a("./lib/queue"),c.d3=a("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":531,"./components/images":569,"./components/legend":577,"./components/rangeselector":589,"./components/rangeslider":594,"./components/shapes":601,"./components/sliders":607,"./components/updatemenus":613,"./fonts/mathjax_config":620,"./lib/queue":640,"./plot_api/plot_schema":652,"./plot_api/register":653,"./plot_api/set_plot_config":654,"./plot_api/to_image":656,"./plot_api/validate":657,"./plotly":658,"./snapshot":743,"./snapshot/download":740,"./traces/scatter":854,d3:95,"es6-promise":101}],620:[function(a,b,c){"use strict";"undefined"!=typeof MathJax?(c.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):c.MathJax=!1},{}],621:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){Array.isArray(a)&&(b[c]=a[d])}},{}],622:[function(a,b,c){"use strict";function d(a){return a&&void 0!==a.valType}var e=a("fast-isnumeric"),f=a("tinycolor2"),g=a("./nested_property"),h=a("./is_plain_object"),i=a("./filter_unique"),j=a("../components/colorscale/get_scale"),k=(Object.keys(a("../components/colorscale/scales")),/^([2-9]|[1-9][0-9]+)$/);c.valObjects={data_array:{coerceFunction:function(a,b,c){Array.isArray(a)?b.set(a):void 0!==c&&b.set(c)}},enumerated:{coerceFunction:function(a,b,c,d){d.coerceNumber&&(a=+a),d.values.indexOf(a)===-1?b.set(c):b.set(a)}},"boolean":{coerceFunction:function(a,b,c){a===!0||a===!1?b.set(a):b.set(c)}},number:{coerceFunction:function(a,b,c,d){!e(a)||void 0!==d.min&&a<d.min||void 0!==d.max&&a>d.max?b.set(c):b.set(+a)}},integer:{coerceFunction:function(a,b,c,d){a%1||!e(a)||void 0!==d.min&&a<d.min||void 0!==d.max&&a>d.max?b.set(c):b.set(+a)}},string:{coerceFunction:function(a,b,c,d){if("string"!=typeof a){var e="number"==typeof a;d.strict!==!0&&e?b.set(String(a)):b.set(c)}else d.noBlank&&!a?b.set(c):b.set(a)}},color:{coerceFunction:function(a,b,c){f(a).isValid()?b.set(a):b.set(c)}},colorscale:{coerceFunction:function(a,b,c){b.set(j(a,c))}},angle:{coerceFunction:function(a,b,c){"auto"===a?b.set("auto"):e(a)?(Math.abs(a)>180&&(a-=360*Math.round(a/360)),b.set(+a)):b.set(c)}},subplotid:{coerceFunction:function(a,b,c){var d=c.length;return"string"==typeof a&&a.substr(0,d)===c&&k.test(a.substr(d))?void b.set(a):void b.set(c)},validateFunction:function(a,b){var c=b.dflt,d=c.length;return a===c||"string"==typeof a&&!(a.substr(0,d)!==c||!k.test(a.substr(d)))}},flaglist:{coerceFunction:function(a,b,c,d){if("string"!=typeof a)return void b.set(c);if((d.extras||[]).indexOf(a)!==-1)return void b.set(a);for(var e=a.split("+"),f=0;f<e.length;){var g=e[f];d.flags.indexOf(g)===-1||e.indexOf(g)<f?e.splice(f,1):f++}e.length?b.set(e.join("+")):b.set(c)}},any:{coerceFunction:function(a,b,c){void 0===a?b.set(c):b.set(a)}},info_array:{coerceFunction:function(a,b,d,e){if(!Array.isArray(a))return void b.set(d);var f=e.items,g=[];d=Array.isArray(d)?d:[];for(var h=0;h<f.length;h++)c.coerce(a,g,f,"["+h+"]",d[h]);b.set(g)},validateFunction:function(a,b){if(!Array.isArray(a))return!1;var d=b.items;if(!b.freeLength&&a.length!==d.length)return!1;for(var e=0;e<a.length;e++){var f=c.validate(a[e],b.items[e]);if(!f)return!1}return!0}}},c.coerce=function(a,b,d,e,f){var h=g(d,e).get(),i=g(a,e),j=g(b,e),k=i.get();return void 0===f&&(f=h.dflt),h.arrayOk&&Array.isArray(k)?(j.set(k),k):(c.valObjects[h.valType].coerceFunction(k,j,f,h),j.get())},c.coerce2=function(a,b,d,e,f){var h=g(a,e),i=c.coerce(a,b,d,e,f);return!!h.get()&&i},c.coerceFont=function(a,b,c){var d={};return c=c||{},d.family=a(b+".family",c.family),d.size=a(b+".size",c.size),d.color=a(b+".color",c.color),d},c.validate=function(a,b){var d=c.valObjects[b.valType];if(b.arrayOk&&Array.isArray(a))return!0;if(d.validateFunction)return d.validateFunction(a,b);var e={},f=e,g={set:function(a){f=a}};return d.coerceFunction(a,g,e,b),f!==e},c.isValObject=d,c.IS_SUBPLOT_OBJ="_isSubplotObj",c.IS_LINKED_TO_ARRAY="_isLinkedToArray",c.DEPRECATED="_deprecated",c.UNDERSCORE_ATTRS=[c.IS_SUBPLOT_OBJ,c.IS_LINKED_TO_ARRAY,c.DEPRECATED],c.crawl=function(a,b,e){var f=e||0;Object.keys(a).forEach(function(e){var g=a[e];c.UNDERSCORE_ATTRS.indexOf(e)===-1&&(b(g,e,a,f),d(g)||h(g)&&c.crawl(g,b,f+1))})},c.findArrayAttributes=function(a){function b(b,c,h,i){f=f.slice(0,i).concat([c]);var j="data_array"===b.valType||b.arrayOk===!0;if(j){var k=d(f),l=g(a,k).get();Array.isArray(l)&&e.push(k)}}function d(a){return a.join(".")}var e=[],f=[];if(c.crawl(a._module.attributes,b),a.transforms)for(var h=a.transforms,j=0;j<h.length;j++){var k=h[j];f=["transforms["+j+"]"],c.crawl(k._module.attributes,b,1)}return a._fullInput&&(c.crawl(a._fullInput._module.attributes,b),e=i(e)),e}},{"../components/colorscale/get_scale":546,"../components/colorscale/scales":552,"./filter_unique":626,"./is_plain_object":634,"./nested_property":637,"fast-isnumeric":104,tinycolor2:489}],623:[function(a,b,c){"use strict";function d(a,b){return String(a+Math.pow(10,b)).substr(1)}function e(a){var b;return b=s.test(a)?"Y":"y",b+=t.test(a)?"b":""}function f(a){var b;return b=v.test(a)?u.test(a)?"I":"H":"D"}var g=a("d3"),h=a("fast-isnumeric");c.dateTime2ms=function(a){try{if(a.getTime)return+a}catch(a){return!1}var b,c,d,e,f=String(a).split(" ");if(f.length>2)return!1;var g=f[0].split("-");if(g.length>3||3!==g.length&&f[1])return!1;if(4===g[0].length)b=Number(g[0]);else{if(2!==g[0].length)return!1;var i=(new Date).getFullYear();b=((Number(g[0])-i+70)%100+200)%100+i-70}return!!h(b)&&(1===g.length?new Date(b,0,1).getTime():(c=Number(g[1])-1,!(g[1].length>2)&&c>=0&&c<=11&&(2===g.length?new Date(b,c,1).getTime():(d=Number(g[2]),!(g[2].length>2)&&d>=1&&d<=31&&(d=new Date(b,c,d).getTime(),f[1]?(g=f[1].split(":"),!(g.length>3)&&(e=Number(g[0]),!(g[0].length>2)&&e>=0&&e<=23&&(d+=36e5*e,1===g.length?d:(c=Number(g[1]),!(g[1].length>2)&&c>=0&&c<=59&&(d+=6e4*c,2===g.length?d:(a=Number(g[2]),a>=0&&a<60&&d+1e3*a)))))):d)))))},c.isDateTime=function(a){return c.dateTime2ms(a)!==!1},c.ms2DateTime=function(a,b){b||(b=0);var c=new Date(a),e=g.time.format("%Y-%m-%d")(c);return b<7776e6?(e+=" "+d(c.getHours(),2),b<432e6&&(e+=":"+d(c.getMinutes(),2),b<108e5&&(e+=":"+d(c.getSeconds(),2),b<3e5&&(e+="."+d(c.getMilliseconds(),3)))),e.replace(/([:\s]00)*\.?[0]*$/,"")):e};var i={H:["%H:%M:%S~%L","%H:%M:%S","%H:%M"],I:["%I:%M:%S~%L%p","%I:%M:%S%p","%I:%M%p"],D:["%H","%I%p","%Hh"]},j={Y:["%Y~%m~%d","%Y%m%d","%y%m%d","%m~%d~%Y","%d~%m~%Y"],Yb:["%b~%d~%Y","%d~%b~%Y","%Y~%d~%b","%Y~%b~%d"],y:["%m~%d~%y","%d~%m~%y","%y~%m~%d"],yb:["%b~%d~%y","%d~%b~%y","%y~%d~%b","%y~%b~%d"]},k=g.time.format.utc,l={Y:{H:["%Y~%m~%dT%H:%M:%S","%Y~%m~%dT%H:%M:%S~%L"].map(k),I:[],D:["%Y%m%d%H%M%S","%Y~%m","%m~%Y"].map(k)},Yb:{H:[],I:[],D:["%Y~%b","%b~%Y"].map(k)},y:{H:[],I:[],D:[]},yb:{H:[],I:[],D:[]}};["Y","Yb","y","yb"].forEach(function(a){j[a].forEach(function(b){l[a].D.push(k(b)),["H","I","D"].forEach(function(c){i[c].forEach(function(d){var e=l[a][c];e.push(k(b+"~"+d)),e.push(k(d+"~"+b))})})})});var m=/[a-z]*/g,n=function(a){return a.substr(0,3)},o=/(mon|tue|wed|thu|fri|sat|sun|the|of|st|nd|rd|th)/g,p=/[\s,\/\-\.\(\)]+/g,q=/~?([ap])~?m(~|$)/,r=function(a,b){return b+"m "},s=/\d\d\d\d/,t=/(^|~)[a-z]{3}/,u=/[ap]m/,v=/:/,w=/q([1-4])/,x=["31~mar","30~jun","30~sep","31~dec"],y=function(a,b){return x[b-1]},z=/ ?([+\-]\d\d:?\d\d|Z)$/;c.parseDate=function(a){if(a.getTime)return a;if("string"!=typeof a)return!1;a=a.toLowerCase().replace(m,n).replace(o,"").replace(p,"~").replace(q,r).replace(w,y).trim().replace(z,"");var b,c,d=null,g=e(a),h=f(a);b=l[g][h],c=b.length;for(var i=0;i<c&&!(d=b[i].parse(a));i++);if(!(d instanceof Date))return!1;var j=d.getTimezoneOffset();return d.setTime(d.getTime()+60*j*1e3),d}},{d3:95,"fast-isnumeric":104}],624:[function(a,b,c){"use strict";var d=a("events").EventEmitter,e={init:function(a){if(a._ev instanceof d)return a;var b=new d,c=new d;return a._ev=b,a._internalEv=c,a.on=b.on.bind(b),a.once=b.once.bind(b),a.removeListener=b.removeListener.bind(b),a.removeAllListeners=b.removeAllListeners.bind(b),a._internalOn=c.on.bind(c),a._internalOnce=c.once.bind(c),a._removeInternalListener=c.removeListener.bind(c),a._removeAllInternalListeners=c.removeAllListeners.bind(c),a.emit=function(d,e){"undefined"!=typeof jQuery&&jQuery(a).trigger(d,e),b.emit(d,e),c.emit(d,e)},a},triggerHandler:function(a,b,c){var d,e;"undefined"!=typeof jQuery&&(d=jQuery(a).triggerHandler(b,c));var f=a._ev;if(!f)return d;var g=f._events[b];if(!g)return d;"function"==typeof g&&(g=[g]);for(var h=g.pop(),i=0;i<g.length;i++)g[i](c);return e=h(c),void 0!==d?d:e},purge:function(a){return delete a._ev,delete a.on,delete a.once,delete a.removeListener,delete a.removeAllListeners,delete a.emit,delete a._ev,delete a._internalEv,delete a._internalOn,delete a._internalOnce,delete a._removeInternalListener,delete a._removeAllInternalListeners,a}};b.exports=e},{events:102}],625:[function(a,b,c){"use strict";function d(a,b){var c,d;for(c=0;c<a.length;c++){if(d=a[c],null!==d&&"object"==typeof d)return!1;void 0!==d&&(b[c]=d)}return!0}function e(a,b,c,h){var i,j,k,l,m,n,o,p=a[0],q=a.length;if(2===q&&g(p)&&g(a[1])&&0===p.length){if(o=d(a[1],p))return p;p.splice(0,p.length)}for(var r=1;r<q;r++){i=a[r];for(j in i)k=p[j],l=i[j],h&&g(l)?p[j]=l:b&&l&&(f(l)||(m=g(l)))?(m?(m=!1,n=k&&g(k)?k:[]):n=k&&f(k)?k:{},p[j]=e([n,l],b,c,h)):("undefined"!=typeof l||c)&&(p[j]=l)}return p}var f=a("./is_plain_object.js"),g=Array.isArray;c.extendFlat=function(){return e(arguments,!1,!1,!1)},c.extendDeep=function(){return e(arguments,!0,!1,!1)},c.extendDeepAll=function(){return e(arguments,!0,!0,!1)},c.extendDeepNoArrays=function(){return e(arguments,!0,!1,!0)}},{"./is_plain_object.js":634}],626:[function(a,b,c){"use strict";b.exports=function(a){for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=a[e];1!==b[f]&&(b[f]=1,c[d++]=f)}return c}},{}],627:[function(a,b,c){"use strict";b.exports=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.visible===!0&&b.push(d)}return b}},{}],628:[function(a,b,c){"use strict";function d(a,b){var c=i[a];return c(b)}function e(a){for(var b=0;b<h.length;b++){var c=h[b],d=new RegExp(f[c]);if(d.test(a.toLowerCase()))return c}return g.warn("Unrecognized country name: "+a+"."),!1}var f=a("country-regex"),g=a("../lib"),h=Object.keys(f),i={"ISO-3":g.identity,"USA-states":g.identity,"country names":e};c.locationToFeature=function(a,b,c){var e=d(a,b);if(e){for(var f=0;f<c.length;f++){var h=c[f];if(h.id===e)return h}g.warn(["Location with id",e,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},{"../lib":632,"country-regex":88}],629:[function(a,b,c){"use strict";c.calcTraceToLineCoords=function(a){for(var b=a[0].trace,c=b.connectgaps,d=[],e=[],f=0;f<a.length;f++){var g=a[f];e.push(g.lonlat),!c&&g.gapAfter&&e.length>0&&(d.push(e),e=[])}return d.push(e),d},c.makeLine=function(a,b){var c={};return c=1===a.length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a},b&&(c.trace=b),c},c.makePolygon=function(a,b){var c={};if(1===a.length)c={type:"Polygon",coordinates:a};else{for(var d=new Array(a.length),e=0;e<a.length;e++)d[e]=[a[e]];c={type:"MultiPolygon",coordinates:d}}return b&&(c.trace=b),c},c.makeBlank=function(){return{type:"Point",coordinates:[]}}},{}],630:[function(a,b,c){"use strict";function d(a,b){var c=l(a);return c[3]*=b,c}function e(a){return h(a).isValid()?a:k}function f(a){return i(a)?a:m}function g(a,b,c){var g,h,i,l,n,o=a.color,p=Array.isArray(o),q=Array.isArray(b),r=[];if(g=void 0!==a.colorscale?j.makeColorScaleFunc(j.extractScale(a.colorscale,a.cmin,a.cmax)):e,h=p?function(a,b){return void 0===a[b]?k:g(a[b])}:e,i=q?function(a,b){return void 0===a[b]?m:f(a[b])}:f,p||q)for(var s=0;s<c;s++)l=h(o,s),n=i(b,s),r[s]=d(l,n);else r=d(o,b);return r}var h=a("tinycolor2"),i=a("fast-isnumeric"),j=a("../components/colorscale"),k=a("../components/color/attributes").defaultLine,l=a("./str2rgbarray"),m=1;b.exports=g},{"../components/color/attributes":532,"../components/colorscale":548,"./str2rgbarray":645,"fast-isnumeric":104,tinycolor2:489}],631:[function(a,b,c){"use strict";function d(a){for(var b=0;(b=a.indexOf("<sup>",b))>=0;){var c=a.indexOf("</sup>",b);if(c<b)break;a=a.slice(0,b)+i(a.slice(b+5,c))+a.slice(c+6)}return a}function e(a){return a.replace(/\<br\>/g,"\n")}function f(a){return a.replace(/\<.*\>/g,"")}function g(a){for(var b=j.entityToUnicode,c=0;(c=a.indexOf("&",c))>=0;){var d=a.indexOf(";",c);if(d<c)c+=1;else{var e=b[a.slice(c+1,d)];a=e?a.slice(0,c)+e+a.slice(d+1):a.slice(0,c)+a.slice(d+1)}}return a}function h(a){return""+g(f(d(e(a))))}var i=a("superscript-text"),j=a("../constants/string_mappings");b.exports=h},{"../constants/string_mappings":617,"superscript-text":486}],632:[function(a,b,c){"use strict";var d=a("d3"),e=b.exports={};e.nestedProperty=a("./nested_property"),e.isPlainObject=a("./is_plain_object"),e.isArray=a("./is_array");var f=a("./coerce");e.valObjects=f.valObjects,e.coerce=f.coerce,e.coerce2=f.coerce2,e.coerceFont=f.coerceFont,e.validate=f.validate,e.isValObject=f.isValObject,e.crawl=f.crawl,e.findArrayAttributes=f.findArrayAttributes,e.IS_SUBPLOT_OBJ=f.IS_SUBPLOT_OBJ,e.IS_LINKED_TO_ARRAY=f.IS_LINKED_TO_ARRAY,e.DEPRECATED=f.DEPRECATED,e.UNDERSCORE_ATTRS=f.UNDERSCORE_ATTRS;var g=a("./dates");e.dateTime2ms=g.dateTime2ms,e.isDateTime=g.isDateTime,e.ms2DateTime=g.ms2DateTime,e.parseDate=g.parseDate;var h=a("./search");e.findBin=h.findBin,e.sorterAsc=h.sorterAsc,e.sorterDes=h.sorterDes,e.distinctVals=h.distinctVals,e.roundUp=h.roundUp;var i=a("./stats");e.aggNums=i.aggNums,e.len=i.len,e.mean=i.mean,e.variance=i.variance,e.stdev=i.stdev,e.interp=i.interp;var j=a("./matrix");e.init2dArray=j.init2dArray,e.transposeRagged=j.transposeRagged,e.dot=j.dot,e.translationMatrix=j.translationMatrix,e.rotationMatrix=j.rotationMatrix,e.rotationXYMatrix=j.rotationXYMatrix,e.apply2DTransform=j.apply2DTransform,e.apply2DTransform2=j.apply2DTransform2;var k=a("./extend");e.extendFlat=k.extendFlat,e.extendDeep=k.extendDeep,e.extendDeepAll=k.extendDeepAll,e.extendDeepNoArrays=k.extendDeepNoArrays;var l=a("./loggers");e.log=l.log,e.warn=l.warn,e.error=l.error,e.notifier=a("./notifier"),e.filterUnique=a("./filter_unique"),e.swapAttrs=function(a,b,c,d){c||(c="x"),d||(d="y");for(var f=0;f<b.length;f++){var g=b[f],h=e.nestedProperty(a,g.replace("?",c)),i=e.nestedProperty(a,g.replace("?",d)),j=h.get();h.set(i.get()),i.set(j)}},e.pauseEvent=function(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1},e.constrain=function(a,b,c){return b>c?Math.max(c,Math.min(b,a)):Math.max(b,Math.min(c,a))},e.bBoxIntersect=function(a,b,c){return c=c||0,a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c},e.identity=function(a){return a},e.noop=function(){},e.randstr=function o(a,b,c){if(c||(c=16),void 0===b&&(b=24),b<=0)return"0";var d,e,f,g=Math.log(Math.pow(2,b))/Math.log(c),h="";for(d=2;g===1/0;d*=2)g=Math.log(Math.pow(2,b/d))/Math.log(c)*d;var i=g-Math.floor(g);for(d=0;d<Math.floor(g);d++)f=Math.floor(Math.random()*c).toString(c),h=f+h;i&&(e=Math.pow(c,i),f=Math.floor(Math.random()*e).toString(c),h=f+h);var j=parseInt(h,c);return a&&a.indexOf(h)>-1||j!==1/0&&j>=Math.pow(2,b)?o(a,b,c):h},e.OptionControl=function(a,b){a||(a={}),b||(b="opt");var c={};return c.optionList=[],c._newoption=function(d){d[b]=a,c[d.name]=d,c.optionList.push(d)},c["_"+b]=a,c},e.smooth=function(a,b){if(b=Math.round(b)||0,b<2)return a;var c,d,e,f,g=a.length,h=2*g,i=2*b-1,j=new Array(i),k=new Array(g);for(c=0;c<i;c++)j[c]=(1-Math.cos(Math.PI*(c+1)/b))/(2*b);for(c=0;c<g;c++){for(f=0,d=0;d<i;d++)e=c+d+1-b,e<-g?e-=h*Math.round(e/h):e>=h&&(e-=h*Math.floor(e/h)),e<0?e=-1-e:e>=g&&(e=h-1-e),f+=a[e]*j[d];k[c]=f}return k},e.syncOrAsync=function(a,b,c){function d(){return e.syncOrAsync(a,b,c)}for(var f,g;a.length;)if(g=a.splice(0,1)[0],f=g(b),f&&f.then)return f.then(d).then(void 0,e.promiseError);return c&&c(b)},e.stripTrailingSlash=function(a){return"/"===a.substr(-1)?a.substr(0,a.length-1):a},e.noneOrAll=function(a,b,c){if(a){var d,e,f=!1,g=!0;for(d=0;d<c.length;d++)e=a[c[d]],void 0!==e&&null!==e?f=!0:g=!1;if(f&&!g)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]]}},e.pushUnique=function(a,b){return b&&a.indexOf(b)===-1&&a.push(b),a},e.mergeArray=function(a,b,c){if(Array.isArray(a))for(var d=Math.min(a.length,b.length),e=0;e<d;e++)b[e][c]=a[e]},e.minExtend=function(a,b){var c={};"object"!=typeof b&&(b={});var d,f,g,h=3,i=Object.keys(a);for(d=0;d<i.length;d++)f=i[d],g=a[f],"_"!==f.charAt(0)&&"function"!=typeof g&&("module"===f?c[f]=g:Array.isArray(g)?c[f]=g.slice(0,h):g&&"object"==typeof g?c[f]=e.minExtend(a[f],b[f]):c[f]=g);for(i=Object.keys(b),d=0;d<i.length;d++)f=i[d],g=b[f],"object"==typeof g&&f in c&&"object"==typeof c[f]||(c[f]=g);return c},e.titleCase=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},e.containsAny=function(a,b){for(var c=0;c<b.length;c++)if(a.indexOf(b[c])!==-1)return!0;return!1},e.getPlotDiv=function(a){for(;a&&a.removeAttribute;a=a.parentNode)if(e.isPlotDiv(a))return a},e.isPlotDiv=function(a){var b=d.select(a);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")},e.removeElement=function(a){var b=a&&a.parentNode;b&&b.removeChild(a)},e.addStyleRule=function(a,b){if(!e.styleSheet){var c=document.createElement("style");c.appendChild(document.createTextNode("")),document.head.appendChild(c),e.styleSheet=c.sheet}var d=e.styleSheet;d.insertRule?d.insertRule(a+"{"+b+"}",0):d.addRule?d.addRule(a,b,0):e.warn("addStyleRule failed")},e.getTranslate=function(a){var b=/.*\btranslate\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,c=a.attr?"attr":"getAttribute",d=a[c]("transform")||"",e=d.replace(b,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},e.setTranslate=function(a,b,c){var d=/(\btranslate\(.*?\);?)/,e=a.attr?"attr":"getAttribute",f=a.attr?"attr":"setAttribute",g=a[e]("transform")||"";return b=b||0,c=c||0,g=g.replace(d,"").trim(),g+=" translate("+b+", "+c+")",g=g.trim(),a[f]("transform",g),g},e.getScale=function(a){var b=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,c=a.attr?"attr":"getAttribute",d=a[c]("transform")||"",e=d.replace(b,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},e.setScale=function(a,b,c){var d=/(\bscale\(.*?\);?)/,e=a.attr?"attr":"getAttribute",f=a.attr?"attr":"setAttribute",g=a[e]("transform")||"";return b=b||1,c=c||1,g=g.replace(d,"").trim(),g+=" scale("+b+", "+c+")",g=g.trim(),a[f]("transform",g),g},e.setPointGroupScale=function(a,b,c){var d,e,f;return b=b||1,c=c||1,e=1===b&&1===c?"":" scale("+b+","+c+")",f=/\s*sc.*/,a.each(function(){d=(this.getAttribute("transform")||"").replace(f,""),d+=e,d=d.trim(),this.setAttribute("transform",d)}),e},e.isIE=function(){return"undefined"!=typeof window.navigator.msSaveBlob},e.objectFromPath=function(a,b){for(var c,d=a.split("."),e=c={},f=0;f<d.length;f++){var g=d[f],h=null,i=d[f].match(/(.*)\[([0-9]+)\]/);i?(g=i[1],h=i[2],c=c[g]=[],f===d.length-1?c[h]=b:c[h]={},c=c[h]):(f===d.length-1?c[g]=b:c[g]={},c=c[g])}return e};var m=/^([^\[\.]+)\.(.+)?/,n=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;e.expandObjectPaths=function(a){var b,c,d,f,g,h,i;if("object"==typeof a&&!Array.isArray(a))for(c in a)a.hasOwnProperty(c)&&((b=c.match(m))?(f=a[c],d=b[1],delete a[c],a[d]=e.extendDeepNoArrays(a[d]||{},e.objectFromPath(c,e.expandObjectPaths(f))[d])):(b=c.match(n))?(f=a[c],d=b[1],g=parseInt(b[2]),delete a[c],a[d]=a[d]||[],"."===b[3]?(i=b[4],h=a[d][g]=a[d][g]||{},e.extendDeepNoArrays(h,e.objectFromPath(i,e.expandObjectPaths(f)))):a[d][g]=e.expandObjectPaths(f)):a[c]=e.expandObjectPaths(a[c]));return a},e.numSeparate=function(a,b,c){if(c||(c=!1),"string"!=typeof b||0===b.length)throw new Error("Separator string required for formatting!");"number"==typeof a&&(a=String(a));var d=/(\d+)(\d{3})/,e=b.charAt(0),f=b.charAt(1),g=a.split("."),h=g[0],i=g.length>1?e+g[1]:"";if(f&&(g.length>1||h.length>4||c))for(;d.test(h);)h=h.replace(d,"$1"+f+"$2");return h+i}},{"./coerce":622,"./dates":623,"./extend":625,"./filter_unique":626,"./is_array":633,"./is_plain_object":634,"./loggers":635,"./matrix":636,"./nested_property":637,"./notifier":638,"./search":641,"./stats":644,d3:95}],633:[function(a,b,c){"use strict";b.exports=function(a){return Array.isArray(a)||ArrayBuffer.isView(a)}},{}],634:[function(a,b,c){"use strict";b.exports=function(a){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(a):"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],635:[function(a,b,c){"use strict";var d=a("../plot_api/plot_config"),e=b.exports={};e.log=function(){if(d.logging>1){for(var a=["LOG:"],b=0;b<arguments.length;b++)a.push(arguments[b]);console.trace?console.trace.apply(console,a):console.log.apply(console,a)}},e.warn=function(){if(d.logging>0){for(var a=["WARN:"],b=0;b<arguments.length;b++)a.push(arguments[b]);console.trace?console.trace.apply(console,a):console.log.apply(console,a)}},e.error=function(){if(d.logging>0){for(var a=["ERROR:"],b=0;b<arguments.length;b++)a.push(arguments[b]);console.error.apply(console,arguments)}}},{"../plot_api/plot_config":651}],636:[function(a,b,c){"use strict";c.init2dArray=function(a,b){for(var c=new Array(a),d=0;d<a;d++)c[d]=new Array(b);return c},c.transposeRagged=function(a){var b,c,d=0,e=a.length;for(b=0;b<e;b++)d=Math.max(d,a[b].length);var f=new Array(d);for(b=0;b<d;b++)for(f[b]=new Array(e),c=0;c<e;c++)f[b][c]=a[c][b];return f},c.dot=function(a,b){if(!a.length||!b.length||a.length!==b.length)return null;var d,e,f=a.length;if(a[0].length)for(d=new Array(f),e=0;e<f;e++)d[e]=c.dot(a[e],b);else if(b[0].length){var g=c.transposeRagged(b);for(d=new Array(g.length),e=0;e<g.length;e++)d[e]=c.dot(a,g[e])}else for(d=0,e=0;e<f;e++)d+=a[e]*b[e];return d},c.translationMatrix=function(a,b){return[[1,0,a],[0,1,b],[0,0,1]]},c.rotationMatrix=function(a){var b=a*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},c.rotationXYMatrix=function(a,b,d){return c.dot(c.dot(c.translationMatrix(b,d),c.rotationMatrix(a)),c.translationMatrix(-b,-d))},c.apply2DTransform=function(a){return function(){var b=arguments;3===b.length&&(b=b[0]);var d=1===arguments.length?b[0]:[b[0],b[1]];return c.dot(a,[d[0],d[1],1]).slice(0,2)}},c.apply2DTransform2=function(a){var b=c.apply2DTransform(a);return function(a){return b(a.slice(0,2)).concat(b(a.slice(2,4)))}}},{}],637:[function(a,b,c){"use strict";function d(a,b){return function(){var c,e,f,g,h,i=a;for(g=0;g<b.length-1;g++){if(c=b[g],c===-1){for(e=!0,f=[],h=0;h<i.length;h++)f[h]=d(i[h],b.slice(g+1))(),f[h]!==f[0]&&(e=!1);return e?f[0]:f}if("number"==typeof c&&!m(i))return;if(i=i[c],"object"!=typeof i||null===i)return}if("object"==typeof i&&null!==i&&(f=i[b[g]],null!==f))return f}}function e(a,b){var c=["annotations","shapes","range","domain","buttons"],d=c.indexOf(b)===-1;return m(a)&&d}function f(a,b){return function(c){var d,f,k=a,l=[a],n=j(c)&&!e(c,b[b.length-1]);for(f=0;f<b.length-1;f++){if(d=b[f],"number"==typeof d&&!m(k))throw"array index but container is not an array";if(d===-1){if(n=!g(k,b.slice(f+1),c))break;return}if(!h(k,d,b[f+1],n))break;if(k=k[d],"object"!=typeof k||null===k)throw"container is not an object";l.push(k)}n?(f===b.length-1&&delete k[b[f]],i(l)):k[b[f]]=c}}function g(a,b,c){var d,e=m(c),g=!0,i=c,k=!e&&j(c),l=b[0];for(d=0;d<a.length;d++)e&&(i=c[d%c.length],k=j(i)),k&&(g=!1),h(a,d,l,k)&&f(a[d],b)(i);return g}function h(a,b,c,d){if(void 0===a[b]){if(d)return!1;"number"==typeof c?a[b]=[]:a[b]={}}return!0}function i(a){var b,c,d,f,g;for(b=a.length-1;b>=0;b--){if(d=a[b],g=!1,m(d))for(c=d.length-1;c>=0;c--)j(d[c])?g?d[c]=void 0:d.pop():g=!0;else if("object"==typeof d&&null!==d)for(f=Object.keys(d),g=!1,c=f.length-1;c>=0;c--)j(d[f[c]])&&!e(d[f[c]],f[c])?delete d[f[c]]:g=!0;if(g)return}}function j(a){return void 0===a||null===a||"object"==typeof a&&(m(a)?!a.length:!Object.keys(a).length)}function k(a,b,c){return{set:function(){throw"bad container"},get:function(){},astr:b,parts:c,obj:a}}var l=a("fast-isnumeric"),m=a("./is_array");b.exports=function(a,b){if(l(b))b=String(b);else if("string"!=typeof b||"[-1]"===b.substr(b.length-4))throw"bad property string";for(var c,e,g,h=0,i=b.split(".");h<i.length;){if(c=String(i[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(c[1])i[h]=c[1];else{if(0!==h)throw"bad property string";i.splice(0,1)}for(e=c[2].substr(1,c[2].length-2).split("]["),g=0;g<e.length;g++)h++,i.splice(h,0,Number(e[g]))}h++}return"object"!=typeof a?k(a,b,i):{set:f(a,i),get:d(a,i),astr:b,parts:i,obj:a}}},{"./is_array":633,"fast-isnumeric":104}],638:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=[];b.exports=function(a,b){function c(a){a.duration(700).style("opacity",0).each("end",function(a){var b=f.indexOf(a);b!==-1&&f.splice(b,1),d.select(this).remove()})}if(f.indexOf(a)===-1){f.push(a);var g=1e3;e(b)?g=b:"long"===b&&(g=3e3);var h=d.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);var i=h.selectAll(".notifier-note").data(f);i.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var b=d.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(c)}),b.append("p").html(a),b.transition().duration(700).style("opacity",1).transition().delay(g).call(c)})}}},{d3:95,"fast-isnumeric":104}],639:[function(a,b,c){"use strict";var d=a("./matrix").dot,e=b.exports={};e.tester=function(a){function b(a,b){var c=a[0],d=a[1];return!(c<e||c>f||d<g||d>h||b&&j(a))}function c(a,b){var c=a[0],i=a[1];if(c<e||c>f||i<g||i>h)return!1;var j,k,l,m,n,o=d.length,p=d[0][0],q=d[0][1],r=0;for(j=1;j<o;j++)if(k=p,l=q,p=d[j][0],q=d[j][1],m=Math.min(k,p),!(c<m||c>Math.max(k,p)||i>Math.max(l,q)))if(i<Math.min(l,q))c!==m&&r++;else{if(n=p===k?i:l+(c-k)*(q-l)/(p-k),i===n)return 1!==j||!b;i<=n&&c!==m&&r++}return r%2===1}var d=a.slice(),e=d[0][0],f=e,g=d[0][1],h=g;d.push(d[0]);for(var i=1;i<d.length;i++)e=Math.min(e,d[i][0]),f=Math.max(f,d[i][0]),g=Math.min(g,d[i][1]),h=Math.max(h,d[i][1]);var j,k=!1;return 5===d.length&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(k=!0,j=function(a){return a[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(k=!0,j=function(a){return a[1]===d[0][1]})),{xmin:e,xmax:f,ymin:g,ymax:h,pts:d,contains:k?b:c,isRect:k}};var f=e.isSegmentBent=function(a,b,c,e){var f,g,h,i=a[b],j=[a[c][0]-i[0],a[c][1]-i[1]],k=d(j,j),l=Math.sqrt(k),m=[-j[1]/l,j[0]/l];for(f=b+1;f<c;f++)if(g=[a[f][0]-i[0],a[f][1]-i[1]],h=d(g,j),h<0||h>k||Math.abs(d(g,m))>e)return!0;return!1};e.filter=function(a,b){function c(c){a.push(c);var h=d.length,i=e;d.splice(g+1);for(var j=i+1;j<a.length;j++)(j===a.length-1||f(a,i,j+1,b))&&(d.push(a[j]),d.length<h-2&&(e=j,g=d.length-1),i=j)}var d=[a[0]],e=0,g=0;if(a.length>1){var h=a.pop();c(h)}return{addPt:c,
raw:a,filtered:d}}},{"./matrix":636}],640:[function(a,b,c){"use strict";function d(a,b){for(var c,d=[],f=0;f<b.length;f++)c=b[f],c===a?d[f]=c:"object"==typeof c?d[f]=Array.isArray(c)?e.extendDeep([],c):e.extendDeepAll({},c):d[f]=c;return d}var e=a("../lib"),f=a("../plot_api/plot_config"),g={};g.add=function(a,b,c,d,e){var g,h;return a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},h=a.undoQueue.index,a.autoplay?void(a.undoQueue.inSequence||(a.autoplay=!1)):(!a.undoQueue.sequence||a.undoQueue.beginSequence?(g={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},a.undoQueue.queue.splice(h,a.undoQueue.queue.length-h,g),a.undoQueue.index+=1):g=a.undoQueue.queue[h-1],a.undoQueue.beginSequence=!1,g&&(g.undo.calls.unshift(b),g.undo.args.unshift(c),g.redo.calls.push(d),g.redo.args.push(e)),void(a.undoQueue.queue.length>f.queueLength&&(a.undoQueue.queue.shift(),a.undoQueue.index--)))},g.startSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!0,a.undoQueue.beginSequence=!0},g.stopSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!1,a.undoQueue.beginSequence=!1},g.undo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.undo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.undo.calls.length;c++)g.plotDo(a,b.undo.calls[c],b.undo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1}},g.redo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.redo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.redo.calls.length;c++)g.plotDo(a,b.redo.calls[c],b.redo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},g.plotDo=function(a,b,c){a.autoplay=!0,c=d(a,c),b.apply(null,c)},b.exports=g},{"../lib":632,"../plot_api/plot_config":651}],641:[function(a,b,c){"use strict";function d(a,b){return a<b}function e(a,b){return a<=b}function f(a,b){return a>b}function g(a,b){return a>=b}var h=a("fast-isnumeric"),i=a("./loggers");c.findBin=function(a,b,c){if(h(b.start))return c?Math.ceil((a-b.start)/b.size)-1:Math.floor((a-b.start)/b.size);var j,k,l=0,m=b.length,n=0;for(k=b[b.length-1]>=b[0]?c?d:e:c?g:f;l<m&&n++<100;)j=Math.floor((l+m)/2),k(b[j],a)?l=j+1:m=j;return n>90&&i.log("Long binary search..."),l-1},c.sorterAsc=function(a,b){return a-b},c.sorterDes=function(a,b){return b-a},c.distinctVals=function(a){var b=a.slice();b.sort(c.sorterAsc);for(var d=b.length-1,e=b[d]-b[0]||1,f=e/(d||1)/1e4,g=[b[0]],h=0;h<d;h++)b[h+1]>b[h]+f&&(e=Math.min(e,b[h+1]-b[h]),g.push(b[h+1]));return{vals:g,minDiff:e}},c.roundUp=function(a,b,c){for(var d,e=0,f=b.length-1,g=0,h=c?0:1,i=c?1:0,j=c?Math.ceil:Math.floor;e<f&&g++<100;)d=j((e+f)/2),b[d]<=a?e=d+h:f=d-i;return b[e]}},{"./loggers":635,"fast-isnumeric":104}],642:[function(a,b,c){"use strict";b.exports=function(a,b){(a.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&a.classed(b,!1)}),b&&a.classed("cursor-"+b,!0)}},{}],643:[function(a,b,c){"use strict";var d=a("../components/color"),e=function(){};b.exports=function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=e);a.destroy=function(){a.container.parentNode.removeChild(a.container)};var c=document.createElement("div");return c.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",c.style.cursor="pointer",c.style.fontSize="24px",c.style.color=d.defaults[0],a.container.appendChild(c),a.container.style.background="#FFFFFF",a.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../components/color":533}],644:[function(a,b,c){"use strict";var d=a("fast-isnumeric");c.aggNums=function(a,b,e,f){var g,h;if(f||(f=e.length),d(b)||(b=!1),Array.isArray(e[0])){for(h=new Array(f),g=0;g<f;g++)h[g]=c.aggNums(a,b,e[g]);e=h}for(g=0;g<f;g++)d(b)?d(e[g])&&(b=a(+b,+e[g])):b=e[g];return b},c.len=function(a){return c.aggNums(function(a){return a+1},0,a)},c.mean=function(a,b){return b||(b=c.len(a)),c.aggNums(function(a,b){return a+b},0,a)/b},c.variance=function(a,b,e){return b||(b=c.len(a)),d(e)||(e=c.mean(a,b)),c.aggNums(function(a,b){return a+Math.pow(b-e,2)},0,a)/b},c.stdev=function(a,b,d){return Math.sqrt(c.variance(a,b,d))},c.interp=function(a,b){if(!d(b))throw"n should be a finite number";if(b=b*a.length-.5,b<0)return a[0];if(b>a.length-1)return a[a.length-1];var c=b%1;return c*a[Math.ceil(b)]+(1-c)*a[Math.floor(b)]}},{"fast-isnumeric":104}],645:[function(a,b,c){"use strict";function d(a){return a=e(a),f.str2RgbaArray(a.toRgbString())}var e=a("tinycolor2"),f=a("arraytools");b.exports=d},{arraytools:33,tinycolor2:489}],646:[function(a,b,c){"use strict";function d(a,b){return a.node().getBoundingClientRect()[b]}function e(a){return a.replace(/(<|&lt;|&#60;)/g,"\\lt ").replace(/(>|&gt;|&#62;)/g,"\\gt ")}function f(a,b,c){var d="math-output-"+m.randstr([],64),f=l.select("body").append("div").attr({id:d}).style({visibility:"hidden",position:"absolute"}).style({"font-size":b.fontSize+"px"}).text(e(a));MathJax.Hub.Queue(["Typeset",MathJax.Hub,f.node()],function(){var b=l.select("body").select("#MathJax_SVG_glyphs");if(f.select(".MathJax_SVG").empty()||!f.select("svg").node())m.log("There was an error in the tex syntax.",a),c();else{var d=f.select("svg").node().getBoundingClientRect();c(f.select(".MathJax_SVG"),b,d)}f.remove()})}function g(a,b){for(var c=a||"",d=0;d<b.length;d++){var e=b[d];c=c.replace(e.regExp,e.sub)}return c}function h(a){return g(a,s)}function i(a){return g(a,t)}function j(a){a=h(a);for(var b=a.split(/(<[^<>]*>)/).map(function(a){var b=a.match(/<(\/?)([^ >]*)\s*(.*)>/i),d=b&&b[2].toLowerCase(),e=p[d];if(void 0!==e){var f=b[1],g=b[3],h=g.match(/^style\s*=\s*"([^"]+)"\s*/i);if("a"===d){if(f)return"</a>";if("href"!==g.substr(0,4).toLowerCase())return"<a>";var j=g.substr(4).replace(/["']/g,"").replace(/=/,""),k=document.createElement("a");return k.href=j,q.indexOf(k.protocol)===-1?"<a>":'<a xlink:show="new" xlink:href="'+i(j)+'">'}if("br"===d)return"<br>";if(f)return"sup"===d?'</tspan><tspan dy="0.42em">&#x200b;</tspan>':"sub"===d?'</tspan><tspan dy="-0.21em">&#x200b;</tspan>':"</tspan>";var l="<tspan";return"sup"!==d&&"sub"!==d||(l="&#x200b;"+l),h&&(h=h[1].replace(/(^|;)\s*color:/,"$1 fill:"),e=(e?e+";":"")+i(h)),l+(e?' style="'+e+'"':"")+">"}return c.xml_entity_encode(a).replace(/</g,"&lt;")}),d=[],e=b.indexOf("<br>");e>0;e=b.indexOf("<br>",e+1))d.push(e);var f=0;d.forEach(function(a){for(var c=a+f,d=b.slice(0,c),e="",g=d.length-1;g>=0;g--){var h=d[g].match(/<(\/?).*>/i);if(h&&"<br>"!==d[g]){h[1]||(e=d[g]);break}}e&&(b.splice(c+1,0,e),b.splice(c,0,"</tspan>"),f+=2)});var g=b.join(""),j=g.split(/<br>/gi);return j.length>1&&(b=j.map(function(a,b){return'<tspan class="line" dy="'+1.3*b+'em">'+a+"</tspan>"})),b.join("")}function k(a,b,c){var d,e,f,g=c.horizontalAlign,h=c.verticalAlign||"top",i=a.node().getBoundingClientRect(),j=b.node().getBoundingClientRect();return e="bottom"===h?function(){return i.bottom-d.height}:"middle"===h?function(){return i.top+(i.height-d.height)/2}:function(){return i.top},f="right"===g?function(){return i.right-d.width}:"center"===g?function(){return i.left+(i.width-d.width)/2}:function(){return i.left},function(){return d=this.node().getBoundingClientRect(),this.style({top:e()-j.top+"px",left:f()-j.left+"px","z-index":1e3}),this}}var l=a("d3"),m=a("../lib"),n=a("../constants/xmlns_namespaces"),o=a("../constants/string_mappings");l.selection.prototype.appendSVG=function(a){for(var b=['<svg xmlns="',n.svg,'" ','xmlns:xlink="',n.xlink,'">',a,"</svg>"].join(""),c=(new DOMParser).parseFromString(b,"application/xml"),d=c.documentElement.firstChild;d;)this.node().appendChild(this.node().ownerDocument.importNode(d,!0)),d=d.nextSibling;return c.querySelector("parsererror")?(m.log(c.querySelector("parsererror div").textContent),null):l.select(this.node().lastChild)},c.html_entity_decode=function(a){var b=l.select("body").append("div").style({display:"none"}).html(""),c=a.replace(/(&[^;]*;)/gi,function(a){return"&lt;"===a?"&#60;":"&rt;"===a?"&#62;":b.html(a).text()});return b.remove(),c},c.xml_entity_encode=function(a){return a.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")},c.convertToTspans=function(a,b){function c(){n.empty()||(o=h.attr("class")+"-math",n.select("svg."+o).remove()),a.text("").style({visibility:"inherit","white-space":"pre"}),k=a.appendSVG(g),k||a.text(e),a.select("a").size()&&a.style("pointer-events","all"),b&&b.call(h)}var e=a.text(),g=j(e),h=a,i=!h.attr("data-notex")&&g.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/),k=e,n=l.select(h.node().parentNode);if(!n.empty()){var o=h.attr("class")?h.attr("class").split(" ")[0]:"text";o+="-math",n.selectAll("svg."+o).remove(),n.selectAll("g."+o+"-group").remove(),a.style({visibility:null});for(var p=a.node();p&&p.removeAttribute;p=p.parentNode)p.removeAttribute("data-bb");if(i){var q=m.getPlotDiv(h.node());(q&&q._promises||[]).push(new Promise(function(a){h.style({visibility:"hidden"});var e={fontSize:parseInt(h.style("font-size"),10)};f(i[2],e,function(e,f,g){n.selectAll("svg."+o).remove(),n.selectAll("g."+o+"-group").remove();var i=e&&e.select("svg");if(!i||!i.node())return c(),void a();var j=n.append("g").classed(o+"-group",!0).attr({"pointer-events":"none"});j.node().appendChild(i.node()),f&&f.node()&&i.node().insertBefore(f.node().cloneNode(!0),i.node().firstChild),i.attr({"class":o,height:g.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var k=h.style("fill")||"black";i.select("g").attr({fill:k,stroke:k});var l=d(i,"width"),m=d(i,"height"),p=+h.attr("x")-l*{start:0,middle:.5,end:1}[h.attr("text-anchor")||"start"],q=parseInt(h.style("font-size"),10)||d(h,"height"),r=-q/4;"y"===o[0]?(j.attr({transform:"rotate("+[-90,+h.attr("x"),+h.attr("y")]+") translate("+[-l/2,r-m/2]+")"}),i.attr({x:+h.attr("x"),y:+h.attr("y")})):"l"===o[0]?i.attr({x:h.attr("x"),y:r-m/2}):"a"===o[0]?i.attr({x:0,y:r}):i.attr({x:p,y:+h.attr("y")+r-m/2}),b&&b.call(h,j),a(j)})}))}else c();return a}};var p={sup:'font-size:70%" dy="-0.6em',sub:'font-size:70%" dy="0.3em',b:"font-weight:bold",i:"font-style:italic",a:"",span:"",br:"",em:"font-style:italic;font-weight:bold"},q=["http:","https:","mailto:"],r=new RegExp("</?("+Object.keys(p).join("|")+")( [^>]*)?/?>","g"),s=Object.keys(o.entityToUnicode).map(function(a){return{regExp:new RegExp("&"+a+";","g"),sub:o.entityToUnicode[a]}}),t=Object.keys(o.unicodeToEntity).map(function(a){return{regExp:new RegExp(a,"g"),sub:"&"+o.unicodeToEntity[a]+";"}});c.plainText=function(a){return(a||"").replace(r," ")},c.makeEditable=function(a,b,c){function d(){f(),g.style({opacity:0});var a,b=j.attr("class");a=b?"."+b.split(" ")[0]+"-math-group":"[class*=-math-group]",a&&l.select(g.node().parentNode).select(a).style({opacity:0})}function e(a){var b=a.node(),c=document.createRange();c.selectNodeContents(b);var d=window.getSelection();d.removeAllRanges(),d.addRange(c),b.focus()}function f(){var a=l.select(m.getPlotDiv(g.node())),b=a.select(".svg-container"),d=b.append("div");d.classed("plugin-editable editable",!0).style({position:"absolute","font-family":g.style("font-family")||"Arial","font-size":g.style("font-size")||12,color:c.fill||g.style("fill")||"black",opacity:1,"background-color":c.background||"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(g.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(c.text||g.attr("data-unformatted")).call(k(g,b,c)).on("blur",function(){g.text(this.textContent).style({opacity:1});var a,b=l.select(this).attr("class");a=b?"."+b.split(" ")[0]+"-math-group":"[class*=-math-group]",a&&l.select(g.node().parentNode).select(a).style({opacity:0});var c=this.textContent;l.select(this).transition().duration(0).remove(),l.select(document).on("mouseup",null),h.edit.call(g,c)}).on("focus",function(){var a=this;l.select(document).on("mouseup",function(){return l.event.target!==a&&void(document.activeElement===d.node()&&d.node().blur())})}).on("keyup",function(){27===l.event.which?(g.style({opacity:1}),l.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),h.cancel.call(g,this.textContent)):(h.input.call(g,this.textContent),l.select(this).call(k(g,b,c)))}).on("keydown",function(){13===l.event.which&&this.blur()}).call(e)}c||(c={});var g=this,h=l.dispatch("edit","input","cancel"),i=l.select(this.node()).style({"pointer-events":"all"}),j=b||i;return b&&i.style({"pointer-events":"none"}),c.immediate?d():j.on("click",d),l.rebind(this,h,"on")}},{"../constants/string_mappings":617,"../constants/xmlns_namespaces":618,"../lib":632,d3:95}],647:[function(a,b,c){"use strict";var d=b.exports={},e=a("../plots/geo/constants").locationmodeToLayer,f=a("topojson").feature;d.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(a,b){return a+b+".json"},d.getTopojsonFeatures=function(a,b){var c=e[a.locationmode],d=b.objects[c];return f(b,d).features}},{"../plots/geo/constants":685,topojson:491}],648:[function(a,b,c){"use strict";function d(a,b){for(var c=new Float32Array(b),d=0;d<b;d++)c[d]=a[d];return c}function e(a,b){for(var c=new Float64Array(b),d=0;d<b;d++)c[d]=a[d];return c}b.exports=function(a,b){if(a instanceof Float32Array)return d(a,b);if(a instanceof Float64Array)return e(a,b);throw new Error("This array type is not yet supported by `truncate`.")}},{}],649:[function(a,b,c){"use strict";function d(a,b){var c=a[b],d=b.charAt(0);c&&"paper"!==c&&(a[b]=l.cleanId(c,d))}function e(a){var b="middle",c="center";return a.indexOf("top")!==-1?b="top":a.indexOf("bottom")!==-1&&(b="bottom"),a.indexOf("left")!==-1?c="left":a.indexOf("right")!==-1&&(c="right"),b+" "+c}function f(a,b){return b in a&&"object"==typeof a[b]&&0===Object.keys(a[b]).length}var g=a("fast-isnumeric"),h=a("gl-mat4/fromQuat"),i=a("../registry"),j=a("../lib"),k=a("../plots/plots"),l=a("../plots/cartesian/axes"),m=a("../components/color");c.getGraphDiv=function(a){var b;if("string"==typeof a){if(b=document.getElementById(a),null===b)throw new Error("No DOM element with id '"+a+"' exists on the page.");return b}if(null===a||void 0===a)throw new Error("DOM element provided is null or undefined");return a},c.clearPromiseQueue=function(a){Array.isArray(a._promises)&&a._promises.length>0&&j.log("Clearing previous rejected promises from queue."),a._promises=[]},c.cleanLayout=function(a){var b,c;a||(a={}),a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1),a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1);var e=l.list({_fullLayout:a});for(b=0;b<e.length;b++){var g=e[b];g.anchor&&"free"!==g.anchor&&(g.anchor=l.cleanId(g.anchor)),g.overlaying&&(g.overlaying=l.cleanId(g.overlaying)),g.type||(g.isdate?g.type="date":g.islog?g.type="log":g.isdate===!1&&g.islog===!1&&(g.type="linear")),"withzero"!==g.autorange&&"tozero"!==g.autorange||(g.autorange=!0,g.rangemode="tozero"),delete g.islog,delete g.isdate,delete g.categories,f(g,"domain")&&delete g.domain,void 0!==g.autotick&&(void 0===g.tickmode&&(g.tickmode=g.autotick?"auto":"linear"),delete g.autotick)}void 0===a.annotations||Array.isArray(a.annotations)||(j.warn("Annotations must be an array."),delete a.annotations);var i=(a.annotations||[]).length;for(b=0;b<i;b++){var n=a.annotations[b];n.ref&&("paper"===n.ref?(n.xref="paper",n.yref="paper"):"data"===n.ref&&(n.xref="x",n.yref="y"),delete n.ref),d(n,"xref"),d(n,"yref")}void 0===a.shapes||Array.isArray(a.shapes)||(j.warn("Shapes must be an array."),delete a.shapes);var o=(a.shapes||[]).length;for(b=0;b<o;b++){var p=a.shapes[b];d(p,"xref"),d(p,"yref")}var q=a.legend;q&&(q.x>3?(q.x=1.02,q.xanchor="left"):q.x<-2&&(q.x=-.02,q.xanchor="right"),q.y>3?(q.y=1.02,q.yanchor="bottom"):q.y<-2&&(q.y=-.02,q.yanchor="top")),"rotate"===a.dragmode&&(a.dragmode="orbit"),a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var r=k.getSubplotIds(a,"gl3d");for(b=0;b<r.length;b++){var s=a[r[b]],t=s.cameraposition;if(Array.isArray(t)&&4===t[0].length){var u=t[0],v=t[1],w=t[2],x=h([],u),y=[];for(c=0;c<3;++c)y[c]=v[b]+w*x[2+4*c];s.camera={eye:{x:y[0],y:y[1],z:y[2]},center:{x:v[0],y:v[1],z:v[2]},up:{x:x[1],y:x[5],z:x[9]}},delete s.cameraposition}}return m.clean(a),a},c.cleanData=function(a,b){for(var d=[],g=(a.concat(Array.isArray(b)?b:[]).filter(function(a){return"uid"in a}).map(function(a){return a.uid})),h=0;h<a.length;h++){var n,o=a[h];if(!("uid"in o)||d.indexOf(o.uid)!==-1){var p;for(n=0;n<100&&(p=j.randstr(g),d.indexOf(p)!==-1);n++);o.uid=j.randstr(g),g.push(o.uid)}if(d.push(o.uid),"histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var q=m.defaults,r=o.error_y.color||(i.traceIs(o,"bar")?m.defaultLine:q[h%q.length]);o.error_y.color=m.addOpacity(m.rgb(r),m.opacity(r)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"!==o.bardir||!i.traceIs(o,"bar")&&"histogram"!==o.type.substr(0,9)||(o.orientation="h",c.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&c.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=l.cleanId(o.xaxis,"x")),o.yaxis&&(o.yaxis=l.cleanId(o.yaxis,"y")),i.traceIs(o,"gl3d")&&o.scene&&(o.scene=k.subplotsRegistry.gl3d.cleanId(o.scene)),i.traceIs(o,"pie")||(Array.isArray(o.textposition)?o.textposition=o.textposition.map(e):o.textposition&&(o.textposition=e(o.textposition))),i.traceIs(o,"2dMap")&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd")),i.traceIs(o,"markerColorscale")&&o.marker){var s=o.marker;"YIGnBu"===s.colorscale&&(s.colorscale="YlGnBu"),"YIOrRd"===s.colorscale&&(s.colorscale="YlOrRd")}if("surface"===o.type&&j.isPlainObject(o.contours)){var t=["x","y","z"];for(n=0;n<t.length;n++){var u=o.contours[t[n]];j.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if(Array.isArray(o.transforms)){var v=o.transforms;for(n=0;n<v.length;n++){var w=v[n];j.isPlainObject(w)&&"filter"===w.type&&w.filtersrc&&(w.target=w.filtersrc,delete w.filtersrc)}}f(o,"line")&&delete o.line,"marker"in o&&(f(o.marker,"line")&&delete o.marker.line,f(o,"marker")&&delete o.marker),m.clean(o)}},c.swapXYData=function(a){var b;if(j.swapAttrs(a,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(a.z)&&Array.isArray(a.z[0])&&(a.transpose?delete a.transpose:a.transpose=!0),a.error_x&&a.error_y){var c=a.error_y,d="copy_ystyle"in c?c.copy_ystyle:!(c.color||c.thickness||c.width);j.swapAttrs(a,["error_?.copy_ystyle"]),d&&j.swapAttrs(a,["error_?.color","error_?.thickness","error_?.width"])}if(a.hoverinfo){var e=a.hoverinfo.split("+");for(b=0;b<e.length;b++)"x"===e[b]?e[b]="y":"y"===e[b]&&(e[b]="x");a.hoverinfo=e.join("+")}},c.coerceTraceIndices=function(a,b){return g(b)?[b]:Array.isArray(b)&&b.length?b:a.data.map(function(a,b){return b})},c.manageArrayContainers=function(a,b,c){var d=a.obj,e=a.parts,f=e.length,h=e[f-1],i=g(h);if(i&&null===b){var k=e.slice(0,f-1).join("."),l=j.nestedProperty(d,k).get();l.splice(h,1)}else i&&void 0===a.get()?(void 0===a.get()&&(c[a.astr]=null),a.set(b)):a.set(b)}},{"../components/color":533,"../lib":632,"../plots/cartesian/axes":662,"../plots/plots":723,"../registry":738,"fast-isnumeric":104,"gl-mat4/fromQuat":146}],650:[function(a,b,c){"use strict";function d(a,b){a._fullLayout._paperdiv.style("background","white"),s.defaultConfig.setBackground(a,b)}function e(a,b){a._context||(a._context=t.extendFlat({},s.defaultConfig));var c=a._context;b&&(Object.keys(b).forEach(function(a){a in c&&("setBackground"===a&&"opaque"===b[a]?c[a]=d:c[a]=b[a])}),b.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio)),c.staticPlot&&(c.editable=!1,c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1)}function f(a,b,c){var d=q.select(a).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);var e=d.selectAll(".svg-container").data([0]);e.enter().append("div").classed("svg-container",!0).style("position","relative"),e.html(""),b&&(a.data=b),c&&(a.layout=c),z.manager.fillLayout(a),e.style({width:a._fullLayout.width+"px",height:a._fullLayout.height+"px"}),a.framework=z.manager.framework(a),a.framework({data:a.data,layout:a.layout},e.node()),a.framework.setUndoPoint();var f=a.framework.svg(),g=1,h=a._fullLayout.title;""!==h&&h||(g=0);var i="Click to enter title",j=function(){this.call(D.convertToTspans)},k=f.select(".title-group text").call(j);if(a._context.editable){k.attr({"data-unformatted":h}),h&&h!==i||(g=.2,k.attr({"data-unformatted":i}).text(i).style({opacity:g}).on("mouseover.opacity",function(){q.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){q.select(this).transition().duration(1e3).style("opacity",0)}));var l=function(){this.call(D.makeEditable).on("edit",function(b){a.framework({layout:{title:b}}),this.attr({"data-unformatted":b}).text(b).call(j),this.call(l)}).on("cancel",function(){var a=this.attr("data-unformatted");this.text(a).call(j)})};k.call(l)}return a._context.setBackground(a,a._fullLayout.paper_bgcolor),x.addLinks(a),Promise.resolve()}function g(a,b){var c,d,e=b+1,f=[];for(c=0;c<a.length;c++)d=a[c],d<0?f.push(e+d):f.push(d);return f}function h(a,b,c){var d,e;for(d=0;d<b.length;d++){if(e=b[d],e!==parseInt(e,10))throw new Error("all values in "+c+" must be integers");if(e>=a.data.length||e<-a.data.length)throw new Error(c+" must be valid indices for gd.data.");if(b.indexOf(e,d+1)>-1||e>=0&&b.indexOf(-a.data.length+e)>-1||e<0&&b.indexOf(a.data.length+e)>-1)throw new Error("each index in "+c+" must be unique.")}}function i(a,b,c){if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if("undefined"==typeof b)throw new Error("currentIndices is a required argument.");if(Array.isArray(b)||(b=[b]),h(a,b,"currentIndices"),"undefined"==typeof c||Array.isArray(c)||(c=[c]),"undefined"!=typeof c&&h(a,c,"newIndices"),"undefined"!=typeof c&&b.length!==c.length)throw new Error("current and new indices must be of equal length.")}function j(a,b,c){var d,e;if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if("undefined"==typeof b)throw new Error("traces must be defined.");for(Array.isArray(b)||(b=[b]),d=0;d<b.length;d++)if(e=b[d],"object"!=typeof e||Array.isArray(e)||null===e)throw new Error("all values in traces array must be non-array objects");if("undefined"==typeof c||Array.isArray(c)||(c=[c]),"undefined"!=typeof c&&c.length!==b.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function k(a,b,c,d){var e=t.isPlainObject(d);if(!Array.isArray(a.data))throw new Error("gd.data must be an array");if(!t.isPlainObject(b))throw new Error("update must be a key:value object");if("undefined"==typeof c)throw new Error("indices must be an integer or array of integers");h(a,c,"indices");for(var f in b){if(!Array.isArray(b[f])||b[f].length!==c.length)throw new Error("attribute "+f+" must be an array of length equal to indices array length");if(e&&(!(f in d)||!Array.isArray(d[f])||d[f].length!==b[f].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function l(a,b,c,d){var e,f,h,i,j,k=t.isPlainObject(d),l=[];Array.isArray(c)||(c=[c]),c=g(c,a.data.length-1);for(var m in b)for(var n=0;n<c.length;n++){if(e=a.data[c[n]],h=t.nestedProperty(e,m),f=h.get(),i=b[m][n],!Array.isArray(i))throw new Error("attribute: "+m+" index: "+n+" must be an array");if(!Array.isArray(f))throw new Error("cannot extend missing or non-array attribute: "+m);j=k?d[m][n]:d,r(j)||(j=-1),l.push({prop:h,target:f,insert:i,maxp:Math.floor(j)})}return l}function m(a,b,c,d,e,f){k(a,b,c,d);for(var g,h,i,j=l(a,b,c,d),m=[],n={},o={},p=0;p<j.length;p++)h=j[p].prop,i=j[p].maxp,g=e(j[p].target,j[p].insert),i>=0&&i<g.length&&(m=f(g,i)),i=j[p].target.length,h.set(g),Array.isArray(n[h.astr])||(n[h.astr]=[]),Array.isArray(o[h.astr])||(o[h.astr]=[]),n[h.astr].push(m),o[h.astr].push(i);return{update:n,maxPoints:o}}function n(a,b,c){function d(){return n.map(function(){})}function e(a){var b=s.Axes.id2name(a);j.indexOf(b)===-1&&j.push(b)}function f(a){return"LAYOUT"+a+".autorange"}function g(a){return"LAYOUT"+a+".range"}function h(c,e,f){if(Array.isArray(c))return void c.forEach(function(a){h(a,e,f)});if(!(c in b)){var g;g="LAYOUT"===c.substr(0,6)?t.nestedProperty(a.layout,c.replace("LAYOUT","")):t.nestedProperty(m[n[f]],c),c in q||(q[c]=d()),void 0===q[c][f]&&(q[c][f]=g.get()),void 0!==e&&g.set(e)}}var i,j,k=a._fullLayout,l=a._fullData,m=a.data,n=E.coerceTraceIndices(a,c),o={docalc:!1,docalcAutorange:!1,doplot:!1,dostyle:!1,docolorbars:!1,autorangeOn:!1,clearCalc:!1,fullReplot:!1},p={},q={},r={},u=["mode","visible","type","orientation","fill","histfunc","histnorm","text","x","y","z","a","b","c","open","high","low","close","base","width","offset","xtype","x0","dx","ytype","y0","dy","xaxis","yaxis","line.width","connectgaps","transpose","zsmooth","showscale","marker.showscale","zauto","marker.cauto","autocolorscale","marker.autocolorscale","colorscale","marker.colorscale","reversescale","marker.reversescale","autobinx","nbinsx","xbins","xbins.start","xbins.end","xbins.size","autobiny","nbinsy","ybins","ybins.start","ybins.end","ybins.size","autocontour","ncontours","contours","contours.coloring","error_y","error_y.visible","error_y.value","error_y.type","error_y.traceref","error_y.array","error_y.symmetric","error_y.arrayminus","error_y.valueminus","error_y.tracerefminus","error_x","error_x.visible","error_x.value","error_x.type","error_x.traceref","error_x.array","error_x.symmetric","error_x.arrayminus","error_x.valueminus","error_x.tracerefminus","swapxy","swapxyaxes","orientationaxes","marker.colors","values","labels","label0","dlabel","sort","textinfo","textposition","textfont.size","textfont.family","textfont.color","insidetextfont.size","insidetextfont.family","insidetextfont.color","outsidetextfont.size","outsidetextfont.family","outsidetextfont.color","hole","scalegroup","domain","domain.x","domain.y","domain.x[0]","domain.x[1]","domain.y[0]","domain.y[1]","tilt","tiltaxis","depth","direction","rotation","pull","line.showscale","line.cauto","line.autocolorscale","line.reversescale","marker.line.showscale","marker.line.cauto","marker.line.autocolorscale","marker.line.reversescale"];for(i=0;i<n.length;i++)if(w.traceIs(l[n[i]],"box")){u.push("name");break}var v=["marker","marker.size","textfont","boxpoints","jitter","pointpos","whiskerwidth","boxmean","tickwidth"],y=["zmin","zmax","zauto","xgap","ygap","marker.cmin","marker.cmax","marker.cauto","line.cmin","line.cmax","marker.line.cmin","marker.line.cmax","contours.start","contours.end","contours.size","contours.showlines","line","line.smoothing","line.shape","error_y.width","error_x.width","error_x.copy_ystyle","marker.maxdisplayed"],z=["type","x","y","x0","y0","orientation","xaxis","yaxis"],A=["zmin","zmax"],B=["xbins.start","xbins.end","xbins.size"],C=["ybins.start","ybins.end","ybins.size"],D=["contours.start","contours.end","contours.size"],F=["cartesian","pie","ternary"];k._basePlotModules.forEach(function(a){F.indexOf(a.name)===-1&&(o.docalc=!0)});for(var G in b){var H,I,J,K,L,M=b[G];if(p[G]=M,"LAYOUT"!==G.substr(0,6)){for(q[G]=d(),i=0;i<n.length;i++)if(H=m[n[i]],I=l[n[i]],J=t.nestedProperty(H,G),K=J.get(),L=Array.isArray(M)?M[i%M.length]:M,void 0!==L){if(A.indexOf(G)!==-1)h("zauto",!1,i);else if("colorscale"===G)h("autocolorscale",!1,i);else if("autocolorscale"===G)h("colorscale",void 0,i);else if("marker.colorscale"===G)h("marker.autocolorscale",!1,i);else if("marker.autocolorscale"===G)h("marker.colorscale",void 0,i);else if("zauto"===G)h(A,void 0,i);else if(B.indexOf(G)!==-1)h("autobinx",!1,i);else if("autobinx"===G)h(B,void 0,i);else if(C.indexOf(G)!==-1)h("autobiny",!1,i);else if("autobiny"===G)h(C,void 0,i);else if(D.indexOf(G)!==-1)h("autocontour",!1,i);else if("autocontour"===G)h(D,void 0,i);else if(["x0","dx"].indexOf(G)!==-1&&I.x&&"scaled"!==I.xtype)h("xtype","scaled",i);else if(["y0","dy"].indexOf(G)!==-1&&I.y&&"scaled"!==I.ytype)h("ytype","scaled",i);else if("colorbar.thicknessmode"===G&&J.get()!==L&&["fraction","pixels"].indexOf(L)!==-1&&I.colorbar){var N=["top","bottom"].indexOf(I.colorbar.orient)!==-1?k.height-k.margin.t-k.margin.b:k.width-k.margin.l-k.margin.r;h("colorbar.thickness",I.colorbar.thickness*("fraction"===L?1/N:N),i)}else if("colorbar.lenmode"===G&&J.get()!==L&&["fraction","pixels"].indexOf(L)!==-1&&I.colorbar){var O=["top","bottom"].indexOf(I.colorbar.orient)!==-1?k.width-k.margin.l-k.margin.r:k.height-k.margin.t-k.margin.b;h("colorbar.len",I.colorbar.len*("fraction"===L?1/O:O),i)}else"colorbar.tick0"===G||"colorbar.dtick"===G?h("colorbar.tickmode","linear",i):"colorbar.tickmode"===G&&h(["colorbar.tick0","colorbar.dtick"],void 0,i);if("type"===G&&"pie"===L!=("pie"===K)){var P="x",Q="y";"bar"!==L&&"bar"!==K||"h"!==H.orientation||(P="y",Q="x"),t.swapAttrs(H,["?","?src"],"labels",P),t.swapAttrs(H,["d?","?0"],"label",P),t.swapAttrs(H,["?","?src"],"values",Q),"pie"===K?(t.nestedProperty(H,"marker.color").set(t.nestedProperty(H,"marker.colors").get()),k._pielayer.selectAll("g.trace").remove()):w.traceIs(H,"cartesian")&&(t.nestedProperty(H,"marker.colors").set(t.nestedProperty(H,"marker.color").get()),r[H.xaxis||"x"]=!0,r[H.yaxis||"y"]=!0)}q[G][i]=K;var R=["swapxy","swapxyaxes","orientation","orientationaxes"];if(R.indexOf(G)!==-1){if("orientation"===G){if(J.set(L),J.get()===q[G][i])continue}else"orientationaxes"===G&&(H.orientation={v:"h",h:"v"}[I.orientation]);E.swapXYData(H)}else x.dataArrayContainers.indexOf(J.parts[0])!==-1?(E.manageArrayContainers(J,L,q),o.docalc=!0):J.set(L)}if(["swapxyaxes","orientationaxes"].indexOf(G)!==-1&&s.Axes.swap(a,n),"orientationaxes"===G){var S=t.nestedProperty(a.layout,"hovermode");"x"===S.get()?S.set("y"):"y"===S.get()&&S.set("x")}if(n.indexOf(0)!==-1&&z.indexOf(G)!==-1&&(s.Axes.clearTypes(a,n),o.docalc=!0),["autobinx","autobiny","zauto"].indexOf(G)!==-1&&L===!1||(o.dostyle=!0),(["colorbar","line"].indexOf(J.parts[0])!==-1||"marker"===J.parts[0]&&"colorbar"===J.parts[1])&&(o.docolorbars=!0),u.indexOf(G)!==-1){if(["orientation","type"].indexOf(G)!==-1){for(j=[],i=0;i<n.length;i++){var T=m[n[i]];w.traceIs(T,"cartesian")&&(e(T.xaxis||"x"),e(T.yaxis||"y"),"type"===G&&h(["autobinx","autobiny"],!0,i))}h(j.map(f),!0,0),h(j.map(g),[0,1],0)}o.docalc=!0}else y.indexOf(G)!==-1?o.doplot=!0:v.indexOf(G)!==-1&&(o.docalcAutorange=!0)}else J=t.nestedProperty(a.layout,G.replace("LAYOUT","")),q[G]=[J.get()],J.set(Array.isArray(M)?M[0]:M),o.docalc=!0}s.Axes.list(a).forEach(function(a){a.autorange&&(o.autorangeOn=!0)});var U=Object.keys(r);a:for(i=0;i<U.length;i++){for(var V=U[i],W=V.charAt(0),X=W+"axis",Y=0;Y<m.length;Y++)if(w.traceIs(m[Y],"cartesian")&&(m[Y][X]||W)===V)continue a;h("LAYOUT"+s.Axes.id2name(V),null,0)}return(o.docalc||o.docalcAutorange&&o.autorangeOn)&&(o.clearCalc=!0),(o.docalc||o.doplot||o.docalcAutorange)&&(o.fullReplot=!0),{flags:o,undoit:q,redoit:p,traces:n,eventData:t.extendDeepNoArrays([],[p,n])}}function o(a,b){function c(a,d){if(Array.isArray(a))return void a.forEach(function(a){c(a,d)});if(!(a in b)){var e=t.nestedProperty(f,a);a in p||(p[a]=e.get()),void 0!==d&&e.set(d)}}function d(a,b){var c=s.Axes.id2name(a[b+"ref"]||b);return(g[c]||{}).autorange}var e,f=a.layout,g=a._fullLayout,h=Object.keys(b),i=s.Axes.list(a);for(e=0;e<h.length;e++)if(0===h[e].indexOf("allaxes")){
for(var j=0;j<i.length;j++){var k=i[j]._id.substr(1),l=k.indexOf("scene")!==-1?k+".":"",m=h[e].replace("allaxes",l+i[j]._name);b[m]||(b[m]=b[h[e]])}delete b[h[e]]}var n={dolegend:!1,doticks:!1,dolayoutstyle:!1,doplot:!1,docalc:!1,domodebar:!1,layoutReplot:!1},o={},p={};for(var q in b){var r=t.nestedProperty(f,q),u=b[q],v=r.parts.length,y="string"==typeof r.parts[v-1]?v-1:v-2,z=r.parts[y],A=r.parts[y-1]+"."+z,B=r.parts.slice(0,y).join("."),C=t.nestedProperty(a.layout,B).get(),D=t.nestedProperty(g,B).get();if(void 0!==u){if(o[q]=u,p[q]="reverse"===z?u:r.get(),["width","height"].indexOf(q)!==-1&&null===u?a._fullLayout[q]=a._initialAutoSize[q]:A.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?c(B+".autorange",!1):A.match(/^[xyz]axis[0-9]*\.autorange$/)?c([B+".range[0]",B+".range[1]"],void 0):A.match(/^aspectratio\.[xyz]$/)?c(r.parts[0]+".aspectmode","manual"):A.match(/^aspectmode$/)?c([B+".x",B+".y",B+".z"],void 0):"tick0"===z||"dtick"===z?c(B+".tickmode","linear"):"tickmode"===z?c([B+".tick0",B+".dtick"],void 0):/[xy]axis[0-9]*?$/.test(z)&&!Object.keys(u||{}).length?n.docalc=!0:/[xy]axis[0-9]*\.categoryorder$/.test(A)?n.docalc=!0:/[xy]axis[0-9]*\.categoryarray/.test(A)&&(n.docalc=!0),A.indexOf("rangeslider")!==-1&&(n.docalc=!0),"type"===z&&"log"===D.type!=("log"===u)){var F=C;if(F&&F.range)if(D.autorange)"log"===u&&(F.range=F.range[1]>F.range[0]?[1,2]:[2,1]);else{var G=F.range[0],H=F.range[1];"log"===u?(G<=0&&H<=0&&c(B+".autorange",!0),G<=0?G=H/1e6:H<=0&&(H=G/1e6),c(B+".range[0]",Math.log(G)/Math.LN10),c(B+".range[1]",Math.log(H)/Math.LN10)):(c(B+".range[0]",Math.pow(10,G)),c(B+".range[1]",Math.pow(10,H)))}else c(B+".autorange",!0)}if("reverse"===z)C.range?C.range.reverse():(c(B+".autorange",!0),C.range=[1,0]),D.autorange?n.docalc=!0:n.doplot=!0;else if("annotations"===r.parts[0]||"shapes"===r.parts[0]){var I=r.parts[1],J=r.parts[0],K=f[J]||[],L=K[I]||{};null===u&&(b[q]="remove"),2===r.parts.length&&("add"===b[q]||t.isPlainObject(b[q])?p[q]="remove":"remove"===b[q]?I===-1?(p[J]=K,delete p[q]):p[q]=L:t.log("???",b)),!d(L,"x")&&!d(L,"y")||t.containsAny(q,["color","opacity","align","dash"])||(n.docalc=!0);var M=w.getComponentMethod(J,"drawOne");M(a,I,r.parts.slice(2).join("."),b[q]),delete b[q]}else x.layoutArrayContainers.indexOf(r.parts[0])!==-1||"mapbox"===r.parts[0]&&"layers"===r.parts[1]?(E.manageArrayContainers(r,u,p),n.doplot=!0):(0===r.parts[0].indexOf("scene")?n.doplot=!0:0===r.parts[0].indexOf("geo")?n.doplot=!0:0===r.parts[0].indexOf("ternary")?n.doplot=!0:"paper_bgcolor"===q?n.doplot=!0:!g._has("gl2d")||q.indexOf("axis")===-1&&"plot_bgcolor"!==r.parts[0]?"hiddenlabels"===q?n.docalc=!0:r.parts[0].indexOf("legend")!==-1?n.dolegend=!0:q.indexOf("title")!==-1?n.doticks=!0:r.parts[0].indexOf("bgcolor")!==-1?n.dolayoutstyle=!0:r.parts.length>1&&t.containsAny(r.parts[1],["tick","exponent","grid","zeroline"])?n.doticks=!0:q.indexOf(".linewidth")!==-1&&q.indexOf("axis")!==-1?n.doticks=n.dolayoutstyle=!0:r.parts.length>1&&r.parts[1].indexOf("line")!==-1?n.dolayoutstyle=!0:r.parts.length>1&&"mirror"===r.parts[1]?n.doticks=n.dolayoutstyle=!0:"margin.pad"===q?n.doticks=n.dolayoutstyle=!0:"margin"===r.parts[0]||"autorange"===r.parts[1]||"rangemode"===r.parts[1]||"type"===r.parts[1]||"domain"===r.parts[1]||q.match(/^(bar|box|font)/)?n.docalc=!0:["hovermode","dragmode"].indexOf(q)!==-1?n.domodebar=!0:["hovermode","dragmode","height","width","autosize"].indexOf(q)===-1&&(n.doplot=!0):n.doplot=!0,r.set(u))}}var N=a._fullLayout.width,O=a._fullLayout.height;x.supplyDefaults(a),a.layout.autosize&&x.plotAutoSize(a,a.layout,a._fullLayout);var P=b.height||b.width||a._fullLayout.width!==N||a._fullLayout.height!==O;return P&&(n.docalc=!0),(n.doplot||n.docalc)&&(n.layoutReplot=!0),{flags:n,undoit:p,redoit:o,eventData:t.extendDeep({},o)}}function p(a){var b=q.select(a),c=a._fullLayout;if(c._container=b.selectAll(".plot-container").data([0]),c._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),c._paperdiv=c._container.selectAll(".svg-container").data([0]),c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),c._glcontainer=c._paperdiv.selectAll(".gl-container").data([0]),c._glcontainer.enter().append("div").classed("gl-container",!0),c._geocontainer=c._paperdiv.selectAll(".geo-container").data([0]),c._geocontainer.enter().append("div").classed("geo-container",!0),c._paperdiv.selectAll(".main-svg").remove(),c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",!0),c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0),!c._uid){var d=[];q.selectAll("defs").each(function(){this.id&&d.push(this.id.split("-")[1])}),c._uid=t.randstr(d)}c._paperdiv.selectAll(".main-svg").attr(C.svgAttrs),c._defs=c._paper.append("defs").attr("id","defs-"+c._uid),c._topdefs=c._toppaper.append("defs").attr("id","topdefs-"+c._uid),c._draggers=c._paper.append("g").classed("draglayer",!0);var e=c._paper.append("g").classed("layer-below",!0);c._imageLowerLayer=e.append("g").classed("imagelayer",!0),c._shapeLowerLayer=e.append("g").classed("shapelayer",!0),c._cartesianlayer=c._paper.append("g").classed("cartesianlayer",!0),c._ternarylayer=c._paper.append("g").classed("ternarylayer",!0);var f=c._paper.append("g").classed("layer-above",!0);c._imageUpperLayer=f.append("g").classed("imagelayer",!0),c._shapeUpperLayer=f.append("g").classed("shapelayer",!0),c._pielayer=c._paper.append("g").classed("pielayer",!0),c._glimages=c._paper.append("g").classed("glimages",!0),c._geoimages=c._paper.append("g").classed("geoimages",!0),c._infolayer=c._toppaper.append("g").classed("infolayer",!0),c._zoomlayer=c._toppaper.append("g").classed("zoomlayer",!0),c._hoverlayer=c._toppaper.append("g").classed("hoverlayer",!0),a.emit("plotly_framework")}var q=a("d3"),r=a("fast-isnumeric"),s=a("../plotly"),t=a("../lib"),u=a("../lib/events"),v=a("../lib/queue"),w=a("../registry"),x=a("../plots/plots"),y=a("../plots/cartesian/graph_interact"),z=a("../plots/polar"),A=a("../components/drawing"),B=a("../components/errorbars"),C=a("../constants/xmlns_namespaces"),D=a("../lib/svg_text_utils"),E=a("./helpers"),F=a("./subroutines");s.plot=function(a,b,c,d){function g(){if(v)return s.addFrames(a,v)}function h(){for(var b=G._basePlotModules,c=0;c<b.length;c++)b[c].drawFramework&&b[c].drawFramework(a);return t.syncOrAsync([F.layoutStyles,m,y.init],a)}function i(){var b,c,d,e=a.calcdata;for(w.getComponentMethod("legend","draw")(a),w.getComponentMethod("rangeselector","draw")(a),w.getComponentMethod("updatemenus","draw")(a),w.getComponentMethod("sliders","draw")(a),b=0;b<e.length;b++)c=e[b],d=c[0].trace,d.visible===!0&&d._module.colorbar?d._module.colorbar(a,c):x.autoMargin(a,"cb"+d.uid);return x.doAutoMargin(a),x.previousPromises(a)}function j(){var b=JSON.stringify(G._size)===J?[]:[i,F.layoutStyles];return b=b.concat(y.init),t.syncOrAsync(b,a)}function k(){if(H){for(var b,c,d=x.getSubplotIds(G,"cartesian"),e=G._modules,f=0;f<d.length;f++){b=G._plots[d[f]];for(var g=0;g<e.length;g++)c=e[g],c.setPositions&&c.setPositions(a,b)}return B.calc(a),t.syncOrAsync([w.getComponentMethod("shapes","calcAutorange"),w.getComponentMethod("annotations","calcAutorange"),l],a)}}function l(){if(!a._transitioning)for(var b=s.Axes.list(a,"",!0),c=0;c<b.length;c++)s.Axes.doAutoRange(b[c])}function m(){return s.Axes.doTicks(a,"redraw")}function n(){var b,c=a.calcdata;for(b=0;b<c.length;b++){var d=c[b][0].trace,e=d.visible===!0,f=d.uid;e&&w.traceIs(d,"2dMap")||G._paper.selectAll(".hm"+f+",.contour"+f+",#clip"+f).remove(),e&&d._module.colorbar||G._infolayer.selectAll(".cb"+f).remove()}var g=G._basePlotModules;for(b=0;b<g.length;b++)g[b].plot(a);var h=G._paper.selectAll(".layer-subplot");return G._imageSubplotLayer=h.selectAll(".imagelayer"),G._shapeSubplotLayer=h.selectAll(".shapelayer"),x.style(a),w.getComponentMethod("shapes","draw")(a),w.getComponentMethod("annoations","draw")(a),x.addLinks(a),a._replotting=!1,x.previousPromises(a)}function o(){w.getComponentMethod("shapes","draw")(a),w.getComponentMethod("images","draw")(a),w.getComponentMethod("annotations","draw")(a),w.getComponentMethod("legend","draw")(a),w.getComponentMethod("rangeslider","draw")(a),w.getComponentMethod("rangeselector","draw")(a),w.getComponentMethod("updatemenus","draw")(a),w.getComponentMethod("sliders","draw")(a)}function r(){a.emit("plotly_afterplot")}var v;if(a=E.getGraphDiv(a),u.init(a),t.isPlainObject(b)){var z=b;b=z.data,c=z.layout,d=z.config,v=z.frames}var C=u.triggerHandler(a,"plotly_beforeplot",[b,c,d]);if(C===!1)return Promise.reject();b||c||t.isPlotDiv(a)||t.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",a),e(a,d),c||(c={}),q.select(a).classed("js-plotly-plot",!0),A.makeTester(a),a._promises=[];var D=0===(a.data||[]).length&&Array.isArray(b);if(Array.isArray(b)&&(E.cleanData(b,a.data),D?a.data=b:a.data.push.apply(a.data,b),a.empty=!1),a.layout&&!D||(a.layout=E.cleanLayout(c)),a._dragging&&!a._transitioning)return a._replotPending=!0,Promise.reject();if(a._replotPending=!1,x.supplyDefaults(a),b&&b[0]&&b[0].r)return f(a,b,c);a._replotting=!0,D&&p(a),a.framework!==p&&(a.framework=p,p(a)),D&&s.Axes.saveRangeInitial(a);var G=a._fullLayout,H=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;H&&x.doCalcdata(a);for(var I=0;I<a.calcdata.length;I++)a.calcdata[I][0].trace=a._fullData[I];var J=JSON.stringify(G._size);return t.syncOrAsync([x.previousPromises,g,h,i,j,k,F.layoutStyles,m,n,o],a,r),Promise.all(a._promises).then(function(){return a})},s.redraw=function(a){if(a=E.getGraphDiv(a),!t.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a);return E.cleanData(a.data,a.data),E.cleanLayout(a.layout),a.calcdata=void 0,s.plot(a).then(function(){return a.emit("plotly_redraw"),a})},s.newPlot=function(a,b,c,d){return a=E.getGraphDiv(a),x.cleanPlot([],{},a._fullData||{},a._fullLayout||{}),x.purge(a),s.plot(a,b,c,d)},s.extendTraces=function G(a,b,c,d){a=E.getGraphDiv(a);var e=m(a,b,c,d,function(a,b){return a.concat(b)},function(a,b){return a.splice(0,a.length-b)}),f=s.redraw(a),g=[a,e.update,c,e.maxPoints];return v.add(a,s.prependTraces,g,G,arguments),f},s.prependTraces=function H(a,b,c,d){a=E.getGraphDiv(a);var e=m(a,b,c,d,function(a,b){return b.concat(a)},function(a,b){return a.splice(b,a.length)}),f=s.redraw(a),g=[a,e.update,c,e.maxPoints];return v.add(a,s.extendTraces,g,H,arguments),f},s.addTraces=function I(a,b,c){a=E.getGraphDiv(a);var d,e,f=[],g=s.deleteTraces,h=I,k=[a,f],l=[a,b];for(j(a,b,c),Array.isArray(b)||(b=[b]),E.cleanData(b,a.data),d=0;d<b.length;d+=1)a.data.push(b[d]);for(d=0;d<b.length;d++)f.push(-b.length+d);if("undefined"==typeof c)return e=s.redraw(a),v.add(a,g,k,h,l),e;Array.isArray(c)||(c=[c]);try{i(a,f,c)}catch(I){throw a.data.splice(a.data.length-b.length,b.length),I}return v.startSequence(a),v.add(a,g,k,h,l),e=s.moveTraces(a,f,c),v.stopSequence(a),e},s.deleteTraces=function J(a,b){a=E.getGraphDiv(a);var c,d,e=[],f=s.addTraces,i=J,j=[a,e,b],k=[a,b];if("undefined"==typeof b)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(b)||(b=[b]),h(a,b,"indices"),b=g(b,a.data.length-1),b.sort(t.sorterDes),c=0;c<b.length;c+=1)d=a.data.splice(b[c],1)[0],e.push(d);var l=s.redraw(a);return v.add(a,f,j,i,k),l},s.moveTraces=function K(a,b,c){a=E.getGraphDiv(a);var d,e=[],f=[],h=K,j=K,k=[a,c,b],l=[a,b,c];if(i(a,b,c),b=Array.isArray(b)?b:[b],"undefined"==typeof c)for(c=[],d=0;d<b.length;d++)c.push(-b.length+d);for(c=Array.isArray(c)?c:[c],b=g(b,a.data.length-1),c=g(c,a.data.length-1),d=0;d<a.data.length;d++)b.indexOf(d)===-1&&e.push(a.data[d]);for(d=0;d<b.length;d++)f.push({newIndex:c[d],trace:a.data[b[d]]});for(f.sort(function(a,b){return a.newIndex-b.newIndex}),d=0;d<f.length;d+=1)e.splice(f[d].newIndex,0,f[d].trace);a.data=e;var m=s.redraw(a);return v.add(a,h,k,j,l),m},s.restyle=function L(a,b,c,d){a=E.getGraphDiv(a),E.clearPromiseQueue(a);var e={};if("string"==typeof b)e[b]=c;else{if(!t.isPlainObject(b))return t.warn("Restyle fail.",b,c,d),Promise.reject();e=b,void 0===d&&(d=c)}Object.keys(e).length&&(a.changed=!0);var f=n(a,e,d),g=f.flags;g.clearCalc&&(a.calcdata=void 0);var h=[];g.fullReplot?h.push(s.plot):(h.push(x.previousPromises),x.supplyDefaults(a),g.dostyle&&h.push(F.doTraceStyle),g.docolorbars&&h.push(F.doColorBars)),v.add(a,L,[a,f.undoit,f.traces],L,[a,f.redoit,f.traces]);var i=t.syncOrAsync(h,a);return i&&i.then||(i=Promise.resolve()),i.then(function(){return a.emit("plotly_restyle",f.eventData),a})},s.relayout=function M(a,b,c){if(a=E.getGraphDiv(a),E.clearPromiseQueue(a),a.framework&&a.framework.isPolar)return Promise.resolve(a);var d={};if("string"==typeof b)d[b]=c;else{if(!t.isPlainObject(b))return t.warn("Relayout fail.",b,c),Promise.reject();d=b}Object.keys(d).length&&(a.changed=!0);var e=o(a,d),f=e.flags;f.docalc&&(a.calcdata=void 0);var g=[];f.layoutReplot?g.push(F.layoutReplot):Object.keys(d).length&&(g.push(x.previousPromises),x.supplyDefaults(a),f.dolegend&&g.push(F.doLegend),f.dolayoutstyle&&g.push(F.layoutStyles),f.doticks&&g.push(F.doTicksRelayout),f.domodebar&&g.push(F.doModeBar)),v.add(a,M,[a,e.undoit],M,[a,e.redoit]);var h=t.syncOrAsync(g,a);return h&&h.then||(h=Promise.resolve(a)),h.then(function(){return a.emit("plotly_relayout",e.eventData),a})},s.update=function N(a,b,c,d){if(a=E.getGraphDiv(a),E.clearPromiseQueue(a),a.framework&&a.framework.isPolar)return Promise.resolve(a);t.isPlainObject(b)||(b={}),t.isPlainObject(c)||(c={}),Object.keys(b).length&&(a.changed=!0),Object.keys(c).length&&(a.changed=!0);var e=n(a,b,d),f=e.flags,g=o(a,c),h=g.flags;(f.clearCalc||h.docalc)&&(a.calcdata=void 0);var i=[];if(f.fullReplot&&h.layoutReplot){var j=a.data,k=a.layout;a.data=void 0,a.layout=void 0,i.push(function(){return s.plot(a,j,k)})}else f.fullReplot?i.push(s.plot):h.layoutReplot?i.push(F.layoutReplot):(i.push(x.previousPromises),x.supplyDefaults(a),f.dostyle&&i.push(F.doTraceStyle),f.docolorbars&&i.push(F.doColorBars),h.dolegend&&i.push(F.doLegend),h.dolayoutstyle&&i.push(F.layoutStyles),h.doticks&&i.push(F.doTicksRelayout),h.domodebar&&i.push(F.doModeBar));v.add(a,N,[a,e.undoit,g.undoit,e.traces],N,[a,e.redoit,g.redoit,e.traces]);var l=t.syncOrAsync(i,a);return l&&l.then||(l=Promise.resolve(a)),l.then(function(){return a.emit("plotly_update",{data:e.eventData,layout:g.eventData}),a})},s.animate=function(a,b,c){function d(a){return Array.isArray(g)?a>=g.length?g[0]:g[a]:g}function e(a){return Array.isArray(h)?a>=h.length?h[0]:h[a]:h}if(a=E.getGraphDiv(a),!t.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var f=a._transitionData;f._frameQueue||(f._frameQueue=[]),c=x.supplyAnimationDefaults(c);var g=c.transition,h=c.frame;return void 0===f._frameWaitingCnt&&(f._frameWaitingCnt=0),new Promise(function(h,i){function j(){if(0!==f._frameQueue.length){for(;f._frameQueue.length;){var b=f._frameQueue.pop();b.onInterrupt&&b.onInterrupt()}a.emit("plotly_animationinterrupted",[])}}function k(b){if(0!==b.length){for(var g=0;g<b.length;g++){var j;j="byname"===b[g].type?x.computeFrame(a,b[g].name):b[g].data;var k=e(g),l=d(g);l.duration=Math.min(l.duration,k.duration);var m={frame:j,name:b[g].name,frameOpts:k,transitionOpts:l};g===b.length-1&&(m.onComplete=h,m.onInterrupt=i),f._frameQueue.push(m)}"immediate"===c.mode&&(f._lastFrameAt=-(1/0)),f._animationRaf||n()}}function l(){a.emit("plotly_animated"),window.cancelAnimationFrame(f._animationRaf),f._animationRaf=null}function m(){f._currentFrame&&f._currentFrame.onComplete&&(f._currentFrame.onComplete(),f._currentFrame.onComplete=null);var b=f._currentFrame=f._frameQueue.shift();b?(a._fullLayout._currentFrame=b.name,f._lastFrameAt=Date.now(),f._timeToNext=b.frameOpts.duration,x.transition(a,b.frame.data,b.frame.layout,E.coerceTraceIndices(a,b.frame.traces),b.frameOpts,b.transitionOpts),a.emit("plotly_animatingframe",{name:b.name,frame:b.frame,animation:{frame:b.frameOpts,transition:b.transitionOpts}})):l()}function n(){a.emit("plotly_animating"),f._lastFrameAt=-(1/0),f._timeToNext=0,f._runningTransitions=0,f._currentFrame=null;var b=function(){f._animationRaf=window.requestAnimationFrame(b),Date.now()-f._lastFrameAt>f._timeToNext&&m()};b()}function o(a){return Array.isArray(g)?r>=g.length?a.transitionOpts=g[r]:a.transitionOpts=g[0]:a.transitionOpts=g,r++,a}var p,q,r=0,s=[],u=void 0===b||null===b,v=Array.isArray(b),w=!u&&!v&&t.isPlainObject(b);if(w)s.push({type:"object",data:o(t.extendFlat({},b))});else if(u||"string"==typeof b)for(p=0;p<f._frames.length;p++)q=f._frames[p],(u||q.group===b)&&s.push({type:"byname",name:q.name,data:o({name:q.name})});else if(v)for(p=0;p<b.length;p++){var y=b[p];"string"==typeof y?s.push({type:"byname",name:y,data:o({name:y})}):s.push({type:"object",data:o(t.extendFlat({},y))})}for(p=0;p<s.length;p++)if(q=s[p],"byname"===q.type&&!f._frameHash[q.data.name])return t.warn('animate failure: frame not found: "'+q.data.name+'"'),void i();["next","immediate"].indexOf(c.mode)!==-1&&j(),"reverse"===c.direction&&s.reverse();var z=a._fullLayout._currentFrame;if(z&&c.fromcurrent){var A=-1;for(p=0;p<s.length;p++)if(q=s[p],"byname"===q.type&&q.name===z){A=p;break}if(A>0&&A<s.length-1){var B=[];for(p=0;p<s.length;p++)q=s[p],("byname"!==s[p].type||p>A)&&B.push(q);s=B}}s.length>0?k(s):(a.emit("plotly_animated"),h())})},s.addFrames=function(a,b,c){if(a=E.getGraphDiv(a),null===b||void 0===b)return Promise.resolve();if(!t.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var d,e,f,g,h=a._transitionData._frames,i=a._transitionData._frameHash;if(!Array.isArray(b))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+b);var j=h.length+2*b.length,k=[];for(d=b.length-1;d>=0;d--)k.push({frame:x.supplyFrameDefaults(b[d]),index:c&&void 0!==c[d]&&null!==c[d]?c[d]:j+d});k.sort(function(a,b){return a.index>b.index?-1:a.index<b.index?1:0});var l=[],m=[],n=h.length;for(d=k.length-1;d>=0;d--){if(e=k[d].frame,!e.name)for(;i[e.name="frame "+a._transitionData._counter++];);if(i[e.name]){for(f=0;f<h.length&&h[f].name!==e.name;f++);l.push({type:"replace",index:f,value:e}),m.unshift({type:"replace",index:f,value:h[f]})}else g=Math.max(0,Math.min(k[d].index,n)),l.push({type:"insert",index:g,value:e}),m.unshift({type:"delete",index:g}),n++}var o=x.modifyFrames,p=x.modifyFrames,q=[a,m],r=[a,l];return v&&v.add(a,o,q,p,r),x.modifyFrames(a,l)},s.deleteFrames=function(a,b){if(a=E.getGraphDiv(a),!t.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a);var c,d,e=a._transitionData._frames,f=[],g=[];for(b=b.slice(0),b.sort(),c=b.length-1;c>=0;c--)d=b[c],f.push({type:"delete",index:d}),g.unshift({type:"insert",index:d,value:e[d]});var h=x.modifyFrames,i=x.modifyFrames,j=[a,g],k=[a,f];return v&&v.add(a,h,j,i,k),x.modifyFrames(a,f)},s.purge=function(a){a=E.getGraphDiv(a);var b=a._fullLayout||{},c=a._fullData||[];return x.cleanPlot([],{},c,b),x.purge(a),u.purge(a),b._container&&b._container.remove(),delete a._context,delete a._replotPending,delete a._mouseDownTime,delete a._hmpixcount,delete a._hmlumcount,a}},{"../components/drawing":557,"../components/errorbars":563,"../constants/xmlns_namespaces":618,"../lib":632,"../lib/events":624,"../lib/queue":640,"../lib/svg_text_utils":646,"../plotly":658,"../plots/cartesian/graph_interact":670,"../plots/plots":723,"../plots/polar":726,"../registry":738,"./helpers":649,"./subroutines":655,d3:95,"fast-isnumeric":104}],651:[function(a,b,c){"use strict";function d(a,c){try{a._fullLayout._paper.style("background",c)}catch(a){b.exports.logging>0&&console.error(a)}}b.exports={staticPlot:!1,editable:!1,autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:d,topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:!1,globalTransforms:[]}},{}],652:[function(a,b,c){"use strict";function d(a){var b=s.attributes,c=j({type:a}),d=l(a),e=n(a),f={},g={};f.type=null,x(f,b),f=h(c.attributes,f,"attributes",a),void 0!==e.attributes&&x(f,e.attributes),f.type=a,f=k(f),i(f),B.traces[a]=w({},d,{attributes:f}),void 0!==c.layoutAttributes&&(g=h(c.layoutAttributes,g,"layoutAttributes",a),i(g),B.traces[a].layoutAttributes=g)}function e(){var a=s.layoutAttributes,b={};b=h(a,b,"layoutAttributes","*"),b=m(b),b=o(b),b=k(b),i(b),p(b),B.layout={layoutAttributes:b}}function f(a){var b=r.transformsRegistry[a],c={};c=h(c,b.attributes||{},"attributes","*"),c=k(c),i(c),p(c),B.transforms[a]={attributes:c}}function g(){B.defs={valObjects:t.valObjects,metaKeys:t.UNDERSCORE_ATTRS.concat(["description","role"])}}function h(a,b,c,d){var e,f,g,i,k;return Object.keys(a).forEach(function(l){return l===z?void Object.keys(a[l]).forEach(function(i){e=j({_module:a[l][i]}),void 0!==e&&(f=e[c],g=h(f,{},c,d),t.nestedProperty(b,i).set(x({},g)))}):l===A?void Object.keys(a[l]).forEach(function(e){e===d&&(i=j({_module:a[l][e]}),void 0!==i&&(k=i[c],k=h(k,{},c,d),y(b,k)))}):void(b[l]=t.isPlainObject(a[l])?y({},a[l]):a[l])}),b}function i(a){function b(a){return{valType:"string"}}function c(a,c,d){C.isValObject(a)?"data_array"===a.valType?(a.role="data",d[c+"src"]=b(c)):a.arrayOk===!0&&(d[c+"src"]=b(c)):t.isPlainObject(a)&&(a.role="object")}t.crawl(a,c)}function j(a){if("type"in a)return"area"===a.type?{attributes:u}:r.getModule({type:a.type});var b=r.subplotsRegistry,c=r.componentsRegistry,d=a._module;return b[d]?b[d]:c[d]?c[d]:q[d]}function k(a){return Object.keys(a).forEach(function(b){"_"===b.charAt(0)&&t.UNDERSCORE_ATTRS.indexOf(b)===-1&&delete a[b]}),a}function l(a){return"area"===a?{}:r.modules[a].meta||{}}function m(a){return w(a,{radialaxis:v.radialaxis,angularaxis:v.angularaxis}),w(a,v.layout),a}function n(a){if("area"===a)return{};var b=r.subplotsRegistry,c=Object.keys(b).filter(function(b){return r.traceIs({type:a},b)})[0];return void 0===c?{}:b[c]}function o(a){var b=r.subplotsRegistry;return Object.keys(a).forEach(function(c){Object.keys(b).forEach(function(d){var e,f=b[d];f.attrRegex&&(e="cartesian"===d||"gl2d"===d?f.attrRegex.x.test(c)||f.attrRegex.y.test(c):f.attrRegex.test(c),e&&(a[c][t.IS_SUBPLOT_OBJ]=!0))})}),a}function p(a){function b(a,b,c){if(a[t.IS_LINKED_TO_ARRAY]===!0){var d=b.substr(0,b.length-1);delete a[t.IS_LINKED_TO_ARRAY],c[b]={items:{}},c[b].items[d]=a,c[b].role="object"}}t.crawl(a,b)}var q=a("../plotly"),r=a("../registry"),s=a("../plots/plots"),t=a("../lib"),u=a("../plots/polar/area_attributes"),v=a("../plots/polar/axis_attributes"),w=t.extendFlat,x=t.extendDeep,y=t.extendDeepAll,z="_nestedModules",A="_composedModules",B={traces:{},layout:{},transforms:{},defs:{}},C=b.exports={};C.get=function(){return r.allTypes.concat("area").forEach(d),e(),Object.keys(r.transformsRegistry).forEach(f),g(),B},C.crawl=t.crawl,C.isValObject=t.isValObject},{"../lib":632,"../plotly":658,"../plots/plots":723,"../plots/polar/area_attributes":724,"../plots/polar/axis_attributes":725,"../registry":738}],653:[function(a,b,c){"use strict";function d(a){g.register(a,a.name,a.categories,a.meta),g.subplotsRegistry[a.basePlotModule.name]||g.registerSubplot(a.basePlotModule)}function e(a){if("string"!=typeof a.name)throw new Error("Transform module *name* must be a string.");var b="Transform module "+a.name,c="function"==typeof a.transform,d="function"==typeof a.calcTransform;if(!c&&!d)throw new Error(b+" is missing a *transform* or *calcTransform* method.");c&&d&&h.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),h.isPlainObject(a.attributes)||h.log(b+" registered without an *attributes* object."),"function"!=typeof a.supplyDefaults&&h.log(b+" registered without a *supplyDefaults* method."),g.transformsRegistry[a.name]=a}function f(a){g.componentsRegistry[a.name]=a}var g=a("../registry"),h=a("../lib");b.exports=function(a){if(!a)throw new Error("No argument passed to Plotly.register.");a&&!Array.isArray(a)&&(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];if(!c)throw new Error("Invalid module was attempted to be registered!");switch(c.moduleType){case"trace":d(c);break;case"transform":e(c);break;case"component":f(c);break;default:throw new Error("Invalid module was attempted to be registered!")}}}},{"../lib":632,"../registry":738}],654:[function(a,b,c){"use strict";var d=a("../plotly"),e=a("../lib");b.exports=function(a){return e.extendFlat(d.defaultConfig,a)}},{"../lib":632,"../plotly":658}],655:[function(a,b,c){"use strict";var d=a("../plotly"),e=a("../registry"),f=a("../plots/plots"),g=a("../lib"),h=a("../components/color"),i=a("../components/drawing"),j=a("../components/titles"),k=a("../components/modebar");c.layoutStyles=function(a){return g.syncOrAsync([f.doAutoMargin,c.lsInner],a)},c.lsInner=function(a){var b,e=a._fullLayout,f=e._size,j=d.Axes.list(a);for(b=0;b<j.length;b++)j[b]._linepositions={};e._paperdiv.style({width:e.width+"px",height:e.height+"px"}).selectAll(".main-svg").call(i.setSize,e.width,e.height),a._context.setBackground(a,e.paper_bgcolor);var l=[];return e._paper.selectAll("g.subplot").each(function(b){var c=e._plots[b],j=d.Axes.getFromId(a,b,"x"),k=d.Axes.getFromId(a,b,"y");j.setScale(),k.setScale(),c.bg&&c.bg.call(i.setRect,j._offset-f.p,k._offset-f.p,j._length+2*f.p,k._length+2*f.p).call(h.fill,e.plot_bgcolor),c.clipId="clip"+e._uid+b+"plot";var m=e._defs.selectAll("g.clips").selectAll("#"+c.clipId).data([0]);m.enter().append("clipPath").attr({"class":"plotclip",id:c.clipId}).append("rect"),m.selectAll("rect").attr({width:j._length,height:k._length}),c.plot.call(g.setTranslate,j._offset,k._offset),c.plot.call(i.setClipUrl,c.clipId);var n=i.crispRound(a,j.linewidth,1),o=i.crispRound(a,k.linewidth,1),p=f.p+o,q="M"+-p+",",r="h"+(j._length+2*p),s="free"===j.anchor&&l.indexOf(j._id)===-1,t=f.h*(1-(j.position||0))+n/2%1,u=j.anchor===k._id&&(j.mirror||"top"!==j.side)||"all"===j.mirror||"allticks"===j.mirror||j.mirrors&&j.mirrors[k._id+"bottom"],v=k._length+f.p+n/2,w=j.anchor===k._id&&(j.mirror||"top"===j.side)||"all"===j.mirror||"allticks"===j.mirror||j.mirrors&&j.mirrors[k._id+"top"],x=-f.p-n/2,y=f.p,z=u?0:n,A=w?0:n,B=","+(-y-A)+"v"+(k._length+2*y+A+z),C="free"===k.anchor&&l.indexOf(k._id)===-1,D=f.w*(k.position||0)+o/2%1,E=k.anchor===j._id&&(k.mirror||"right"!==k.side)||"all"===k.mirror||"allticks"===k.mirror||k.mirrors&&k.mirrors[j._id+"left"],F=-f.p-o/2,G=k.anchor===j._id&&(k.mirror||"right"===k.side)||"all"===k.mirror||"allticks"===k.mirror||k.mirrors&&k.mirrors[j._id+"right"],H=j._length+f.p+o/2;j._linepositions[b]=[u?v:void 0,w?x:void 0,s?t:void 0],j.anchor===k._id?j._linepositions[b][3]="top"===j.side?x:v:s&&(j._linepositions[b][3]=t),k._linepositions[b]=[E?F:void 0,G?H:void 0,C?D:void 0],k.anchor===j._id?k._linepositions[b][3]="right"===k.side?H:F:C&&(k._linepositions[b][3]=D);var I="translate("+j._offset+","+k._offset+")",J=I,K=I;s&&(J="translate("+j._offset+","+f.t+")",x+=k._offset-f.t,v+=k._offset-f.t),C&&(K="translate("+f.l+","+k._offset+")",F+=j._offset-f.l,H+=j._offset-f.l),c.xlines.attr("transform",J).attr("d",(u?q+v+r:"")+(w?q+x+r:"")+(s?q+t+r:"")||"M0,0").style("stroke-width",n+"px").call(h.stroke,j.showline?j.linecolor:"rgba(0,0,0,0)"),c.ylines.attr("transform",K).attr("d",(E?"M"+F+B:"")+(G?"M"+H+B:"")+(C?"M"+D+B:"")||"M0,0").attr("stroke-width",o+"px").call(h.stroke,k.showline?k.linecolor:"rgba(0,0,0,0)"),c.xaxislayer.attr("transform",J),c.yaxislayer.attr("transform",K),c.gridlayer.attr("transform",I),c.zerolinelayer.attr("transform",I),c.draglayer.attr("transform",I),s&&l.push(j._id),C&&l.push(k._id)}),d.Axes.makeClipPaths(a),c.drawMainTitle(a),k.manage(a),a._promises.length&&Promise.all(a._promises)},c.drawMainTitle=function(a){var b=a._fullLayout;j.draw(a,"gtitle",{propContainer:b,propName:"title",dfltName:"Plot",attributes:{x:b.width/2,y:b._size.t/2,"text-anchor":"middle"}})},c.doTraceStyle=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b],d=((c[0]||{}).trace||{})._module||{},g=d.arraysToCalcdata;g&&g(c)}return f.style(a),e.getComponentMethod("legend","draw")(a),f.previousPromises(a)},c.doColorBars=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b][0];if((c.t||{}).cb){var d=c.trace,g=c.t.cb;e.traceIs(d,"contour")&&g.line({width:d.contours.showlines!==!1?d.line.width:0,dash:d.line.dash,color:"line"===d.contours.coloring?g._opts.line.color:d.line.color}),e.traceIs(d,"markerColorscale")?g.options(d.marker.colorbar)():g.options(d.colorbar)()}}return f.previousPromises(a)},c.layoutReplot=function(a){var b=a.layout;return a.layout=void 0,d.plot(a,"",b)},c.doLegend=function(a){return e.getComponentMethod("legend","draw")(a),f.previousPromises(a)},c.doTicksRelayout=function(a){return d.Axes.doTicks(a,"redraw"),c.drawMainTitle(a),f.previousPromises(a)},c.doModeBar=function(a){var b,c,e=a._fullLayout;for(k.manage(a),d.Fx.supplyLayoutDefaults(a.layout,a._fullLayout,a._fullData),d.Fx.init(a),b=f.getSubplotIds(e,"gl3d"),c=0;c<b.length;c++){var g=e[b[c]]._scene;g.updateFx(e.dragmode,e.hovermode)}for(b=f.getSubplotIds(e,"gl2d"),c=0;c<b.length;c++){var h=e._plots[b[c]]._scene2d;h.updateFx(e)}for(b=f.getSubplotIds(e,"geo"),c=0;c<b.length;c++){var i=e[b[c]]._subplot;i.updateFx(e.hovermode)}return f.previousPromises(a)}},{"../components/color":533,"../components/drawing":557,"../components/modebar":580,"../components/titles":608,"../lib":632,"../plotly":658,"../plots/plots":723,"../registry":738}],656:[function(a,b,c){"use strict";function d(a,b){var c=new Promise(function(c,d){function l(){var a=h.getDelay(o._fullLayout);return new Promise(function(c,d){setTimeout(function(){var a=j(o),e=document.createElement("canvas");e.id=g.randstr(),k({format:b.format,width:o._fullLayout.width,height:o._fullLayout.height,canvas:e,svg:a,promise:!0}).then(function(a){o&&document.body.removeChild(o),c(a)})["catch"](function(a){d(a)})},a)})}b=b||{},b.format=b.format||"png";var m=function(a){return void 0===a||null===a||!!(e(a)&&a>1)};m(b.width)&&m(b.height)||d(new Error("Height and width should be pixel values."));var n=i(a,{format:"png",height:b.height,width:b.width}),o=n.td;o.style.position="absolute",o.style.left="-5000px",document.body.appendChild(o);var p=h.getRedrawFunc(o);f.plot(o,n.data,n.layout,n.config).then(p).then(l).then(function(a){c(a)})["catch"](function(a){d(a)})});return c}var e=a("fast-isnumeric"),f=a("../plotly"),g=a("../lib"),h=a("../snapshot/helpers"),i=a("../snapshot/cloneplot"),j=a("../snapshot/tosvg"),k=a("../snapshot/svgtoimg");b.exports=d},{"../lib":632,"../plotly":658,"../snapshot/cloneplot":739,"../snapshot/helpers":742,"../snapshot/svgtoimg":744,"../snapshot/tosvg":746,"fast-isnumeric":104}],657:[function(a,b,c){"use strict";function d(a,b,c,e,f,j){j=j||[];for(var k=Object.keys(a),m=0;m<k.length;m++){var n=k[m];if("transforms"!==n){var q=j.slice();q.push(n);var r=a[n],s=b[n],t=i(c,n),u="info_array"===(t||{}).valType;if(h(c,n))if(o(r)&&o(s))d(r,s,t,e,f,q);else if(t.items&&!u&&p(r)){var v,w,x=n.substr(0,n.length-1),y=[];for(v=0;v<s.length;v++){var z=t.items[x],A=s[v]._index||v;w=q.slice(),w.push(A),o(r[A])&&o(s[v])&&(y.push(A),d(r[A],s[v],z,e,f,w))}for(v=0;v<r.length;v++)w=q.slice(),w.push(v),o(r[v])?y.indexOf(v)===-1&&e.push(g("unused",f,w)):e.push(g("object",f,w,r[v]))}else!o(r)&&o(s)?e.push(g("object",f,q,r)):p(r)||!p(s)||u?n in b?l.validate(r,t)||e.push(g("value",f,q,r)):e.push(g("unused",f,q,r)):e.push(g("array",f,q,r));else e.push(g("schema",f,q))}}return e}function e(a,b){for(var c=0;c<b.length;c++){var d=b[c].type,e=a.traces[d].layoutAttributes;e&&l.extendFlat(a.layout.layoutAttributes,e)}return a.layout.layoutAttributes;
}function f(a){return p(a)?"In data trace "+a[1]+", ":"In "+a+", "}function g(a,b,c,d){c=c||"";var e,f;p(b)?(e=b[0],f=b[1]):(e=b,f=null);var g=k(c),h=q[a](b,g,d);return l.log(h),{code:a,container:e,trace:f,path:c,astr:g,msg:h}}function h(a,b){var c=j(b),d=c.keyMinusId,e=c.id;return!!(d in a&&a[d]._isSubplotObj&&e)||b in a}function i(a,b){var c=j(b);return a[c.keyMinusId]}function j(a){var b=/([2-9]|[1-9][0-9]+)$/,c=a.split(b)[0],d=a.substr(c.length,a.length);return{keyMinusId:c,id:d}}function k(a){if(!p(a))return String(a);for(var b="",c=0;c<a.length;c++){var d=a[c];"number"==typeof d?b=b.substr(0,b.length-1)+"["+d+"]":b+=d,c<a.length-1&&(b+=".")}return b}var l=a("../lib"),m=a("../plots/plots"),n=a("./plot_schema"),o=l.isPlainObject,p=Array.isArray;b.exports=function(a,b){var c,f,h=n.get(),i=[],j={};p(a)?(j.data=l.extendDeep([],a),c=a):(j.data=[],c=[],i.push(g("array","data"))),o(b)?(j.layout=l.extendDeep({},b),f=b):(j.layout={},f={},arguments.length>1&&i.push(g("object","layout"))),m.supplyDefaults(j);for(var k=j._fullData,q=c.length,r=0;r<q;r++){var s=c[r],t=["data",r];if(o(s)){var u=k[r],v=u.type,w=h.traces[v].attributes;w.type={valType:"enumerated",values:[v]},u.visible===!1&&s.visible!==!1&&i.push(g("invisible",t)),d(s,u,w,i,t);var x=s.transforms,y=u.transforms;if(x){p(x)||i.push(g("array",t,["transforms"])),t.push("transforms");for(var z=0;z<x.length;z++){var A=["transforms",z],B=x[z].type;if(o(x[z])){var C=h.transforms[B]?h.transforms[B].attributes:{};C.type={valType:"enumerated",values:Object.keys(h.transforms)},d(x[z],y[z],C,i,t,A)}else i.push(g("object",t,A))}}}else i.push(g("object",t))}var D=j._fullLayout,E=e(h,k);return d(f,D,E,i,"layout"),0===i.length?void 0:i};var q={object:function(a,b){var c;return c="layout"===a&&""===b?"The layout argument":"data"===a[0]&&""===b?"Trace "+a[1]+" in the data argument":f(a)+"key "+b,c+" must be linked to an object container"},array:function(a,b){var c;return c="data"===a?"The data argument":f(a)+"key "+b,c+" must be linked to an array container"},schema:function(a,b){return f(a)+"key "+b+" is not part of the schema"},unused:function(a,b,c){var d=o(c)?"container":"key";return f(a)+d+" "+b+" did not get coerced"},invisible:function(a){return"Trace "+a[1]+" got defaulted to be not visible"},value:function(a,b,c){return[f(a)+"key "+b,"is set to an invalid value ("+c+")"].join(" ")}}},{"../lib":632,"../plots/plots":723,"./plot_schema":652}],658:[function(a,b,c){"use strict";c.defaultConfig=a("./plot_api/plot_config"),c.Plots=a("./plots/plots"),c.Axes=a("./plots/cartesian/axes"),c.Fx=a("./plots/cartesian/graph_interact"),c.Color=a("./components/color"),c.Drawing=a("./components/drawing"),c.Colorscale=a("./components/colorscale"),c.Colorbar=a("./components/colorbar"),c.ErrorBars=a("./components/errorbars"),c.Annotations=a("./components/annotations"),c.Shapes=a("./components/shapes"),c.Legend=a("./components/legend"),c.Images=a("./components/images"),c.UpdateMenus=a("./components/updatemenus"),c.Sliders=a("./components/sliders"),c.ModeBar=a("./components/modebar"),a("./plot_api/plot_api")},{"./components/annotations":531,"./components/color":533,"./components/colorbar":538,"./components/colorscale":548,"./components/drawing":557,"./components/errorbars":563,"./components/images":569,"./components/legend":577,"./components/modebar":580,"./components/shapes":601,"./components/sliders":607,"./components/updatemenus":613,"./plot_api/plot_api":650,"./plot_api/plot_config":651,"./plots/cartesian/axes":662,"./plots/cartesian/graph_interact":670,"./plots/plots":723}],659:[function(a,b,c){"use strict";b.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],660:[function(a,b,c){"use strict";b.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0,max:1e4,dflt:500}}}},{}],661:[function(a,b,c){"use strict";b.exports={xaxis:{valType:"subplotid",dflt:"x"},yaxis:{valType:"subplotid",dflt:"y"}}},{}],662:[function(a,b,c){"use strict";function d(a){var b,c,d=a.tickvals,e=a.ticktext,f=new Array(d.length),g=1.0001*a.range[0]-1e-4*a.range[1],i=1.0001*a.range[1]-1e-4*a.range[0],j=Math.min(g,i),k=Math.max(g,i),l=0;for(Array.isArray(e)||(e=[]),c=0;c<d.length;c++)b=a.d2l(d[c]),b>j&&b<k&&(void 0===e[c]?f[l]=A.tickText(a,b):f[l]=h(a,b,String(e[c])),l++);return l<d.length&&f.splice(l,d.length-l),f}function e(a,b,c){return b*v.roundUp(a/b,c)}function f(a){var b,c=a.dtick;if(a._tickexponent=0,t(c)||"string"==typeof c||(c=1),"category"===a.type)a._tickround=null;else if(t(c)||"L"===c.charAt(0))if("date"===a.type)c>=864e5?a._tickround="d":c>=36e5?a._tickround="H":c>=6e4?a._tickround="M":c>=1e3?a._tickround="S":a._tickround=3-Math.round(Math.log(c/2)/Math.LN10);else{t(c)||(c=Number(c.substr(1))),a._tickround=2-Math.floor(Math.log(c)/Math.LN10+.01),b="log"===a.type?Math.pow(10,Math.max(a.range[0],a.range[1])):Math.max(Math.abs(a.range[0]),Math.abs(a.range[1]));var d=Math.floor(Math.log(b)/Math.LN10+.01);Math.abs(d)>3&&("SI"===a.exponentformat||"B"===a.exponentformat?a._tickexponent=3*Math.round((d-1)/3):a._tickexponent=d)}else"M"===c.charAt(0)?a._tickround=2===c.length?"m":"y":a._tickround=null}function g(a,b){var c=a.match(P),d=new Date(b);if(c){var e=Math.min(+c[1]||6,6),f=String(b/1e3%1+2.0000005).substr(2,e).replace(/0+$/,"")||"0";return s.time.format(a.replace(P,f))(d)}return s.time.format(a)(d)}function h(a,b,c){var d=a.tickfont||a._gd._fullLayout.font;return{x:b,dx:0,dy:0,text:c||"",fontSize:d.size,font:d.family,fontColor:d.color}}function i(a,b,c,d){var e,f=b.x,h=a._tickround,i=new Date(f),j="";c&&a.hoverformat?e=g(a.hoverformat,f):a.tickformat?e=g(a.tickformat,f):(d&&(t(h)?h+=2:h={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[h]),"y"===h?e=J(i):"m"===h?e=K(i):(f!==a._tmin||c||(j="<br>"+J(i)),"d"===h?e=L(i):"H"===h?e=M(i):(f!==a._tmin||c||(j="<br>"+L(i)+", "+J(i)),e=N(i),"M"!==h&&(e+=O(i),"S"!==h&&(e+=m(r(f/1e3,1),a,"none",c).substr(1)))))),b.text=e+j}function j(a,b,c,d,e){var f=a.dtick,g=b.x;if(!d||"string"==typeof f&&"L"===f.charAt(0)||(f="L3"),a.tickformat||"string"==typeof f&&"L"===f.charAt(0))b.text=m(Math.pow(10,g),a,e,d);else if(t(f)||"D"===f.charAt(0)&&r(g+.01,1)<.1)if(["e","E","power"].indexOf(a.exponentformat)!==-1){var h=Math.round(g);0===h?b.text=1:1===h?b.text="10":h>1?b.text="10<sup>"+h+"</sup>":b.text="10<sup>−"+-h+"</sup>",b.fontSize*=1.25}else b.text=m(Math.pow(10,g),a,"","fakehover"),"D1"===f&&"y"===a._id.charAt(0)&&(b.dy-=b.fontSize/6);else{if("D"!==f.charAt(0))throw"unrecognized dtick "+String(f);b.text=String(Math.round(Math.pow(10,r(g,1)))),b.fontSize*=.75}if("D1"===a.dtick){var i=String(b.text).charAt(0);"0"!==i&&"1"!==i||("y"===a._id.charAt(0)?b.dx-=b.fontSize/4:(b.dy+=b.fontSize/2,b.dx+=(a.range[1]>a.range[0]?1:-1)*b.fontSize*(g<0?.5:.25)))}}function k(a,b){var c=a._categories[Math.round(b.x)];void 0===c&&(c=""),b.text=String(c)}function l(a,b,c,d,e){"all"===a.showexponent&&Math.abs(b.x/a.dtick)<1e-6&&(e="hide"),b.text=m(b.x,a,e,d)}function m(a,b,c,d){var e=a<0,g=b._tickround,h=c||b.exponentformat||"B",i=b._tickexponent,j=b.tickformat,k=b.separatethousands;if(d){var l={exponentformat:b.exponentformat,dtick:"none"===b.showexponent?b.dtick:t(a)?Math.abs(a)||1:1,range:"none"===b.showexponent?b.range:[0,a||1]};f(l),g=(Number(l._tickround)||0)+4,i=l._tickexponent,b.hoverformat&&(j=b.hoverformat)}if(j)return s.format(j)(a).replace(/-/g,"−");var m=Math.pow(10,-g)/2;if("none"===h&&(i=0),a=Math.abs(a),a<m)a="0",e=!1;else{if(a+=m,i&&(a*=Math.pow(10,-i),g+=i),0===g)a=String(Math.floor(a));else if(g<0){a=String(Math.round(a)),a=a.substr(0,a.length+g);for(var n=g;n<0;n++)a+="0"}else{a=String(a);var o=a.indexOf(".")+1;o&&(a=a.substr(0,o+g).replace(/\.?0+$/,""))}a=v.numSeparate(a,b._gd._fullLayout.separators,k)}if(i&&"hide"!==h){var p;p=i<0?"−"+-i:"power"!==h?"+"+i:String(i),"e"===h||("SI"===h||"B"===h)&&(i>12||i<-15)?a+="e"+p:"E"===h?a+="E"+p:"power"===h?a+="×10<sup>"+p+"</sup>":"B"===h&&9===i?a+="B":"SI"!==h&&"B"!==h||(a+=Q[i/3+5])}return e?"−"+a:a}function n(a,b){var c,d,e=[];for(c=0;c<b.length;c++){var f=[],g=a._fullData[b[c]].xaxis,h=a._fullData[b[c]].yaxis;if(g&&h){for(d=0;d<e.length;d++)e[d].x.indexOf(g)===-1&&e[d].y.indexOf(h)===-1||f.push(d);if(f.length){var i,j=e[f[0]];if(f.length>1)for(d=1;d<f.length;d++)i=e[f[d]],o(j.x,i.x),o(j.y,i.y);o(j.x,[g]),o(j.y,[h])}else e.push({x:[g],y:[h]})}}return e}function o(a,b){for(var c=0;c<b.length;c++)a.indexOf(b[c])===-1&&a.push(b[c])}function p(a,b,c){var d,e,f=[],g=[],h=a.layout;for(d=0;d<b.length;d++)f.push(A.getFromId(a,b[d]));for(d=0;d<c.length;d++)g.push(A.getFromId(a,c[d]));var i=Object.keys(f[0]),j=["anchor","domain","overlaying","position","side","tickangle"],k=["linear","log"];for(d=0;d<i.length;d++){var l=i[d],m=f[0][l],n=g[0][l],o=!0,p=!1,r=!1;if("_"!==l.charAt(0)&&"function"!=typeof m&&j.indexOf(l)===-1){for(e=1;e<f.length&&o;e++){var s=f[e][l];"type"===l&&k.indexOf(m)!==-1&&k.indexOf(s)!==-1&&m!==s?p=!0:s!==m&&(o=!1)}for(e=1;e<g.length&&o;e++){var t=g[e][l];"type"===l&&k.indexOf(n)!==-1&&k.indexOf(t)!==-1&&n!==t?r=!0:g[e][l]!==n&&(o=!1)}o&&(p&&(h[f[0]._name].type="linear"),r&&(h[g[0]._name].type="linear"),q(h,l,f,g))}}for(d=0;d<a._fullLayout.annotations.length;d++){var u=a._fullLayout.annotations[d];b.indexOf(u.xref)!==-1&&c.indexOf(u.yref)!==-1&&v.swapAttrs(h.annotations[d],["?"])}}function q(a,b,c,d){var e,f=v.nestedProperty,g=f(a[c[0]._name],b).get(),h=f(a[d[0]._name],b).get();for("title"===b&&("Click to enter X axis title"===g&&(g="Click to enter Y axis title"),"Click to enter Y axis title"===h&&(h="Click to enter X axis title")),e=0;e<c.length;e++)f(a,c[e]._name+"."+b).set(h);for(e=0;e<d.length;e++)f(a,d[e]._name+"."+b).set(g)}function r(a,b){return(a%b+b)%b}var s=a("d3"),t=a("fast-isnumeric"),u=a("../../registry"),v=a("../../lib"),w=a("../../lib/svg_text_utils"),x=a("../../components/titles"),y=a("../../components/color"),z=a("../../components/drawing"),A=b.exports={};A.layoutAttributes=a("./layout_attributes"),A.supplyLayoutDefaults=a("./layout_defaults"),A.setConvert=a("./set_convert");var B=a("./axis_ids");A.id2name=B.id2name,A.cleanId=B.cleanId,A.list=B.list,A.listIds=B.listIds,A.getFromId=B.getFromId,A.getFromTrace=B.getFromTrace,A.coerceRef=function(a,b,c,d,e){var f=c._fullLayout._has("gl2d")?[]:A.listIds(c,d),g=d+"ref",h={};return h[g]={valType:"enumerated",values:f.concat(["paper"]),dflt:e||f[0]||"paper"},v.coerce(a,b,h,g)},A.coerceARef=function(a,b,c,d,e){var f=c._fullLayout._has("gl2d")?[]:A.listIds(c,d),g="a"+d+"ref",h={};return h[g]={valType:"enumerated",values:f.concat(["pixel"]),dflt:e||"pixel"||f[0]},v.coerce(a,b,h,g)},A.clearTypes=function(a,b){Array.isArray(b)&&b.length||(b=a._fullData.map(function(a,b){return b})),b.forEach(function(b){var c=a.data[b];delete(A.getFromId(a,c.xaxis)||{}).type,delete(A.getFromId(a,c.yaxis)||{}).type})},A.counterLetter=function(a){var b=a.charAt(0);return"x"===b?"y":"y"===b?"x":void 0},A.minDtick=function(a,b,c,d){["log","category"].indexOf(a.type)===-1&&d?null===a._minDtick?(a._minDtick=b,a._forceTick0=c):a._minDtick&&((a._minDtick/b+1e-6)%1<2e-6&&((c-a._forceTick0)/b%1+1.000001)%1<2e-6?(a._minDtick=b,a._forceTick0=c):((b/a._minDtick+1e-6)%1>2e-6||((c-a._forceTick0)/a._minDtick%1+1.000001)%1>2e-6)&&(a._minDtick=0)):a._minDtick=0},A.getAutoRange=function(a){var b,c=[],d=a._min[0].val,e=a._max[0].val;for(b=1;b<a._min.length&&d===e;b++)d=Math.min(d,a._min[b].val);for(b=1;b<a._max.length&&d===e;b++)e=Math.max(e,a._max[b].val);var f,g,h,i,j,k,l,m=0,n=a.range&&a.range[1]<a.range[0];for("reversed"===a.autorange&&(n=!0,a.autorange=!0),b=0;b<a._min.length;b++)for(g=a._min[b],f=0;f<a._max.length;f++)h=a._max[f],l=h.val-g.val,k=a._length-g.pad-h.pad,l>0&&k>0&&l/k>m&&(i=g,j=h,m=l/k);if(d===e){var o=d-1,p=d+1;c="tozero"===a.rangemode?d<0?[o,0]:[0,p]:"nonnegative"===a.rangemode?[Math.max(0,o),Math.max(0,p)]:[o,p]}else m&&("linear"!==a.type&&"-"!==a.type||("tozero"===a.rangemode?(i.val>=0&&(i={val:0,pad:0}),j.val<=0&&(j={val:0,pad:0})):"nonnegative"===a.rangemode&&(i.val-m*i.pad<0&&(i={val:0,pad:0}),j.val<0&&(j={val:1,pad:0})),m=(j.val-i.val)/(a._length-i.pad-j.pad)),c=[i.val-m*i.pad,j.val+m*j.pad]);return c[0]===c[1]&&("tozero"===a.rangemode?c=c[0]<0?[c[0],0]:c[0]>0?[0,c[0]]:[0,1]:(c=[c[0]-1,c[0]+1],"nonnegative"===a.rangemode&&(c[0]=Math.max(0,c[0])))),n&&c.reverse(),c},A.doAutoRange=function(a){a._length||a.setScale();var b=a._min&&a._max&&a._min.length&&a._max.length;if(a.autorange&&b){a.range=A.getAutoRange(a);var c=a._gd.layout[a._name];c||(a._gd.layout[a._name]=c={}),c!==a&&(c.range=a.range.slice(),c.autorange=a.autorange)}},A.saveRangeInitial=function(a,b){for(var c=A.list(a,"",!0),d=!1,e=0;e<c.length;e++){var f=c[e],g=void 0===f._rangeInitial,h=g||!(f.range[0]===f._rangeInitial[0]&&f.range[1]===f._rangeInitial[1]);(g&&f.autorange===!1||b&&h)&&(f._rangeInitial=f.range.slice(),d=!0)}return d};var C=Number.MAX_VALUE/2;A.expand=function(a,b,c){function d(a){if(Array.isArray(a))return function(b){return Math.max(Number(a[b]||0),0)};var b=Math.max(Number(a||0),0);return function(){return b}}function e(c){function d(a){return t(a)&&Math.abs(a)<C}if(i=b[c],t(i)){if(l=u(c)+r,m=v(c)+r,o=i-x(c),p=i+w(c),"log"===a.type&&o<p/10&&(o=p/10),j=a.c2l(o),k=a.c2l(p),s&&(j=Math.min(0,j),k=Math.max(0,k)),d(j)){for(n=!0,g=0;g<a._min.length&&n;g++)h=a._min[g],h.val<=j&&h.pad>=m?n=!1:h.val>=j&&h.pad<=m&&(a._min.splice(g,1),g--);n&&a._min.push({val:j,pad:s&&0===j?0:m})}if(d(k)){for(n=!0,g=0;g<a._max.length&&n;g++)h=a._max[g],h.val>=k&&h.pad>=l?n=!1:h.val<=k&&h.pad<=l&&(a._max.splice(g,1),g--);n&&a._max.push({val:k,pad:s&&0===k?0:l})}}}if((a.autorange||a._needsExpand)&&b){a._min||(a._min=[]),a._max||(a._max=[]),c||(c={}),a._m||a.setScale();var f,g,h,i,j,k,l,m,n,o,p,q=b.length,r=c.padded?.05*a._length:0,s=c.tozero&&("linear"===a.type||"-"===a.type),u=d((a._m>0?c.ppadplus:c.ppadminus)||c.ppad||0),v=d((a._m>0?c.ppadminus:c.ppadplus)||c.ppad||0),w=d(c.vpadplus||c.vpad),x=d(c.vpadminus||c.vpad);for(f=0;f<6;f++)e(f);for(f=q-1;f>5;f--)e(f)}},A.autoBin=function(a,b,c,d){function e(a){return(1+100*(a-n)/l.dtick)%100<2}var f=v.aggNums(Math.min,null,a),g=v.aggNums(Math.max,null,a);if("category"===b.type)return{start:f-.5,end:g+.5,size:1};var h;if(c)h=(g-f)/c;else{var i=v.distinctVals(a),j=Math.pow(10,Math.floor(Math.log(i.minDiff)/Math.LN10)),k=j*v.roundUp(i.minDiff/j,[.9,1.9,4.9,9.9],!0);h=Math.max(k,2*v.stdev(a)/Math.pow(a.length,d?.25:.4))}var l={type:"log"===b.type?"linear":b.type,range:[f,g]};A.autoTicks(l,h);var m,n=A.tickIncrement(A.tickFirst(l),l.dtick,"reverse");if("number"==typeof l.dtick){for(var o=0,p=0,q=0,r=0,s=0;s<a.length;s++)a[s]%1===0?q++:t(a[s])||r++,e(a[s])&&o++,e(a[s]+l.dtick/2)&&p++;var u=a.length-r;if(q===u&&"date"!==b.type)l.dtick<1?n=f-.5*l.dtick:n-=.5;else if(p<.1*u&&(o>.3*u||e(f)||e(g))){var w=l.dtick/2;n+=n+w<f?w:-w}var x=1+Math.floor((g-n)/l.dtick);m=n+x*l.dtick}else for(m=n;m<=g;)m=A.tickIncrement(m,l.dtick);return{start:n,end:m,size:l.dtick}},A.calcTicks=function(a){if("array"===a.tickmode)return d(a);if("auto"===a.tickmode||!a.dtick){var b,c=a.nticks;c||("category"===a.type?(b=a.tickfont?1.2*(a.tickfont.size||12):15,c=a._length/b):(b="y"===a._id.charAt(0)?40:80,c=v.constrain(a._length/b,4,9)+1)),A.autoTicks(a,Math.abs(a.range[1]-a.range[0])/c),a._minDtick>0&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a._forceTick0)}a.tick0||(a.tick0="date"===a.type?new Date(2e3,0,1).getTime():0),f(a),a._tmin=A.tickFirst(a);var e=a.range[1]<a.range[0],g=[],h=1.0001*a.range[1]-1e-4*a.range[0];"category"===a.type&&(h=e?Math.max(-.5,h):Math.min(a._categories.length-.5,h));for(var i=a._tmin;(e?i>=h:i<=h)&&(g.push(i),!(g.length>1e3));i=A.tickIncrement(i,a.dtick,e));a._tmax=g[g.length-1];for(var j=new Array(g.length),k=0;k<g.length;k++)j[k]=A.tickText(a,g[k]);return j};var D=[2,5,10],E=[1,2,3,6,12],F=[1,2,5,10,15,30],G=[1,2,3,7,14],H=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],I=[-.301,0,.301,.699,1];A.autoTicks=function(a,b){var c;if("date"===a.type)a.tick0=new Date(2e3,0,1).getTime(),b>157788e5?(b/=315576e5,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick="M"+12*e(b,c,D)):b>12096e5?(b/=26298e5,a.dtick="M"+e(b,1,E)):b>432e5?(a.dtick=e(b,864e5,G),a.tick0=new Date(2e3,0,2).getTime()):b>18e5?a.dtick=e(b,36e5,E):b>3e4?a.dtick=e(b,6e4,F):b>500?a.dtick=e(b,1e3,F):(c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick=e(b,c,D));else if("log"===a.type)if(a.tick0=0,b>.7)a.dtick=Math.ceil(b);else if(Math.abs(a.range[1]-a.range[0])<1){var d=1.5*Math.abs((a.range[1]-a.range[0])/b);b=Math.abs(Math.pow(10,a.range[1])-Math.pow(10,a.range[0]))/d,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick="L"+e(b,c,D)}else a.dtick=b>.3?"D2":"D1";else"category"===a.type?(a.tick0=0,a.dtick=Math.ceil(Math.max(b,1))):(a.tick0=0,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick=e(b,c,D));if(0===a.dtick&&(a.dtick=1),!t(a.dtick)&&"string"!=typeof a.dtick){var f=a.dtick;throw a.dtick=1,"ax.dtick error: "+String(f)}},A.tickIncrement=function(a,b,c){var d=c?-1:1;if(t(b))return a+d*b;var e=b.charAt(0),f=d*Number(b.substr(1));if("M"===e){var g=new Date(a);return g.setMonth(g.getMonth()+f)}if("L"===e)return Math.log(Math.pow(10,a)+f)/Math.LN10;if("D"===e){var h="D2"===b?I:H,i=a+.01*d,j=v.roundUp(r(i,1),h,c);return Math.floor(i)+Math.log(s.round(Math.pow(10,j),1))/Math.LN10}throw"unrecognized dtick "+String(b)},A.tickFirst=function(a){var b=a.range[1]<a.range[0],c=b?Math.floor:Math.ceil,d=1.0001*a.range[0]-1e-4*a.range[1],e=a.dtick,f=a.tick0;if(t(e)){var g=c((d-f)/e)*e+f;return"category"===a.type&&(g=v.constrain(g,0,a._categories.length-1)),g}var h,i,j,k=e.charAt(0),l=Number(e.substr(1));if("M"===k){for(h=new Date(f),d=new Date(d),i=12*(d.getFullYear()-h.getFullYear())+d.getMonth()-h.getMonth(),j=h.setMonth(h.getMonth()+(Math.round(i/l)+(b?1:-1))*l);b?j>d:j<d;)j=A.tickIncrement(j,e,b);return j}if("L"===k)return Math.log(c((Math.pow(10,d)-f)/l)*l+f)/Math.LN10;if("D"===k){var m="D2"===e?I:H,n=v.roundUp(r(d,1),m,b);return Math.floor(d)+Math.log(s.round(Math.pow(10,n),1))/Math.LN10}throw"unrecognized dtick "+String(e)};var J=s.time.format("%Y"),K=s.time.format("%b %Y"),L=s.time.format("%b %-d"),M=s.time.format("%b %-d %Hh"),N=s.time.format("%H:%M"),O=s.time.format(":%S"),P=/%(\d?)f/g;A.tickText=function(a,b,c){function d(d){var e;return void 0===d||(c?"none"===d:(e={first:a._tmin,last:a._tmax}[d],"all"!==d&&b!==e))}var e,f,g=h(a,b),m="array"===a.tickmode,n=c||m;if(m&&Array.isArray(a.ticktext)){var o=Math.abs(a.range[1]-a.range[0])/1e4;for(f=0;f<a.ticktext.length&&!(Math.abs(b-a.d2l(a.tickvals[f]))<o);f++);if(f<a.ticktext.length)return g.text=String(a.ticktext[f]),g}return e="none"!==a.exponentformat&&d(a.showexponent)?"hide":"","date"===a.type?i(a,g,c,n):"log"===a.type?j(a,g,c,n,e):"category"===a.type?k(a,g):l(a,g,c,n,e),a.tickprefix&&!d(a.showtickprefix)&&(g.text=a.tickprefix+g.text),a.ticksuffix&&!d(a.showticksuffix)&&(g.text+=a.ticksuffix),g};var Q=["f","p","n","μ","m","","k","M","G","T"];A.subplotMatch=/^x([0-9]*)y([0-9]*)$/,A.getSubplots=function(a,b){function c(a,b){return a.indexOf(b._id)!==-1}var d,e,f,g=[],h=a._fullData||a.data||[];for(d=0;d<h.length;d++){var i=h[d];if(i.visible!==!1&&"legendonly"!==i.visible&&(u.traceIs(i,"cartesian")||u.traceIs(i,"gl2d"))){var j=i.xaxis||"x",k=i.yaxis||"y";f=j+k,g.indexOf(f)===-1&&g.push(f)}}var l=A.list(a,"",!0);for(d=0;d<l.length;d++){var m=l[d],n=m._id.charAt(0),o="free"===m.anchor?"x"===n?"y":"x":m.anchor,p=A.getFromId(a,o),q=!1;for(e=0;e<g.length;e++)if(c(g[e],m)){q=!0;break}"free"===m.anchor&&q||p&&(f="x"===n?m._id+p._id:p._id+m._id,g.indexOf(f)===-1&&g.push(f))}var r=A.subplotMatch,s=[];for(d=0;d<g.length;d++)f=g[d],r.test(f)&&s.push(f);return s.sort(function(a,b){var c=a.match(r),d=b.match(r);return c[1]===d[1]?+(c[2]||1)-(d[2]||1):+(c[1]||0)-(d[1]||0)}),b?A.findSubplotsWithAxis(s,b):s},A.findSubplotsWithAxis=function(a,b){for(var c=new RegExp("x"===b._id.charAt(0)?"^"+b._id+"y":b._id+"$"),d=[],e=0;e<a.length;e++){var f=a[e];c.test(f)&&d.push(f)}return d},A.makeClipPaths=function(a){var b,c,d=a._fullLayout,e=d._defs,f={_offset:0,_length:d.width,_id:""},g={_offset:0,_length:d.height,_id:""},h=A.list(a,"x",!0),i=A.list(a,"y",!0),j=[];for(b=0;b<h.length;b++)for(j.push({x:h[b],y:g}),c=0;c<i.length;c++)0===b&&j.push({x:f,y:i[c]}),j.push({x:h[b],y:i[c]});var k=e.selectAll("g.clips").data([0]);k.enter().append("g").classed("clips",!0);var l=k.selectAll(".axesclip").data(j,function(a){return a.x._id+a.y._id});l.enter().append("clipPath").classed("axesclip",!0).attr("id",function(a){return"clip"+d._uid+a.x._id+a.y._id}).append("rect"),l.exit().remove(),l.each(function(a){s.select(this).select("rect").attr({x:a.x._offset||0,y:a.y._offset||0,width:a.x._length||1,height:a.y._length||1})})},A.doTicks=function(a,b,c){function d(a){var b=j.l2p(a.x);return b>1&&b<j._length-1}function e(a,b){var c=a.selectAll("path."+E).data("inside"===j.ticks?Q:C,D);b&&j.ticks?(c.enter().append("path").classed(E,1).classed("ticks",1).classed("crisp",1).call(y.stroke,j.tickcolor).style("stroke-width",M+"px").attr("d",b),c.attr("transform",n),c.exit().remove()):c.remove()}function f(c,d){function e(a,b){a.each(function(a){var c=o(b),d=s.select(this),e=d.select(".text-math-group"),f=n(a)+(t(b)&&0!==+b?" rotate("+b+","+l(a)+","+(m(a)-a.fontSize/2)+")":"");if(e.empty()){var g=d.select("text").attr({transform:f,"text-anchor":c});g.empty()||g.selectAll("tspan.line").attr({x:g.attr("x"),y:g.attr("y")})}else{var h=z.bBox(e.node()).width*{end:-.5,start:.5}[c];e.attr("transform",f+(h?"translate("+h+",0)":""))}})}function f(){return A.length&&Promise.all(A)}function h(){if(e(k,j.tickangle),"x"===q&&!t(j.tickangle)&&("log"!==j.type||"D"!==String(j.dtick).charAt(0))){var a=[];for(k.each(function(b){var c=s.select(this),d=c.select(".text-math-group"),e=j.l2p(b.x);d.empty()&&(d=c.select("text"));var f=z.bBox(d.node());a.push({top:0,bottom:10,height:10,left:e-f.width/2,right:e+f.width/2+2,width:f.width+2})}),p=0;p<a.length-1;p++)if(v.bBoxIntersect(a[p],a[p+1])){y=30;break}if(y){var c=Math.abs((C[C.length-1].x-C[0].x)*j._m)/(C.length-1);c<2.5*x&&(y=90),e(k,y)}j._lastangle=y}return g(b),b+" done"}function i(){j._boundingBox=c.node().getBoundingClientRect()}var k=c.selectAll("g."+E).data(C,D);if(!j.showticklabels||!t(d))return k.remove(),void g(b);var l,m,o,r,u;"x"===q?(u="bottom"===O?1:-1,l=function(a){return a.dx+J*u},r=d+(I+H)*u,m=function(a){return a.dy+r+a.fontSize*("bottom"===O?1:-.5)},o=function(a){return t(a)&&0!==a&&180!==a?a*u<0?"end":"start":"middle"}):(u="right"===O?1:-1,m=function(a){return a.dy+a.fontSize/2-J*u},l=function(a){return a.dx+d+(I+H+(90===Math.abs(j.tickangle)?a.fontSize/2:0))*u},o=function(a){return t(a)&&90===Math.abs(a)?"middle":"right"===O?"start":"end"});var x=0,y=0,A=[];k.enter().append("g").classed(E,1).append("text").attr("text-anchor","middle").each(function(b){var c=s.select(this),d=a._promises.length;c.call(z.setPosition,l(b),m(b)).call(z.font,b.font,b.fontSize,b.fontColor).text(b.text).call(w.convertToTspans),d=a._promises[d],d?A.push(a._promises.pop().then(function(){e(c,j.tickangle)})):e(c,j.tickangle)}),k.exit().remove(),k.each(function(a){x=Math.max(x,a.fontSize)}),e(k,j._lastangle||j.tickangle);var B=v.syncOrAsync([f,h,i]);return B&&B.then&&a._promises.push(B),B}function g(b){if(!c){var d,e,f,g,h=B.getFromId(a,b),i=s.select(a).selectAll("g."+b+"tick"),j={selection:i,side:h.side},l=b.charAt(0),m=a._fullLayout._size,n=1.5,o=h.titlefont.size;if(i.size()){var p=s.select(i.node().parentNode).attr("transform").match(/translate\(([-\.\d]+),([-\.\d]+)\)/);p&&(j.offsetLeft=+p[1],j.offsetTop=+p[2])}"x"===l?(e="free"===h.anchor?{_offset:m.t+(1-(h.position||0))*m.h,_length:0}:B.getFromId(a,h.anchor),f=h._offset+h._length/2,g=e._offset+("top"===h.side?-10-o*(n+(h.showticklabels?1:0)):e._length+10+o*(n+(h.showticklabels?1.5:.5))),h.rangeslider&&h.rangeslider.visible&&h._boundingBox&&(g+=(k.height-k.margin.b-k.margin.t)*h.rangeslider.thickness+h._boundingBox.height),j.side||(j.side="bottom")):(e="free"===h.anchor?{_offset:m.l+(h.position||0)*m.w,_length:0}:B.getFromId(a,h.anchor),g=h._offset+h._length/2,f=e._offset+("right"===h.side?e._length+10+o*(n+(h.showticklabels?1:.5)):-10-o*(n+(h.showticklabels?.5:0))),d={rotate:"-90",offset:0},j.side||(j.side="left")),x.draw(a,b+"title",{propContainer:h,propName:h._name+".title",dfltName:l.toUpperCase()+" axis",avoid:j,transform:d,attributes:{x:f,y:g,"text-anchor":"middle"}})}}function h(a,b){return a.visible===!0&&a.xaxis+a.yaxis===b&&(!(!u.traceIs(a,"bar")||a.orientation!=={x:"h",y:"v"}[q])||a.fill&&a.fill.charAt(a.fill.length-1)===q)}function i(b,c,e){var f=b.gridlayer,g=b.zerolinelayer,i=b["hidegrid"+q]?[]:Q,k=j._gridpath||"M0,0"+("x"===q?"v":"h")+c._length,l=f.selectAll("path."+F).data(j.showgrid===!1?[]:i,D);if(l.enter().append("path").classed(F,1).classed("crisp",1).attr("d",k).each(function(a){j.zeroline&&("linear"===j.type||"-"===j.type)&&Math.abs(a.x)<j.dtick/100&&s.select(this).remove()}),l.attr("transform",n).call(y.stroke,j.gridcolor||"#ddd").style("stroke-width",K+"px"),l.exit().remove(),g){for(var m=!1,o=0;o<a._fullData.length;o++)if(h(a._fullData[o],e)){m=!0;break}var p=j.range[0]*j.range[1]<=0&&j.zeroline&&("linear"===j.type||"-"===j.type)&&i.length&&(m||d({x:0})||!j.showline),r=g.selectAll("path."+G).data(p?[{x:0}]:[]);r.enter().append("path").classed(G,1).classed("zl",1).classed("crisp",1).attr("d",k),r.attr("transform",n).call(y.stroke,j.zerolinecolor||y.defaultLine).style("stroke-width",L+"px"),r.exit().remove()}}var j,k=a._fullLayout,l=!1;if("object"==typeof b)j=b,b=j._id,l=!0;else if(j=A.getFromId(a,b),"redraw"===b&&k._paper.selectAll("g.subplot").each(function(a){var b=k._plots[a],c=b.xaxis,d=b.yaxis;b.xaxislayer.selectAll("."+c._id+"tick").remove(),b.yaxislayer.selectAll("."+d._id+"tick").remove(),b.gridlayer.selectAll("path").remove(),b.zerolinelayer.selectAll("path").remove()}),!b||"redraw"===b)return v.syncOrAsync(A.list(a,"",!0).map(function(c){return function(){if(c._id){var d=A.doTicks(a,c._id);return"redraw"===b&&(c._r=c.range.slice()),d}}}));j.tickformat||(["none","e","E","power","SI","B"].indexOf(j.exponentformat)===-1&&(j.exponentformat="e"),["all","first","last","none"].indexOf(j.showexponent)===-1&&(j.showexponent="all")),j.range=[+j.range[0],+j.range[1]],j.setScale();var m,n,o,p,q=b.charAt(0),r=A.counterLetter(b),C=A.calcTicks(j),D=function(a){return a.text+a.x+j.mirror},E=b+"tick",F=b+"grid",G=b+"zl",H=(j.linewidth||1)/2,I=("outside"===j.ticks?j.ticklen:1)+(j.linewidth||0),J=0,K=z.crispRound(a,j.gridwidth,1),L=z.crispRound(a,j.zerolinewidth,K),M=z.crispRound(a,j.tickwidth,1);if(j._counterangle&&"outside"===j.ticks){var N=j._counterangle*Math.PI/180;I=j.ticklen*Math.cos(N)+(j.linewidth||0),J=j.ticklen*Math.sin(N)}if("x"===q)m=["bottom","top"],n=function(a){return"translate("+j.l2p(a.x)+",0)"},o=function(a,b){if(j._counterangle){var c=j._counterangle*Math.PI/180;return"M0,"+a+"l"+Math.sin(c)*b+","+Math.cos(c)*b}return"M0,"+a+"v"+b};else{if("y"!==q)return void v.warn("Unrecognized doTicks axis:",b);m=["left","right"],n=function(a){return"translate(0,"+j.l2p(a.x)+")"},o=function(a,b){if(j._counterangle){var c=j._counterangle*Math.PI/180;return"M"+a+",0l"+Math.cos(c)*b+","+-Math.sin(c)*b}return"M"+a+",0h"+b}}var O=j.side||m[0],P=[-1,1,O===m[1]?1:-1];"inside"!==j.ticks==("x"===q)&&(P=P.map(function(a){return-a}));var Q=C.filter(d);if(l){if(e(j._axislayer,o(j._pos+H*P[2],P[2]*j.ticklen)),j._counteraxis){var R={gridlayer:j._gridlayer,zerolinelayer:j._zerolinelayer};i(R,j._counteraxis)}return f(j._axislayer,j._pos)}var S=A.getSubplots(a,j).map(function(a){var b=k._plots[a];if(k._has("cartesian")){var c=b[q+"axislayer"],d=j._linepositions[a]||[],g=b[r+"axis"],h=g._id===j.anchor,l=[!1,!1,!1],n="";if("allticks"===j.mirror?l=[!0,!0,!1]:h&&("ticks"===j.mirror?l=[!0,!0,!1]:l[m.indexOf(O)]=!0),j.mirrors)for(p=0;p<2;p++){var s=j.mirrors[g._id+m[p]];"ticks"!==s&&"labels"!==s||(l[p]=!0)}return void 0!==d[2]&&(l[2]=!0),l.forEach(function(a,b){var c=d[b],e=P[b];a&&t(c)&&(n+=o(c+H*e,e*j.ticklen))}),e(c,n),i(b,g,a),f(c,d[3])}}).filter(function(a){return a&&a.then});return S.length?Promise.all(S):0},A.swap=function(a,b){for(var c=n(a,b),d=0;d<c.length;d++)p(a,c[d].x,c[d].y)}},{"../../components/color":533,"../../components/drawing":557,"../../components/titles":608,"../../lib":632,"../../lib/svg_text_utils":646,"../../registry":738,"./axis_ids":665,"./layout_attributes":672,"./layout_defaults":673,"./set_convert":677,d3:95,"fast-isnumeric":104}],663:[function(a,b,c){"use strict";function d(a){if(!a)return!1;for(var b=0;b<a.length;b++)if(g(a[b]))return!0;return!1}function e(a){for(var b,c=0,d=0,e=Math.max(1,(a.length-1)/1e3),f=0;f<a.length;f+=e)b=a[Math.round(f)],h.isDateTime(b)&&(c+=1),g(b)&&(d+=1);return c>2*d}function f(a){for(var b,c=Math.max(1,(a.length-1)/1e3),d=0,e=0,f=0;f<a.length;f+=c)b=i(a[Math.round(f)]),g(b)?d++:"string"==typeof b&&""!==b&&"None"!==b&&e++;return e>2*d}var g=a("fast-isnumeric"),h=a("../../lib"),i=a("./clean_datum");b.exports=function(a){return e(a)?"date":f(a)?"category":d(a)?"linear":"-"}},{"../../lib":632,"./clean_datum":667,"fast-isnumeric":104}],664:[function(a,b,c){"use strict";function d(a,b){if("-"===a.type){var c=a._id,d=c.charAt(0);c.indexOf("scene")!==-1&&(c=d);var h=g(b,c,d);if(h){if("histogram"===h.type&&d==={v:"y",h:"x"}[h.orientation||"v"])return void(a.type="linear");if(f(h,d)){for(var i,k=e(h),l=[],m=0;m<b.length;m++)i=b[m],j.traceIs(i,"box")&&(i[d+"axis"]||d)===c&&(void 0!==i[k]?l.push(i[k][0]):void 0!==i.name?l.push(i.name):l.push("text"));a.type=u(l)}else a.type=u(h[d]||[h[d+"0"]])}}}function e(a){return{v:"x",h:"y"}[a.orientation||"v"]}function f(a,b){var c=e(a);return j.traceIs(a,"box")&&b===c&&void 0===a[c]&&void 0===a[c+"0"]}function g(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if((e[c+"axis"]||c)===b){if(f(e,c))return e;if((e[c]||[]).length||e[c+"0"])return e}}}var h=a("fast-isnumeric"),i=a("tinycolor2").mix,j=a("../../registry"),k=a("../../lib"),l=a("../../components/color/attributes").lightFraction,m=a("./layout_attributes"),n=a("./tick_value_defaults"),o=a("./tick_mark_defaults"),p=a("./tick_label_defaults"),q=a("./category_order_defaults"),r=a("./set_convert"),s=a("./ordered_categories"),t=a("./axis_ids"),u=a("./axis_autotype");b.exports=function(a,b,c,e){function f(c,d){return k.coerce2(a,b,m,c,d)}var g=e.letter,j=e.font||{},u="Click to enter "+(e.title||g.toUpperCase()+" axis")+" title";e.name&&(b._name=e.name,b._id=t.name2id(e.name));var v=c("type");"-"===v&&(d(b,e.data),"-"===b.type?b.type="linear":v=a.type=b.type),r(b);var w=c("color"),x=w===a.color?w:j.color;c("title",u),k.coerceFont(c,"titlefont",{family:j.family,size:Math.round(1.2*j.size),color:x});var y=2===(a.range||[]).length&&h(a.range[0])&&h(a.range[1]),z=c("autorange",!y);z&&c("rangemode");var A=c("range",[-1,"x"===g?6:4]);A[0]===A[1]&&(b.range=[A[0]-1,A[0]+1]),k.noneOrAll(a.range,b.range,[0,1]),
c("fixedrange"),n(a,b,c,v),p(a,b,c,v,e),o(a,b,c,e),q(a,b,c);var B=f("linecolor",w),C=f("linewidth"),D=c("showline",!!B||!!C);D||(delete b.linecolor,delete b.linewidth),(D||b.ticks)&&c("mirror");var E=f("gridcolor",i(w,e.bgColor,l).toRgbString()),F=f("gridwidth"),G=c("showgrid",e.showGrid||!!E||!!F);G||(delete b.gridcolor,delete b.gridwidth);var H=f("zerolinecolor",w),I=f("zerolinewidth"),J=c("zeroline",e.showGrid||!!H||!!I);return J||(delete b.zerolinecolor,delete b.zerolinewidth),b._initialCategories="category"===v?s(g,b.categoryorder,b.categoryarray,e.data):[],b}},{"../../components/color/attributes":532,"../../lib":632,"../../registry":738,"./axis_autotype":663,"./axis_ids":665,"./category_order_defaults":666,"./layout_attributes":672,"./ordered_categories":674,"./set_convert":677,"./tick_label_defaults":678,"./tick_mark_defaults":679,"./tick_value_defaults":680,"fast-isnumeric":104,tinycolor2:489}],665:[function(a,b,c){"use strict";function d(a,b,c){function d(a,c){for(var d=Object.keys(a),e=/^[xyz]axis[0-9]*/,f=[],g=0;g<d.length;g++){var h=d[g];b&&h.charAt(0)!==b||e.test(h)&&f.push(c+h)}return f.sort()}var e=a._fullLayout;if(!e)return[];var g=d(e,"");if(c)return g;for(var h=f.getSubplotIds(e,"gl3d")||[],i=0;i<h.length;i++){var j=h[i];g=g.concat(d(e[j],j+"."))}return g}var e=a("../../registry"),f=a("../plots"),g=a("../../lib"),h=a("./constants");c.id2name=function(a){if("string"==typeof a&&a.match(h.AX_ID_PATTERN)){var b=a.substr(1);return"1"===b&&(b=""),a.charAt(0)+"axis"+b}},c.name2id=function(a){if(a.match(h.AX_NAME_PATTERN)){var b=a.substr(5);return"1"===b&&(b=""),a.charAt(0)+b}},c.cleanId=function(a,b){if(a.match(h.AX_ID_PATTERN)&&(!b||a.charAt(0)===b)){var c=a.substr(1).replace(/^0+/,"");return"1"===c&&(c=""),a.charAt(0)+c}},c.list=function(a,b,c){return d(a,b,c).map(function(b){return g.nestedProperty(a._fullLayout,b).get()})},c.listIds=function(a,b){return d(a,b,!0).map(c.name2id)},c.getFromId=function(a,b,d){var e=a._fullLayout;return"x"===d?b=b.replace(/y[0-9]*/,""):"y"===d&&(b=b.replace(/x[0-9]*/,"")),e[c.id2name(b)]},c.getFromTrace=function(a,b,d){var f=a._fullLayout,g=null;if(e.traceIs(b,"gl3d")){var h=b.scene;"scene"===h.substr(0,5)&&(g=f[h][d+"axis"])}else g=c.getFromId(a,b[d+"axis"]||d);return g}},{"../../lib":632,"../../registry":738,"../plots":723,"./constants":668}],666:[function(a,b,c){"use strict";b.exports=function(a,b,c){if("category"===b.type){var d,e=a.categoryarray,f=Array.isArray(e)&&e.length>0;f&&(d="array");var g=c("categoryorder",d);"array"===g&&c("categoryarray"),f||"array"!==g||(b.categoryorder="trace")}}},{}],667:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib");b.exports=function(a){try{if("object"==typeof a&&null!==a&&a.getTime)return e.ms2DateTime(a);if("string"!=typeof a&&!d(a))return"";a=a.toString().replace(/['"%,$# ]/g,"")}catch(b){e.error(b,a)}return a}},{"../../lib":632,"fast-isnumeric":104}],668:[function(a,b,c){"use strict";b.exports={idRegex:{x:/^x([2-9]|[1-9][0-9]+)?$/,y:/^y([2-9]|[1-9][0-9]+)?$/},attrRegex:{x:/^xaxis([2-9]|[1-9][0-9]+)?$/,y:/^yaxis([2-9]|[1-9][0-9]+)?$/},BADNUM:void 0,xAxisMatch:/^xaxis[0-9]*$/,yAxisMatch:/^yaxis[0-9]*$/,AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,DBLCLICKDELAY:300,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,BENDPX:1.5,REDRAWDELAY:50}},{}],669:[function(a,b,c){"use strict";function d(a,b){var c,d=a.range[b],e=Math.abs(d-a.range[1-b]);return"date"===a.type?l.ms2DateTime(d,e):"log"===a.type?(c=Math.ceil(Math.max(0,-Math.log(e)/Math.LN10))+3,h.format("."+c+"g")(Math.pow(10,d))):(c=Math.floor(Math.log(Math.abs(d))/Math.LN10)-Math.floor(Math.log(e)/Math.LN10)+4,h.format("."+String(c)+"g")(d))}function e(a,b){return a?"nsew"===a?"pan"===b?"move":"crosshair":a.toLowerCase()+"-resize":"pointer"}function f(a){h.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function g(a){var b=["lasso","select"];return b.indexOf(a)!==-1}var h=a("d3"),i=a("tinycolor2"),j=a("../../plotly"),k=a("../../registry"),l=a("../../lib"),m=a("../../lib/svg_text_utils"),n=a("../../components/color"),o=a("../../components/drawing"),p=a("../../lib/setcursor"),q=a("../../components/dragelement"),r=a("./axes"),s=a("./select"),t=a("./constants"),u=!0;b.exports=function(a,b,c,h,v,w,x,y){function z(a,b){for(var c=0;c<a.length;c++)if(!a[c].fixedrange)return b;return""}function A(a){a[0]=Number(a[0]),a[1]=Number(a[1])}function B(){Q=[b.xaxis],R=[b.yaxis],S=Q[0]._length,T=R[0]._length;for(var a=1;a<P.length;a++){var c=P[a].xaxis,d=P[a].yaxis;Q.indexOf(c)===-1&&Q.push(c),R.indexOf(d)===-1&&R.push(d)}$=Q.concat(R),_=z(Q,y),aa=z(R,x),ba=e(aa+_,O.dragmode),qa=b.xaxis._offset,ra=b.yaxis._offset,fa.xa=Q,fa.ya=R}function C(b,c,d){var e=ea.getBoundingClientRect();ga=c-e.left,ha=d-e.top,ia={l:ga,r:ga,w:0,t:ha,b:ha,h:0},ja=a._hmpixcount?a._hmlumcount/a._hmpixcount:i(a._fullLayout.plot_bgcolor).getLuminance(),ka="M0,0H"+S+"V"+T+"H0V0",la=!1,ma="xy",na=pa.append("path").attr("class","zoombox").style({fill:ja>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+qa+", "+ra+")").attr("d",ka+"Z"),oa=pa.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+qa+", "+ra+")").attr("d","M0,0Z"),D();for(var f=0;f<$.length;f++)A($[f].range)}function D(){pa.selectAll(".select-outline").remove()}function E(b,c){if(a._transitioningWithDuration)return!1;var d=Math.max(0,Math.min(S,b+ga)),e=Math.max(0,Math.min(T,c+ha)),f=Math.abs(d-ga),g=Math.abs(e-ha),h=Math.floor(Math.min(g,f,V)/2);ia.l=Math.min(ga,d),ia.r=Math.max(ga,d),ia.t=Math.min(ha,e),ia.b=Math.max(ha,e),!aa||g<Math.min(Math.max(.6*f,U),V)?f<U?(ma="",ia.r=ia.l,ia.t=ia.b,oa.attr("d","M0,0Z")):(ia.t=0,ia.b=T,ma="x",oa.attr("d","M"+(ia.l-.5)+","+(ha-V-.5)+"h-3v"+(2*V+1)+"h3ZM"+(ia.r+.5)+","+(ha-V-.5)+"h3v"+(2*V+1)+"h-3Z")):!_||f<Math.min(.6*g,V)?(ia.l=0,ia.r=S,ma="y",oa.attr("d","M"+(ga-V-.5)+","+(ia.t-.5)+"v-3h"+(2*V+1)+"v3ZM"+(ga-V-.5)+","+(ia.b+.5)+"v3h"+(2*V+1)+"v-3Z")):(ma="xy",oa.attr("d","M"+(ia.l-3.5)+","+(ia.t-.5+h)+"h3v"+-h+"h"+h+"v-3h-"+(h+3)+"ZM"+(ia.r+3.5)+","+(ia.t-.5+h)+"h-3v"+-h+"h"+-h+"v-3h"+(h+3)+"ZM"+(ia.r+3.5)+","+(ia.b+.5-h)+"h-3v"+h+"h"+-h+"v3h"+(h+3)+"ZM"+(ia.l-3.5)+","+(ia.b+.5-h)+"h3v"+h+"h"+h+"v3h-"+(h+3)+"Z")),ia.w=ia.r-ia.l,ia.h=ia.b-ia.t,na.attr("d",ka+"M"+ia.l+","+ia.t+"v"+ia.h+"h"+ia.w+"v-"+ia.h+"h-"+ia.w+"Z"),la||(na.transition().style("fill",ja>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oa.transition().style("opacity",1).duration(200),la=!0)}function F(a,b,c){var d,e,f;for(d=0;d<a.length;d++)e=a[d],e.fixedrange||(f=e.range,e.range=[f[0]+(f[1]-f[0])*b,f[0]+(f[1]-f[0])*c])}function G(b,c){return Math.min(ia.h,ia.w)<2*U?(2===c&&L(),f(a)):("xy"!==ma&&"x"!==ma||F(Q,ia.l/S,ia.r/S),"xy"!==ma&&"y"!==ma||F(R,(T-ia.b)/T,(T-ia.t)/T),f(a),M(ma),void(u&&a.data&&a._context.showTips&&(l.notifier("Double-click to<br>zoom back out","long"),u=!1)))}function H(b,c){var e=1===(x+y).length;if(b)M();else if(2!==c||e){if(1===c&&e){var f=x?R[0]:Q[0],g="s"===x||"w"===y?0:1,h=f._name+".range["+g+"]",i=d(f,g),k="left",l="middle";if(f.fixedrange)return;x?(l="n"===x?"top":"bottom","right"===f.side&&(k="right")):"e"===y&&(k="right"),da.call(m.makeEditable,null,{immediate:!0,background:O.paper_bgcolor,text:String(i),fill:f.tickfont?f.tickfont.color:"#444",horizontalAlign:k,verticalAlign:l}).on("edit",function(b){var c="category"===f.type?f.c2l(b):f.d2l(b);void 0!==c&&j.relayout(a,h,c)})}}else L()}function I(b){function c(a,b,c){if(!a.fixedrange){A(a.range);var d=a.range,e=d[0]+(d[1]-d[0])*b;a.range=[e+(d[0]-e)*c,e+(d[1]-e)*c]}}if(a._context.scrollZoom||O._enablescrollzoom){if(a._transitioningWithDuration)return l.pauseEvent(b);var d=a.querySelector(".plotly");if(B(),!(d.scrollHeight-d.clientHeight>10||d.scrollWidth-d.clientWidth>10)){clearTimeout(ta);var e=-b.deltaY;if(isFinite(e)||(e=b.wheelDelta/10),!isFinite(e))return void l.log("Did not find wheel motion attributes: ",b);var f,g=Math.exp(-Math.min(Math.max(e,-20),20)/100),h=va.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(b.clientX-h.left)/h.width,j=sa[0]+sa[2]*i,k=(h.bottom-b.clientY)/h.height,m=sa[1]+sa[3]*(1-k);if(y){for(f=0;f<Q.length;f++)c(Q[f],i,g);sa[2]*=g,sa[0]=j-sa[2]*i}if(x){for(f=0;f<R.length;f++)c(R[f],k,g);sa[3]*=g,sa[1]=m-sa[3]*(1-k)}return N(sa),K(x,y),ta=setTimeout(function(){sa=[0,0,S,T],M()},ua),l.pauseEvent(b)}}}function J(b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.fixedrange||(d.range=[d._r[0]-b/d._m,d._r[1]-b/d._m])}}function e(a){return 1-(a>=0?Math.min(a,.9):1/(1/Math.max(a,-.3)+3.222))}function f(a,b,c){for(var d=1-b,f=0,g=0;g<a.length;g++){var h=a[g];h.fixedrange||(f=g,h.range[b]=h._r[d]+(h._r[b]-h._r[d])/e(c/h._length))}return a[f]._length*(a[f]._r[b]-a[f].range[b])/(a[f]._r[b]-a[f]._r[d])}if(!a._transitioningWithDuration){if(B(),"ew"===_||"ns"===aa)return _&&d(Q,b),aa&&d(R,c),N([_?-b:0,aa?-c:0,S,T]),void K(aa,_);"w"===_?b=f(Q,0,b):"e"===_?b=f(Q,1,-b):_||(b=0),"n"===aa?c=f(R,1,c):"s"===aa?c=f(R,0,-c):aa||(c=0),N(["w"===_?b:0,"n"===aa?c:0,S-b,T-c]),K(aa,_)}}function K(b,c){function d(a){for(f=0;f<a.length;f++)a[f].fixedrange||g.push(a[f]._id)}function e(d,e){for(f=0;f<d.length;f++){var h=d[f];(c&&g.indexOf(h.xref)!==-1||b&&g.indexOf(h.yref)!==-1)&&e(a,f)}}var f,g=[];for(c&&d(Q),b&&d(R),f=0;f<g.length;f++)r.doTicks(a,g[f],!0);e(O.annotations||[],k.getComponentMethod("annotations","drawOne")),e(O.shapes||[],k.getComponentMethod("shapes","drawOne")),e(O.images||[],k.getComponentMethod("images","draw"))}function L(){if(!a._transitioningWithDuration){var b,c,d,e=a._context.doubleClick,f=(_?Q:[]).concat(aa?R:[]),g={};if("autosize"===e)for(c=0;c<f.length;c++)b=f[c],b.fixedrange||(g[b._name+".autorange"]=!0);else if("reset"===e)for(c=0;c<f.length;c++)b=f[c],b._rangeInitial?(d=b._rangeInitial.slice(),g[b._name+".range[0]"]=d[0],g[b._name+".range[1]"]=d[1]):g[b._name+".autorange"]=!0;else if("reset+autosize"===e)for(c=0;c<f.length;c++)b=f[c],b.fixedrange||(void 0===b._rangeInitial||b.range[0]===b._rangeInitial[0]&&b.range[1]===b._rangeInitial[1]?g[b._name+".autorange"]=!0:(d=b._rangeInitial.slice(),g[b._name+".range[0]"]=d[0],g[b._name+".range[1]"]=d[1]));a.emit("plotly_doubleclick",null),j.relayout(a,g)}}function M(b){for(var c={},d=0;d<$.length;d++){var e=$[d];b&&b.indexOf(e._id.charAt(0))===-1||(e._r[0]!==e.range[0]&&(c[e._name+".range[0]"]=e.range[0]),e._r[1]!==e.range[1]&&(c[e._name+".range[1]"]=e.range[1]),e.range=e._r.slice())}N([0,0,S,T]),j.relayout(a,c)}function N(a){for(var b,c=O._plots,d=Object.keys(c),e=0;e<d.length;e++){var f=c[d[e]],g=f.xaxis,h=f.yaxis,i=y&&!g.fixedrange,j=x&&!h.fixedrange;if(i){var k=!1;for(b=0;b<Q.length;b++)if(Q[b]._id===g._id){k=!0;break}i=i&&k}if(j){var m=!1;for(b=0;b<R.length;b++)if(R[b]._id===h._id){m=!0;break}j=j&&m}var n=i?g._length/a[2]:1,o=j?h._length/a[3]:1,p=i?a[0]:0,q=j?a[1]:0,r=i?a[0]/a[2]*g._length:0,s=j?a[1]/a[3]*h._length:0,t=g._offset-r,u=h._offset-s;O._defs.selectAll("#"+f.clipId).call(l.setTranslate,p,q).call(l.setScale,1/n,1/o),f.plot.call(l.setTranslate,t,u).call(l.setScale,n,o).selectAll(".points").selectAll(".point").call(l.setPointGroupScale,1/n,1/o)}}for(var O=a._fullLayout,P=[b].concat(x&&y?b.overlays:[]),Q=[b.xaxis],R=[b.yaxis],S=Q[0]._length,T=R[0]._length,U=t.MINDRAG,V=t.MINZOOM,W=x+y==="nsew",X=1;X<P.length;X++){var Y=P[X].xaxis,Z=P[X].yaxis;Q.indexOf(Y)===-1&&Q.push(Y),R.indexOf(Z)===-1&&R.push(Z)}var $=Q.concat(R),_=z(Q,y),aa=z(R,x),ba=e(aa+_,O.dragmode),ca=x+y+"drag",da=b.draglayer.selectAll("."+ca).data([0]);da.enter().append("rect").classed("drag",!0).classed(ca,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",b.id),da.call(o.setRect,c,h,v,w).call(p,ba);var ea=da.node();if(!aa&&!_&&!g(O.dragmode))return ea.onmousedown=null,ea.style.pointerEvents=W?"all":"none",ea;var fa={element:ea,gd:a,plotinfo:b,xaxes:Q,yaxes:R,doubleclick:L,prepFn:function(b,c,d){var e=a._fullLayout.dragmode;W?b.shiftKey&&(e="pan"===e?"zoom":"pan"):e="pan","lasso"===e?fa.minDrag=1:fa.minDrag=void 0,"zoom"===e?(fa.moveFn=E,fa.doneFn=G,C(b,c,d)):"pan"===e?(fa.moveFn=J,fa.doneFn=H,D()):g(e)&&s(b,c,d,fa,e)}};q.init(fa);var ga,ha,ia,ja,ka,la,ma,na,oa,pa=a._fullLayout._zoomlayer,qa=b.xaxis._offset,ra=b.yaxis._offset,sa=[0,0,S,T],ta=null,ua=t.REDRAWDELAY,va=b.mainplot?O._plots[b.mainplot]:b;return x.length*y.length!==1&&(void 0!==ea.onwheel?ea.onwheel=I:void 0!==ea.onmousewheel&&(ea.onmousewheel=I)),ea}},{"../../components/color":533,"../../components/dragelement":555,"../../components/drawing":557,"../../lib":632,"../../lib/setcursor":642,"../../lib/svg_text_utils":646,"../../plotly":658,"../../registry":738,"./axes":662,"./constants":668,"./select":676,d3:95,tinycolor2:489}],670:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=a.length;d>0;d--)c.push(b);return c}function e(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].p2c(b));return c}function f(a,b){return function(c){var d=a(c),e=b(c);return Math.sqrt(d*d+e*e)}}function g(a,b,c){if("pie"===c)return void a.emit("plotly_hover",{points:[b]});c||(c="xy");var f=Array.isArray(c)?c:[c],g=a._fullLayout,n=g._plots||[],o=n[c];if(o){var s=o.overlays.map(function(a){return a.id});f=f.concat(s)}for(var u=f.length,y=new Array(u),z=new Array(u),A=0;A<u;A++){var B=f[A],C=n[B];if(C)y[A]=w.getFromId(a,C.xaxis._id),z[A]=w.getFromId(a,C.yaxis._id);else{var D=g[B]._subplot;y[A]=D.xaxis,z[A]=D.yaxis}}var E=b.hovermode||g.hovermode;if(["x","y","closest"].indexOf(E)===-1||!a.calcdata||a.querySelector(".zoombox")||a._dragging)return v.unhoverRaw(a,b);var F,G,H,I,J,K,L,M,N,O,P,Q,R,S=[],T=[];if(Array.isArray(b))for(E="array",H=0;H<b.length;H++)J=a.calcdata[b[H].curveNumber||0],"skip"!==J[0].trace.hoverinfo&&T.push(J);else{for(I=0;I<a.calcdata.length;I++)J=a.calcdata[I],K=J[0].trace,"skip"!==K.hoverinfo&&f.indexOf(h(K))!==-1&&T.push(J);var U,V;if(b.target&&"clientX"in b&&"clientY"in b){if(r.triggerHandler(a,"plotly_beforehover",b)===!1)return;var W=b.target.getBoundingClientRect();if(U=b.clientX-W.left,V=b.clientY-W.top,U<0||U>W.width||V<0||V>W.height)return v.unhoverRaw(a,b)}else U="xpx"in b?b.xpx:y[0]._length/2,V="ypx"in b?b.ypx:z[0]._length/2;if(F="xval"in b?d(f,b.xval):e(y,U),G="yval"in b?d(f,b.yval):e(z,V),!p(F[0])||!p(G[0]))return q.warn("Fx.hover failed",b,a),v.unhoverRaw(a,b)}var X=1/0;for(I=0;I<T.length;I++)if(J=T[I],J&&J[0]&&J[0].trace&&J[0].trace.visible===!0){if(K=J[0].trace,L=h(K),M=f.indexOf(L),N=E,Q={cd:J,trace:K,xa:y[M],ya:z[M],name:a.data.length>1||K.hoverinfo.indexOf("name")!==-1?K.name:void 0,index:!1,distance:Math.min(X,x.MAXDIST),color:t.defaultLine,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},g[L]&&(Q.subplot=g[L]._subplot),R=S.length,"array"===N){var Y=b[I];"pointNumber"in Y?(Q.index=Y.pointNumber,N="closest"):(N="","xval"in Y&&(O=Y.xval,N="x"),"yval"in Y&&(P=Y.yval,N=N?"closest":"y"))}else O=F[M],P=G[M];if(K._module&&K._module.hoverPoints){var Z=K._module.hoverPoints(Q,O,P,N);if(Z)for(var $,_=0;_<Z.length;_++)$=Z[_],p($.x0)&&p($.y0)&&S.push(i($,E))}else q.log("Unrecognized trace type in hover:",K);"closest"===E&&S.length>R&&(S.splice(0,R),X=S[0].distance)}if(0===S.length)return v.unhoverRaw(a,b);var aa="y"===E&&T.length>1;S.sort(function(a,b){return a.distance-b.distance});var ba=t.combine(g.plot_bgcolor||t.background,g.paper_bgcolor),ca={hovermode:E,rotateLabels:aa,bgColor:ba,container:g._hoverlayer,outerContainer:g._paperdiv},da=j(S,ca);k(S,aa?"xa":"ya"),l(da,aa);var ea=a._hoverdata,fa=[];for(H=0;H<S.length;H++){var ga=S[H],ha={data:ga.trace._input,fullData:ga.trace,curveNumber:ga.trace.index,pointNumber:ga.index};ga.trace._module.eventData?ha=ga.trace._module.eventData(ha,ga):(ha.x=ga.xVal,ha.y=ga.yVal,ha.xaxis=ga.xa,ha.yaxis=ga.ya,void 0!==ga.zLabelVal&&(ha.z=ga.zLabelVal)),fa.push(ha)}a._hoverdata=fa,m(a,b,ea)&&(ea&&a.emit("plotly_unhover",{points:ea}),a.emit("plotly_hover",{points:a._hoverdata,xaxes:y,yaxes:z,xvals:F,yvals:G}))}function h(a){return a.subplot||a.xaxis+a.yaxis||a.geo}function i(a,b){a.posref="y"===b?(a.x0+a.x1)/2:(a.y0+a.y1)/2,a.x0=q.constrain(a.x0,0,a.xa._length),a.x1=q.constrain(a.x1,0,a.xa._length),a.y0=q.constrain(a.y0,0,a.ya._length),a.y1=q.constrain(a.y1,0,a.ya._length);var c;if(void 0!==a.xLabelVal){c="log"===a.xa.type&&a.xLabelVal<=0;var d=w.tickText(a.xa,a.xa.c2l(c?-a.xLabelVal:a.xLabelVal),"hover");c?0===a.xLabelVal?a.xLabel="0":a.xLabel="-"+d.text:a.xLabel=d.text,a.xVal=a.xa.c2d(a.xLabelVal)}if(void 0!==a.yLabelVal){c="log"===a.ya.type&&a.yLabelVal<=0;var e=w.tickText(a.ya,a.ya.c2l(c?-a.yLabelVal:a.yLabelVal),"hover");c?0===a.yLabelVal?a.yLabel="0":a.yLabel="-"+e.text:a.yLabel=e.text,a.yVal=a.ya.c2d(a.yLabelVal)}if(void 0!==a.zLabelVal&&(a.zLabel=String(a.zLabelVal)),!(isNaN(a.xerr)||"log"===a.xa.type&&a.xerr<=0)){var f=w.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;void 0!==a.xerrneg?a.xLabel+=" +"+f+" / -"+w.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text:a.xLabel+=" ± "+f,"x"===b&&(a.distance+=1)}if(!(isNaN(a.yerr)||"log"===a.ya.type&&a.yerr<=0)){var g=w.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;void 0!==a.yerrneg?a.yLabel+=" +"+g+" / -"+w.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text:a.yLabel+=" ± "+g,"y"===b&&(a.distance+=1)}var h=a.trace.hoverinfo;return"all"!==h&&(h=h.split("+"),h.indexOf("x")===-1&&(a.xLabel=void 0),h.indexOf("y")===-1&&(a.yLabel=void 0),h.indexOf("z")===-1&&(a.zLabel=void 0),h.indexOf("text")===-1&&(a.text=void 0),h.indexOf("name")===-1&&(a.name=void 0)),a}function j(a,b){var c,d,e=b.hovermode,f=b.rotateLabels,g=b.bgColor,h=b.container,i=b.outerContainer,j=a[0],k=j.xa,l=j.ya,m="y"===e?"yLabel":"xLabel",p=j[m],q=(String(p)||"").split(" ")[0],r=i.node().getBoundingClientRect(),v=r.top,w=r.width,y=r.height,z=j.distance<=x.MAXDIST&&("x"===e||"y"===e);for(c=0;c<a.length;c++){d=a[c].trace.hoverinfo;var B=d.split("+");if(B.indexOf("all")===-1&&B.indexOf(e)===-1){z=!1;break}}var C=h.selectAll("g.axistext").data(z?[0]:[]);C.enter().append("g").classed("axistext",!0),C.exit().remove(),C.each(function(){var b=n.select(this),c=b.selectAll("path").data([0]),d=b.selectAll("text").data([0]);c.enter().append("path").style({fill:t.defaultLine,"stroke-width":"1px",stroke:t.background}),d.enter().append("text").call(u.font,I,H,t.background).attr("data-notex",1),d.text(p).call(s.convertToTspans).call(u.setPosition,0,0).selectAll("tspan.line").call(u.setPosition,0,0),b.attr("transform","");var f=d.node().getBoundingClientRect();if("x"===e){d.attr("text-anchor","middle").call(u.setPosition,0,"top"===k.side?v-f.bottom-F-G:v-f.top+F+G).selectAll("tspan.line").attr({x:d.attr("x"),y:d.attr("y")});var g="top"===k.side?"-":"";c.attr("d","M0,0L"+F+","+g+F+"H"+(G+f.width/2)+"v"+g+(2*G+f.height)+"H-"+(G+f.width/2)+"V"+g+F+"H-"+F+"Z"),b.attr("transform","translate("+(k._offset+(j.x0+j.x1)/2)+","+(l._offset+("top"===k.side?0:l._length))+")")}else{d.attr("text-anchor","right"===l.side?"start":"end").call(u.setPosition,("right"===l.side?1:-1)*(G+F),v-f.top-f.height/2).selectAll("tspan.line").attr({x:d.attr("x"),y:d.attr("y")});var h="right"===l.side?"":"-";c.attr("d","M0,0L"+h+F+","+F+"V"+(G+f.height/2)+"h"+h+(2*G+f.width)+"V-"+(G+f.height/2)+"H"+h+F+"V-"+F+"Z"),b.attr("transform","translate("+(k._offset+("right"===l.side?k._length:0))+","+(l._offset+(j.y0+j.y1)/2)+")")}a=a.filter(function(a){return void 0!==a.zLabelVal||(a[m]||"").split(" ")[0]===q})});var D=h.selectAll("g.hovertext").data(a,function(a){return[a.trace.index,a.index,a.x0,a.y0,a.name,a.attr,a.xa,a.ya||""].join(",")});return D.enter().append("g").classed("hovertext",!0).each(function(){var a=n.select(this);a.append("rect").call(t.fill,t.addOpacity(g,.8)),a.append("text").classed("name",!0).call(u.font,I,H),a.append("path").style("stroke-width","1px"),a.append("text").classed("nums",!0).call(u.font,I,H)}),D.exit().remove(),D.each(function(a){var b=n.select(this).attr("transform",""),c="",d="",h=t.opacity(a.color)?a.color:t.defaultLine,i=t.combine(h,g),j=o(i).getBrightness()>128?"#000":t.background;if(a.name&&void 0===a.zLabelVal){var k=document.createElement("p");k.innerHTML=a.name,c=k.textContent||"",c.length>15&&(c=c.substr(0,12)+"...")}void 0!==a.extraText&&(d+=a.extraText),void 0!==a.zLabel?(void 0!==a.xLabel&&(d+="x: "+a.xLabel+"<br>"),void 0!==a.yLabel&&(d+="y: "+a.yLabel+"<br>"),d+=(d?"z: ":"")+a.zLabel):z&&a[e+"Label"]===p?d=a[("x"===e?"y":"x")+"Label"]||"":void 0===a.xLabel?void 0!==a.yLabel&&(d=a.yLabel):d=void 0===a.yLabel?a.xLabel:"("+a.xLabel+", "+a.yLabel+")",a.text&&!Array.isArray(a.text)&&(d+=(d?"<br>":"")+a.text),""===d&&(""===c&&b.remove(),d=c);var l=b.select("text.nums").style("fill",j).call(u.setPosition,0,0).text(d).attr("data-notex",1).call(s.convertToTspans);l.selectAll("tspan.line").call(u.setPosition,0,0);var m=b.select("text.name"),q=0;c&&c!==d?(m.style("fill",i).text(c).call(u.setPosition,0,0).attr("data-notex",1).call(s.convertToTspans),m.selectAll("tspan.line").call(u.setPosition,0,0),q=m.node().getBoundingClientRect().width+2*G):(m.remove(),b.select("rect").remove()),b.select("path").style({fill:i,stroke:j});var r,x,B=l.node().getBoundingClientRect(),C=a.xa._offset+(a.x0+a.x1)/2,D=a.ya._offset+(a.y0+a.y1)/2,E=Math.abs(a.x1-a.x0),H=Math.abs(a.y1-a.y0),I=B.width+F+G+q;a.ty0=v-B.top,a.bx=B.width+2*G,a.by=B.height+2*G,a.anchor="start",a.txwidth=B.width,a.tx2width=q,a.offset=0,f?(a.pos=C,r=D+H/2+I<=y,x=D-H/2-I>=0,"top"!==a.idealAlign&&r||!x?r?(D+=H/2,a.anchor="start"):a.anchor="middle":(D-=H/2,a.anchor="end")):(a.pos=D,r=C+E/2+I<=w,x=C-E/2-I>=0,"left"!==a.idealAlign&&r||!x?r?(C+=E/2,a.anchor="start"):a.anchor="middle":(C-=E/2,a.anchor="end")),l.attr("text-anchor",a.anchor),q&&m.attr("text-anchor",a.anchor),b.attr("transform","translate("+C+","+D+")"+(f?"rotate("+A+")":""))}),D}function k(a,b){function c(a){var b=a[0],c=a[a.length-1];if(e=b.pmin-b.pos-b.dp+b.size,f=c.pos+c.dp+c.size-b.pmax,e>.01){for(h=a.length-1;h>=0;h--)a[h].dp+=e;d=!1}if(!(f<.01)){if(e<-.01){for(h=a.length-1;h>=0;h--)a[h].dp-=f;d=!1}if(d){var j=0;for(g=0;g<a.length;g++)i=a[g],i.pos+i.dp+i.size>b.pmax&&j++;for(g=a.length-1;g>=0&&!(j<=0);g--)i=a[g],i.pos>b.pmax-1&&(i.del=!0,j--);for(g=0;g<a.length&&!(j<=0);g++)if(i=a[g],i.pos<b.pmin+1)for(i.del=!0,j--,f=2*i.size,h=a.length-1;h>=0;h--)a[h].dp-=f;for(g=a.length-1;g>=0&&!(j<=0);g--)i=a[g],i.pos+i.dp+i.size>b.pmax&&(i.del=!0,j--)}}}for(var d,e,f,g,h,i,j,k=0,l=a.map(function(a,c){var d=a[b];return[{i:c,dp:0,pos:a.pos,posref:a.posref,size:a.by*("x"===d._id.charAt(0)?C:1)/2,pmin:d._offset,pmax:d._offset+d._length}]}).sort(function(a,b){return a[0].posref-b[0].posref});!d&&k<=a.length;){for(k++,d=!0,g=0;g<l.length-1;){var m=l[g],n=l[g+1],o=m[m.length-1],p=n[0];if(e=o.pos+o.dp+o.size-p.pos-p.dp+p.size,e>.01&&o.pmin===p.pmin&&o.pmax===p.pmax){for(h=n.length-1;h>=0;h--)n[h].dp+=e;for(m.push.apply(m,n),l.splice(g+1,1),j=0,h=m.length-1;h>=0;h--)j+=m[h].dp;for(f=j/m.length,h=m.length-1;h>=0;h--)m[h].dp-=f;d=!1}else g++}l.forEach(c)}for(g=l.length-1;g>=0;g--){var q=l[g];for(h=q.length-1;h>=0;h--){var r=q[h],s=a[r.i];s.offset=r.dp,s.del=r.del}}}function l(a,b){a.each(function(a){var c=n.select(this);if(a.del)return void c.remove();var d="end"===a.anchor?-1:1,e=c.select("text.nums"),f={start:1,end:-1,middle:0}[a.anchor],g=f*(F+G),h=g+f*(a.txwidth+G),i=0,j=a.offset;"middle"===a.anchor&&(g-=a.tx2width/2,h-=a.tx2width/2),b&&(j*=-E,i=a.offset*D),c.select("path").attr("d","middle"===a.anchor?"M-"+a.bx/2+",-"+a.by/2+"h"+a.bx+"v"+a.by+"h-"+a.bx+"Z":"M0,0L"+(d*F+i)+","+(F+j)+"v"+(a.by/2-F)+"h"+d*a.bx+"v-"+a.by+"H"+(d*F+i)+"V"+(j-F)+"Z"),e.call(u.setPosition,g+i,j+a.ty0-a.by/2+G).selectAll("tspan.line").attr({x:e.attr("x"),y:e.attr("y")}),a.tx2width&&(c.select("text.name, text.name tspan.line").call(u.setPosition,h+f*G+i,j+a.ty0-a.by/2+G),c.select("rect").call(u.setRect,h+(f-1)*a.tx2width/2+i,j-a.by/2-1,a.tx2width,a.by+2))})}function m(a,b,c){if(!b.target)return!1;if(!c||c.length!==a._hoverdata.length)return!0;for(var d=c.length-1;d>=0;d--){var e=c[d],f=a._hoverdata[d];if(e.curveNumber!==f.curveNumber||String(e.pointNumber)!==String(f.pointNumber))return!0}return!1}var n=a("d3"),o=a("tinycolor2"),p=a("fast-isnumeric"),q=a("../../lib"),r=a("../../lib/events"),s=a("../../lib/svg_text_utils"),t=a("../../components/color"),u=a("../../components/drawing"),v=a("../../components/dragelement"),w=a("./axes"),x=a("./constants"),y=a("./dragbox"),z=b.exports={};z.unhover=v.unhover,z.layoutAttributes={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom"},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}},z.supplyLayoutDefaults=function(a,b,c){function d(c,d){return q.coerce(a,b,z.layoutAttributes,c,d)}d("dragmode");var e;if(b._has("cartesian")){var f=b._isHoriz=z.isHoriz(c);e=f?"y":"x"}else e="closest";d("hovermode",e)},z.isHoriz=function(a){for(var b=!0,c=0;c<a.length;c++){var d=a[c];if("h"!==d.orientation){b=!1;break}}return b},z.init=function(a){var b=a._fullLayout;if(b._has("cartesian")&&!a._context.staticPlot){var c=Object.keys(b._plots||{}).sort(function(a,c){if((b._plots[a].mainplot&&!0)===(b._plots[c].mainplot&&!0)){var d=a.split("y"),e=c.split("y");return d[0]===e[0]?Number(d[1]||1)-Number(e[1]||1):Number(d[0]||1)-Number(e[0]||1)}return b._plots[a].mainplot?1:-1});c.forEach(function(c){var d=b._plots[c];if(b._has("cartesian")){var e=d.xaxis,f=d.yaxis,g=(e._linepositions[c]||[])[3],h=(f._linepositions[c]||[])[3],i=x.DRAGGERSIZE;if(p(g)&&"top"===e.side&&(g-=i),p(h)&&"right"!==f.side&&(h-=i),!d.mainplot){var j=y(a,d,0,0,e._length,f._length,"ns","ew");j.onmousemove=function(d){z.hover(a,d,c),b._lasthover=j,b._hoversubplot=c},j.onmouseout=function(b){a._dragging||v.unhover(a,b)},j.onclick=function(b){z.click(a,b)},y(a,d,-i,-i,i,i,"n","w"),y(a,d,e._length,-i,i,i,"n","e"),y(a,d,-i,f._length,i,i,"s","w"),y(a,d,e._length,f._length,i,i,"s","e")}p(g)&&("free"===e.anchor&&(g-=b._size.h*(1-f.domain[1])),y(a,d,.1*e._length,g,.8*e._length,i,"","ew"),y(a,d,0,g,.1*e._length,i,"","w"),y(a,d,.9*e._length,g,.1*e._length,i,"","e")),p(h)&&("free"===f.anchor&&(h-=b._size.w*e.domain[0]),y(a,d,h,.1*f._length,i,.8*f._length,"ns",""),y(a,d,h,.9*f._length,i,.1*f._length,"s",""),y(a,d,h,0,i,.1*f._length,"n",""))}});var d=b._hoverlayer.node();d.onmousemove=function(c){c.target=b._lasthover,z.hover(a,c,b._hoversubplot)},d.onclick=function(c){c.target=b._lasthover,z.click(a,c)},d.onmousedown=function(a){b._lasthover.onmousedown(a)}}};var A=x.YANGLE,B=Math.PI*A/180,C=1/Math.sin(B),D=Math.cos(B),E=Math.sin(B),F=x.HOVERARROWSIZE,G=x.HOVERTEXTPAD,H=x.HOVERFONTSIZE,I=x.HOVERFONT;z.hover=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a)),void 0===a._lastHoverTime&&(a._lastHoverTime=0),void 0!==a._hoverTimer&&(clearTimeout(a._hoverTimer),a._hoverTimer=void 0),Date.now()>a._lastHoverTime+x.HOVERMINTIME?(g(a,b,c),void(a._lastHoverTime=Date.now())):void(a._hoverTimer=setTimeout(function(){g(a,b,c),a._lastHoverTime=Date.now(),a._hoverTimer=void 0},x.HOVERMINTIME))},z.getDistanceFunction=function(a,b,c,d){return"closest"===a?d||f(b,c):"x"===a?b:c},z.getClosest=function(a,b,c){if(c.index!==!1)c.index>=0&&c.index<a.length?c.distance=0:c.index=!1;else for(var d=0;d<a.length;d++){var e=b(a[d]);e<=c.distance&&(c.index=d,c.distance=e)}return c},z.loneHover=function(a,b){var c={color:a.color||t.defaultLine,x0:a.x0||a.x||0,x1:a.x1||a.x||0,y0:a.y0||a.y||0,y1:a.y1||a.y||0,xLabel:a.xLabel,yLabel:a.yLabel,zLabel:a.zLabel,text:a.text,name:a.name,idealAlign:a.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},d=n.select(b.container),e=b.outerContainer?n.select(b.outerContainer):d,f={hovermode:"closest",rotateLabels:!1,bgColor:b.bgColor||t.background,container:d,outerContainer:e},g=j([c],f);return l(g,f.rotateLabels),g.node()},z.loneUnhover=function(a){var b=a instanceof n.selection?a:n.select(a);b.selectAll("g.hovertext").remove()},z.click=function(a,b){a._hoverdata&&b&&b.target&&(a.emit("plotly_click",{points:a._hoverdata}),b.stopImmediatePropagation&&b.stopImmediatePropagation())},z.inbox=function(a,b){return a*b<0||0===a?x.MAXDIST*(.6-.3/Math.max(3,Math.abs(a-b))):1/0}},{"../../components/color":533,"../../components/dragelement":555,"../../components/drawing":557,"../../lib":632,"../../lib/events":624,"../../lib/svg_text_utils":646,"./axes":662,"./constants":668,"./dragbox":669,d3:95,"fast-isnumeric":104,tinycolor2:489}],671:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=a._fullLayout,g=f._modules;b.plot&&b.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var h=0;h<g.length;h++){var i=g[h];if("cartesian"===i.basePlotModule.name){for(var j=[],k=0;k<c.length;k++){var l=c[k],m=l[0].trace;m._module===i&&m.visible===!0&&j.push(l)}i.plot(a,b,j,d,e)}}}function e(a){for(var b=a._fullLayout,c=Object.keys(b._plots),d=[],e=[],f=0;f<c.length;f++){var g=c[f],h=b._plots[g],i=h.xaxis,j=h.yaxis,k=l.getFromId(a,i.overlaying)||i;k!==i&&k.overlaying&&(k=i,i.overlaying=!1);var m=l.getFromId(a,j.overlaying)||j;m!==j&&m.overlaying&&(m=j,j.overlaying=!1);var n=k._id+m._id;n!==g&&c.indexOf(n)!==-1?(h.mainplot=n,h.mainplotinfo=b._plots[n],e.push(g),i.domain=k.domain.slice(),j.domain=m.domain.slice()):d.push(g)}return d=d.concat(e)}function f(a){function b(a){h(a,"g","imagelayer"),h(a,"g","maplayer"),h(a,"g","barlayer"),h(a,"g","boxlayer"),h(a,"g","scatterlayer")}var c=a.plotgroup,d=a.id;if(a.mainplot){var e=a.mainplotinfo;a.gridlayer=h(e.overgrid,"g",d),a.zerolinelayer=h(e.overzero,"g",d),a.plot=h(e.overplot,"g",d),a.xlines=h(e.overlines,"path",d),a.ylines=h(e.overlines,"path",d),a.xaxislayer=h(e.overaxes,"g",d),a.yaxislayer=h(e.overaxes,"g",d)}else{a.bg=h(c,"rect","bg"),a.bg.style("stroke-width",0);var f=h(c,"g","layer-subplot");a.shapelayer=h(f,"g","shapelayer"),a.imagelayer=h(f,"g","imagelayer"),a.gridlayer=h(c,"g","gridlayer"),a.overgrid=h(c,"g","overgrid"),a.zerolinelayer=h(c,"g","zerolinelayer"),a.overzero=h(c,"g","overzero"),a.plot=h(c,"g","plot"),a.overplot=h(c,"g","overplot"),a.xlines=h(c,"path","xlines"),a.ylines=h(c,"path","ylines"),a.overlines=h(c,"g","overlines"),a.xaxislayer=h(c,"g","xaxislayer"),a.yaxislayer=h(c,"g","yaxislayer"),a.overaxes=h(c,"g","overaxes")}a.plot.call(b),a.xlines.style("fill","none").classed("crisp",!0),a.ylines.style("fill","none").classed("crisp",!0)}function g(a,b){a&&a.each(function(a){var c=i.select(this),d="clip"+b._uid+a+"plot";c.remove(),b._draggers.selectAll("g."+a).remove(),b._defs.select("#"+d).remove()})}function h(a,b,c){var d=a.selectAll("."+c).data([0]);return d.enter().append(b).classed(c,!0),d}var i=a("d3"),j=a("../../lib"),k=a("../plots"),l=a("./axes"),m=a("./constants");c.name="cartesian",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.idRegex=m.idRegex,c.attrRegex=m.attrRegex,c.attributes=a("./attributes"),c.transitionAxes=a("./transition_axes"),c.plot=function(a,b,c,e){var f,g=a._fullLayout,h=k.getSubplotIds(g,"cartesian"),i=a.calcdata;if(!Array.isArray(b))for(b=[],f=0;f<i.length;f++)b.push(f);for(f=0;f<h.length;f++){for(var j,l=h[f],m=g._plots[l],n=[],o=0;o<i.length;o++){var p=i[o],q=p[0].trace;q.xaxis+q.yaxis===l&&(b.indexOf(q.index)!==-1&&(j&&["tonextx","tonexty","tonext"].indexOf(q.fill)!==-1&&n.indexOf(j)===-1&&n.push(j),n.push(p)),j=p)}d(a,m,n,c,e)}},c.clean=function(a,b,c,d){var e,f,h,i=d._modules||[],j=b._modules||[];for(h=0;h<i.length;h++)if("scatter"===i[h].name){e=!0;break}for(h=0;h<j.length;h++)if("scatter"===j[h].name){f=!0;break}if(e&&!f){var k=d._plots,l=Object.keys(k||{});for(h=0;h<l.length;h++){var m=k[l[h]];m.plot&&m.plot.select("g.scatterlayer").selectAll("g.trace").remove()}}var n=d._has&&d._has("cartesian"),o=b._has&&b._has("cartesian");if(n&&!o){var p=d._cartesianlayer.selectAll(".subplot");p.call(g,d),d._defs.selectAll(".axesclip").remove()}},c.drawFramework=function(a){var b=a._fullLayout,c=e(a),d=b._cartesianlayer.selectAll(".subplot").data(c,j.identity);
d.enter().append("g").attr("class",function(a){return"subplot "+a}),d.order(),d.exit().call(g,b),d.each(function(a){var c=b._plots[a];if(c.plotgroup=i.select(this),c.overlays=[],f(c),c.mainplot){var d=b._plots[c.mainplot];d.overlays.push(c)}c.draglayer=h(b._draggers,"g",a)})},c.rangePlot=function(a,b,c){f(b),d(a,b,c),k.style(a)}},{"../../lib":632,"../plots":723,"./attributes":661,"./axes":662,"./constants":668,"./transition_axes":681,d3:95}],672:[function(a,b,c){"use strict";var d=a("../font_attributes"),e=a("../../components/color/attributes"),f=a("../../lib/extend").extendFlat,g=a("./constants");b.exports={color:{valType:"color",dflt:e.defaultLine},title:{valType:"string"},titlefont:f({},d,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"number",dflt:0},dtick:{valType:"any",dflt:1},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",min:0,dflt:1},tickcolor:{valType:"color",dflt:e.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:f({},d,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B"},separatethousands:{valType:"boolean",dflt:!1},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:e.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:e.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:e.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",values:["free",g.idRegex.x.toString(),g.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",g.idRegex.x.toString(),g.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,max:1,dflt:0},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace"},categoryarray:{valType:"data_array"},_nestedModules:{rangeslider:"rangeslider",rangeselector:"rangeselector"},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":532,"../../lib/extend":625,"../font_attributes":683,"./constants":668}],673:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/color"),g=a("../layout_attributes"),h=a("./constants"),i=a("./layout_attributes"),j=a("./axis_defaults"),k=a("./position_defaults"),l=a("./axis_ids");b.exports=function(a,b,c){function m(a,b){var c=Number(a.substr(5)||1),d=Number(b.substr(5)||1);return c-d}var n,o=Object.keys(a),p=[],q=[],r=[],s=[],t={},u={};for(n=0;n<c.length;n++){var v,w,x=c[n];if(d.traceIs(x,"cartesian"))v=p,w=q;else{if(!d.traceIs(x,"gl2d"))continue;v=r,w=s}var y=l.id2name(x.xaxis),z=l.id2name(x.yaxis);if(y&&v.indexOf(y)===-1&&v.push(y),z&&w.indexOf(z)===-1&&w.push(z),d.traceIs(x,"2dMap")&&(t[y]=!0,t[z]=!0),d.traceIs(x,"oriented")){var A="h"===x.orientation?z:y;u[A]=!0}}var B=b._has("gl3d")||b._has("geo");if(!B)for(n=0;n<o.length;n++){var C=o[n];r.indexOf(C)===-1&&p.indexOf(C)===-1&&h.xAxisMatch.test(C)?p.push(C):s.indexOf(C)===-1&&q.indexOf(C)===-1&&h.yAxisMatch.test(C)&&q.push(C)}p.length&&q.length&&e.pushUnique(b._basePlotModules,d.subplotsRegistry.cartesian);var D=p.concat(r).sort(m),E=q.concat(s).sort(m),F=D.concat(E),G=f.background;D.length&&E.length&&(G=e.coerce(a,b,g,"plot_bgcolor"));var H=f.combine(G,b.paper_bgcolor);F.forEach(function(d){function f(a,b){return e.coerce(h,m,i,a,b)}var g=d.charAt(0),h=a[d]||{},m={},n={letter:g,font:b.font,outerTicks:t[d],showGrid:!u[d],name:d,data:c,bgColor:H},o={letter:g,counterAxes:{x:E,y:D}[g].map(l.name2id),overlayableAxes:{x:D,y:E}[g].filter(function(b){return b!==d&&!(a[b]||{}).overlaying}).map(l.name2id)};j(h,m,f,n),k(h,m,f,o),b[d]=m,a[d]||"-"===h.type||(a[d]={type:h.type})});var I=d.getComponentMethod("rangeslider","handleDefaults"),J=d.getComponentMethod("rangeselector","handleDefaults");F.forEach(function(c){var d=c.charAt(0),e=a[c],f=b[c],g={x:E,y:D}[d];I(a,b,c,g),"x"===d&&"date"===f.type&&J(e,f,b,g)})}},{"../../components/color":533,"../../lib":632,"../../registry":738,"../layout_attributes":714,"./axis_defaults":664,"./axis_ids":665,"./constants":668,"./layout_attributes":672,"./position_defaults":675}],674:[function(a,b,c){"use strict";function d(a,b,c){var d,f,g,h,i,j=[],k=c.map(function(b){return b[a]}),l=e.bisector(b).left;for(d=0;d<k.length;d++)for(g=k[d],f=0;f<g.length;f++)h=g[f],null!==h&&void 0!==h&&(i=l(j,h),i<j.length&&j[i]===h||j.splice(i,0,h));return j}var e=a("d3");b.exports=function(a,b,c,f){switch(b){case"array":return Array.isArray(c)?c.slice():[];case"category ascending":return d(a,e.ascending,f);case"category descending":return d(a,e.descending,f);case"trace":return[];default:return[]}}},{d3:95}],675:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib");b.exports=function(a,b,c,f){var g=f.counterAxes||[],h=f.overlayableAxes||[],i=f.letter,j=e.coerce(a,b,{anchor:{valType:"enumerated",values:["free"].concat(g),dflt:d(a.position)?"free":g[0]||"free"}},"anchor");"free"===j&&c("position"),e.coerce(a,b,{side:{valType:"enumerated",values:"x"===i?["bottom","top"]:["left","right"],dflt:"x"===i?"bottom":"left"}},"side");var k=!1;if(h.length&&(k=e.coerce(a,b,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),!k){var l=c("domain");l[0]>l[1]-.01&&(b.domain=[0,1]),e.noneOrAll(a.domain,b.domain,[0,1])}return b}},{"../../lib":632,"fast-isnumeric":104}],676:[function(a,b,c){"use strict";function d(a){return a._id}var e=a("../../lib/polygon"),f=a("../../components/color"),g=a("./axes"),h=a("./constants"),i=e.filter,j=e.tester,k=h.MINSELECT;b.exports=function(a,b,c,e,l){function m(a){var b="y"===a._id.charAt(0)?1:0;return function(c){return a.p2d(c[b])}}function n(a,b){return a-b}var o,p=e.gd._fullLayout._zoomlayer,q=e.element.getBoundingClientRect(),r=e.plotinfo.xaxis._offset,s=e.plotinfo.yaxis._offset,t=b-q.left,u=c-q.top,v=t,w=u,x="M"+t+","+u,y=e.xaxes[0]._length,z=e.yaxes[0]._length,A=e.xaxes.map(d),B=e.yaxes.map(d),C=e.xaxes.concat(e.yaxes);"lasso"===l&&(o=i([[t,u]],h.BENDPX));var D=p.selectAll("path.select-outline").data([1,2]);D.enter().append("path").attr("class",function(a){return"select-outline select-outline-"+a}).attr("transform","translate("+r+", "+s+")").attr("d",x+"Z");var E,F,G,H,I,J=p.append("path").attr("class","zoombox-corners").style({fill:f.background,stroke:f.defaultLine,"stroke-width":1}).attr("transform","translate("+r+", "+s+")").attr("d","M0,0Z"),K=[],L=e.gd,M=[];for(E=0;E<L.calcdata.length;E++)if(F=L.calcdata[E],G=F[0].trace,G._module&&G._module.selectPoints)if(e.subplot){if(G.subplot!==e.subplot)continue;K.push({selectPoints:G._module.selectPoints,cd:F,xaxis:e.xaxes[0],yaxis:e.yaxes[0]})}else{if(A.indexOf(G.xaxis)===-1)continue;if(B.indexOf(G.yaxis)===-1)continue;K.push({selectPoints:G._module.selectPoints,cd:F,xaxis:g.getFromId(L,G.xaxis),yaxis:g.getFromId(L,G.yaxis)})}e.moveFn=function(a,b){var c,d;v=Math.max(0,Math.min(y,a+t)),w=Math.max(0,Math.min(z,b+u));var f=Math.abs(v-t),g=Math.abs(w-u);for("select"===l?(g<Math.min(.6*f,k)?(c=j([[t,0],[t,z],[v,z],[v,0]]),J.attr("d","M"+c.xmin+","+(u-k)+"h-4v"+2*k+"h4ZM"+(c.xmax-1)+","+(u-k)+"h4v"+2*k+"h-4Z")):f<Math.min(.6*g,k)?(c=j([[0,u],[0,w],[y,w],[y,u]]),J.attr("d","M"+(t-k)+","+c.ymin+"v-4h"+2*k+"v4ZM"+(t-k)+","+(c.ymax-1)+"v4h"+2*k+"v-4Z")):(c=j([[t,u],[t,w],[v,w],[v,u]]),J.attr("d","M0,0Z")),D.attr("d","M"+c.xmin+","+c.ymin+"H"+(c.xmax-1)+"V"+(c.ymax-1)+"H"+c.xmin+"Z")):"lasso"===l&&(o.addPt([v,w]),c=j(o.filtered),D.attr("d","M"+o.filtered.join("L")+"Z")),M=[],E=0;E<K.length;E++)H=K[E],[].push.apply(M,H.selectPoints(H,c));if(I={points:M},"select"===l){var h,i=I.range={};for(E=0;E<C.length;E++)d=C[E],h=d._id.charAt(0),i[d._id]=[d.p2d(c[h+"min"]),d.p2d(c[h+"max"])].sort(n)}else{var p=I.lassoPoints={};for(E=0;E<C.length;E++)d=C[E],p[d._id]=o.filtered.map(m(d))}e.gd.emit("plotly_selecting",I)},e.doneFn=function(a,b){if(J.remove(),a||2!==b)e.gd.emit("plotly_selected",I);else{for(D.remove(),E=0;E<K.length;E++)H=K[E],H.selectPoints(H,!1);L.emit("plotly_deselect",null)}}}},{"../../components/color":533,"../../lib/polygon":639,"./axes":662,"./constants":668}],677:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../lib"),g=a("./constants"),h=a("./clean_datum"),i=a("./axis_ids");b.exports=function(a){function b(b,c){if(b>0)return Math.log(b)/Math.LN10;if(b<=0&&c&&a.range&&2===a.range.length){var d=a.range[0],e=a.range[1];return.5*(d+e-3*k*Math.abs(d-e))}return g.BADNUM}function c(a){return Math.pow(10,a)}function j(a){return e(a)?Number(a):g.BADNUM}var k=10;if(a.c2l="log"===a.type?b:j,a.l2c="log"===a.type?c:j,a.l2d=function(b){return a.c2d(a.l2c(b))},a.p2d=function(b){return a.l2d(a.p2l(b))},a.setScale=function(b){var c,d=a._gd._fullLayout._size;if(a._categories||(a._categories=[]),a.overlaying){var g=i.getFromId(a._gd,a.overlaying);a.domain=g.domain}var h=b&&a._r?a._r:a.range;for(h&&2===h.length&&h[0]!==h[1]||(h=[-1,1]),c=0;c<2;c++)e(h[c])||(h[c]=e(h[1-c])?h[1-c]*(c?10:.1):c?1:-1),h[c]<-(Number.MAX_VALUE/2)?h[c]=-(Number.MAX_VALUE/2):h[c]>Number.MAX_VALUE/2&&(h[c]=Number.MAX_VALUE/2);if("y"===a._id.charAt(0)?(a._offset=d.t+(1-a.domain[1])*d.h,a._length=d.h*(a.domain[1]-a.domain[0]),a._m=a._length/(h[0]-h[1]),a._b=-a._m*h[1]):(a._offset=d.l+a.domain[0]*d.w,a._length=d.w*(a.domain[1]-a.domain[0]),a._m=a._length/(h[1]-h[0]),a._b=-a._m*h[0]),!isFinite(a._m)||!isFinite(a._b))throw f.notifier("Something went wrong with axis scaling","long"),a._gd._replotting=!1,new Error("axis scaling")},a.l2p=function(b){return e(b)?d.round(a._b+a._m*b,2):g.BADNUM},a.p2l=function(b){return(b-a._b)/a._m},a.c2p=function(b,c){return a.l2p(a.c2l(b,c))},a.p2c=function(b){return a.l2c(a.p2l(b))},["linear","log","-"].indexOf(a.type)!==-1)a.c2d=j,a.d2c=function(a){return a=h(a),e(a)?Number(a):g.BADNUM},a.d2l=function(b,c){return"log"===a.type?a.c2l(a.d2c(b),c):a.d2c(b)};else if("date"===a.type){if(a.c2d=function(a){return e(a)?f.ms2DateTime(a):g.BADNUM},a.d2c=function(a){return e(a)?Number(a):f.dateTime2ms(a)},a.d2l=a.d2c,a.range&&a.range.length>1)try{var l=a.range.map(f.dateTime2ms);!e(a.range[0])&&e(l[0])&&(a.range[0]=l[0]),!e(a.range[1])&&e(l[1])&&(a.range[1]=l[1])}catch(b){f.error(b,a.range)}}else"category"===a.type&&(a.c2d=function(b){return a._categories[Math.round(b)]},a.d2c=function(b){null!==b&&void 0!==b&&a._categories.indexOf(b)===-1&&a._categories.push(b);var c=a._categories.indexOf(b);return c===-1?g.BADNUM:c},a.d2l=a.d2c);a.makeCalcdata=function(b,c){var d,e,f;if(c in b)for(d=b[c],e=new Array(d.length),f=0;f<d.length;f++)e[f]=a.d2c(d[f]);else{var g=c+"0"in b?a.d2c(b[c+"0"]):0,h=b["d"+c]?Number(b["d"+c]):1;for(d=b[{x:"y",y:"x"}[c]],e=new Array(d.length),f=0;f<d.length;f++)e[f]=g+f*h}return e},a._min=[],a._max=[],a._minDtick=null,a._forceTick0=null}},{"../../lib":632,"./axis_ids":665,"./clean_datum":667,"./constants":668,d3:95,"fast-isnumeric":104}],678:[function(a,b,c){"use strict";function d(a){var b=["showexponent","showtickprefix","showticksuffix"],c=b.filter(function(b){return void 0!==a[b]}),d=function(b){return a[b]===a[c[0]]};if(c.every(d)||1===c.length)return a[c[0]]}var e=a("../../lib");b.exports=function(a,b,c,f,g){var h=d(a),i=c("tickprefix");i&&c("showtickprefix",h);var j=c("ticksuffix");j&&c("showticksuffix",h);var k=c("showticklabels");if(k){var l=g.font||{},m=b.color===a.color?b.color:l.color;if(e.coerceFont(c,"tickfont",{family:l.family,size:l.size,color:m}),c("tickangle"),"category"!==f){var n=c("tickformat");n||"date"===f||(c("showexponent",h),c("exponentformat"),c("separatethousands"))}}"category"===f||g.noHover||c("hoverformat")}},{"../../lib":632}],679:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b,c,f){var g=d.coerce2(a,b,e,"ticklen"),h=d.coerce2(a,b,e,"tickwidth"),i=d.coerce2(a,b,e,"tickcolor",b.color),j=c("ticks",f.outerTicks||g||h||i?"outside":"");j||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor)}},{"../../lib":632,"./layout_attributes":672}],680:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a,b,c,e){var f="auto";"array"!==a.tickmode||"log"!==e&&"date"!==e||(a.tickmode="auto"),Array.isArray(a.tickvals)?f="array":a.dtick&&d(a.dtick)&&(f="linear");var g=c("tickmode",f);if("auto"===g)c("nticks");else if("linear"===g)c("tick0"),c("dtick");else{var h=c("tickvals");void 0===h?b.tickmode="auto":c("ticktext")}}},{"fast-isnumeric":104}],681:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../registry"),g=a("../../lib"),h=a("./axes"),i=/((x|y)([2-9]|[1-9][0-9]+)?)axis$/;b.exports=function(a,b,c,j){function k(a){var b,c,d,e,f,g={};for(b in a)if(c=b.split("."),d=c[0].match(i)){var h=d[1],j=h+"axis";if(e=s[j],f={},Array.isArray(a[b])?f.to=a[b].slice(0):Array.isArray(a[b].range)&&(f.to=a[b].range.slice(0)),!f.to)continue;f.axisName=j,f.length=e._length,t.push(h),g[h]=f}return g}function l(a,b,c){var d,e,f,g=a._plots,h=[];for(d in g){var i=g[d];if(h.indexOf(i)===-1){var j=i.xaxis._id,k=i.yaxis._id,l=i.xaxis.range,m=i.yaxis.range;i.xaxis._r=i.xaxis.range.slice(),i.yaxis._r=i.yaxis.range.slice(),e=c[j]?c[j].to:l,f=c[k]?c[k].to:m,l[0]===e[0]&&l[1]===e[1]&&m[0]===f[0]&&m[1]===f[1]||b.indexOf(j)===-1&&b.indexOf(k)===-1||h.push(i)}}return h}function m(b,c){function d(b,c){for(e=0;e<b.length;e++){var d=b[e];g.indexOf(d.xref)===-1&&g.indexOf(d.yref)===-1||c(a,e)}}var e,g=[];for(g=[b._id,c._id],e=0;e<g.length;e++)h.doTicks(a,g[e],!0);d(s.annotations||[],f.getComponentMethod("annotations","drawOne")),d(s.shapes||[],f.getComponentMethod("shapes","drawOne")),d(s.images||[],f.getComponentMethod("images","draw"))}function n(a){var b=a.xaxis,c=a.yaxis;s._defs.selectAll("#"+a.clipId).call(g.setTranslate,0,0).call(g.setScale,1,1),a.plot.call(g.setTranslate,b._offset,c._offset).call(g.setScale,1,1).selectAll(".points").selectAll(".point").call(g.setPointGroupScale,1,1)}function o(b,c){var d,e,f,h=u[b.xaxis._id],i=u[b.yaxis._id],j=[];if(h){d=a._fullLayout[h.axisName],e=d._r,f=h.to,j[0]=(e[0]*(1-c)+c*f[0]-e[0])/(e[1]-e[0])*b.xaxis._length;var k=e[1]-e[0],l=f[1]-f[0];d.range[0]=e[0]*(1-c)+c*f[0],d.range[1]=e[1]*(1-c)+c*f[1],j[2]=b.xaxis._length*(1-c+c*l/k)}else j[0]=0,j[2]=b.xaxis._length;if(i){d=a._fullLayout[i.axisName],e=d._r,f=i.to,j[1]=(e[1]*(1-c)+c*f[1]-e[1])/(e[0]-e[1])*b.yaxis._length;var n=e[1]-e[0],o=f[1]-f[0];d.range[0]=e[0]*(1-c)+c*f[0],d.range[1]=e[1]*(1-c)+c*f[1],j[3]=b.yaxis._length*(1-c+c*o/n)}else j[1]=0,j[3]=b.yaxis._length;m(b.xaxis,b.yaxis);var p=b.xaxis,q=b.yaxis,r=!!h,t=!!i,v=r?p._length/j[2]:1,w=t?q._length/j[3]:1,x=r?j[0]:0,y=t?j[1]:0,z=r?j[0]/j[2]*p._length:0,A=t?j[1]/j[3]*q._length:0,B=p._offset-z,C=q._offset-A;s._defs.selectAll("#"+b.clipId).call(g.setTranslate,x,y).call(g.setScale,1/v,1/w),b.plot.call(g.setTranslate,B,C).call(g.setScale,v,w).selectAll(".points").selectAll(".point").call(g.setPointGroupScale,1/v,1/w)}function p(){for(var b={},c=0;c<v.length;c++){var d=a._fullLayout[u[v[c]].axisName],f=u[v[c]].to;b[d._name+".range[0]"]=f[0],b[d._name+".range[1]"]=f[1],d.range=f.slice()}return x&&x(),e.relayout(a,b).then(function(){for(var a=0;a<w.length;a++)n(w[a])})}function q(){for(var b={},c=0;c<v.length;c++){var d=a._fullLayout[v[c]+"axis"];b[d._name+".range[0]"]=d.range[0],b[d._name+".range[1]"]=d.range[1],d.range=d._r.slice()}return e.relayout(a,b).then(function(){for(var a=0;a<w.length;a++)n(w[a])})}function r(){z=Date.now();for(var a=Math.min(1,(z-y)/c.duration),b=B(a),d=0;d<w.length;d++)o(w[d],b);z-y>c.duration?(p(),A=window.cancelAnimationFrame(r)):A=window.requestAnimationFrame(r)}var s=a._fullLayout,t=[],u=k(b),v=Object.keys(u),w=l(s,v,u);if(!w.length)return!1;var x;j&&(x=j());var y,z,A,B=d.ease(c.easing);return a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,q()}),y=Date.now(),A=window.requestAnimationFrame(r),Promise.resolve()}},{"../../lib":632,"../../plotly":658,"../../registry":738,"./axes":662,d3:95}],682:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f,g=!1;if("data"===b.type)d=a._fullData[null!==b.traces?b.traces[0]:0];else{if("layout"!==b.type)return!1;d=a._fullLayout}return e=j.nestedProperty(d,b.prop).get(),f=c[b.type]=c[b.type]||{},f.hasOwnProperty(b.prop)&&f[b.prop]!==e&&(g=!0),f[b.prop]=e,{changed:g,value:e}}function e(a,b){return Array.isArray(b[0])&&1===b[0].length&&"string"==typeof b[0][0]?[{type:"layout",prop:"_currentFrame",value:b[0][0]}]:[]}function f(a,b){var c=[],d=b[0],e={};if("string"==typeof d)e[d]=b[1];else{if(!j.isPlainObject(d))return c;e=d}return h(e,function(a,b,d){c.push({type:"layout",prop:a,value:d})},"",0),c}function g(a,b){var c,d,e,f,g=[];if(d=b[0],e=b[1],c=b[2],f={},"string"==typeof d)f[d]=e;else{if(!j.isPlainObject(d))return g;f=d,void 0===c&&(c=e)}return void 0===c&&(c=null),h(f,function(b,d,e){var f;if(Array.isArray(e)){var h=Math.min(e.length,a.data.length);c&&(h=Math.min(h,c.length)),f=[];for(var i=0;i<h;i++)f[i]=c?c[i]:i}else f=c?c.slice(0):null;if(null===f)Array.isArray(e)&&(e=e[0]);else if(Array.isArray(f)){if(!Array.isArray(e)){var j=e;e=[];for(var k=0;k<f.length;k++)e[k]=j}e.length=Math.min(f.length,e.length)}g.push({type:"data",prop:b,traces:f,value:e})},"",0),g}function h(a,b,c,d){Object.keys(a).forEach(function(e){var f=a[e];if("_"!==e[0]){var g=c+(d>0?".":"")+e;j.isPlainObject(f)?h(f,b,g,d+1):b(g,e,f)}})}var i=a("../plotly"),j=a("../lib");c.manageCommandObserver=function(a,b,e,f){var g={},h=!0;b&&b._commandObserver&&(g=b._commandObserver),g.cache||(g.cache={}),g.lookupTable={};var i=c.hasSimpleAPICommandBindings(a,e,g.lookupTable);if(b&&b._commandObserver){if(i)return g;if(b._commandObserver.remove)return b._commandObserver.remove(),b._commandObserver=null,g}if(i){d(a,i,g.cache),g.check=function(){if(h){var b=d(a,i,g.cache);return b.changed&&f&&void 0!==g.lookupTable[b.value]&&(g.disable(),Promise.resolve(f({value:b.value,type:i.type,prop:i.prop,traces:i.traces,index:g.lookupTable[b.value]})).then(g.enable,g.enable)),b.changed}};for(var k=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<k.length;l++)a._internalOn(k[l],g.check);g.remove=function(){for(var b=0;b<k.length;b++)a._removeInternalListener(k[b],g.check)}}else j.warn("Unable to automatically bind plot updates to API command"),g.lookupTable={},g.remove=function(){};return g.disable=function(){h=!1},g.enable=function(){h=!0},b&&(b._commandObserver=g),g},c.hasSimpleAPICommandBindings=function(a,b,d){for(var e,f=b.length,g=0;g<f;g++){var h,i=b[g],j=i.method,k=i.args;if(!j)return!1;var l=c.computeAPICommandBindings(a,j,k);if(1!==l.length)return!1;if(e){if(h=l[0],h.type!==e.type)return!1;if(h.prop!==e.prop)return!1;if(Array.isArray(e.traces)){if(!Array.isArray(h.traces))return!1;h.traces.sort();for(var m=0;m<e.traces.length;m++)if(e.traces[m]!==h.traces[m])return!1}else if(h.prop!==e.prop)return!1}else e=l[0],Array.isArray(e.traces)&&e.traces.sort();h=l[0];var n=h.value;Array.isArray(n)&&(n=n[0]),d&&(d[n]=g)}return e},c.executeAPICommand=function(a,b,c){for(var d=i[b],e=[a],f=0;f<c.length;f++)e.push(c[f]);return d.apply(null,e)["catch"](function(a){return j.warn("API call to Plotly."+b+" rejected.",a),Promise.reject(a)})},c.computeAPICommandBindings=function(a,b,c){var d;switch(b){case"restyle":d=g(a,c);break;case"relayout":d=f(a,c);break;case"update":d=g(a,[c[0],c[2]]).concat(f(a,[c[1]]));break;case"animate":d=e(a,c);break;default:d=[]}return d}},{"../lib":632,"../plotly":658}],683:[function(a,b,c){"use strict";b.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],684:[function(a,b,c){"use strict";b.exports={group:{valType:"string"},name:{valType:"string"},traces:{valType:"data_array"},baseframe:{valType:"string"},data:{valType:"data_array"},layout:{valType:"any"}}},{}],685:[function(a,b,c){"use strict";var d=b.exports={};d.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3"},d.axesNames=["lonaxis","lataxis"],d.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},d.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},d.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,80],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},d.clipPad=.001,d.precision=.1,d.landColor="#F0DC82",d.waterColor="#3399FF",d.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},d.sphereSVG={type:"Sphere"},d.fillLayers=["ocean","land","lakes"],d.lineLayers=["subunits","countries","coastlines","rivers","frame"],d.baseLayers=["ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame"],d.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"},d.baseLayersOverChoropleth=["rivers","lakes"]},{}],686:[function(a,b,c){"use strict";function d(a,b){this.id=a.id,this.graphDiv=a.graphDiv,this.container=a.container,this.topojsonURL=a.topojsonURL,this.hoverContainer=null,this.topojsonName=null,this.topojson=null,this.projectionType=null,this.projection=null,this.clipAngle=null,this.setScale=null,this.path=null,this.zoom=null,this.zoomReset=null,this.xaxis=null,this.yaxis=null,this.makeFramework(),this.updateFx(b.hovermode),this.traceHash={}}function e(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d[0].trace;e.visible===!0&&b.push(d)}return b}function f(a,b,c){return k.geo.graticule().extent([[a[0],b[0]],[a[1],b[1]]]).step(c)}function g(a,b,c){var d=t.layerNameToAdjective[b];a.select("."+b).selectAll("path").attr("stroke","none").call(l.fill,c[d+"color"])}function h(a,b,c){var d=t.layerNameToAdjective[b];a.select("."+b).selectAll("path").attr("fill","none").call(l.stroke,c[d+"color"]).call(m.dashLine,"",c[d+"width"])}function i(a,b,c){a.select("."+b+"graticule").selectAll("path").attr("fill","none").call(l.stroke,c[b].gridcolor).call(m.dashLine,"",c[b].gridwidth)}function j(a){var b={type:"linear",showexponent:"all",exponentformat:n.layoutAttributes.exponentformat.dflt,_gd:{_fullLayout:a}};return n.setConvert(b),b}var k=a("d3"),l=a("../../components/color"),m=a("../../components/drawing"),n=a("../../plots/cartesian/axes"),o=a("../../plots/cartesian/graph_interact"),p=a("./projections"),q=a("./set_scale"),r=a("./zoom"),s=a("./zoom_reset"),t=a("./constants"),u=a("../../constants/xmlns_namespaces"),v=a("../../lib/topojson_utils"),w=a("topojson").feature;p(k),b.exports=d;var x=d.prototype;x.plot=function(a,b,c){var d,e,f=this,g=b[f.id],h=b._size;f.projection=null,f.setScale=q(g,h),f.makeProjection(g),f.makePath(),f.adjustLayout(g,h),f.zoom=r(f,g),f.zoomReset=s(f,g),f.mockAxis=j(b),f.framework.call(f.zoom).on("dblclick.zoom",f.zoomReset),f.framework.on("mousemove",function(){var a=k.mouse(this),b=f.projection.invert(a);if(!isNaN(b[0])&&!isNaN(b[1])){var c={target:!0,xpx:a[0],ypx:a[1]};f.xaxis.c2p=function(){return a[0]},f.xaxis.p2c=function(){return b[0]},f.yaxis.c2p=function(){return a[1]},f.yaxis.p2c=function(){return b[1]},o.hover(f.graphDiv,c,f.id)}}),f.framework.on("mouseout",function(){o.loneUnhover(b._toppaper)}),f.framework.on("click",function(){o.click(f.graphDiv,{target:!0})}),d=v.getTopojsonName(g),null===f.topojson||d!==f.topojsonName?(f.topojsonName=d,void 0!==PlotlyGeoAssets.topojson[f.topojsonName]?(f.topojson=PlotlyGeoAssets.topojson[f.topojsonName],f.onceTopojsonIsLoaded(a,g)):(e=v.getTopojsonPath(f.topojsonURL,f.topojsonName),c.push(new Promise(function(b,c){k.json(e,function(d,h){return d?void c(404===d.status?new Error(["plotly.js could not find topojson file at",e,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",e].join(" "))):(f.topojson=h,PlotlyGeoAssets.topojson[f.topojsonName]=h,f.onceTopojsonIsLoaded(a,g),void b())})})))):f.onceTopojsonIsLoaded(a,g)},x.onceTopojsonIsLoaded=function(a,b){var c;this.drawLayout(b);var d=this.traceHash,f={};for(c=0;c<a.length;c++){var g=a[c],h=g[0].trace;f[h.type]=f[h.type]||[],f[h.type].push(g)}var i=Object.keys(d),j=Object.keys(f);for(c=0;c<i.length;c++){var k=i[c];if(j.indexOf(k)===-1){var l=d[k][0],m=l[0].trace;m.visible=!1,f[k]=[l]}}for(j=Object.keys(f),c=0;c<j.length;c++){var n=f[j[c]],o=n[0][0].trace._module;o.plot(this,e(n),b)}this.traceHash=f,this.render()},x.updateFx=function(a){this.showHover=a!==!1},x.makeProjection=function(a){var b,c=a.projection,d=c.type,e=null===this.projection||d!==this.projectionType;e?(this.projectionType=d,b=this.projection=k.geo[t.projNames[d]]()):b=this.projection,b.translate(c._translate0).precision(t.precision),a._isAlbersUsa||b.rotate(c._rotate).center(c._center),a._clipAngle?(this.clipAngle=a._clipAngle,b.clipAngle(a._clipAngle-t.clipPad)):this.clipAngle=null,c.parallels&&b.parallels(c.parallels),e&&this.setScale(b),b.translate(c._translate).scale(c._scale)},x.makePath=function(){this.path=k.geo.path().projection(this.projection)},x.makeFramework=function(){var a=this.geoDiv=k.select(this.container).append("div");a.attr("id",this.id).style("position","absolute");var b=this.hoverContainer=a.append("svg");b.attr(u.svgAttrs).style({position:"absolute","z-index":20,"pointer-events":"none"});var c=this.framework=a.append("svg");c.attr(u.svgAttrs).attr({position:"absolute",preserveAspectRatio:"none"}),c.append("g").attr("class","bglayer").append("rect"),c.append("g").attr("class","baselayer"),c.append("g").attr("class","choroplethlayer"),c.append("g").attr("class","baselayeroverchoropleth"),c.append("g").attr("class","scattergeolayer"),c.on("dblclick.zoom",null),this.xaxis={_id:"x"},this.yaxis={_id:"y"}},x.adjustLayout=function(a,b){var c=a.domain,d=b.l+b.w*c.x[0]+a._marginX,e=b.t+b.h*(1-c.y[1])+a._marginY;this.geoDiv.style({left:d+"px",top:e+"px",width:a._width+"px",height:a._height+"px"}),this.hoverContainer.attr({width:a._width,height:a._height}),this.framework.attr({width:a._width,height:a._height}),this.framework.select(".bglayer").select("rect").attr({width:a._width,height:a._height}).call(l.fill,a.bgcolor),this.xaxis._offset=d,this.xaxis._length=a._width,this.yaxis._offset=e,this.yaxis._length=a._height},x.drawTopo=function(a,b,c){if(c["show"+b]===!0){var d=this.topojson,e="frame"===b?t.sphereSVG:w(d,d.objects[b]);a.append("g").datum(e).attr("class",b).append("path").attr("class","basepath")}},x.drawGraticule=function(a,b,c){var d=c[b];if(d.showgrid===!0){var e=t.scopeDefaults[c.scope],g=e.lonaxisRange,h=e.lataxisRange,i="lonaxis"===b?[d.dtick]:[0,d.dtick],j=f(g,h,i);a.append("g").datum(j).attr("class",b+"graticule").append("path").attr("class","graticulepath")}},x.drawLayout=function(a){var b,c=this.framework.select("g.baselayer"),d=t.baseLayers,e=t.axesNames;c.selectAll("*").remove();for(var f=0;f<d.length;f++)b=d[f],e.indexOf(b)!==-1?this.drawGraticule(c,b,a):this.drawTopo(c,b,a);this.styleLayout(a)},x.styleLayer=function(a,b,c){var d=t.fillLayers,e=t.lineLayers;d.indexOf(b)!==-1?g(a,b,c):e.indexOf(b)!==-1&&h(a,b,c)},x.styleLayout=function(a){for(var b,c=this.framework.select("g.baselayer"),d=t.baseLayers,e=t.axesNames,f=0;f<d.length;f++)b=d[f],e.indexOf(b)!==-1?i(c,b,a):this.styleLayer(c,b,a)},x.isLonLatOverEdges=function(a){var b=this.clipAngle;if(null===b)return!1;var c=this.projection.rotate(),d=k.geo.distance(a,[-c[0],-c[1]]),e=b*Math.PI/180;return d>e},x.render=function(){function a(a){var b=c.projection(a.lonlat);return b?"translate("+b[0]+","+b[1]+")":null}function b(a){return c.isLonLatOverEdges(a.lonlat)?"0":"1.0"}var c=this,d=c.framework,e=d.select("g.choroplethlayer"),f=d.select("g.scattergeolayer"),g=c.path;d.selectAll("path.basepath").attr("d",g),d.selectAll("path.graticulepath").attr("d",g),e.selectAll("path.choroplethlocation").attr("d",g),e.selectAll("path.basepath").attr("d",g),f.selectAll("path.js-line").attr("d",g),null!==c.clipAngle?(f.selectAll("path.point").style("opacity",b).attr("transform",a),f.selectAll("text").style("opacity",b).attr("transform",a)):(f.selectAll("path.point").attr("transform",a),f.selectAll("text").attr("transform",a))}},{"../../components/color":533,"../../components/drawing":557,"../../constants/xmlns_namespaces":618,"../../lib/topojson_utils":647,"../../plots/cartesian/axes":662,"../../plots/cartesian/graph_interact":670,"./constants":685,"./projections":693,"./set_scale":694,"./zoom":695,"./zoom_reset":696,d3:95,topojson:491}],687:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f.geo===b&&c.push(e)}return c}var e=a("./geo"),f=a("../../plots/plots");c.name="geo",c.attr="geo",c.idRoot="geo",c.idRegex=/^geo([2-9]|[1-9][0-9]+)?$/,c.attrRegex=/^geo([2-9]|[1-9][0-9]+)?$/,c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){var b=a._fullLayout,c=a.calcdata,g=f.getSubplotIds(b,"geo");void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var h=0;h<g.length;h++){var i=g[h],j=d(c,i),k=b[i]._subplot;void 0===k&&(k=new e({id:i,graphDiv:a,container:b._geocontainer.node(),topojsonURL:a._context.topojsonURL},b),b[i]._subplot=k),k.plot(j,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=f.getSubplotIds(d,"geo"),g=0;g<e.length;g++){var h=e[g],i=d[h]._subplot;!b[h]&&i&&i.geoDiv.remove()}},c.toSVG=function(a){for(var b=a._fullLayout,c=f.getSubplotIds(b,"geo"),d=b._size,e=0;e<c.length;e++){var g=b[c[e]],h=g.domain,i=g._subplot.framework;i.attr("style",null),i.attr({x:d.l+d.w*h.x[0]+g._marginX,y:d.t+d.h*(1-h.y[1])+g._marginY,
width:g._width,height:g._height}),b._geoimages.node().appendChild(i.node())}}},{"../../plots/plots":723,"./geo":686,"./layout/attributes":688,"./layout/defaults":691,"./layout/layout_attributes":692}],688:[function(a,b,c){"use strict";b.exports={geo:{valType:"subplotid",dflt:"geo"}}},{}],689:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes");b.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":532}],690:[function(a,b,c){"use strict";var d=a("../../../lib"),e=a("../constants"),f=a("./axis_attributes");b.exports=function(a,b){function c(a,b){return d.coerce(h,i,f,a,b)}function g(a){var c,d,f,g,h,i,j=b.scope;return"world"===j?(c=b.projection,d=c.type,f=c.rotation,h=e[a+"Span"],i=void 0!==h[d]?h[d]/2:h["*"]/2,g="lonaxis"===a?f.lon:f.lat,[g-i,g+i]):e.scopeDefaults[j][a+"Range"]}for(var h,i,j=e.axesNames,k=0;k<j.length;k++){var l=j[k];h=a[l]||{},i={};var m=g(l),n=c("range",m);d.noneOrAll(h.range,i.range,[0,1]),c("tick0",n[0]),c("dtick","lonaxis"===l?30:10);var o=c("showgrid");o&&(c("gridcolor"),c("gridwidth")),b[l]=i,b[l]._fullRange=m}}},{"../../../lib":632,"../constants":685,"./axis_attributes":689}],691:[function(a,b,c){"use strict";function d(a,b,c){var d,e=c("scope"),g="world"!==e,i=f.scopeDefaults[e],j=c("resolution"),k=c("projection.type",i.projType),l="albers usa"===k,m=k.indexOf("conic")!==-1;if(m){var n=i.projParallels||[0,60];c("projection.parallels",n)}if(l)b.scope="usa";else{var o=i.projRotate||[0,0,0];c("projection.rotation.lon",o[0]),c("projection.rotation.lat",o[1]),c("projection.rotation.roll",o[2]),d=c("showcoastlines",!g),d&&(c("coastlinecolor"),c("coastlinewidth")),d=c("showocean"),d&&c("oceancolor")}c("projection.scale"),d=c("showland"),d&&c("landcolor"),d=c("showlakes"),d&&c("lakecolor"),d=c("showrivers"),d&&(c("rivercolor"),c("riverwidth")),d=c("showcountries",g&&"usa"!==e),d&&(c("countrycolor"),c("countrywidth")),("usa"===e||"north america"===e&&50===j)&&(c("showsubunits",!0),c("subunitcolor"),c("subunitwidth")),g||(d=c("showframe",!0),d&&(c("framecolor"),c("framewidth"))),c("bgcolor"),h(a,b),b._isHighRes=50===j,b._clipAngle=f.lonaxisSpan[k]/2,b._isAlbersUsa=l,b._isConic=m,b._isScoped=g;var p=b.projection.rotation||{};b.projection._rotate=[-p.lon||0,-p.lat||0,p.roll||0]}var e=a("../../subplot_defaults"),f=a("../constants"),g=a("./layout_attributes"),h=a("./axis_defaults");b.exports=function(a,b,c){e(a,b,c,{type:"geo",attributes:g,handleDefaults:d,partition:"y"})}},{"../../subplot_defaults":730,"../constants":685,"./axis_defaults":690,"./layout_attributes":692}],692:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes"),e=a("../constants"),f=a("./axis_attributes");b.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(e.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(e.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:e.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:e.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:e.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:e.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:f,lataxis:f}},{"../../../components/color/attributes":532,"../constants":685,"./axis_attributes":689}],693:[function(a,b,c){"use strict";function d(a){function b(a,b){return{type:"Feature",id:a.id,properties:a.properties,geometry:c(a.geometry,b)}}function c(b,d){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(a){return c(a,d)})};if(!C.hasOwnProperty(b.type))return null;var e=C[b.type];return a.geo.stream(b,d(e)),e.result()}function d(){}function e(a){if((b=a.length)<4)return!1;for(var b,c=0,d=a[b-1][1]*a[0][0]-a[b-1][0]*a[0][1];++c<b;)d+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return d<=0}function f(a,b){for(var c=b[0],d=b[1],e=!1,f=0,g=a.length,h=g-1;f<g;h=f++){var i=a[f],j=i[0],k=i[1],l=a[h],m=l[0],n=l[1];k>d^n>d&&c<(m-j)*(d-k)/(n-k)+j&&(e=!e)}return e}function g(a){return a?a/Math.sin(a):1}function h(a){return a>1?G:a<-1?-G:Math.asin(a)}function i(a){return a>1?0:a<-1?F:Math.acos(a)}function j(a,b){var c=(2+G)*Math.sin(b);b/=2;for(var d=0,e=1/0;d<10&&Math.abs(e)>D;d++){var f=Math.cos(b);b-=e=(b+Math.sin(b)*(f+2)-c)/(2*f*(1+f))}return[2/Math.sqrt(F*(4+F))*a*(1+Math.cos(b)),2*Math.sqrt(F/(4+F))*Math.sin(b)]}function k(a,b){function c(c,d){var e=L(c/b,d);return e[0]*=a,e}return arguments.length<2&&(b=a),1===b?L:b===1/0?m:(c.invert=function(c,d){var e=L.invert(c/a,d);return e[0]*=b,e},c)}function l(){var a=2,b=K(k),c=b(a);return c.coefficient=function(c){return arguments.length?b(a=+c):a},c}function m(a,b){return[a*Math.cos(b)/Math.cos(b/=2),2*Math.sin(b)]}function n(a,b){return[3*a/(2*F)*Math.sqrt(F*F/3-b*b),b]}function o(a,b){return[a,1.25*Math.log(Math.tan(F/4+.4*b))]}function p(a){return function(b){var c,d=a*Math.sin(b),e=30;do b-=c=(b+Math.sin(b)-d)/(1+Math.cos(b));while(Math.abs(c)>D&&--e>0);return b/2}}function q(a,b,c){function d(c,d){return[a*c*Math.cos(d=e(d)),b*Math.sin(d)]}var e=p(c);return d.invert=function(d,e){var f=h(e/b);return[d/(a*Math.cos(f)),h((2*f+Math.sin(2*f))/c)]},d}function r(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function s(a,b){var c,d=Math.min(18,36*Math.abs(b)/F),e=Math.floor(d),f=d-e,g=(c=N[e])[0],h=c[1],i=(c=N[++e])[0],j=c[1],k=(c=N[Math.min(19,++e)])[0],l=c[1];return[a*(i+f*(k-g)/2+f*f*(k-2*i+g)/2),(b>0?G:-G)*(j+f*(l-h)/2+f*f*(l-2*j+h)/2)]}function t(a,b){return[a*Math.cos(b),b]}function u(a,b){var c=Math.cos(b),d=g(i(c*Math.cos(a/=2)));return[2*c*Math.sin(a)*d,Math.sin(b)*d]}function v(a,b){var c=u(a,b);return[(c[0]+a/G)/2,(c[1]+b)/2]}a.geo.project=function(a,b){var d=b.stream;if(!d)throw new Error("not yet supported");return(a&&w.hasOwnProperty(a.type)?w[a.type]:c)(a,d)};var w={Feature:b,FeatureCollection:function(a,c){return{type:"FeatureCollection",features:a.features.map(function(a){return b(a,c)})}}},x=[],y=[],z={point:function(a,b){x.push([a,b])},result:function(){var a=x.length?x.length<2?{type:"Point",coordinates:x[0]}:{type:"MultiPoint",coordinates:x}:null;return x=[],a}},A={lineStart:d,point:function(a,b){x.push([a,b])},lineEnd:function(){x.length&&(y.push(x),x=[])},result:function(){var a=y.length?y.length<2?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y}:null;return y=[],a}},B={polygonStart:d,lineStart:d,point:function(a,b){x.push([a,b])},lineEnd:function(){var a=x.length;if(a){do x.push(x[0].slice());while(++a<4);y.push(x),x=[]}},polygonEnd:d,result:function(){if(!y.length)return null;var a=[],b=[];return y.forEach(function(c){e(c)?a.push([c]):b.push(c)}),b.forEach(function(b){var c=b[0];a.some(function(a){if(f(a[0],c))return a.push(b),!0})||a.push([b])}),y=[],a.length?a.length>1?{type:"MultiPolygon",coordinates:a}:{type:"Polygon",coordinates:a[0]}:null}},C={Point:z,MultiPoint:z,LineString:A,MultiLineString:A,Polygon:B,MultiPolygon:B,Sphere:B},D=1e-6,E=D*D,F=Math.PI,G=F/2,H=(Math.sqrt(F),F/180),I=180/F,J=a.geo.projection,K=a.geo.projectionMutator;a.geo.interrupt=function(b){function c(a,c){for(var d=c<0?-1:1,e=i[+(c<0)],f=0,g=e.length-1;f<g&&a>e[f][2][0];++f);var h=b(a-e[f][1][0],c);return h[0]+=b(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0],h}function d(){h=i.map(function(a){return a.map(function(a){var c,d=b(a[0][0],a[0][1])[0],e=b(a[2][0],a[2][1])[0],f=b(a[1][0],a[0][1])[1],g=b(a[1][0],a[1][1])[1];return f>g&&(c=f,f=g,g=c),[[d,f],[e,g]]})})}function e(){for(var b=1e-6,c=[],d=0,e=i[0].length;d<e;++d){var g=i[0][d],h=180*g[0][0]/F,j=180*g[0][1]/F,k=180*g[1][1]/F,l=180*g[2][0]/F,m=180*g[2][1]/F;c.push(f([[h+b,j+b],[h+b,k-b],[l-b,k-b],[l-b,m+b]],30))}for(var d=i[1].length-1;d>=0;--d){var g=i[1][d],h=180*g[0][0]/F,j=180*g[0][1]/F,k=180*g[1][1]/F,l=180*g[2][0]/F,m=180*g[2][1]/F;c.push(f([[l-b,m-b],[l-b,k+b],[h+b,k+b],[h+b,j-b]],30))}return{type:"Polygon",coordinates:[a.merge(c)]}}function f(a,b){for(var c,d,e,f=-1,g=a.length,h=a[0],i=[];++f<g;){c=a[f],d=(c[0]-h[0])/b,e=(c[1]-h[1])/b;for(var j=0;j<b;++j)i.push([h[0]+j*d,h[1]+j*e]);h=c}return i.push(c),i}function g(a,b){return Math.abs(a[0]-b[0])<D&&Math.abs(a[1]-b[1])<D}var h,i=[[[[-F,0],[0,G],[F,0]]],[[[-F,0],[0,-G],[F,0]]]];b.invert&&(c.invert=function(a,d){for(var e=h[+(d<0)],f=i[+(d<0)],j=0,k=e.length;j<k;++j){var l=e[j];if(l[0][0]<=a&&a<l[1][0]&&l[0][1]<=d&&d<l[1][1]){var m=b.invert(a-b(f[j][1][0],0)[0],d);return m[0]+=f[j][1][0],g(c(m[0],m[1]),[a,d])?m:null}}});var j=a.geo.projection(c),k=j.stream;return j.stream=function(b){var c=j.rotate(),d=k(b),f=(j.rotate([0,0]),k(b));return j.rotate(c),d.sphere=function(){a.geo.stream(e(),f)},d},j.lobes=function(a){return arguments.length?(i=a.map(function(a){return a.map(function(a){return[[a[0][0]*F/180,a[0][1]*F/180],[a[1][0]*F/180,a[1][1]*F/180],[a[2][0]*F/180,a[2][1]*F/180]]})}),d(),j):i.map(function(a){return a.map(function(a){return[[180*a[0][0]/F,180*a[0][1]/F],[180*a[1][0]/F,180*a[1][1]/F],[180*a[2][0]/F,180*a[2][1]/F]]})})},j},j.invert=function(a,b){var c=.5*b*Math.sqrt((4+F)/F),d=h(c),e=Math.cos(d);return[a/(2/Math.sqrt(F*(4+F))*(1+e)),h((d+c*(e+2))/(2+G))]},(a.geo.eckert4=function(){return J(j)}).raw=j;var L=a.geo.azimuthalEqualArea.raw;m.invert=function(a,b){var c=2*h(b/2);return[a*Math.cos(c/2)/Math.cos(c),c]},(a.geo.hammer=l).raw=k,n.invert=function(a,b){return[2/3*F*a/Math.sqrt(F*F/3-b*b),b]},(a.geo.kavrayskiy7=function(){return J(n)}).raw=n,o.invert=function(a,b){return[a,2.5*Math.atan(Math.exp(.8*b))-.625*F]},(a.geo.miller=function(){return J(o)}).raw=o;var M=(p(F),q(Math.SQRT2/G,Math.SQRT2,F));(a.geo.mollweide=function(){return J(M)}).raw=M,r.invert=function(a,b){var c,d=b,e=25;do{var f=d*d,g=f*f;d-=c=(d*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))-b)/(1.007226+f*(.045255+g*(-.311325+.259866*f-.005916*11*g)))}while(Math.abs(c)>D&&--e>0);return[a/(.8707+(f=d*d)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),d]},(a.geo.naturalEarth=function(){return J(r)}).raw=r;var N=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];N.forEach(function(a){a[1]*=1.0144}),s.invert=function(a,b){var c=b/G,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=N[f][1],h=N[f+1][1],i=N[Math.min(19,f+2)][1],j=i-g,k=i-2*h+g,l=2*(Math.abs(c)-h)/j,m=k/j,n=l*(1-m*l*(1-2*m*l));if(n>=0||1===f){d=(b>=0?5:-5)*(n+e);var o,p=50;do e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),n=e-f,g=N[f][1],h=N[f+1][1],i=N[Math.min(19,f+2)][1],d-=(o=(b>=0?G:-G)*(h+n*(i-g)/2+n*n*(i-2*h+g)/2)-b)*I;while(Math.abs(o)>E&&--p>0);break}}while(--f>=0);var q=N[f][0],r=N[f+1][0],s=N[Math.min(19,f+2)][0];return[a/(r+n*(s-q)/2+n*n*(s-2*r+q)/2),d*H]},(a.geo.robinson=function(){return J(s)}).raw=s,t.invert=function(a,b){return[a/Math.cos(b),b]},(a.geo.sinusoidal=function(){return J(t)}).raw=t,u.invert=function(a,b){if(!(a*a+4*b*b>F*F+D)){var c=a,d=b,e=25;do{var f,g=Math.sin(c),h=Math.sin(c/2),j=Math.cos(c/2),k=Math.sin(d),l=Math.cos(d),m=Math.sin(2*d),n=k*k,o=l*l,p=h*h,q=1-o*j*j,r=q?i(l*j)*Math.sqrt(f=1/q):f=0,s=2*r*l*h-a,t=r*k-b,u=f*(o*p+r*l*j*n),v=f*(.5*g*m-2*r*k*h),w=.25*f*(m*h-r*k*o*g),x=f*(n*j+r*p*l),y=v*w-x*u;if(!y)break;var z=(t*v-s*x)/y,A=(s*w-t*u)/y;c-=z,d-=A}while((Math.abs(z)>D||Math.abs(A)>D)&&--e>0);return[c,d]}},(a.geo.aitoff=function(){return J(u)}).raw=u,v.invert=function(a,b){var c=a,d=b,e=25;do{var f,g=Math.cos(d),h=Math.sin(d),j=Math.sin(2*d),k=h*h,l=g*g,m=Math.sin(c),n=Math.cos(c/2),o=Math.sin(c/2),p=o*o,q=1-l*n*n,r=q?i(g*n)*Math.sqrt(f=1/q):f=0,s=.5*(2*r*g*o+c/G)-a,t=.5*(r*h+d)-b,u=.5*f*(l*p+r*g*n*k)+.5/G,v=f*(m*j/4-r*h*o),w=.125*f*(j*o-r*h*l*m),x=.5*f*(k*n+r*p*g)+.5,y=v*w-x*u,z=(t*v-s*x)/y,A=(s*w-t*u)/y;c-=z,d-=A}while((Math.abs(z)>D||Math.abs(A)>D)&&--e>0);return[c,d]},(a.geo.winkel3=function(){return J(v)}).raw=v}b.exports=d},{}],694:[function(a,b,c){"use strict";function d(a,b){var c=a.projection,d=a.lonaxis,g=a.lataxis,i=a.domain,j=a.framewidth||0,k=b.w*(i.x[1]-i.x[0]),l=b.h*(i.y[1]-i.y[0]),m=d.range[0]+h,n=d.range[1]-h,o=g.range[0]+h,p=g.range[1]-h,q=d._fullRange[0]+h,r=d._fullRange[1]-h,s=g._fullRange[0]+h,t=g._fullRange[1]-h;c._translate0=[b.l+k/2,b.t+l/2];var u=n-m,v=p-o,w=[m+u/2,o+v/2],x=c._rotate;c._center=[w[0]+x[0],w[1]+x[1]];var y=function(b){function d(a){return Math.min(v*k/(a[1][0]-a[0][0]),v*l/(a[1][1]-a[0][1]))}var g,h,i,u,v=b.scale(),w=c._translate0,x=e(m,o,n,p),y=e(q,s,r,t);i=f(b,x),g=d(i),u=f(b,y),c._fullScale=d(u),b.scale(g),i=f(b,x),h=[w[0]-i[0][0]+j,w[1]-i[0][1]+j],c._translate=h,b.translate(h),i=f(b,x),a._isAlbersUsa||b.clipExtent(i),g=c.scale*g,c._scale=g,a._width=Math.round(i[1][0])+j,a._height=Math.round(i[1][1])+j,a._marginX=(k-Math.round(i[1][0]))/2,a._marginY=(l-Math.round(i[1][1]))/2};return y}function e(a,b,c,d){var e=(c-a)/4;return{type:"Polygon",coordinates:[[[a,b],[a,d],[a+e,d],[a+2*e,d],[a+3*e,d],[c,d],[c,b],[c-e,b],[c-2*e,b],[c-3*e,b],[a,b]]]}}function f(a,b){return g.geo.path().projection(a).bounds(b)}var g=a("d3"),h=a("./constants").clipPad;b.exports=d},{"./constants":685,d3:95}],695:[function(a,b,c){"use strict";function d(a,b){var c;return(c=b._isScoped?f:b._clipAngle?h:g)(a,b.projection)}function e(a,b){var c=b._fullScale;return v.behavior.zoom().translate(a.translate()).scale(a.scale()).scaleExtent([.5*c,100*c])}function f(a,b){function c(){v.select(this).style(y)}function d(){g.scale(v.event.scale).translate(v.event.translate),a.render()}function f(){v.select(this).style(z)}var g=a.projection,h=e(g,b);return h.on("zoomstart",c).on("zoom",d).on("zoomend",f),h}function g(a,b){function c(a){return q.invert(a)}function d(a){var b=q(c(a));return Math.abs(b[0]-a[0])>s||Math.abs(b[1]-a[1])>s}function f(){v.select(this).style(y),i=v.mouse(this),j=q.rotate(),k=q.translate(),l=j,m=c(i)}function g(){return n=v.mouse(this),d(i)?(r.scale(q.scale()),void r.translate(q.translate())):(q.scale(v.event.scale),q.translate([k[0],v.event.translate[1]]),m?c(n)&&(p=c(n),o=[l[0]+(p[0]-m[0]),j[1],j[2]],q.rotate(o),l=o):(i=n,m=c(i)),void a.render())}function h(){v.select(this).style(z)}var i,j,k,l,m,n,o,p,q=a.projection,r=e(q,b),s=2;return r.on("zoomstart",f).on("zoom",g).on("zoomend",h),r}function h(a,b){function c(a){r++||a({type:"zoomstart"})}function d(a){a({type:"zoom"})}function f(a){--r||a({type:"zoomend"})}var g,h=a.projection,n={r:h.rotate(),k:h.scale()},o=e(h,b),p=u(o,"zoomstart","zoom","zoomend"),r=0,s=o.on;return o.on("zoomstart",function(){v.select(this).style(y);var a=v.mouse(this),b=h.rotate(),e=b,f=h.translate(),r=j(b);g=i(h,a),s.call(o,"zoom",function(){var c=v.mouse(this);if(h.scale(n.k=v.event.scale),g){if(i(h,c)){h.rotate(b).translate(f);var j=i(h,c),o=l(g,j),s=q(k(r,o)),t=n.r=m(s,g,e);isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])||(t=e),h.rotate(t),e=t}}else a=c,g=i(h,a);d(p.of(this,arguments))}),c(p.of(this,arguments))}).on("zoomend",function(){v.select(this).style(z),s.call(o,"zoom",null),f(p.of(this,arguments))}).on("zoom.redraw",function(){a.render()}),v.rebind(o,p,"on")}function i(a,b){var c=a.invert(b);return c&&isFinite(c[0])&&isFinite(c[1])&&r(c)}function j(a){var b=.5*a[0]*w,c=.5*a[1]*w,d=.5*a[2]*w,e=Math.sin(b),f=Math.cos(b),g=Math.sin(c),h=Math.cos(c),i=Math.sin(d),j=Math.cos(d);return[f*h*j+e*g*i,e*h*j-f*g*i,f*g*j+e*h*i,f*h*i-e*g*j]}function k(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[c*g-d*h-e*i-f*j,c*h+d*g+e*j-f*i,c*i-d*j+e*g+f*h,c*j+d*i-e*h+f*g]}function l(a,b){if(a&&b){var c=t(a,b),d=Math.sqrt(s(c,c)),e=.5*Math.acos(Math.max(-1,Math.min(1,s(a,b)))),f=Math.sin(e)/d;return d&&[Math.cos(e),c[2]*f,-c[1]*f,c[0]*f]}}function m(a,b,c){var d=p(b,2,a[0]);d=p(d,1,a[1]),d=p(d,0,a[2]-c[2]);var e,f,g=b[0],h=b[1],i=b[2],j=d[0],k=d[1],l=d[2],m=Math.atan2(h,g)*x,o=Math.sqrt(g*g+h*h);Math.abs(k)>o?(f=(k>0?90:-90)-m,e=0):(f=Math.asin(k/o)*x-m,e=Math.sqrt(o*o-k*k));var q=180-f-2*m,r=(Math.atan2(l,j)-Math.atan2(i,e))*x,s=(Math.atan2(l,j)-Math.atan2(i,-e))*x,t=n(c[0],c[1],f,r),u=n(c[0],c[1],q,s);return t<=u?[f,r,c[2]]:[q,s,c[2]]}function n(a,b,c,d){var e=o(c-a),f=o(d-b);return Math.sqrt(e*e+f*f)}function o(a){return(a%360+540)%360-180}function p(a,b,c){var d=c*w,e=a.slice(),f=0===b?1:0,g=2===b?1:2,h=Math.cos(d),i=Math.sin(d);return e[f]=a[f]*h-a[g]*i,e[g]=a[g]*h+a[f]*i,e}function q(a){return[Math.atan2(2*(a[0]*a[1]+a[2]*a[3]),1-2*(a[1]*a[1]+a[2]*a[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(a[0]*a[2]-a[3]*a[1]))))*x,Math.atan2(2*(a[0]*a[3]+a[1]*a[2]),1-2*(a[2]*a[2]+a[3]*a[3]))*x]}function r(a){var b=a[0]*w,c=a[1]*w,d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function s(a,b){for(var c=0,d=0,e=a.length;d<e;++d)c+=a[d]*b[d];return c}function t(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function u(a){for(var b=0,c=arguments.length,d=[];++b<c;)d.push(arguments[b]);var e=v.dispatch.apply(null,d);return e.of=function(b,c){return function(d){var f;try{f=d.sourceEvent=v.event,d.target=a,v.event=d,e[d.type].apply(b,c)}finally{v.event=f}}},e}var v=a("d3"),w=Math.PI/180,x=180/Math.PI,y={cursor:"pointer"},z={cursor:"auto"};b.exports=d},{d3:95}],696:[function(a,b,c){"use strict";function d(a,b){var c=a.projection,d=a.zoom,f=function(){a.makeProjection(b),a.makePath(),d.scale(c.scale()),d.translate(c.translate()),e.loneUnhover(a.hoverContainer),a.render()};return f}var e=a("../cartesian/graph_interact");b.exports=d},{"../cartesian/graph_interact":670}],697:[function(a,b,c){"use strict";function d(a,b){this.element=a,this.plot=b,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxStart=[0,0],this.boxEnd=[0,0]}function e(a){function b(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}var c=a.mouseContainer,e=a.glplot,h=new d(c,e);return h.mouseListener=f(c,function(c,d,f){function g(b,c,d){var e=Math.min(c,d),f=Math.max(c,d);e!==f?(b[0]=e,b[1]=f,h.dataBox=b):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var i=a.xaxis.range,j=a.yaxis.range,k=e.viewBox,l=h.lastPos[0],m=h.lastPos[1];switch(d*=e.pixelRatio,f*=e.pixelRatio,f=k[3]-k[1]-f,a.fullLayout.dragmode){case"zoom":if(c){var n=d/(k[2]-k[0])*(i[1]-i[0])+i[0],o=f/(k[3]-k[1])*(j[1]-j[0])+j[0];h.boxEnabled||(h.boxStart[0]=n,h.boxStart[1]=o),h.boxEnd[0]=n,h.boxEnd[1]=o,h.boxEnabled=!0}else h.boxEnabled&&(g(i,h.boxStart[0],h.boxEnd[0]),g(j,h.boxStart[1],h.boxEnd[1]),b(),h.boxEnabled=!1);break;case"pan":if(h.boxEnabled=!1,c){var p=(l-d)*(i[1]-i[0])/(e.viewBox[2]-e.viewBox[0]),q=(m-f)*(j[1]-j[0])/(e.viewBox[3]-e.viewBox[1]);i[0]+=p,i[1]+=p,j[0]+=q,j[1]+=q,h.lastInputTime=Date.now(),b(),a.cameraChanged()}}h.lastPos[0]=d,h.lastPos[1]=f}),h.wheelListener=g(c,function(c,d){var f=a.xaxis.range,g=a.yaxis.range,i=e.viewBox,j=h.lastPos[0],k=h.lastPos[1];switch(a.fullLayout.dragmode){case"zoom":break;case"pan":var l=Math.exp(.1*d/(i[3]-i[1])),m=j/(i[2]-i[0])*(f[1]-f[0])+f[0],n=k/(i[3]-i[1])*(g[1]-g[0])+g[0];f[0]=(f[0]-m)*l+m,f[1]=(f[1]-m)*l+m,g[0]=(g[0]-n)*l+n,g[1]=(g[1]-n)*l+n,h.lastInputTime=Date.now(),b(),a.cameraChanged()}return!0}),h}var f=a("mouse-change"),g=a("mouse-wheel");b.exports=e},{"mouse-change":413,"mouse-wheel":415}],698:[function(a,b,c){"use strict";function d(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this["static"]=this.scene.staticPlot}function e(a){return new d(a)}var f=a("../plots"),g=a("../cartesian/axes"),h=a("../../lib/html2unicode"),i=a("../../lib/str2rgbarray"),j=d.prototype,k=["xaxis","yaxis"];j.merge=function(a){this.titleEnable=!1,this.backgroundColor=i(a.plot_bgcolor);var b,c,d,e,f,g,j,l,m,n,o;for(n=0;n<2;++n){for(b=k[n],c=a[this.scene[b]._name],d=/Click to enter .+ title/.test(c.title)?"":c.title,o=0;o<=2;o+=2)this.labelEnable[n+o]=!1,this.labels[n+o]=h(d),this.labelColor[n+o]=i(c.titlefont.color),this.labelFont[n+o]=c.titlefont.family,this.labelSize[n+o]=c.titlefont.size,this.labelPad[n+o]=this.getLabelPad(b,c),this.tickEnable[n+o]=!1,this.tickColor[n+o]=i((c.tickfont||{}).color),this.tickAngle[n+o]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[n+o]=this.getTickPad(c),this.tickMarkLength[n+o]=0,this.tickMarkWidth[n+o]=c.tickwidth||0,this.tickMarkColor[n+o]=i(c.tickcolor),this.borderLineEnable[n+o]=!1,this.borderLineColor[n+o]=i(c.linecolor),this.borderLineWidth[n+o]=c.linewidth||0;j=this.hasSharedAxis(c),f=this.hasAxisInDfltPos(b,c)&&!j,g=this.hasAxisInAltrPos(b,c)&&!j,e=c.mirror||!1,l=j?String(e).indexOf("all")!==-1:!!e,m=j?"allticks"===e:String(e).indexOf("ticks")!==-1,f?this.labelEnable[n]=!0:g&&(this.labelEnable[n+2]=!0),f?this.tickEnable[n]=c.showticklabels:g&&(this.tickEnable[n+2]=c.showticklabels),(f||l)&&(this.borderLineEnable[n]=c.showline),(g||l)&&(this.borderLineEnable[n+2]=c.showline),(f||m)&&(this.tickMarkLength[n]=this.getTickMarkLength(c)),(g||m)&&(this.tickMarkLength[n+2]=this.getTickMarkLength(c)),this.gridLineEnable[n]=c.showgrid,this.gridLineColor[n]=i(c.gridcolor),this.gridLineWidth[n]=c.gridwidth,this.zeroLineEnable[n]=c.zeroline,this.zeroLineColor[n]=i(c.zerolinecolor),this.zeroLineWidth[n]=c.zerolinewidth}},j.hasSharedAxis=function(a){var b=this.scene,c=f.getSubplotIds(b.fullLayout,"gl2d"),d=g.findSubplotsWithAxis(c,a);return 0!==d.indexOf(b.id)},j.hasAxisInDfltPos=function(a,b){var c=b.side;return"xaxis"===a?"bottom"===c:"yaxis"===a?"left"===c:void 0},j.hasAxisInAltrPos=function(a,b){var c=b.side;return"xaxis"===a?"top"===c:"yaxis"===a?"right"===c:void 0},j.getLabelPad=function(a,b){var c=1.5,d=b.titlefont.size,e=b.showticklabels;return"xaxis"===a?"top"===b.side?-10+d*(c+(e?1:0)):-10+d*(c+(e?.5:0)):"yaxis"===a?"right"===b.side?10+d*(c+(e?1:.5)):10+d*(c+(e?.5:0)):void 0},j.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15},j.getTickMarkLength=function(a){if(!a.ticks)return 0;var b=a.ticklen;return"inside"===a.ticks?-b:b},b.exports=e},{"../../lib/html2unicode":631,"../../lib/str2rgbarray":645,"../cartesian/axes":662,"../plots":723}],699:[function(a,b,c){"use strict";var d=a("./scene2d"),e=a("../plots"),f=a("../../constants/xmlns_namespaces");c.name="gl2d",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.idRegex={x:/^x([2-9]|[1-9][0-9]+)?$/,y:/^y([2-9]|[1-9][0-9]+)?$/},c.attrRegex={x:/^xaxis([2-9]|[1-9][0-9]+)?$/,y:/^yaxis([2-9]|[1-9][0-9]+)?$/},c.attributes=a("../cartesian/attributes"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,f=e.getSubplotIds(b,"gl2d"),g=0;g<f.length;g++){var h=f[g],i=b._plots[h],j=e.getSubplotData(c,"gl2d",h),k=i._scene2d;void 0===k&&(k=new d({id:h,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),i._scene2d=k),k.plot(j,a.calcdata,b,a.layout)}},c.clean=function(a,b,c,d){for(var f=e.getSubplotIds(d,"gl2d"),g=0;g<f.length;g++){var h=f[g],i=d._plots[h];if(i._scene2d){var j=e.getSubplotData(a,"gl2d",h);0===j.length&&(i._scene2d.destroy(),delete d._plots[h])}}},c.toSVG=function(a){for(var b=a._fullLayout,c=e.getSubplotIds(b,"gl2d"),d=0;d<c.length;d++){var g=b._plots[c[d]],h=g._scene2d,i=h.toImage("png"),j=b._glimages.append("svg:image");j.attr({xmlns:f.svg,"xlink:href":i,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),h.destroy()}}},{"../../constants/xmlns_namespaces":618,"../cartesian/attributes":661,"../plots":723,"./scene2d":700}],700:[function(a,b,c){"use strict";function d(a,b){this.container=a.container,this.graphDiv=a.graphDiv,this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio,this.id=a.id,this.staticPlot=!!a.staticPlot,this.fullLayout=b,this.fullData=null,this.updateAxes(b),this.makeFramework(),this.glplotOptions=n(this),this.glplotOptions.merge(b),this.glplot=j(this.glplotOptions),this.camera=o(this),this.traces={},this._inputs={},this.spikes=k(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function e(a,b){for(var c=0;c<2;++c){var d=a[c],e=b[c];if(d.length!==e.length)return!0;for(var f=0;f<d.length;++f)if(d[f].x!==e[f].x)return!0}return!1}var f,g,h=a("../../plots/cartesian/axes"),i=a("../../plots/cartesian/graph_interact"),j=a("gl-plot2d"),k=a("gl-spikes2d"),l=a("gl-select-box"),m=a("webgl-context"),n=a("./convert"),o=a("./camera"),p=a("../../lib/html2unicode"),q=a("../../lib/show_no_webgl_msg"),r=["xaxis","yaxis"];b.exports=d;var s=d.prototype;s.makeFramework=function(){if(this.staticPlot){if(!g&&(f=document.createElement("canvas"),g=m({canvas:f,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("Error creating static canvas/context for image server");this.canvas=f,this.gl=g}else{var a=document.createElement("canvas"),b=m({canvas:a,premultipliedAlpha:!0});b||q(this),this.canvas=a,this.gl=b}var c=this.canvas;c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style["pointer-events"]="none",this.updateSize(c),c.className+="user-select-none";var d=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.position="absolute",d.style.top=d.style.left="0px",d.style.width=d.style.height="100%",d.style["z-index"]=20,d.style["pointer-events"]="none";var e=this.mouseContainer=document.createElement("div");e.style.position="absolute";var h=this.container;h.appendChild(c),h.appendChild(d),h.appendChild(e)},s.toImage=function(a){a||(a="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(f),this.updateSize(this.canvas),this.glplot.setDirty(),this.glplot.draw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var g=0,h=d-1;g<h;++g,--h)for(var i=0;i<c;++i)for(var j=0;j<4;++j){var k=e[4*(c*g+i)+j];e[4*(c*g+i)+j]=e[4*(c*h+i)+j],e[4*(c*h+i)+j]=k}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(f),o},s.updateSize=function(a){a||(a=this.canvas);var b=this.pixelRatio,c=this.fullLayout,d=c.width,e=c.height,f=0|Math.ceil(b*d),g=0|Math.ceil(b*e);return a.width===f&&a.height===g||(a.width=f,a.height=g),a},s.computeTickMarks=function(){this.xaxis._length=this.glplot.viewBox[2]-this.glplot.viewBox[0],this.yaxis._length=this.glplot.viewBox[3]-this.glplot.viewBox[1];for(var a=[h.calcTicks(this.xaxis),h.calcTicks(this.yaxis)],b=0;b<2;++b)for(var c=0;c<a[b].length;++c)a[b][c].text=p(a[b][c].text+"");return a},s.updateAxes=function(a){var b=h.subplotMatch,c="xaxis"+this.id.match(b)[1],d="yaxis"+this.id.match(b)[2];this.xaxis=a[c],this.yaxis=a[d]},s.updateFx=function(a){var b=this.fullLayout;b.dragmode=a.dragmode,b.hovermode=a.hovermode};var t=function(a){var b=a.xaxis.range,c=a.yaxis.range;a.graphDiv.layout.xaxis.autorange=a.xaxis.autorange,a.graphDiv.layout.xaxis.range=b.slice(0),a.graphDiv.layout.yaxis.autorange=a.yaxis.autorange,a.graphDiv.layout.yaxis.range=c.slice(0);var d={lastInputTime:a.camera.lastInputTime};d[a.xaxis._name]=b.slice(),d[a.yaxis._name]=c.slice(),a.graphDiv.emit("plotly_relayout",d)};s.cameraChanged=function(){var a=this.camera,b=this.xaxis.range,c=this.yaxis.range;this.glplot.setDataBox([b[0],c[0],b[1],c[1]]);var d=this.computeTickMarks(),f=this.glplotOptions.ticks;e(d,f)&&(this.glplotOptions.ticks=d,this.glplotOptions.dataBox=a.dataBox,this.glplot.update(this.glplotOptions),t(this))},s.destroy=function(){var a=this.traces;a&&Object.keys(a).map(function(b){a[b].dispose(),delete a[b]}),this.glplot.dispose(),this.staticPlot||this.container.removeChild(this.canvas),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this._inputs=null,this.glplot=null,this.stopped=!0},s.plot=function(a,b,c){var d=this.glplot;this.fullLayout=c,this.updateAxes(c),this.updateTraces(a,b);var e=c.width,f=c.height;this.updateSize(this.canvas);var g=this.glplotOptions;g.merge(c),g.screenBox=[0,0,e,f];var i=c._size,j=this.xaxis.domain,k=this.yaxis.domain;g.viewBox=[i.l+j[0]*i.w,i.b+k[0]*i.h,e-i.r-(1-j[1])*i.w,f-i.t-(1-k[1])*i.h],this.mouseContainer.style.width=i.w*(j[1]-j[0])+"px",this.mouseContainer.style.height=i.h*(k[1]-k[0])+"px",this.mouseContainer.height=i.h*(k[1]-k[0]),this.mouseContainer.style.left=i.l+j[0]*i.w+"px",this.mouseContainer.style.top=i.t+(1-k[1])*i.h+"px";var l=this.bounds;l[0]=l[1]=1/0,l[2]=l[3]=-(1/0);var m,n,o=Object.keys(this.traces);for(n=0;n<o.length;++n)for(var p=this.traces[o[n]],q=0;q<2;++q)l[q]=Math.min(l[q],p.bounds[q]),l[q+2]=Math.max(l[q+2],p.bounds[q+2]);for(n=0;n<2;++n)l[n]>l[n+2]&&(l[n]=-1,l[n+2]=1),m=this[r[n]],m._length=g.viewBox[n+2]-g.viewBox[n],h.doAutoRange(m);g.ticks=this.computeTickMarks();var s=this.xaxis.range,t=this.yaxis.range;g.dataBox=[s[0],t[0],s[1],t[1]],g.merge(c),d.update(g),this.glplot.draw()},s.updateTraces=function(a,b){var c,d,e,f=Object.keys(this.traces);this.fullData=a;a:for(c=0;c<f.length;c++){var g=f[c],h=this.traces[g];for(d=0;d<a.length;d++)if(e=a[d],e.uid===g&&e.type===h.type)continue a;h.dispose(),delete this.traces[g]}for(c=0;c<a.length;c++){e=a[c],this._inputs[e.uid]=c;var i=b[c],j=this.traces[e.uid];j?j.update(e,i):(j=e._module.plot(this,e,i),
this.traces[e.uid]=j)}},s.emitPointAction=function(a,b){var c=this._inputs[a.trace.uid];this.graphDiv.emit(b,{points:[{x:a.traceCoord[0],y:a.traceCoord[1],curveNumber:c,pointNumber:a.pointIndex,data:this.fullData[c]._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis}]})},s.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var a=this.glplot,b=this.camera,c=b.mouseListener,d=1===this.lastButtonState&&0===c.buttons,e=this.fullLayout;this.lastButtonState=c.buttons,this.cameraChanged();var f=c.x*a.pixelRatio,g=this.canvas.height-a.pixelRatio*c.y;if(b.boxEnabled&&"zoom"===e.dragmode)this.selectBox.enabled=!0,this.selectBox.selectBox=[Math.min(b.boxStart[0],b.boxEnd[0]),Math.min(b.boxStart[1],b.boxEnd[1]),Math.max(b.boxStart[0],b.boxEnd[0]),Math.max(b.boxStart[1],b.boxEnd[1])],a.setDirty();else{this.selectBox.enabled=!1;var h=e._size,j=this.xaxis.domain,k=this.yaxis.domain,l=a.pick(f/a.pixelRatio+h.l+j[0]*h.w,g/a.pixelRatio-(h.t+(1-k[1])*h.h)),m=l&&l.object._trace.handlePick(l);if(m&&d&&this.emitPointAction(m,"plotly_click"),l&&"skip"!==l.object._trace.hoverinfo&&e.hovermode){if(m&&(!this.lastPickResult||this.lastPickResult.traceUid!==m.trace.uid||this.lastPickResult.dataCoord[0]!==m.dataCoord[0]||this.lastPickResult.dataCoord[1]!==m.dataCoord[1])){var n=m;this.lastPickResult={traceUid:m.trace?m.trace.uid:null,dataCoord:m.dataCoord.slice()},this.spikes.update({center:l.dataCoord}),n.screenCoord=[((a.viewBox[2]-a.viewBox[0])*(l.dataCoord[0]-a.dataBox[0])/(a.dataBox[2]-a.dataBox[0])+a.viewBox[0])/a.pixelRatio,(this.canvas.height-(a.viewBox[3]-a.viewBox[1])*(l.dataCoord[1]-a.dataBox[1])/(a.dataBox[3]-a.dataBox[1])-a.viewBox[1])/a.pixelRatio],this.emitPointAction(m,"plotly_hover");var o=n.hoverinfo;if("all"!==o){var p=o.split("+");p.indexOf("x")===-1&&(n.traceCoord[0]=void 0),p.indexOf("y")===-1&&(n.traceCoord[1]=void 0),p.indexOf("z")===-1&&(n.traceCoord[2]=void 0),p.indexOf("text")===-1&&(n.textLabel=void 0),p.indexOf("name")===-1&&(n.name=void 0)}i.loneHover({x:n.screenCoord[0],y:n.screenCoord[1],xLabel:this.hoverFormatter("xaxis",n.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",n.traceCoord[1]),zLabel:n.traceCoord[2],text:n.textLabel,name:n.name,color:n.color},{container:this.svgContainer})}}else!l&&this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),i.loneUnhover(this.svgContainer))}a.draw()}},s.hoverFormatter=function(a,b){if(void 0!==b){var c=this[a];return h.tickText(c,c.c2l(b),"hover").text}}},{"../../lib/html2unicode":631,"../../lib/show_no_webgl_msg":643,"../../plots/cartesian/axes":662,"../../plots/cartesian/graph_interact":670,"./camera":697,"./convert":698,"gl-plot2d":187,"gl-select-box":218,"gl-spikes2d":227,"webgl-context":518}],701:[function(a,b,c){"use strict";function d(a,b){a=a||document.body,b=b||{};var c=[.01,1/0];"distanceLimits"in b&&(c[0]=b.distanceLimits[0],c[1]=b.distanceLimits[1]),"zoomMin"in b&&(c[0]=b.zoomMin),"zoomMax"in b&&(c[1]=b.zoomMax);var d=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:c}),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=0,k=a.clientWidth,l=a.clientHeight,m={keyBindingMode:"rotate",view:d,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,tick:function(){var b=e(),c=this.delay,f=b-2*c;d.idle(b-c),d.recalcMatrix(f),d.flush(b-(100+2*c));for(var g=!0,h=d.computedMatrix,m=0;m<16;++m)g=g&&i[m]===h[m],i[m]=h[m];var n=a.clientWidth===k&&a.clientHeight===l;return k=a.clientWidth,l=a.clientHeight,g?!n:(j=Math.exp(d.computedRadius[0]),!0)},lookAt:function(a,b,c){d.lookAt(d.lastT(),a,b,c)},rotate:function(a,b,c){d.rotate(d.lastT(),a,b,c)},pan:function(a,b,c){d.pan(d.lastT(),a,b,c)},translate:function(a,b,c){d.translate(d.lastT(),a,b,c)}};Object.defineProperties(m,{matrix:{get:function(){return d.computedMatrix},set:function(a){return d.setMatrix(d.lastT(),a),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(a){var b=d.computedUp.slice(),c=d.computedEye.slice(),f=d.computedCenter.slice();if(d.setMode(a),"turntable"===a){var g=e();d._active.lookAt(g,c,f,b),d._active.lookAt(g+500,c,f,[0,0,1]),d._active.flush(g)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(a){return d.lookAt(d.lastT(),null,a),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(a){return d.lookAt(d.lastT(),a),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(a){return d.lookAt(d.lastT(),null,null,a),d.computedUp},enumerable:!0},distance:{get:function(){return j},set:function(a){return d.setDistance(d.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(c)},set:function(a){return d.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var n=0,o=0;return g(a,function(b,c,f,g){var h="rotate"===m.keyBindingMode,i="pan"===m.keyBindingMode,k="zoom"===m.keyBindingMode,l=!!g.control,p=!!g.alt,q=!!g.shift,r=!!(1&b),s=!!(2&b),t=!!(4&b),u=1/a.clientHeight,v=u*(c-n),w=u*(f-o),x=m.flipX?1:-1,y=m.flipY?1:-1,z=e(),A=Math.PI*m.rotateSpeed;if((h&&r&&!l&&!p&&!q||r&&!l&&!p&&q)&&d.rotate(z,x*A*v,-y*A*w,0),(i&&r&&!l&&!p&&!q||s||r&&l&&!p&&!q)&&d.pan(z,-m.translateSpeed*v*j,m.translateSpeed*w*j,0),k&&r&&!l&&!p&&!q||t||r&&!l&&p&&!q){var B=-m.zoomSpeed*w/window.innerHeight*(z-d.lastT())*100;d.pan(z,0,0,j*(Math.exp(B)-1))}return n=c,o=f,!0}),h(a,function(a,b){var c=m.flipX?1:-1,f=m.flipY?1:-1,g=e();if(Math.abs(a)>Math.abs(b))d.rotate(g,0,0,-a*c*Math.PI*m.rotateSpeed/window.innerWidth);else{var h=-m.zoomSpeed*f*b/window.innerHeight*(g-d.lastT())/100;d.pan(g,0,0,j*(Math.exp(h)-1))}},!0),m}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel")},{"3d-view":27,"mouse-change":413,"mouse-wheel":415,"right-now":459}],702:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<3;++c){var d=h[c];b[d]._gd=a}}var e=a("./scene"),f=a("../plots"),g=a("../../constants/xmlns_namespaces"),h=["xaxis","yaxis","zaxis"];c.name="gl3d",c.attr="scene",c.idRoot="scene",c.idRegex=/^scene([2-9]|[1-9][0-9]+)?$/,c.attrRegex=/^scene([2-9]|[1-9][0-9]+)?$/,c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){var b=a._fullLayout,c=a._fullData,g=f.getSubplotIds(b,"gl3d");b._paperdiv.style({width:b.width+"px",height:b.height+"px"}),a._context.setBackground(a,b.paper_bgcolor);for(var h=0;h<g.length;h++){var i=g[h],j=f.getSubplotData(c,"gl3d",i),k=b[i],l=k._scene;void 0===l&&(d(a,k),l=new e({id:i,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),k._scene=l),l.plot(j,b,a.layout)}},c.clean=function(a,b,c,d){for(var e=f.getSubplotIds(d,"gl3d"),g=0;g<e.length;g++){var h=e[g];!b[h]&&d[h]._scene&&d[h]._scene.destroy()}},c.toSVG=function(a){for(var b=a._fullLayout,c=f.getSubplotIds(b,"gl3d"),d=b._size,e=0;e<c.length;e++){var h=b[c[e]],i=h.domain,j=h._scene,k=j.toImage("png"),l=b._glimages.append("svg:image");l.attr({xmlns:g.svg,"xlink:href":k,x:d.l+d.w*i.x[0],y:d.t+d.h*(1-i.y[1]),width:d.w*(i.x[1]-i.x[0]),height:d.h*(i.y[1]-i.y[0]),preserveAspectRatio:"none"}),j.destroy()}},c.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var b=a.substr(5);return"1"===b&&(b=""),"scene"+b}},c.setConvert=a("./set_convert")},{"../../constants/xmlns_namespaces":618,"../plots":723,"./layout/attributes":703,"./layout/defaults":707,"./layout/layout_attributes":708,"./scene":712,"./set_convert":713}],703:[function(a,b,c){"use strict";b.exports={scene:{valType:"subplotid",dflt:"scene"}}},{}],704:[function(a,b,c){"use strict";var d=a("../../../components/color"),e=a("../../cartesian/layout_attributes"),f=a("../../../lib/extend").extendFlat;b.exports={showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:e.color,categoryorder:e.categoryorder,categoryarray:e.categoryarray,title:e.title,titlefont:e.titlefont,type:e.type,autorange:e.autorange,rangemode:e.rangemode,range:e.range,fixedrange:e.fixedrange,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,mirror:e.mirror,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:e.tickfont,tickangle:e.tickangle,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,showexponent:e.showexponent,exponentformat:e.exponentformat,separatethousands:e.separatethousands,tickformat:e.tickformat,hoverformat:e.hoverformat,showline:e.showline,linecolor:e.linecolor,linewidth:e.linewidth,showgrid:e.showgrid,gridcolor:f({},e.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:e.gridwidth,zeroline:e.zeroline,zerolinecolor:e.zerolinecolor,zerolinewidth:e.zerolinewidth}},{"../../../components/color":533,"../../../lib/extend":625,"../../cartesian/layout_attributes":672}],705:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../../lib"),f=a("./axis_attributes"),g=a("../../cartesian/axis_defaults"),h=["xaxis","yaxis","zaxis"],i=13600/187;b.exports=function(a,b,c){function j(a,b){return e.coerce(k,l,f,a,b)}for(var k,l,m=0;m<h.length;m++){var n=h[m];k=a[n]||{},l={_id:n[0]+c.scene,_name:n},b[n]=l=g(k,l,j,{font:c.font,letter:n[0],data:c.data,showGrid:!0,bgColor:c.bgColor}),j("gridcolor",d(l.color,c.bgColor,i).toRgbString()),j("title",n[0]),l.setScale=e.noop,j("showspikes")&&(j("spikesides"),j("spikethickness"),j("spikecolor",l.color)),j("showaxeslabels"),j("showbackground")&&j("backgroundcolor")}}},{"../../../lib":632,"../../cartesian/axis_defaults":664,"./axis_attributes":704,tinycolor2:489}],706:[function(a,b,c){"use strict";function d(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=i(this.tickPad),this._defaultLabelPad=i(this.labelPad),this._defaultLineTickLength=i(this.lineTickLength)}function e(a){var b=new d;return b.merge(a),b}var f=a("arraytools"),g=a("../../../lib/html2unicode"),h=a("../../../lib/str2rgbarray"),i=f.copy1D,j=["xaxis","yaxis","zaxis"],k=d.prototype;k.merge=function(a){for(var b=this,c=0;c<3;++c){var d=a[j[c]];b.labels[c]=g(d.title),"titlefont"in d&&(d.titlefont.color&&(b.labelColor[c]=h(d.titlefont.color)),d.titlefont.family&&(b.labelFont[c]=d.titlefont.family),d.titlefont.size&&(b.labelSize[c]=d.titlefont.size)),"showline"in d&&(b.lineEnable[c]=d.showline),"linecolor"in d&&(b.lineColor[c]=h(d.linecolor)),"linewidth"in d&&(b.lineWidth[c]=d.linewidth),"showgrid"in d&&(b.gridEnable[c]=d.showgrid),"gridcolor"in d&&(b.gridColor[c]=h(d.gridcolor)),"gridwidth"in d&&(b.gridWidth[c]=d.gridwidth),"log"===d.type?b.zeroEnable[c]=!1:"zeroline"in d&&(b.zeroEnable[c]=d.zeroline),"zerolinecolor"in d&&(b.zeroLineColor[c]=h(d.zerolinecolor)),"zerolinewidth"in d&&(b.zeroLineWidth[c]=d.zerolinewidth),"ticks"in d&&d.ticks?b.lineTickEnable[c]=!0:b.lineTickEnable[c]=!1,"ticklen"in d&&(b.lineTickLength[c]=b._defaultLineTickLength[c]=d.ticklen),"tickcolor"in d&&(b.lineTickColor[c]=h(d.tickcolor)),"tickwidth"in d&&(b.lineTickWidth[c]=d.tickwidth),"tickangle"in d&&(b.tickAngle[c]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180),"showticklabels"in d&&(b.tickEnable[c]=d.showticklabels),"tickfont"in d&&(d.tickfont.color&&(b.tickColor[c]=h(d.tickfont.color)),d.tickfont.family&&(b.tickFont[c]=d.tickfont.family),d.tickfont.size&&(b.tickSize[c]=d.tickfont.size)),"mirror"in d?["ticks","all","allticks"].indexOf(d.mirror)!==-1?(b.lineTickMirror[c]=!0,b.lineMirror[c]=!0):d.mirror===!0?(b.lineTickMirror[c]=!1,b.lineMirror[c]=!0):(b.lineTickMirror[c]=!1,b.lineMirror[c]=!1):b.lineMirror[c]=!1,"showbackground"in d&&d.showbackground!==!1?(b.backgroundEnable[c]=!0,b.backgroundColor[c]=h(d.backgroundcolor)):b.backgroundEnable[c]=!1}},b.exports=e},{"../../../lib/html2unicode":631,"../../../lib/str2rgbarray":645,arraytools:33}],707:[function(a,b,c){"use strict";function d(a,b,c,d){for(var f=c("bgcolor"),i=e.combine(f,d.paper_bgcolor),j=Object.keys(g.camera),k=0;k<j.length;k++)c("camera."+j[k]+".x"),c("camera."+j[k]+".y"),c("camera."+j[k]+".z");var l=!!c("aspectratio.x")&&!!c("aspectratio.y")&&!!c("aspectratio.z"),m=l?"manual":"auto",n=c("aspectmode",m);l||(a.aspectratio=b.aspectratio={x:1,y:1,z:1},"manual"===n&&(b.aspectmode="auto")),h(a,b,{font:d.font,scene:d.id,data:d.fullData,bgColor:i}),c("dragmode",d.getDfltFromLayout("dragmode")),c("hovermode",d.getDfltFromLayout("hovermode"))}var e=a("../../../components/color"),f=a("../../subplot_defaults"),g=a("./layout_attributes"),h=a("./axis_defaults");b.exports=function(a,b,c){function e(b){if(!h){var c=g[b].values.indexOf(a[b])!==-1;return c?a[b]:void 0}}var h=b._has("cartesian")||b._has("geo")||b._has("gl2d")||b._has("pie")||b._has("ternary");f(a,b,c,{type:"gl3d",attributes:g,handleDefaults:d,font:b.font,fullData:c,getDfltFromLayout:e,paper_bgcolor:b.paper_bgcolor})}},{"../../../components/color":533,"../../subplot_defaults":730,"./axis_defaults":705,"./layout_attributes":708}],708:[function(a,b,c){"use strict";function d(a,b,c){return{x:{valType:"number",dflt:a},y:{valType:"number",dflt:b},z:{valType:"number",dflt:c}}}var e=a("./axis_attributes"),f=a("../../../lib/extend").extendFlat;b.exports={bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},camera:{up:f(d(0,0,1),{}),center:f(d(0,0,0),{}),eye:f(d(1.25,1.25,1.25),{})},domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto"},aspectratio:{x:{valType:"number",min:0},y:{valType:"number",min:0},z:{valType:"number",min:0}},xaxis:e,yaxis:e,zaxis:e,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan"],dflt:"turntable"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest"},_deprecated:{cameraposition:{valType:"info_array"}}}},{"../../../lib/extend":625,"./axis_attributes":704}],709:[function(a,b,c){"use strict";function d(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function e(a){var b=new d;return b.merge(a),b}var f=a("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"],h=d.prototype;h.merge=function(a){for(var b=0;b<3;++b){var c=a[g[b]];this.enabled[b]=c.showspikes,this.colors[b]=f(c.spikecolor),this.drawSides[b]=c.spikesides,this.lineWidth[b]=c.spikethickness}},b.exports=e},{"../../../lib/str2rgbarray":645}],710:[function(a,b,c){"use strict";function d(a){for(var b=new Array(3),c=0;c<3;++c){for(var d=a[c],e=new Array(d.length),f=0;f<d.length;++f)e[f]=d[f].x;b[c]=e}return b}function e(a){for(var b=a.axesOptions,c=a.glplot.axesPixels,e=a.fullSceneLayout,k=[[],[],[]],l=0;l<3;++l){var m=e[i[l]];if(m._length=(c[l].hi-c[l].lo)*c[l].pixelsPerDataUnit/a.dataScale[l],Math.abs(m._length)===1/0)k[l]=[];else{m.range[0]=c[l].lo/a.dataScale[l],m.range[1]=c[l].hi/a.dataScale[l],m._m=1/(a.dataScale[l]*c[l].pixelsPerDataUnit),m.range[0]===m.range[1]&&(m.range[0]-=1,m.range[1]+=1);var n=m.tickmode;if("auto"===m.tickmode){m.tickmode="linear";var o=m.nticks||g.constrain(m._length/40,4,9);f.autoTicks(m,Math.abs(m.range[1]-m.range[0])/o)}for(var p=f.calcTicks(m),q=0;q<p.length;++q)p[q].x=p[q].x*a.dataScale[l],p[q].text=h(p[q].text);k[l]=p,m.tickmode=n}}b.ticks=k;for(var l=0;l<3;++l){j[l]=.5*(a.glplot.bounds[0][l]+a.glplot.bounds[1][l]);for(var q=0;q<2;++q)b.bounds[q][l]=a.glplot.bounds[q][l]}a.contourLevels=d(k)}b.exports=e;var f=a("../../cartesian/axes"),g=a("../../../lib"),h=a("../../../lib/html2unicode"),i=["xaxis","yaxis","zaxis"],j=[0,0,0]},{"../../../lib":632,"../../../lib/html2unicode":631,"../../cartesian/axes":662}],711:[function(a,b,c){"use strict";function d(a,b){var c,d,e=[0,0,0,0];for(c=0;c<4;++c)for(d=0;d<4;++d)e[d]+=a[4*c+d]*b[c];return e}function e(a,b){var c=d(a.projection,d(a.view,d(a.model,[b[0],b[1],b[2],1])));return c}b.exports=e},{}],712:[function(a,b,c){"use strict";function d(a){function b(b,c){if("string"==typeof c)return c;var d=a.fullSceneLayout[b];return p.tickText(d,d.c2l(c),"hover").text}var c,d=a.svgContainer,e=a.container.getBoundingClientRect(),f=e.width,g=e.height;d.setAttributeNS(null,"viewBox","0 0 "+f+" "+g),d.setAttributeNS(null,"width",f),d.setAttributeNS(null,"height",g),y(a),a.glplot.axes.update(a.axesOptions);for(var h=Object.keys(a.traces),i=null,j=a.glplot.selection,k=0;k<h.length;++k)c=a.traces[h[k]],"skip"!==c.data.hoverinfo&&c.handlePick(j)&&(i=c),c.setContourLevels&&c.setContourLevels();var l;if(null!==i){var m=u(a.glplot.cameraParams,j.dataCoordinate);c=i.data;var n=c.hoverinfo,o=b("xaxis",j.traceCoordinate[0]),r=b("yaxis",j.traceCoordinate[1]),s=b("zaxis",j.traceCoordinate[2]);if("all"!==n){var t=n.split("+");t.indexOf("x")===-1&&(o=void 0),t.indexOf("y")===-1&&(r=void 0),t.indexOf("z")===-1&&(s=void 0),t.indexOf("text")===-1&&(j.textLabel=void 0),t.indexOf("name")===-1&&(i.name=void 0)}a.fullSceneLayout.hovermode&&q.loneHover({x:(.5+.5*m[0]/m[3])*f,y:(.5-.5*m[1]/m[3])*g,xLabel:o,yLabel:r,zLabel:s,text:j.textLabel,name:i.name,color:i.color},{container:d});var v={points:[{x:o,y:r,z:s,data:c._input,fullData:c,curveNumber:c.index,pointNumber:j.data.index}]};j.buttons&&j.distance<5?a.graphDiv.emit("plotly_click",v):a.graphDiv.emit("plotly_hover",v),l=v}else q.loneUnhover(d),a.graphDiv.emit("plotly_unhover",l)}function e(a,b,c,e){var f={canvas:c,gl:e,container:a.container,axes:a.axesOptions,spikes:a.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(a.staticMode){if(!l&&(k=document.createElement("canvas"),l=n({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");f.pixelRatio=a.pixelRatio,f.gl=l,f.canvas=k}try{a.glplot=m(f)}catch(b){s(a)}var g=function(a){var b={};b[a.id]=j(a.camera),a.saveCamera(a.graphDiv.layout),a.graphDiv.emit("plotly_relayout",b)};if(a.glplot.canvas.addEventListener("mouseup",g.bind(null,a)),a.glplot.canvas.addEventListener("wheel",g.bind(null,a)),a.staticMode||a.glplot.canvas.addEventListener("webglcontextlost",function(a){o.warn("Lost WebGL context."),a.preventDefault()}),!a.camera){var h=a.fullSceneLayout.camera;a.camera=t(a.container,{center:[h.center.x,h.center.y,h.center.z],eye:[h.eye.x,h.eye.y,h.eye.z],up:[h.up.x,h.up.y,h.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return a.glplot.mouseListener.enabled=!1,a.glplot.camera=a.camera,a.glplot.oncontextloss=function(){a.recoverContext()},a.glplot.onrender=d.bind(null,a),a.traces={},!0}function f(a,b){var c=document.createElement("div"),d=a.container;this.graphDiv=a.graphDiv;var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute",f.style.top=f.style.left="0px",f.style.width=f.style.height="100%",f.style["z-index"]=20,f.style["pointer-events"]="none",c.appendChild(f),this.svgContainer=f,c.id=a.id,c.style.position="absolute",c.style.top=c.style.left="0px",c.style.width=c.style.height="100%",d.appendChild(c),this.fullLayout=b,this.id=a.id||"scene",this.fullSceneLayout=b[this.id],this.plotArgs=[[],{},{}],this.axesOptions=w(b[this.id]),this.spikeOptions=x(b[this.id]),this.container=c,this.staticMode=!!a.staticPlot,this.pixelRatio=a.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],!e(this,b)}function g(a,b,c,d){for(var e,f=0;f<b.length;++f)if(Array.isArray(b[f]))for(var g=0;g<b[f].length;++g)e=a.d2l(b[f][g]),!isNaN(e)&&isFinite(e)&&(d[0][c]=Math.min(d[0][c],e),d[1][c]=Math.max(d[1][c],e));else e=a.d2l(b[f]),!isNaN(e)&&isFinite(e)&&(d[0][c]=Math.min(d[0][c],e),d[1][c]=Math.max(d[1][c],e))}function h(a,b,c){var d=a.fullSceneLayout;g(d.xaxis,b.x,0,c),g(d.yaxis,b.y,1,c),g(d.zaxis,b.z,2,c)}function i(a){return[[a.eye.x,a.eye.y,a.eye.z],[a.center.x,a.center.y,a.center.z],[a.up.x,a.up.y,a.up.z]]}function j(a){return{up:{x:a.up[0],y:a.up[1],z:a.up[2]},center:{x:a.center[0],y:a.center[1],z:a.center[2]},eye:{x:a.eye[0],y:a.eye[1],z:a.eye[2]}}}var k,l,m=a("gl-plot3d"),n=a("webgl-context"),o=a("../../lib"),p=a("../../plots/cartesian/axes"),q=a("../../plots/cartesian/graph_interact"),r=a("../../lib/str2rgbarray"),s=a("../../lib/show_no_webgl_msg"),t=a("./camera"),u=a("./project"),v=a("./set_convert"),w=a("./layout/convert"),x=a("./layout/spikes"),y=a("./layout/tick_marks"),z=f.prototype;z.recoverContext=function(){function a(){return c.isContextLost()?void requestAnimationFrame(a):e(b,b.fullLayout,d,c)?void b.plot.apply(b,b.plotArgs):void o.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var b=this,c=this.glplot.gl,d=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(a)};var A=["xaxis","yaxis","zaxis"];z.plot=function(a,b,c){if(this.plotArgs=[a,b,c],!this.glplot.contextLost){var d,e,f,g,i,j,k=b[this.id],l=c[this.id];for(k.bgcolor?this.glplot.clearColor=r(k.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullSceneLayout=k,this.glplotLayout=k,this.axesOptions.merge(k),this.spikeOptions.merge(k),this.updateFx(k.dragmode,k.hovermode),this.glplot.update({}),f=0;f<3;++f)i=k[A[f]],v(i);a?Array.isArray(a)||(a=[a]):a=[];var m=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(f=0;f<a.length;++f)d=a[f],d.visible===!0&&h(this,d,m);var n=[1,1,1];for(g=0;g<3;++g)m[0][g]>m[1][g]?n[g]=1:m[1][g]===m[0][g]?n[g]=1:n[g]=1/(m[1][g]-m[0][g]);for(this.dataScale=n,f=0;f<a.length;++f)d=a[f],d.visible===!0&&(e=this.traces[d.uid],e?e.update(d):(e=d._module.plot(this,d),this.traces[d.uid]=e),e.name=d.name);var o=Object.keys(this.traces);a:for(f=0;f<o.length;++f){for(g=0;g<a.length;++g)if(a[g].uid===o[f]&&a[g].visible===!0)continue a;e=this.traces[o[f]],e.dispose(),delete this.traces[o[f]]}var p=[[0,0,0],[0,0,0]],q=[],s={};for(f=0;f<3;++f){if(i=k[A[f]],j=i.type,j in s?(s[j].acc*=n[f],s[j].count+=1):s[j]={acc:n[f],count:1},i.autorange){for(p[0][f]=1/0,p[1][f]=-(1/0),g=0;g<this.glplot.objects.length;++g){var t=this.glplot.objects[g].bounds;p[0][f]=Math.min(p[0][f],t[0][f]/n[f]),p[1][f]=Math.max(p[1][f],t[1][f]/n[f])}if("rangemode"in i&&"tozero"===i.rangemode&&(p[0][f]=Math.min(p[0][f],0),p[1][f]=Math.max(p[1][f],0)),p[0][f]>p[1][f])p[0][f]=-1,p[1][f]=1;else{var u=p[1][f]-p[0][f];p[0][f]-=u/32,p[1][f]+=u/32}}else{var w=k[A[f]].range;p[0][f]=w[0],p[1][f]=w[1]}p[0][f]===p[1][f]&&(p[0][f]-=1,p[1][f]+=1),q[f]=p[1][f]-p[0][f],this.glplot.bounds[0][f]=p[0][f]*n[f],this.glplot.bounds[1][f]=p[1][f]*n[f]}var x=[1,1,1];for(f=0;f<3;++f){i=k[A[f]],j=i.type;var y=s[j];x[f]=Math.pow(y.acc,1/y.count)/n[f]}var z,B=4;if("auto"===k.aspectmode)z=Math.max.apply(null,x)/Math.min.apply(null,x)<=B?x:[1,1,1];else if("cube"===k.aspectmode)z=[1,1,1];else if("data"===k.aspectmode)z=x;else{if("manual"!==k.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var C=k.aspectratio;z=[C.x,C.y,C.z]}k.aspectratio.x=l.aspectratio.x=z[0],k.aspectratio.y=l.aspectratio.y=z[1],k.aspectratio.z=l.aspectratio.z=z[2],this.glplot.aspect=z;var D=k.domain||null,E=b._size||null;if(D&&E){var F=this.container.style;F.position="absolute",F.left=E.l+D.x[0]*E.w+"px",F.top=E.t+(1-D.y[1])*E.h+"px",F.width=E.w*(D.x[1]-D.x[0])+"px",F.height=E.h*(D.y[1]-D.y[0])+"px"}this.glplot.redraw()}},z.destroy=function(){this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null},z.setCameraToDefault=function(){this.setCamera({eye:{x:1.25,y:1.25,z:1.25},center:{x:0,y:0,z:0},up:{x:0,y:0,z:1}})},z.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),j(this.glplot.camera)},z.setCamera=function(a){var b={};b[this.id]=a,this.glplot.camera.lookAt.apply(this,i(a)),this.graphDiv.emit("plotly_relayout",b)},z.saveCamera=function(a){function b(a,b,c,d){var e=["up","center","eye"],f=["x","y","z"];return b[e[c]]&&a[e[c]][f[d]]===b[e[c]][f[d]]}var c=this.getCamera(),d=o.nestedProperty(a,this.id+".camera"),e=d.get(),f=!1;if(void 0===e)f=!0;else for(var g=0;g<3;g++)for(var h=0;h<3;h++)if(!b(c,e,g,h)){f=!0;break}return f&&d.set(c),f},z.updateFx=function(a,b){var c=this.camera;c&&("orbit"===a?(c.mode="orbit",c.keyBindingMode="rotate"):"turntable"===a?(c.up=[0,0,1],c.mode="turntable",c.keyBindingMode="rotate"):c.keyBindingMode=a),this.fullSceneLayout.hovermode=b},z.toImage=function(a){a||(a="png"),this.staticMode&&this.container.appendChild(k),this.glplot.redraw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var f=0,g=d-1;f<g;++f,--g)for(var h=0;h<c;++h)for(var i=0;i<4;++i){var j=e[4*(c*f+h)+i];e[4*(c*f+h)+i]=e[4*(c*g+h)+i],e[4*(c*g+h)+i]=j}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(k),o},b.exports=f},{"../../lib":632,"../../lib/show_no_webgl_msg":643,"../../lib/str2rgbarray":645,"../../plots/cartesian/axes":662,"../../plots/cartesian/graph_interact":670,"./camera":701,"./layout/convert":706,"./layout/spikes":709,"./layout/tick_marks":710,"./project":711,"./set_convert":713,"gl-plot3d":189,"webgl-context":518}],713:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../cartesian/axes");b.exports=function(a){e.setConvert(a),a.setScale=d.noop}},{"../../lib":632,"../cartesian/axes":662}],714:[function(a,b,c){"use strict";var d=a("../lib"),e=d.extendFlat,f=a("./font_attributes"),g=a("../components/color/attributes");b.exports={font:{family:e({},f.family,{dflt:'"Open Sans", verdana, arial, sans-serif'}),size:e({},f.size,{dflt:12}),color:e({},f.color,{dflt:g.defaultLine})},title:{valType:"string",dflt:"Click to enter Plot title"},titlefont:e({},f,{}),autosize:{valType:"boolean",dflt:!1},width:{valType:"number",min:10,dflt:700},height:{valType:"number",min:10,dflt:450},margin:{l:{valType:"number",min:0,dflt:80},r:{valType:"number",min:0,dflt:80},t:{valType:"number",min:0,dflt:100},b:{valType:"number",min:0,dflt:80},pad:{valType:"number",min:0,dflt:0},autoexpand:{valType:"boolean",dflt:!0}},paper_bgcolor:{valType:"color",dflt:g.background},plot_bgcolor:{valType:"color",dflt:g.background},separators:{valType:"string",dflt:".,"},hidesources:{valType:"boolean",dflt:!1},smith:{valType:"enumerated",values:[!1],dflt:!1},showlegend:{valType:"boolean"},_composedModules:{"*":"Fx"},_nestedModules:{xaxis:"Axes",yaxis:"Axes",scene:"gl3d",geo:"geo",ternary:"ternary",mapbox:"mapbox",legend:"legend",annotations:"annotations",shapes:"shapes",images:"images",updatemenus:"updatemenus",sliders:"sliders"}}},{"../components/color/attributes":532,"../lib":632,"./font_attributes":683}],715:[function(a,b,c){"use strict";b.exports={styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),mapOnErrorMsg:"Mapbox error."}},{}],716:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){var c=a.split(" "),e=c[0],f=c[1],g=Array.isArray(b)?d.mean(b):b,h=.5+g/100,i=1.5+g/100,j=["",""],k=[0,0];switch(e){case"top":j[0]="top",k[1]=-i;break;case"bottom":j[0]="bottom",k[1]=i}switch(f){case"left":j[1]="right",k[0]=-h;break;case"right":j[1]="left",k[0]=h}var l;return l=j[0]&&j[1]?j.join("-"):j[0]?j[0]:j[1]?j[1]:"center",{anchor:l,offset:k}}},{"../../lib":632}],717:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f.subplot===b&&c.push(e)}return c}function e(a,b){var c=a._fullLayout,d=a._context;if(""===d.mapboxAccessToken)return"";for(var e=d.mapboxAccessToken,f=0;f<b.length;f++){var g=c[b[f]];if(g.accesstoken){e=g.accesstoken;break}}if(!e)throw new Error(j.noAccessTokenErrorMsg);return e}var f=a("mapbox-gl"),g=a("../plots"),h=a("../../constants/xmlns_namespaces"),i=a("./mapbox"),j=a("./constants");c.name="mapbox",c.attr="subplot",c.idRoot="mapbox",c.idRegex=/^mapbox([2-9]|[1-9][0-9]+)?$/,c.attrRegex=/^mapbox([2-9]|[1-9][0-9]+)?$/,c.attributes={subplot:{valType:"subplotid",dflt:"mapbox"}},c.layoutAttributes=a("./layout_attributes"),c.supplyLayoutDefaults=a("./layout_defaults"),c.plot=function(a){var b=a._fullLayout,c=a.calcdata,h=g.getSubplotIds(b,"mapbox"),j=e(a,h);f.accessToken=j;for(var k=0;k<h.length;k++){var l=h[k],m=d(c,l),n=b[l],o=n._subplot;n.accesstoken=j,o||(o=i({gd:a,container:b._glcontainer.node(),id:l,fullLayout:b,staticPlot:a._context.staticPlot}),b[l]._subplot=o),o.plot(m,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=g.getSubplotIds(d,"mapbox"),f=0;f<e.length;f++){var h=e[f];!b[h]&&d[h]._subplot&&d[h]._subplot.destroy()}},c.toSVG=function(a){for(var b=a._fullLayout,c=g.getSubplotIds(b,"mapbox"),d=b._size,e=0;e<c.length;e++){var f=b[c[e]],i=f.domain,j=f._subplot,k=j.toImage("png"),l=b._glimages.append("svg:image");l.attr({xmlns:h.svg,"xlink:href":k,x:d.l+d.w*i.x[0],y:d.t+d.h*(1-i.y[1]),width:d.w*(i.x[1]-i.x[0]),height:d.h*(i.y[1]-i.y[0]),preserveAspectRatio:"none"}),j.destroy()}}},{"../../constants/xmlns_namespaces":618,"../plots":723,"./constants":715,"./layout_attributes":719,"./layout_defaults":720,"./mapbox":721,"mapbox-gl":304}],718:[function(a,b,c){"use strict";function d(a,b){this.mapbox=a,this.map=a.map,this.uid=a.uid+"-layer"+b,this.idSource=this.uid+"-source",this.idLayer=this.uid+"-layer",this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}function e(a){var b=a.source;return h.isPlainObject(b)||"string"==typeof b&&b.length>0}function f(a){var b={},c={};switch(a.type){case"circle":h.extendFlat(c,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case"line":h.extendFlat(c,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity});break;case"fill":h.extendFlat(c,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case"symbol":var d=a.symbol,e=i(d.textposition,d.iconsize);h.extendFlat(b,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":e.anchor,
"text-offset":e.offset}),h.extendFlat(c,{"icon-color":a.color,"text-color":d.textfont.color,"text-opacity":a.opacity})}return{layout:b,paint:c}}function g(a){var b,c=a.sourcetype,d=a.source,e={type:c},f="string"==typeof d;return"geojson"===c?b="data":"vector"===c&&(b=f?"url":"tiles"),e[b]=d,e}var h=a("../../lib"),i=a("./convert_text_opts"),j=d.prototype;j.update=function(a){this.visible?this.needsNewSource(a)?(this.updateLayer(a),this.updateSource(a)):this.needsNewLayer(a)&&this.updateLayer(a):(this.updateSource(a),this.updateLayer(a)),this.updateStyle(a),this.visible=e(a)},j.needsNewSource=function(a){return this.sourceType!==a.sourcetype||this.source!==a.source||this.layerType!==a.type},j.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==a.below},j.updateSource=function(a){var b=this.map;if(b.getSource(this.idSource)&&b.removeSource(this.idSource),this.sourceType=a.sourcetype,this.source=a.source,e(a)){var c=g(a);b.addSource(this.idSource,c)}},j.updateLayer=function(a){var b=this.map;if(b.getLayer(this.idLayer)&&b.removeLayer(this.idLayer),this.layerType=a.type,e(a)){b.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type},a.below);var c={visibility:"visible"};this.mapbox.setOptions(this.idLayer,"setLayoutProperty",c)}},j.updateStyle=function(a){var b=f(a);e(a)&&(this.mapbox.setOptions(this.idLayer,"setLayoutProperty",b.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",b.paint))},j.dispose=function(){var a=this.map;a.removeLayer(this.idLayer),a.removeSource(this.idSource)},b.exports=function(a,b,c){var e=new d(a,b);return e.update(c),e}},{"../../lib":632,"./convert_text_opts":716}],719:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color").defaultLine,f=a("../font_attributes"),g=a("../../traces/scatter/attributes").textposition;b.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],dflt:"basic"},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:{_isLinkedToArray:!0,sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:e},opacity:{valType:"number",min:0,max:1,dflt:1},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2}},fill:{outlinecolor:{valType:"color",dflt:e}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},textfont:d.extendDeep({},f,{family:{dflt:"Open Sans Regular, Arial Unicode MS Regular"}}),textposition:d.extendFlat({},g,{arrayOk:!1})}}}},{"../../components/color":533,"../../lib":632,"../../traces/scatter/attributes":844,"../font_attributes":683}],720:[function(a,b,c){"use strict";function d(a,b,c){c("accesstoken"),c("style"),c("center.lon"),c("center.lat"),c("zoom"),c("bearing"),c("pitch"),e(a,b),b._input=a}function e(a,b){function c(a,b){return f.coerce(d,e,h.layers,a,b)}for(var d,e,g=a.layers||[],i=b.layers=[],j=0;j<g.length;j++)if(d=g[j],e={},f.isPlainObject(d)){var k=c("sourcetype");c("source"),"vector"===k&&c("sourcelayer");var l=c("type");c("below"),c("color"),c("opacity"),"circle"===l&&c("circle.radius"),"line"===l&&c("line.width"),"fill"===l&&c("fill.outlinecolor"),"symbol"===l&&(c("symbol.icon"),c("symbol.iconsize"),c("symbol.text"),f.coerceFont(c,"symbol.textfont"),c("symbol.textposition")),e._index=j,i.push(e)}}var f=a("../../lib"),g=a("../subplot_defaults"),h=a("./layout_attributes");b.exports=function(a,b,c){g(a,b,c,{type:"mapbox",attributes:h,handleDefaults:d,partition:"y"})}},{"../../lib":632,"../subplot_defaults":730,"./layout_attributes":719}],721:[function(a,b,c){"use strict";function d(a){this.id=a.id,this.gd=a.gd,this.container=a.container,this.isStatic=a.staticPlot;var b=a.fullLayout;this.uid=b._uid+"-"+this.id,this.opts=b[this.id],this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(b),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[]}function e(a){var b=l.style.values,c=l.style.dflt,d={};return j.isPlainObject(a)?(d.id=a.id,d.style=a):"string"==typeof a?(d.id=a,d.style=b.indexOf(a)!==-1?f(a):a):(d.id=c,d.style=f(c)),d}function f(a){return k.styleUrlPrefix+a+"-"+k.styleUrlSuffix}function g(a){return[a.lon,a.lat]}var h=a("mapbox-gl"),i=a("../cartesian/graph_interact"),j=a("../../lib"),k=a("./constants"),l=a("./layout_attributes"),m=a("./layers"),n=d.prototype;b.exports=function(a){var b=new d(a);return b},n.plot=function(a,b,c){var d=this,e=d.opts=b[this.id];d.map&&e.accesstoken!==d.accessToken&&(d.map.remove(),d.map=null,d.styleObj=null,d.traceHash=[],d.layerList={});var f;f=d.map?new Promise(function(c,e){d.updateMap(a,b,c,e)}):new Promise(function(c,e){d.createMap(a,b,c,e)}),c.push(f)},n.createMap=function(a,b,c,d){function f(){i.loneUnhover(b._toppaper)}var l=this,m=l.gd,n=l.opts,o=l.styleObj=e(n.style);l.accessToken=n.accesstoken;var p=l.map=new h.Map({container:l.div,style:o.style,center:g(n.center),zoom:n.zoom,bearing:n.bearing,pitch:n.pitch,interactive:!l.isStatic,preserveDrawingBuffer:l.isStatic}),q=k.controlContainerClassName,r=l.div.getElementsByClassName(q)[0];l.div.removeChild(r),l.rejectOnError(d),p.once("load",function(){l.updateData(a),l.updateLayout(b),l.resolveOnRender(c)}),p.on("moveend",function(a){var b=l.getView();if(n._input.center=n.center=b.center,n._input.zoom=n.zoom=b.zoom,n._input.bearing=n.bearing=b.bearing,n._input.pitch=n.pitch=b.pitch,a.originalEvent){var c={};c[l.id]=j.extendFlat({},b),m.emit("plotly_relayout",c)}}),p.on("mousemove",function(a){var b=l.div.getBoundingClientRect();a.clientX=a.point.x+b.left,a.clientY=a.point.y+b.top,a.target.getBoundingClientRect=function(){return b},l.xaxis.p2c=function(){return a.lngLat.lng},l.yaxis.p2c=function(){return a.lngLat.lat},i.hover(m,a,l.id)}),p.on("click",function(){i.click(m,{target:!0})}),p.on("dragstart",f),p.on("zoomstart",f)},n.updateMap=function(a,b,c,d){var f=this,g=f.map;f.rejectOnError(d);var h=e(f.opts.style);f.styleObj.id!==h.id?(f.styleObj=h,g.setStyle(h.style),g.style.once("load",function(){f.traceHash={},f.updateData(a),f.updateLayout(b),f.resolveOnRender(c)})):(f.updateData(a),f.updateLayout(b),f.resolveOnRender(c))},n.updateData=function(a){var b,c,d,e,f=this.traceHash;for(d=0;d<a.length;d++){var g=a[d];c=g[0].trace,b=f[c.uid],b?b.update(g):c._module&&(f[c.uid]=c._module.plot(this,g))}var h=Object.keys(f);a:for(d=0;d<h.length;d++){var i=h[d];for(e=0;e<a.length;e++)if(c=a[e][0].trace,i===c.uid)continue a;b=f[i],b.dispose(),delete f[i]}},n.updateLayout=function(a){var b=this.map,c=this.opts;b.setCenter(g(c.center)),b.setZoom(c.zoom),b.setBearing(c.bearing),b.setPitch(c.pitch),this.updateLayers(),this.updateFramework(a),this.map.resize()},n.resolveOnRender=function(a){var b=this.map;b.on("render",function c(){b.loaded()&&(b.off("render",c),a())})},n.rejectOnError=function(a){function b(){a(new Error(k.mapOnErrorMsg))}var c=this.map;c.once("error",b),c.once("style.error",b),c.once("source.error",b),c.once("tile.error",b),c.once("layer.error",b)},n.createFramework=function(a){var b=this,c=b.div=document.createElement("div");c.id=b.uid,c.style.position="absolute",b.container.appendChild(c),b.xaxis={_id:"x",c2p:function(a){return b.project(a).x}},b.yaxis={_id:"y",c2p:function(a){return b.project(a).y}},b.updateFramework(a)},n.updateFramework=function(a){var b=a[this.id].domain,c=a._size,d=this.div.style;d.width=c.w*(b.x[1]-b.x[0])+"px",d.height=c.h*(b.y[1]-b.y[0])+"px",d.left=c.l+b.x[0]*c.w+"px",d.top=c.t+(1-b.y[1])*c.h+"px",this.xaxis._offset=c.l+b.x[0]*c.w,this.xaxis._length=c.w*(b.x[1]-b.x[0]),this.yaxis._offset=c.t+(1-b.y[1])*c.h,this.yaxis._length=c.h*(b.y[1]-b.y[0])},n.updateLayers=function(){var a,b=this.opts,c=b.layers,d=this.layerList;if(c.length!==d.length){for(a=0;a<d.length;a++)d[a].dispose();for(d=this.layerList=[],a=0;a<c.length;a++)d.push(m(this,a,c[a]))}else for(a=0;a<c.length;a++)d[a].update(c[a])},n.destroy=function(){this.map&&this.map.remove(),this.container.removeChild(this.div)},n.toImage=function(){return this.map.getCanvas().toDataURL()},n.initSource=function(a){var b={type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[]}}};return this.map.addSource(a,b)},n.setSourceData=function(a,b){this.map.getSource(a).setData(b)},n.setOptions=function(a,b,c){for(var d=this.map,e=Object.keys(c),f=0;f<e.length;f++){var g=e[f];d[b](a,g,c[g])}},n.project=function(a){return this.map.project(new h.LngLat(a[0],a[1]))},n.getView=function(){var a=this.map,b=a.getCenter(),c={lon:b.lng,lat:b.lat};return{center:c,zoom:a.getZoom(),bearing:a.getBearing(),pitch:a.getPitch()}}},{"../../lib":632,"../cartesian/graph_interact":670,"./constants":715,"./layers":718,"./layout_attributes":719,"mapbox-gl":304}],722:[function(a,b,c){"use strict";b.exports={t:{valType:"number",dflt:0},r:{valType:"number",dflt:0},b:{valType:"number",dflt:0},l:{valType:"number",dflt:0}}},{}],723:[function(a,b,c){"use strict";function d(a,b){b.text("");var c=b.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(a._context.linkText+" "+String.fromCharCode(187));if(a._context.sendData)c.on("click",function(){o.sendDataToCloud(a)});else{var d=window.location.pathname.split("/"),e=window.location.search;c.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+d[2].split(".")[0]+"/"+d[1]+e})}}function e(a,b){for(var c=m.isPlainObject,d=Array.isArray,f=Object.keys(b||{}),g=0;g<f.length;g++){var h=f[g],i=b[h],j=a[h];if("_"===h.charAt(0)||"function"==typeof i){if(h in a)continue;a[h]=i}else if(d(i)&&d(j)&&c(i[0]))for(var k=0;k<i.length;k++)c(i[k])&&c(j[k])&&e(j[k],i[k]);else c(i)&&c(j)&&(e(j,i),Object.keys(j).length||delete a[h])}}function f(a,b,c){var d=c._globalTransforms||[];if(Array.isArray(a.transforms)||0!==d.length)for(var e=a.transforms||[],f=d.concat(e),g=b.transforms=[],h=0;h<f.length;h++){var i,j=f[h],k=j.type,l=s[k];l||m.warn("Unrecognized transform type "+k+"."),l&&l.supplyDefaults?(i=l.supplyDefaults(j,b,c,a),i.type=k,i._module=l):i=m.extendFlat({},j),g.push(i)}}function g(a,b,c,d){for(var e=a.transforms,f=[a],g=0;g<e.length;g++){var h=e[g],i=s[h.type];i&&i.transform&&(f=i.transform(f,{transform:h,fullTrace:a,fullData:b,layout:c,fullLayout:d,transformIndex:g}))}return f}function h(a){var b,c={left:0,right:0,bottom:0,top:0};if(a)for(b in a)a.hasOwnProperty(b)&&(c.left+=a[b].left||0,c.right+=a[b].right||0,c.bottom+=a[b].bottom||0,c.top+=a[b].top||0);return c}var i=a("d3"),j=a("fast-isnumeric"),k=a("../plotly"),l=a("../registry"),m=a("../lib"),n=a("../components/color"),o=b.exports={},p=a("./animation_attributes"),q=a("./frame_attributes");m.extendFlat(o,l),o.attributes=a("./attributes"),o.attributes.type.values=o.allTypes,o.fontAttrs=a("./font_attributes"),o.layoutAttributes=a("./layout_attributes"),o.fontWeight="normal";var r=o.subplotsRegistry,s=o.transformsRegistry,t=a("../components/errorbars"),u=a("./command");o.executeAPICommand=u.executeAPICommand,o.computeAPICommandBindings=u.computeAPICommandBindings,o.manageCommandObserver=u.manageCommandObserver,o.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,o.findSubplotIds=function(a,b){var c=[];if(void 0===o.subplotsRegistry[b])return c;for(var d=o.subplotsRegistry[b].attr,e=0;e<a.length;e++){var f=a[e];o.traceIs(f,b)&&c.indexOf(f[d])===-1&&c.push(f[d])}return c},o.getSubplotIds=function(a,b){var c=o.subplotsRegistry[b];if(void 0===c)return[];if(!("cartesian"!==b||a._has&&a._has("cartesian")))return[];if(!("gl2d"!==b||a._has&&a._has("gl2d")))return[];if("cartesian"===b||"gl2d"===b)return Object.keys(a._plots||{});for(var d=c.idRegex,e=Object.keys(a),f=[],g=0;g<e.length;g++){var h=e[g];d.test(h)&&f.push(h)}var i=c.idRoot.length;return f.sort(function(a,b){var c=+(a.substr(i)||1),d=+(b.substr(i)||1);return c-d}),f},o.getSubplotData=function(a,b,c){if(void 0===o.subplotsRegistry[b])return[];for(var d,e=o.subplotsRegistry[b].attr,f=[],g=0;g<a.length;g++)if(d=a[g],"gl2d"===b&&o.traceIs(d,"gl2d")){var h=k.Axes.subplotMatch,i="x"+c.match(h)[1],j="y"+c.match(h)[2];d[e[0]]===i&&d[e[1]]===j&&f.push(d)}else d[e]===c&&f.push(d);return f},o.redrawText=function(a){if(!(a.data&&a.data[0]&&a.data[0].r))return new Promise(function(b){setTimeout(function(){l.getComponentMethod("annotations","draw")(a),l.getComponentMethod("legend","draw")(a),(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()}),b(o.previousPromises(a))},300)})},o.resize=function(a){return new Promise(function(b,c){a&&"none"!==i.select(a).style("display")||c(new Error("Resize must be passed a plot div element.")),a._redrawTimer&&clearTimeout(a._redrawTimer),a._redrawTimer=setTimeout(function(){if(a.layout.width&&a.layout.height)return void b(a);delete a.layout.width,delete a.layout.height;var c=a.changed;a.autoplay=!0,k.relayout(a,{autosize:!0}).then(function(){a.changed=c,b(a)})},100)})},o.previousPromises=function(a){if((a._promises||[]).length)return Promise.all(a._promises).then(function(){a._promises=[]})},o.addLinks=function(a){var b=a._fullLayout,c=b._paper.selectAll("text.js-plot-link-container").data([0]);c.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var a=i.select(this);a.append("tspan").classed("js-link-to-tool",!0),a.append("tspan").classed("js-link-spacer",!0),a.append("tspan").classed("js-sourcelinks",!0)});var e=c.node(),f={y:b._paper.attr("height")-9};document.body.contains(e)&&e.getComputedTextLength()>=b.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=b._paper.attr("width")-7),c.attr(f);var g=c.select(".js-link-to-tool"),h=c.select(".js-link-spacer"),j=c.select(".js-sourcelinks");a._context.showSources&&a._context.showSources(a),a._context.showLink&&d(a,g),h.text(g.text()&&j.text()?" - ":"")},o.sendDataToCloud=function(a){a.emit("plotly_beforeexport");var b=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",c=i.select(a).append("div").attr("id","hiddenform").style("display","none"),d=c.append("form").attr({action:b+"/external",method:"post",target:"_blank"}),e=d.append("input").attr({type:"text",name:"data"});return e.node().value=o.graphJson(a,!1,"keepdata"),d.node().submit(),c.remove(),a.emit("plotly_afterexport"),!1},o.supplyDefaults=function(a){var b,c=a._fullLayout||{},d=a._fullLayout={},f=a.layout||{},g=a._fullData||[],h=a._fullData=[],i=a.data||[];if(c._initialAutoSizeIsDone){var j=c.width,l=c.height;o.supplyLayoutGlobalDefaults(f,d),f.width||(d.width=j),f.height||(d.height=l)}else{o.supplyLayoutGlobalDefaults(f,d);var m=!f.width||!f.height,n=d.autosize,p=a._context&&a._context.autosizable,q=m&&(n||p);q?o.plotAutoSize(a,f,d):m&&o.sanitizeMargins(a),!n&&m&&(f.width=d.width,f.height=d.height)}d._initialAutoSizeIsDone=!0,d._dataLength=i.length,d._globalTransforms=(a._context||{}).globalTransforms,o.supplyDataDefaults(i,h,f,d),d._has=o._hasPlotType.bind(d);var r=d._modules;for(b=0;b<r.length;b++){var s=r[b];s.cleanData&&s.cleanData(h)}if(g.length===i.length)for(b=0;b<h.length;b++)e(h[b],g[b]);o.supplyLayoutModuleDefaults(f,d,h),d._hasCartesian=d._has("cartesian"),d._hasGeo=d._has("geo"),d._hasGL3D=d._has("gl3d"),d._hasGL2D=d._has("gl2d"),d._hasTernary=d._has("ternary"),d._hasPie=d._has("pie"),o.cleanPlot(h,d,g,c),o.linkSubplots(h,d,g,c),e(d,c),o.doAutoMargin(a);var t=k.Axes.list(a);for(b=0;b<t.length;b++){var u=t[b];u._gd=a,u.setScale()}if((a.calcdata||[]).length===h.length)for(b=0;b<h.length;b++){var v=h[b];(a.calcdata[b][0]||{}).trace=v}a._transitionData||o.createTransitionData(a)},o.createTransitionData=function(a){a._transitionData||(a._transitionData={}),a._transitionData._frames||(a._transitionData._frames=[]),a._transitionData._frameHash||(a._transitionData._frameHash={}),a._transitionData._counter||(a._transitionData._counter=0),a._transitionData._interruptCallbacks||(a._transitionData._interruptCallbacks=[])},o._hasPlotType=function(a){for(var b=this._basePlotModules||[],c=0;c<b.length;c++){var d=b[c];if(d.name===a)return!0}return!1},o.cleanPlot=function(a,b,c,d){var e,f,g=d._basePlotModules||[];for(e=0;e<g.length;e++){var h=g[e];h.clean&&h.clean(a,b,c,d)}var i=!!d._paper,j=!!d._infolayer;a:for(e=0;e<c.length;e++){var k=c[e],l=k.uid;for(f=0;f<a.length;f++){var m=a[f];if(l===m.uid)continue a}i&&d._paper.selectAll(".hm"+l+",.contour"+l+",#clip"+l+",.trace"+l).remove(),j&&d._infolayer.selectAll(".cb"+l).remove()}},o.linkSubplots=function(a,b,c,d){for(var e=d._plots||{},f=b._plots={},g={_fullData:a,_fullLayout:b},h=k.Axes.getSubplots(g),i=0;i<h.length;i++){var j,l=h[i],m=e[l];m?j=f[l]=m:(j=f[l]={},j.id=l),j.xaxis=k.Axes.getFromId(g,l,"x"),j.yaxis=k.Axes.getFromId(g,l,"y")}},o.supplyDataDefaults=function(a,b,c,d){function e(a){b.push(a);var c=a._module;c&&(m.pushUnique(f,c),m.pushUnique(h,a._module.basePlotModule),i++)}for(var f=d._modules=[],h=d._basePlotModules=[],i=0,j=0;j<a.length;j++){var k=a[j],l=o.supplyTraceDefaults(k,i,d,j);if(l.index=j,l._input=k,l._expandedIndex=i,l.transforms&&l.transforms.length)for(var n=g(l,b,c,d),p=0;p<n.length;p++){var q=n[p],r=o.supplyTraceDefaults(q,i,d,j);q.uid=r.uid=l.uid+p,r.index=j,r._input=k,r._fullInput=l,r._expandedIndex=i,r._expandedInput=q,e(r)}else l._fullInput=l,l._expandedInput=l,e(l)}},o.supplyAnimationDefaults=function(a){function b(b,c){return m.coerce(a||{},d,p,b,c)}a=a||{};var c,d={};if(b("mode"),b("direction"),b("fromcurrent"),Array.isArray(a.frame))for(d.frame=[],c=0;c<a.frame.length;c++)d.frame[c]=o.supplyAnimationFrameDefaults(a.frame[c]||{});else d.frame=o.supplyAnimationFrameDefaults(a.frame||{});if(Array.isArray(a.transition))for(d.transition=[],c=0;c<a.transition.length;c++)d.transition[c]=o.supplyAnimationTransitionDefaults(a.transition[c]||{});else d.transition=o.supplyAnimationTransitionDefaults(a.transition||{});return d},o.supplyAnimationFrameDefaults=function(a){function b(b,d){return m.coerce(a||{},c,p.frame,b,d)}var c={};return b("duration"),b("redraw"),c},o.supplyAnimationTransitionDefaults=function(a){function b(b,d){return m.coerce(a||{},c,p.transition,b,d)}var c={};return b("duration"),b("easing"),c},o.supplyFrameDefaults=function(a){function b(b,d){return m.coerce(a,c,q,b,d)}var c={};return b("group"),b("name"),b("traces"),b("baseframe"),b("data"),b("layout"),c},o.supplyTraceDefaults=function(a,b,c,d){function e(b,c){return m.coerce(a,h,o.attributes,b,c)}function g(b,c){if(o.traceIs(h,b))return m.coerce(a,h,o.subplotsRegistry[b].attributes,c)}var h={},i=n.defaults[b%n.defaults.length],j=e("visible");e("type"),e("uid"),e("name","trace "+d);for(var k=Object.keys(r),l=0;l<k.length;l++){var p=k[l];if(["cartesian","gl2d"].indexOf(p)===-1){var q=r[p].attr;q&&g(p,q)}}if(j){var s=o.getModule(h);h._module=s,e("hoverinfo",1===c._dataLength?"x+y+z+text":void 0),s&&s.supplyDefaults(a,h,i,c),o.traceIs(h,"noOpacity")||e("opacity"),g("cartesian","xaxis"),g("cartesian","yaxis"),g("gl2d","xaxis"),g("gl2d","yaxis"),o.traceIs(h,"showLegend")&&(e("showlegend"),e("legendgroup")),f(a,h,c)}return h},o.supplyLayoutGlobalDefaults=function(a,b){function c(c,d){return m.coerce(a,b,o.layoutAttributes,c,d)}var d=m.coerceFont(c,"font");c("title"),m.coerceFont(c,"titlefont",{family:d.family,size:Math.round(1.4*d.size),color:d.color}),c("autosize",!(a.width&&a.height)),c("width"),c("height"),c("margin.l"),c("margin.r"),c("margin.t"),c("margin.b"),c("margin.pad"),c("margin.autoexpand"),a.width&&a.height&&o.sanitizeMargins(b),c("paper_bgcolor"),c("separators"),c("hidesources"),c("smith")},o.plotAutoSize=function(a,b,c){var d,e,f=a._context||{},g=f.frameMargins,i=m.isPlotDiv(a);if(i&&a.emit("plotly_autosize"),f.fillFrame)d=window.innerWidth,e=window.innerHeight,document.body.style.overflow="hidden";else if(j(g)&&g>0){var k=h(a._boundingBoxMargins),l=k.left+k.right,n=k.bottom+k.top,p=1-2*g,q=c._container&&c._container.node?c._container.node().getBoundingClientRect():{width:c.width,height:c.height};d=Math.round(p*(q.width-l)),e=Math.round(p*(q.height-n))}else{var r=i?window.getComputedStyle(a):{};d=parseFloat(r.width)||c.width,e=parseFloat(r.height)||c.height}var s=o.layoutAttributes.width.min,t=o.layoutAttributes.height.min;d<s&&(d=s),e<t&&(e=t);var u=!b.width&&Math.abs(c.width-d)>1,v=!b.height&&Math.abs(c.height-e)>1;(v||u)&&(u&&(c.width=d),v&&(c.height=e)),a._initialAutoSize||(a._initialAutoSize={width:d,height:e}),o.sanitizeMargins(c)},o.supplyLayoutModuleDefaults=function(a,b,c){var d,e;k.Axes.supplyLayoutDefaults(a,b,c);var f=b._basePlotModules;for(d=0;d<f.length;d++)e=f[d],"cartesian"!==e.name&&e.supplyLayoutDefaults&&e.supplyLayoutDefaults(a,b,c);var g=b._modules;for(d=0;d<g.length;d++)e=g[d],e.supplyLayoutDefaults&&e.supplyLayoutDefaults(a,b,c);k.Fx.supplyLayoutDefaults(a,b,c);var h=Object.keys(l.componentsRegistry);for(d=0;d<h.length;d++)e=l.componentsRegistry[h[d]],e.supplyLayoutDefaults&&e.supplyLayoutDefaults(a,b,c)},o.purge=function(a){var b=a._fullLayout||{};void 0!==b._glcontainer&&b._glcontainer.remove(),void 0!==b._geocontainer&&b._geocontainer.remove(),b._modeBar&&b._modeBar.destroy(),a._transitionData&&a._transitionData._animationRaf&&window.cancelAnimationFrame(a._transitionData._animationRaf),delete a.data,delete a.layout,delete a._fullData,delete a._fullLayout,delete a.calcdata,delete a.framework,delete a.empty,delete a.fid,delete a.undoqueue,delete a.undonum,delete a.autoplay,delete a.changed,delete a._tester,delete a._testref,delete a._promises,delete a._redrawTimer,delete a._replotting,delete a.firstscatter,delete a.hmlumcount,delete a.hmpixcount,delete a.numboxes,delete a._hoverTimer,delete a._lastHoverTime,delete a._transitionData,delete a._transitioning,delete a._initialAutoSize,a.removeAllListeners&&a.removeAllListeners()},o.style=function(a){for(var b=a._fullLayout._modules,c=0;c<b.length;c++){var d=b[c];d.style&&d.style(a)}},o.sanitizeMargins=function(a){if(a&&a.margin){var b,c=a.width,d=a.height,e=a.margin,f=c-(e.l+e.r),g=d-(e.t+e.b);f<0&&(b=(c-1)/(e.l+e.r),e.l=Math.floor(b*e.l),e.r=Math.floor(b*e.r)),g<0&&(b=(d-1)/(e.t+e.b),e.t=Math.floor(b*e.t),e.b=Math.floor(b*e.b))}},o.autoMargin=function(a,b,c){var d=a._fullLayout;if(d._pushmargin||(d._pushmargin={}),d.margin.autoexpand!==!1){if(c){var e=void 0===c.pad?12:c.pad;c.l+c.r>.5*d.width&&(c.l=c.r=0),c.b+c.t>.5*d.height&&(c.b=c.t=0),d._pushmargin[b]={l:{val:c.x,size:c.l+e},r:{val:c.x,size:c.r+e},b:{val:c.y,size:c.b+e},t:{val:c.y,size:c.t+e}}}else delete d._pushmargin[b];a._replotting||o.doAutoMargin(a)}},o.doAutoMargin=function(a){var b=a._fullLayout;b._size||(b._size={}),b._pushmargin||(b._pushmargin={});var c=b._size,d=JSON.stringify(c),e=Math.max(b.margin.l||0,0),f=Math.max(b.margin.r||0,0),g=Math.max(b.margin.t||0,0),h=Math.max(b.margin.b||0,0),i=b._pushmargin;if(b.margin.autoexpand!==!1&&(i.base={l:{val:0,size:e},r:{val:1,size:f},t:{val:1,size:g},b:{val:0,size:h}},Object.keys(i).forEach(function(a){var c=i[a].l||{},d=i[a].b||{},k=c.val,l=c.size,m=d.val,n=d.size;Object.keys(i).forEach(function(a){if(j(l)&&i[a].r){var c=i[a].r.val,d=i[a].r.size;if(c>k){var o=(l*c+(d-b.width)*k)/(c-k),p=(d*(1-k)+(l-b.width)*(1-c))/(c-k);o>=0&&p>=0&&o+p>e+f&&(e=o,f=p)}}if(j(n)&&i[a].t){var q=i[a].t.val,r=i[a].t.size;if(q>m){var s=(n*q+(r-b.height)*m)/(q-m),t=(r*(1-m)+(n-b.height)*(1-q))/(q-m);s>=0&&t>=0&&s+t>h+g&&(h=s,g=t)}}})})),c.l=Math.round(e),c.r=Math.round(f),c.t=Math.round(g),c.b=Math.round(h),c.p=Math.round(b.margin.pad),c.w=Math.round(b.width)-c.l-c.r,c.h=Math.round(b.height)-c.t-c.b,!a._replotting&&"{}"!==d&&d!==JSON.stringify(b._size))return k.plot(a)},o.graphJson=function(a,b,c,d,e){function f(a){if("function"==typeof a)return null;if(m.isPlainObject(a)){var b,d,e={};for(b in a)if("function"!=typeof a[b]&&["_","["].indexOf(b.charAt(0))===-1){if("keepdata"===c){if("src"===b.substr(b.length-3))continue}else if("keepstream"===c){if(d=a[b+"src"],"string"==typeof d&&d.indexOf(":")>0&&!m.isPlainObject(a.stream))continue}else if("keepall"!==c&&(d=a[b+"src"],"string"==typeof d&&d.indexOf(":")>0))continue;e[b]=f(a[b])}return e}return Array.isArray(a)?a.map(f):a&&a.getTime?m.ms2DateTime(a):a}(e&&b&&!a._fullData||e&&!b&&!a._fullLayout)&&o.supplyDefaults(a);var g=e?a._fullData:a.data,h=e?a._fullLayout:a.layout,i={data:(g||[]).map(function(a){var c=f(a);return b&&delete c.fit,c})};return b||(i.layout=f(h)),a.framework&&a.framework.isPolar&&(i=a.framework.getConfig()),"object"===d?i:JSON.stringify(i)},o.modifyFrames=function(a,b){var c,d,e,f=a._transitionData._frames,g=a._transitionData._frameHash;for(c=0;c<b.length;c++)switch(d=b[c],d.type){case"replace":e=d.value;var h=f[d.index].name,i=e.name;f[d.index]=g[i]=e,i!==h&&(delete g[h],g[i]=e);break;case"insert":e=d.value,g[e.name]=e,f.splice(d.index,0,e);break;case"delete":e=f[d.index],delete g[e.name],f.splice(d.index,1)}return Promise.resolve()},o.computeFrame=function(a,b){var c,d,e,f,g=a._transitionData._frameHash,h=g[b];if(!h)return!1;for(var i=[h],j=[h.name];(h=g[h.baseframe])&&j.indexOf(h.name)===-1;)i.push(h),j.push(h.name);for(var k={};h=i.pop();)if(h.layout&&(k.layout=o.extendLayout(k.layout,h.layout)),h.data){if(k.data||(k.data=[]),d=h.traces,!d)for(d=[],c=0;c<h.data.length;c++)d[c]=c;for(k.traces||(k.traces=[]),c=0;c<h.data.length;c++)e=d[c],void 0!==e&&null!==e&&(f=k.traces.indexOf(e),f===-1&&(f=k.data.length,k.traces[f]=e),k.data[f]=o.extendTrace(k.data[f],h.data[c]))}return k},o.extendObjectWithContainers=function(a,b,c){var d,e,f,g,h,i,j,k,l=m.extendDeepNoArrays({},b||{}),n=m.expandObjectPaths(l),p={};if(c&&c.length)for(f=0;f<c.length;f++)d=m.nestedProperty(n,c[f]),e=d.get(),d.set(null),m.nestedProperty(p,c[f]).set(e);if(a=m.extendDeepNoArrays(a||{},n),c&&c.length)for(f=0;f<c.length;f++)if(h=m.nestedProperty(p,c[f]),j=h.get()){for(i=m.nestedProperty(a,c[f]),k=i.get(),Array.isArray(k)||(k=[],i.set(k)),g=0;g<j.length;g++)k[g]=o.extendObjectWithContainers(k[g],j[g]);i.set(k)}return a},o.dataArrayContainers=["transforms"],o.layoutArrayContainers=["annotations","shapes","images","sliders","updatemenus"],o.extendTrace=function(a,b){return o.extendObjectWithContainers(a,b,o.dataArrayContainers)},o.extendLayout=function(a,b){return o.extendObjectWithContainers(a,b,o.layoutArrayContainers)},o.transition=function(a,b,c,d,e,f){function g(){var d;for(d=0;d<s.length;d++){var e=s[d],f=a._fullData[e],g=f._module;g&&g.animatable&&(u.push(e),a.data[s[d]]=o.extendTrace(a.data[s[d]],b[d]))}var h=m.expandObjectPaths(m.extendDeepNoArrays({},c)),i=/^[xy]axis[0-9]*$/;for(var j in h)i.test(j)&&delete h[j].range;return o.extendLayout(a.layout,h),o.supplyDefaults(a),o.doCalcdata(a),t.calc(a),Promise.resolve()}function h(a){var b=Promise.resolve();if(!a)return b;for(;a.length;)b=b.then(a.shift());return b}function i(a){if(a)for(;a.length;)a.shift()}function j(){return new Promise(function(b){function d(){return i++,function(){j++,v||j!==i||l(b)}}a._transitioning=!0,f.duration>0&&(a._transitioningWithDuration=!0),a._transitionData._interruptCallbacks.push(function(){v=!0}),e.redraw&&a._transitionData._interruptCallbacks.push(function(){return k.redraw(a)}),a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var g,h,i=0,j=0,n=a._fullLayout._basePlotModules,o=!1;if(c)for(h=0;h<n.length;h++)if(n[h].transitionAxes){var p=m.expandObjectPaths(c);o=n[h].transitionAxes(a,p,f,d)||o}for(o?(g=m.extendFlat({},f),g.duration=0):g=f,h=0;h<n.length;h++)n[h].plot(a,u,g,d);setTimeout(d())})}function l(b){return i(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(e.redraw)return k.redraw(a)}).then(function(){a._transitioning=!1,a._transitioningWithDuration=!1,a.emit("plotly_transitioned",[])}).then(b)}function n(){return a._transitioning=!1,h(a._transitionData._interruptCallbacks)}var p,q,r=Array.isArray(b)?b.length:0,s=d.slice(0,r),u=[],v=!1;for(p=0;p<s.length;p++){q=s[p];var w=a._fullData[q],x=w._module;if(x&&!x.animatable){var y={};for(var z in b[p])y[z]=[b[p][z]]}}var A=[o.previousPromises,n,g,j],B=m.syncOrAsync(A,a);return B&&B.then||(B=Promise.resolve()),B.then(function(){return a.emit("plotly_transitioning",[]),a})},o.doCalcdata=function(a,b){var c,d,e=k.Axes.list(a),f=a._fullData,g=a._fullLayout,h=new Array(f.length),i=(a.calcdata||[]).slice(0);for(a.calcdata=h,a.firstscatter=!0,a.numboxes=0,a._hmpixcount=0,a._hmlumcount=0,g._piecolormap={},g._piedefaultcolorcount=0,c=0;c<e.length;c++)e[c]._categories=e[c]._initialCategories.slice();for(c=0;c<f.length;c++)if(Array.isArray(b)&&b.indexOf(c)===-1)h[c]=i[c];else{var j=f[c],l=[];if(Array.isArray(b)&&b.indexOf(c)===-1)h[c]=i[c];else{var m;if(j.visible===!0){if(j.transforms)for(m=j._module,m&&m.calc&&m.calc(a,j),d=0;d<j.transforms.length;d++){var n=j.transforms[d];m=s[n.type],m&&m.calcTransform&&m.calcTransform(a,j,n)}m=j._module,m&&m.calc&&(l=m.calc(a,j))}Array.isArray(l)&&l[0]||(l=[{x:!1,y:!1,placeholder:!0}]),l[0].t||(l[0].t={}),l[0].trace=j,h[c]=l}}}},{"../components/color":533,"../components/errorbars":563,"../lib":632,"../plotly":658,"../registry":738,"./animation_attributes":659,"./attributes":660,"./command":682,"./font_attributes":683,"./frame_attributes":684,"./layout_attributes":714,d3:95,"fast-isnumeric":104}],724:[function(a,b,c){"use strict";var d=a("../../traces/scatter/attributes"),e=d.marker;b.exports={r:d.r,t:d.t,marker:{color:e.color,size:e.size,symbol:e.symbol,opacity:e.opacity}}},{"../../traces/scatter/attributes":844}],725:[function(a,b,c){"use strict";function d(a,b){var c={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return f({},b,c)}var e=a("../cartesian/layout_attributes"),f=a("../../lib/extend").extendFlat,g=f({},e.domain,{});b.exports={radialaxis:d("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:g,orientation:{valType:"number"}}),angularaxis:d("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:g}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}}},{"../../lib/extend":625,"../cartesian/layout_attributes":672}],726:[function(a,b,c){"use strict";var d=b.exports=a("./micropolar");d.manager=a("./micropolar_manager")},{"./micropolar":727,"./micropolar_manager":728}],727:[function(a,b,c){var d=a("d3"),e=a("../../lib"),f=e.extendDeepAll,g=b.exports={version:"0.2.2"};g.Axis=function(){function a(a){c=a||c;var j=i.data,l=i.layout;return("string"==typeof c||c.nodeName)&&(c=d.select(c)),c.datum(j).each(function(a,c){function i(a,b){return h(a)%360+l.orientation}var j=a.slice();k={data:g.util.cloneJson(j),layout:g.util.cloneJson(l)};var m=0;j.forEach(function(a,b){a.color||(a.color=l.defaultColorRange[m],m=(m+1)%l.defaultColorRange.length),a.strokeColor||(a.strokeColor="LinePlot"===a.geometry?a.color:d.rgb(a.color).darker().toString()),k.data[b].color=a.color,k.data[b].strokeColor=a.strokeColor,k.data[b].strokeDash=a.strokeDash,k.data[b].strokeSize=a.strokeSize});var n=j.filter(function(a,b){var c=a.visible;return"undefined"==typeof c||c===!0}),o=!1,p=n.map(function(a,b){return o=o||"undefined"!=typeof a.groupId,a});if(o){var q=d.nest().key(function(a,b){return"undefined"!=typeof a.groupId?a.groupId:"unstacked"}).entries(p),r=[],s=q.map(function(a,b){
if("unstacked"===a.key)return a.values;var c=a.values[0].r.map(function(a,b){return 0});return a.values.forEach(function(a,b,d){a.yStack=[c],r.push(c),c=g.util.sumArrays(a.r,c)}),a.values});n=d.merge(s)}n.forEach(function(a,b){a.t=Array.isArray(a.t[0])?a.t:[a.t],a.r=Array.isArray(a.r[0])?a.r:[a.r]});var t=Math.min(l.width-l.margin.left-l.margin.right,l.height-l.margin.top-l.margin.bottom)/2;t=Math.max(10,t);var u,v=[l.margin.left+t,l.margin.top+t];if(o){var w=d.max(g.util.sumArrays(g.util.arrayLast(n).r[0],g.util.arrayLast(r)));u=[0,w]}else u=d.extent(g.util.flattenArray(n.map(function(a,b){return a.r})));l.radialAxis.domain!=g.DATAEXTENT&&(u[0]=0),e=d.scale.linear().domain(l.radialAxis.domain!=g.DATAEXTENT&&l.radialAxis.domain?l.radialAxis.domain:u).range([0,t]),k.layout.radialAxis.domain=e.domain();var x,y=g.util.flattenArray(n.map(function(a,b){return a.t})),z="string"==typeof y[0];z&&(y=g.util.deduplicate(y),x=y.slice(),y=d.range(y.length),n=n.map(function(a,b){var c=a;return a.t=[y],o&&(c.yStack=a.yStack),c}));var A=n.filter(function(a,b){return"LinePlot"===a.geometry||"DotPlot"===a.geometry}).length===n.length,B=null===l.needsEndSpacing?z||!A:l.needsEndSpacing,C=l.angularAxis.domain&&l.angularAxis.domain!=g.DATAEXTENT&&!z&&l.angularAxis.domain[0]>=0,D=C?l.angularAxis.domain:d.extent(y),E=Math.abs(y[1]-y[0]);A&&!z&&(E=0);var F=D.slice();B&&z&&(F[1]+=E);var G=l.angularAxis.ticksCount||4;G>8&&(G=G/(G/8)+G%8),l.angularAxis.ticksStep&&(G=(F[1]-F[0])/G);var H=l.angularAxis.ticksStep||(F[1]-F[0])/(G*(l.minorTicks+1));x&&(H=Math.max(Math.round(H),1)),F[2]||(F[2]=H);var I=d.range.apply(this,F);if(I=I.map(function(a,b){return parseFloat(a.toPrecision(12))}),h=d.scale.linear().domain(F.slice(0,2)).range("clockwise"===l.direction?[0,360]:[360,0]),k.layout.angularAxis.domain=h.domain(),k.layout.angularAxis.endPadding=B?E:0,b=d.select(this).select("svg.chart-root"),"undefined"==typeof b||b.empty()){var J="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",K=(new DOMParser).parseFromString(J,"application/xml"),L=this.appendChild(this.ownerDocument.importNode(K.documentElement,!0));b=d.select(L)}b.select(".guides-group").style({"pointer-events":"none"}),b.select(".angular.axis-group").style({"pointer-events":"none"}),b.select(".radial.axis-group").style({"pointer-events":"none"});var M,N=b.select(".chart-group"),O={fill:"none",stroke:l.tickColor},P={"font-size":l.font.size,"font-family":l.font.family,fill:l.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(a,b){return" "+a+" 0 "+l.font.outlineColor}).join(",")};if(l.showLegend){M=b.select(".legend-group").attr({transform:"translate("+[t,l.margin.top]+")"}).style({display:"block"});var Q=n.map(function(a,b){var c=g.util.cloneJson(a);return c.symbol="DotPlot"===a.geometry?a.dotType||"circle":"LinePlot"!=a.geometry?"square":"line",c.visibleInLegend="undefined"==typeof a.visibleInLegend||a.visibleInLegend,c.color="LinePlot"===a.geometry?a.strokeColor:a.color,c});g.Legend().config({data:n.map(function(a,b){return a.name||"Element"+b}),legendConfig:f({},g.Legend.defaultConfig().legendConfig,{container:M,elements:Q,reverseOrder:l.legend.reverseOrder})})();var R=M.node().getBBox();t=Math.min(l.width-R.width-l.margin.left-l.margin.right,l.height-l.margin.top-l.margin.bottom)/2,t=Math.max(10,t),v=[l.margin.left+t,l.margin.top+t],e.range([0,t]),k.layout.radialAxis.domain=e.domain(),M.attr("transform","translate("+[v[0]+t,v[1]-t]+")")}else M=b.select(".legend-group").style({display:"none"});b.attr({width:l.width,height:l.height}).style({opacity:l.opacity}),N.attr("transform","translate("+v+")").style({cursor:"crosshair"});var S=[(l.width-(l.margin.left+l.margin.right+2*t+(R?R.width:0)))/2,(l.height-(l.margin.top+l.margin.bottom+2*t))/2];if(S[0]=Math.max(0,S[0]),S[1]=Math.max(0,S[1]),b.select(".outer-group").attr("transform","translate("+S+")"),l.title){var T=b.select("g.title-group text").style(P).text(l.title),U=T.node().getBBox();T.attr({x:v[0]-U.width/2,y:v[1]-t-20})}var V=b.select(".radial.axis-group");if(l.radialAxis.gridLinesVisible){var W=V.selectAll("circle.grid-circle").data(e.ticks(5));W.enter().append("circle").attr({"class":"grid-circle"}).style(O),W.attr("r",e),W.exit().remove()}V.select("circle.outside-circle").attr({r:t}).style(O);var X=b.select("circle.background-circle").attr({r:t}).style({fill:l.backgroundColor,stroke:l.stroke});if(l.radialAxis.visible){var Y=d.svg.axis().scale(e).ticks(5).tickSize(5);V.call(Y).attr({transform:"rotate("+l.radialAxis.orientation+")"}),V.selectAll(".domain").style(O),V.selectAll("g>text").text(function(a,b){return this.textContent+l.radialAxis.ticksSuffix}).style(P).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(a,b){return"horizontal"===l.radialAxis.tickOrientation?"rotate("+-l.radialAxis.orientation+") translate("+[0,P["font-size"]]+")":"translate("+[0,P["font-size"]]+")"}}),V.selectAll("g>line").style({stroke:"black"})}var Z=b.select(".angular.axis-group").selectAll("g.angular-tick").data(I),$=Z.enter().append("g").classed("angular-tick",!0);Z.attr({transform:function(a,b){return"rotate("+i(a,b)+")"}}).style({display:l.angularAxis.visible?"block":"none"}),Z.exit().remove(),$.append("line").classed("grid-line",!0).classed("major",function(a,b){return b%(l.minorTicks+1)==0}).classed("minor",function(a,b){return!(b%(l.minorTicks+1)==0)}).style(O),$.selectAll(".minor").style({stroke:l.minorTickColor}),Z.select("line.grid-line").attr({x1:l.tickLength?t-l.tickLength:0,x2:t}).style({display:l.angularAxis.gridLinesVisible?"block":"none"}),$.append("text").classed("axis-text",!0).style(P);var _=Z.select("text.axis-text").attr({x:t+l.labelOffset,dy:".35em",transform:function(a,b){var c=i(a,b),d=t+l.labelOffset,e=l.angularAxis.tickOrientation;return"horizontal"==e?"rotate("+-c+" "+d+" 0)":"radial"==e?c<270&&c>90?"rotate(180 "+d+" 0)":null:"rotate("+(c<=180&&c>0?-90:90)+" "+d+" 0)"}}).style({"text-anchor":"middle",display:l.angularAxis.labelsVisible?"block":"none"}).text(function(a,b){return b%(l.minorTicks+1)!=0?"":x?x[a]+l.angularAxis.ticksSuffix:a+l.angularAxis.ticksSuffix}).style(P);l.angularAxis.rewriteTicks&&_.text(function(a,b){return b%(l.minorTicks+1)!=0?"":l.angularAxis.rewriteTicks(this.textContent,b)});var aa=d.max(N.selectAll(".angular-tick text")[0].map(function(a,b){return a.getCTM().e+a.getBBox().width}));M.attr({transform:"translate("+[t+aa,l.margin.top]+")"});var ba=b.select("g.geometry-group").selectAll("g").size()>0,ca=b.select("g.geometry-group").selectAll("g.geometry").data(n);if(ca.enter().append("g").attr({"class":function(a,b){return"geometry geometry"+b}}),ca.exit().remove(),n[0]||ba){var da=[];n.forEach(function(a,b){var c={};c.radialScale=e,c.angularScale=h,c.container=ca.filter(function(a,c){return c==b}),c.geometry=a.geometry,c.orientation=l.orientation,c.direction=l.direction,c.index=b,da.push({data:a,geometryConfig:c})});var ea=d.nest().key(function(a,b){return"undefined"!=typeof a.data.groupId||"unstacked"}).entries(da),fa=[];ea.forEach(function(a,b){"unstacked"===a.key?fa=fa.concat(a.values.map(function(a,b){return[a]})):fa.push(a.values)}),fa.forEach(function(a,b){var c;c=Array.isArray(a)?a[0].geometryConfig.geometry:a.geometryConfig.geometry;var d=a.map(function(a,b){return f(g[c].defaultConfig(),a)});g[c]().config(d)()})}var ga,ha,ia=b.select(".guides-group"),ja=b.select(".tooltips-group"),ka=g.tooltipPanel().config({container:ja,fontSize:8})(),la=g.tooltipPanel().config({container:ja,fontSize:8})(),ma=g.tooltipPanel().config({container:ja,hasTick:!0})();if(!z){var na=ia.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});N.on("mousemove.angular-guide",function(a,b){var c=g.util.getMousePos(X).angle;na.attr({x2:-t,transform:"rotate("+c+")"}).style({opacity:.5});var d=(c+180+360-l.orientation)%360;ga=h.invert(d);var e=g.util.convertToCartesian(t+12,c+180);ka.text(g.util.round(ga)).move([e[0]+v[0],e[1]+v[1]])}).on("mouseout.angular-guide",function(a,b){ia.select("line").style({opacity:0})})}var oa=ia.select("circle").style({stroke:"grey",fill:"none"});N.on("mousemove.radial-guide",function(a,b){var c=g.util.getMousePos(X).radius;oa.attr({r:c}).style({opacity:.5}),ha=e.invert(g.util.getMousePos(X).radius);var d=g.util.convertToCartesian(c,l.radialAxis.orientation);la.text(g.util.round(ha)).move([d[0]+v[0],d[1]+v[1]])}).on("mouseout.radial-guide",function(a,b){oa.style({opacity:0}),ma.hide(),ka.hide(),la.hide()}),b.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(a,c){var e=d.select(this),f=e.style("fill"),h="black",i=e.style("opacity")||1;if(e.attr({"data-opacity":i}),"none"!=f){e.attr({"data-fill":f}),h=d.hsl(f).darker().toString(),e.style({fill:h,opacity:1});var j={t:g.util.round(a[0]),r:g.util.round(a[1])};z&&(j.t=x[a[0]]);var k="t: "+j.t+", r: "+j.r,l=this.getBoundingClientRect(),m=b.node().getBoundingClientRect(),n=[l.left+l.width/2-S[0]-m.left,l.top+l.height/2-S[1]-m.top];ma.config({color:h}).text(k),ma.move(n)}else f=e.style("stroke"),e.attr({"data-stroke":f}),h=d.hsl(f).darker().toString(),e.style({stroke:h,opacity:1})}).on("mousemove.tooltip",function(a,b){return 0==d.event.which&&void(d.select(this).attr("data-fill")&&ma.show())}).on("mouseout.tooltip",function(a,b){ma.hide();var c=d.select(this),e=c.attr("data-fill");e?c.style({fill:e,opacity:c.attr("data-opacity")}):c.style({stroke:c.attr("data-stroke"),opacity:c.attr("data-opacity")})})}),m}var b,c,e,h,i={data:[],layout:{}},j={},k={},l=d.dispatch("hover"),m={};return m.render=function(b){return a(b),this},m.config=function(a){if(!arguments.length)return i;var b=g.util.cloneJson(a);return b.data.forEach(function(a,b){i.data[b]||(i.data[b]={}),f(i.data[b],g.Axis.defaultConfig().data[0]),f(i.data[b],a)}),f(i.layout,g.Axis.defaultConfig().layout),f(i.layout,b.layout),this},m.getLiveConfig=function(){return k},m.getinputConfig=function(){return j},m.radialScale=function(a){return e},m.angularScale=function(a){return h},m.svg=function(){return b},d.rebind(m,l,"on"),m},g.Axis.defaultConfig=function(a,b){var c={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:d.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return c},g.util={},g.DATAEXTENT="dataExtent",g.AREA="AreaChart",g.LINE="LinePlot",g.DOT="DotPlot",g.BAR="BarChart",g.util._override=function(a,b){for(var c in a)c in b&&(b[c]=a[c])},g.util._extend=function(a,b){for(var c in a)b[c]=a[c]},g.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},g.util.dataFromEquation2=function(a,b){var c=b||6,e=d.range(0,360+c,c).map(function(b,c){var d=b*Math.PI/180,e=a(d);return[b,e]});return e},g.util.dataFromEquation=function(a,b,c){var e=b||6,f=[],g=[];d.range(0,360+e,e).forEach(function(b,c){var d=b*Math.PI/180,e=a(d);f.push(b),g.push(e)});var h={t:f,r:g};return c&&(h.name=c),h},g.util.ensureArray=function(a,b){if("undefined"==typeof a)return null;var c=[].concat(a);return d.range(b).map(function(a,b){return c[b]||c[0]})},g.util.fillArrays=function(a,b,c){return b.forEach(function(b,d){a[b]=g.util.ensureArray(a[b],c)}),a},g.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))},g.util.validateKeys=function(a,b){"string"==typeof b&&(b=b.split("."));var c=b.shift();return a[c]&&(!b.length||objHasKeys(a[c],b))},g.util.sumArrays=function(a,b){return d.zip(a,b).map(function(a,b){return d.sum(a)})},g.util.arrayLast=function(a){return a[a.length-1]},g.util.arrayEqual=function(a,b){for(var c=Math.max(a.length,b.length,1);c-- >=0&&a[c]===b[c];);return c===-2},g.util.flattenArray=function(a){for(var b=[];!g.util.arrayEqual(b,a);)b=a,a=[].concat.apply([],a);return a},g.util.deduplicate=function(a){return a.filter(function(a,b,c){return c.indexOf(a)==b})},g.util.convertToCartesian=function(a,b){var c=b*Math.PI/180,d=a*Math.cos(c),e=a*Math.sin(c);return[d,e]},g.util.round=function(a,b){var c=b||2,d=Math.pow(10,c);return Math.round(a*d)/d},g.util.getMousePos=function(a){var b=d.mouse(a.node()),c=b[0],e=b[1],f={};return f.x=c,f.y=e,f.pos=b,f.angle=180*(Math.atan2(e,c)+Math.PI)/Math.PI,f.radius=Math.sqrt(c*c+e*e),f},g.util.duplicatesCount=function(a){for(var b,c={},d={},e=0,f=a.length;e<f;e++)b=a[e],b in c?(c[b]++,d[b]=c[b]):c[b]=1;return d},g.util.duplicates=function(a){return Object.keys(g.util.duplicatesCount(a))},g.util.translator=function(a,b,c,d){if(d){var e=c.slice();c=b,b=e}var f=b.reduce(function(a,b){if("undefined"!=typeof a)return a[b]},a);"undefined"!=typeof f&&(b.reduce(function(a,c,d){if("undefined"!=typeof a)return d===b.length-1&&delete a[c],a[c]},a),c.reduce(function(a,b,d){return"undefined"==typeof a[b]&&(a[b]={}),d===c.length-1&&(a[b]=f),a[b]},a))},g.PolyChart=function(){function a(){var a=c[0].geometryConfig,b=a.container;"string"==typeof b&&(b=d.select(b)),b.datum(c).each(function(b,c){function e(b,c){var d=a.radialScale(b[1]),e=(a.angularScale(b[0])+a.orientation)*Math.PI/180;return{r:d,t:e}}function f(a){var b=a.r*Math.cos(a.t),c=a.r*Math.sin(a.t);return{x:b,y:c}}var g=!!b[0].data.yStack,i=b.map(function(a,b){return g?d.zip(a.data.t[0],a.data.r[0],a.data.yStack[0]):d.zip(a.data.t[0],a.data.r[0])}),j=a.angularScale,k=a.radialScale.domain()[0],l={};l.bar=function(c,e,f){var g=b[f].data,h=a.radialScale(c[1])-a.radialScale(0),i=a.radialScale(c[2]||0),k=g.barWidth;d.select(this).attr({"class":"mark bar",d:"M"+[[h+i,-k/2],[h+i,k/2],[i,k/2],[i,-k/2]].join("L")+"Z",transform:function(b,c){return"rotate("+(a.orientation+j(b[0]))+")"}})},l.dot=function(a,c,g){var h=a[2]?[a[0],a[1]+a[2]]:a,i=d.svg.symbol().size(b[g].data.dotSize).type(b[g].data.dotType)(a,c);d.select(this).attr({"class":"mark dot",d:i,transform:function(a,b){var c=f(e(h));return"translate("+[c.x,c.y]+")"}})};var m=d.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return a.radialScale(b[1])}).angle(function(b){return a.angularScale(b[0])*Math.PI/180});l.line=function(c,e,f){var g=c[2]?i[f].map(function(a,b){return[a[0],a[1]+a[2]]}):i[f];if(d.select(this).each(l.dot).style({opacity:function(a,c){return+b[f].data.dotVisible},fill:q.stroke(c,e,f)}).attr({"class":"mark dot"}),!(e>0)){var h=d.select(this.parentNode).selectAll("path.line").data([0]);h.enter().insert("path"),h.attr({"class":"line",d:m(g),transform:function(b,c){return"rotate("+(a.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(a,b){return q.fill(c,e,f)},"fill-opacity":0,stroke:function(a,b){return q.stroke(c,e,f)},"stroke-width":function(a,b){return q["stroke-width"](c,e,f)},"stroke-dasharray":function(a,b){return q["stroke-dasharray"](c,e,f)},opacity:function(a,b){return q.opacity(c,e,f)},display:function(a,b){return q.display(c,e,f)}})}};var n=a.angularScale.range(),o=Math.abs(n[1]-n[0])/i[0].length*Math.PI/180,p=d.svg.arc().startAngle(function(a){return-o/2}).endAngle(function(a){return o/2}).innerRadius(function(b){return a.radialScale(k+(b[2]||0))}).outerRadius(function(b){return a.radialScale(k+(b[2]||0))+a.radialScale(b[1])});l.arc=function(b,c,e){d.select(this).attr({"class":"mark arc",d:p,transform:function(b,c){return"rotate("+(a.orientation+j(b[0])+90)+")"}})};var q={fill:function(a,c,d){return b[d].data.color},stroke:function(a,c,d){return b[d].data.strokeColor},"stroke-width":function(a,c,d){return b[d].data.strokeSize+"px"},"stroke-dasharray":function(a,c,d){return h[b[d].data.strokeDash]},opacity:function(a,c,d){return b[d].data.opacity},display:function(a,c,d){return"undefined"==typeof b[d].data.visible||b[d].data.visible?"block":"none"}},r=d.select(this).selectAll("g.layer").data(i);r.enter().append("g").attr({"class":"layer"});var s=r.selectAll("path.mark").data(function(a,b){return a});s.enter().append("path").attr({"class":"mark"}),s.style(q).each(l[a.geometryType]),s.exit().remove(),r.exit().remove()})}var b,c=[g.PolyChart.defaultConfig()],e=d.dispatch("hover"),h={solid:"none",dash:[5,2],dot:[2,5]};return a.config=function(a){return arguments.length?(a.forEach(function(a,b){c[b]||(c[b]={}),f(c[b],g.PolyChart.defaultConfig()),f(c[b],a)}),this):c},a.getColorScale=function(){return b},d.rebind(a,e,"on"),a},g.PolyChart.defaultConfig=function(){var a={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:d.scale.category20()}};return a},g.BarChart=function(){return g.PolyChart()},g.BarChart.defaultConfig=function(){var a={geometryConfig:{geometryType:"bar"}};return a},g.AreaChart=function(){return g.PolyChart()},g.AreaChart.defaultConfig=function(){var a={geometryConfig:{geometryType:"arc"}};return a},g.DotPlot=function(){return g.PolyChart()},g.DotPlot.defaultConfig=function(){var a={geometryConfig:{geometryType:"dot",dotType:"circle"}};return a},g.LinePlot=function(){return g.PolyChart()},g.LinePlot.defaultConfig=function(){var a={geometryConfig:{geometryType:"line"}};return a},g.Legend=function(){function a(){var c=b.legendConfig,e=b.data.map(function(a,b){return[].concat(a).map(function(a,d){var e=f({},c.elements[b]);return e.name=a,e.color=[].concat(c.elements[b].color)[d],e})}),g=d.merge(e);g=g.filter(function(a,b){return c.elements[b]&&(c.elements[b].visibleInLegend||"undefined"==typeof c.elements[b].visibleInLegend)}),c.reverseOrder&&(g=g.reverse());var h=c.container;("string"==typeof h||h.nodeName)&&(h=d.select(h));var i=g.map(function(a,b){return a.color}),j=c.fontSize,k=null==c.isContinuous?"number"==typeof g[0]:c.isContinuous,l=k?c.height:j*g.length,m=h.classed("legend-group",!0),n=m.selectAll("svg").data([0]),o=n.enter().append("svg").attr({width:300,height:l+j,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});o.append("g").classed("legend-axis",!0),o.append("g").classed("legend-marks",!0);var p=d.range(g.length),q=d.scale[k?"linear":"ordinal"]().domain(p).range(i),r=d.scale[k?"linear":"ordinal"]().domain(p)[k?"range":"rangePoints"]([0,l]),s=function(a,b){var c=3*b;return"line"===a?"M"+[[-b/2,-b/12],[b/2,-b/12],[b/2,b/12],[-b/2,b/12]]+"Z":d.svg.symbolTypes.indexOf(a)!=-1?d.svg.symbol().type(a).size(c)():d.svg.symbol().type("square").size(c)()};if(k){var t=n.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(i);t.enter().append("stop"),t.attr({offset:function(a,b){return b/(i.length-1)*100+"%"}}).style({"stop-color":function(a,b){return a}}),n.append("rect").classed("legend-mark",!0).attr({height:c.height,width:c.colorBandWidth,fill:"url(#grad1)"})}else{var u=n.select(".legend-marks").selectAll("path.legend-mark").data(g);u.enter().append("path").classed("legend-mark",!0),u.attr({transform:function(a,b){return"translate("+[j/2,r(b)+j/2]+")"},d:function(a,b){var c=a.symbol;return s(c,j)},fill:function(a,b){return q(b)}}),u.exit().remove()}var v=d.svg.axis().scale(r).orient("right"),w=n.select("g.legend-axis").attr({transform:"translate("+[k?c.colorBandWidth:j,j/2]+")"}).call(v);return w.selectAll(".domain").style({fill:"none",stroke:"none"}),w.selectAll("line").style({fill:"none",stroke:k?c.textColor:"none"}),w.selectAll("text").style({fill:c.textColor,"font-size":c.fontSize}).text(function(a,b){return g[b].name}),a}var b=g.Legend.defaultConfig(),c=d.dispatch("hover");return a.config=function(a){return arguments.length?(f(b,a),this):b},d.rebind(a,c,"on"),a},g.Legend.defaultConfig=function(a,b){var c={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return c},g.tooltipPanel=function(){var a,b,c,e={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},h="tooltip-"+g.tooltipPanel.uid++,i=10,j=function(){a=e.container.selectAll("g."+h).data([0]);var d=a.enter().append("g").classed(h,!0).style({"pointer-events":"none",display:"none"});return c=d.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),b=d.append("text").attr({dx:e.padding+i,dy:.3*+e.fontSize}),j};return j.text=function(f){var g=d.hsl(e.color).l,h=g>=.5?"#aaa":"white",k=g>=.5?"black":"white",l=f||"";b.style({fill:k,"font-size":e.fontSize+"px"}).text(l);var m=e.padding,n=b.node().getBBox(),o={fill:e.color,stroke:h,"stroke-width":"2px"},p=n.width+2*m+i,q=n.height+2*m;return c.attr({d:"M"+[[i,-q/2],[i,-q/4],[e.hasTick?0:i,0],[i,q/4],[i,q/2],[p,q/2],[p,-q/2]].join("L")+"Z"}).style(o),a.attr({transform:"translate("+[i,-q/2+2*m]+")"}),a.style({display:"block"}),j},j.move=function(b){if(a)return a.attr({transform:"translate("+[b[0],b[1]]+")"}).style({display:"block"}),j},j.hide=function(){if(a)return a.style({display:"none"}),j},j.show=function(){if(a)return a.style({display:"block"}),j},j.config=function(a){return f(e,a),j},j},g.tooltipPanel.uid=1,g.adapter={},g.adapter.plotly=function(){var a={};return a.convert=function(a,b){var c={};if(a.data&&(c.data=a.data.map(function(a,c){var d=f({},a),e=[[d,["marker","color"],["color"]],[d,["marker","opacity"],["opacity"]],[d,["marker","line","color"],["strokeColor"]],[d,["marker","line","dash"],["strokeDash"]],[d,["marker","line","width"],["strokeSize"]],[d,["marker","symbol"],["dotType"]],[d,["marker","size"],["dotSize"]],[d,["marker","barWidth"],["barWidth"]],[d,["line","interpolation"],["lineInterpolation"]],[d,["showlegend"],["visibleInLegend"]]];return e.forEach(function(a,c){g.util.translator.apply(null,a.concat(b))}),b||delete d.marker,b&&delete d.groupId,b?("LinePlot"===d.geometry?(d.type="scatter",d.dotVisible===!0?(delete d.dotVisible,d.mode="lines+markers"):d.mode="lines"):"DotPlot"===d.geometry?(d.type="scatter",d.mode="markers"):"AreaChart"===d.geometry?d.type="area":"BarChart"===d.geometry&&(d.type="bar"),delete d.geometry):("scatter"===d.type?"lines"===d.mode?d.geometry="LinePlot":"markers"===d.mode?d.geometry="DotPlot":"lines+markers"===d.mode&&(d.geometry="LinePlot",d.dotVisible=!0):"area"===d.type?d.geometry="AreaChart":"bar"===d.type&&(d.geometry="BarChart"),delete d.mode,delete d.type),d}),!b&&a.layout&&"stack"===a.layout.barmode)){var e=g.util.duplicates(c.data.map(function(a,b){return a.geometry}));c.data.forEach(function(a,b){var d=e.indexOf(a.geometry);d!=-1&&(c.data[b].groupId=d)})}if(a.layout){var h=f({},a.layout),i=[[h,["plot_bgcolor"],["backgroundColor"]],[h,["showlegend"],["showLegend"]],[h,["radialaxis"],["radialAxis"]],[h,["angularaxis"],["angularAxis"]],[h.angularaxis,["showline"],["gridLinesVisible"]],[h.angularaxis,["showticklabels"],["labelsVisible"]],[h.angularaxis,["nticks"],["ticksCount"]],[h.angularaxis,["tickorientation"],["tickOrientation"]],[h.angularaxis,["ticksuffix"],["ticksSuffix"]],[h.angularaxis,["range"],["domain"]],[h.angularaxis,["endpadding"],["endPadding"]],[h.radialaxis,["showline"],["gridLinesVisible"]],[h.radialaxis,["tickorientation"],["tickOrientation"]],[h.radialaxis,["ticksuffix"],["ticksSuffix"]],[h.radialaxis,["range"],["domain"]],[h.angularAxis,["showline"],["gridLinesVisible"]],[h.angularAxis,["showticklabels"],["labelsVisible"]],[h.angularAxis,["nticks"],["ticksCount"]],[h.angularAxis,["tickorientation"],["tickOrientation"]],[h.angularAxis,["ticksuffix"],["ticksSuffix"]],[h.angularAxis,["range"],["domain"]],[h.angularAxis,["endpadding"],["endPadding"]],[h.radialAxis,["showline"],["gridLinesVisible"]],[h.radialAxis,["tickorientation"],["tickOrientation"]],[h.radialAxis,["ticksuffix"],["ticksSuffix"]],[h.radialAxis,["range"],["domain"]],[h.font,["outlinecolor"],["outlineColor"]],[h.legend,["traceorder"],["reverseOrder"]],[h,["labeloffset"],["labelOffset"]],[h,["defaultcolorrange"],["defaultColorRange"]]];if(i.forEach(function(a,c){g.util.translator.apply(null,a.concat(b))}),b?("undefined"!=typeof h.tickLength&&(h.angularaxis.ticklen=h.tickLength,delete h.tickLength),h.tickColor&&(h.angularaxis.tickcolor=h.tickColor,delete h.tickColor)):(h.angularAxis&&"undefined"!=typeof h.angularAxis.ticklen&&(h.tickLength=h.angularAxis.ticklen),h.angularAxis&&"undefined"!=typeof h.angularAxis.tickcolor&&(h.tickColor=h.angularAxis.tickcolor)),h.legend&&"boolean"!=typeof h.legend.reverseOrder&&(h.legend.reverseOrder="normal"!=h.legend.reverseOrder),h.legend&&"boolean"==typeof h.legend.traceorder&&(h.legend.traceorder=h.legend.traceorder?"reversed":"normal",delete h.legend.reverseOrder),h.margin&&"undefined"!=typeof h.margin.t){var j=["t","r","b","l","pad"],k=["top","right","bottom","left","pad"],l={};d.entries(h.margin).forEach(function(a,b){l[k[j.indexOf(a.key)]]=a.value}),h.margin=l}b&&(delete h.needsEndSpacing,delete h.minorTickColor,delete h.minorTicks,delete h.angularaxis.ticksCount,delete h.angularaxis.ticksCount,delete h.angularaxis.ticksStep,delete h.angularaxis.rewriteTicks,delete h.angularaxis.nticks,delete h.radialaxis.ticksCount,delete h.radialaxis.ticksCount,delete h.radialaxis.ticksStep,delete h.radialaxis.rewriteTicks,delete h.radialaxis.nticks),c.layout=h}return c},a}},{"../../lib":632,d3:95}],728:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../lib"),f=a("../../components/color"),g=a("./micropolar"),h=a("./undo_manager"),i=e.extendDeepAll,j=b.exports={};j.framework=function(a){function b(b,e){return e&&(l=e),d.select(d.select(l).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),c=c?i(c,b):b,f||(f=g.Axis()),k=g.adapter.plotly().convert(c),f.config(k).render(l),a.data=c.data,a.layout=c.layout,j.fillLayout(a),c}var c,e,f,k,l,m=new h;return b.isPolar=!0,b.svg=function(){return f.svg()},b.getConfig=function(){return c},b.getLiveConfig=function(){return g.adapter.plotly().convert(f.getLiveConfig(),!0)},b.getLiveScales=function(){return{t:f.angularScale(),r:f.radialScale()}},b.setUndoPoint=function(){var a=this,b=g.util.cloneJson(c);!function(b,c){m.add({undo:function(){c&&a(c)},redo:function(){a(b)}})}(b,e),e=g.util.cloneJson(b)},b.undo=function(){m.undo()},b.redo=function(){m.redo()},b},j.fillLayout=function(a){var b=d.select(a).selectAll(".plot-container"),c=b.selectAll(".svg-container"),e=a.framework&&a.framework.svg&&a.framework.svg(),g={width:800,height:600,paper_bgcolor:f.background,_container:b,_paperdiv:c,_paper:e};a._fullLayout=i(g,a.layout)}},{"../../components/color":533,"../../lib":632,"./micropolar":727,"./undo_manager":729,d3:95}],729:[function(a,b,c){"use strict";b.exports=function(){function a(a,b){return a?(e=!0,a[b](),e=!1,this):this}var b,c=[],d=-1,e=!1;return{add:function(a){return e?this:(c.splice(d+1,c.length-d),c.push(a),d=c.length-1,this)},setCallback:function(a){b=a},undo:function(){var e=c[d];return e?(a(e,"undo"),d-=1,b&&b(e.undo),this):this},redo:function(){var e=c[d+1];return e?(a(e,"redo"),d+=1,b&&b(e.redo),this):this},clear:function(){c=[],d=-1},hasUndo:function(){return d!==-1},hasRedo:function(){return d<c.length-1},getCommands:function(){return c},getPreviousCommand:function(){return c[d-1]},getIndex:function(){return d}}}},{}],730:[function(a,b,c){"use strict";var d=a("../lib"),e=a("./plots");b.exports=function(a,b,c,f){function g(a,b){return d.coerce(h,i,k,a,b)}for(var h,i,j=f.type,k=f.attributes,l=f.handleDefaults,m=f.partition||"x",n=e.findSubplotIds(c,j),o=n.length,p=0;p<o;p++){var q=n[p];h=a[q]?a[q]:a[q]={},b[q]=i={},g("domain."+m,[p/o,(p+1)/o]),g("domain."+{x:"y",y:"x"}[m]),f.id=q,l(h,i,g,f)}}},{"../lib":632,"./plots":723}],731:[function(a,b,c){"use strict";var d=a("./ternary"),e=a("../../plots/plots");c.name="ternary",c.attr="subplot",c.idRoot="ternary",c.idRegex=/^ternary([2-9]|[1-9][0-9]+)?$/,c.attrRegex=/^ternary([2-9]|[1-9][0-9]+)?$/,c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,f=e.getSubplotIds(b,"ternary"),g=0;g<f.length;g++){var h=f[g],i=e.getSubplotData(c,"ternary",h),j=b[h]._subplot;void 0===j&&(j=new d({id:h,graphDiv:a,container:b._ternarylayer.node()},b),b[h]._subplot=j),j.plot(i,b,a._promises)}},c.clean=function(a,b,c,d){for(var f=e.getSubplotIds(d,"ternary"),g=0;g<f.length;g++){var h=f[g],i=d[h]._subplot;!b[h]&&i&&(i.plotContainer.remove(),i.clipDef.remove())}}},{"../../plots/plots":723,"./layout/attributes":732,"./layout/defaults":735,"./layout/layout_attributes":736,"./ternary":737}],732:[function(a,b,c){"use strict";b.exports={subplot:{valType:"subplotid",dflt:"ternary"}}},{}],733:[function(a,b,c){"use strict";var d=a("../../cartesian/layout_attributes"),e=a("../../../lib/extend").extendFlat;b.exports={title:d.title,titlefont:d.titlefont,color:d.color,tickmode:d.tickmode,nticks:e({},d.nticks,{dflt:6,min:1}),tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:d.ticks,ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,showtickprefix:d.showtickprefix,tickprefix:d.tickprefix,showticksuffix:d.showticksuffix,ticksuffix:d.ticksuffix,showexponent:d.showexponent,exponentformat:d.exponentformat,separatethousands:d.separatethousands,tickfont:d.tickfont,tickangle:d.tickangle,tickformat:d.tickformat,hoverformat:d.hoverformat,showline:e({},d.showline,{dflt:!0}),linecolor:d.linecolor,linewidth:d.linewidth,showgrid:e({},d.showgrid,{dflt:!0}),gridcolor:d.gridcolor,gridwidth:d.gridwidth,min:{valType:"number",dflt:0,min:0}}},{"../../../lib/extend":625,"../../cartesian/layout_attributes":672}],734:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../../lib"),f=a("./axis_attributes"),g=a("../../cartesian/tick_label_defaults"),h=a("../../cartesian/tick_mark_defaults"),i=a("../../cartesian/tick_value_defaults");b.exports=function(a,b,c){function j(c,d){return e.coerce(a,b,f,c,d)}b.type="linear";var k=j("color"),l=k===a.color?k:c.font.color,m=b._name,n=m.charAt(0).toUpperCase(),o="Component "+n,p=j("title",o);b._hovertitle=p===o?p:n,e.coerceFont(j,"titlefont",{family:c.font.family,size:Math.round(1.2*c.font.size),color:l}),j("min"),i(a,b,j,"linear"),g(a,b,j,"linear",{noHover:!1}),h(a,b,j,{outerTicks:!0});var q=j("showticklabels");q&&(e.coerceFont(j,"tickfont",{family:c.font.family,size:c.font.size,color:l}),j("tickangle"),j("tickformat")),j("hoverformat");var r=j("showline");r&&(j("linecolor",k),j("linewidth"));var s=j("showgrid");s&&(j("gridcolor",d(k,c.bgColor,60).toRgbString()),j("gridwidth"))}},{"../../../lib":632,"../../cartesian/tick_label_defaults":678,"../../cartesian/tick_mark_defaults":679,"../../cartesian/tick_value_defaults":680,"./axis_attributes":733,tinycolor2:489}],735:[function(a,b,c){"use strict";function d(a,b,c,d){var f=c("bgcolor"),g=c("sum");d.bgColor=e.combine(f,d.paper_bgcolor);
for(var j,k,l,m=0;m<i.length;m++)j=i[m],k=a[j]||{},l=b[j]={_name:j},h(k,l,d);var n=b.aaxis,o=b.baxis,p=b.caxis;n.min+o.min+p.min>=g&&(n.min=0,o.min=0,p.min=0,a.aaxis&&delete a.aaxis.min,a.baxis&&delete a.baxis.min,a.caxis&&delete a.caxis.min)}var e=a("../../../components/color"),f=a("../../subplot_defaults"),g=a("./layout_attributes"),h=a("./axis_defaults"),i=["aaxis","baxis","caxis"];b.exports=function(a,b,c){f(a,b,c,{type:"ternary",attributes:g,handleDefaults:d,font:b.font,paper_bgcolor:b.paper_bgcolor})}},{"../../../components/color":533,"../../subplot_defaults":730,"./axis_defaults":734,"./layout_attributes":736}],736:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes"),e=a("./axis_attributes");b.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:e,baxis:e,caxis:e}},{"../../../components/color/attributes":532,"./axis_attributes":733}],737:[function(a,b,c){"use strict";function d(a,b){this.id=a.id,this.graphDiv=a.graphDiv,this.init(b),this.makeFramework()}function e(a){f.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var f=a("d3"),g=a("tinycolor2"),h=a("../../plotly"),i=a("../../lib"),j=a("../../components/color"),k=a("../../components/drawing"),l=a("../cartesian/set_convert"),m=a("../../lib/extend").extendFlat,n=a("../cartesian/axes"),o=a("../../lib/filter_visible"),p=a("../../components/dragelement"),q=a("../../components/titles"),r=a("../cartesian/select"),s=a("../cartesian/constants"),t=a("../cartesian/graph_interact");b.exports=d;var u=d.prototype;u.init=function(a){this.container=a._ternarylayer,this.defs=a._defs,this.layoutId=a._uid,this.traceHash={}},u.plot=function(a,b){var c,d=this,e=b[d.id],f=b._size;i.getPlotDiv(d.plotContainer.node())!==d.graphDiv&&(d.init(d.graphDiv._fullLayout),d.makeFramework()),d.adjustLayout(e,f);var g=d.traceHash,h={};for(c=0;c<a.length;c++){var k=a[c];h[k.type]=h[k.type]||[],h[k.type].push(k)}var l=Object.keys(g),m=Object.keys(h);for(c=0;c<l.length;c++){var n=l[c];if(m.indexOf(n)===-1){var p=g[n][0];p.visible=!1,h[n]=[p]}}for(m=Object.keys(h),c=0;c<m.length;c++){var q=h[m[c]],r=q[0]._module;r.plot(d,o(q),e)}d.traceHash=h,d.layers.plotbg.select("path").call(j.fill,e.bgcolor)},u.makeFramework=function(){var a=this,b=a.defs.selectAll("g.clips").data([0]);b.enter().append("g").classed("clips",!0);var c="clip"+a.layoutId+a.id;a.clipDef=b.selectAll("#"+c).data([0]),a.clipDef.enter().append("clipPath").attr("id",c).append("path").attr("d","M0,0Z"),a.plotContainer=a.container.selectAll("g."+a.id).data([0]),a.plotContainer.enter().append("g").classed(a.id,!0),a.layers={};var d=["draglayer","plotbg","backplot","grids","frontplot","zoom","aaxis","baxis","caxis","axlines"],e=a.plotContainer.selectAll("g.toplevel").data(d);e.enter().append("g").attr("class",function(a){return"toplevel "+a}).each(function(b){var c=f.select(this);a.layers[b]=c,"frontplot"===b?c.append("g").classed("scatterlayer",!0):"backplot"===b?c.append("g").classed("maplayer",!0):"plotbg"===b?c.append("path").attr("d","M0,0Z"):"axlines"===b&&c.selectAll("path").data(["aline","bline","cline"]).enter().append("path").each(function(a){f.select(this).classed(a,!0)})});var g=a.plotContainer.select(".grids").selectAll("g.grid").data(["agrid","bgrid","cgrid"]);g.enter().append("g").attr("class",function(a){return"grid "+a}).each(function(b){a.layers[b]=f.select(this)}),a.plotContainer.selectAll(".backplot,.frontplot,.grids").call(k.setClipUrl,c),a.graphDiv._context.staticPlot||a.initInteractions()};var v=Math.sqrt(4/3);u.adjustLayout=function(a,b){var c,d,e,f,g,h,i=this,k=a.domain,n=(k.x[0]+k.x[1])/2,o=(k.y[0]+k.y[1])/2,p=k.x[1]-k.x[0],q=k.y[1]-k.y[0],r=p*b.w,s=q*b.h,t=a.sum,u=a.aaxis.min,w=a.baxis.min,x=a.caxis.min;r>v*s?(f=s,e=f*v):(e=r,f=e/v),g=p*e/r,h=q*f/s,c=b.l+b.w*n-e/2,d=b.t+b.h*(1-o)-f/2,i.x0=c,i.y0=d,i.w=e,i.h=f,i.sum=t,i.xaxis={type:"linear",range:[u+2*x-t,t-u-2*w],domain:[n-g/2,n+g/2],_id:"x",_gd:i.graphDiv},l(i.xaxis),i.xaxis.setScale(),i.yaxis={type:"linear",range:[u,t-w-x],domain:[o-h/2,o+h/2],_id:"y",_gd:i.graphDiv},l(i.yaxis),i.yaxis.setScale();var y=i.yaxis.domain[0],z=i.aaxis=m({},a.aaxis,{range:[u,t-w-x],side:"left",_counterangle:30,tickangle:(+a.aaxis.tickangle||0)-30,domain:[y,y+h*v],_axislayer:i.layers.aaxis,_gridlayer:i.layers.agrid,_pos:0,_gd:i.graphDiv,_id:"y",_length:e,_gridpath:"M0,0l"+f+",-"+e/2});l(z);var A=i.baxis=m({},a.baxis,{range:[t-u-x,w],side:"bottom",_counterangle:30,domain:i.xaxis.domain,_axislayer:i.layers.baxis,_gridlayer:i.layers.bgrid,_counteraxis:i.aaxis,_pos:0,_gd:i.graphDiv,_id:"x",_length:e,_gridpath:"M0,0l-"+e/2+",-"+f});l(A),z._counteraxis=A;var B=i.caxis=m({},a.caxis,{range:[t-u-w,x],side:"right",_counterangle:30,tickangle:(+a.caxis.tickangle||0)+30,domain:[y,y+h*v],_axislayer:i.layers.caxis,_gridlayer:i.layers.cgrid,_counteraxis:i.baxis,_pos:0,_gd:i.graphDiv,_id:"y",_length:e,_gridpath:"M0,0l-"+f+","+e/2});l(B);var C="M"+c+","+(d+f)+"h"+e+"l-"+e/2+",-"+f+"Z";i.clipDef.select("path").attr("d",C),i.layers.plotbg.select("path").attr("d",C);var D="translate("+c+","+d+")";i.plotContainer.selectAll(".scatterlayer,.maplayer,.zoom").attr("transform",D);var E="translate("+c+","+(d+f)+")";i.layers.baxis.attr("transform",E),i.layers.bgrid.attr("transform",E);var F="translate("+(c+e/2)+","+d+")rotate(30)";i.layers.aaxis.attr("transform",F),i.layers.agrid.attr("transform",F);var G="translate("+(c+e/2)+","+d+")rotate(-30)";i.layers.caxis.attr("transform",G),i.layers.cgrid.attr("transform",G),i.drawAxes(!0),i.plotContainer.selectAll(".crisp").classed("crisp",!1);var H=i.layers.axlines;H.select(".aline").attr("d",z.showline?"M"+c+","+(d+f)+"l"+e/2+",-"+f:"M0,0").call(j.stroke,z.linecolor||"#000").style("stroke-width",(z.linewidth||0)+"px"),H.select(".bline").attr("d",A.showline?"M"+c+","+(d+f)+"h"+e:"M0,0").call(j.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px"),H.select(".cline").attr("d",B.showline?"M"+(c+e/2)+","+d+"l"+e/2+","+f:"M0,0").call(j.stroke,B.linecolor||"#000").style("stroke-width",(B.linewidth||0)+"px")},u.drawAxes=function(a){var b=this,c=b.graphDiv,d=b.id.substr(7)+"title",e=b.aaxis,f=b.baxis,g=b.caxis;if(n.doTicks(c,e,!0),n.doTicks(c,f,!0),n.doTicks(c,g,!0),a){var h=Math.max(e.showticklabels?e.tickfont.size/2:0,(g.showticklabels?.75*g.tickfont.size:0)+("outside"===g.ticks?.87*g.ticklen:0));q.draw(c,"a"+d,{propContainer:e,propName:b.id+".aaxis.title",dfltName:"Component A",attributes:{x:b.x0+b.w/2,y:b.y0-e.titlefont.size/3-h,"text-anchor":"middle"}});var i=(f.showticklabels?f.tickfont.size:0)+("outside"===f.ticks?f.ticklen:0)+3;q.draw(c,"b"+d,{propContainer:f,propName:b.id+".baxis.title",dfltName:"Component B",attributes:{x:b.x0-i,y:b.y0+b.h+.83*f.titlefont.size+i,"text-anchor":"middle"}}),q.draw(c,"c"+d,{propContainer:g,propName:b.id+".caxis.title",dfltName:"Component C",attributes:{x:b.x0+b.w+i,y:b.y0+b.h+.83*g.titlefont.size+i,"text-anchor":"middle"}})}};var w=s.MINZOOM/2+.87,x="m-0.87,.5h"+w+"v3h-"+(w+5.2)+"l"+(w/2+2.6)+",-"+(.87*w+4.5)+"l2.6,1.5l-"+w/2+","+.87*w+"Z",y="m0.87,.5h-"+w+"v3h"+(w+5.2)+"l-"+(w/2+2.6)+",-"+(.87*w+4.5)+"l-2.6,1.5l"+w/2+","+.87*w+"Z",z="m0,1l"+w/2+","+.87*w+"l2.6,-1.5l-"+(w/2+2.6)+",-"+(.87*w+4.5)+"l-"+(w/2+2.6)+","+(.87*w+4.5)+"l2.6,1.5l"+w/2+",-"+.87*w+"Z",A="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",B=!0;u.initInteractions=function(){function a(a,b,c){var d=L.getBoundingClientRect();u=b-d.left,w=c-d.top,C={a:K.aaxis.range[0],b:K.baxis.range[1],c:K.caxis.range[1]},E=C,D=K.aaxis.range[1]-C.a,F=g(K.graphDiv._fullLayout[K.id].bgcolor).getLuminance(),G="M0,"+K.h+"L"+K.w/2+", 0L"+K.w+","+K.h+"Z",H=!1,I=N.append("path").attr("class","zoombox").style({fill:F>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",G),J=N.append("path").attr("class","zoombox-corners").style({fill:j.background,stroke:j.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),o()}function b(a,b){return 1-b/K.h}function c(a,b){return 1-(a+(K.h-b)/Math.sqrt(3))/K.w}function d(a,b){return(a-(K.h-b)/Math.sqrt(3))/K.w}function f(a,e){var f=u+a,g=w+e,h=Math.max(0,Math.min(1,b(u,w),b(f,g))),i=Math.max(0,Math.min(1,c(u,w),c(f,g))),j=Math.max(0,Math.min(1,d(u,w),d(f,g))),k=(h/2+j)*K.w,l=(1-h/2-i)*K.w,m=(k+l)/2,n=l-k,o=(1-h)*K.h,p=o-n/v;n<s.MINZOOM?(E=C,I.attr("d",G),J.attr("d","M0,0Z")):(E={a:C.a+h*D,b:C.b+i*D,c:C.c+j*D},I.attr("d",G+"M"+k+","+o+"H"+l+"L"+m+","+p+"L"+k+","+o+"Z"),J.attr("d","M"+u+","+w+A+"M"+k+","+o+x+"M"+l+","+o+y+"M"+m+","+p+z)),H||(I.transition().style("fill",F>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),J.transition().style("opacity",1).duration(200),H=!0)}function k(a,b){if(E===C)return 2===b&&q(),e(M);e(M);var c={};c[K.id+".aaxis.min"]=E.a,c[K.id+".baxis.min"]=E.b,c[K.id+".caxis.min"]=E.c,h.relayout(M,c),B&&M.data&&M._context.showTips&&(i.notifier("Double-click to<br>zoom back out","long"),B=!1)}function l(){C={a:K.aaxis.range[0],b:K.baxis.range[1],c:K.caxis.range[1]},E=C}function m(a,b){var c=a/K.xaxis._m,d=b/K.yaxis._m;E={a:C.a-d,b:C.b+(c+d)/2,c:C.c-(c-d)/2};var e=[E.a,E.b,E.c].sort(),f={a:e.indexOf(E.a),b:e.indexOf(E.b),c:e.indexOf(E.c)};e[0]<0&&(e[1]+e[0]/2<0?(e[2]+=e[0]+e[1],e[0]=e[1]=0):(e[2]+=e[0]/2,e[1]+=e[0]/2,e[0]=0),E={a:e[f.a],b:e[f.b],c:e[f.c]},b=(C.a-E.a)*K.yaxis._m,a=(C.c-E.c-C.b+E.b)*K.xaxis._m);var g="translate("+(K.x0+a)+","+(K.y0+b)+")";K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",g),K.aaxis.range=[E.a,K.sum-E.b-E.c],K.baxis.range=[K.sum-E.a-E.c,E.b],K.caxis.range=[K.sum-E.a-E.b,E.c],K.drawAxes(!1),K.plotContainer.selectAll(".crisp").classed("crisp",!1)}function n(a,b){if(a){var c={};c[K.id+".aaxis.min"]=E.a,c[K.id+".baxis.min"]=E.b,c[K.id+".caxis.min"]=E.c,h.relayout(M,c)}else 2===b&&q()}function o(){K.plotContainer.selectAll(".select-outline").remove()}function q(){var a={};a[K.id+".aaxis.min"]=0,a[K.id+".baxis.min"]=0,a[K.id+".caxis.min"]=0,M.emit("plotly_doubleclick",null),h.relayout(M,a)}var u,w,C,D,E,F,G,H,I,J,K=this,L=K.layers.plotbg.select("path").node(),M=K.graphDiv,N=K.layers.zoom,O={element:L,gd:M,plotinfo:{plot:N},doubleclick:q,subplot:K.id,prepFn:function(b,c,d){O.xaxes=[K.xaxis],O.yaxes=[K.yaxis];var e=M._fullLayout.dragmode;b.shiftKey&&(e="pan"===e?"zoom":"pan"),"lasso"===e?O.minDrag=1:O.minDrag=void 0,"zoom"===e?(O.moveFn=f,O.doneFn=k,a(b,c,d)):"pan"===e?(O.moveFn=m,O.doneFn=n,l(),o()):"select"!==e&&"lasso"!==e||r(b,c,d,O,e)}};L.onmousemove=function(a){t.hover(M,a,K.id),M._fullLayout._lasthover=L,M._fullLayout._hoversubplot=K.id},L.onmouseout=function(a){M._dragging||p.unhover(M,a)},L.onclick=function(a){t.click(M,a)},p.init(O)}},{"../../components/color":533,"../../components/dragelement":555,"../../components/drawing":557,"../../components/titles":608,"../../lib":632,"../../lib/extend":625,"../../lib/filter_visible":627,"../../plotly":658,"../cartesian/axes":662,"../cartesian/constants":668,"../cartesian/graph_interact":670,"../cartesian/select":676,"../cartesian/set_convert":677,d3:95,tinycolor2:489}],738:[function(a,b,c){"use strict";function d(a){return"object"==typeof a&&(a=a.type),a}var e=a("./lib"),f=a("./plots/attributes");c.modules={},c.allTypes=[],c.allCategories={},c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.register=function(a,b,d,f){if(c.modules[b])return void e.log("Type "+b+" already registered");for(var g={},h=0;h<d.length;h++)g[d[h]]=!0,c.allCategories[d[h]]=!0;c.modules[b]={_module:a,categories:g},f&&Object.keys(f).length&&(c.modules[b].meta=f),c.allTypes.push(b)},c.registerSubplot=function(a){var b=a.name;return c.subplotsRegistry[b]?void e.log("Plot type "+b+" already registered."):void(c.subplotsRegistry[b]=a)},c.getModule=function(a){if(void 0!==a.r)return e.warn("Tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",a),!1;var b=c.modules[d(a)];return!!b&&b._module},c.traceIs=function(a,b){if(a=d(a),"various"===a)return!1;var g=c.modules[a];return g||(a&&"area"!==a&&e.log("Unrecognized trace type "+a+"."),g=c.modules[f.type.dflt]),!!g.categories[b]},c.getComponentMethod=function(a,b){var d=c.componentsRegistry[a];return d?d[b]:e.noop}},{"./lib":632,"./plots/attributes":660}],739:[function(a,b,c){"use strict";function d(a){var b;switch(a){case"themes__thumb":b={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":b={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}function e(a){var b=["xaxis","yaxis","zaxis"];return b.indexOf(a.slice(0,5))>-1}var f=a("../lib"),g=a("../plots/plots"),h=f.extendFlat,i=f.extendDeep;b.exports=function(a,b){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var c,f=a.data,j=a.layout,k=i([],f),l=i({},j,d(b.tileClass));if(b.width&&(l.width=b.width),b.height&&(l.height=b.height),"thumbnail"===b.tileClass||"themes__thumb"===b.tileClass){l.annotations=[];var m=Object.keys(l);for(c=0;c<m.length;c++)e(m[c])&&(l[m[c]].title="");for(c=0;c<k.length;c++){var n=k[c];n.showscale=!1,n.marker&&(n.marker.showscale=!1),"pie"===n.type&&(n.textposition="none")}}if(Array.isArray(b.annotations))for(c=0;c<b.annotations.length;c++)l.annotations.push(b.annotations[c]);var o=g.getSubplotIds(l,"gl3d");if(o.length){var p={};for("thumbnail"===b.tileClass&&(p={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),c=0;c<o.length;c++){var q=o[c];h(l[q].xaxis,p),h(l[q].yaxis,p),h(l[q].zaxis,p),l[q]._scene=null}}var r=document.createElement("div");b.tileClass&&(r.className=b.tileClass);var s={td:r,layout:l,data:k,config:{staticPlot:void 0===b.staticPlot||b.staticPlot,plotGlPixelRatio:void 0===b.plotGlPixelRatio?2:b.plotGlPixelRatio,displaylogo:b.displaylogo||!1,showLink:b.showLink||!1,showTips:b.showTips||!1}};return"transparent"!==b.setBackground&&(s.config.setBackground=b.setBackground||"opaque"),s.td.defaultLayout=d(b.tileClass),s}},{"../lib":632,"../plots/plots":723}],740:[function(a,b,c){"use strict";function d(a,b){return b=b||{},b.format=b.format||"png",new Promise(function(c,d){a._snapshotInProgress&&d(new Error("Snapshotting already in progress.")),f.isIE()&&"svg"!==b.format&&d(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),a._snapshotInProgress=!0;var h=e(a,b),i=b.filename||a.fn||"newplot";i+="."+b.format,h.then(function(b){return a._snapshotInProgress=!1,g(b,i)}).then(function(a){c(a)})["catch"](function(b){a._snapshotInProgress=!1,d(b)})})}var e=a("../plot_api/to_image"),f=a("../lib"),g=a("./filesaver");b.exports=d},{"../lib":632,"../plot_api/to_image":656,"./filesaver":741}],741:[function(a,b,c){"use strict";var d=function(a,b){var c=document.createElement("a"),d="download"in c,e=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),f=new Promise(function(f,g){"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&g(new Error("IE < 10 unsupported")),e&&(document.location.href="data:application/octet-stream"+a.slice(a.search(/[,;]/)),f(b)),b||(b="download"),d&&(c.href=a,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),f(b)),"undefined"!=typeof navigator&&navigator.msSaveBlob&&(navigator.msSaveBlob(new Blob([a]),b),f(b)),g(new Error("download error"))});return f};b.exports=d},{}],742:[function(a,b,c){"use strict";c.getDelay=function(a){return a._has&&(a._has("gl3d")||a._has("gl2d"))?500:0},c.getRedrawFunc=function(a){if(!(a.data&&a.data[0]&&a.data[0].r))return function(){(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()})}}},{}],743:[function(a,b,c){"use strict";var d=a("./helpers"),e={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),downloadImage:a("./download")};b.exports=e},{"./cloneplot":739,"./download":740,"./helpers":742,"./svgtoimg":744,"./toimage":745,"./tosvg":746}],744:[function(a,b,c){"use strict";function d(a){var b=a.emitter||new f,c=new Promise(function(d,f){var g=window.Image,h=a.svg,i=a.format||"png";if(e.isIE()&&(h=h.replace(/"/gi,"'"),h=h.replace(/(\('#)(.*)('\))/gi,'("$2")'),h=h.replace(/(\\')/gi,'"'),"svg"!==i)){var j=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return f(j),a.promise?c:b.emit("error",j)}var k=a.canvas,l=k.getContext("2d"),m=new g,n="data:image/svg+xml,"+encodeURIComponent(h);k.height=a.height||150,k.width=a.width||300,m.onload=function(){var c;switch("svg"!==i&&l.drawImage(m,0,0),i){case"jpeg":c=k.toDataURL("image/jpeg");break;case"png":c=k.toDataURL("image/png");break;case"webp":c=k.toDataURL("image/webp");break;case"svg":c=n;break;default:if(f(new Error("Image format is not jpeg, png or svg")),!a.promise)return b.emit("error","Image format is not jpeg, png or svg")}d(c),a.promise||b.emit("success",c)},m.onerror=function(c){if(f(c),!a.promise)return b.emit("error",c)},m.src=n});return a.promise?c:b}var e=a("../lib"),f=a("events").EventEmitter;b.exports=d},{"../lib":632,events:102}],745:[function(a,b,c){"use strict";function d(a,b){function c(){var a=h.getDelay(m._fullLayout);setTimeout(function(){var a=j(m),c=document.createElement("canvas");c.id=g.randstr(),d=k({format:b.format,width:m._fullLayout.width,height:m._fullLayout.height,canvas:c,emitter:d,svg:a}),d.clean=function(){m&&document.body.removeChild(m)}},a)}var d=new e,l=i(a,{format:"png"}),m=l.td;m.style.position="absolute",m.style.left="-5000px",document.body.appendChild(m);var n=h.getRedrawFunc(m);return f.plot(m,l.data,l.layout,l.config).then(n).then(c)["catch"](function(a){d.emit("error",a)}),d}var e=a("events").EventEmitter,f=a("../plotly"),g=a("../lib"),h=a("./helpers"),i=a("./cloneplot"),j=a("./tosvg"),k=a("./svgtoimg");b.exports=d},{"../lib":632,"../plotly":658,"./cloneplot":739,"./helpers":742,"./svgtoimg":744,"./tosvg":746,events:102}],746:[function(a,b,c){"use strict";var d=a("d3"),e=a("../lib/svg_text_utils"),f=a("../components/drawing"),g=a("../components/color"),h=a("../constants/xmlns_namespaces");b.exports=function(a,b){var c,i=a._fullLayout,j=i._paper,k=i._toppaper;j.insert("rect",":first-child").call(f.setRect,0,0,i.width,i.height).call(g.fill,i.paper_bgcolor);var l=i._basePlotModules||[];for(c=0;c<l.length;c++){var m=l[c];m.toSVG&&m.toSVG(a)}if(k){var n=k.node().childNodes,o=Array.prototype.slice.call(n);for(c=0;c<o.length;c++){var p=o[c];p.childNodes.length&&j.node().appendChild(p)}}i._draggers&&i._draggers.remove(),j.node().style.background="",j.selectAll("text").attr("data-unformatted",null).each(function(){var a=d.select(this);if("hidden"===a.style("visibility"))return void a.remove();a.style("visibility","visible");var b=a.style("font-family");b&&b.indexOf('"')!==-1&&a.style("font-family",b.replace(/"/g,"TOBESTRIPPED"))}),"pdf"!==b&&"eps"!==b||j.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),j.node().setAttributeNS(h.xmlns,"xmlns",h.svg),j.node().setAttributeNS(h.xmlns,"xmlns:xlink",h.xlink);var q=(new window.XMLSerializer).serializeToString(j.node());return q=e.html_entity_decode(q),q=e.xml_entity_encode(q),q=q.replace(/("TOBESTRIPPED)|(TOBESTRIPPED")/g,"'")}},{"../components/color":533,"../components/drawing":557,"../constants/xmlns_namespaces":618,"../lib/svg_text_utils":646,d3:95}],747:[function(a,b,c){"use strict";var d=a("../../lib").mergeArray;b.exports=function(a){var b=a[0].trace,c=b.marker;if(d(b.text,a,"tx"),c&&c.line){var e=c.line;d(c.opacity,a,"mo"),d(c.color,a,"mc"),d(e.color,a,"mlc"),d(e.width,a,"mlw")}}},{"../../lib":632}],748:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/color_attributes"),f=a("../../lib/extend").extendFlat,g=d.marker,h=g.line,i=f({},h.width,{dflt:0}),j=f({},{width:i},e("marker.line")),k=f({},{showscale:g.showscale,line:j},e("marker"));b.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,orientation:{valType:"enumerated",values:["v","h"]},base:{valType:"any",dflt:null,arrayOk:!0},offset:{valType:"number",dflt:null,arrayOk:!0},width:{valType:"number",dflt:null,min:0,arrayOk:!0},marker:k,r:d.r,t:d.t,_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:{valType:"enumerated",values:["v","h"]}}}},{"../../components/colorscale/color_attributes":541,"../../lib/extend":625,"../scatter/attributes":844}],749:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../../components/colorscale/has_colorscale"),g=a("../../components/colorscale/calc");b.exports=function(a,b){var c,h,i,j,k=e.getFromId(a,b.xaxis||"x"),l=e.getFromId(a,b.yaxis||"y"),m=b.orientation||(b.x&&!b.y?"h":"v");"h"===m?(c=k,i=k.makeCalcdata(b,"x"),h=l.makeCalcdata(b,"y")):(c=l,i=l.makeCalcdata(b,"y"),h=k.makeCalcdata(b,"x"));var n=Math.min(h.length,i.length),o=[];for(j=0;j<n;j++)d(h[j])&&o.push({p:h[j]});var p,q=b.base;if(Array.isArray(q)){for(j=0;j<Math.min(q.length,o.length);j++)p=c.d2c(q[j]),o[j].b=d(p)?p:0;for(;j<o.length;j++)o[j].b=0}else for(p=c.d2c(q),p=d(p)?p:0,j=0;j<o.length;j++)o[j].b=p;for(j=0;j<o.length;j++)d(i[j])&&(o[j].s=i[j]);return f(b,"marker")&&g(b,b.marker.color,"marker","c"),f(b,"marker.line")&&g(b,b.marker.line.color,"marker.line","c"),o}},{"../../components/colorscale/calc":540,"../../components/colorscale/has_colorscale":547,"../../plots/cartesian/axes":662,"fast-isnumeric":104}],750:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("../scatter/xy_defaults"),g=a("../bar/style_defaults"),h=a("../../components/errorbars/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=f(a,b,k);return l?(k("orientation",b.x&&!b.y?"h":"v"),k("base"),k("offset"),k("width"),k("text"),g(a,b,k,c,j),h(a,b,e.defaultLine,{axis:"y"}),void h(a,b,e.defaultLine,{axis:"x",inherit:"y"})):void(b.visible=!1)}},{"../../components/color":533,"../../components/errorbars/defaults":562,"../../lib":632,"../bar/style_defaults":759,"../scatter/xy_defaults":866,"./attributes":748}],751:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/graph_interact"),e=a("../../components/errorbars"),f=a("../../components/color");b.exports=function(a,b,c,g){var h,i=a.cd,j=i[0].trace,k=i[0].t,l=a.xa,m=a.ya,n="closest"===g?k.barwidth/2:k.bargroupwidth/2;h="closest"!==g?function(a){return a.p}:"h"===j.orientation?function(a){return a.y}:function(a){return a.x};var o,p;"h"===j.orientation?(o=function(a){return d.inbox(a.b-b,a.x-b)+(a.x-b)/(a.x-a.b)},p=function(a){var b=h(a)-c;return d.inbox(b-n,b+n)}):(p=function(a){return d.inbox(a.b-c,a.y-c)+(a.y-c)/(a.y-a.b)},o=function(a){var c=h(a)-b;return d.inbox(c-n,c+n)});var q=d.getDistanceFunction(g,o,p);if(d.getClosest(i,q,a),a.index!==!1){var r=i[a.index],s=r.mcc||j.marker.color,t=r.mlcc||j.marker.line.color,u=r.mlw||j.marker.line.width;return f.opacity(s)?a.color=s:f.opacity(t)&&u&&(a.color=t),"h"===j.orientation?(a.x0=a.x1=l.c2p(r.x,!0),a.xLabelVal=r.s,a.y0=m.c2p(h(r)-n,!0),a.y1=m.c2p(h(r)+n,!0),a.yLabelVal=r.p):(a.y0=a.y1=m.c2p(r.y,!0),a.yLabelVal=r.s,a.x0=l.c2p(h(r)-n,!0),a.x1=l.c2p(h(r)+n,!0),a.xLabelVal=r.p),r.tx&&(a.text=r.tx),e.hoverInfo(r,j,a),[a]}}},{"../../components/color":533,"../../components/errorbars":563,"../../plots/cartesian/graph_interact":670}],752:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("./layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.calc=a("./calc"),d.setPositions=a("./set_positions"),d.colorbar=a("../scatter/colorbar"),d.arraysToCalcdata=a("./arrays_to_calcdata"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="bar",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"../scatter/colorbar":847,"./arrays_to_calcdata":747,"./attributes":748,"./calc":749,"./defaults":750,"./hover":751,"./layout_attributes":753,"./layout_defaults":754,"./plot":755,"./set_positions":756,"./style":758}],753:[function(a,b,c){"use strict";b.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:""},bargap:{valType:"number",min:0,max:1},bargroupgap:{valType:"number",min:0,max:1,dflt:0}}},{}],754:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../plots/cartesian/axes"),f=a("../../lib"),g=a("./layout_attributes");b.exports=function(a,b,c){function h(c,d){return f.coerce(a,b,g,c,d)}for(var i=!1,j=!1,k=!1,l={},m=0;m<c.length;m++){var n=c[m];if(d.traceIs(n,"bar")){if(i=!0,"overlay"!==a.barmode&&"stack"!==a.barmode){var o=n.xaxis+n.yaxis;l[o]&&(k=!0),l[o]=!0}if(n.visible&&"histogram"===n.type){var p=e.getFromId({_fullLayout:b},n["v"===n.orientation?"xaxis":"yaxis"]);"category"!==p.type&&(j=!0)}}}if(i){var q=h("barmode");"overlay"!==q&&h("barnorm"),h("bargap",j&&!k?0:.2),h("bargroupgap")}}},{"../../lib":632,"../../plots/cartesian/axes":662,"../../registry":738,"./layout_attributes":753}],755:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../lib"),g=a("../../components/color"),h=a("../../components/errorbars"),i=a("./arrays_to_calcdata");b.exports=function(a,b,c){var j=b.xaxis,k=b.yaxis,l=a._fullLayout,m=b.plot.select(".barlayer").selectAll("g.trace.bars").data(c).enter().append("g").attr("class","trace bars");m.append("g").attr("class","points").each(function(b){var c=b[0].t,h=b[0].trace,m=c.poffset,n=Array.isArray(m),o=c.barwidth,p=Array.isArray(o);i(b),d.select(this).selectAll("path").data(f.identity).enter().append("path").each(function(b,c){function f(a){return 0===l.bargap&&0===l.bargroupgap?d.round(Math.round(a)-z,2):a}function i(a,b){return Math.abs(a-b)>=2?f(a):a>b?Math.ceil(a):Math.floor(a)}var q,r,s,t,u=b.p+(n?m[c]:m),v=u+(p?o[c]:o),w=b.b,x=w+b.s;if("h"===h.orientation?(s=k.c2p(u,!0),t=k.c2p(v,!0),q=j.c2p(w,!0),r=j.c2p(x,!0)):(q=j.c2p(u,!0),r=j.c2p(v,!0),s=k.c2p(w,!0),t=k.c2p(x,!0)),!(e(q)&&e(r)&&e(s)&&e(t)&&q!==r&&s!==t))return void d.select(this).remove();var y=(b.mlw+1||h.marker.line.width+1||(b.trace?b.trace.marker.line.width:0)+1)-1,z=d.round(y/2%1,2);if(!a._context.staticPlot){var A=g.opacity(b.mc||h.marker.color),B=A<1||y>.01?f:i;q=B(q,r),r=B(r,q),s=B(s,t),t=B(t,s)}d.select(this).attr("d","M"+q+","+s+"V"+t+"H"+r+"V"+s+"Z")})}),m.call(h.plot,b)}},{"../../components/color":533,"../../components/errorbars":563,"../../lib":632,"./arrays_to_calcdata":747,d3:95,"fast-isnumeric":104}],756:[function(a,b,c){"use strict";function d(a,b,c,d){if(d.length){var h,i,j,k,l,m=a._fullLayout.barmode,n="overlay"===m,o="group"===m;if(n)e(a,b,c,d);else if(o){for(h=[],i=[],j=0;j<d.length;j++)k=d[j],l=k[0].trace,void 0===l.offset?i.push(k):h.push(k);i.length&&f(a,b,c,i),h.length&&e(a,b,c,h)}else{for(h=[],i=[],j=0;j<d.length;j++)k=d[j],l=k[0].trace,void 0===l.base?i.push(k):h.push(k);i.length&&g(a,b,c,i),h.length&&e(a,b,c,h)}}}function e(a,b,c,d){for(var e=a._fullLayout.barnorm,f=!1,g=!e,i=0;i<d.length;i++){var j=d[i],k=new u([j],f,g);h(a,b,k),e?(o(a,c,k),p(a,c,k)):m(a,c,k)}}function f(a,b,c,d){var e=a._fullLayout,f=e.barnorm,g=!1,h=!f,j=new u(d,g,h);i(a,b,j),f?(o(a,c,j),p(a,c,j)):m(a,c,j)}function g(a,b,c,d){var e=a._fullLayout,f=e.barmode,g="stack"===f,i="relative"===f,j=a._fullLayout.barnorm,k=i,l=!(j||g||i),m=new u(d,k,l);h(a,b,m),n(a,c,m)}function h(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.bargap,m=h.bargroupgap,n=c.minDiff,o=c.traces,p=n*(1-i),q=p,r=q*(1-m),s=-r/2;for(d=0;d<o.length;d++)e=o[d],f=e[0],g=f.t,g.barwidth=r,g.poffset=s,g.bargroupwidth=p;c.binWidth=o[0][0].t.barwidth/100,j(c),k(a,b,c),l(a,b,c)}function i(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.bargap,m=h.bargroupgap,n=c.positions,o=c.distinctPositions,p=c.minDiff,q=c.traces,r=n.length!==o.length,s=q.length,t=p*(1-i),u=r?t/s:t,v=u*(1-m);for(d=0;d<s;d++){e=q[d],f=e[0];var w=r?((2*d+1-s)*u-v)/2:-v/2;g=f.t,g.barwidth=v,g.poffset=w,g.bargroupwidth=t}c.binWidth=q[0][0].t.barwidth/100,j(c),k(a,b,c),l(a,b,c,r)}function j(a){var b,c,d,e,f,g,h=a.traces;for(b=0;b<h.length;b++){c=h[b],d=c[0],e=d.trace,g=d.t;var i,j=e.offset,k=g.poffset;if(Array.isArray(j)){for(i=j.slice(0,c.length),f=0;f<i.length;f++)r(i[f])||(i[f]=k);for(f=i.length;f<c.length;f++)i.push(k);g.poffset=i}else void 0!==j&&(g.poffset=j);var l=e.width,m=g.barwidth;if(Array.isArray(l)){var n=l.slice(0,c.length);for(f=0;f<n.length;f++)r(n[f])||(n[f]=m);for(f=n.length;f<c.length;f++)n.push(m);if(g.barwidth=n,void 0===j){for(i=[],f=0;f<c.length;f++)i.push(k+(m-n[f])/2);g.poffset=i}}else void 0!==l&&(g.barwidth=l,void 0===j&&(g.poffset=k+(m-l)/2))}}function k(a,b,c){for(var d=c.traces,e=q(b),f=0;f<d.length;f++)for(var g=d[f],h=g[0].t,i=h.poffset,j=Array.isArray(i),k=h.barwidth,l=Array.isArray(k),m=0;m<g.length;m++){var n=g[m];n[e]=n.p+(j?i[m]:i)+(l?k[m]:k)/2}}function l(a,b,c,d){var e=c.traces,f=c.distinctPositions,g=f[0],h=c.minDiff,i=h/2;t.minDtick(b,h,g,d);for(var j=Math.min.apply(Math,f)-i,k=Math.max.apply(Math,f)+i,l=0;l<e.length;l++){var m=e[l],n=m[0],o=n.trace;if(void 0!==o.width||void 0!==o.offset)for(var p=n.t,q=p.poffset,r=p.barwidth,s=Array.isArray(q),u=Array.isArray(r),v=0;v<m.length;v++){var w=m[v],x=s?q[v]:q,y=u?r[v]:r,z=w.p,A=z+x,B=A+y;j=Math.min(j,A),k=Math.max(k,B)}}t.expand(b,[j,k],{padded:!1})}function m(a,b,c){for(var d=c.traces,e=q(b),f=b.l2c(b.c2l(0)),g=f,h=0;h<d.length;h++)for(var i=d[h],j=0;j<i.length;j++){var k=i[j],l=k.b,m=l+k.s;k[e]=m,r(b.c2l(m))&&(f=Math.max(f,m),g=Math.min(g,m)),r(b.c2l(l))&&(f=Math.max(f,l),g=Math.min(g,l))}t.expand(b,[g,f],{tozero:!0,padded:!0})}function n(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.barnorm,j=q(b),k=c.traces,l=b.l2c(b.c2l(0)),m=l;for(d=0;d<k.length;d++)for(e=k[d],f=0;f<e.length;f++)if(g=e[f],r(g.s)){var n=c.put(g.p,g.s),o=n+g.s;g.b=n,g[j]=o,i||(r(b.c2l(o))&&(l=Math.max(l,o),m=Math.min(m,o)),r(b.c2l(n))&&(l=Math.max(l,n),m=Math.min(m,n)))}i?p(a,b,c):t.expand(b,[m,l],{tozero:!0,padded:!0})}function o(a,b,c){for(var d=c.traces,e=0;e<d.length;e++)for(var f=d[e],g=0;g<f.length;g++){var h=f[g];r(h.s)&&c.put(h.p,h.s)}}function p(a,b,c){for(var d=c.traces,e=q(b),f="fraction"===a._fullLayout.barnorm?1:100,g=f/1e9,h=0,i="stack"===a._fullLayout.barmode?f:0,j=!1,k=0;k<d.length;k++)for(var l=d[k],m=0;m<l.length;m++){var n=l[m];if(r(n.s)){var o=Math.abs(f/c.get(n.p,n.s));n.b*=o,n.s*=o;var p=n.b,s=p+n.s;n[e]=s,r(b.c2l(s))&&(s<h-g&&(j=!0,h=s),s>i+g&&(j=!0,i=s)),r(b.c2l(p))&&(p<h-g&&(j=!0,h=p),p>i+g&&(j=!0,i=p))}}t.expand(b,[h,i],{tozero:!0,padded:j})}function q(a){return a._id.charAt(0)}var r=a("fast-isnumeric"),s=a("../../registry"),t=a("../../plots/cartesian/axes"),u=a("./sieve.js");b.exports=function(a,b){var c,e=b.xaxis,f=b.yaxis,g=a._fullData,h=a.calcdata,i=[],j=[];for(c=0;c<g.length;c++){var k=g[c];k.visible===!0&&s.traceIs(k,"bar")&&k.xaxis===e._id&&k.yaxis===f._id&&("h"===k.orientation?i.push(h[c]):j.push(h[c]))}d(a,e,f,j),d(a,f,e,i)}},{"../../plots/cartesian/axes":662,"../../registry":738,"./sieve.js":757,"fast-isnumeric":104}],757:[function(a,b,c){"use strict";function d(a,b,c){this.traces=a,this.separateNegativeValues=b,this.dontMergeOverlappingData=c;for(var d=[],f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];d.push(i.p)}this.positions=d;var j=e.distinctVals(this.positions);this.distinctPositions=j.vals,this.minDiff=j.minDiff,this.binWidth=this.minDiff,this.bins={}}b.exports=d;var e=a("../../lib");d.prototype.put=function(a,b){var c=this.getLabel(a,b),d=this.bins[c]||0;return this.bins[c]=d+b,d},d.prototype.get=function(a,b){var c=this.getLabel(a,b);return this.bins[c]||0},d.prototype.getLabel=function(a,b){var c=b<0&&this.separateNegativeValues?"v":"^",d=this.dontMergeOverlappingData?a:Math.round(a/this.binWidth);
return c+d}},{"../../lib":632}],758:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/color"),f=a("../../components/drawing"),g=a("../../components/errorbars");b.exports=function(a){var b=d.select(a).selectAll("g.trace.bars"),c=b.size(),h=a._fullLayout;b.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){("stack"===h.barmode&&c>1||0===h.bargap&&0===h.bargroupgap&&!a[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),b.selectAll("g.points").each(function(a){var b=a[0].trace,c=b.marker,g=c.line,h=(b._input||{}).marker||{},i=f.tryColorscale(c,h,""),j=f.tryColorscale(c,h,"line.");d.select(this).selectAll("path").each(function(a){var b,f,h=(a.mlw+1||g.width+1)-1,k=d.select(this);b="mc"in a?a.mcc=i(a.mc):Array.isArray(c.color)?e.defaultLine:c.color,k.style("stroke-width",h+"px").call(e.fill,b),h&&(f="mlc"in a?a.mlcc=j(a.mlc):Array.isArray(g.color)?e.defaultLine:g.color,k.call(e.stroke,f))})}),b.call(g.style)}},{"../../components/color":533,"../../components/drawing":557,"../../components/errorbars":563,d3:95}],759:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults");b.exports=function(a,b,c,g,h){c("marker.color",g),e(a,"marker")&&f(a,b,h,c,{prefix:"marker.",cLetter:"c"}),c("marker.line.color",d.defaultLine),e(a,"marker.line")&&f(a,b,h,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width")}},{"../../components/color":533,"../../components/colorscale/defaults":543,"../../components/colorscale/has_colorscale":547}],760:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/color/attributes"),f=a("../../lib/extend").extendFlat,g=d.marker,h=g.line;b.exports={y:{valType:"data_array"},x:{valType:"data_array"},x0:{valType:"any"},y0:{valType:"any"},whiskerwidth:{valType:"number",min:0,max:1,dflt:.5},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1},jitter:{valType:"number",min:0,max:1},pointpos:{valType:"number",min:-2,max:2},orientation:{valType:"enumerated",values:["v","h"]},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)"},symbol:f({},g.symbol,{arrayOk:!1}),opacity:f({},g.opacity,{arrayOk:!1,dflt:1}),size:f({},g.size,{arrayOk:!1}),color:f({},g.color,{arrayOk:!1}),line:{color:f({},h.color,{arrayOk:!1,dflt:e.defaultLine}),width:f({},h.width,{arrayOk:!1,dflt:0}),outliercolor:{valType:"color"},outlierwidth:{valType:"number",min:0,dflt:1}}},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2}},fillcolor:d.fillcolor}},{"../../components/color/attributes":532,"../../lib/extend":625,"../scatter/attributes":844}],761:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/cartesian/axes");b.exports=function(a,b){function c(a,b,c,f,g){var h;return c in b?o=f.makeCalcdata(b,c):(h=c+"0"in b?b[c+"0"]:"name"in b&&("category"===f.type||d(b.name)&&["linear","log"].indexOf(f.type)!==-1||e.isDateTime(b.name)&&"date"===f.type)?b.name:a.numboxes,h=f.d2c(h),o=g.map(function(){return h})),o}function g(a,b,c,f,g){var h,i,j,k,l=f.length,m=b.length,n=[],o=[];for(h=0;h<l;++h)i=f[h],a[h]={pos:i},o[h]=i-g,n[h]=[];for(o.push(f[l-1]+g),h=0;h<m;++h)k=b[h],d(k)&&(j=e.findBin(c[h],o),j>=0&&j<m&&n[j].push(k));return n}function h(a,b){var c,d,f,g;for(g=0;g<b.length;++g)c=b[g].sort(e.sorterAsc),d=c.length,f=a[g],f.val=c,f.min=c[0],f.max=c[d-1],f.mean=e.mean(c,d),f.sd=e.stdev(c,d,f.mean),f.q1=e.interp(c,.25),f.med=e.interp(c,.5),f.q3=e.interp(c,.75),f.lf=Math.min(f.q1,c[Math.min(e.findBin(2.5*f.q1-1.5*f.q3,c,!0)+1,d-1)]),f.uf=Math.max(f.q3,c[Math.max(e.findBin(2.5*f.q3-1.5*f.q1,c),0)]),f.lo=4*f.q1-3*f.q3,f.uo=4*f.q3-3*f.q1}var i,j,k,l,m,n,o,p,q,r=f.getFromId(a,b.xaxis||"x"),s=f.getFromId(a,b.yaxis||"y"),t=b.orientation,u=[];"h"===t?(i=r,j="x",m=s,n="y"):(i=s,j="y",m=r,n="x"),k=i.makeCalcdata(b,j),f.expand(i,k,{padded:!0}),o=c(a,b,n,m,k);var v=e.distinctVals(o);return p=v.vals,q=v.minDiff/2,l=g(u,k,o,p,q),h(u,l),u=u.filter(function(a){return a.val&&a.val.length}),u.length?(u[0].t={boxnum:a.numboxes,dPos:q},a.numboxes++,u):[{t:{emptybox:!0}}]}},{"../../lib":632,"../../plots/cartesian/axes":662,"fast-isnumeric":104}],762:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("./attributes");b.exports=function(a,b,c){function g(c,e){return d.coerce(a,b,f,c,e)}var h,i=g("y"),j=g("x");if(i&&i.length)h="v",j||g("x0");else{if(!j||!j.length)return void(b.visible=!1);h="h",g("y0")}g("orientation",h),g("line.color",(a.marker||{}).color||c),g("line.width",2),g("fillcolor",e.addOpacity(b.line.color,.5)),g("whiskerwidth"),g("boxmean");var k=d.coerce2(a,b,f,"marker.outliercolor"),l=g("marker.line.outliercolor"),m=k||l?g("boxpoints","suspectedoutliers"):g("boxpoints");m&&(g("jitter","all"===m?.3:0),g("pointpos","all"===m?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.color",b.line.color),g("marker.line.color"),g("marker.line.width"),"suspectedoutliers"===m&&(g("marker.line.outliercolor",b.marker.color),g("marker.line.outlierwidth")))}},{"../../components/color":533,"../../lib":632,"./attributes":760}],763:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../../plots/cartesian/graph_interact"),f=a("../../lib"),g=a("../../components/color");b.exports=function(a,b,c,h){var i,j,k,l,m,n,o,p,q,r=a.cd,s=r[0].trace,t=r[0].t,u=a.xa,v=a.ya,w=[];if(l="closest"===h?2.5*t.bdPos:t.bdPos,"h"===s.orientation?(i=function(a){return e.inbox(a.min-b,a.max-b)},j=function(a){var b=a.pos+t.bPos-c;return e.inbox(b-l,b+l)},m="y",n=v,p="x",q=u):(i=function(a){var c=a.pos+t.bPos-b;return e.inbox(c-l,c+l)},j=function(a){return e.inbox(a.min-c,a.max-c)},m="x",n=u,p="y",q=v),k=e.getDistanceFunction(h,i,j),e.getClosest(r,k,a),a.index!==!1){var x=r[a.index],y=s.line.color,z=(s.marker||{}).color;g.opacity(y)&&s.line.width?a.color=y:g.opacity(z)&&s.boxpoints?a.color=z:a.color=s.fillcolor,a[m+"0"]=n.c2p(x.pos+t.bPos-t.bdPos,!0),a[m+"1"]=n.c2p(x.pos+t.bPos+t.bdPos,!0),d.tickText(n,n.c2l(x.pos),"hover").text,a[m+"LabelVal"]=x.pos;var A,B,C={},D=["med","min","q1","q3","max"];s.boxmean&&D.push("mean"),s.boxpoints&&[].push.apply(D,["lf","uf"]);for(var E=0;E<D.length;E++)A=D[E],A in x&&!(x[A]in C)&&(C[x[A]]=!0,o=q.c2p(x[A],!0),B=f.extendFlat({},a),B[p+"0"]=B[p+"1"]=o,B[p+"LabelVal"]=x[A],B.attr=A,"mean"===A&&"sd"in x&&"sd"===s.boxmean&&(B[p+"err"]=x.sd),a.name="",w.push(B));return w}}},{"../../components/color":533,"../../lib":632,"../../plots/cartesian/axes":662,"../../plots/cartesian/graph_interact":670}],764:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("./layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.calc=a("./calc"),d.setPositions=a("./set_positions"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="box",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","symbols","oriented","box","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"./attributes":760,"./calc":761,"./defaults":762,"./hover":763,"./layout_attributes":765,"./layout_defaults":766,"./plot":767,"./set_positions":768,"./style":769}],765:[function(a,b,c){"use strict";b.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay"},boxgap:{valType:"number",min:0,max:1,dflt:.3},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3}}},{}],766:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("./layout_attributes");b.exports=function(a,b,c){function g(c,d){return e.coerce(a,b,f,c,d)}for(var h,i=0;i<c.length;i++)if(d.traceIs(c[i],"box")){h=!0;break}h&&(g("boxmode"),g("boxgap"),g("boxgroupgap"))}},{"../../lib":632,"../../registry":738,"./layout_attributes":765}],767:[function(a,b,c){"use strict";function d(){i=2e9}function e(){var a=i;return i=(69069*i+1)%4294967296,Math.abs(i-a)<429496729?e():i/4294967296}var f=a("d3"),g=a("../../lib"),h=a("../../components/drawing"),i=2e9,j=5,k=.01;b.exports=function(a,b,c){var i,l,m=a._fullLayout,n=b.xaxis,o=b.yaxis,p=b.plot.select(".boxlayer").selectAll("g.trace.boxes").data(c).enter().append("g").attr("class","trace boxes");p.each(function(b){var c=b[0].t,p=b[0].trace,q="group"===m.boxmode&&a.numboxes>1,r=c.dPos*(1-m.boxgap)*(1-m.boxgroupgap)/(q?a.numboxes:1),s=q?2*c.dPos*(-.5+(c.boxnum+.5)/a.numboxes)*(1-m.boxgap):0,t=r*p.whiskerwidth;return p.visible!==!0||c.emptybox?void f.select(this).remove():("h"===p.orientation?(i=o,l=n):(i=n,l=o),c.bPos=s,c.bdPos=r,d(),f.select(this).selectAll("path.box").data(g.identity).enter().append("path").attr("class","box").each(function(a){var b=i.c2p(a.pos+s,!0),c=i.c2p(a.pos+s-r,!0),d=i.c2p(a.pos+s+r,!0),e=i.c2p(a.pos+s-t,!0),h=i.c2p(a.pos+s+t,!0),j=l.c2p(a.q1,!0),k=l.c2p(a.q3,!0),m=g.constrain(l.c2p(a.med,!0),Math.min(j,k)+1,Math.max(j,k)-1),n=l.c2p(p.boxpoints===!1?a.min:a.lf,!0),o=l.c2p(p.boxpoints===!1?a.max:a.uf,!0);"h"===p.orientation?f.select(this).attr("d","M"+m+","+c+"V"+d+"M"+j+","+c+"V"+d+"H"+k+"V"+c+"ZM"+j+","+b+"H"+n+"M"+k+","+b+"H"+o+(0===p.whiskerwidth?"":"M"+n+","+e+"V"+h+"M"+o+","+e+"V"+h)):f.select(this).attr("d","M"+c+","+m+"H"+d+"M"+c+","+j+"H"+d+"V"+k+"H"+c+"ZM"+b+","+j+"V"+n+"M"+b+","+k+"V"+o+(0===p.whiskerwidth?"":"M"+e+","+n+"H"+h+"M"+e+","+o+"H"+h))}),p.boxpoints&&f.select(this).selectAll("g.points").data(function(a){return a.forEach(function(a){a.t=c,a.trace=p}),a}).enter().append("g").attr("class","points").selectAll("path").data(function(a){var b,c,d,f,h,i,l,m="all"===p.boxpoints?a.val:a.val.filter(function(b){return b<a.lf||b>a.uf}),n=Math.max((a.max-a.min)/10,a.q3-a.q1),o=1e-9*n,q=n*k,t=[],u=0;if(p.jitter){if(0===n)for(u=1,t=new Array(m.length),b=0;b<m.length;b++)t[b]=1;else for(b=0;b<m.length;b++)c=Math.max(0,b-j),f=m[c],d=Math.min(m.length-1,b+j),h=m[d],"all"!==p.boxpoints&&(m[b]<a.lf?h=Math.min(h,a.lf):f=Math.max(f,a.uf)),i=Math.sqrt(q*(d-c)/(h-f+o))||0,i=g.constrain(Math.abs(i),0,1),t.push(i),u=Math.max(i,u);l=2*p.jitter/u}return m.map(function(b,c){var d,f=p.pointpos;return p.jitter&&(f+=l*t[c]*(e()-.5)),d="h"===p.orientation?{y:a.pos+f*r+s,x:b}:{x:a.pos+f*r+s,y:b},"suspectedoutliers"===p.boxpoints&&b<a.uo&&b>a.lo&&(d.so=!0),d})}).enter().append("path").call(h.translatePoints,n,o),void(p.boxmean&&f.select(this).selectAll("path.mean").data(g.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(a){var b=i.c2p(a.pos+s,!0),c=i.c2p(a.pos+s-r,!0),d=i.c2p(a.pos+s+r,!0),e=l.c2p(a.mean,!0),g=l.c2p(a.mean-a.sd,!0),h=l.c2p(a.mean+a.sd,!0);"h"===p.orientation?f.select(this).attr("d","M"+e+","+c+"V"+d+("sd"!==p.boxmean?"":"m0,0L"+g+","+b+"L"+e+","+c+"L"+h+","+b+"Z")):f.select(this).attr("d","M"+c+","+e+"H"+d+("sd"!==p.boxmean?"":"m0,0L"+b+","+g+"L"+c+","+e+"L"+b+","+h+"Z"))})))})}},{"../../components/drawing":557,"../../lib":632,d3:95}],768:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../plots/cartesian/axes"),f=a("../../lib");b.exports=function(a,b){var c,g,h,i,j=a._fullLayout,k=b.xaxis,l=b.yaxis,m=["v","h"];for(g=0;g<m.length;++g){var n,o,p,q=m[g],r=[],s=[],t=0,u=0;for(c="h"===q?l:k,h=0;h<a.calcdata.length;++h)n=a.calcdata[h],o=n[0].t,p=n[0].trace,p.visible===!0&&d.traceIs(p,"box")&&!o.emptybox&&p.orientation===q&&p.xaxis===k._id&&p.yaxis===l._id&&(r.push(h),p.boxpoints!==!1&&(t=Math.max(t,p.jitter-p.pointpos-1),u=Math.max(u,p.jitter+p.pointpos-1)));for(h=0;h<r.length;h++)for(n=a.calcdata[r[h]],i=0;i<n.length;i++)s.push(n[i].pos);if(s.length){var v=f.distinctVals(s),w=v.minDiff/2;for(s.length===v.vals.length&&(a.numboxes=1),e.minDtick(c,v.minDiff,v.vals[0],!0),g=0;g<r.length;g++){var x=r[g];a.calcdata[x][0].t.dPos=w}var y=(1-j.boxgap)*(1-j.boxgroupgap)*w/a.numboxes;e.expand(c,v.vals,{vpadminus:w+t*y,vpadplus:w+u*y})}}}},{"../../lib":632,"../../plots/cartesian/axes":662,"../../registry":738}],769:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/color"),f=a("../../components/drawing");b.exports=function(a){var b=d.select(a).selectAll("g.trace.boxes");b.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){var b=a[0].trace,c=b.line.width;d.select(this).selectAll("path.box").style("stroke-width",c+"px").call(e.stroke,b.line.color).call(e.fill,b.fillcolor),d.select(this).selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(e.stroke,b.line.color),d.select(this).selectAll("g.points path").call(f.pointStyle,b)})}},{"../../components/color":533,"../../components/drawing":557,d3:95}],770:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../ohlc/attributes"),f=a("../box/attributes"),g={name:e.increasing.name,showlegend:e.increasing.showlegend,line:{color:d.extendFlat({},f.line.color),width:d.extendFlat({},f.line.width)},fillcolor:d.extendFlat({},f.fillcolor)};b.exports={x:e.x,open:e.open,high:e.high,low:e.low,close:e.close,line:{width:d.extendFlat({},f.line.width,{})},increasing:d.extendDeep({},g,{line:{color:{dflt:e.increasing.line.color.dflt}}}),decreasing:d.extendDeep({},g,{line:{color:{dflt:e.decreasing.line.color.dflt}}}),text:e.text,whiskerwidth:d.extendFlat({},f.whiskerwidth,{dflt:0})}},{"../../lib":632,"../box/attributes":760,"../ohlc/attributes":821}],771:[function(a,b,c){"use strict";function d(a,b,c,d){g(a,b,c,d),c(d+".line.color"),c(d+".line.width",b.line.width),c(d+".fillcolor")}var e=a("../../lib"),f=a("../ohlc/ohlc_defaults"),g=a("../ohlc/direction_defaults"),h=a("../ohlc/helpers"),i=a("./attributes");b.exports=function(a,b){function c(c,d){return e.coerce(a,b,i,c,d)}h.pushDummyTransformOpts(a,b);var g=f(a,b,c);return 0===g?void(b.visible=!1):(c("line.width"),d(a,b,c,"increasing"),d(a,b,c,"decreasing"),c("text"),void c("whiskerwidth"))}},{"../../lib":632,"../ohlc/direction_defaults":823,"../ohlc/helpers":824,"../ohlc/ohlc_defaults":826,"./attributes":770}],772:[function(a,b,c){"use strict";var d=a("../../plot_api/register");b.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults")},d(a("../box")),d(a("./transform"))},{"../../plot_api/register":653,"../../plots/cartesian":671,"../box":764,"./attributes":770,"./defaults":771,"./transform":773}],773:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"box",boxpoints:!1,visible:a.visible,hoverinfo:a.hoverinfo,opacity:a.opacity,xaxis:a.xaxis,yaxis:a.yaxis,transforms:f.makeTransform(a,b,c)},g=a[c];return g&&e.extendFlat(d,{x:a.x||[0],y:[].concat(a.low).concat(a.high),whiskerwidth:a.whiskerwidth,text:a.text,name:g.name,showlegend:g.showlegend,line:g.line,fillcolor:g.fillcolor}),d}var e=a("../../lib"),f=a("../ohlc/helpers");c.moduleType="transform",c.name="candlestick",c.attributes={},c.supplyDefaults=function(a,b,c,d){return f.clearEphemeralTransformOpts(d),f.copyOHLC(a,b),a},c.transform=function(a,b){for(var c=[],e=0;e<a.length;e++){var g=a[e];"candlestick"===g.type?c.push(d(g,b,"increasing"),d(g,b,"decreasing")):c.push(g)}return f.addRangeSlider(b.layout),c},c.calcTransform=function(a,b,c){for(var d=c.direction,e=f.getFilterFn(d),g=b.open,h=b.high,i=b.low,j=b.close,k=g.length,l=[],m=[],n=b._fullInput.x?function(a){var c=b.x[a];l.push(c,c,c,c,c,c)}:function(a){l.push(a,a,a,a,a,a)},o=function(a,b,c,d){m.push(c,a,d,d,d,b)},p=0;p<k;p++)e(g[p],j[p])&&(n(p),o(g[p],h[p],i[p],j[p]));b.x=l,b.y=m}},{"../../lib":632,"../ohlc/helpers":824}],774:[function(a,b,c){"use strict";var d=a("../scattergeo/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../plots/attributes"),g=a("../../lib/extend").extendFlat,h=d.marker.line;b.exports=g({},{locations:{valType:"data_array"},locationmode:d.locationmode,z:{valType:"data_array"},text:{valType:"data_array"},marker:{line:{color:h.color,width:h.width}},hoverinfo:g({},f.hoverinfo,{flags:["location","z","text","name"]}),_nestedModules:{colorbar:"Colorbar"}},e)},{"../../components/colorscale/attributes":539,"../../lib/extend":625,"../../plots/attributes":660,"../scattergeo/attributes":873}],775:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){d(b,b.z,"","z")}},{"../../components/colorscale/calc":540}],776:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/colorscale/defaults"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,e){return d.coerce(a,b,f,c,e)}var i,j=h("locations");if(j&&(i=j.length),!j||!i)return void(b.visible=!1);var k=h("z");return Array.isArray(k)?(k.length>i&&(b.z=k.slice(0,i)),h("locationmode"),h("text"),h("marker.line.color"),h("marker.line.width"),e(a,b,g,h,{prefix:"",cLetter:"z"}),void h("hoverinfo",1===g._dataLength?"location+z+text":void 0)):void(b.visible=!1)}},{"../../components/colorscale/defaults":543,"../../lib":632,"./attributes":774}],777:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../heatmap/colorbar"),d.calc=a("./calc"),d.plot=a("./plot").plot,d.hoverPoints=function(){},d.moduleType="trace",d.name="choropleth",d.basePlotModule=a("../../plots/geo"),d.categories=["geo","noOpacity"],d.meta={},b.exports=d},{"../../plots/geo":687,"../heatmap/colorbar":791,"./attributes":774,"./calc":775,"./defaults":776,"./plot":778}],778:[function(a,b,c){"use strict";function d(a,b){function c(b){var c=a.mockAxis;return g.tickText(c,c.c2l(b),"hover").text}var d=b.hoverinfo;if("none"===d||"skip"===d)return function(a){delete a.nameLabel,delete a.textLabel};var e="all"===d?p.hoverinfo.flags:d.split("+"),f=e.indexOf("name")!==-1,h=e.indexOf("location")!==-1,i=e.indexOf("z")!==-1,j=e.indexOf("text")!==-1,k=!f&&h;return function(a){var d=[];k?a.nameLabel=a.id:(f&&(a.nameLabel=b.name),h&&d.push(a.id)),i&&d.push(c(a.z)),j&&d.push(a.tx),a.textLabel=d.join("<br>")}}function e(a){return function(b,c){return{points:[{data:a._input,fullData:a,curveNumber:a.index,pointNumber:c,location:b.id,z:b.z}]}}}var f=a("d3"),g=a("../../plots/cartesian/axes"),h=a("../../plots/cartesian/graph_interact"),i=a("../../components/color"),j=a("../../components/drawing"),k=a("../../components/colorscale"),l=a("../../lib/topojson_utils").getTopojsonFeatures,m=a("../../lib/geo_location_utils").locationToFeature,n=a("../../lib/array_to_calc_item"),o=a("../../plots/geo/constants"),p=a("./attributes"),q=b.exports={};q.calcGeoJSON=function(a,b){for(var c,d=[],e=a.locations,f=e.length,g=l(a,b),h=(a.marker||{}).line||{},i=0;i<f;i++)c=m(a.locationmode,e[i],g),c&&(c.z=a.z[i],void 0!==a.text&&(c.tx=a.text[i]),n(h.color,c,"mlc",i),n(h.width,c,"mlw",i),d.push(c));return d.length>0&&(d[0].trace=a),d},q.plot=function(a,b,c){function g(a){return a[0].trace.uid}var i,j=a.framework,k=j.select("g.choroplethlayer"),l=j.select("g.baselayer"),m=j.select("g.baselayeroverchoropleth"),n=o.baseLayersOverChoropleth,p=k.selectAll("g.trace.choropleth").data(b,g);p.enter().append("g").attr("class","trace choropleth"),p.exit().remove(),p.each(function(b){function c(b,c){if(a.showHover){var d=a.projection(b.properties.ct);k(b),h.loneHover({x:d[0],y:d[1],name:b.nameLabel,text:b.textLabel},{container:a.hoverContainer.node()}),m=l(b,c),a.graphDiv.emit("plotly_hover",m)}}function g(b,c){a.graphDiv.emit("plotly_click",l(b,c))}var i=b[0].trace,j=q.calcGeoJSON(i,a.topojson),k=d(a,i),l=e(i),m=null,n=f.select(this).selectAll("path.choroplethlocation").data(j);n.enter().append("path").classed("choroplethlocation",!0).on("mouseover",c).on("click",g).on("mouseout",function(){h.loneUnhover(a.hoverContainer),a.graphDiv.emit("plotly_unhover",m)}).on("mousedown",function(){h.loneUnhover(a.hoverContainer)}).on("mouseup",c),n.exit().remove()}),m.selectAll("*").remove();for(var r=0;r<n.length;r++)i=n[r],l.select("g."+i).remove(),a.drawTopo(m,i,c),a.styleLayer(m,i,c);q.style(a)},q.style=function(a){a.framework.selectAll("g.trace.choropleth").each(function(a){var b=a[0].trace,c=f.select(this),d=b.marker||{},e=d.line||{},g=k.makeColorScaleFunc(k.extractScale(b.colorscale,b.zmin,b.zmax));c.selectAll("path.choroplethlocation").each(function(a){f.select(this).attr("fill",function(a){return g(a.z)}).call(i.stroke,a.mlc||e.color).call(j.dashLine,"",a.mlw||e.width)})})}},{"../../components/color":533,"../../components/colorscale":548,"../../components/drawing":557,"../../lib/array_to_calc_item":621,"../../lib/geo_location_utils":628,"../../lib/topojson_utils":647,"../../plots/cartesian/axes":662,"../../plots/cartesian/graph_interact":670,"../../plots/geo/constants":685,"./attributes":774,d3:95}],779:[function(a,b,c){"use strict";var d=a("../heatmap/attributes"),e=a("../scatter/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../lib/extend").extendFlat,h=e.line;b.exports=g({},{z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,connectgaps:d.connectgaps,autocontour:{valType:"boolean",dflt:!0},ncontours:{valType:"integer",dflt:0},contours:{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"number",dflt:null},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill"},showlines:{valType:"boolean",dflt:!0}},line:{color:g({},h.color,{}),width:h.width,dash:h.dash,smoothing:g({},h.smoothing,{})},_nestedModules:{colorbar:"Colorbar"}},f,{autocolorscale:g({},f.autocolorscale,{dflt:!1})})},{"../../components/colorscale/attributes":539,"../../lib/extend":625,"../heatmap/attributes":789,"../scatter/attributes":844}],780:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../heatmap/calc");b.exports=function(a,b){var c=e(a,b),f=b.contours;if(b.autocontour!==!1){var g={type:"linear",range:[b.zmin,b.zmax]};d.autoTicks(g,(b.zmax-b.zmin)/(b.ncontours||15)),f.start=d.tickFirst(g),f.size=g.dtick,g.range.reverse(),f.end=d.tickFirst(g),f.start===b.zmin&&(f.start+=f.size),f.end===b.zmax&&(f.end-=f.size),f.end+=f.size/100,b._input.contours=f}return c}},{"../../plots/cartesian/axes":662,"../heatmap/calc":790}],781:[function(a,b,c){"use strict";var d=a("../../plots/plots"),e=a("../../components/colorbar/draw"),f=a("./make_color_map");b.exports=function(a,b){var c=b[0].trace,g="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+g).remove(),c.showscale===!1)return void d.autoMargin(a,g);var h=e(a,g);b[0].t.cb=h;var i=c.contours,j=c.line,k=i.size||1,l=i.coloring,m=f(c,{isColorbar:!0});"heatmap"===l&&h.filllevels({start:c.zmin,end:c.zmax,size:(c.zmax-c.zmin)/254}),h.fillcolor("fill"===l||"heatmap"===l?m:"").line({color:"lines"===l?m:j.color,width:i.showlines!==!1?j.width:0,dash:j.dash}).levels({start:i.start,end:i.end,size:k}).options(c.colorbar)()}},{"../../components/colorbar/draw":536,"../../plots/plots":723,"./make_color_map":785}],782:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../heatmap/has_columns"),f=a("../heatmap/xyz_defaults"),g=a("../contour/style_defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}var k=f(a,b,j);if(!k)return void(b.visible=!1);j("text"),j("connectgaps",e(b));var l=d.coerce2(a,b,h,"contours.start"),m=d.coerce2(a,b,h,"contours.end"),n=j("autocontour",!(l&&m));j(n?"ncontours":"contours.size"),g(a,b,j,i)}},{"../../lib":632,"../contour/style_defaults":788,"../heatmap/has_columns":794,"../heatmap/xyz_defaults":800,"./attributes":779}],783:[function(a,b,c){"use strict";var d=a("../heatmap/hover");b.exports=function(a,b,c,e){return d(a,b,c,e,!0)}},{"../heatmap/hover":795}],784:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.colorbar=a("./colorbar"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="contour",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","contour"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"./attributes":779,"./calc":780,"./colorbar":781,"./defaults":782,"./hover":783,"./plot":786,"./style":787}],785:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/colorscale");b.exports=function(a){var b,c,f=a.contours,g=f.start,h=f.end,i=f.size||1,j=Math.floor((h+i/10-g)/i)+1,k="lines"===f.coloring?0:1,l=a.colorscale,m=l.length,n=new Array(m),o=new Array(m);if("heatmap"===f.coloring){for(a.zauto&&a.autocontour===!1&&(a.zmin=g-i/2,a.zmax=a.zmin+j*i),c=0;c<m;c++)b=l[c],n[c]=b[0]*(a.zmax-a.zmin)+a.zmin,o[c]=b[1];var p=d.extent([a.zmin,a.zmax,f.start,f.start+i*(j-1)]),q=p[a.zmin<a.zmax?0:1],r=p[a.zmin<a.zmax?1:0];q!==a.zmin&&(n.splice(0,0,q),o.splice(0,0,Range[0])),r!==a.zmax&&(n.push(r),o.push(o[o.length-1]))}else for(c=0;c<m;c++)b=l[c],n[c]=(b[0]*(j+k-1)-k/2)*i+g,o[c]=b[1];return e.makeColorScaleFunc({domain:n,range:o},{noNumericCheck:!0})}},{"../../components/colorscale":548,d3:95}],786:[function(a,b,c){"use strict";function d(a,b,c){var d=c[0].trace,f=c[0].x,h=c[0].y,j=d.contours,k=d.uid,l=b.xaxis,m=b.yaxis,q=a._fullLayout,t="contour"+k,u=e(j,b,c[0]);if(d.visible!==!0)return q._paper.selectAll("."+t+",.hm"+k).remove(),void q._infolayer.selectAll(".cb"+k).remove();"heatmap"===j.coloring?(d.zauto&&d.autocontour===!1&&(d._input.zmin=d.zmin=j.start-j.size/2,d._input.zmax=d.zmax=d.zmin+u.length*j.size),x(a,b,[c])):q._paper.selectAll(".hm"+k).remove(),g(u),i(u);var v=l.c2p(f[0],!0),w=l.c2p(f[f.length-1],!0),y=m.c2p(h[0],!0),z=m.c2p(h[h.length-1],!0),A=[[v,z],[w,z],[w,y],[v,y]],B=n(b,c,t);o(B,A,j),p(B,u,A,j),r(B,u,j),s(B,b,c[0],A)}function e(a,b,c){for(var d=a.size||1,e=[],f=a.start;f<a.end+d/10;f+=d)e.push({level:f,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:c.x,y:c.y,z:c.z,smoothing:c.trace.line.smoothing});return e}function f(a,b){var c=(b[0][0]>a?0:1)+(b[0][1]>a?0:2)+(b[1][1]>a?0:4)+(b[1][0]>a?0:8);if(5===c||10===c){var d=(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4;return a>d?5===c?713:1114:5===c?104:208}return 15===c?0:c}function g(a){var b,c,d,e,g,h,i,j,k,l=a[0].z,m=l.length,n=l[0].length,o=2===m||2===n;for(c=0;c<m-1;c++)for(e=[],0===c&&(e=e.concat(y)),c===m-2&&(e=e.concat(z)),b=0;b<n-1;b++)for(d=e.slice(),0===b&&(d=d.concat(A)),b===n-2&&(d=d.concat(B)),g=b+","+c,h=[[l[c][b],l[c][b+1]],[l[c+1][b],l[c+1][b+1]]],k=0;k<a.length;k++)j=a[k],i=f(j.level,h),i&&(j.crossings[g]=i,d.indexOf(i)!==-1&&(j.starts.push([b,c]),o&&d.indexOf(i,d.indexOf(i)+1)!==-1&&j.starts.push([b,c])))}function h(a,b,c){function d(a){return n[a%n.length]}var e,f=b.join(","),g=f,h=a.crossings[g],i=j(h,c,b),n=[m(a,b,[-i[0],-i[1]])],o=i.join(","),p=a.z.length,q=a.z[0].length;for(e=0;e<1e4;e++){if(h>20?(h=D[h][(i[0]||i[1])<0?0:1],a.crossings[g]=E[h]):delete a.crossings[g],i=C[h],!i){v.log("Found bad marching index:",h,b,a.level);break}if(n.push(m(a,b,i)),b[0]+=i[0],b[1]+=i[1],k(n[n.length-1],n[n.length-2])&&n.pop(),g=b.join(","),g===f&&i.join(",")===o||c&&(i[0]&&(b[0]<0||b[0]>q-2)||i[1]&&(b[1]<0||b[1]>p-2)))break;h=a.crossings[g]}1e4===e&&v.log("Infinite loop in contour?");var r,s,t,u,w,x,y,z=k(n[0],n[n.length-1]),A=0,B=.2*a.smoothing,F=[],G=0;for(e=1;e<n.length;e++)y=l(n[e],n[e-1]),A+=y,F.push(y);var H=A/F.length*B;for(e=n.length-2;e>=G;e--)if(r=F[e],r<H){for(t=0,s=e-1;s>=G&&r+F[s]<H;s--)r+=F[s];if(z&&e===n.length-2)for(t=0;t<s&&r+F[t]<H;t++)r+=F[t];w=e-s+t+1,x=Math.floor((e+s+t+2)/2),u=z||e!==n.length-2?z||s!==-1?w%2?d(x):[(d(x)[0]+d(x+1)[0])/2,(d(x)[1]+d(x+1)[1])/2]:n[0]:n[n.length-1],n.splice(s+1,e-s+1,u),e=s+1,t&&(G=t),z&&(e===n.length-2?n[t]=n[n.length-1]:0===e&&(n[n.length-1]=n[0]))}if(n.splice(0,G),!(n.length<2))if(z)n.pop(),a.paths.push(n);else{c||v.log("Unclosed interior contour?",a.level,f,n.join("L"));var I=!1;a.edgepaths.forEach(function(b,c){if(!I&&k(b[0],n[n.length-1])){n.pop(),I=!0;var d=!1;a.edgepaths.forEach(function(b,e){!d&&k(b[b.length-1],n[0])&&(d=!0,n.splice(0,1),a.edgepaths.splice(c,1),e===c?a.paths.push(n.concat(b)):a.edgepaths[e]=a.edgepaths[e].concat(n,b))}),d||(a.edgepaths[c]=n.concat(b))}}),a.edgepaths.forEach(function(b,c){!I&&k(b[b.length-1],n[0])&&(n.splice(0,1),a.edgepaths[c]=b.concat(n),I=!0)}),I||a.edgepaths.push(n)}}function i(a){var b,c,d,e,f;for(d=0;d<a.length;d++){for(e=a[d],f=0;f<e.starts.length;f++)c=e.starts[f],h(e,c,"edge");for(b=0;Object.keys(e.crossings).length&&b<1e4;)b++,c=Object.keys(e.crossings)[0].split(",").map(Number),h(e,c);1e4===b&&v.log("Infinite loop in contour?")}}function j(a,b,c){var d=0,e=0;return a>20&&b?208===a||1114===a?d=0===c[0]?1:-1:e=0===c[1]?1:-1:y.indexOf(a)!==-1?e=1:A.indexOf(a)!==-1?d=1:z.indexOf(a)!==-1?e=-1:d=-1,[d,e]}function k(a,b){return Math.abs(a[0]-b[0])<.01&&Math.abs(a[1]-b[1])<.01}function l(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)}function m(a,b,c){var d=b[0]+Math.max(c[0],0),e=b[1]+Math.max(c[1],0),f=a.z[e][d],g=a.xaxis,h=a.yaxis;if(c[1]){var i=(a.level-f)/(a.z[e][d+1]-f);return[g.c2p((1-i)*a.x[d]+i*a.x[d+1],!0),h.c2p(a.y[e],!0)]}var j=(a.level-f)/(a.z[e+1][d]-f);return[g.c2p(a.x[d],!0),h.c2p((1-j)*a.y[e]+j*a.y[e+1],!0)]}function n(a,b,c){var d=a.plot.select(".maplayer").selectAll("g.contour."+c).data(b);return d.enter().append("g").classed("contour",!0).classed(c,!0),d.exit().remove(),d}function o(a,b,c){var d=a.selectAll("g.contourbg").data([0]);d.enter().append("g").classed("contourbg",!0);var e=d.selectAll("path").data("fill"===c.coloring?[0]:[]);e.enter().append("path"),e.exit().remove(),e.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function p(a,b,c,d){var e=a.selectAll("g.contourfill").data([0]);e.enter().append("g").classed("contourfill",!0);var f=e.selectAll("path").data("fill"===d.coloring?b:[]);f.enter().append("path"),f.exit().remove(),f.each(function(a){var b=q(a,c);b?u.select(this).attr("d",b).style("stroke","none"):u.select(this).remove()})}function q(a,b){function c(a){return Math.abs(a[1]-b[0][1])<.01}function d(a){return Math.abs(a[1]-b[2][1])<.01}function e(a){return Math.abs(a[0]-b[0][0])<.01}function f(a){return Math.abs(a[0]-b[2][0])<.01}for(var g,h,i,j,k,l,m=a.edgepaths.length||a.z[0][0]<a.level?"":"M"+b.join("L")+"Z",n=0,o=a.edgepaths.map(function(a,b){return b}),p=!0;o.length;){for(l=w.smoothopen(a.edgepaths[n],a.smoothing),m+=p?l:l.replace(/^M/,"L"),o.splice(o.indexOf(n),1),g=a.edgepaths[n][a.edgepaths[n].length-1],j=-1,i=0;i<4;i++){if(!g){v.log("Missing end?",n,a);break}for(c(g)&&!f(g)?h=b[1]:e(g)?h=b[0]:d(g)?h=b[3]:f(g)&&(h=b[2]),k=0;k<a.edgepaths.length;k++){var q=a.edgepaths[k][0];Math.abs(g[0]-h[0])<.01?Math.abs(g[0]-q[0])<.01&&(q[1]-g[1])*(h[1]-q[1])>=0&&(h=q,j=k):Math.abs(g[1]-h[1])<.01?Math.abs(g[1]-q[1])<.01&&(q[0]-g[0])*(h[0]-q[0])>=0&&(h=q,j=k):v.log("endpt to newendpt is not vert. or horz.",g,h,q)}if(g=h,j>=0)break;m+="L"+h}if(j===a.edgepaths.length){v.log("unclosed perimeter path");break}n=j,p=o.indexOf(n)===-1,p&&(n=o[0],m+="Z")}for(n=0;n<a.paths.length;n++)m+=w.smoothclosed(a.paths[n],a.smoothing);return m}function r(a,b,c){var d=b[0].smoothing,e=a.selectAll("g.contourlevel").data(c.showlines===!1?[]:b);e.enter().append("g").classed("contourlevel",!0),e.exit().remove();var f=e.selectAll("path.openline").data(function(a){return a.edgepaths});f.enter().append("path").classed("openline",!0),f.exit().remove(),f.attr("d",function(a){return w.smoothopen(a,d)}).style("stroke-miterlimit",1);var g=e.selectAll("path.closedline").data(function(a){return a.paths});g.enter().append("path").classed("closedline",!0),g.exit().remove(),g.attr("d",function(a){return w.smoothclosed(a,d)}).style("stroke-miterlimit",1)}function s(a,b,c,d){var e="clip"+c.trace.uid,f=b.plot.selectAll("defs").data([0]);f.enter().append("defs");var h=f.selectAll("#"+e).data(c.trace.connectgaps?[]:[0]);if(h.enter().append("clipPath").attr("id",e),h.exit().remove(),c.trace.connectgaps===!1){var j={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:c.x,y:c.y,z:t(c),smoothing:0};g([j]),i([j]);var k=q(j,d),l=h.selectAll("path").data([0]);l.enter().append("path"),l.attr("d",k)}else e=null;a.call(w.setClipUrl,e),b.plot.selectAll(".hm"+c.trace.uid).call(w.setClipUrl,e);
}function t(a){var b,c,d=a.trace._emptypoints,e=[],f=a.z.length,g=a.z[0].length,h=[];for(b=0;b<g;b++)h.push(1);for(b=0;b<f;b++)e.push(h.slice());for(b=0;b<d.length;b++)c=d[b],e[c[0]][c[1]]=0;return a.zmask=e,e}var u=a("d3"),v=a("../../lib"),w=a("../../components/drawing"),x=a("../heatmap/plot");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])};var y=[1,9,13,104,713],z=[4,6,7,104,713],A=[8,12,14,208,1114],B=[2,3,11,208,1114],C=[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],D={104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},E={1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11}},{"../../components/drawing":557,"../../lib":632,"../heatmap/plot":798,d3:95}],787:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/drawing"),f=a("../heatmap/style"),g=a("./make_color_map");b.exports=function(a){var b=d.select(a).selectAll("g.contour");b.style("opacity",function(a){return a.trace.opacity}),b.each(function(a){var b=d.select(this),c=a.trace,f=c.contours,h=c.line,i=f.size||1,j=f.start,k=g(c);b.selectAll("g.contourlevel").each(function(a,b){d.select(this).selectAll("path").call(e.lineGroupStyle,h.width,"lines"===f.coloring?k(j+b*i):h.color,h.dash)}),b.selectAll("g.contourbg path").style("fill",k(j-i/2)),b.selectAll("g.contourfill path").style("fill",function(a,b){return k(j+(b+.5)*i)})}),f(a)}},{"../../components/drawing":557,"../heatmap/style":799,"./make_color_map":785,d3:95}],788:[function(a,b,c){"use strict";var d=a("../../components/colorscale/defaults");b.exports=function(a,b,c,e){var f,g=c("contours.coloring");"fill"===g&&(f=c("contours.showlines")),f!==!1&&("lines"!==g&&c("line.color","#000"),c("line.width",.5),c("line.dash")),c("line.smoothing"),"none"!==(b.contours||{}).coloring&&d(a,b,e,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":543}],789:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../lib/extend").extendFlat;b.exports=f({},{z:{valType:"data_array"},x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:{valType:"data_array"},transpose:{valType:"boolean",dflt:!1},xtype:{valType:"enumerated",values:["array","scaled"]},ytype:{valType:"enumerated",values:["array","scaled"]},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1},connectgaps:{valType:"boolean",dflt:!1},xgap:{valType:"number",dflt:0,min:0},ygap:{valType:"number",dflt:0,min:0},_nestedModules:{colorbar:"Colorbar"}},e,{autocolorscale:f({},e.autocolorscale,{dflt:!1})})},{"../../components/colorscale/attributes":539,"../../lib/extend":625,"../scatter/attributes":844}],790:[function(a,b,c){"use strict";function d(a){function b(a){if(j(a))return+a}var c,d,e,f,g,h,i=a.z;if(a.transpose){for(c=0,g=0;g<i.length;g++)c=Math.max(c,i[g].length);if(0===c)return!1;e=function(a){return a.length},f=function(a,b,c){return a[c][b]}}else c=i.length,e=function(a,b){return a[b].length},f=function(a,b,c){return a[b][c]};var k=new Array(c);for(g=0;g<c;g++)for(d=e(i,g),k[g]=new Array(d),h=0;h<d;h++)k[g][h]=b(f(i,g,h));return k}function e(a,b,c,d,e,f){var g,h,i,j=[],l=k.traceIs(a,"contour"),m=k.traceIs(a,"histogram"),n=k.traceIs(a,"gl2d"),o=Array.isArray(b)&&b.length>1;if(o&&!m&&"category"!==f.type){b=b.map(f.d2c);var p=b.length;if(!(p<=e))return l?b.slice(0,e):b.slice(0,e+1);if(l||n)j=b.slice(0,e);else if(1===e)j=[b[0]-.5,b[0]+.5];else{for(j=[1.5*b[0]-.5*b[1]],i=1;i<p;i++)j.push(.5*(b[i-1]+b[i]));j.push(1.5*b[p-1]-.5*b[p-2])}if(p<e){var q=j[j.length-1],r=q-j[j.length-2];for(i=p;i<e;i++)q+=r,j.push(q)}}else for(h=d||1,g=m||"category"===f.type?c||0:Array.isArray(b)&&1===b.length?b[0]:void 0===c?0:f.d2c(c),i=l||n?0:-.5;i<e;i++)j.push(g+h*i);return j}function f(a){return.5-.25*Math.min(1,.5*a)}function g(a,b,c){var d,e,g=1;if(Array.isArray(c))for(d=0;d<b.length;d++)e=b[d],a[e[0]][e[1]]=c[e[0]][e[1]];else i(a,b);for(d=0;d<b.length&&!(b[d][2]<4);d++);for(b=b.slice(d),d=0;d<100&&g>s;d++)g=i(a,b,f(g));return g>s&&l.log("interp2d didn't converge quickly",g),a}function h(a){var b,c,d,e,f,g,h,i,j=[],k={},l=[],m=a[0],n=[],o=[0,0,0],p=r(a);for(c=0;c<a.length;c++)for(b=n,n=m,m=a[c+1]||[],d=0;d<p;d++)void 0===n[d]&&(g=(void 0!==n[d-1]?1:0)+(void 0!==n[d+1]?1:0)+(void 0!==b[d]?1:0)+(void 0!==m[d]?1:0),g?(0===c&&g++,0===d&&g++,c===a.length-1&&g++,d===n.length-1&&g++,g<4&&(k[[c,d]]=[c,d,g]),j.push([c,d,g])):l.push([c,d]));for(;l.length;){for(h={},i=!1,f=l.length-1;f>=0;f--)e=l[f],c=e[0],d=e[1],g=((k[[c-1,d]]||o)[2]+(k[[c+1,d]]||o)[2]+(k[[c,d-1]]||o)[2]+(k[[c,d+1]]||o)[2])/20,g&&(h[e]=[c,d,g],l.splice(f,1),i=!0);if(!i)throw"findEmpties iterated with no new neighbors";for(e in h)k[e]=h[e],j.push(h[e])}return j.sort(function(a,b){return b[2]-a[2]})}function i(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=0;for(g=0;g<b.length;g++){for(d=b[g],e=d[0],f=d[1],n=a[e][f],m=0,l=0,h=0;h<4;h++)i=t[h],j=a[e+i[0]],j&&(k=j[f+i[1]],void 0!==k&&(0===m?o=p=k:(o=Math.min(o,k),p=Math.max(p,k)),l++,m+=k));if(0===l)throw"iterateInterp2d order is wrong: no defined neighbors";a[e][f]=m/l,void 0===n?l<4&&(q=1):(a[e][f]=(1+c)*a[e][f]-c*n,p>o&&(q=Math.max(q,Math.abs(a[e][f]-n)/(p-o))))}return q}var j=a("fast-isnumeric"),k=a("../../registry"),l=a("../../lib"),m=a("../../plots/cartesian/axes"),n=a("../histogram2d/calc"),o=a("../../components/colorscale/calc"),p=a("./has_columns"),q=a("./convert_column_xyz"),r=a("./max_row_length");b.exports=function(a,b){function c(a){C=b._input.zsmooth=b.zsmooth=!1,l.notifier("cannot fast-zsmooth: "+a)}var f,i,j,s,t,u,v,w,x=m.getFromId(a,b.xaxis||"x"),y=m.getFromId(a,b.yaxis||"y"),z=k.traceIs(b,"contour"),A=k.traceIs(b,"histogram"),B=k.traceIs(b,"gl2d"),C=z?"best":b.zsmooth;if(x._minDtick=0,y._minDtick=0,A){var D=n(a,b);f=D.x,i=D.x0,j=D.dx,s=D.y,t=D.y0,u=D.dy,v=D.z}else p(b)&&q(b,x,y),f=b.x?x.makeCalcdata(b,"x"):[],s=b.y?y.makeCalcdata(b,"y"):[],i=b.x0||0,j=b.dx||1,t=b.y0||0,u=b.dy||1,v=d(b),(z||b.connectgaps)&&(b._emptypoints=h(v),b._interpz=g(v,b._emptypoints,b._interpz));if("fast"===C)if("log"===x.type||"log"===y.type)c("log axis found");else if(!A){if(f.length){var E=(f[f.length-1]-f[0])/(f.length-1),F=Math.abs(E/100);for(w=0;w<f.length-1;w++)if(Math.abs(f[w+1]-f[w]-E)>F){c("x scale is not linear");break}}if(s.length&&"fast"===C){var G=(s[s.length-1]-s[0])/(s.length-1),H=Math.abs(G/100);for(w=0;w<s.length-1;w++)if(Math.abs(s[w+1]-s[w]-G)>H){c("y scale is not linear");break}}}var I=r(v),J="scaled"===b.xtype?"":b.x,K=e(b,J,i,j,I,x),L="scaled"===b.ytype?"":b.y,M=e(b,L,t,u,v.length,y);B||(m.expand(x,K),m.expand(y,M));var N={x:K,y:M,z:v};if(o(b,v,"","z"),z&&b.contours&&"heatmap"===b.contours.coloring){var O="contour"===b.type?"heatmap":"histogram2d";N.xfill=e(O,J,i,j,I,x),N.yfill=e(O,L,t,u,v.length,y)}return[N]};var s=.01,t=[[-1,0],[1,0],[0,-1],[0,1]]},{"../../components/colorscale/calc":540,"../../lib":632,"../../plots/cartesian/axes":662,"../../registry":738,"../histogram2d/calc":810,"./convert_column_xyz":792,"./has_columns":794,"./max_row_length":797,"fast-isnumeric":104}],791:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.zmin,k=c.zmax;if(d(j)||(j=e.aggNums(Math.min,null,c.z)),d(k)||(k=e.aggNums(Math.max,null,c.z)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var l=b[0].t.cb=h(a,i),m=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});l.fillcolor(m).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":536,"../../components/colorscale":548,"../../lib":632,"../../plots/plots":723,"fast-isnumeric":104}],792:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c){var e,f=a.x.slice(),g=a.y.slice(),h=a.z,i=a.text,j=Math.min(f.length,g.length,h.length),k=void 0!==i&&!Array.isArray(i[0]);for(j<f.length&&(f=f.slice(0,j)),j<g.length&&(g=g.slice(0,j)),e=0;e<j;e++)f[e]=b.d2c(f[e]),g[e]=c.d2c(g[e]);var l,m,n,o=d.distinctVals(f),p=o.vals,q=d.distinctVals(g),r=q.vals,s=d.init2dArray(r.length,p.length);for(k&&(n=d.init2dArray(r.length,p.length)),e=0;e<j;e++)l=d.findBin(f[e]+o.minDiff/2,p),m=d.findBin(g[e]+q.minDiff/2,r),s[m][l]=h[e],k&&(n[m][l]=i[e]);a.x=p,a.y=r,a.z=s,k&&(a.text=n)}},{"../../lib":632}],793:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./has_columns"),f=a("./xyz_defaults"),g=a("../../components/colorscale/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}var k=f(a,b,j);if(!k)return void(b.visible=!1);j("text");var l=j("zsmooth");l===!1&&(j("xgap"),j("ygap")),j("connectgaps",e(b)&&b.zsmooth!==!1),g(a,b,i,j,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":543,"../../lib":632,"./attributes":789,"./has_columns":794,"./xyz_defaults":800}],794:[function(a,b,c){"use strict";b.exports=function(a){return!Array.isArray(a.z[0])}},{}],795:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/graph_interact"),e=a("../../lib"),f=a("../../plots/cartesian/constants").MAXDIST;b.exports=function(a,b,c,g,h){if(!(a.distance<f)){var i,j,k,l,m=a.cd[0],n=m.trace,o=a.xa,p=a.ya,q=m.x,r=m.y,s=m.z,t=m.zmask,u=q,v=r;if(a.index!==!1){try{k=Math.round(a.index[1]),l=Math.round(a.index[0])}catch(b){return void e.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index)}if(k<0||k>=s[0].length||l<0||l>s.length)return}else{if(d.inbox(b-q[0],b-q[q.length-1])>f||d.inbox(c-r[0],c-r[r.length-1])>f)return;if(h){var w;for(u=[2*q[0]-q[1]],w=1;w<q.length;w++)u.push((q[w]+q[w-1])/2);for(u.push([2*q[q.length-1]-q[q.length-2]]),v=[2*r[0]-r[1]],w=1;w<r.length;w++)v.push((r[w]+r[w-1])/2);v.push([2*r[r.length-1]-r[r.length-2]])}k=Math.max(0,Math.min(u.length-2,e.findBin(b,u))),l=Math.max(0,Math.min(v.length-2,e.findBin(c,v)))}var x=o.c2p(q[k]),y=o.c2p(q[k+1]),z=p.c2p(r[l]),A=p.c2p(r[l+1]);h?(y=x,i=q[k],A=z,j=r[l]):(i=(q[k]+q[k+1])/2,j=(r[l]+r[l+1])/2,n.zsmooth&&(x=y=(x+y)/2,z=A=(z+A)/2));var B=s[l][k];t&&!t[l][k]&&(B=void 0);var C;return Array.isArray(n.text)&&Array.isArray(n.text[l])&&(C=n.text[l][k]),[e.extendFlat(a,{index:[l,k],distance:f+10,x0:x,x1:y,y0:z,y1:A,xLabelVal:i,yLabelVal:j,zLabelVal:B,text:C})]}}},{"../../lib":632,"../../plots/cartesian/constants":668,"../../plots/cartesian/graph_interact":670}],796:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="heatmap",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"./attributes":789,"./calc":790,"./colorbar":791,"./defaults":793,"./hover":795,"./plot":798,"./style":799}],797:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,a[c].length);return b}},{}],798:[function(a,b,c){"use strict";function d(a,b,c){function d(a,b){var c=b.length-2,d=g.constrain(g.findBin(a,b),0,c),e=b[d],f=b[d+1],h=g.constrain(d+(a-e)/(f-e)-.5,0,c),i=Math.round(h),j=Math.abs(h-i);return h&&h!==c&&j?{bin0:i,frac:j,bin1:Math.round(i+j/(h-i))}:{bin0:i,bin1:i,frac:0}}function k(a,b,c,d,e,f,g,h,i){var j={x0:b,x1:c,y0:d,y1:e},k=2*a.xgap/3,l=2*a.ygap/3,m=a.xgap/3,n=a.ygap/3;return h===i-1&&(j.y1=e-l),f===g-1&&(j.x0=b+k),0===h&&(j.y0=d+l),0===f&&(j.x1=c-k),f>0&&f<g-1&&(j.x0=b+m,j.x1=c-m),h>0&&h<i-1&&(j.y0=d+n,j.y1=e-n),j}function l(a,b){if(void 0!==a){var c=U(a);return c[0]=Math.round(c[0]),c[1]=Math.round(c[1]),c[2]=Math.round(c[2]),ea+=b,fa+=c[0]*b,ga+=c[1]*b,ha+=c[2]*b,c}return[0,0,0,0]}function m(a,b,c){a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=Math.round(255*c[3])}function n(a,b,c,d){var e=a[c.bin0];if(void 0===e)return l(void 0,1);var f,g=a[c.bin1],h=b[c.bin0],i=b[c.bin1],j=g-e||0,k=h-e||0;return f=void 0===g?void 0===i?0:void 0===h?2*(i-e):2*(2*i-h-e)/3:void 0===i?void 0===h?0:2*(2*e-g-h)/3:void 0===h?2*(2*i-g-e)/3:i+e-g-h,l(e+c.frac*j+d.frac*(k+c.frac*f))}var o=c[0].trace,p=o.uid,q=b.xaxis,r=b.yaxis,s=a._fullLayout,t="hm"+p;if(s._paper.selectAll(".contour"+p).remove(),o.visible!==!0)return s._paper.selectAll("."+t).remove(),void s._infolayer.selectAll(".cb"+p).remove();var u,v,w,x,y,z,A=c[0].z,B=c[0].x,C=c[0].y,D=f.traceIs(o,"contour"),E=D?"best":o.zsmooth,F=A.length,G=j(A),H=!1,I=!1;for(z=0;void 0===u&&z<B.length-1;)u=q.c2p(B[z]),z++;for(z=B.length-1;void 0===v&&z>0;)v=q.c2p(B[z]),z--;for(v<u&&(w=v,v=u,u=w,H=!0),z=0;void 0===x&&z<C.length-1;)x=r.c2p(C[z]),z++;for(z=C.length-1;void 0===y&&z>0;)y=r.c2p(C[z]),z--;if(y<x&&(w=x,x=y,y=w,I=!0),D&&(B=c[0].xfill,C=c[0].yfill),"fast"!==E){var J="best"===E?0:.5;u=Math.max(-J*q._length,u),v=Math.min((1+J)*q._length,v),x=Math.max(-J*r._length,x),y=Math.min((1+J)*r._length,y)}var K=Math.round(v-u),L=Math.round(y-x),M=K<=0||L<=0,N=b.plot.select(".imagelayer").selectAll("g.hm."+t).data(M?[]:[0]);if(N.enter().append("g").classed("hm",!0).classed(t,!0),N.exit().remove(),!M){var O,P;"fast"===E?(O=G,P=F):(O=K,P=L);var Q=document.createElement("canvas");Q.width=O,Q.height=P;var R,S,T=Q.getContext("2d"),U=h.makeColorScaleFunc(h.extractScale(o.colorscale,o.zmin,o.zmax),{noNumericCheck:!0,returnArray:!0});"fast"===E?(R=H?function(a){return G-1-a}:g.identity,S=I?function(a){return F-1-a}:g.identity):(R=function(a){return g.constrain(Math.round(q.c2p(B[a])-u),0,K)},S=function(a){return g.constrain(Math.round(r.c2p(C[a])-x),0,L)});var V,W,X,Y,Z,$,_,aa=S(0),ba=[aa,aa],ca=H?0:1,da=I?0:1,ea=0,fa=0,ga=0,ha=0;if(E){var ia=0,ja=new Uint8Array(K*L*4);if("best"===E){var ka,la,ma,na=new Array(B.length),oa=new Array(C.length),pa=new Array(K);for(z=0;z<B.length;z++)na[z]=Math.round(q.c2p(B[z])-u);for(z=0;z<C.length;z++)oa[z]=Math.round(r.c2p(C[z])-x);for(z=0;z<K;z++)pa[z]=d(z,na);for(X=0;X<L;X++)for(ka=d(X,oa),la=A[ka.bin0],ma=A[ka.bin1],z=0;z<K;z++,ia+=4)_=n(la,ma,pa[z],ka),m(ja,ia,_)}else for(X=0;X<F;X++)for($=A[X],ba=S(X),z=0;z<K;z++)_=l($[z],1),ia=4*(ba*K+R(z)),m(ja,ia,_);var qa=T.createImageData(K,L);qa.data.set(ja),T.putImageData(qa,0,0)}else for(X=0;X<F;X++)if($=A[X],ba.reverse(),ba[da]=S(X+1),ba[0]!==ba[1]&&void 0!==ba[0]&&void 0!==ba[1])for(Y=R(0),W=[Y,Y],z=0;z<G;z++)W.reverse(),W[ca]=R(z+1),W[0]!==W[1]&&void 0!==W[0]&&void 0!==W[1]&&(Z=$[z],_=l(Z,(W[1]-W[0])*(ba[1]-ba[0])),T.fillStyle="rgba("+_.join(",")+")",V=k(o,W[0],W[1],ba[0],ba[1],z,G,X,F),T.fillRect(V.x0,V.y0,V.x1-V.x0,V.y1-V.y0));fa=Math.round(fa/ea),ga=Math.round(ga/ea),ha=Math.round(ha/ea);var ra=e("rgb("+fa+","+ga+","+ha+")");a._hmpixcount=(a._hmpixcount||0)+ea,a._hmlumcount=(a._hmlumcount||0)+ea*ra.getLuminance();var sa=N.selectAll("image").data(c);sa.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),sa.attr({height:L,width:K,x:u,y:x,"xlink:href":Q.toDataURL("image/png")}),sa.exit().remove()}}var e=a("tinycolor2"),f=a("../../registry"),g=a("../../lib"),h=a("../../components/colorscale"),i=a("../../constants/xmlns_namespaces"),j=a("./max_row_length");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])}},{"../../components/colorscale":548,"../../constants/xmlns_namespaces":618,"../../lib":632,"../../registry":738,"./max_row_length":797,tinycolor2:489}],799:[function(a,b,c){"use strict";var d=a("d3");b.exports=function(a){d.select(a).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},{d3:95}],800:[function(a,b,c){"use strict";function d(a,b){var c=b(a),d=c?b(a+"type","array"):"scaled";return"scaled"===d&&(b(a+"0"),b("d"+a)),c}function e(a){for(var b,c=!0,d=!1,e=!1,g=0;g<a.length;g++){if(b=a[g],!Array.isArray(b)){c=!1;break}b.length>0&&(d=!0);for(var h=0;h<b.length;h++)if(f(b[h])){e=!0;break}}return c&&d&&e}var f=a("fast-isnumeric"),g=a("./has_columns");b.exports=function(a,b,c){var f,h,i=c("z");if(void 0===i||!i.length)return 0;if(g(a)){if(f=c("x"),h=c("y"),!f||!h)return 0}else{if(f=d("x",c),h=d("y",c),!e(i))return 0;c("transpose")}return b.z.length}},{"./has_columns":794,"fast-isnumeric":104}],801:[function(a,b,c){"use strict";function d(a){return{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"any",dflt:1}}}var e=a("../bar/attributes");b.exports={x:{valType:"data_array"},y:{valType:"data_array"},text:e.text,orientation:e.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:""},autobinx:{valType:"boolean",dflt:!0},nbinsx:{valType:"integer",min:0,dflt:0},xbins:d("x"),autobiny:{valType:"boolean",dflt:!0},nbinsy:{valType:"integer",min:0,dflt:0},ybins:d("y"),marker:e.marker,_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:e._deprecated.bardir}}},{"../bar/attributes":748}],802:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c=a.length,d=0,e=0;e<c;e++)b[e]?(a[e]/=b[e],d+=a[e]):a[e]=null;return d}},{}],803:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){return c("histnorm"),d.forEach(function(a){var b=c(a+"bins.start"),d=c(a+"bins.end"),e=c("autobin"+a,!(b&&d));c(e?"nbins"+a:a+"bins.size")}),b}},{}],804:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports={count:function(a,b,c){return c[a]++,1},sum:function(a,b,c,e){var f=e[b];return d(f)?(f=Number(f),c[a]+=f,f):0},avg:function(a,b,c,e,f){var g=e[b];return d(g)&&(g=Number(g),c[a]+=g,f[a]++),0},min:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]>f)return c[a]=f,f-c[a]}return 0},max:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]<f)return c[a]=f,f-c[a]}return 0}}},{"fast-isnumeric":104}],805:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("./bin_functions"),h=a("./norm_functions"),i=a("./average");b.exports=function(a,b){if(b.visible===!0){var c,j=[],k=[],l=f.getFromId(a,"h"===b.orientation?b.yaxis||"y":b.xaxis||"x"),m="h"===b.orientation?"y":"x",n={x:"y",y:"x"}[m],o=l.makeCalcdata(b,m);b["autobin"+m]===!1&&m+"bins"in b||(b[m+"bins"]=f.autoBin(o,l,b["nbins"+m]),b._input[m+"bins"]=b[m+"bins"]);var p,q,r,s,t=b[m+"bins"],u="string"==typeof t.size,v=u?[]:t,w=[],x=[],y=0,z=b.histnorm,A=b.histfunc,B=z.indexOf("density")!==-1,C="max"===A||"min"===A,D=C?null:0,E=g.count,F=h[z],G=!1;for(Array.isArray(b[n])&&"count"!==A&&(s=b[n],G="avg"===A,E=g[A]),c=t.start,q=t.end+(t.start-f.tickIncrement(t.start,t.size))/1e6;c<q&&j.length<5e3;)p=f.tickIncrement(c,t.size),j.push((c+p)/2),k.push(D),u&&v.push(c),B&&w.push(1/(p-c)),G&&x.push(0),c=p;var H=k.length;for(c=0;c<o.length;c++)r=e.findBin(o[c],v),r>=0&&r<H&&(y+=E(r,c,k,s,x));G&&(y=i(k,x)),F&&F(k,y,w);var I=Math.min(j.length,k.length),J=[],K=0,L=I-1;for(c=0;c<I;c++)if(k[c]){K=c;break}for(c=I-1;c>K;c--)if(k[c]){L=c;break}for(c=K;c<=L;c++)d(j[c])&&d(k[c])&&J.push({p:j[c],s:k[c],b:0});return J}}},{"../../lib":632,"../../plots/cartesian/axes":662,"./average":802,"./bin_functions":804,"./norm_functions":808,"fast-isnumeric":104}],806:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("./bin_defaults"),g=a("../bar/style_defaults"),h=a("../../components/errorbars/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=k("x"),m=k("y");k("text");var n=k("orientation",m&&!l?"h":"v"),o=b["v"===n?"x":"y"];if(!o||!o.length)return void(b.visible=!1);var p=b["h"===n?"x":"y"];p&&k("histfunc");var q="h"===n?["y"]:["x"];f(a,b,k,q),g(a,b,k,c,j),h(a,b,e.defaultLine,{axis:"y"}),h(a,b,e.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":533,"../../components/errorbars/defaults":562,"../../lib":632,"../bar/style_defaults":759,"./attributes":801,"./bin_defaults":803}],807:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("../bar/layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("../bar/layout_defaults"),d.calc=a("./calc"),d.setPositions=a("../bar/set_positions"),d.plot=a("../bar/plot"),d.style=a("../bar/style"),d.colorbar=a("../scatter/colorbar"),d.hoverPoints=a("../bar/hover"),d.moduleType="trace",d.name="histogram",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"../bar/hover":751,"../bar/layout_attributes":753,"../bar/layout_defaults":754,"../bar/plot":755,"../bar/set_positions":756,"../bar/style":758,"../scatter/colorbar":847,"./attributes":801,"./calc":805,"./defaults":806}],808:[function(a,b,c){"use strict";b.exports={percent:function(a,b){for(var c=a.length,d=100/b,e=0;e<c;e++)a[e]*=d},probability:function(a,b){for(var c=a.length,d=0;d<c;d++)a[d]/=b},density:function(a,b,c,d){var e=a.length;d=d||1;for(var f=0;f<e;f++)a[f]*=c[f]*d},"probability density":function(a,b,c,d){var e=a.length;d&&(b/=d);for(var f=0;f<e;f++)a[f]*=c[f]/b}}},{}],809:[function(a,b,c){"use strict";var d=a("../histogram/attributes"),e=a("../heatmap/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../lib/extend").extendFlat;b.exports=g({},{x:d.x,y:d.y,z:{valType:"data_array"},marker:{color:{valType:"data_array"}},histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,xgap:e.xgap,ygap:e.ygap,zsmooth:e.zsmooth,_nestedModules:{colorbar:"Colorbar"}},f,{autocolorscale:g({},f.autocolorscale,{dflt:!1})})},{"../../components/colorscale/attributes":539,"../../lib/extend":625,"../heatmap/attributes":789,"../histogram/attributes":801}],810:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("../histogram/bin_functions"),g=a("../histogram/norm_functions"),h=a("../histogram/average");b.exports=function(a,b){var c,i,j,k,l,m,n=e.getFromId(a,b.xaxis||"x"),o=b.x?n.makeCalcdata(b,"x"):[],p=e.getFromId(a,b.yaxis||"y"),q=b.y?p.makeCalcdata(b,"y"):[],r=Math.min(o.length,q.length);o.length>r&&o.splice(r,o.length-r),q.length>r&&q.splice(r,q.length-r),!b.autobinx&&"xbins"in b||(b.xbins=e.autoBin(o,n,b.nbinsx,"2d"),"histogram2dcontour"===b.type&&(b.xbins.start-=b.xbins.size,b.xbins.end+=b.xbins.size),b._input.xbins=b.xbins),!b.autobiny&&"ybins"in b||(b.ybins=e.autoBin(q,p,b.nbinsy,"2d"),"histogram2dcontour"===b.type&&(b.ybins.start-=b.ybins.size,b.ybins.end+=b.ybins.size),b._input.ybins=b.ybins),l=[];var s,t,u=[],v=[],w="string"==typeof b.xbins.size?[]:b.xbins,x="string"==typeof b.xbins.size?[]:b.ybins,y=0,z=[],A=b.histnorm,B=b.histfunc,C=A.indexOf("density")!==-1,D="max"===B||"min"===B,E=D?null:0,F=f.count,G=g[A],H=!1,I=[],J=[],K="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";K&&"count"!==B&&(H="avg"===B,F=f[B]);var L=b.xbins,M=L.end+(L.start-e.tickIncrement(L.start,L.size))/1e6;for(m=L.start;m<M;m=e.tickIncrement(m,L.size))u.push(E),Array.isArray(w)&&w.push(m),H&&v.push(0);Array.isArray(w)&&w.push(m);var N=u.length;for(c=b.xbins.start,i=(m-c)/N,c+=i/2,L=b.ybins,M=L.end+(L.start-e.tickIncrement(L.start,L.size))/1e6,m=L.start;m<M;m=e.tickIncrement(m,L.size))l.push(u.concat()),Array.isArray(x)&&x.push(m),H&&z.push(v.concat());Array.isArray(x)&&x.push(m);var O=l.length;for(j=b.ybins.start,k=(m-j)/O,j+=k/2,C&&(I=u.map(function(a,b){return Array.isArray(w)?1/(w[b+1]-w[b]):1/i}),J=l.map(function(a,b){return Array.isArray(x)?1/(x[b+1]-x[b]):1/k})),m=0;m<r;m++)s=d.findBin(o[m],w),t=d.findBin(q[m],x),s>=0&&s<N&&t>=0&&t<O&&(y+=F(s,m,l[t],K,z[t]));if(H)for(t=0;t<O;t++)y+=h(l[t],z[t]);if(G)for(t=0;t<O;t++)G(l[t],y,I,J[t]);return{x:o,x0:c,dx:i,y:q,y0:j,dy:k,z:l}}},{"../../lib":632,"../../plots/cartesian/axes":662,"../histogram/average":802,"../histogram/bin_functions":804,"../histogram/norm_functions":808}],811:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./sample_defaults"),f=a("../../components/colorscale/defaults"),g=a("./attributes");b.exports=function(a,b,c){function h(c,e){return d.coerce(a,b,g,c,e)}e(a,b,h);var i=h("zsmooth");i===!1&&(h("xgap"),h("ygap")),f(a,b,c,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":543,"../../lib":632,"./attributes":809,"./sample_defaults":813}],812:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../heatmap/calc"),d.plot=a("../heatmap/plot"),d.colorbar=a("../heatmap/colorbar"),d.style=a("../heatmap/style"),d.hoverPoints=a("../heatmap/hover"),d.moduleType="trace",d.name="histogram2d",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","histogram"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"../heatmap/calc":790,"../heatmap/colorbar":791,"../heatmap/hover":795,"../heatmap/plot":798,"../heatmap/style":799,"./attributes":809,"./defaults":811}],813:[function(a,b,c){"use strict";var d=a("../histogram/bin_defaults");b.exports=function(a,b,c){var e=c("x"),f=c("y");if(!(e&&e.length&&f&&f.length))return void(b.visible=!1);var g=c("z")||c("marker.color");g&&c("histfunc");var h=["x","y"];d(a,b,c,h)}},{"../histogram/bin_defaults":803}],814:[function(a,b,c){"use strict";var d=a("../histogram2d/attributes"),e=a("../contour/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../lib/extend").extendFlat;b.exports=g({},{x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,autocontour:e.autocontour,ncontours:e.ncontours,contours:e.contours,line:e.line,_nestedModules:{colorbar:"Colorbar"}},f)},{"../../components/colorscale/attributes":539,"../../lib/extend":625,"../contour/attributes":779,"../histogram2d/attributes":809}],815:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../histogram2d/sample_defaults"),f=a("../contour/style_defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,e){return d.coerce(a,b,g,c,e)}e(a,b,i);var j=d.coerce2(a,b,g,"contours.start"),k=d.coerce2(a,b,g,"contours.end"),l=i("autocontour",!(j&&k));i(l?"ncontours":"contours.size"),f(a,b,i,h)}},{"../../lib":632,"../contour/style_defaults":788,"../histogram2d/sample_defaults":813,"./attributes":814}],816:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../contour/calc"),d.plot=a("../contour/plot"),d.style=a("../contour/style"),d.colorbar=a("../contour/colorbar"),d.hoverPoints=a("../contour/hover"),d.moduleType="trace",d.name="histogram2dcontour",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","contour","histogram"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"../contour/calc":780,"../contour/colorbar":781,"../contour/hover":783,"../contour/plot":786,"../contour/style":787,"./attributes":814,"./defaults":815}],817:[function(a,b,c){"use strict";var d=a("../../components/colorscale/attributes"),e=a("../surface/attributes"),f=a("../../lib/extend").extendFlat;b.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},i:{valType:"data_array"},j:{valType:"data_array"},k:{valType:"data_array"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z"},alphahull:{valType:"number",dflt:-1},intensity:{valType:"data_array"},color:{valType:"color"},vertexcolor:{valType:"data_array"},facecolor:{valType:"data_array"},opacity:f({},e.opacity),flatshading:{valType:"boolean",dflt:!1},contour:{show:f({},e.contours.x.show,{}),color:f({},e.contours.x.color),width:f({},e.contours.x.width)},colorscale:d.colorscale,reversescale:d.reversescale,showscale:d.showscale,lightposition:{x:f({},e.lightposition.x,{dflt:1e5}),y:f({},e.lightposition.y,{dflt:1e5}),z:f({},e.lightposition.z,{dflt:0})},lighting:f({},{vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6}},e.lighting),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":539,"../../lib/extend":625,"../surface/attributes":900}],818:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.mesh=b,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function e(a){return a.map(function(a){var b=a[0],c=j(a[1]),d=c.toRgb();return{index:b,rgb:[d.r,d.g,d.b,1]}})}function f(a){return a.map(n)}function g(a,b,c){for(var d=new Array(a.length),e=0;e<a.length;++e)d[e]=[a[e],b[e],c[e]];return d}function h(a,b){var c=a.glplot.gl,e=i({gl:c}),f=new d(a,e,b.uid);return f.update(b),a.glplot.add(e),f}var i=a("gl-mesh3d"),j=a("tinycolor2"),k=a("delaunay-triangulate"),l=a("alpha-shape"),m=a("convex-hull"),n=a("../../lib/str2rgbarray"),o=d.prototype;o.handlePick=function(a){if(a.object===this.mesh){var b=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},o.update=function(a){function b(a,b,c){return b.map(function(b){return a.d2l(b)*c})}var c=this.scene,d=c.fullSceneLayout;this.data=a;var h,i=g(b(d.xaxis,a.x,c.dataScale[0]),b(d.yaxis,a.y,c.dataScale[1]),b(d.zaxis,a.z,c.dataScale[2]));if(a.i&&a.j&&a.k)h=g(a.i,a.j,a.k);else if(0===a.alphahull)h=m(i);else if(a.alphahull>0)h=l(a.alphahull,i);else{var j=["x","y","z"].indexOf(a.delaunayaxis);h=k(i.map(function(a){return[a[(j+1)%3],a[(j+2)%3]]}))}var o={positions:i,cells:h,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:n(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(this.color="#fff",o.vertexIntensity=a.intensity,o.colormap=e(a.colorscale)):a.vertexcolor?(this.color=a.vertexcolors[0],o.vertexColors=f(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],o.cellColors=f(a.facecolor)):(this.color=a.color,o.meshColor=n(a.color)),this.mesh.update(o)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},b.exports=h},{"../../lib/str2rgbarray":645,"alpha-shape":32,"convex-hull":84,"delaunay-triangulate":96,"gl-mesh3d":173,tinycolor2:489}],819:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/colorbar/defaults"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,e){return d.coerce(a,b,f,c,e)}function i(a){var b=a.map(function(a){var b=h(a);return b&&Array.isArray(b)?b:null});return b.every(function(a){return a&&a.length===b[0].length})&&b}var j=i(["x","y","z"]),k=i(["i","j","k"]);return j?(k&&k.forEach(function(a){for(var b=0;b<a.length;++b)a[b]|=0}),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(a){h(a)}),"intensity"in a?(h("intensity"),h("showscale",!0)):(b.showscale=!1,"vertexcolor"in a?h("vertexcolor"):"facecolor"in a?h("facecolor"):h("color",c)),b.reversescale&&(b.colorscale=b.colorscale.map(function(a){return[1-a[0],a[1]]}).reverse()),void(b.showscale&&e(a,b,g))):void(b.visible=!1)}},{"../../components/colorbar/defaults":535,"../../lib":632,"./attributes":817}],820:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../heatmap/colorbar"),d.plot=a("./convert"),d.moduleType="trace",d.name="mesh3d",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d"],d.meta={},b.exports=d},{"../../plots/gl3d":702,"../heatmap/colorbar":791,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/attributes"),f="#3D9970",g="#FF4136",h=e.line,i={
name:{valType:"string"},showlegend:{valType:"boolean",dflt:!0},line:{color:d.extendFlat({},h.color),width:d.extendFlat({},h.width),dash:d.extendFlat({},h.dash)}};b.exports={x:{valType:"data_array"},open:{valType:"data_array",dflt:[]},high:{valType:"data_array",dflt:[]},low:{valType:"data_array",dflt:[]},close:{valType:"data_array",dflt:[]},line:{width:d.extendFlat({},h.width,{}),dash:d.extendFlat({},h.dash,{})},increasing:d.extendDeep({},i,{line:{color:{dflt:f}}}),decreasing:d.extendDeep({},i,{line:{color:{dflt:g}}}),text:{valType:"string",dflt:"",arrayOk:!0},tickwidth:{valType:"number",min:0,max:.5,dflt:.3}}},{"../../lib":632,"../scatter/attributes":844}],822:[function(a,b,c){"use strict";function d(a,b,c,d){g(a,b,c,d),c(d+".line.color"),c(d+".line.width",b.line.width),c(d+".line.dash",b.line.dash)}var e=a("../../lib"),f=a("./ohlc_defaults"),g=a("./direction_defaults"),h=a("./attributes"),i=a("./helpers");b.exports=function(a,b){function c(c,d){return e.coerce(a,b,h,c,d)}i.pushDummyTransformOpts(a,b);var g=f(a,b,c);return 0===g?void(b.visible=!1):(c("line.width"),c("line.dash"),d(a,b,c,"increasing"),d(a,b,c,"decreasing"),c("text"),void c("tickwidth"))}},{"../../lib":632,"./attributes":821,"./direction_defaults":823,"./helpers":824,"./ohlc_defaults":826}],823:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){c(d+".showlegend"),a.showlegend===!1&&(b[d].showlegend=!1);var e=b.name+" - "+d;c(d+".name",e)}},{}],824:[function(a,b,c){"use strict";var d=a("../../lib");c.pushDummyTransformOpts=function(a,b){var c={type:b.type,_ephemeral:!0};Array.isArray(a.transforms)?a.transforms.push(c):a.transforms=[c]},c.clearEphemeralTransformOpts=function(a){var b=a.transforms;if(Array.isArray(b)){for(var c=0;c<b.length;c++)b[c]._ephemeral&&b.splice(c,1);0===b.length&&delete a.transforms}},c.copyOHLC=function(a,b){a.open&&(b.open=a.open),a.high&&(b.high=a.high),a.low&&(b.low=a.low),a.close&&(b.close=a.close)},c.makeTransform=function(a,b,c){var e=d.extendFlat([],a.transforms);return e[b.transformIndex]={type:a.type,direction:c,open:a.open,high:a.high,low:a.low,close:a.close},e},c.getFilterFn=function(a){switch(a){case"increasing":return function(a,b){return a<=b};case"decreasing":return function(a,b){return a>b}}},c.addRangeSlider=function(a){a.xaxis||(a.xaxis={}),a.xaxis.rangeslider||(a.xaxis.rangeslider={})}},{"../../lib":632}],825:[function(a,b,c){"use strict";var d=a("../../plot_api/register");b.exports={moduleType:"trace",name:"ohlc",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults")},d(a("../scatter")),d(a("./transform"))},{"../../plot_api/register":653,"../../plots/cartesian":671,"../scatter":854,"./attributes":821,"./defaults":822,"./transform":827}],826:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d,e=c("x"),f=c("open"),g=c("high"),h=c("low"),i=c("close");return d=Math.min(f.length,g.length,h.length,i.length),e&&(d=Math.min(d,e.length),d<e.length&&(b.x=e.slice(0,d))),d<f.length&&(b.open=f.slice(0,d)),d<g.length&&(b.high=g.slice(0,d)),d<h.length&&(b.low=h.slice(0,d)),d<i.length&&(b.close=i.slice(0,d)),d}},{}],827:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"scatter",mode:"lines",connectgaps:!1,visible:a.visible,opacity:a.opacity,xaxis:a.xaxis,yaxis:a.yaxis,hoverinfo:e(a),transforms:h.makeTransform(a,b,c)},f=a[c];return f&&g.extendFlat(d,{x:a.x||[0],y:[].concat(a.low).concat(a.high),text:a.text,name:f.name,showlegend:f.showlegend,line:f.line}),d}function e(a){var b=a.hoverinfo;if("all"===b)return"x+text+name";var c=b.split("+"),d=c.indexOf("y"),e=c.indexOf("text");return d!==-1&&(c.splice(d,1),e===-1&&c.push("text")),c.join("+")}function f(a,b,c){var d=c._fullInput,e=d.tickwidth,f=d._minDiff;if(!f){var h=a._fullData,i=[];f=1/0;var j;for(j=0;j<h.length;j++){var k=h[j]._fullInput;if("ohlc"===k.type&&k.visible===!0&&k.xaxis===b._id&&(i.push(k),k.x&&k.x.length>1)){var l=g.distinctVals(k.x.map(b.d2c)).minDiff;f=Math.min(f,l)}}for(f===1/0&&(f=1),j=0;j<i.length;j++)i[j]._minDiff=f}return f*e}var g=a("../../lib"),h=a("./helpers"),i=a("../../plots/cartesian/axes"),j=a("../../plots/cartesian/axis_ids");c.moduleType="transform",c.name="ohlc",c.attributes={},c.supplyDefaults=function(a,b,c,d){return h.clearEphemeralTransformOpts(d),h.copyOHLC(a,b),a},c.transform=function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e];"ohlc"===f.type?c.push(d(f,b,"increasing"),d(f,b,"decreasing")):c.push(f)}return h.addRangeSlider(b.layout),c},c.calcTransform=function(a,b,c){for(var d=c.direction,e=h.getFilterFn(d),g=j.getFromTrace(a,b,"x"),k=j.getFromTrace(a,b,"y"),l=f(a,g,b),m=b.open,n=b.high,o=b.low,p=b.close,q=b.text,r=m.length,s=[],t=[],u=[],v=b._fullInput.x?function(a){return g.d2c(b.x[a])}:function(a){return a},w=Array.isArray(q)?function(a){return q[a]||""}:function(){return q},x=function(a){var b=v(a);s.push(b-l,b,b,b,b,b+l,null)},y=function(a,b,c,d){t.push(a,a,b,c,d,d,null)},z=function(a,b){return i.tickText(a,a.c2l(b),"hover").text},A=b._fullInput.hoverinfo,B=A.split("+"),C="all"===A,D=C||B.indexOf("y")!==-1,E=C||B.indexOf("text")!==-1,F=function(a,b,c,d,e){var f=[];D&&(f.push("Open: "+z(k,b)),f.push("High: "+z(k,c)),f.push("Low: "+z(k,d)),f.push("Close: "+z(k,e))),E&&f.push(w(a));var g=f.join("<br>");u.push(g,g,g,g,g,g,null)},G=0;G<r;G++)e(m[G],p[G])&&(x(G),y(m[G],n[G],o[G],p[G]),F(G,m[G],n[G],o[G],p[G]));b.x=s,b.y=t,b.text=u}},{"../../lib":632,"../../plots/cartesian/axes":662,"../../plots/cartesian/axis_ids":665,"./helpers":824}],828:[function(a,b,c){"use strict";var d=a("../../components/color/attributes"),e=a("../../plots/font_attributes"),f=a("../../plots/attributes"),g=a("../../lib/extend").extendFlat;b.exports={labels:{valType:"data_array"},label0:{valType:"number",dflt:0},dlabel:{valType:"number",dflt:1},values:{valType:"data_array"},marker:{colors:{valType:"data_array"},line:{color:{valType:"color",dflt:d.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}}},text:{valType:"data_array"},scalegroup:{valType:"string",dflt:""},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"]},hoverinfo:g({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0},textfont:g({},e,{}),insidetextfont:g({},e,{}),outsidetextfont:g({},e,{}),domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},hole:{valType:"number",min:0,max:1,dflt:0},sort:{valType:"boolean",dflt:!0},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise"},rotation:{valType:"number",min:-360,max:360,dflt:0},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0}}},{"../../components/color/attributes":532,"../../lib/extend":625,"../../plots/attributes":660,"../../plots/font_attributes":683}],829:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f._module===b&&f.visible===!0&&c.push(e)}return c}var e=a("../../registry");c.name="pie",c.plot=function(a){var b=e.getModule("pie"),c=d(a.calcdata,b);c.length&&b.plot(a,c)},c.clean=function(a,b,c,d){var e=d._has&&d._has("pie"),f=b._has&&b._has("pie");e&&!f&&d._pielayer.selectAll("g.trace").remove()}},{"../../registry":738}],830:[function(a,b,c){"use strict";function d(a){if(!i){var b=g.defaults;i=b.slice();var c;for(c=0;c<b.length;c++)i.push(f(b[c]).lighten(20).toHexString());for(c=0;c<g.defaults.length;c++)i.push(f(b[c]).darken(20).toHexString())}return i[a%i.length]}var e=a("fast-isnumeric"),f=a("tinycolor2"),g=a("../../components/color"),h=a("./helpers");b.exports=function(a,b){var c,i,j,k,l,m,n=b.values,o=b.labels,p=[],q=a._fullLayout,r=q._piecolormap,s={},t=!1,u=0,v=q.hiddenlabels||[];if(b.dlabel)for(o=new Array(n.length),c=0;c<n.length;c++)o[c]=String(b.label0+c*b.dlabel);for(c=0;c<n.length;c++)i=n[c],e(i)&&(i=+i,i<0||(j=o[c],void 0!==j&&""!==j||(j=c),j=String(j),void 0===s[j]&&(s[j]=!0,k=f(b.marker.colors[c]),k.isValid()?(k=g.addOpacity(k,k.getAlpha()),r[j]||(r[j]=k)):r[j]?k=r[j]:(k=!1,t=!0),l=v.indexOf(j)!==-1,l||(u+=i),p.push({v:i,label:j,color:k,i:c,hidden:l}))));if(b.sort&&p.sort(function(a,b){return b.v-a.v}),t)for(c=0;c<p.length;c++)m=p[c],m.color===!1&&(r[m.label]=m.color=d(q._piedefaultcolorcount),q._piedefaultcolorcount++);if(p[0]&&(p[0].vTotal=u),b.textinfo&&"none"!==b.textinfo){var w,x=b.textinfo.indexOf("label")!==-1,y=b.textinfo.indexOf("text")!==-1,z=b.textinfo.indexOf("value")!==-1,A=b.textinfo.indexOf("percent")!==-1,B=q.separators;for(c=0;c<p.length;c++)m=p[c],w=x?[m.label]:[],y&&b.text[m.i]&&w.push(b.text[m.i]),z&&w.push(h.formatPieValue(m.v,B)),A&&w.push(h.formatPiePercent(m.v/u,B)),m.text=w.join("<br>")}return p};var i},{"../../components/color":533,"./helpers":832,"fast-isnumeric":104,tinycolor2:489}],831:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c,f){function g(c,f){return d.coerce(a,b,e,c,f)}var h=d.coerceFont,i=g("values");if(!Array.isArray(i)||!i.length)return void(b.visible=!1);var j=g("labels");Array.isArray(j)||(g("label0"),g("dlabel"));var k=g("marker.line.width");k&&g("marker.line.color");var l=g("marker.colors");Array.isArray(l)||(b.marker.colors=[]),g("scalegroup");var m=g("text"),n=g("textinfo",Array.isArray(m)?"text+percent":"percent");if(g("hoverinfo",1===f._dataLength?"label+text+value+percent":void 0),n&&"none"!==n){var o=g("textposition"),p=Array.isArray(o)||"auto"===o,q=p||"inside"===o,r=p||"outside"===o;if(q||r){var s=h(g,"textfont",f.font);q&&h(g,"insidetextfont",s),r&&h(g,"outsidetextfont",s)}}g("domain.x"),g("domain.y"),g("hole"),g("sort"),g("direction"),g("rotation"),g("pull")}},{"../../lib":632,"./attributes":828}],832:[function(a,b,c){"use strict";var d=a("../../lib");c.formatPiePercent=function(a,b){var c=(100*a).toPrecision(3);return c.lastIndexOf(".")!==-1&&(c=c.replace(/[.]?0+$/,"")),d.numSeparate(c,b)+"%"},c.formatPieValue=function(a,b){var c=a.toPrecision(10);return c.lastIndexOf(".")!==-1&&(c=c.replace(/[.]?0+$/,"")),d.numSeparate(c,b)}},{"../../lib":632}],833:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.layoutAttributes=a("./layout_attributes"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.styleOne=a("./style_one"),d.moduleType="trace",d.name="pie",d.basePlotModule=a("./base_plot"),d.categories=["pie","showLegend"],d.meta={},b.exports=d},{"./attributes":828,"./base_plot":829,"./calc":830,"./defaults":831,"./layout_attributes":834,"./layout_defaults":835,"./plot":836,"./style":837,"./style_one":838}],834:[function(a,b,c){"use strict";b.exports={hiddenlabels:{valType:"data_array"}}},{}],835:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b){function c(c,f){return d.coerce(a,b,e,c,f)}c("hiddenlabels")}},{"../../lib":632,"./layout_attributes":834}],836:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.sqrt(a.width*a.width+a.height*a.height),f=a.width/a.height,g=Math.PI*Math.min(b.v/c.vTotal,.5),h=1-c.trace.hole,i=e(b,c),j={scale:i*c.r*2/d,rCenter:1-i,rotate:0};if(j.scale>=1)return j;var k=f+1/(2*Math.tan(g)),l=c.r*Math.min(1/(Math.sqrt(k*k+.5)+k),h/(Math.sqrt(f*f+h/2)+f)),m={scale:2*l/a.height,rCenter:Math.cos(l/c.r)-l*f/c.r,rotate:(180/Math.PI*b.midangle+720)%180-90},n=1/f,o=n+1/(2*Math.tan(g)),p=c.r*Math.min(1/(Math.sqrt(o*o+.5)+o),h/(Math.sqrt(n*n+h/2)+n)),q={scale:2*p/a.width,rCenter:Math.cos(p/c.r)-p/f/c.r,rotate:(180/Math.PI*b.midangle+810)%180-90},r=q.scale>m.scale?q:m;return j.scale<1&&r.scale>j.scale?r:j}function e(a,b){if(a.v===b.vTotal&&!b.trace.hole)return 1;var c=Math.PI*Math.min(a.v/b.vTotal,.5);return Math.min(1/(1+1/Math.sin(c)),(1-b.trace.hole)/2)}function f(a,b){var c=b.pxmid[0],d=b.pxmid[1],e=a.width/2,f=a.height/2;return c<0&&(e*=-1),d<0&&(f*=-1),{scale:1,rCenter:1,rotate:0,x:e+Math.abs(f)*(e>0?1:-1)/2,y:f/(1+c*c/(d*d)),outside:!0}}function g(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}function e(a,c){c||(c={});var d,e,f,h,m,n,p=c.labelExtraY+(g?c.yLabelMax:c.yLabelMin),q=g?a.yLabelMin:a.yLabelMax,r=g?a.yLabelMax:a.yLabelMin,s=a.cyFinal+j(a.px0[1],a.px1[1]),t=p-q;if(t*l>0&&(a.labelExtraY=t),Array.isArray(b.pull))for(e=0;e<o.length;e++)f=o[e],f===a||(b.pull[a.i]||0)>=b.pull[f.i]||((a.pxmid[1]-f.pxmid[1])*l>0?(h=f.cyFinal+j(f.px0[1],f.px1[1]),t=h-q-a.labelExtraY,t*l>0&&(a.labelExtraY+=t)):(r+a.labelExtraY-s)*l>0&&(d=3*k*Math.abs(e-o.indexOf(a)),m=f.cxFinal+i(f.px0[0],f.px1[0]),n=m+d-(a.cxFinal+a.pxmid[0])-a.labelExtraX,n*k>0&&(a.labelExtraX+=n)))}var f,g,h,i,j,k,l,m,n,o,p,q,r;for(g=0;g<2;g++)for(h=g?c:d,j=g?Math.max:Math.min,l=g?1:-1,f=0;f<2;f++){for(i=f?Math.max:Math.min,k=f?1:-1,m=a[g][f],m.sort(h),n=a[1-g][f],o=n.concat(m),q=[],p=0;p<m.length;p++)void 0!==m[p].yLabelMid&&q.push(m[p]);for(r=!1,p=0;g&&p<n.length;p++)if(void 0!==n[p].yLabelMid){r=n[p];break}for(p=0;p<q.length;p++){var s=p&&q[p-1];r&&!p&&(s=r),e(q[p],s)}}}function h(a,b){var c,d,e,f,g,h,i,k,l,m,n=[];for(e=0;e<a.length;e++){if(g=a[e][0],h=g.trace,c=b.w*(h.domain.x[1]-h.domain.x[0]),d=b.h*(h.domain.y[1]-h.domain.y[0]),i=h.tiltaxis*Math.PI/180,k=h.pull,Array.isArray(k))for(k=0,f=0;f<h.pull.length;f++)h.pull[f]>k&&(k=h.pull[f]);g.r=Math.min(c/j(h.tilt,Math.sin(i),h.depth),d/j(h.tilt,Math.cos(i),h.depth))/(2+2*k),g.cx=b.l+b.w*(h.domain.x[1]+h.domain.x[0])/2,g.cy=b.t+b.h*(2-h.domain.y[1]-h.domain.y[0])/2,h.scalegroup&&n.indexOf(h.scalegroup)===-1&&n.push(h.scalegroup)}for(f=0;f<n.length;f++){for(m=1/0,l=n[f],e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===l&&(m=Math.min(m,g.r*g.r/g.vTotal));for(e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===l&&(g.r=Math.sqrt(m*g.vTotal))}}function i(a){function b(a){var b=l.r*Math.sin(a),c=-l.r*Math.cos(a);return n?[b*(1-h*d*d)+c*g*h,b*g*h+c*(1-h*e*e),Math.sin(f)*(c*e-b*d)]:[b,c]}var c,d,e,f,g,h,i,j,k,l=a[0],m=l.trace,n=m.tilt,o=m.rotation*Math.PI/180,p=2*Math.PI/l.vTotal,q="px0",r="px1";if("counterclockwise"===m.direction){for(i=0;i<a.length&&a[i].hidden;i++);if(i===a.length)return;o+=p*a[i].v,p*=-1,q="px1",r="px0"}for(n&&(f=n*Math.PI/180,c=m.tiltaxis*Math.PI/180,g=Math.sin(c)*Math.cos(c),h=1-Math.cos(f),d=Math.sin(c),e=Math.cos(c)),k=b(o),i=0;i<a.length;i++)j=a[i],j.hidden||(j[q]=k,o+=p*j.v/2,j.pxmid=b(o),j.midangle=o,o+=p*j.v/2,k=b(o),j[r]=k,j.largeArc=j.v>l.vTotal/2?1:0)}function j(a,b,c){if(!a)return 1;var d=Math.sin(a*Math.PI/180);return Math.max(.01,c*d*Math.abs(b)+2*Math.sqrt(1-d*d*b*b))}var k=a("d3"),l=a("../../plots/cartesian/graph_interact"),m=a("../../components/color"),n=a("../../components/drawing"),o=a("../../lib/svg_text_utils"),p=a("./helpers");b.exports=function(a,b){var c=a._fullLayout;h(b,c._size);var j=c._pielayer.selectAll("g.trace").data(b);j.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"}),j.exit().remove(),j.order(),j.each(function(b){var h=k.select(this),j=b[0],q=j.trace,r=0,s=(q.depth||0)*j.r*Math.sin(r)/2,t=q.tiltaxis||0,u=t*Math.PI/180,v=[s*Math.sin(u),s*Math.cos(u)],w=j.r*Math.cos(r),x=h.selectAll("g.part").data(q.tilt?["top","sides"]:["top"]);x.enter().append("g").attr("class",function(a){return a+" part"}),x.exit().remove(),x.order(),i(b),h.selectAll(".top").each(function(){var h=k.select(this).selectAll("g.slice").data(b);h.enter().append("g").classed("slice",!0),h.exit().remove();var i=[[[],[]],[[],[]]],r=!1;h.each(function(g){function h(b){var d=a._fullLayout,f=a._fullData[q.index],h=f.hoverinfo;if("all"===h&&(h="label+text+value+percent+name"),!a._dragging&&d.hovermode!==!1&&"none"!==h&&"skip"!==h&&h){var i=e(g,j),k=x+g.pxmid[0]*(1-i),m=y+g.pxmid[1]*(1-i),n=c.separators,o=[];h.indexOf("label")!==-1&&o.push(g.label),f.text&&f.text[g.i]&&h.indexOf("text")!==-1&&o.push(f.text[g.i]),h.indexOf("value")!==-1&&o.push(p.formatPieValue(g.v,n)),h.indexOf("percent")!==-1&&o.push(p.formatPiePercent(g.v/j.vTotal,n)),l.loneHover({x0:k-i*j.r,x1:k+i*j.r,y:m,text:o.join("<br>"),name:h.indexOf("name")!==-1?f.name:void 0,color:g.color,idealAlign:g.pxmid[0]<0?"left":"right"},{container:d._hoverlayer.node(),outerContainer:d._paper.node()}),l.hover(a,b,"pie"),B=!0}}function m(b){a.emit("plotly_unhover",{points:[b]}),B&&(l.loneUnhover(c._hoverlayer.node()),B=!1)}function s(){a._hoverdata=[g],a._hoverdata.trace=b.trace,l.click(a,{target:!0})}function u(a,b,c,d){return"a"+d*j.r+","+d*w+" "+t+" "+g.largeArc+(c?" 1 ":" 0 ")+d*(b[0]-a[0])+","+d*(b[1]-a[1])}if(g.hidden)return void k.select(this).selectAll("path,g").remove();i[g.pxmid[1]<0?0:1][g.pxmid[0]<0?0:1].push(g);var x=j.cx+v[0],y=j.cy+v[1],z=k.select(this),A=z.selectAll("path.surface").data([g]),B=!1;if(A.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),z.select("path.textline").remove(),z.on("mouseover",h).on("mouseout",m).on("click",s),q.pull){var C=+(Array.isArray(q.pull)?q.pull[g.i]:q.pull)||0;C>0&&(x+=C*g.pxmid[0],y+=C*g.pxmid[1])}g.cxFinal=x,g.cyFinal=y;var D=q.hole;if(g.v===j.vTotal){var E="M"+(x+g.px0[0])+","+(y+g.px0[1])+u(g.px0,g.pxmid,!0,1)+u(g.pxmid,g.px0,!0,1)+"Z";D?A.attr("d","M"+(x+D*g.px0[0])+","+(y+D*g.px0[1])+u(g.px0,g.pxmid,!1,D)+u(g.pxmid,g.px0,!1,D)+"Z"+E):A.attr("d",E)}else{var F=u(g.px0,g.px1,!0,1);if(D){var G=1-D;A.attr("d","M"+(x+D*g.px1[0])+","+(y+D*g.px1[1])+u(g.px1,g.px0,!1,D)+"l"+G*g.px0[0]+","+G*g.px0[1]+F+"Z")}else A.attr("d","M"+x+","+y+"l"+g.px0[0]+","+g.px0[1]+F+"Z")}var H=Array.isArray(q.textposition)?q.textposition[g.i]:q.textposition,I=z.selectAll("g.slicetext").data(g.text&&"none"!==H?[0]:[]);I.enter().append("g").classed("slicetext",!0),I.exit().remove(),I.each(function(){var a=k.select(this).selectAll("text").data([0]);a.enter().append("text").attr("data-notex",1),a.exit().remove(),a.text(g.text).attr({"class":"slicetext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(n.font,"outside"===H?q.outsidetextfont:q.insidetextfont).call(o.convertToTspans),a.selectAll("tspan.line").attr({x:0,y:0});var b,c=n.bBox(a.node());"outside"===H?b=f(c,g):(b=d(c,g,j),"auto"===H&&b.scale<1&&(a.call(n.font,q.outsidetextfont),q.outsidetextfont.family===q.insidetextfont.family&&q.outsidetextfont.size===q.insidetextfont.size||(a.attr({"data-bb":""}),c=n.bBox(a.node())),b=f(c,g)));var e=x+g.pxmid[0]*b.rCenter+(b.x||0),h=y+g.pxmid[1]*b.rCenter+(b.y||0);b.outside&&(g.yLabelMin=h-c.height/2,g.yLabelMid=h,g.yLabelMax=h+c.height/2,g.labelExtraX=0,g.labelExtraY=0,r=!0),a.attr("transform","translate("+e+","+h+")"+(b.scale<1?"scale("+b.scale+")":"")+(b.rotate?"rotate("+b.rotate+")":"")+"translate("+-(c.left+c.right)/2+","+-(c.top+c.bottom)/2+")")})}),r&&g(i,q),h.each(function(a){if(a.labelExtraX||a.labelExtraY){var b=k.select(this),c=b.select("g.slicetext text");c.attr("transform","translate("+a.labelExtraX+","+a.labelExtraY+")"+c.attr("transform"));var d=a.cxFinal+a.pxmid[0],e=a.cyFinal+a.pxmid[1],f="M"+d+","+e,g=(a.yLabelMax-a.yLabelMin)*(a.pxmid[0]<0?-1:1)/4;if(a.labelExtraX){var h=a.labelExtraX*a.pxmid[1]/a.pxmid[0],i=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);f+=Math.abs(h)>Math.abs(i)?"l"+i*a.pxmid[0]/a.pxmid[1]+","+i+"H"+(d+a.labelExtraX+g):"l"+a.labelExtraX+","+h+"v"+(i-h)+"h"+g}else f+="V"+(a.yLabelMid+a.labelExtraY)+"h"+g;b.append("path").classed("textline",!0).call(m.stroke,q.outsidetextfont.color).attr({"stroke-width":Math.min(2,q.outsidetextfont.size/8),d:f,fill:"none"})}})})}),setTimeout(function(){j.selectAll("tspan").each(function(){var a=k.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)}},{"../../components/color":533,"../../components/drawing":557,"../../lib/svg_text_utils":646,"../../plots/cartesian/graph_interact":670,"./helpers":832,d3:95}],837:[function(a,b,c){"use strict";var d=a("d3"),e=a("./style_one");b.exports=function(a){a._fullLayout._pielayer.selectAll(".trace").each(function(a){var b=a[0],c=b.trace,f=d.select(this);f.style({opacity:c.opacity}),f.selectAll(".top path.surface").each(function(a){d.select(this).call(e,a,c)})})}},{"./style_one":838,d3:95}],838:[function(a,b,c){"use strict";var d=a("../../components/color");b.exports=function(a,b,c){var e=c.marker.line.color;Array.isArray(e)&&(e=e[b.i]||d.defaultLine);var f=c.marker.line.width||0;Array.isArray(f)&&(f=f[b.i]||0),a.style({"stroke-width":f,fill:b.color}).call(d.stroke,e)}},{"../../components/color":533}],839:[function(a,b,c){"use strict";var d=a("../scattergl/attributes");b.exports={x:d.x,y:d.y,xy:{valType:"data_array"},indices:{valType:"data_array"},xbounds:{valType:"data_array"},ybounds:{valType:"data_array"},text:d.text,marker:{color:{valType:"color",arrayOk:!1},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1},blend:{valType:"boolean",dflt:null},sizemin:{valType:"number",min:.1,max:2,dflt:.5},sizemax:{valType:"number",min:.1,dflt:20},border:{color:{valType:"color",arrayOk:!1},arearatio:{valType:"number",min:0,max:1,dflt:0}}}}},{"../scattergl/attributes":880}],840:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=f(a.glplot,this.pointcloudOptions),this.pointcloud._trace=this}function e(a,b){var c=new d(a,b.uid);return c.update(b),c}var f=a("gl-pointcloud2d"),g=a("../../lib/str2rgbarray"),h=a("../scatter/get_trace_color"),i=["xaxis","yaxis"],j=d.prototype;j.handlePick=function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*b],this.pickXYData[2*b+1]]:[this.pickXData[b],this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}},j.update=function(a){this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.updateFast(a),this.color=h(a,{})},j.updateFast=function(a){var b,c,d,e,f,h,i=this.xData=this.pickXData=a.x,j=this.yData=this.pickYData=a.y,k=this.pickXYData=a.xy,l=a.xbounds&&a.ybounds,m=a.indices,n=this.bounds;if(k){if(d=k,b=k.length>>>1,l)n[0]=a.xbounds[0],n[2]=a.xbounds[1],n[1]=a.ybounds[0],n[3]=a.ybounds[1];else for(h=0;h<b;h++)e=d[2*h],f=d[2*h+1],e<n[0]&&(n[0]=e),e>n[2]&&(n[2]=e),f<n[1]&&(n[1]=f),f>n[3]&&(n[3]=f);if(m)c=m;else for(c=new Int32Array(b),h=0;h<b;h++)c[h]=h}else for(b=i.length,d=new Float32Array(2*b),c=new Int32Array(b),h=0;h<b;h++)e=i[h],f=j[h],c[h]=h,d[2*h]=e,d[2*h+1]=f,e<n[0]&&(n[0]=e),e>n[2]&&(n[2]=e),f<n[1]&&(n[1]=f),f>n[3]&&(n[3]=f);this.idToIndex=c,this.pointcloudOptions.idToIndex=c,this.pointcloudOptions.positions=d;var o=g(a.marker.color),p=g(a.marker.border.color),q=a.opacity*a.marker.opacity;o[3]*=q,this.pointcloudOptions.color=o;var r=a.marker.blend;if(null===r){var s=100;r=i.length<s||j.length<s}this.pointcloudOptions.blend=r,p[3]*=q,this.pointcloudOptions.borderColor=p;var t=a.marker.sizemin,u=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=t,this.pointcloudOptions.sizeMax=u,this.pointcloudOptions.areaRatio=a.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(n,u/2)},j.expandAxesFast=function(a,b){for(var c,d,e,f=b||.5,g=0;g<2;g++)c=this.scene[i[g]],d=c._min,d||(d=[]),d.push({val:a[g],pad:f}),e=c._max,e||(e=[]),e.push({val:a[g+2],pad:f})},j.dispose=function(){this.pointcloud.dispose()},b.exports=e},{"../../lib/str2rgbarray":645,"../scatter/get_trace_color":852,"gl-pointcloud2d":198}],841:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){function f(c,f){return d.coerce(a,b,e,c,f)}f("x"),f("y"),f("xbounds"),f("ybounds"),a.xy&&a.xy instanceof Float32Array&&(b.xy=a.xy),a.indices&&a.indices instanceof Int32Array&&(b.indices=a.indices),f("text"),f("marker.color",c),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",c),f("marker.border.arearatio")}},{"../../lib":632,"./attributes":839}],842:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../scatter3d/calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="pointcloud",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl2d","showLegend"],d.meta={},b.exports=d},{"../../plots/gl2d":699,"../scatter3d/calc":868,"./attributes":839,"./convert":840,"./defaults":841}],843:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a){var b=a[0].trace,c=b.marker;if(d.mergeArray(b.text,a,"tx"),d.mergeArray(b.textposition,a,"tp"),b.textfont&&(d.mergeArray(b.textfont.size,a,"ts"),d.mergeArray(b.textfont.color,a,"tc"),d.mergeArray(b.textfont.family,a,"tf")),c&&c.line){var e=c.line;d.mergeArray(c.opacity,a,"mo"),d.mergeArray(c.symbol,a,"mx"),d.mergeArray(c.color,a,"mc"),d.mergeArray(e.color,a,"mlc"),d.mergeArray(e.width,a,"mlw")}}},{"../../lib":632}],844:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/drawing"),f=(a("./constants"),a("../../lib/extend").extendFlat);b.exports={x:{valType:"data_array"},x0:{valType:"any",dflt:0},dx:{valType:"number",dflt:1},y:{valType:"data_array"},y0:{valType:"any",dflt:0},dy:{valType:"number",dflt:1},ids:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},hoveron:{valType:"flaglist",flags:["points","fills"]},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear"},smoothing:{valType:"number",min:0,max:1.3,dflt:1},dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid"},simplify:{valType:"boolean",dflt:!0}},connectgaps:{valType:"boolean",dflt:!1},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none"},fillcolor:{valType:"color"},marker:f({},{symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0},opacity:{valType:"number",min:0,max:1,arrayOk:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0},maxdisplayed:{valType:"number",min:0,dflt:0},sizeref:{valType:"number",dflt:1},sizemin:{valType:"number",min:0,dflt:0},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter"},showscale:{valType:"boolean",dflt:!1},line:f({},{width:{valType:"number",min:0,arrayOk:!0}},d("marker.line"))},d("marker")),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0},textfont:{family:{valType:"string",noBlank:!0,strict:!0,arrayOk:!0},size:{valType:"number",min:1,arrayOk:!0},color:{valType:"color",arrayOk:!0}},r:{valType:"data_array"},t:{valType:"data_array"},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../components/colorscale/color_attributes":541,"../../components/drawing":557,"../../lib/extend":625,"./constants":849}],845:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../../lib"),g=a("./subtypes"),h=a("./colorscale_calc");b.exports=function(a,b){var c,i,j,k=e.getFromId(a,b.xaxis||"x"),l=e.getFromId(a,b.yaxis||"y"),m=k.makeCalcdata(b,"x"),n=l.makeCalcdata(b,"y"),o=Math.min(m.length,n.length);k._minDtick=0,l._minDtick=0,m.length>o&&m.splice(o,m.length-o),n.length>o&&n.splice(o,n.length-o);var p={padded:!0},q={padded:!0};if(g.hasMarkers(b)){if(c=b.marker,i=c.size,Array.isArray(i)){var r={type:"linear"};e.setConvert(r),i=r.makeCalcdata(b.marker,"size"),i.length>o&&i.splice(o,i.length-o)}var s,t=1.6*(b.marker.sizeref||1);s="area"===b.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/t),3)}:function(a){return Math.max((a||0)/t,3)},p.ppad=q.ppad=Array.isArray(i)?i.map(s):s(i)}h(b),!("tozerox"===b.fill||"tonextx"===b.fill&&a.firstscatter)||m[0]===m[o-1]&&n[0]===n[o-1]?b.error_y.visible||["tonexty","tozeroy"].indexOf(b.fill)===-1&&(g.hasMarkers(b)||g.hasText(b))||(p.padded=!1,p.ppad=0):p.tozero=!0,!("tozeroy"===b.fill||"tonexty"===b.fill&&a.firstscatter)||m[0]===m[o-1]&&n[0]===n[o-1]?["tonextx","tozerox"].indexOf(b.fill)!==-1&&(q.padded=!1):q.tozero=!0,e.expand(k,m,p),e.expand(l,n,q);var u=new Array(o);for(j=0;j<o;j++)u[j]=d(m[j])&&d(n[j])?{x:m[j],y:n[j]}:{x:!1,y:!1},b.ids&&(u[j].id=String(b.ids[j]));return"undefined"!=typeof i&&f.mergeArray(i,u,"ms"),a.firstscatter=!1,u}},{"../../lib":632,"../../plots/cartesian/axes":662,"./colorscale_calc":848,"./subtypes":864,"fast-isnumeric":104}],846:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0;b<a.length;b++){var c=a[b];if("scatter"===c.type){var d=c.fill;if("none"!==d&&"toself"!==d&&(c.opacity=void 0,"tonexty"===d||"tonextx"===d))for(var e=b-1;e>=0;e--){var f=a[e];if("scatter"===f.type&&f.xaxis===c.xaxis&&f.yaxis===c.yaxis){f.opacity=void 0;break}}}}}},{}],847:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i=c.marker,j="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+j).remove(),void 0===i||!i.showscale)return void f.autoMargin(a,j);var k=i.color,l=i.cmin,m=i.cmax;d(l)||(l=e.aggNums(Math.min,null,k)),d(m)||(m=e.aggNums(Math.max,null,k));var n=b[0].t.cb=h(a,j),o=g.makeColorScaleFunc(g.extractScale(i.colorscale,l,m),{noNumericCheck:!0});n.fillcolor(o).filllevels({start:l,end:m,size:(m-l)/254}).options(i.colorbar)()}},{"../../components/colorbar/draw":536,"../../components/colorscale":548,"../../lib":632,"../../plots/plots":723,"fast-isnumeric":104}],848:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/calc"),f=a("./subtypes");b.exports=function(a){f.hasLines(a)&&d(a,"line")&&e(a,a.line.color,"line","c"),f.hasMarkers(a)&&(d(a,"marker")&&e(a,a.marker.color,"marker","c"),d(a,"marker.line")&&e(a,a.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":540,"../../components/colorscale/has_colorscale":547,"./subtypes":864}],849:[function(a,b,c){"use strict";b.exports={PTS_LINESONLY:20}},{}],850:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("./constants"),g=a("./subtypes"),h=a("./xy_defaults"),i=a("./marker_defaults"),j=a("./line_defaults"),k=a("./line_shape_defaults"),l=a("./text_defaults"),m=a("./fillcolor_defaults"),n=a("../../components/errorbars/defaults");b.exports=function(a,b,c,o){function p(c,f){return d.coerce(a,b,e,c,f)}var q=h(a,b,p),r=q<f.PTS_LINESONLY?"lines+markers":"lines";if(!q)return void(b.visible=!1);p("text"),p("mode",r),p("ids"),g.hasLines(b)&&(j(a,b,c,o,p),k(a,b,p),p("connectgaps"),p("line.simplify")),g.hasMarkers(b)&&i(a,b,c,o,p),g.hasText(b)&&l(a,b,o,p);var s=[];(g.hasMarkers(b)||g.hasText(b))&&(p("marker.maxdisplayed"),s.push("points")),p("fill"),"none"!==b.fill&&(m(a,b,c,p),g.hasLines(b)||k(a,b,p)),"tonext"!==b.fill&&"toself"!==b.fill||s.push("fills"),p("hoveron",s.join("+")||"points"),n(a,b,c,{axis:"y"}),n(a,b,c,{axis:"x",inherit:"y"})}},{"../../components/errorbars/defaults":562,"../../lib":632,"./attributes":844,"./constants":849,"./fillcolor_defaults":851,"./line_defaults":855,"./line_shape_defaults":857,"./marker_defaults":860,"./subtypes":864,"./text_defaults":865,"./xy_defaults":866}],851:[function(a,b,c){"use strict";var d=a("../../components/color");b.exports=function(a,b,c,e){var f=!1;if(b.marker){var g=b.marker.color,h=(b.marker.line||{}).color;
g&&!Array.isArray(g)?f=g:h&&!Array.isArray(h)&&(f=h)}e("fillcolor",d.addOpacity((b.line||{}).color||f||c,.5))}},{"../../components/color":533}],852:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("./subtypes");b.exports=function(a,b){var c,f;if("lines"===a.mode)return c=a.line.color,c&&d.opacity(c)?c:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var g=b.mcc||(a.marker||{}).color,h=b.mlcc||((a.marker||{}).line||{}).color;return f=g&&d.opacity(g)?g:h&&d.opacity(h)&&(b.mlw||((a.marker||{}).line||{}).width)?h:"",f?d.opacity(f)<.3?d.addOpacity(f,.3):f:(c=(a.line||{}).color,c&&d.opacity(c)&&e.hasLines(a)&&a.line.width?c:a.fillcolor)}},{"../../components/color":533,"./subtypes":864}],853:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/graph_interact"),f=a("../../plots/cartesian/constants"),g=a("../../components/errorbars"),h=a("./get_trace_color"),i=a("../../components/color");b.exports=function(a,b,c,j){var k=a.cd,l=k[0].trace,m=a.xa,n=a.ya,o=m.c2p(b),p=n.c2p(c),q=[o,p];if(l.hoveron.indexOf("points")!==-1){var r=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(m.c2p(a.x)-o)-b,1-3/b)},s=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(n.c2p(a.y)-p)-b,1-3/b)},t=function(a){var b=Math.max(3,a.mrc||0),c=m.c2p(a.x)-o,d=n.c2p(a.y)-p;return Math.max(Math.sqrt(c*c+d*d)-b,1-3/b)},u=e.getDistanceFunction(j,r,s,t);if(e.getClosest(k,u,a),a.index!==!1){var v=k[a.index],w=m.c2p(v.x,!0),x=n.c2p(v.y,!0),y=v.mrc||1;return d.extendFlat(a,{color:h(l,v),x0:w-y,x1:w+y,xLabelVal:v.x,y0:x-y,y1:x+y,yLabelVal:v.y}),v.tx?a.text=v.tx:l.text&&(a.text=l.text),g.hoverInfo(v,l,a),[a]}}if(l.hoveron.indexOf("fills")!==-1&&l._polygons){var z,A,B,C,D,E,F,G,H,I=l._polygons,J=[],K=!1,L=1/0,M=-(1/0),N=1/0,O=-(1/0);for(z=0;z<I.length;z++)B=I[z],B.contains(q)&&(K=!K,J.push(B),N=Math.min(N,B.ymin),O=Math.max(O,B.ymax));if(K){N=Math.max(N,0),O=Math.min(O,n._length);var P=(N+O)/2;for(z=0;z<J.length;z++)for(C=J[z].pts,A=1;A<C.length;A++)G=C[A-1][1],H=C[A][1],G>P!=H>=P&&(E=C[A-1][0],F=C[A][0],D=E+(F-E)*(P-G)/(H-G),L=Math.min(L,D),M=Math.max(M,D));L=Math.max(L,0),M=Math.min(M,m._length);var Q=i.defaultLine;return i.opacity(l.fillcolor)?Q=l.fillcolor:i.opacity((l.line||{}).color)&&(Q=l.line.color),d.extendFlat(a,{distance:f.MAXDIST+10,x0:L,x1:M,y0:P,y1:P,color:Q}),delete a.index,l.text&&!Array.isArray(l.text)?a.text=String(l.text):a.text=l.name,[a]}}}},{"../../components/color":533,"../../components/errorbars":563,"../../lib":632,"../../plots/cartesian/constants":668,"../../plots/cartesian/graph_interact":670,"./get_trace_color":852}],854:[function(a,b,c){"use strict";var d={},e=a("./subtypes");d.hasLines=e.hasLines,d.hasMarkers=e.hasMarkers,d.hasText=e.hasText,d.isBubble=e.isBubble,d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.cleanData=a("./clean_data"),d.calc=a("./calc"),d.arraysToCalcdata=a("./arrays_to_calcdata"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.selectPoints=a("./select"),d.animatable=!0,d.moduleType="trace",d.name="scatter",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":671,"./arrays_to_calcdata":843,"./attributes":844,"./calc":845,"./clean_data":846,"./colorbar":847,"./defaults":850,"./hover":853,"./plot":861,"./select":862,"./style":863,"./subtypes":864}],855:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/defaults");b.exports=function(a,b,c,f,g){var h=(a.marker||{}).color;if(g("line.color",c),d(a,"line"))e(a,b,f,g,{prefix:"line.",cLetter:"c"});else{var i=!Array.isArray(h)&&h||c;g("line.color",i)}g("line.width"),g("line.dash")}},{"../../components/colorscale/defaults":543,"../../components/colorscale/has_colorscale":547}],856:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes");b.exports=function(a,b){function c(b){var c=w.c2p(a[b].x),d=x.c2p(a[b].y);return c!==D&&d!==D&&[c,d]}function e(a){var b=a[0]/w._length,c=a[1]/x._length;return(1+10*Math.max(0,-b,b-1,-c,c-1))*A}function f(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=b.xaxis,x=b.yaxis,y=b.simplify,z=b.connectGaps,A=b.baseTolerance,B=b.linear,C=[],D=d.BADNUM,E=.2,F=new Array(a.length),G=0;for(y||(A=E=-1),g=0;g<a.length;g++)if(h=c(g)){for(G=0,F[G++]=h,g++;g<a.length;g++){if(j=c(g),!j){if(z)continue;break}if(B){if(m=f(j,h),!(m<e(j)*E)){for(o=[(j[0]-h[0])/m,(j[1]-h[1])/m],k=h,q=m,r=t=u=0,n=!1,i=j,g++;g<a.length;g++){if(l=c(g),!l){if(z)continue;break}if(p=[l[0]-h[0],l[1]-h[1]],v=p[0]*o[1]-p[1]*o[0],t=Math.min(t,v),u=Math.max(u,v),u-t>e(l))break;i=l,s=p[0]*o[0]+p[1]*o[1],s>q?(q=s,j=l,n=!1):s<r&&(r=s,k=l,n=!0)}if(n?(F[G++]=j,i!==k&&(F[G++]=k)):(k!==h&&(F[G++]=k),i!==j&&(F[G++]=j)),F[G++]=i,g>=a.length||!l)break;F[G++]=l,h=l}}else F[G++]=j}C.push(F.slice(0,G))}return C}},{"../../plots/cartesian/axes":662}],857:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=c("line.shape");"spline"===d&&c("line.smoothing")}},{}],858:[function(a,b,c){"use strict";b.exports=function(a,b,c){for(var d,e,f=null,g=0;g<c.length;++g)d=c[g],e=d[0].trace,e.visible===!0?(e._nexttrace=null,["tonextx","tonexty","tonext"].indexOf(e.fill)!==-1&&(e._prevtrace=f,f&&(f._nexttrace=e)),f=e):e._prevtrace=e._nexttrace=null}},{}],859:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a){var b=a.marker,c=b.sizeref||1,e=b.sizemin||0,f="area"===b.sizemode?function(a){return Math.sqrt(a/c)}:function(a){return a/c};return function(a){var b=f(a/2);return d(b)&&b>0?Math.max(b,e):0}}},{"fast-isnumeric":104}],860:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults"),g=a("./subtypes");b.exports=function(a,b,c,h,i){var j,k=g.isBubble(a),l=(a.line||{}).color;l&&(c=l),i("marker.symbol"),i("marker.opacity",k?.7:1),i("marker.size"),i("marker.color",c),e(a,"marker")&&f(a,b,h,i,{prefix:"marker.",cLetter:"c"}),j=l&&!Array.isArray(l)&&b.marker.color!==l?l:k?d.background:d.defaultLine,i("marker.line.color",j),e(a,"marker.line")&&f(a,b,h,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",k?1:0),k&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode"))}},{"../../components/color":533,"../../components/colorscale/defaults":543,"../../components/colorscale/has_colorscale":547,"./subtypes":864}],861:[function(a,b,c){"use strict";function d(a,b){var c;b.selectAll("g.trace").each(function(a){var b=g.select(this);if(c=a[0].trace,c._nexttrace){if(c._nextFill=b.select(".js-fill.js-tonext"),!c._nextFill.size()){var d=":first-child";b.select(".js-fill.js-tozero").size()&&(d+=" + *"),c._nextFill=b.insert("path",d).attr("class","js-fill js-tonext")}}else b.selectAll(".js-fill.js-tonext").remove(),c._nextFill=null;c.fill&&("tozero"===c.fill.substr(0,6)||"toself"===c.fill||"to"===c.fill.substr(0,2)&&!c._prevtrace)?(c._ownFill=b.select(".js-fill.js-tozero"),c._ownFill.size()||(c._ownFill=b.insert("path",":first-child").attr("class","js-fill js-tozero"))):(b.selectAll(".js-fill.js-tozero").remove(),c._ownFill=null)})}function e(a,b,c,d,e,n,p){function q(a){return y?a.transition():a}function r(a){return a.filter(function(a){return a.vis})}function s(a){return a.id}function t(a){if(a.ids)return s}function u(){return!1}function v(a){var b,c,d=a[0].trace,e=g.select(this),f=k.hasMarkers(d),j=k.hasText(d),l=t(d),m=u,n=u;f&&(m=d.marker.maxdisplayed?r:h.identity),j&&(n=d.marker.maxdisplayed?r:h.identity),c=e.selectAll("path.point"),b=c.data(m,l);var o=b.enter().append("path").classed("point",!0);o.call(i.pointStyle,d).call(i.translatePoints,z,A,d),y&&o.style("opacity",0).transition().style("opacity",1),b.each(function(a){var b=q(g.select(this));i.translatePoint(a,b,z,A),i.singlePointStyle(a,b,d)}),y?b.exit().transition().style("opacity",0).remove():b.exit().remove(),c=e.selectAll("g"),b=c.data(n,l),b.enter().append("g").append("text"),b.each(function(a){var b=q(g.select(this).select("text"));i.translatePoint(a,b,z,A)}),b.selectAll("text").call(i.textPointStyle,d).each(function(a){var b=a.xp||z.c2p(a.x),c=a.yp||A.c2p(a.y);g.select(this).selectAll("tspan").each(function(){q(g.select(this)).attr({x:b,y:c})})}),b.exit().remove()}var w,x;f(a,b,c,d,e);var y=!!p&&p.duration>0,z=c.xaxis,A=c.yaxis,B=d[0].trace,C=B.line,D=g.select(n);if(D.call(j.plot,c,p),B.visible===!0){var E,F,G=B.fill.charAt(B.fill.length-1);"x"!==G&&"y"!==G&&(G=""),d[0].node3=D,l(d);var H="",I=[],J=B._prevtrace;J&&(H=J._prevRevpath||"",F=J._nextFill,I=J._polygons);var K,L,M,N,O,P,Q,R,S,T="",U="",V=[],W=[],X=h.noop;if(E=B._ownFill,k.hasLines(B)||"none"!==B.fill){for(F&&F.datum(d),["hv","vh","hvh","vhv"].indexOf(C.shape)!==-1?(M=i.steps(C.shape),N=i.steps(C.shape.split("").reverse().join(""))):M=N="spline"===C.shape?function(a){var b=a[a.length-1];return a[0][0]===b[0]&&a[0][1]===b[1]?i.smoothclosed(a.slice(1),C.smoothing):i.smoothopen(a,C.smoothing)}:function(a){return"M"+a.join("L")},O=function(a){return N(a.reverse())},V=m(d,{xaxis:z,yaxis:A,connectGaps:B.connectgaps,baseTolerance:Math.max(C.width||1,3)/4,linear:"linear"===C.shape,simplify:C.simplify}),S=B._polygons=new Array(V.length),x=0;x<V.length;x++)B._polygons[x]=o(V[x]);V.length&&(P=V[0][0],Q=V[V.length-1],R=Q[Q.length-1]),W=V.filter(function(a){return a.length>1}),X=function(a){return function(b){if(K=M(b),L=O(b),T?G?(T+="L"+K.substr(1),U=L+("L"+U.substr(1))):(T+="Z"+K,U=L+"Z"+U):(T=K,U=L),k.hasLines(B)&&b.length>1){var c=g.select(this);if(c.datum(d),a)q(c.style("opacity",0).attr("d",K).call(i.lineGroupStyle)).style("opacity",1);else{var e=q(c);e.attr("d",K),i.singleLineStyle(d,e)}}}}}var Y=D.selectAll(".js-line").data(W);q(Y.exit()).style("opacity",0).remove(),Y.each(X(!1)),Y.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(i.lineGroupStyle).each(X(!0)),V.length&&(E?P&&R&&(G?("y"===G?P[1]=R[1]=A.c2p(0,!0):"x"===G&&(P[0]=R[0]=z.c2p(0,!0)),q(E).attr("d","M"+R+"L"+P+"L"+T.substr(1))):q(E).attr("d",T+"Z")):"tonext"===B.fill.substr(0,6)&&T&&H&&("tonext"===B.fill?q(F).attr("d",T+"Z"+H+"Z"):q(F).attr("d",T+"L"+H.substr(1)+"Z"),B._polygons=B._polygons.concat(I)),B._prevRevpath=U,B._prevPolygons=S);var Z=D.selectAll(".points");w=Z.data([d]),Z.each(v),w.enter().append("g").classed("points",!0).each(v),w.exit().remove()}}function f(a,b,c,d,e){var f=c.xaxis,h=c.yaxis,i=g.extent(f.range.map(f.l2c)),j=g.extent(h.range.map(h.l2c)),l=d[0].trace;if(k.hasMarkers(l)){var m=l.marker.maxdisplayed;if(0!==m){var n=d.filter(function(a){return a.x>=i[0]&&a.x<=i[1]&&a.y>=j[0]&&a.y<=j[1]}),o=Math.ceil(n.length/m),p=0;e.forEach(function(a,c){var d=a[0].trace;k.hasMarkers(d)&&d.marker.maxdisplayed>0&&c<b&&p++});var q=Math.round(p*o/3+Math.floor(p/3)*o/7.1);d.forEach(function(a){delete a.vis}),n.forEach(function(a,b){0===Math.round((b+q)%o)&&(a.vis=!0)})}}}var g=a("d3"),h=a("../../lib"),i=a("../../components/drawing"),j=a("../../components/errorbars"),k=a("./subtypes"),l=a("./arrays_to_calcdata"),m=a("./line_points"),n=a("./link_traces"),o=a("../../lib/polygon").tester;b.exports=function(a,b,c,f,h){var i,j,k,l,m,o=b.plot.select("g.scatterlayer"),p=!f,q=!!f&&f.duration>0;for(k=o.selectAll("g.trace"),l=k.data(c,function(a){return a[0].trace.uid}),l.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",2),n(a,b,c),d(a,o),i=0,j=[];i<c.length;i++)j[i]=c[i][0].trace.uid;if(o.selectAll("g.trace").sort(function(a,b){var c=j.indexOf(a[0].trace.uid),d=j.indexOf(b[0].trace.uid);return c>d?1:-1}),q){h&&(m=h());var r=g.transition().duration(f.duration).ease(f.easing).each("end",function(){m&&m()}).each("interrupt",function(){m&&m()});r.each(function(){o.selectAll("g.trace").each(function(d,g){e(a,g,b,d,c,this,f)})})}else o.selectAll("g.trace").each(function(d,g){e(a,g,b,d,c,this,f)});p&&l.exit().remove(),o.selectAll("path:not([d])").remove()}},{"../../components/drawing":557,"../../components/errorbars":563,"../../lib":632,"../../lib/polygon":639,"./arrays_to_calcdata":843,"./line_points":856,"./link_traces":858,"./subtypes":864,d3:95}],862:[function(a,b,c){"use strict";var d=a("./subtypes"),e=.2;b.exports=function(a,b){var c,f,g,h,i=a.cd,j=a.xaxis,k=a.yaxis,l=[],m=i[0].trace,n=m.index,o=m.marker,p=!d.hasMarkers(m)&&!d.hasText(m);if(m.visible===!0&&!p){var q=Array.isArray(o.opacity)?1:o.opacity;if(b===!1)for(c=0;c<i.length;c++)i[c].dim=0;else for(c=0;c<i.length;c++)f=i[c],g=j.c2p(f.x),h=k.c2p(f.y),b.contains([g,h])?(l.push({curveNumber:n,pointNumber:c,x:f.x,y:f.y,id:f.id}),f.dim=0):f.dim=1;return i[0].node3.selectAll("path.point").style("opacity",function(a){return((a.mo+1||q+1)-1)*(a.dim?e:1)}),i[0].node3.selectAll("text").style("opacity",function(a){return a.dim?e:1}),l}}},{"./subtypes":864}],863:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/drawing"),f=a("../../components/errorbars");b.exports=function(a){var b=d.select(a).selectAll("g.trace.scatter");b.style("opacity",function(a){return a[0].trace.opacity}),b.selectAll("g.points").each(function(a){d.select(this).selectAll("path.point").call(e.pointStyle,a.trace||a[0].trace),d.select(this).selectAll("text").call(e.textPointStyle,a.trace||a[0].trace)}),b.selectAll("g.trace path.js-line").call(e.lineGroupStyle),b.selectAll("g.trace path.js-fill").call(e.fillGroupStyle),b.call(f.style)}},{"../../components/drawing":557,"../../components/errorbars":563,d3:95}],864:[function(a,b,c){"use strict";var d=a("../../lib");b.exports={hasLines:function(a){return a.visible&&a.mode&&a.mode.indexOf("lines")!==-1},hasMarkers:function(a){return a.visible&&a.mode&&a.mode.indexOf("markers")!==-1},hasText:function(a){return a.visible&&a.mode&&a.mode.indexOf("text")!==-1},isBubble:function(a){return d.isPlainObject(a.marker)&&Array.isArray(a.marker.size)}}},{"../../lib":632}],865:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c,e){e("textposition"),d.coerceFont(e,"textfont",c.font)}},{"../../lib":632}],866:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d,e=c("x"),f=c("y");if(e)f?(d=Math.min(e.length,f.length),d<e.length&&(b.x=e.slice(0,d)),d<f.length&&(b.y=f.slice(0,d))):(d=e.length,c("y0"),c("dy"));else{if(!f)return 0;d=b.y.length,c("x0"),c("dx")}return d}},{}],867:[function(a,b,c){"use strict";function d(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var e=a("../scatter/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../constants/gl_markers"),h=a("../../lib/extend").extendFlat,i=e.line,j=e.marker,k=j.line;b.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},text:h({},e.text,{}),mode:h({},e.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:d("x"),y:d("y"),z:d("z")},connectgaps:e.connectgaps,line:h({},{width:i.width,dash:i.dash,showscale:{valType:"boolean",dflt:!1}},f("line")),marker:h({},{symbol:{valType:"enumerated",values:Object.keys(g),dflt:"circle",arrayOk:!0},size:h({},j.size,{dflt:8}),sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,opacity:h({},j.opacity,{arrayOk:!1}),showscale:j.showscale,line:h({},{width:h({},k.width,{arrayOk:!1})},f("marker.line"))},f("marker")),textposition:h({},e.textposition,{dflt:"top center"}),textfont:e.textfont,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars",error_z:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../components/colorscale/color_attributes":541,"../../constants/gl_markers":616,"../../lib/extend":625,"../scatter/attributes":844}],868:[function(a,b,c){"use strict";var d=a("../scatter/arrays_to_calcdata"),e=a("../scatter/colorscale_calc");b.exports=function(a,b){var c=[{x:!1,y:!1,trace:b,t:{}}];return d(c),e(b),c}},{"../scatter/arrays_to_calcdata":843,"../scatter/colorscale_calc":848}],869:[function(a,b,c){"use strict";function d(a,b,c){if(!b||!b.visible)return null;for(var d=g(b),e=new Array(a.length),f=0;f<a.length;f++){var h=d(+a[f],f);e[f]=[-h[0]*c,h[1]*c]}return e}function e(a){for(var b=0;b<a.length;b++)if(a[b])return a[b].length;return 0}function f(a,b){var c=[d(a.x,a.error_x,b[0]),d(a.y,a.error_y,b[1]),d(a.z,a.error_z,b[2])],f=e(c);if(0===f)return null;for(var g=new Array(f),h=0;h<f;h++){for(var i=[[0,0,0],[0,0,0]],j=0;j<3;j++)if(c[j])for(var k=0;k<2;k++)i[k][j]=c[j][h][k];g[h]=i}return g}var g=a("../../components/errorbars/compute_error");b.exports=f},{"../../components/errorbars/compute_error":561}],870:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function e(a,b,c){var d,e=(c+1)%3,f=(c+2)%3,g=[],h=[];for(d=0;d<a.length;++d){var i=a[d];!isNaN(i[e])&&isFinite(i[e])&&!isNaN(i[f])&&isFinite(i[f])&&(g.push([i[e],i[f]]),h.push(d))}var j=r(g);for(d=0;d<j.length;++d)for(var k=j[d],l=0;l<k.length;++l)k[l]=h[k[l]];return{positions:a,cells:j,meshColor:b}}function f(a){for(var b=[0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0],e=0;e<3;e++){var f=a[e];f&&f.copy_zstyle!==!1&&(f=a[2]),f&&(b[e]=f.width/2,c[e]=t(f.color),d=f.thickness)}return{capSize:b,color:c,lineWidth:d}}function g(a){var b=[0,0];return Array.isArray(a)?[0,-1]:(a.indexOf("bottom")>=0&&(b[1]+=1),a.indexOf("top")>=0&&(b[1]-=1),a.indexOf("left")>=0&&(b[0]-=1),a.indexOf("right")>=0&&(b[0]+=1),b)}function h(a,b){return b(4*a)}function i(a){return x[a]}function j(a,b,c,d,e){var f=null;if(Array.isArray(a)){f=[];for(var g=0;g<b;g++)void 0===a[g]?f[g]=d:f[g]=c(a[g],e)}else f=c(a,s.identity);return f}function k(a,b){var c,d,e,k,l,m,n=[],o=a.fullSceneLayout,p=a.dataScale,q=o.xaxis,r=o.yaxis,w=o.zaxis,x=b.marker,z=b.line,A=b.x||[],B=b.y||[],C=b.z||[],D=A.length;for(d=0;d<D;d++)e=q.d2l(A[d])*p[0],k=r.d2l(B[d])*p[1],l=w.d2l(C[d])*p[2],n[d]=[e,k,l];if(Array.isArray(b.text))m=b.text;else if(void 0!==b.text)for(m=new Array(D),d=0;d<D;d++)m[d]=b.text;if(c={position:n,mode:b.mode,text:m},"line"in b&&(c.lineColor=u(z,1,D),c.lineWidth=z.width,c.lineDashes=z.dash),"marker"in b){var E=v(b);c.scatterColor=u(x,1,D),c.scatterSize=j(x.size,D,h,20,E),c.scatterMarker=j(x.symbol,D,i,"●"),c.scatterLineWidth=x.line.width,c.scatterLineColor=u(x.line,1,D),c.scatterAngle=0}"textposition"in b&&(c.textOffset=g(b.textposition),c.textColor=u(b.textfont,1,D),c.textSize=j(b.textfont.size,D,s.identity,12),c.textFont=b.textfont.family,c.textAngle=0);var F=["x","y","z"];for(c.project=[!1,!1,!1],c.projectScale=[1,1,1],c.projectOpacity=[1,1,1],d=0;d<3;++d){var G=b.projection[F[d]];(c.project[d]=G.show)&&(c.projectOpacity[d]=G.opacity,c.projectScale[d]=G.scale)}c.errorBounds=y(b,p);var H=f([b.error_x,b.error_y,b.error_z]);return c.errorColor=H.color,c.errorLineWidth=H.lineWidth,c.errorCapSize=H.capSize,c.delaunayAxis=b.surfaceaxis,c.delaunayColor=t(b.surfacecolor),c}function l(a){if(Array.isArray(a)){var b=a[0];return Array.isArray(b)&&(a=b),"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}function m(a,b){var c=new d(a,b.uid);return c.update(b),c}var n=a("gl-line3d"),o=a("gl-scatter3d"),p=a("gl-error3d"),q=a("gl-mesh3d"),r=a("delaunay-triangulate"),s=a("../../lib"),t=a("../../lib/str2rgbarray"),u=a("../../lib/gl_format_color"),v=a("../scatter/make_bubble_size_func"),w=a("../../constants/gl3d_dashes"),x=a("../../constants/gl_markers"),y=a("./calc_errors"),z=d.prototype;z.handlePick=function(a){if(a.object&&(a.object===this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){a.object.highlight&&a.object.highlight(null),this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data)),this.textLabels&&void 0!==this.textLabels[a.data.index]?a.textLabel=this.textLabels[a.data.index]:a.textLabel="";var b=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},z.update=function(a){var b,c,d,f,g=this.scene.glplot.gl,h=w.solid;this.data=a;var i=k(this.scene,a);"mode"in i&&(this.mode=i.mode),"lineDashes"in i&&i.lineDashes in w&&(h=w[i.lineDashes]),this.color=l(i.scatterColor)||l(i.lineColor),this.dataPoints=i.position,b={gl:g,position:i.position,color:i.lineColor,lineWidth:i.lineWidth||1,dashes:h[0],dashScale:h[1],opacity:a.opacity,connectGaps:a.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(b):(this.linePlot=n(b),this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=a.opacity;if(a.marker&&a.marker.opacity&&(j*=a.marker.opacity),c={gl:g,position:i.position,color:i.scatterColor,size:i.scatterSize,glyph:i.scatterMarker,opacity:j,orthographic:!0,lineWidth:i.scatterLineWidth,lineColor:i.scatterLineColor,project:i.project,projectScale:i.projectScale,projectOpacity:i.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(c):(this.scatterPlot=o(c),this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),f={gl:g,position:i.position,glyph:i.text,color:i.textColor,size:i.textSize,angle:i.textAngle,alignment:i.textOffset,font:i.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity},this.textLabels=i.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(f):(this.textMarkers=o(f),this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),d={gl:g,position:i.position,color:i.errorColor,error:i.errorBounds,lineWidth:i.errorLineWidth,capSize:i.errorCapSize,opacity:a.opacity},this.errorBars?i.errorBounds?this.errorBars.update(d):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):i.errorBounds&&(this.errorBars=p(d),this.scene.glplot.add(this.errorBars)),i.delaunayAxis>=0){var m=e(i.position,i.delaunayColor,i.delaunayAxis);m.opacity=a.opacity,this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=g,this.delaunayMesh=q(m),this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},z.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},b.exports=m},{"../../constants/gl3d_dashes":615,"../../constants/gl_markers":616,"../../lib":632,"../../lib/gl_format_color":630,"../../lib/str2rgbarray":645,"../scatter/make_bubble_size_func":859,"./calc_errors":869,"delaunay-triangulate":96,"gl-error3d":133,"gl-line3d":140,"gl-mesh3d":173,"gl-scatter3d":216}],871:[function(a,b,c){"use strict";function d(a,b,c){var d=0,e=c("x"),f=c("y"),g=c("z");return e&&f&&g&&(d=Math.min(e.length,f.length,g.length),d<e.length&&(b.x=e.slice(0,d)),d<f.length&&(b.y=f.slice(0,d)),d<g.length&&(b.z=g.slice(0,d))),d}var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../../components/errorbars/defaults"),k=a("./attributes");b.exports=function(a,b,c,l){function m(c,d){return e.coerce(a,b,k,c,d)}var n=d(a,b,m);if(!n)return void(b.visible=!1);m("text"),m("mode"),f.hasLines(b)&&(m("connectgaps"),h(a,b,c,l,m)),f.hasMarkers(b)&&g(a,b,c,l,m),f.hasText(b)&&i(a,b,l,m);var o=(b.line||{}).color,p=(b.marker||{}).color;m("surfaceaxis")>=0&&m("surfacecolor",o||p);for(var q=["x","y","z"],r=0;r<3;++r){var s="projection."+q[r];m(s+".show")&&(m(s+".opacity"),m(s+".scale"))}j(a,b,c,{axis:"z"}),j(a,b,c,{axis:"y",inherit:"z"}),j(a,b,c,{axis:"x",inherit:"z"})}},{"../../components/errorbars/defaults":562,"../../lib":632,"../scatter/line_defaults":855,"../scatter/marker_defaults":860,"../scatter/subtypes":864,"../scatter/text_defaults":865,"./attributes":867}],872:[function(a,b,c){"use strict";var d={};d.plot=a("./convert"),d.attributes=a("./attributes"),d.markerSymbols=a("../../constants/gl_markers"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.moduleType="trace",d.name="scatter3d",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d","symbols","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../constants/gl_markers":616,"../../plots/gl3d":702,"../scatter/colorbar":847,"./attributes":867,"./calc":868,"./convert":870,"./defaults":871}],873:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../lib/extend").extendFlat,h=d.marker,i=d.line,j=h.line;b.exports={lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:g({},d.mode,{dflt:"markers"}),text:g({},d.text,{}),textfont:d.textfont,textposition:d.textposition,line:{color:i.color,width:i.width,dash:i.dash},connectgaps:d.connectgaps,marker:g({},{symbol:h.symbol,opacity:h.opacity,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,showscale:h.showscale,line:g({},{width:j.width},f("marker.line"))},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:d.fillcolor,hoverinfo:g({},e.hoverinfo,{flags:["lon","lat","location","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../components/colorscale/color_attributes":541,"../../lib/extend":625,"../../plots/attributes":660,"../scatter/attributes":844}],874:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../scatter/colorscale_calc");b.exports=function(a,b){for(var c=Array.isArray(b.locations),f=c?b.locations.length:b.lon.length,g=[],h=0,i=0;i<f;i++){var j,k={};if(c){var l=b.locations[i];k.loc=l,j="string"!=typeof l}else{var m=b.lon[i],n=b.lat[i];k.lonlat=[+m,+n],j=!d(m)||!d(n)}j?h>0&&(g[h-1].gapAfter=!0):(h++,g.push(k))}return e(b),g}},{"../scatter/colorscale_calc":848,"fast-isnumeric":104}],875:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=0,g=c("locations");return g?(c("locationmode"),f=g.length):(d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length),f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f)}var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("./attributes");b.exports=function(a,b,c,l){function m(c,d){return e.coerce(a,b,k,c,d)}var n=d(a,b,m);return n?(m("text"),m("mode"),f.hasLines(b)&&(h(a,b,c,l,m),m("connectgaps")),f.hasMarkers(b)&&g(a,b,c,l,m),f.hasText(b)&&i(a,b,l,m),m("fill"),"none"!==b.fill&&j(a,b,c,m),void m("hoverinfo",1===l._dataLength?"lon+lat+location+text":void 0)):void(b.visible=!1)}},{"../../lib":632,"../scatter/fillcolor_defaults":851,"../scatter/line_defaults":855,"../scatter/marker_defaults":860,"../scatter/subtypes":864,"../scatter/text_defaults":865,"./attributes":873}],876:[function(a,b,c){"use strict";b.exports=function(a,b){return a.lon=b.lon,a.lat=b.lat,a.location=b.lon?b.lon:null,a}},{}],877:[function(a,b,c){"use strict";function d(a,b,c){function d(a){return f.tickText(c,c.c2l(a),"hover").text+"°"}var e=a.hoverinfo,g="all"===e?h.hoverinfo.flags:e.split("+"),i=g.indexOf("location")!==-1&&Array.isArray(a.locations),j=g.indexOf("lon")!==-1,k=g.indexOf("lat")!==-1,l=g.indexOf("text")!==-1,m=[];return i?m.push(b.loc):j&&k?m.push("("+d(b.lonlat[0])+", "+d(b.lonlat[1])+")"):j?m.push("lon: "+d(b.lonlat[0])):k&&m.push("lat: "+d(b.lonlat[1])),l&&m.push(b.tx||a.text),m.join("<br>")}var e=a("../../plots/cartesian/graph_interact"),f=a("../../plots/cartesian/axes"),g=a("../scatter/get_trace_color"),h=a("./attributes");b.exports=function(a){function b(a){return k.projection(a)}function c(a){var c=a.lonlat;if(null===c[0]||null===c[1])return 1/0;if(k.isLonLatOverEdges(c))return 1/0;var d=b(c),e=i.c2p(),f=j.c2p(),g=Math.abs(e-d[0]),h=Math.abs(f-d[1]),l=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(g*g+h*h)-l,1-3/l)}var f=a.cd,h=f[0].trace,i=a.xa,j=a.ya,k=a.subplot;if(!f[0].placeholder&&(e.getClosest(f,c,a),a.index!==!1)){var l=f[a.index],m=l.lonlat,n=b(m),o=l.mrc||1;return a.x0=n[0]-o,a.x1=n[0]+o,a.y0=n[1]-o,a.y1=n[1]+o,a.loc=l.loc,a.lat=m[0],a.lon=m[1],a.color=g(h,l),a.extraText=d(h,l,k.mockAxis),[a]}}},{"../../plots/cartesian/axes":662,"../../plots/cartesian/graph_interact":670,"../scatter/get_trace_color":852,"./attributes":873}],878:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="scattergeo",d.basePlotModule=a("../../plots/geo"),d.categories=["geo","symbols","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../plots/geo":687,"../scatter/colorbar":847,"./attributes":873,"./calc":874,"./defaults":875,"./event_data":876,"./hover":877,"./plot":879}],879:[function(a,b,c){"use strict";function d(a,b){if(!Array.isArray(a.locations))return j.identity;var c=k(a,b),d=a.locationmode;return function(a){var b=l(d,a.loc,c);return b?(a.lonlat=b.properties.ct,a):(a.lonlat=[null,null],!1)}}function e(a,b,c){function d(a,d){n(a,b,d,c)}var e=a.marker;if(d(a.text,"tx"),d(a.textposition,"tp"),a.textfont&&(d(a.textfont.size,"ts"),d(a.textfont.color,"tc"),d(a.textfont.family,"tf")),e&&e.line){var f=e.line;d(e.opacity,"mo"),d(e.symbol,"mx"),d(e.color,"mc"),d(e.size,"ms"),d(f.color,"mlc"),d(f.width,"mlw")}}function f(a){var b=a.framework.selectAll("g.trace.scattergeo");b.style("opacity",function(a){return a[0].trace.opacity}),b.each(function(a){var b=a[0].trace,c=g.select(this);c.selectAll("path.point").call(h.pointStyle,b),c.selectAll("text").call(h.textPointStyle,b)}),b.selectAll("path.js-line").style("fill","none").each(function(a){var b=g.select(this),c=a.trace,d=c.line||{};b.call(i.stroke,d.color).call(h.dashLine,d.dash||"",d.width||0),"none"!==c.fill&&b.call(i.fill,c.fillcolor)})}var g=a("d3"),h=a("../../components/drawing"),i=a("../../components/color"),j=a("../../lib"),k=a("../../lib/topojson_utils").getTopojsonFeatures,l=a("../../lib/geo_location_utils").locationToFeature,m=a("../../lib/geojson_utils"),n=a("../../lib/array_to_calc_item"),o=a("../scatter/subtypes");b.exports=function(a,b){function c(a){return a[0].trace.uid}var h=a.framework.select(".scattergeolayer").selectAll("g.trace.scattergeo").data(b,c);h.enter().append("g").attr("class","trace scattergeo"),h.exit().remove(),h.selectAll("*").remove(),h.each(function(b){var c=g.select(this),f=b[0].trace,h=d(f,a.topojson);b[0].placeholder&&c.remove();for(var i=[],j=0;j<b.length;j++){var k=h(b[j]);k&&(e(f,b[j],j),i.push(k))}if(o.hasLines(f)||"none"!==f.fill){var l=m.calcTraceToLineCoords(i),n="none"!==f.fill?m.makePolygon(l,f):m.makeLine(l,f);c.selectAll("path.js-line").data([n]).enter().append("path").classed("js-line",!0)}o.hasMarkers(f)&&c.selectAll("path.point").data(i).enter().append("path").classed("point",!0),o.hasText(f)&&c.selectAll("g").data(i).enter().append("g").append("text")}),f(a)}},{"../../components/color":533,"../../components/drawing":557,"../../lib":632,"../../lib/array_to_calc_item":621,"../../lib/geo_location_utils":628,
"../../lib/geojson_utils":629,"../../lib/topojson_utils":647,"../scatter/subtypes":864,d3:95}],880:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/color_attributes"),f=a("../../constants/gl2d_dashes"),g=a("../../constants/gl_markers"),h=a("../../lib/extend").extendFlat,i=a("../../lib/extend").extendDeep,j=d.line,k=d.marker,l=k.line;b.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:h({},d.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:j.color,width:j.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},marker:i({},e("marker"),{symbol:{valType:"enumerated",values:Object.keys(g),dflt:"circle",arrayOk:!0},size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:k.opacity,showscale:k.showscale,line:i({},e("marker.line"),{width:l.width})}),connectgaps:d.connectgaps,fill:h({},d.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:d.fillcolor,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../components/colorscale/color_attributes":541,"../../constants/gl2d_dashes":614,"../../constants/gl_markers":616,"../../lib/extend":625,"../scatter/attributes":844}],881:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="scattergl",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.connectgaps=!0,this.idToIndex=[],this.bounds=[0,0,0,0],this.hasLines=!1,this.lineOptions={positions:new Float64Array(0),color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]},this.line=n(a.glplot,this.lineOptions),this.line._trace=this,this.hasErrorX=!1,this.errorXOptions={positions:new Float64Array(0),errors:new Float64Array(0),lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorX=o(a.glplot,this.errorXOptions),this.errorX._trace=this,this.hasErrorY=!1,this.errorYOptions={positions:new Float64Array(0),errors:new Float64Array(0),lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorY=o(a.glplot,this.errorYOptions),this.errorY._trace=this,this.hasMarkers=!1,this.scatterOptions={positions:new Float64Array(0),sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1]},this.scatter=l(a.glplot,this.scatterOptions),this.scatter._trace=this,this.fancyScatter=m(a.glplot,this.scatterOptions),this.fancyScatter._trace=this}function e(a,b,c){return Array.isArray(b)||(b=[b]),f(a,b,c)}function f(a,b,c){for(var d=new Array(c),e=b[0],f=0;f<c;++f)d[f]=a(f>=b.length?e:b[f]);return d}function g(a,b,c){return i(F(a,c),E(b,c),c)}function h(a,b,c,d){var e=w(a,b,d);return e=Array.isArray(e[0])?e:f(q.identity,[e],d),i(e,E(c,d),d)}function i(a,b,c){for(var d=new Array(4*c),e=0;e<c;++e){for(var f=0;f<3;++f)d[4*e+f]=a[e][f];d[4*e+3]=a[e][3]*b[e]}return d}function j(a){for(var b,c=a.length,d=Math.max(0,(c-1)/Math.min(Math.max(c,1),1e3)),e=0;e<c;e+=d)if(b=a[Math.floor(e)],!(p(b)||b instanceof Date))return!1;return!0}function k(a,b){var c=new d(a,b.uid);return c.update(b),c}var l=a("gl-scatter2d"),m=a("gl-scatter2d-fancy"),n=a("gl-line2d"),o=a("gl-error2d"),p=a("fast-isnumeric"),q=a("../../lib"),r=a("../../plots/cartesian/axes"),s=a("../../plots/cartesian/axis_autotype"),t=a("../../components/errorbars"),u=a("../../lib/str2rgbarray"),v=a("../../lib/typed_array_truncate"),w=a("../../lib/gl_format_color"),x=a("../scatter/subtypes"),y=a("../scatter/make_bubble_size_func"),z=a("../scatter/get_trace_color"),A=a("../../constants/gl_markers"),B=a("../../constants/gl2d_dashes"),C=["xaxis","yaxis"],D=d.prototype;D.handlePick=function(a){var b=a.pointId;(a.object!==this.line||this.connectgaps)&&(b=this.idToIndex[a.pointId]);var c=this.pickXData[b];return{trace:this,dataCoord:a.dataCoord,traceCoord:[p(c)||!q.isDateTime(c)?c:q.dateTime2ms(c),this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:Array.isArray(this.color)?this.color[b]:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}},D.isFancy=function(a){if("linear"!==this.scene.xaxis.type&&"date"!==this.scene.xaxis.type)return!0;if("linear"!==this.scene.yaxis.type)return!0;if(!a.x||!a.y)return!0;if(this.hasMarkers){var b=a.marker||{};if(Array.isArray(b.symbol)||"circle"!==b.symbol||Array.isArray(b.size)||Array.isArray(b.color)||Array.isArray(b.line.width)||Array.isArray(b.line.color)||Array.isArray(b.opacity))return!0}return!(!this.hasLines||this.connectgaps)||!!this.hasErrorX||!!this.hasErrorY};var E=e.bind(null,function(a){return+a}),F=e.bind(null,u),G=e.bind(null,function(a){return A[a]||"●"});D.update=function(a){a.visible!==!0?(this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1):(this.hasLines=x.hasLines(a),this.hasErrorX=a.error_x.visible===!0,this.hasErrorY=a.error_y.visible===!0,this.hasMarkers=x.hasMarkers(a)),this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.connectgaps=!!a.connectgaps,this.isFancy(a)?this.updateFancy(a):this.updateFast(a),this.color=z(a,{})},D.updateFast=function(a){var b,c,d=this.xData=this.pickXData=a.x,e=this.yData=this.pickYData=a.y,f=d.length,g=new Array(f),h=new Float64Array(2*f),i=this.bounds,k=0,l=0,m=j(d),n=!m&&"date"===s(d);if(m||n)for(var o=0;o<f;++o)b=d[o],c=e[o],p(c)&&(m||(b=q.dateTime2ms(b)),g[k++]=o,h[l++]=b,h[l++]=c,i[0]=Math.min(i[0],b),i[1]=Math.min(i[1],c),i[2]=Math.max(i[2],b),i[3]=Math.max(i[3],c));h=v(h,l),this.idToIndex=g,this.updateLines(a,h),this.updateError("X",a),this.updateError("Y",a);var r;if(this.hasMarkers){this.scatterOptions.positions=h;var t=u(a.marker.color),w=u(a.marker.line.color),x=a.opacity*a.marker.opacity;t[3]*=x,this.scatterOptions.color=t,w[3]*=x,this.scatterOptions.borderColor=w,r=a.marker.size,this.scatterOptions.size=r,this.scatterOptions.borderSize=a.marker.line.width,this.scatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions);this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions),this.expandAxesFast(i,r)},D.updateFancy=function(a){var b=this.scene,c=b.xaxis,d=b.yaxis,f=this.bounds,g=this.pickXData=c.makeCalcdata(a,"x").slice(),i=this.pickYData=d.makeCalcdata(a,"y").slice();this.xData=g.slice(),this.yData=i.slice();var j,k,l,m,n,o,p,q,r=t.calcFromTrace(a,b.fullLayout),s=g.length,u=new Array(s),w=new Float64Array(2*s),x=new Float64Array(4*s),z=new Float64Array(4*s),A=0,B=0,C=0,D=0,F="log"===c.type?function(a){return c.d2l(a)}:function(a){return a},H="log"===d.type?function(a){return d.d2l(a)}:function(a){return a};for(j=0;j<s;++j)this.xData[j]=l=F(g[j]),this.yData[j]=m=H(i[j]),isNaN(l)||isNaN(m)||(u[A++]=j,w[B++]=l,w[B++]=m,n=x[C++]=l-r[j].xs||0,o=x[C++]=r[j].xh-l||0,x[C++]=0,x[C++]=0,z[D++]=0,z[D++]=0,p=z[D++]=m-r[j].ys||0,q=z[D++]=r[j].yh-m||0,f[0]=Math.min(f[0],l-n),f[1]=Math.min(f[1],m-p),f[2]=Math.max(f[2],l+o),f[3]=Math.max(f[3],m+q));w=v(w,B),this.idToIndex=u,this.updateLines(a,w),this.updateError("X",a,w,x),this.updateError("Y",a,w,z);var I;if(this.hasMarkers){this.scatterOptions.positions=w,this.scatterOptions.sizes=new Array(A),this.scatterOptions.glyphs=new Array(A),this.scatterOptions.borderWidths=new Array(A),this.scatterOptions.colors=new Array(4*A),this.scatterOptions.borderColors=new Array(4*A);var J,K=y(a),L=a.marker,M=L.opacity,N=a.opacity,O=h(L,M,N,s),P=G(L.symbol,s),Q=E(L.line.width,s),R=h(L.line,M,N,s);for(I=e(K,L.size,s),j=0;j<A;++j)for(J=u[j],this.scatterOptions.sizes[j]=4*I[J],this.scatterOptions.glyphs[j]=P[J],this.scatterOptions.borderWidths[j]=.5*Q[J],k=0;k<4;++k)this.scatterOptions.colors[4*j+k]=O[4*J+k],this.scatterOptions.borderColors[4*j+k]=R[4*J+k];this.fancyScatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions);this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions),this.expandAxesFancy(g,i,I)},D.updateLines=function(a,b){var c;if(this.hasLines){var d=b;if(!a.connectgaps){var e=0,f=this.xData,h=this.yData;for(d=new Float64Array(2*f.length),c=0;c<f.length;++c)d[e++]=f[c],d[e++]=h[c]}this.lineOptions.positions=d;var i=g(a.line.color,a.opacity,1),j=Math.round(.5*this.lineOptions.width),k=(B[a.line.dash]||[1]).slice();for(c=0;c<k.length;++c)k[c]*=j;switch(a.fill){case"tozeroy":this.lineOptions.fill=[!1,!0,!1,!1];break;case"tozerox":this.lineOptions.fill=[!0,!1,!1,!1];break;default:this.lineOptions.fill=[!1,!1,!1,!1]}var l=u(a.fillcolor);this.lineOptions.color=i,this.lineOptions.width=2*a.line.width,this.lineOptions.dashes=k,this.lineOptions.fillColor=[l,l,l,l]}else this.lineOptions.positions=new Float64Array(0);this.line.update(this.lineOptions)},D.updateError=function(a,b,c,d){var e=this["error"+a],f=b["error_"+a.toLowerCase()],h=this["error"+a+"Options"];"x"===a.toLowerCase()&&f.copy_ystyle&&(f=b.error_y),this["hasError"+a]?(h.positions=c,h.errors=d,h.capSize=f.width,h.lineWidth=f.thickness/2,h.color=g(f.color,1,1)):h.positions=new Float64Array(0),e.update(h)},D.expandAxesFast=function(a,b){for(var c,d,e,f=b||10,g=0;g<2;g++)c=this.scene[C[g]],d=c._min,d||(d=[]),d.push({val:a[g],pad:f}),e=c._max,e||(e=[]),e.push({val:a[g+2],pad:f})},D.expandAxesFancy=function(a,b,c){var d=this.scene,e={padded:!0,ppad:c};r.expand(d.xaxis,a,e),r.expand(d.yaxis,b,e)},D.dispose=function(){this.line.dispose(),this.errorX.dispose(),this.errorY.dispose(),this.scatter.dispose(),this.fancyScatter.dispose()},b.exports=k},{"../../components/errorbars":563,"../../constants/gl2d_dashes":614,"../../constants/gl_markers":616,"../../lib":632,"../../lib/gl_format_color":630,"../../lib/str2rgbarray":645,"../../lib/typed_array_truncate":648,"../../plots/cartesian/axes":662,"../../plots/cartesian/axis_autotype":663,"../scatter/get_trace_color":852,"../scatter/make_bubble_size_func":859,"../scatter/subtypes":864,"fast-isnumeric":104,"gl-error2d":131,"gl-line2d":138,"gl-scatter2d":213,"gl-scatter2d-fancy":208}],882:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/xy_defaults"),h=a("../scatter/marker_defaults"),i=a("../scatter/line_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("../../components/errorbars/defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o=g(a,b,n);return o?(n("text"),n("mode",o<e.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(b)&&(n("connectgaps"),i(a,b,c,m,n)),f.hasMarkers(b)&&h(a,b,c,m,n),n("fill"),"none"!==b.fill&&j(a,b,c,n),k(a,b,c,{axis:"y"}),void k(a,b,c,{axis:"x",inherit:"y"})):void(b.visible=!1)}},{"../../components/errorbars/defaults":562,"../../lib":632,"../scatter/constants":849,"../scatter/fillcolor_defaults":851,"../scatter/line_defaults":855,"../scatter/marker_defaults":860,"../scatter/subtypes":864,"../scatter/xy_defaults":866,"./attributes":880}],883:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("../scatter3d/calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="scattergl",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl2d","symbols","errorBarsOK","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../plots/gl2d":699,"../scatter/colorbar":847,"../scatter3d/calc":868,"./attributes":880,"./convert":881,"./defaults":882}],884:[function(a,b,c){"use strict";var d=a("../scattergeo/attributes"),e=a("../scatter/attributes"),f=a("../../plots/mapbox/layout_attributes"),g=a("../../plots/attributes"),h=a("../../lib/extend").extendFlat,i=d.line,j=d.marker;b.exports={lon:d.lon,lat:d.lat,mode:{valType:"flaglist",flags:["lines","markers","text"],dflt:"markers",extras:["none"]},text:h({},e.text,{}),line:{color:i.color,width:i.width,dash:i.dash},connectgaps:e.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:h({},j.opacity,{arrayOk:!1}),size:j.size,sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,color:j.color,colorscale:j.colorscale,cauto:j.cauto,cmax:j.cmax,cmin:j.cmin,autocolorscale:j.autocolorscale,reversescale:j.reversescale,showscale:j.showscale},fill:d.fill,fillcolor:e.fillcolor,textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,hoverinfo:h({},g.hoverinfo,{flags:["lon","lat","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../lib/extend":625,"../../plots/attributes":660,"../../plots/mapbox/layout_attributes":719,"../scatter/attributes":844,"../scattergeo/attributes":873}],885:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../components/colorscale"),g=a("../scatter/subtypes"),h=a("../scatter/colorscale_calc"),i=a("../scatter/make_bubble_size_func");b.exports=function(a,b){var c=b.lon.length,j=b.marker,k=g.hasMarkers(b),l=k&&Array.isArray(j.color),m=k&&Array.isArray(j.size),n=k&&Array.isArray(j.symbol),o=Array.isArray(b.text);h(b);for(var p=f.hasColorscale(b,"marker")?f.makeColorScaleFunc(f.extractScale(j.colorscale,j.cmin,j.cmax)):e.identity,q=g.isBubble(b)?i(b):e.identity,r=[],s=0,t=0;t<c;t++){var u=b.lon[t],v=b.lat[t];if(d(u)&&d(v)){var w={};if(s++,w.lonlat=[+u,+v],k){if(l){var x=j.color[t];w.mc=x,w.mcc=p(x)}if(m){var y=j.size[t];w.ms=y,w.mrc=q(y)}if(n){var z=j.symbol[t];w.mx="string"==typeof z?z:"circle"}}if(o){var A=b.text[t];w.tx="string"==typeof A?A:""}r.push(w)}else s>0&&(r[s-1].gapAfter=!0)}return r}},{"../../components/colorscale":548,"../../lib":632,"../scatter/colorscale_calc":848,"../scatter/make_bubble_size_func":859,"../scatter/subtypes":864,"fast-isnumeric":104}],886:[function(a,b,c){"use strict";function d(){return{geojson:l.makeBlank(),layout:{visibility:"none"},paint:{}}}function e(a,b){function c(a,c,d,e){void 0===b[c][d]&&(b[c][d]=e),a[c]=b[c][d]}for(var d=a[0].trace,e=d.marker,f=Array.isArray(e.color),g=Array.isArray(e.size),h=[],i=0;i<a.length;i++){var j=a[i],k={};f&&c(k,o,j.mcc,i),g&&c(k,p,j.mrc,i),h.push({type:"Feature",geometry:{type:"Point",coordinates:j.lonlat},properties:k})}return{type:"FeatureCollection",features:h}}function f(a){for(var b=a[0].trace,c=b.marker||{},d=c.symbol,e=b.text,f="circle"!==d?i(d):j,g=m.hasText(b)?i(e):j,h=[],k=0;k<a.length;k++){var l=a[k];h.push({type:"Feature",geometry:{type:"Point",coordinates:l.lonlat},properties:{symbol:f(l.mx),text:g(l.tx)}})}return{type:"FeatureCollection",features:h}}function g(a,b){var c,d=a.marker;if(Array.isArray(d.color)){for(var e=Object.keys(b[o]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[o][h],h])}c={property:o,stops:f}}else c=d.color;return c}function h(a,b){var c,d=a.marker;if(Array.isArray(d.size)){for(var e=Object.keys(b[p]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[p][h],+h])}f.sort(function(a,b){return a[0]-b[0]}),c={property:p,stops:f}}else c=d.size/2;return c}function i(a){return Array.isArray(a)?function(a){return a}:a?function(){return a}:j}function j(){return""}var k=a("../../lib"),l=a("../../lib/geojson_utils"),m=a("../scatter/subtypes"),n=a("../../plots/mapbox/convert_text_opts"),o="circle-color",p="circle-radius";b.exports=function(a){var b=a[0].trace,c=b.visible===!0,i="none"!==b.fill,j=m.hasLines(b),q=m.hasMarkers(b),r=m.hasText(b),s=q&&"circle"===b.marker.symbol,t=q&&"circle"!==b.marker.symbol,u=d(),v=d(),w=d(),x=d(),y={fill:u,line:v,circle:w,symbol:x};if(!c||a[0].placeholder)return y;var z;if((i||j)&&(z=l.calcTraceToLineCoords(a)),i&&(u.geojson=l.makePolygon(z),u.layout.visibility="visible",k.extendFlat(u.paint,{"fill-color":b.fillcolor})),j&&(v.geojson=l.makeLine(z),v.layout.visibility="visible",k.extendFlat(v.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),s){var A={};A[o]={},A[p]={},w.geojson=e(a,A),w.layout.visibility="visible",k.extendFlat(w.paint,{"circle-opacity":b.opacity*b.marker.opacity,"circle-color":g(b,A),"circle-radius":h(b,A)})}if((t||r)&&(x.geojson=f(a),k.extendFlat(x.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),t&&(k.extendFlat(x.layout,{"icon-size":b.marker.size/10}),k.extendFlat(x.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),r)){var B=(b.marker||{}).size,C=n(b.textposition,B);k.extendFlat(x.layout,{"text-size":b.textfont.size,"text-anchor":C.anchor,"text-offset":C.offset}),k.extendFlat(x.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return y}},{"../../lib":632,"../../lib/geojson_utils":629,"../../plots/mapbox/convert_text_opts":716,"../scatter/subtypes":864}],887:[function(a,b,c){"use strict";function d(a,b,c){var d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length);return f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f}var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("./attributes"),l=a("../scatter/attributes");b.exports=function(a,b,c,m){function n(c,d){return e.coerce(a,b,k,c,d)}function o(c,d){var f=c.indexOf(".line")===-1?k:l;return e.coerce(a,b,f,c,d)}var p=d(a,b,n);if(!p)return void(b.visible=!1);if(n("text"),n("mode"),f.hasLines(b)&&(h(a,b,c,m,n),n("connectgaps")),f.hasMarkers(b)){g(a,b,c,m,o);var q=b.marker;"circle"!==q.symbol&&(Array.isArray(q.size)&&(q.size=q.size[0]),Array.isArray(q.color)&&(q.color=q.color[0]))}f.hasText(b)&&i(a,b,m,n),n("fill"),"none"!==b.fill&&j(a,b,c,n),n("hoverinfo",1===m._dataLength?"lon+lat+text":void 0)}},{"../../lib":632,"../scatter/attributes":844,"../scatter/fillcolor_defaults":851,"../scatter/line_defaults":855,"../scatter/marker_defaults":860,"../scatter/subtypes":864,"../scatter/text_defaults":865,"./attributes":884}],888:[function(a,b,c){"use strict";b.exports=function(a,b){return a.lon=b.lon,a.lat=b.lat,a}},{}],889:[function(a,b,c){"use strict";function d(a,b){function c(a){return a+"°"}var d=a.hoverinfo.split("+"),e=d.indexOf("all")!==-1,f=d.indexOf("lon")!==-1,g=d.indexOf("lat")!==-1,h=b.lonlat,i=[];return e||f&&g?i.push("("+c(h[0])+", "+c(h[1])+")"):f?i.push("lon: "+c(h[0])):g&&i.push("lat: "+c(h[1])),(e||d.indexOf("text")!==-1)&&i.push(b.tx||a.text),i.join("<br>")}var e=a("../../plots/cartesian/graph_interact"),f=a("../scatter/get_trace_color");b.exports=function(a,b,c){function g(a){var b=a.lonlat,d=Math.abs(j.c2p(b)-j.c2p([n,b[1]])),e=Math.abs(k.c2p(b)-k.c2p([b[0],c])),f=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(d*d+e*e)-f,1-3/f)}var h=a.cd,i=h[0].trace,j=a.xa,k=a.ya;if(!h[0].placeholder){var l=b>=0?Math.floor((b+180)/360):Math.ceil((b-180)/360),m=360*l,n=b-m;if(e.getClosest(h,g,a),a.index!==!1){var o=h[a.index],p=o.lonlat,q=[p[0]+m,p[1]],r=j.c2p(q),s=k.c2p(q),t=o.mrc||1;return a.x0=r-t,a.x1=r+t,a.y0=s-t,a.y1=s+t,a.color=f(i,o),a.extraText=d(i,o),[a]}}}},{"../../plots/cartesian/graph_interact":670,"../scatter/get_trace_color":852}],890:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.plot=a("./plot"),d.moduleType="trace",d.name="scattermapbox",d.basePlotModule=a("../../plots/mapbox"),d.categories=["mapbox","gl","symbols","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../plots/mapbox":717,"../scatter/colorbar":847,"./attributes":884,"./calc":885,"./defaults":887,"./event_data":888,"./hover":889,"./plot":891}],891:[function(a,b,c){"use strict";function d(a,b){this.mapbox=a,this.map=a.map,this.uid=b,this.idSourceFill=b+"-source-fill",this.idSourceLine=b+"-source-line",this.idSourceCircle=b+"-source-circle",this.idSourceSymbol=b+"-source-symbol",this.idLayerFill=b+"-layer-fill",this.idLayerLine=b+"-layer-line",this.idLayerCircle=b+"-layer-circle",this.idLayerSymbol=b+"-layer-symbol",this.mapbox.initSource(this.idSourceFill),this.mapbox.initSource(this.idSourceLine),this.mapbox.initSource(this.idSourceCircle),this.mapbox.initSource(this.idSourceSymbol),this.map.addLayer({id:this.idLayerFill,source:this.idSourceFill,type:"fill"}),this.map.addLayer({id:this.idLayerLine,source:this.idSourceLine,type:"line"}),this.map.addLayer({id:this.idLayerCircle,source:this.idSourceCircle,type:"circle"}),this.map.addLayer({id:this.idLayerSymbol,source:this.idSourceSymbol,type:"symbol"})}function e(a){return"visible"===a.layout.visibility}var f=a("./convert"),g=d.prototype;g.update=function(a){var b=this.mapbox,c=f(a);b.setOptions(this.idLayerFill,"setLayoutProperty",c.fill.layout),b.setOptions(this.idLayerLine,"setLayoutProperty",c.line.layout),b.setOptions(this.idLayerCircle,"setLayoutProperty",c.circle.layout),b.setOptions(this.idLayerSymbol,"setLayoutProperty",c.symbol.layout),e(c.fill)&&(b.setSourceData(this.idSourceFill,c.fill.geojson),b.setOptions(this.idLayerFill,"setPaintProperty",c.fill.paint)),e(c.line)&&(b.setSourceData(this.idSourceLine,c.line.geojson),b.setOptions(this.idLayerLine,"setPaintProperty",c.line.paint)),e(c.circle)&&(b.setSourceData(this.idSourceCircle,c.circle.geojson),b.setOptions(this.idLayerCircle,"setPaintProperty",c.circle.paint)),e(c.symbol)&&(b.setSourceData(this.idSourceSymbol,c.symbol.geojson),b.setOptions(this.idLayerSymbol,"setPaintProperty",c.symbol.paint))},g.dispose=function(){var a=this.map;a.removeLayer(this.idLayerFill),a.removeLayer(this.idLayerLine),a.removeLayer(this.idLayerCircle),a.removeLayer(this.idLayerSymbol),a.removeSource(this.idSourceFill),a.removeSource(this.idSourceLine),a.removeSource(this.idSourceCircle),a.removeSource(this.idSourceSymbol)},b.exports=function(a,b){var c=b[0].trace,e=new d(a,c.uid);return e.update(b),e}},{"./convert":886}],892:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../lib/extend").extendFlat,h=d.marker,i=d.line,j=h.line;b.exports={a:{valType:"data_array"},b:{valType:"data_array"},c:{valType:"data_array"},sum:{valType:"number",dflt:0,min:0},mode:g({},d.mode,{dflt:"markers"}),text:g({},d.text,{}),line:{color:i.color,width:i.width,dash:i.dash,shape:g({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing},connectgaps:d.connectgaps,fill:g({},d.fill,{values:["none","toself","tonext"]}),fillcolor:d.fillcolor,marker:g({},{symbol:h.symbol,opacity:h.opacity,maxdisplayed:h.maxdisplayed,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,showscale:h.showscale,line:g({},{width:j.width},f("marker".line))},f("marker")),textfont:d.textfont,textposition:d.textposition,hoverinfo:g({},e.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:d.hoveron,_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../components/colorscale/color_attributes":541,"../../lib/extend":625,"../../plots/attributes":660,"../scatter/attributes":844}],893:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../../lib"),g=a("../scatter/subtypes"),h=a("../scatter/colorscale_calc"),i=["a","b","c"],j={a:["b","c"],b:["a","c"],c:["a","b"]};b.exports=function(a,b){var c,k,l,m,n,o,p=a._fullLayout[b.subplot],q=p.sum,r=b.sum||q;for(c=0;c<i.length;c++)if(l=i[c],!b[l]){for(n=b[j[l][0]],o=b[j[l][1]],m=new Array(n.length),k=0;k<n.length;k++)m[k]=r-n[k]-o[k];b[l]=m}var s,t,u,v,w,x,y=b.a.length,z=new Array(y);for(c=0;c<y;c++)s=b.a[c],t=b.b[c],u=b.c[c],d(s)&&d(t)&&d(u)?(s=+s,t=+t,u=+u,v=q/(s+t+u),1!==v&&(s*=v,t*=v,u*=v),x=s,w=u-t,z[c]={x:w,y:x,a:s,b:t,c:u}):z[c]={x:!1,y:!1};var A,B;if(g.hasMarkers(b)&&(A=b.marker,B=A.size,Array.isArray(B))){var C={type:"linear"};e.setConvert(C),B=C.makeCalcdata(b.marker,"size"),B.length>y&&B.splice(y,B.length-y)}return h(b),"undefined"!=typeof B&&f.mergeArray(B,z,"ms"),z}},{"../../lib":632,"../../plots/cartesian/axes":662,"../scatter/colorscale_calc":848,"../scatter/subtypes":864,"fast-isnumeric":104}],894:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/line_shape_defaults"),j=a("../scatter/text_defaults"),k=a("../scatter/fillcolor_defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o,p=n("a"),q=n("b"),r=n("c");if(p?(o=p.length,q?(o=Math.min(o,q.length),r&&(o=Math.min(o,r.length))):o=r?Math.min(o,r.length):0):q&&r&&(o=Math.min(q.length,r.length)),!o)return void(b.visible=!1);p&&o<p.length&&(b.a=p.slice(0,o)),q&&o<q.length&&(b.b=q.slice(0,o)),r&&o<r.length&&(b.c=r.slice(0,o)),n("sum"),n("text");var s=o<e.PTS_LINESONLY?"lines+markers":"lines";n("mode",s),f.hasLines(b)&&(h(a,b,c,m,n),i(a,b,n),n("connectgaps")),f.hasMarkers(b)&&g(a,b,c,m,n),f.hasText(b)&&j(a,b,m,n);var t=[];(f.hasMarkers(b)||f.hasText(b))&&(n("marker.maxdisplayed"),t.push("points")),n("fill"),"none"!==b.fill&&(k(a,b,c,n),f.hasLines(b)||i(a,b,n)),n("hoverinfo",1===m._dataLength?"a+b+c+text":void 0),"tonext"!==b.fill&&"toself"!==b.fill||t.push("fills"),n("hoveron",t.join("+")||"points")}},{"../../lib":632,"../scatter/constants":849,"../scatter/fillcolor_defaults":851,"../scatter/line_defaults":855,"../scatter/line_shape_defaults":857,"../scatter/marker_defaults":860,"../scatter/subtypes":864,"../scatter/text_defaults":865,"./attributes":892}],895:[function(a,b,c){"use strict";var d=a("../scatter/hover"),e=a("../../plots/cartesian/axes");b.exports=function(a,b,c,f){function g(a,b){r.push(a._hovertitle+": "+e.tickText(a,b,"hover").text)}var h=d(a,b,c,f);if(h&&h[0].index!==!1){var i=h[0];if(void 0===i.index){var j=1-i.y0/a.ya._length,k=a.xa._length,l=k*j/2,m=k-l;return i.x0=Math.max(Math.min(i.x0,m),l),i.x1=Math.max(Math.min(i.x1,m),l),h}var n=i.cd[i.index];i.a=n.a,i.b=n.b,i.c=n.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var o=i.trace,p=o._ternary,q=o.hoverinfo.split("+"),r=[];return q.indexOf("all")!==-1&&(q=["a","b","c"]),q.indexOf("a")!==-1&&g(p.aaxis,n.a),q.indexOf("b")!==-1&&g(p.baxis,n.b),q.indexOf("c")!==-1&&g(p.caxis,n.c),i.extraText=r.join("<br>"),h}}},{"../../plots/cartesian/axes":662,"../scatter/hover":853}],896:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="scatterternary",d.basePlotModule=a("../../plots/ternary"),d.categories=["ternary","symbols","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../plots/ternary":731,"../scatter/colorbar":847,"./attributes":892,"./calc":893,"./defaults":894,"./hover":895,"./plot":897,"./select":898,"./style":899}],897:[function(a,b,c){"use strict";var d=a("../scatter/plot");b.exports=function(a,b){var c=a.plotContainer;c.select(".scatterlayer").selectAll("*").remove();for(var e={xaxis:a.xaxis,yaxis:a.yaxis,plot:c},f=new Array(b.length),g=a.graphDiv.calcdata,h=0;h<g.length;h++){var i=b.indexOf(g[h][0].trace);i!==-1&&(f[i]=g[h],b[i]._ternary=a)}d(a.graphDiv,e,f)}},{"../scatter/plot":861}],898:[function(a,b,c){"use strict";var d=a("../scatter/select");b.exports=function(a,b){var c=d(a,b);if(c){var e,f,g,h=a.cd;for(g=0;g<c.length;g++)e=c[g],f=h[e.pointNumber],e.a=f.a,e.b=f.b,e.c=f.c,delete e.x,delete e.y;return c}}},{"../scatter/select":862}],899:[function(a,b,c){"use strict";var d=a("../scatter/style");b.exports=function(a){for(var b=a._fullLayout._modules,c=0;c<b.length;c++)if("scatter"===b[c].name)return;d(a)}},{"../scatter/style":863}],900:[function(a,b,c){"use strict";function d(a){return{valType:"boolean",dflt:!1}}function e(a){return{show:{valType:"boolean",dflt:!1},project:{x:d("x"),y:d("y"),z:d("z")},color:{valType:"color",dflt:f.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:f.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=a("../../components/color"),g=a("../../components/colorscale/attributes"),h=a("../../lib/extend").extendFlat;b.exports={z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},surfacecolor:{valType:"data_array"},cauto:g.zauto,cmin:g.zmin,cmax:g.zmax,colorscale:g.colorscale,autocolorscale:h({},g.autocolorscale,{dflt:!1}),reversescale:g.reversescale,showscale:g.showscale,contours:{x:e("x"),y:e("y"),z:e("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_nestedModules:{colorbar:"Colorbar"},_deprecated:{zauto:h({},g.zauto,{}),zmin:h({},g.zmin,{}),zmax:h({},g.zmax,{})}}},{"../../components/color":533,"../../components/colorscale/attributes":539,"../../lib/extend":625}],901:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){b.surfacecolor?d(b,b.surfacecolor,"","c"):d(b,b.z,"","c")}},{"../../components/colorscale/calc":540}],902:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.cmin,k=c.cmax,l=c.surfacecolor||c.z;if(d(j)||(j=e.aggNums(Math.min,null,l)),d(k)||(k=e.aggNums(Math.max,null,l)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var m=b[0].t.cb=h(a,i),n=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});m.fillcolor(n).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":536,"../../components/colorscale":548,"../../lib":632,"../../plots/plots":723,"fast-isnumeric":104}],903:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.surface=b,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function e(a,b){return void 0===b&&(b=1),a.map(function(a){var c=a[0],d=o(a[1]),e=d.toRgb();return{index:c,rgb:[e.r,e.g,e.b,b]}})}function f(a){var b=a[0].rgb,c=a[a.length-1].rgb;return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]&&b[3]===c[3]}function g(a){var b=a.shape,c=[b[0]+2,b[1]+2],d=k(new Float32Array(c[0]*c[1]),c);return n.assign(d.lo(1,1).hi(b[0],b[1]),a),n.assign(d.lo(1).hi(b[0],1),a.hi(b[0],1)),n.assign(d.lo(1,c[1]-1).hi(b[0],1),a.lo(0,b[1]-1).hi(b[0],1)),n.assign(d.lo(0,1).hi(1,b[1]),a.hi(1)),n.assign(d.lo(c[0]-1,1).hi(1,b[1]),a.lo(b[0]-1)),d.set(0,0,a.get(0,0)),d.set(0,c[1]-1,a.get(0,b[1]-1)),d.set(c[0]-1,0,a.get(b[0]-1,0)),d.set(c[0]-1,c[1]-1,a.get(b[0]-1,b[1]-1)),d}function h(a){var b=Math.max(a[0].shape[0],a[0].shape[1]);if(b<q){for(var c=q/b,d=[0|Math.floor(a[0].shape[0]*c+1),0|Math.floor(a[0].shape[1]*c+1)],e=d[0]*d[1],f=0;f<a.length;++f){var h=g(a[f]),i=k(new Float32Array(e),d);l(i,h,[c,0,0,0,c,0,0,0,1]),a[f]=i}return c}return 1}function i(a,b){var c=a.glplot.gl,e=j({gl:c}),f=new d(a,e,b.uid);return f.update(b),a.glplot.add(e),f}var j=a("gl-surface3d"),k=a("ndarray"),l=a("ndarray-homography"),m=a("ndarray-fill"),n=a("ndarray-ops"),o=a("tinycolor2"),p=a("../../lib/str2rgbarray"),q=128,r=d.prototype;r.handlePick=function(a){if(a.object===this.surface){var b=[Math.min(0|Math.round(a.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(a.data.index[1]/this.dataScale-1),this.data.z.length-1)],c=[0,0,0];Array.isArray(this.data.x[0])?c[0]=this.data.x[b[1]][b[0]]:c[0]=this.data.x[b[0]],Array.isArray(this.data.y[0])?c[1]=this.data.y[b[1]][b[0]]:c[1]=this.data.y[b[1]],
c[2]=this.data.z[b[1]][b[0]],a.traceCoordinate=c;var d=this.scene.fullSceneLayout;a.dataCoordinate=[d.xaxis.d2l(c[0])*this.scene.dataScale[0],d.yaxis.d2l(c[1])*this.scene.dataScale[1],d.zaxis.d2l(c[2])*this.scene.dataScale[2]];var e=this.data.text;return e&&e[b[1]]&&void 0!==e[b[1]][b[0]]?a.textLabel=e[b[1]][b[0]]:a.textLabel="",a.data.dataCoordinate=a.dataCoordinate.slice(),this.surface.highlight(a.data),this.scene.glplot.spikes.position=a.dataCoordinate,!0}},r.setContourLevels=function(){for(var a=[[],[],[]],b=!1,c=0;c<3;++c)this.showContour[c]&&(b=!0,a[c]=this.scene.contourLevels[c]);b&&this.surface.update({levels:a})},r.update=function(a){var b,c=this.scene,d=c.fullSceneLayout,g=this.surface,i=a.opacity,j=e(a.colorscale,i),l=a.z,n=a.x,o=a.y,q=d.xaxis,r=d.yaxis,s=d.zaxis,t=c.dataScale,u=l[0].length,v=l.length,w=[k(new Float32Array(u*v),[u,v]),k(new Float32Array(u*v),[u,v]),k(new Float32Array(u*v),[u,v])],x=w[0],y=w[1],z=c.contourLevels;this.data=a,m(w[2],function(a,b){return s.d2l(l[b][a])*t[2]}),Array.isArray(n[0])?m(x,function(a,b){return q.d2l(n[b][a])*t[0]}):m(x,function(a){return q.d2l(n[a])*t[0]}),Array.isArray(o[0])?m(y,function(a,b){return r.d2l(o[b][a])*t[1]}):m(y,function(a,b){return r.d2l(o[b])*t[1]});var A={colormap:j,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:1};if(A.intensityBounds=[a.cmin,a.cmax],a.surfacecolor){var B=k(new Float32Array(u*v),[u,v]);m(B,function(b,c){return a.surfacecolor[c][b]}),w.push(B)}else A.intensityBounds[0]*=t[2],A.intensityBounds[1]*=t[2];this.dataScale=h(w),a.surfacecolor&&(A.intensity=w.pop()),"opacity"in a&&a.opacity<1&&(A.opacity=.25*a.opacity);var C=[!0,!0,!0],D=["x","y","z"];for(b=0;b<3;++b){var E=a.contours[D[b]];C[b]=E.highlight,A.showContour[b]=E.show||E.highlight,A.showContour[b]&&(A.contourProject[b]=[E.project.x,E.project.y,E.project.z],E.show?(this.showContour[b]=!0,A.levels[b]=z[b],g.highlightColor[b]=A.contourColor[b]=p(E.color),E.usecolormap?g.highlightTint[b]=A.contourTint[b]=0:g.highlightTint[b]=A.contourTint[b]=1,A.contourWidth[b]=E.width):this.showContour[b]=!1,E.highlight&&(A.dynamicColor[b]=p(E.highlightcolor),A.dynamicWidth[b]=E.highlightwidth))}f(j)&&(A.vertexColor=!0),A.coords=w,g.update(A),g.visible=a.visible,g.enableDynamic=C,g.snapToData=!0,"lighting"in a&&(g.ambientLight=a.lighting.ambient,g.diffuseLight=a.lighting.diffuse,g.specularLight=a.lighting.specular,g.roughness=a.lighting.roughness,g.fresnel=a.lighting.fresnel),"lightposition"in a&&(g.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z]),i&&i<1&&(g.supportsTransparency=!0)},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},b.exports=i},{"../../lib/str2rgbarray":645,"gl-surface3d":231,ndarray:427,"ndarray-fill":417,"ndarray-homography":419,"ndarray-ops":421,tinycolor2:489}],904:[function(a,b,c){"use strict";function d(a,b,c){b in a&&!(c in a)&&(a[c]=a[b])}var e=a("../../lib"),f=a("../../components/colorscale/defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,d){return e.coerce(a,b,g,c,d)}var j,k,l=i("z");if(!l)return void(b.visible=!1);var m=l[0].length,n=l.length;if(i("x"),i("y"),!Array.isArray(b.x))for(b.x=[],j=0;j<m;++j)b.x[j]=j;if(i("text"),!Array.isArray(b.y))for(b.y=[],j=0;j<n;++j)b.y[j]=j;["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(a){i(a)});var o=i("surfacecolor");i("colorscale");var p=["x","y","z"];for(j=0;j<3;++j){var q="contours."+p[j],r=i(q+".show"),s=i(q+".highlight");if(r||s)for(k=0;k<3;++k)i(q+".project."+p[k]);r&&(i(q+".color"),i(q+".width"),i(q+".usecolormap")),s&&(i(q+".highlightcolor"),i(q+".highlightwidth"))}o||(d(a,"zmin","cmin"),d(a,"zmax","cmax"),d(a,"zauto","cauto")),f(a,b,h,i,{prefix:"",cLetter:"c"})}},{"../../components/colorscale/defaults":543,"../../lib":632,"./attributes":900}],905:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("./colorbar"),d.calc=a("./calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="surface",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d","noOpacity"],d.meta={},b.exports=d},{"../../plots/gl3d":702,"./attributes":900,"./calc":901,"./colorbar":902,"./convert":903,"./defaults":904}],906:[function(a,b,c){"use strict";function d(a,b){if("string"==typeof b&&b){var c=g.nestedProperty(a,b).get();return Array.isArray(c)?c:[]}return!!Array.isArray(b)&&b.slice()}function e(a,b,c){var d;return Array.isArray(c)?(d={type:i(c),_categories:[]},j(d)):d=h.getFromTrace(a,b,c),d?d.d2c:"ids"===c?function(a){return String(a)}:function(a){return+a}}function f(a,b){function c(a){return a.indexOf(e)!==-1}var d,e=a.operation,f=a.value,g=Array.isArray(f);switch(c(k)?d=b(g?f[0]:f):c(l)?d=g?[b(f[0]),b(f[1])]:[b(f),b(f)]:c(m)&&(d=g?f.map(b):[b(f)]),e){case"=":return function(a){return b(a)===d};case"<":return function(a){return b(a)<d};case"<=":return function(a){return b(a)<=d};case">":return function(a){return b(a)>d};case">=":return function(a){return b(a)>=d};case"[]":return function(a){var c=b(a);return c>=d[0]&&c<=d[1]};case"()":return function(a){var c=b(a);return c>d[0]&&c<d[1]};case"[)":return function(a){var c=b(a);return c>=d[0]&&c<d[1]};case"(]":return function(a){var c=b(a);return c>d[0]&&c<=d[1]};case"][":return function(a){var c=b(a);return c<=d[0]||c>=d[1]};case")(":return function(a){var c=b(a);return c<d[0]||c>d[1]};case"](":return function(a){var c=b(a);return c<=d[0]||c>d[1]};case")[":return function(a){var c=b(a);return c<d[0]||c>=d[1]};case"{}":return function(a){return d.indexOf(b(a))!==-1};case"}{":return function(a){return d.indexOf(b(a))===-1}}}var g=a("../lib"),h=a("../plots/cartesian/axis_ids"),i=a("../plots/cartesian/axis_autotype"),j=a("../plots/cartesian/set_convert"),k=["=","<",">=",">","<="],l=["[]","()","[)","(]","][",")(","](",")["],m=["{}","}{"];c.moduleType="transform",c.name="filter",c.attributes={enabled:{valType:"boolean",dflt:!0},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x"},operation:{valType:"enumerated",values:[].concat(k).concat(l).concat(m),dflt:"="},value:{valType:"any",dflt:0}},c.supplyDefaults=function(a){function b(b,e){return g.coerce(a,d,c.attributes,b,e)}var d={},e=b("enabled");return e&&(b("operation"),b("value"),b("target")),d},c.calcTransform=function(a,b,c){function h(a,c){var d=o[a],e=g.nestedProperty(b,a).get();e.push(d[c])}if(c.enabled){var i=c.target,j=d(b,i),k=j.length;if(k){for(var l=e(a,b,i),m=f(c,l),n=g.findArrayAttributes(b),o={},p=0;p<n.length;p++){var q=n[p],r=g.nestedProperty(b,q);o[q]=g.extendDeep([],r.get()),r.set([])}for(var s=0;s<k;s++){var t=j[s];if(m(t))for(var u=0;u<n.length;u++)h(n[u],s)}}}}},{"../lib":632,"../plots/cartesian/axis_autotype":663,"../plots/cartesian/axis_ids":665,"../plots/cartesian/set_convert":677}],907:[function(a,b,c){"use strict";function d(a,b){g.nestedProperty(a,b).set([])}function e(a,b,c,d){g.nestedProperty(a,d).set(g.nestedProperty(a,d).get().concat([g.nestedProperty(b,d).get()[c]]))}function f(a,b){var c=b.transform,f=a.transforms[b.transformIndex].groups;if(!Array.isArray(f)||0===f.length)return a;for(var h=g.filterUnique(f),i=new Array(h.length),j=f.length,k=g.findArrayAttributes(a),l=c.style||{},m=0;m<h.length;m++){var n=h[m],o=i[m]=g.extendDeepNoArrays({},a);k.forEach(d.bind(null,o));for(var p=0;p<j;p++)f[p]===n&&k.forEach(e.bind(0,o,a,p));o.name=n,o=g.extendDeepNoArrays(o,l[n]||{})}return i}var g=a("../lib");c.moduleType="transform",c.name="groupby",c.attributes={enabled:{valType:"boolean",dflt:!0},groups:{valType:"data_array",dflt:[]},style:{valType:"any",dflt:{}}},c.supplyDefaults=function(a){function b(b,e){return g.coerce(a,d,c.attributes,b,e)}var d={},e=b("enabled");return e?(b("groups"),b("style"),d):d},c.transform=function(a,b){for(var c=[],d=0;d<a.length;d++)c=c.concat(f(a[d],b));return c}},{"../lib":632}]},{},[15])(15)}),$.fn.enable=function(){this.attr("disabled",!1)},$.fn.disable=function(){this.attr("disabled",!0)};var requirejs,require,define;!function(global,setTimeout){function commentReplace(a,b){return b||""}function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){!c&&hasProp(a,e)||(!d||"object"!=typeof b||!b||isArray(b)||isFunction(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),mixin(a[e],b,c,d)))}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;b<a.length;b++)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(0===b||1===b&&".."===a[2]||".."===a[b-1])continue;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=c&&c.split("/"),r=x.map,s=r&&r["*"];if(a&&(a=a.split("/"),k=a.length-1,x.nodeIdCompat&&jsSuffixRegExp.test(a[k])&&(a[k]=a[k].replace(jsSuffixRegExp,"")),"."===a[0].charAt(0)&&q&&(p=q.slice(0,q.length-1),a=p.concat(a)),b(a),a=a.join("/")),d&&r&&(q||s)){g=a.split("/");a:for(h=g.length;h>0;h-=1){if(j=g.slice(0,h).join("/"),q)for(i=q.length;i>0;i-=1)if(f=getOwn(r,q.slice(0,i).join("/")),f&&(f=getOwn(f,j))){l=f,m=h;break a}!n&&s&&getOwn(s,j)&&(n=getOwn(s,j),o=h)}!l&&n&&(l=n,m=o),l&&(g.splice(0,m,l),a=g.join("/"))}return e=getOwn(x.pkgs,a),e?e:a}function d(a){isBrowser&&each(scripts(),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName)return b.parentNode.removeChild(b),!0})}function e(a){var b=getOwn(x.paths,a);if(b&&isArray(b)&&b.length>1)return b.shift(),u.require.undef(a),u.makeRequire(null,{skipMap:!0})([a]),!0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(F+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):a.indexOf("!")===-1?c(a,l,e):a:(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(G+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(each(globalDefQueue,function(a){var b=a[0];"string"==typeof b&&(u.defQueueMap[b]=!0),B.push(a)}),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c=1e3*x.waitSeconds,f=c&&u.startTime+c<(new Date).getTime(),g=[],h=[],i=!1,k=!0;if(!s){if(s=!0,eachProp(z,function(a){var c=a.map,j=c.id;if(a.enabled&&(c.isDefine||h.push(a),!a.error))if(!a.inited&&f)e(j)?(b=!0,i=!0):(g.push(j),d(j));else if(!a.inited&&a.fetched&&c.isDefine&&(i=!0,!c.prefix))return k=!1}),f&&g.length)return a=makeError("timeout","Load timeout for modules: "+g,null,g),a.contextName=u.contextName,j(a);k&&each(h,function(a){m(a,{},{})}),f&&!b||!i||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}u.defQueueMap={}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E={},F=1,G=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){if(a.usingExports=!0,a.map.isDefine)return a.exports?C[a.map.id]=a.exports:a.exports=C[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return getOwn(x.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?void u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&void 0===e&&(b=this.module,b?e=b.exports:this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;if(this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad)){var h=[];each(this.depMaps,function(a){h.push(a.normalizedMap||a)}),req.onResourceLoad(u,this.map,h)}l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(u.defQueueMap,c)||this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=getOwn(E,this.map.id),n=this.map.name,o=this.map.parentMap?this.map.parentMap.name:null,p=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(n=d.normalize(n,function(a){return c(a,o,!0)})||""),f=g(a.prefix+"!"+n,this.map.parentMap),i(f,"defined",bind(this,function(a){this.map.normalizedMap=f,this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),void(k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()))):m?(this.map.url=u.nameToUrl(m),void this.load()):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),p([f],e)}),void d.load(a.name,p,e,x))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,i(a,"defined",bind(this,function(a){this.undefed||(this.defineDep(b,a),this.check())})),this.errback?i(a,"error",bind(this,this.errback)):this.events.error&&i(a,"error",bind(this,function(a){this.emit("error",a)}))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,defQueueMap:{},Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){if(a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/"),"string"==typeof a.urlArgs){var b=a.urlArgs;a.urlArgs=function(a,c){return(c.indexOf("?")===-1?"?":"&")+b}}var c=x.shim,d={paths:!0,bundles:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?(x[b]||(x[b]={}),mixin(x[b],a,!0,!0)):x[b]=a}),a.bundles&&eachProp(a.bundles,function(a,b){each(a,function(a){a!==b&&(E[a]=b)})}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&each(a.packages,function(a){var b,c;a="string"==typeof a?{name:a}:a,c=a.name,b=a.location,b&&(x.paths[c]=a.location),x.pkgs[c]=a.name+"/"+(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b,null,!0))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return e!==-1&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);e.undefed=!0,d(a),delete C[a],delete D[c.url],delete A[a],eachReverse(B,function(b,c){b[0]===a&&B.splice(c,1)}),delete u.defQueueMap[a],e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(u.defQueueMap={},d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k=getOwn(x.pkgs,a);if(k&&(a=k),j=getOwn(E,a))return u.nameToUrl(j,b,c);if(req.jsExtRegExp.test(a))h=a+(b||"");else{for(d=x.paths,e=a.split("/"),f=e.length;f>0;f-=1)if(g=e.slice(0,f).join("/"),i=getOwn(d,g)){isArray(i)&&(i=i[0]),e.splice(0,f,i);break}h=e.join("/"),h+=b||(/^data\:|^blob\:|\?/.test(h)||c?"":".js"),h=("/"===h.charAt(0)||h.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+h}return x.urlArgs&&!/^blob\:/.test(h)?h+x.urlArgs(a,h):h},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);if(!e(b.id)){var c=[];return eachProp(y,function(a,d){0!==d.indexOf("_@r")&&each(a.depMaps,function(a){if(a.id===b.id)return c.push(d),!0})}),j(makeError("scripterror",'Script error for "'+b.id+(c.length?'", needed by: '+c.join(", "):'"'),a,[b.id]))}}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){if("interactive"===a.readyState)return interactiveScript=a}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.2",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a,b,c){var d=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return d.type=a.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,e.onNodeCreated&&e.onNodeCreated(d,e,b,c),currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{setTimeout(function(){},0),importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){if(head||(head=a.parentNode),dataMain=a.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),e?(e.defQueue.push([a,b,c]),e.defQueueMap[a]=!0):globalDefQueue.push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),function(a,b,c){function d(b,c){this.element=b,this.$element=a(b),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=a({}),this.options=a.extend({},e,c),this.init()}var e={active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,fluidHeight:!0,scrollToAccordion:!1,scrollToAccordionOnLoad:!0,scrollToAccordionOffset:0,accordionTabElement:"<div></div>",click:function(){},activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",container:"r-tabs",ul:"r-tabs-nav",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};d.prototype.init=function(){var c=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),a(b).on("resize",function(a){c._setState(a),c._equaliseHeights()}),a(b).on("hashchange",function(a){var d=c._getTabRefBySelector(b.location.hash),e=c._getTab(d);d>=0&&!e._ignoreHashChange&&!e.disabled&&c._openTab(a,c._getTab(d),!0)}),this.options.rotate!==!1&&this.startRotation(),this.options.fluidHeight!==!0&&c._equaliseHeights(),this.$element.bind("tabs-click",function(a,b){c.options.click.call(this,a,b)}),this.$element.bind("tabs-activate",function(a,b){c.options.activate.call(this,a,b)}),this.$element.bind("tabs-deactivate",function(a,b){c.options.deactivate.call(this,a,b)}),this.$element.bind("tabs-activate-state",function(a,b){c.options.activateState.call(this,a,b)}),this.$element.bind("tabs-load",function(a){var b;c._setState(a),c.options.startCollapsed===!0||"accordion"===c.options.startCollapsed&&"accordion"===c.state||(b=c._getStartTab(),c._openTab(a,b),c.options.load.call(this,a,b))}),this.$element.trigger("tabs-load")},d.prototype._loadElements=function(){var b=this,c=this.$element.children("ul:first"),d=[],e=0;return this.$element.addClass(b.options.classes.container),c.addClass(b.options.classes.ul),a("li",c).each(function(){var c,f,g,h,i,j=a(this),k=j.hasClass(b.options.classes.stateExcluded);if(!k){c=a("a",j),i=c.attr("href"),f=a(i),g=a(b.options.accordionTabElement).insertBefore(f),h=a("<a></a>").attr("href",i).html(c.html()).appendTo(g);var l={_ignoreHashChange:!1,id:e,disabled:a.inArray(e,b.options.disabled)!==-1,tab:a(this),anchor:a("a",j),panel:f,selector:i,accordionTab:g,accordionAnchor:h,active:!1};e++,d.push(l)}}),d},d.prototype._loadClasses=function(){for(var a=0;a<this.tabs.length;a++)this.tabs[a].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[a].anchor.addClass(this.options.classes.anchor),this.tabs[a].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[a].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[a].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[a].disabled&&(this.tabs[a].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[a].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},d.prototype._loadEvents=function(){for(var a=this,c=function(c){var d=a._getCurrentTab(),e=c.data.tab;c.preventDefault(),e.tab.trigger("tabs-click",e),e.disabled||(a.options.setHash&&(history.pushState?history.pushState(null,null,b.location.origin+b.location.pathname+b.location.search+e.selector):b.location.hash=e.selector),c.data.tab._ignoreHashChange=!0,(d!==e||a._isCollapisble())&&(a._closeTab(c,d),d===e&&a._isCollapisble()||a._openTab(c,e,!1,!0)))},d=0;d<this.tabs.length;d++)this.tabs[d].anchor.on(a.options.event,{tab:a.tabs[d]},c),this.tabs[d].accordionAnchor.on(a.options.event,{tab:a.tabs[d]},c)},d.prototype._getStartTab=function(){var a,c=this._getTabRefBySelector(b.location.hash);return a=c>=0&&!this._getTab(c).disabled?this._getTab(c):this.options.active>0&&!this._getTab(this.options.active).disabled?this._getTab(this.options.active):this._getTab(0)},d.prototype._setState=function(b){var d,e=a("ul:first",this.$element),f=this.state,g="string"==typeof this.options.startCollapsed;e.is(":visible")?this.state="tabs":this.state="accordion",this.state!==f&&(this.$element.trigger("tabs-activate-state",{oldState:f,newState:this.state}),f&&g&&this.options.startCollapsed!==this.state&&this._getCurrentTab()===c&&(d=this._getStartTab(b),this._openTab(b,d)))},d.prototype._openTab=function(b,c,d,e){var f,g=this;d&&this._closeTab(b,this._getCurrentTab()),e&&this.rotateInterval>0&&this.stopRotation(),c.active=!0,c.tab.removeClass(g.options.classes.stateDefault).addClass(g.options.classes.stateActive),c.accordionTab.removeClass(g.options.classes.stateDefault).addClass(g.options.classes.stateActive),g._doTransition(c.panel,g.options.animation,"open",function(){var d="tabs-load"!==b.type||g.options.scrollToAccordionOnLoad;c.panel.removeClass(g.options.classes.stateDefault).addClass(g.options.classes.stateActive),"accordion"!==g.getState()||!g.options.scrollToAccordion||g._isInView(c.accordionTab)&&"default"===g.options.animation||!d||(f=c.accordionTab.offset().top-g.options.scrollToAccordionOffset,"default"!==g.options.animation&&g.options.duration>0?a("html, body").animate({scrollTop:f},g.options.duration):a("html, body").scrollTop(f))}),this.$element.trigger("tabs-activate",c)},d.prototype._closeTab=function(a,b){var d,e=this,f="string"==typeof e.options.animationQueue;b!==c&&(d=!(!f||e.getState()!==e.options.animationQueue)||!f&&e.options.animationQueue,b.active=!1,b.tab.removeClass(e.options.classes.stateActive).addClass(e.options.classes.stateDefault),e._doTransition(b.panel,e.options.animation,"close",function(){b.accordionTab.removeClass(e.options.classes.stateActive).addClass(e.options.classes.stateDefault),b.panel.removeClass(e.options.classes.stateActive).addClass(e.options.classes.stateDefault)},!d),this.$element.trigger("tabs-deactivate",b))},d.prototype._doTransition=function(a,b,c,d,e){
var f,g=this;switch(b){case"slide":f="open"===c?"slideDown":"slideUp";break;case"fade":f="open"===c?"fadeIn":"fadeOut";break;default:f="open"===c?"show":"hide",g.options.duration=0}this.$queue.queue("responsive-tabs",function(e){a[f]({duration:g.options.duration,complete:function(){d.call(a,b,c),e()}})}),("open"===c||e)&&this.$queue.dequeue("responsive-tabs")},d.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},d.prototype._getTab=function(a){return this.tabs[a]},d.prototype._getTabRefBySelector=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].selector===a)return b;return-1},d.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},d.prototype._getNextTabRef=function(a){var b=a||this._getCurrentTabRef(),c=b===this.tabs.length-1?0:b+1;return this._getTab(c).disabled?this._getNextTabRef(c):c},d.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},d.prototype._getCurrentTabRef=function(){for(var a=0;a<this.tabs.length;a++)if(this.tabs[a].active)return a;return-1},d.prototype._equaliseHeights=function(){var b=0;a.each(a.map(this.tabs,function(a){return b=Math.max(b,a.panel.css("minHeight","").height()),a.panel}),function(){})},d.prototype._isInView=function(c){var d=a(b).scrollTop(),e=d+a(b).height(),f=c.offset().top,g=f+c.height();return g<=e&&f>=d},d.prototype.activate=function(a,b){var c=jQuery.Event("tabs-activate"),d=this._getTab(a);d.disabled||this._openTab(c,d,!0,b||!0)},d.prototype.deactivate=function(a){var b=jQuery.Event("tabs-dectivate"),c=this._getTab(a);c.disabled||this._closeTab(b,c)},d.prototype.enable=function(a){var b=this._getTab(a);b&&(b.disabled=!1,b.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),b.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},d.prototype.disable=function(a){var b=this._getTab(a);b&&(b.disabled=!0,b.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),b.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},d.prototype.getState=function(){return this.state},d.prototype.startRotation=function(b){var c=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var a=jQuery.Event("rotate");c._openTab(a,c._getTab(c._getNextTabRef()),!0)},b||(a.isNumeric(c.options.rotate)?c.options.rotate:4e3))},d.prototype.stopRotation=function(){b.clearInterval(this.rotateInterval),this.rotateInterval=0},d.prototype.option=function(a,b){return b&&(this.options[a]=b),this.options[a]},a.fn.responsiveTabs=function(b){var e,f=arguments;return b===c||"object"==typeof b?this.each(function(){a.data(this,"responsivetabs")||a.data(this,"responsivetabs",new d(this,b))}):"string"==typeof b&&"_"!==b[0]&&"init"!==b?(e=a.data(this[0],"responsivetabs"),"destroy"===b&&a.data(this,"responsivetabs",null),e instanceof d&&"function"==typeof e[b]?e[b].apply(e,Array.prototype.slice.call(f,1)):this):void 0}}(jQuery,window);var SettingsController=function(){function a(){$("#trello-connect").on("click",b),$("#email-info").popover()}function b(){TrelloController.authorize(c)}var c=function(){var a=new LoadingIndicator($("#trello-connect-status span"));a.show("Saving..."),$("#trello-connect").disable(),$.ajax({url:"/settings/trello/connect",data:{token:Trello.token()},method:"PUT",success:function(b){b=jQuery.parseJSON(b),a.success("Currently connected to Trello as <strong>"+b.username+"</strong>"),Ollert.loadAvatar(b.gravatar_hash)},error:function(b){a.error(b.responseText+" ("+b.status+": "+b.statusText+")")},complete:function(){$("#trello-connect").enable()}})};return{init:a}}();!function(a){"use strict";var b=a.getCharWidthsArray=function(a,b){b||(b={});var c,d,e,f=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,g=f.fof?f.fof:1,h=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,i=h.fof?h.fof:1,j=0,k=f[0]||g,l=[];for(c=0,d=a.length;c<d;c++)e=a.charCodeAt(c),l.push((f[e]||k)/g+(h[e]&&h[e][j]||0)/i),j=e;return l},c=function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c},d=a.getStringUnitWidth=function(a,d){return c(b.call(this,a,d))},e=function(a,b,c,d){for(var e=[],f=0,g=a.length,h=0;f!==g&&h+b[f]<c;)h+=b[f],f++;e.push(a.slice(0,f));var i=f;for(h=0;f!==g;)h+b[f]>d&&(e.push(a.slice(i,f)),h=0,i=f),h+=b[f],f++;return i!==f&&e.push(a.slice(i,f)),e},f=function(a,f,g){g||(g={});var h,i,j,k,l,m,n=[],o=[n],p=g.textIndent||0,q=0,r=0,s=a.split(" "),t=b(" ",g)[0];if(m=g.lineIndent===-1?s[0].length+2:g.lineIndent||0){var u=Array(m).join(" "),v=[];s.map(function(a){a=a.split(/\s*\n/),a.length>1?v=v.concat(a.map(function(a,b){return(b&&a.length?"\n":"")+a})):v.push(a[0])}),s=v,m=d(u,g)}for(j=0,k=s.length;j<k;j++){var w=0;if(h=s[j],m&&"\n"==h[0]&&(h=h.substr(1),w=1),i=b(h,g),r=c(i),p+q+r>f||w){if(r>f){for(l=e(h,i,f-(p+q),f),n.push(l.shift()),n=[l.pop()];l.length;)o.push([l.shift()]);r=c(i.slice(h.length-n[0].length))}else n=[h];o.push(n),p=r+m,q=t}else n.push(h),p+=q+r,q=t}if(m)var x=function(a,b){return(b?u:"")+a.join(" ")};else var x=function(a){return a.join(" ")};return o.map(x)};a.splitTextToSize=function(a,b,c){c||(c={});var d,e=c.fontSize||this.internal.getFontSize(),g=function(a){var b={0:1},c={};if(a.widths&&a.kerning)return{widths:a.widths,kerning:a.kerning};var d=this.internal.getFont(a.fontName,a.fontStyle),e="Unicode";return d.metadata[e]?{widths:d.metadata[e].widths||b,kerning:d.metadata[e].kerning||c}:{widths:b,kerning:c}}.call(this,c);d=Array.isArray(a)?a:a.split(/\r?\n/);var h=1*this.internal.scaleFactor*b/e;g.textIndent=c.textIndent?1*c.textIndent*this.internal.scaleFactor/e:0,g.lineIndent=c.lineIndent;var i,j,k=[];for(i=0,j=d.length;i<j;i++)k=k.concat(f(d[i],h,g));return k}}(jsPDF.API),function(a){"use strict";var b=function(a){for(var b="0123456789abcdef",c="klmnopqrstuvwxyz",d={},e=0;e<c.length;e++)d[c[e]]=b[e];var f,g,h,i,j,k={},l=1,m=k,n=[],o="",p="",q=a.length-1;for(e=1;e!=q;)j=a[e],e+=1,"'"==j?g?(i=g.join(""),g=f):g=[]:g?g.push(j):"{"==j?(n.push([m,i]),m={},i=f):"}"==j?(h=n.pop(),h[0][h[1]]=m,i=f,m=h[0]):"-"==j?l=-1:i===f?d.hasOwnProperty(j)?(o+=d[j],i=parseInt(o,16)*l,l=1,o=""):o+=j:d.hasOwnProperty(j)?(p+=d[j],m[i]=parseInt(p,16)*l,l=1,i=f,p=""):p+=j;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},e={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFont",function(a){var b,c,f,g="Unicode";b=e[g][a.PostScriptName],b&&(c=a.metadata[g]?a.metadata[g]:a.metadata[g]={},c.widths=b.widths,c.kerning=b.kerning),f=d[g][a.PostScriptName],f&&(c=a.metadata[g]?a.metadata[g]:a.metadata[g]={},c.encoding=f,f.codePages&&f.codePages.length&&(a.encoding=f.codePages[0]))}])}(jsPDF.API),function(a){"use strict";function b(a,b,c){var d=function(){var d=a.lists,e=_.findWhere(d,{id:b}),f=_.findWhere(d,{id:c}),g=Math.max(d.indexOf(e),0),h=f?d.indexOf(f):d.length;return d.slice(g,h)},f=a.times,h=function(a){var b=_.find(d(),function(b){return b.id===a});return b?b.name:null};this.average=function(){var a,b=_.pairs(g(_.pluck(f,"times")));return a=_.reduce(b,function(a,b){var c=b[0],d=b[1],e=h(c);return _.isString(e)&&(a.lists.push(e),a.total_days.push(d.average("total_days")),a.business_days.push(d.average("business_days"))),a},{lists:[],total_days:[],business_days:[]}),e(a,_.pluck(d(),"name"))}}var c=function(a){return _.property(a)(this)/this.list_count},d=function(){return{business_days:0,total_days:0,list_count:0,average:c}},e=function(a,b){if(_.isEmpty(a.lists))return a;var c=_.zip(a.lists,a.total_days,a.business_days),d=_.map(b,function(a){var b=function(b){return _.first(b)===a};return _.find(c,b)}),e=_.compact(d);return _.object(["lists","total_days","business_days"],_.zip.apply(_,e))},f=function(a,b){var c=function(b){return a[b]=a[b]||d()},e=c(_.first(b)),f=_.last(b);e.total_days+=f.total_days,e.business_days+=f.business_days,e.list_count++},g=function(a){return _.reduce(a,function(a,b){return _.each(_.pairs(b),_.partial(f,a)),a},{})};a.TimeTracker=b}(Ollert);
//# sourceMappingURL=ollert.min.js.map