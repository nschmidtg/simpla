.container
  .row
    %h4
      %a{href: "/dashboard",style: "color:#808080"}Indicadores del Municipio >
  
    %h2.ollert-header
      .text-center.col-xs-12.no-padding
        Resumen #{@mun.name}
    .row
      .col-md-12.col-sm-12.col-xs-12.no-padding 
        .col-md-3.col-sm-12.col-xs-12
          .boards-list-item-link-blue
            %img.svg-element#boton{src: "/img/Iconos-blancos-23.svg", type:"image/svg+xml", style:"width:65%;"}
            %h1 #{@boards.count}
            %h4 Proyectos Abiertos
        .col-md-3.col-sm-12.col-xs-12
          .boards-list-item-link-blue
            %img.svg-element#boton{src: "/img/Iconos-blancos-22.svg", type:"image/svg+xml", style:"width:65%;"}
            %h1 #{@mun.fondos.count}
            %h4 Fondos
        .col-md-3.col-sm-12.col-xs-12
          .boards-list-item-link-blue
            %img.svg-element#boton{src: "/img/Iconos-blancos-28.svg", type:"image/svg+xml", style:"width:65%;"}
            %h1 #{@mun.users.count}
            %h4 Usuarios
        .col-md-3.col-sm-12.col-xs-12
          .boards-list-item-link-blue
            %img.svg-element#boton{src: "/img/Iconos-blancos-25.svg", type:"image/svg+xml", style:"width:65%;"}
            %h1 #{@mun.zones.count}
            %h4 Zonas
    .row
      .col-md-12.col-sm-12.col-xs-12.no-padding
        #container2
      .col-md-12.col-sm-12.col-xs-12
        #container1



%script
  $('#container2').highcharts({
  chart: {
  type: 'column'
  },
  title: {
  text: 'Proyectos por zona'
  },
  subtitle: {
  text: ''
  },
  xAxis: {
  type: 'category',
  labels: {
  rotation: -45,
  style: {
  fontSize: '11px',
  fontFamily: 'Verdana, sans-serif'
  }
  }
  },
  yAxis: {
  min: 0,
  title: {
  text: 'Cantidad de proyectos'
  }
  },
  legend: {
  enabled: false
  },
  tooltip: {
  pointFormat: 'Proyectos en la zona:<b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b><b>{point.extra} </b>',
  style: {"max-height":"100px","z-index":"8000","overflow":"scroll"},
  useHTML: true
  },
  series: [{
  name: 'Population',
  data: [
  - board_names=@mun.zones.first.boards.where(closed: "false").pluck(:name)
  - extra="<br>"
  - board_names.each do |bname|
    - extra=extra+bname+"<br>"
  {name:'#{@mun.zones.first.name}',y:#{@mun.zones.first.boards.where(closed: "false").count},extra:'#{extra}'},
  - @mun.zones.each do |zone|
    - if(zone!=@mun.zones.first)
      - board_names=zone.boards.where(closed: "false").pluck(:name)
      - extra="<br>"
      - board_names.each do |bname|
        - extra=extra+bname+"<br>"
      {name:"#{zone.name}",y:#{zone.boards.where(closed: "false").count},extra:'#{extra}'},
  ],
  dataLabels: {
  enabled: true,
  rotation: -360,
  color: '#FFFFFF',
  align: 'right',
  format: '{point.y}', // one decimal
  y: 10, // 10 pixels down from the top
  style: {
  fontSize: '13px',
  fontFamily: 'Verdana, sans-serif'
  }
  }
  }]
  });
  

%script
  $('#container1').highcharts({
  chart: {
  type: 'column'
  },
  title: {
  text: 'Proyectos por tipo'
  },
  subtitle: {
  text: ''
  },
  xAxis: {
  type: 'category',
  labels: {
  rotation: -45,
  style: {
  fontSize: '13px',
  fontFamily: 'Verdana, sans-serif'
  }
  }
  },
  yAxis: {
  title: {
  text: 'Total de proyectos'
  }

  },
  legend: {
  enabled: false
  },
  plotOptions: {
  series: {
  borderWidth: 0,
  dataLabels: {
  enabled: true,
  format: '{point.y}'
  }
  }
  },

  tooltip: {
  headerFormat: '<span style="font-size:11px">{series.name}:</span><br>',
  pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b> proyectos.<br/>'
  },

  series: [{
  name: 'Tipo de proyecto',
  colorByPoint: true,
  data: [
  {name:'#{@mun.tipos.first.name}',y: #{@mun.tipos.first.boards.where(closed: "false").count}},
  - @mun.tipos.each do |tipo|
    - if(tipo!=@mun.tipos.first)
      {name:"#{tipo.name}",y: #{tipo.boards.where(closed: "false").count}},
  ]
  }]
  
  });
    